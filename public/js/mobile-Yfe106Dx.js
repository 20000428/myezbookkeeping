import"./modulepreload-polyfill-B5Qt9EMX.js";import{f as Re,c as re,A as o,s as i,o as a,m as bt,t as e,x as l,k as Zl,h as $,F as ke,V as t,q as Te,l as r,y as u,i as s,n as R,z as ne,r as S,w as Dl,a8 as ut,ab as vt,as as hl,g as jt,a2 as Gl,a3 as St,at as Gn,a1 as ka,aj as Ma,ay as jn,aq as Ea,ar as La,av as Ra,aw as Oa,ax as za,v as Ya}from"./vendor-common-DLL9SaRw.js";import{f as Jt,a as dl,F as Ha,b as qa,c as Wa,d as Ga,e as ja,g as Ka,h as Za,i as Xa,j as Qa,k as Ja,l as eo,m as to,n as lo,o as no,p as ao,q as oo,r as so,s as io,t as ro,u as uo,v as co,w as fo,x as po,y as mo,z as vo,A as go,B as yo,C as ho,D as _o,E as ko,G as bo,H as wo,I as To,J as Co,K as So,L as xo}from"./vendor-mobile-DjwFb5zp.js";import{cD as Ao,cL as $o,u as ze,d5 as Do,bC as Io,d as el,ao as an,bH as Vo,bI as zn,bD as Bt,bE as ea,bu as jl,ar as Zt,bG as Cn,bK as Fo,bv as Sn,bt as Ul,bs as qt,dn as Cl,dp as ta,dq as Po,dr as nl,I as wt,cM as Uo,ds as kl,cO as ln,a8 as xl,bo as Sl,cN as la,a9 as Bl,aA as cl,cQ as gn,cR as Bo,cS as No,aB as Kl,dk as Kn,cV as Mo,cW as Eo,cX as Lo,dt as Ro,d6 as Oo,cU as na,d7 as zo,d8 as Yo,d9 as Ho,da as aa,cE as qo,c$ as Wo,du as Go,c_ as jo,cZ as ba,cY as Ko,bM as Zo,dv as Un,cB as ul,ab as Bn,aj as wa,Z as on,ac as Yn,d3 as Xo,a6 as yl,d4 as Qo,db as Jo,_ as Ml,al as es,am as ts,F as _l,k as sn,ak as Ta,N as ls,O as ol,P as sl,$ as Zn,Q as ns,a5 as Mt,bz as oa,r as Nl,W as rn,U as Dt,b as El,h as as,dw as Ca,j as Hn,K as wn,A as Xn,l as yn,m as os,n as sa,o as ss,p as is,aq as kt,q as Sa,y as rs,c as Ll,z as us,B as cs,C as ds,D as fs,E as ps,G as ms,bf as vs,bh as Ut,bk as nn,bn as xa,bl as vl,bm as hn,bp as gs,bq as Aa,br as $a,bw as ys,bx as Tn,X as hs,aO as ia,M as We,by as _s,bj as gl,Y as ks,a2 as Xe,a0 as Ne,dx as bs,a4 as Qt,a3 as Nn,a1 as ws,a7 as Ts,aa as _n,cI as Al,cH as $l,af as Tt,ah as Mn,ag as En,ai as Cs,ad as Ss,ae as xs,a as qn,b_ as As,aV as Da,b1 as Ht,bT as $s,bU as Ln,bV as Rn,bW as Ds,bY as Ia,bZ as Is,aC as Va,bN as Vs,aQ as Fs,bO as Ge,bP as _t,bQ as ra,bR as kn,bS as ua,cv as Ps,cm as Fa,dy as Pa,cw as Us,aU as Bs,aW as Ns,aX as Ms,aY as Es,aZ as Ls,a_ as Rs,a$ as Os,b0 as zs,b2 as Ys,b3 as Hs,b4 as qs,b5 as Ws,b6 as Gs,b7 as js,b8 as Ks,b9 as Zs,ba as Xs,bb as Qs,bc as Js,bd as ei,be as ti,cx as xn,t as li,s as Wn,f as ni,cn as ai,co as oi,cp as bn,cq as si,cr as ii,cs as ri,ct as ui,cu as ci,cA as di,cy as ca,cz as da,cC as fi,ca as pi,cl as mi,bB as vi,ck as gi,cf as yi,cc as Ua,ch as hi,cg as Wl,ci as _i,c3 as ki,dz as bi,dA as wi,c4 as Ti,b$ as Ci,aH as Si,c0 as xi,c1 as Ai,ax as $i,c2 as Di,dB as Ii,dC as Vi,c6 as Fi,dD as Pi,dE as Ui,c8 as Bi,dF as fa,dg as Ni,dG as pa,T as ma,df as Mi,dh as Ei,dj as Li,dl as Ri,dm as Oi}from"./common-DXLIsG8X.js";import{_ as zi}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./moment-BNeaYGUs.js";import"./locales-rb_tTC-x.js";const Yi=Re({__name:"ItemIcon",props:{iconType:{},iconId:{},color:{},defaultColor:{},additionalColorAttr:{},size:{}},setup(f){const _=f,{style:n,getAccountIcon:h,getCategoryIcon:F}=Ao(_),V=re(()=>_.iconType==="fixed-f7"?_.iconId.toString():""),k=re(()=>_.iconType==="account"?h(_.iconId):_.iconType==="category"?F(_.iconId):_.iconType==="fixed"?_.iconId.toString():"");return(A,C)=>{const P=o("f7-icon");return a(),i(P,{f7:V.value,icon:k.value,style:bt(e(n))},{default:l(()=>[Zl(A.$slots,"default")]),_:3},8,["f7","icon","style"])}}}),Hi={key:1},qi=Re({__name:"LanguageSelectButton",props:{disabled:{type:Boolean},includeSystemDefault:{type:Boolean},useModelValue:{type:Boolean},modelValue:{}},emits:["update:modelValue"],setup(f,{emit:_}){const n=f,h=_,{allLanguages:F,currentLanguageName:V,updateLanguage:k,isLanguageSelected:A}=$o(n,h);return(C,P)=>{const m=o("f7-button"),c=o("f7-icon"),b=o("f7-list-item"),p=o("f7-list"),d=o("f7-popover");return a(),$(ke,null,[t(m,{class:"language-select-button",small:"","popover-open":".lang-popover-menu",disabled:f.disabled,text:e(V)},null,8,["disabled","text"]),t(d,{class:"lang-popover-menu"},{default:l(()=>[t(p,{dividers:""},{default:l(()=>[(a(!0),$(ke,null,Te(e(F),x=>(a(),i(b,{link:"#","no-chevron":"","popover-close":"",key:x.languageTag,title:x.nativeDisplayName,onClick:E=>e(k)(x.languageTag)},{after:l(()=>[e(A)(x.languageTag)?(a(),i(c,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"})):r("",!0),e(A)(x.languageTag)?r("",!0):(a(),$("span",Hi,u(x.displayName),1))]),_:2},1032,["title","onClick"]))),128))]),_:1})]),_:1})],64)}}}),Wi={class:"pie-chart-container"},Gi=["viewBox"],ji=["r","stroke","stroke-dasharray","stroke-dashoffset","onClick"],Ki=["r"],Zi=["r"],Xi={id:"pie-chart-text-clip"},Qi=["x","y","width","height"],Ji={key:2,class:"pie-chart-text-group","clip-path":"url(#pie-chart-text-clip)"},er={key:0,class:"pie-chart-toolbox-container padding-horizontal"},tr={class:"pie-chart-toolbox"},lr={class:"pie-chart-toolbox-info"},nr={key:0},ar={key:1},or={key:0,class:"skeleton-text"},sr={key:1},ir={key:2,class:"skeleton-text"},Gt=100,rr=Re({__name:"PieChart",props:{showCenterText:{type:Boolean},showSelectedItemInfo:{type:Boolean},centerTextBackground:{},skeleton:{type:Boolean},items:{},idField:{},nameField:{},valueField:{},percentField:{},colorField:{},hiddenField:{},minValidPercent:{},defaultCurrency:{},showValue:{type:Boolean},showPercent:{type:Boolean},enableClickItem:{type:Boolean}},emits:["click"],setup(f,{emit:_}){const n=f,h=_,{tt:F}=ze(),{selectedIndex:V,validItems:k}=Do(n),A=Gt*Math.PI,C=re(()=>{let D=0;for(const T of k.value)D+=T.value;return D}),P=re(()=>{if(C.value<=0)return 0;let D=0;for(let T=0;T<Math.min(V.value+1,k.value.length);T++){const M=k.value[T];M.actualPercent>0&&(T===V.value?D+=-A*(1-M.actualPercent)/2:D+=-A*(1-M.actualPercent))}return D});function m(D,T){const M={color:D};return T&&(M[T]=D),M}function c(D){const T=D.actualPercent*A;return`${T} ${A-T}`}function b(D,T,M){let w=0;for(const I of T){if(I===D)break;w+=I.actualPercent}if(M?M+=A/4:M=A/4,w<=0)return M;const U=w*A;return A-U+M}const p=re(()=>{if(!k.value||!k.value.length)return null;let D=V.value;return(D<0||D>=k.value.length)&&(D=0),k.value[D]??null});function d(D){V.value=D}function x(D){let T=V.value+D;for(;T<0;)T+=k.value.length;V.value=T%k.value.length}function E(D){n.enableClickItem&&h("click",D.sourceItem)}return(D,T)=>{const M=o("f7-icon"),w=o("f7-link"),U=o("f7-chip");return a(),$("div",Wi,[(a(),$("svg",{class:"pie-chart",viewBox:`${-Gt} ${-Gt} ${Gt*2} ${Gt*2}`},[s("circle",{class:"pie-chart-background",cx:"0",cy:"0",r:Gt}),(a(!0),$(ke,null,Te(e(k),(I,B)=>(a(),$("circle",{class:"pie-chart-item",fill:"transparent",cx:"0",cy:"0",r:Gt/2,stroke:I.color,"stroke-width":Gt,"stroke-dasharray":c(I),"stroke-dashoffset":b(I,e(k),P.value),key:B,onClick:L=>d(B)},null,8,ji))),128)),f.showCenterText?(a(),$("circle",{key:0,class:"pie-chart-text-background",cx:"0",cy:"0",stroke:"#ddd",style:bt({"--pie-chart-text-background":f.centerTextBackground?f.centerTextBackground:"#7f2020"}),r:Gt/2.5},null,12,Ki)):r("",!0),f.showCenterText?(a(),$("circle",{key:1,cx:"0",cy:"0",stroke:"#ddd",fill:"transparent",r:Gt/2.5},null,8,Zi)):r("",!0),s("clipPath",Xi,[s("rect",{x:-Gt/2.5+2,y:-Gt/2.5+2,width:Gt/1.25-4,height:Gt/1.25-4},null,8,Qi)]),f.showCenterText?(a(),$("g",Ji,[Zl(D.$slots,"default",{},void 0,!0)])):r("",!0)],8,Gi)),f.showSelectedItemInfo?(a(),$("div",er,[s("div",tr,[t(w,{class:R(["pie-chart-toolbox-button",{disabled:!!f.skeleton||!e(k)||e(k).length<=1}]),onClick:T[0]||(T[0]=I=>x(1))},{default:l(()=>[t(M,{class:"icon-with-direction",f7:"arrow_left"})]),_:1},8,["class"]),s("div",lr,[f.showPercent&&p.value?(a(),$("p",nr,[f.skeleton?(a(),i(U,{key:0,class:"chip-placeholder",outline:""},{default:l(()=>[...T[3]||(T[3]=[s("span",{class:"skeleton-text"},"Percent",-1)])]),_:1})):f.skeleton?r("",!0):(a(),i(U,{key:1,outline:"",text:p.value.displayPercent,style:bt(m(p.value?.color,"--f7-chip-outline-border-color"))},null,8,["text","style"]))])):f.showPercent&&(!e(k)||!e(k).length)?(a(),$("p",ar,[t(U,{outline:"",text:"---"})])):r("",!0),p.value?(a(),i(w,{key:2,class:"pie-chart-selected-item-info","no-link-class":!f.enableClickItem,onClick:T[1]||(T[1]=I=>E(p.value))},{default:l(()=>[f.skeleton?(a(),$("span",or,"Name")):!f.skeleton&&p.value.displayName?(a(),$("span",sr,u(p.value.displayName),1)):r("",!0),f.skeleton?(a(),$("span",ir,"Value")):!f.skeleton&&f.showValue?(a(),$("span",{key:3,style:bt(m(p.value?.color))},u(p.value.displayValue),5)):r("",!0),f.enableClickItem?(a(),i(M,{key:4,class:"item-navigate-icon icon-with-direction",f7:"chevron_right"})):r("",!0)]),_:1},8,["no-link-class"])):!e(k)||!e(k).length?(a(),i(w,{key:3,"no-link-class":!0},{default:l(()=>[ne(u(e(F)("No transaction data")),1)]),_:1})):r("",!0)]),t(w,{class:R(["pie-chart-toolbox-button",{disabled:!!f.skeleton||!e(k)||e(k).length<=1}]),onClick:T[2]||(T[2]=I=>x(-1))},{default:l(()=>[t(M,{class:"icon-with-direction",f7:"arrow_right"})]),_:1},8,["class"])])])):r("",!0)])}}}),ur=zi(rr,[["__scopeId","data-v-17cd811c"]]),cr={class:"display-flex no-padding-horizontal"},dr={class:"display-flex align-items-center statistics-icon"},fr={class:"statistics-item-end"},pr={class:"statistics-percent-line"},mr={class:"display-flex",style:{"flex-wrap":"wrap"}},vr=["onClick"],gr={class:"trends-bar-chart-legend-text"},yr={class:"display-flex no-padding-horizontal"},hr={class:"display-flex align-items-center statistics-icon"},_r={class:"statistics-list-item-text"},kr={key:0,class:"full-line statistics-percent-line statistics-multi-percent-line display-flex flex-direction-column"},br={class:"full-line display-flex flex-direction-row"},wr={key:0},Tr={key:0,class:"statistics-item-end"},Cr={class:"statistics-percent-line statistics-multi-percent-line display-flex"},Sr=Re({__name:"TrendsBarChart",props:{loading:{type:Boolean},chartMode:{},items:{},stacked:{type:Boolean},startTime:{},endTime:{},startYearMonth:{},endYearMonth:{},fiscalYearStart:{},sortingType:{},dataAggregationType:{},dateAggregationType:{},idField:{},nameField:{},valueField:{},colorField:{},hiddenField:{},displayOrdersField:{},translateName:{type:Boolean},defaultCurrency:{},enableClickItem:{type:Boolean}},emits:["click"],setup(f,{emit:_}){const n=f,h=_,{tt:F,formatUnixTimeToShortDate:V,formatUnixTimeToGregorianLikeShortYear:k,formatUnixTimeToGregorianLikeShortYearMonth:A,formatYearQuarterToGregorianLikeYearQuarter:C,formatUnixTimeToGregorianLikeFiscalYear:P,formatAmountToLocalizedNumeralsWithCurrency:m}=ze(),{allDateRanges:c,getItemName:b}=Io(n),p=el(),d=S(0),x=S({}),E=S({items:[],topPosition:0}),D=re(()=>T.value.legends.length<=1||n.stacked),T=re(()=>{const I={},B=[];for(const[N,z]of an(n.items)){if(n.hiddenField&&N[n.hiddenField])continue;const K=n.idField&&N[n.idField]?N[n.idField]:b(N[n.nameField]),W={id:K,name:n.nameField&&N[n.nameField]?b(N[n.nameField]):K,color:Vo(n.colorField&&N[n.colorField]?N[n.colorField]:zn[z%zn.length]),displayOrders:n.displayOrdersField&&N[n.displayOrdersField]?N[n.displayOrdersField]:[0]};if(B.push(W),x.value[K])continue;const q={};for(const g of N.items){let J="";n.chartMode==="daily"&&"month"in g?n.dateAggregationType===Bt.Year.type?J=g.year.toString():n.dateAggregationType===Bt.FiscalYear.type?J=ea(jl({year:g.year,month1base:g.month}),n.fiscalYearStart).toString():n.dateAggregationType===Bt.Quarter.type?J=`${g.year}-${Math.floor((g.month-1)/3)+1}`:n.dateAggregationType===Bt.Month.type?J=`${g.year}-${g.month}`:J=`${g.year}-${g.month}-${g.day}`:n.chartMode==="monthly"&&"month1base"in g&&(n.dateAggregationType===Bt.Year.type?J=g.year.toString():n.dateAggregationType===Bt.FiscalYear.type?J=ea(jl({year:g.year,month1base:g.month1base}),n.fiscalYearStart).toString():n.dateAggregationType===Bt.Quarter.type?J=`${g.year}-${Math.floor((g.month1base-1)/3)+1}`:J=`${g.year}-${g.month1base}`);const te=g[n.valueField];if(q[J])Zt(te)&&(n.dataAggregationType===Cn.Sum?q[J].totalAmount+=te:n.dataAggregationType===Cn.Last&&(q[J].totalAmount=te));else{const Z=I[J]||[],Y=Object.assign({},W,{totalAmount:Zt(te)?te:0});Z.push(Y),q[J]=Y,I[J]=Z}}}const L=[];let v=0;for(const N of c.value){let z="";n.dateAggregationType===Bt.Year.type||n.dateAggregationType===Bt.FiscalYear.type?z=N.year.toString():n.dateAggregationType===Bt.Quarter.type&&"quarter"in N?z=`${N.year}-${N.quarter}`:n.dateAggregationType===Bt.Month.type&&"month0base"in N?z=`${N.year}-${N.month0base+1}`:n.dateAggregationType===Bt.Day.type&&"day"in N&&n.chartMode==="daily"&&(z=`${N.year}-${N.month}-${N.day}`);let K="";n.dateAggregationType===Bt.Year.type?K=k(N.minUnixTime):n.dateAggregationType===Bt.FiscalYear.type?K=P(N.minUnixTime):n.dateAggregationType===Bt.Quarter.type&&"quarter"in N?K=C(N.year,N.quarter):n.dateAggregationType===Bt.Month.type?K=A(N.minUnixTime):n.dateAggregationType===Bt.Day.type&&n.chartMode==="daily"&&(K=V(N.minUnixTime));const W=I[z]||[];let q=0,g=0,J=0;Fo(W,n.sortingType);for(const Z of W)Z.totalAmount>0&&(g+=Z.totalAmount),q+=Z.totalAmount,Z.totalAmount>J&&(J=Z.totalAmount);q>v&&(v=q);const te={index:L.length,dateRange:N,displayDateRange:K,items:W,totalAmount:q,totalPositiveAmount:g,maxAmount:J,percent:0};L.push(te)}for(const N of L)v>0&&N.totalAmount>0?N.percent=100*N.totalAmount/v:N.percent=0;return{data:L,legends:B}});function M(I){let B="";for(const K of n.items){if(!n.hiddenField||K[n.hiddenField])continue;const W=n.idField&&K[n.idField]?K[n.idField]:b(K[n.nameField]);x.value[W]||(B.length&&(B+=","),B+=W)}const L=I.dateRange;let v=L.minUnixTime,N=L.maxUnixTime;if(n.chartMode==="daily")n.startTime&&n.startTime>v&&(v=n.startTime),n.endTime&&n.endTime<N&&(N=n.endTime);else if(n.chartMode==="monthly"){if(n.startYearMonth){const K=jl(n.startYearMonth);K>v&&(v=K)}if(n.endYearMonth){const K=Sn(n.endYearMonth);K<N&&(N=K)}}const z=Ul(v,N,p.currentUserFirstDayOfWeek,p.currentUserFiscalYearStart,qt.Normal);h("click",{itemId:B,dateRange:{minTime:v,maxTime:N,dateType:z}})}function w(I){x.value[I.id]?delete x.value[I.id]:x.value[I.id]=!0}function U(I,B){E.value=B}return Dl(T,()=>{d.value++},{deep:!0}),(I,B)=>{const L=o("f7-icon"),v=o("f7-progressbar"),N=o("f7-list-item"),z=o("f7-list");return a(),$(ke,null,[f.loading?(a(),i(z,{key:0,class:"skeleton-text"},{default:l(()=>[(a(),$(ke,null,Te([1,2,3,4,5,6,7,8,9,10,11,12],K=>t(N,{class:"statistics-list-item",link:"#",key:K},{media:l(()=>[s("div",cr,[s("div",dr,[t(L,{f7:"app_fill"})])])]),title:l(()=>[...B[0]||(B[0]=[s("div",{class:"statistics-list-item-text"},[s("span",null,"Date Range")],-1)])]),after:l(()=>[...B[1]||(B[1]=[s("span",null,"0.00 USD",-1)])]),"inner-end":l(()=>[s("div",fr,[s("div",pr,[t(v)])])]),_:1})),64))]),_:1})):!f.loading&&(!T.value||!T.value.data||!T.value.data.length)?(a(),i(z,{key:1},{default:l(()=>[t(N,{title:e(F)("No transaction data")},null,8,["title"])]),_:1})):r("",!0),!f.loading&&T.value&&T.value.data&&T.value.data.length?(a(),i(z,{key:2},{default:l(()=>[T.value.legends&&T.value.legends.length>1?(a(),i(N,{key:0},{default:l(()=>[s("div",mr,[(a(!0),$(ke,null,Te(T.value.legends,(K,W)=>(a(),$("div",{class:R(["trends-bar-chart-legend display-flex align-items-center",{"trends-bar-chart-legend-unselected":!!x.value[K.id]}]),key:W,onClick:q=>w(K)},[t(L,{f7:"app_fill",class:"trends-bar-chart-legend-icon",style:bt({color:x.value[K.id]?"":K.color})},null,8,["style"]),s("span",gr,u(K.name),1)],10,vr))),128))])]),_:1})):r("",!0)]),_:1})):r("",!0),!f.loading&&T.value&&T.value.data&&T.value.data.length?(a(),i(z,{key:`trends-bar-chart-${d.value}`,"virtual-list":D.value,"virtual-list-params":D.value?{items:T.value.data,renderExternal:U,height:"auto"}:void 0},{default:l(()=>[(a(!0),$(ke,null,Te(D.value?E.value.items:T.value.data,K=>(a(),i(N,{link:"#",key:K.index,class:R({"statistics-list-item":!0,"statistics-list-item-stacked":f.stacked,"statistics-list-item-non-stacked":!f.stacked}),style:bt(D.value?`top: ${E.value.topPosition}px`:void 0),"virtual-list-index":K.index,onClick:W=>M(K)},{media:l(()=>[s("div",yr,[s("div",hr,[t(L,{f7:"calendar"})])])]),title:l(()=>[s("div",_r,[s("span",null,u(K.displayDateRange),1)]),!f.stacked&&K.items.length>1?(a(),$("div",kr,[(a(!0),$(ke,null,Te(K.items,(W,q)=>ut((a(),$("div",{class:"display-flex flex-direction-column",style:{"margin-top":"4px"},key:q},[s("div",br,[s("div",{class:"display-inline-flex",style:bt({width:K.percent*W.totalAmount/K.maxAmount+"%"})},[t(v,{progress:100,style:bt({"--f7-progressbar-progress-color":W.color?W.color:""})},null,8,["style"])],4),K.percent*W.totalAmount/K.maxAmount<100?(a(),$("div",{key:0,class:"display-inline-flex",style:bt({width:100-K.percent*W.totalAmount/K.maxAmount+"%"})},[t(v,{progress:0})],4)):r("",!0)])])),[[vt,W.totalAmount>0]])),128))])):r("",!0)]),after:l(()=>[f.stacked||K.items.length<=1?(a(),$("span",wr,u(e(m)(K.totalAmount,f.defaultCurrency)),1)):r("",!0)]),"inner-end":l(()=>[f.stacked||K.items.length<=1?(a(),$("div",Tr,[s("div",Cr,[(a(!0),$(ke,null,Te(K.items,(W,q)=>ut((a(),$("div",{class:"display-inline-flex",style:bt({width:K.percent*W.totalAmount/K.totalPositiveAmount+"%"}),key:q},[t(v,{progress:100,style:bt({"--f7-progressbar-progress-color":W.color?W.color:""})},null,8,["style"])],4)),[[vt,W.totalAmount>0]])),128)),K.percent<100?(a(),$("div",{key:0,class:"display-inline-flex",style:bt({width:100-K.percent+"%"})},[t(v,{progress:0})],4)):r("",!0)])])):r("",!0)]),_:2},1032,["class","style","virtual-list-index","onClick"]))),128))]),_:1},8,["virtual-list","virtual-list-params"])):r("",!0)],64)}}}),xr={class:"display-flex padding justify-content-space-between align-items-center"},Ar={class:"ebk-sheet-title"},$r={class:"padding-horizontal padding-bottom"},Dr={class:"no-margin"},Ir={class:"margin-top text-align-center"},Vr=Re({__name:"PinCodeInputSheet",props:{modelValue:{},title:{},hint:{},confirmDisabled:{type:Boolean},cancelDisabled:{type:Boolean},show:{type:Boolean}},emits:["update:modelValue","update:show","pincode:confirm"],setup(f,{emit:_}){const n=f,h=_,{tt:F}=ze(),V=S(""),k=re(()=>V.value?.length===6||!1);function A(){!k.value||n.confirmDisabled||(h("update:modelValue",V.value),h("pincode:confirm",V.value))}function C(){h("update:show",!1)}function P(){V.value=""}function m(){C()}return Dl(()=>n.modelValue,c=>{c===""&&(V.value="")}),(c,b)=>{const p=o("pin-code-input"),d=o("f7-list-item"),x=o("f7-list"),E=o("f7-button"),D=o("f7-link"),T=o("f7-page-content"),M=o("f7-sheet");return a(),i(M,{"swipe-to-close":"","swipe-handler":".swipe-handler",style:{height:"auto"},opened:f.show,"onSheet:open":P,"onSheet:closed":m},{default:l(()=>[b[1]||(b[1]=s("div",{class:"swipe-handler",style:{"z-index":"10"}},null,-1)),t(T,{class:"margin-top no-padding-top"},{default:l(()=>[s("div",xr,[s("div",Ar,[s("b",null,u(f.title),1)])]),s("div",$r,[s("p",Dr,u(f.hint),1),t(x,{class:"no-margin"},{default:l(()=>[t(d,{class:"list-item-pincode-input padding-vertical-half"},{default:l(()=>[t(p,{secure:!0,length:6,modelValue:V.value,"onUpdate:modelValue":b[0]||(b[0]=w=>V.value=w),"onPincode:confirm":A},null,8,["modelValue"])]),_:1})]),_:1}),t(E,{large:"",fill:"",class:R({disabled:!k.value||f.confirmDisabled}),text:e(F)("Continue"),onClick:A},null,8,["class","text"]),s("div",Ir,[t(D,{onClick:C,text:e(F)("Cancel")},null,8,["text"])])])]),_:1})]),_:1},8,["opened"])}}}),Fr={class:"display-flex padding justify-content-space-between align-items-center"},Pr={key:0,class:"ebk-sheet-title"},Ur={class:"padding-horizontal padding-bottom"},Br={key:0,class:"no-margin"},Nr={class:"margin-top text-align-center"},Mr=Re({__name:"PasswordInputSheet",props:{modelValue:{},title:{},hint:{},color:{},confirmDisabled:{type:Boolean},cancelDisabled:{type:Boolean},show:{type:Boolean}},emits:["update:modelValue","update:show","password:confirm"],setup(f,{emit:_}){const n=f,h=_,{tt:F}=ze(),V=S("");function k(){!V.value||n.confirmDisabled||(h("update:modelValue",V.value),h("password:confirm",V.value))}function A(){C()}function C(){h("update:show",!1)}function P(){V.value=""}function m(){C()}return(c,b)=>{const p=o("f7-list-input"),d=o("f7-list"),x=o("f7-button"),E=o("f7-link"),D=o("f7-page-content"),T=o("f7-sheet");return a(),i(T,{"swipe-to-close":"","swipe-handler":".swipe-handler",style:{height:"auto"},opened:f.show,"onSheet:open":P,"onSheet:closed":m},{default:l(()=>[b[2]||(b[2]=s("div",{class:"swipe-handler",style:{"z-index":"10"}},null,-1)),t(D,{class:"margin-top no-padding-top"},{default:l(()=>[s("div",Fr,[f.title?(a(),$("div",Pr,[s("b",null,u(f.title),1)])):r("",!0)]),s("div",Ur,[f.hint?(a(),$("p",Br,u(f.hint),1)):r("",!0),t(d,{strong:"",class:"no-margin"},{default:l(()=>[t(p,{type:"password",autocomplete:"current-password",outline:"","floating-label":"","clear-button":"",class:R(["no-margin no-padding-bottom",f.color?"color-"+f.color:""]),label:e(F)("Current Password"),placeholder:e(F)("Current Password"),value:V.value,"onUpdate:value":b[0]||(b[0]=M=>V.value=M),onKeyup:b[1]||(b[1]=hl(M=>k(),["enter"]))},null,8,["class","label","placeholder","value"])]),_:1}),t(x,{large:"",fill:"",class:R({disabled:!V.value||f.confirmDisabled}),color:f.color||"primary",text:e(F)("Confirm"),onClick:k},null,8,["class","color","text"]),s("div",Nr,[t(E,{class:R({disabled:f.cancelDisabled}),onClick:A,text:e(F)("Cancel")},null,8,["class","text"])])])]),_:1})]),_:1},8,["opened"])}}}),Er={class:"display-flex padding justify-content-space-between align-items-center"},Lr={key:0,class:"ebk-sheet-title"},Rr={class:"padding-horizontal padding-bottom"},Or={key:0,class:"no-margin"},zr={class:"margin-top text-align-center"},Yr=Re({__name:"PasscodeInputSheet",props:{modelValue:{},title:{},hint:{},confirmDisabled:{type:Boolean},cancelDisabled:{type:Boolean},show:{type:Boolean}},emits:["update:modelValue","update:show","passcode:confirm"],setup(f,{emit:_}){const n=f,h=_,{tt:F}=ze(),V=S("");function k(){!V.value||n.confirmDisabled||(h("update:modelValue",V.value),h("passcode:confirm",V.value))}function A(){C()}function C(){h("update:show",!1)}function P(){V.value=""}function m(){C()}return(c,b)=>{const p=o("f7-list-input"),d=o("f7-list"),x=o("f7-button"),E=o("f7-link"),D=o("f7-page-content"),T=o("f7-sheet");return a(),i(T,{"swipe-to-close":"","swipe-handler":".swipe-handler",style:{height:"auto"},opened:f.show,"onSheet:open":P,"onSheet:closed":m},{default:l(()=>[b[2]||(b[2]=s("div",{class:"swipe-handler",style:{"z-index":"10"}},null,-1)),t(D,{class:"margin-top no-padding-top"},{default:l(()=>[s("div",Er,[f.title?(a(),$("div",Lr,[s("b",null,u(f.title),1)])):r("",!0)]),s("div",Rr,[f.hint?(a(),$("p",Or,u(f.hint),1)):r("",!0),Zl(c.$slots,"default"),t(d,{strong:"",class:"no-margin"},{default:l(()=>[t(p,{type:"number",autocomplete:"one-time-code",outline:"","floating-label":"","clear-button":"",class:"no-margin no-padding-bottom",label:e(F)("Passcode"),placeholder:e(F)("Passcode"),value:V.value,"onUpdate:value":b[0]||(b[0]=M=>V.value=M),onKeyup:b[1]||(b[1]=hl(M=>k(),["enter"]))},null,8,["label","placeholder","value"])]),_:1}),t(x,{large:"",fill:"",class:R({disabled:!V.value||f.confirmDisabled}),text:e(F)("Continue"),onClick:k},null,8,["class","text"]),s("div",zr,[t(E,{class:R({disabled:f.cancelDisabled}),onClick:A,text:e(F)("Cancel")},null,8,["class","text"])])])]),_:3})]),_:3},8,["opened"])}}});function je(f,_){if(!f){Jt(n=>n.preloader.show());return}Jt(n=>{setTimeout(()=>{f()&&n.preloader.show()},_||200)})}function Se(){Jt(f=>f.preloader.hide())}function On(){Jt(f=>f.dialog.close())}function Qn(){return dl.$(".modal-in").length}function Il(f,_){dl.swipeout.delete(dl.$("#"+f),_)}function va(f){dl.$(f).find("textarea").each(_=>{_.scrollTop=0,_.style.height="",_.style.height=_.scrollHeight+"px"})}function Ba(f){const _=dl.$("html"),n=Cl.values();for(const h of n)h.type===f?_.hasClass(h.className)||_.addClass(h.className):_.removeClass(h.className)}function Hr(f){const _=Cl.values();for(const n of _)if(n.type===f)return ta+n.className;return ta+Cl.Default.className}function qr(f){const _=dl.$(f),n={};if(!_||!_.length)return n;for(const h of _){const F=h.getBoundingClientRect();n[h.id]=F.height}return n}function Wr(f){const _=dl.$(f);return!_||!_.length?null:_[0].getBoundingClientRect()}function al(f,_,n){if(!f||!f.length)return;const h=f.find(_),F=f.find(n);if(!h.length||!F.length)return;const V=Po(h.css("padding-top"),0)/2;let k=F.offset().top-h.offset().top-V-(h.outerHeight()-F.outerHeight())/2;if(F.length>1){const A=dl.$(F[0]),C=dl.$(F[F.length-1]),P=A.offset().top-h.offset().top-V,m=C.offset().top-h.offset().top-V,c=C.offset().top-h.offset().top-V-(h.outerHeight()-A.outerHeight());k=(P+c)/2,m-P>h.outerHeight()&&(k=P)}k<=0||h.scrollTop(k)}function Jn(f,_){if(!f)return;const n=f.offsetHeight;n<_&&setTimeout(()=>{const h=window.innerHeight;h<_&&n<h&&window.scrollTo({top:_-n-24,behavior:"smooth"})},300)}function Gr(f){dl.$(".infinite-scroll-content").on("scroll",_=>{f(_)},{passive:!0})}function nt(){const{tt:f,te:_,getCurrentLanguageTextDirection:n}=ze();function h(m,c){const b=Dl(c,p=>{p&&setTimeout(()=>{b&&b(),m.back()},200)},{immediate:!0})}function F(m,c){Jt(b=>{b.dialog.create({title:f("global.app.title"),text:_(m),animate:nl(),buttons:[{text:f("OK"),onClick:c}]}).open()})}function V(m,c,b){const p=n(),d={text:f("Cancel"),onClick:b},x={text:f("OK"),onClick:c};Jt(E=>{E.dialog.create({title:f("global.app.title"),text:f(m),animate:nl(),buttons:p==wt.RTL?[x,d]:[d,x]}).open()})}function k(m,c,b,p){const d=n(),x={text:f("Cancel"),onClick:(D,T)=>{if(p){const M=D.$el.find(".dialog-input").val();p(M,D,T)}}},E={text:f("OK"),onClick:(D,T)=>{if(b){const M=D.$el.find(".dialog-input").val();b(M,D,T)}}};Jt(D=>{D.dialog.create({title:f("global.app.title"),text:f(m),content:`<div class="dialog-input-field input"><input type="text" class="dialog-input" value="${c||""}"></div>`,animate:nl(),buttons:d==wt.RTL?[E,x]:[x,E]}).open()})}function A(m,c,b,p){const d={text:f(b),onClick:(x,E)=>{p&&p(x,E)}};Jt(x=>{x.dialog.create({title:f(m),content:`<div class="preloader"><span class="preloader-inner">${[0,1,2,3,4,5,6,7].map(()=>'<span class="preloader-inner-line"></span>').join("")}</span></div>`+(c?`<br/><div class="margin-top">${f(c)}</div>`:""),cssClass:"dialog-preloader",animate:nl(),buttons:[d]}).open()})}function C(m,c){Jt(b=>{b.toast.create({text:_(m),position:"center",closeTimeout:c||1500}).open()})}function P(m){const c=n(),b={text:f("Cancel")},p={text:f("OK"),onClick:()=>{window.open(m,"_blank")}};Jt(d=>{d.dialog.create({title:f("global.app.title"),text:f("Are you sure you want to open this link?"),content:`<div style="word-break: break-all">${m}</div>`,animate:nl(),buttons:c==wt.RTL?[p,b]:[b,p]}).open()})}return{showAlert:F,showConfirm:V,showPrompt:k,showCancelableLoading:A,showToast:C,openExternalUrl:P,routeBackOnError:h}}const jr={class:"left"},Kr={class:"right"},Zr={class:"block block-outline no-margin no-padding"},Xr={class:"block block-outline no-margin no-padding padding-vertical-half"},Qr={class:"picker picker-inline picker-3d"},Jr={class:"picker-columns"},eu={key:0,class:"picker-column"},tu=["data-value","onClick"],lu={class:"picker-column"},nu=["data-items-index","data-value","onClick"],au={class:"picker-column"},ou=["data-items-index","data-value","onClick"],su={class:"picker-column"},iu=["data-items-index","data-value","onClick"],ru={key:1,class:"picker-column"},uu=["data-value","onClick"],cu={class:"margin-top text-align-center"},du={class:"display-flex padding-horizontal justify-content-space-between"},fu={class:"align-self-center"},pu=Re({__name:"DateTimeSelectionSheet",props:{modelValue:{},initMode:{},show:{type:Boolean}},emits:["update:modelValue","update:show"],setup(f,{emit:_}){const n=f,h=_,{tt:F,getCurrentNumeralSystemType:V,formatUnixTimeToLongDateTime:k}=ze(),{showToast:A}=nt(),{is24Hour:C,isHourTwoDigits:P,isMinuteTwoDigits:m,isSecondTwoDigits:c,isMeridiemIndicatorFirst:b,meridiemItems:p,getDisplayTimeValue:d,generateAllHours:x,generateAllMinutesOrSeconds:E}=Uo(),D=kl(),T=jt("datetimepicker"),M=jt("timePickerContainer");let w,U,I,B;const L=S(n.initMode||"time"),v=S(ln(n.modelValue||xl())),N=S(void 0),z=S(void 0),K=re(()=>D.framework7DarkMode||!1),W=re(()=>V()),q=re(()=>k(Sl(la(v.value),Bl(),cl()))),g=re(()=>L.value==="time"?"Date":"Time"),J=re(()=>x(3,P.value)),te=re(()=>E(3,m.value)),Z=re(()=>E(3,c.value)),Y=re({get:()=>Bo(v.value.getHours()),set:Ce=>{v.value=gn(v.value,W.value,H.value,fe.value,ee.value,Ce,C.value)}}),H=re({get:()=>d(C.value?v.value.getHours():No(v.value.getHours()),P.value),set:Ce=>{v.value=gn(v.value,W.value,Ce,fe.value,ee.value,Y.value,C.value)}}),fe=re({get:()=>d(v.value.getMinutes(),m.value),set:Ce=>{v.value=gn(v.value,W.value,H.value,Ce,ee.value,Y.value,C.value)}}),ee=re({get:()=>d(v.value.getSeconds(),c.value),set:Ce=>{v.value=gn(v.value,W.value,H.value,fe.value,Ce,Y.value,C.value)}});function j(){L.value==="time"?L.value="date":L.value="time"}function O(){v.value=ln(xl()),L.value==="time"&&se()}function le(){if(!v.value)return;const Ce=la(v.value);if(Ce<0){A("Date is too early");return}h("update:modelValue",Ce),h("update:show",!1)}function ge(Ce,pe,we,be){if(!N.value||!z.value)return"";const Be=parseInt(be[0].value),ce=parseInt(be[be.length-1].value),ae=parseInt(Ce,10),oe=parseInt(pe,10);let Pe=ae-oe;Math.abs(Pe)>=5&&(we===0&&ce-5<ae&&oe<Be+5?Pe=ae-(ce+oe+1):we===2&&ce-5<oe&&ae<Be+5&&(Pe=ce+ae+1-oe));const ve=-24*Pe;return ve>180||ve<-180?"":`transform: translate3d(0, ${-Pe*z.value}px, -100px) rotateX(${ve}deg)`}function $e(){const Ce=M.value?.querySelectorAll(".picker-item"),pe=Ce?Ce[0]:null;M.value&&(N.value=M.value.offsetHeight),pe&&"offsetHeight"in pe&&(z.value=pe.offsetHeight),M.value&&pe&&"offsetHeight"in pe&&M.value.style.setProperty("--f7-picker-scroll-padding",`${(M.value.offsetHeight-pe.offsetHeight)/2}px`)}function se(){Me("picker-items-hour","picker-hour",H.value),Me("picker-items-minute","picker-minute",fe.value),Me("picker-items-second","picker-second",ee.value),Me("picker-items-meridiem-indicator-first","picker-meridiem-indicator",Y.value),Me("picker-items-meridiem-indicator-last","picker-meridiem-indicator",Y.value)}function Ze(Ce,pe){switch(U){case"picker-hour":Me(Ce,pe,H.value);break;case"picker-minute":Me(Ce,pe,fe.value);break;case"picker-second":Me(Ce,pe,ee.value);break}}function Me(Ce,pe,we){const be=M.value?.querySelector(`.${Ce}`),Be=be?.querySelectorAll(`.${pe}`);if(!(!be||!Be||!Be.length))for(let ce=0;ce<Be.length;ce++){const ae=Be[ce];if("offsetHeight"in be&&"offsetTop"in ae&&"offsetHeight"in ae&&(!ae.hasAttribute("data-items-index")||ae.getAttribute("data-items-index")==="1")&&ae.getAttribute("data-value")===we){be.scrollTop=ae.offsetTop-be.offsetHeight/2+ae.offsetHeight/2;break}}}function Ue(Ce,pe,we){const be=M.value?.querySelector(`.${Ce}`),Be=be?.querySelectorAll(`.${pe}`),ce=Be?Be[0]:null;if(!be||!Be||!Be.length||!ce||!("offsetHeight"in ce))return;const ae=ce.offsetHeight,oe=be?.scrollTop||0,Pe=Math.round(oe/ae),ve=Be[Pe];if(ve){const Je=ve.getAttribute("data-value"),ft=ve.getAttribute("data-items-index");if(Je){switch(pe){case"picker-hour":H.value=Je;break;case"picker-minute":fe.value=Je;break;case"picker-second":ee.value=Je;break;case"picker-meridiem-indicator":Y.value=Je;break}(ft==="0"||ft==="2")&&(we?Me(Ce,pe,Je):(w&&U&&w!==Ce&&U!==pe&&(Ze(w,U),w=void 0,U=void 0,I=void 0,B=void 0),!B&&window.requestAnimationFrame&&(w=Ce,U=pe,I=be.scrollTop,B=1,window.requestAnimationFrame(qe))))}}}function qe(){if(!w||!U||!Kl(I)||!Kl(B))return;const Ce=M.value?.querySelector(`.${w}`);if(Ce){if(Ce.scrollTop===I?B++:(I=Ce.scrollTop,B=0),B>3){Ze(w,U),w=void 0,U=void 0,I=void 0,B=void 0;return}window.requestAnimationFrame(qe)}}function he(){L.value=n.initMode||"time",n.modelValue&&(v.value=ln(n.modelValue)),L.value==="time"&&Gl(()=>{$e(),se()}),T.value?.switchView("calendar")}function X(){h("update:show",!1)}return Dl(L,Ce=>{Ce==="date"?T.value?.switchView("calendar"):Ce==="time"&&Gl(()=>{$e(),se()})}),(Ce,pe)=>{const we=o("f7-link"),be=o("f7-toolbar"),Be=o("f7-button"),ce=o("f7-page-content"),ae=o("f7-sheet");return a(),i(ae,{"swipe-to-close":"","swipe-handler":".swipe-handler",class:"date-time-selection-sheet",style:{height:"auto"},opened:f.show,"onSheet:open":he,"onSheet:closed":X},{default:l(()=>[t(be,null,{default:l(()=>[pe[9]||(pe[9]=s("div",{class:"swipe-handler"},null,-1)),s("div",jr,[t(we,{text:e(F)("Now"),onClick:O},null,8,["text"])]),s("div",Kr,[t(we,{text:e(F)("Done"),onClick:le},null,8,["text"])])]),_:1}),t(ce,{class:"padding-bottom"},{default:l(()=>[s("div",Zr,[ut(t(Kn,{ref_key:"datetimepicker",ref:T,"datetime-picker-class":"justify-content-center","is-dark-mode":K.value,"enable-time-picker":!1,"show-alternate-dates":!0,modelValue:v.value,"onUpdate:modelValue":pe[0]||(pe[0]=oe=>v.value=oe)},null,8,["is-dark-mode","modelValue"]),[[vt,L.value==="date"]])]),ut(s("div",Xr,[s("div",{class:"time-picker-container",ref_key:"timePickerContainer",ref:M},[s("div",Qr,[s("div",Jr,[!e(C)&&e(b)?(a(),$("div",eu,[s("div",{class:"picker-items picker-items-meridiem-indicator-first",onScroll:pe[1]||(pe[1]=oe=>Ue("picker-items-meridiem-indicator-first","picker-meridiem-indicator",!1))},[(a(!0),$(ke,null,Te(e(p),oe=>(a(),$("div",{class:R({"picker-item":!0,"picker-meridiem-indicator":!0,"picker-item-selected":Y.value===oe.value}),key:oe.value,"data-value":oe.value,onClick:Pe=>{Y.value=oe.value,Me("picker-items-meridiem-indicator-first","picker-meridiem-indicator",oe.value)}},[s("span",null,u(oe.name),1)],10,tu))),128))],32)])):r("",!0),s("div",lu,[s("div",{class:"picker-items picker-items-hour",onScroll:pe[2]||(pe[2]=oe=>Ue("picker-items-hour","picker-hour",!1)),onScrollend:pe[3]||(pe[3]=oe=>Ue("picker-items-hour","picker-hour",!0))},[(a(!0),$(ke,null,Te(J.value,oe=>(a(),$("div",{class:R({"picker-item":!0,"picker-hour":!0,"picker-item-selected":H.value===oe.value}),key:`${oe.itemsIndex}_${oe.value}`,"data-items-index":oe.itemsIndex,"data-value":oe.value,onClick:Pe=>{H.value=oe.value,Me("picker-items-hour","picker-hour",oe.value)}},[s("span",{style:bt(ge(oe.value,H.value,oe.itemsIndex,J.value))},u(oe.value),5)],10,nu))),128))],32)]),pe[10]||(pe[10]=s("div",{class:"picker-column picker-column-divider"},":",-1)),s("div",au,[s("div",{class:"picker-items picker-items-minute",onScroll:pe[4]||(pe[4]=oe=>Ue("picker-items-minute","picker-minute",!1)),onScrollend:pe[5]||(pe[5]=oe=>Ue("picker-items-minute","picker-minute",!0))},[(a(!0),$(ke,null,Te(te.value,oe=>(a(),$("div",{class:R({"picker-item":!0,"picker-minute":!0,"picker-item-selected":fe.value===oe.value}),key:`${oe.itemsIndex}_${oe.value}`,"data-items-index":oe.itemsIndex,"data-value":oe.value,onClick:Pe=>{fe.value=oe.value,Me("picker-items-minute","picker-minute",oe.value)}},[s("span",{style:bt(ge(oe.value,fe.value,oe.itemsIndex,te.value))},u(oe.value),5)],10,ou))),128))],32)]),pe[11]||(pe[11]=s("div",{class:"picker-column picker-column-divider"},":",-1)),s("div",su,[s("div",{class:"picker-items picker-items-second",onScroll:pe[6]||(pe[6]=oe=>Ue("picker-items-second","picker-second",!1)),onScrollend:pe[7]||(pe[7]=oe=>Ue("picker-items-second","picker-second",!0))},[(a(!0),$(ke,null,Te(Z.value,oe=>(a(),$("div",{class:R({"picker-item":!0,"picker-second":!0,"picker-item-selected":ee.value===oe.value}),key:`${oe.itemsIndex}_${oe.value}`,"data-items-index":oe.itemsIndex,"data-value":oe.value,onClick:Pe=>{ee.value=oe.value,Me("picker-items-second","picker-second",oe.value)}},[s("span",{style:bt(ge(oe.value,ee.value,oe.itemsIndex,Z.value))},u(oe.value),5)],10,iu))),128))],32)]),!e(C)&&!e(b)?(a(),$("div",ru,[s("div",{class:"picker-items picker-items-meridiem-indicator-last",onScroll:pe[8]||(pe[8]=oe=>Ue("picker-items-meridiem-indicator-last","picker-meridiem-indicator",!1))},[(a(!0),$(ke,null,Te(e(p),oe=>(a(),$("div",{class:R({"picker-item":!0,"picker-meridiem-indicator":!0,"picker-item-selected":Y.value===oe.value}),key:oe.value,"data-value":oe.value,onClick:Pe=>{Y.value=oe.value,Me("picker-items-meridiem-indicator-last","picker-meridiem-indicator",oe.value)}},[s("span",null,u(oe.name),1)],10,uu))),128))],32)])):r("",!0),pe[12]||(pe[12]=s("div",{class:"picker-center-highlight"},null,-1))])])],512)],512),[[vt,L.value==="time"]]),pe[13]||(pe[13]=s("input",{id:"time-picker-input",style:{display:"none"},type:"text",readonly:!0},null,-1)),s("div",cu,[s("div",du,[s("div",fu,u(q.value),1),t(Be,{outline:"",text:e(F)(g.value),onClick:j},null,8,["text"])])])]),_:1})]),_:1},8,["opened"])}}}),mu={class:"left"},vu={class:"right"},gu={class:"block block-outline no-margin no-padding"},yu=Re({__name:"DateSelectionSheet",props:{modelValue:{},show:{type:Boolean}},emits:["update:modelValue","update:show"],setup(f,{emit:_}){const n=f,h=_,{tt:F}=ze(),V=kl(),k=S(null),A=re(()=>V.framework7DarkMode||!1);function C(){k.value=null,P()}function P(){h("update:modelValue",k.value?Mo(k.value):""),h("update:show",!1)}function m(){k.value=n.modelValue?Eo(n.modelValue):null}function c(){h("update:show",!1)}return(b,p)=>{const d=o("f7-link"),x=o("f7-toolbar"),E=o("date-time-picker"),D=o("f7-page-content"),T=o("f7-sheet");return a(),i(T,{"swipe-to-close":"","swipe-handler":".swipe-handler",class:"date-selection-sheet",style:{height:"auto"},opened:f.show,"onSheet:open":m,"onSheet:closed":c},{default:l(()=>[t(x,null,{default:l(()=>[p[1]||(p[1]=s("div",{class:"swipe-handler"},null,-1)),s("div",mu,[t(d,{text:e(F)("Clear"),onClick:C},null,8,["text"])]),s("div",vu,[t(d,{text:e(F)("Done"),onClick:P},null,8,["text"])])]),_:1}),t(D,null,{default:l(()=>[s("div",gu,[t(E,{"datetime-picker-class":"justify-content-center","is-dark-mode":A.value,"enable-time-picker":!1,clearable:!0,"show-alternate-dates":!0,modelValue:k.value,"onUpdate:modelValue":p[0]||(p[0]=M=>k.value=M)},null,8,["is-dark-mode","modelValue"])])]),_:1})]),_:1},8,["opened"])}}}),hu={class:"left"},_u={class:"right"},ku={class:"block block-outline no-margin no-padding"},bu=Re({__name:"FiscalYearStartSelectionSheet",props:{show:{type:Boolean},modelValue:{},disabled:{type:Boolean},readonly:{type:Boolean},label:{},numeralSystem:{}},emits:["update:show","update:modelValue"],setup(f,{emit:_}){const n=f,h=_,{tt:F}=ze(),V=kl(),k=el(),{disabledDates:A,selectedFiscalYearStart:C,selectedFiscalYearStartValue:P,allowedMinDate:m,allowedMaxDate:c}=Lo(n),b=re(()=>V.framework7DarkMode||!1);function p(){h("update:modelValue",C.value),h("update:show",!1)}function d(){C.value=k.currentUserFiscalYearStart}function x(){if(n.modelValue){const D=Ro.valueOf(n.modelValue);D&&(C.value=D.value)}}function E(){h("update:show",!1)}return(D,T)=>{const M=o("f7-link"),w=o("f7-toolbar"),U=o("date-time-picker"),I=o("f7-page-content"),B=o("f7-sheet");return a(),i(B,{"swipe-to-close":"","swipe-handler":".swipe-handler",class:"fiscal-year-start-selection-sheet",style:{height:"auto"},opened:f.show,"onSheet:open":x,"onSheet:closed":E},{default:l(()=>[t(w,null,{default:l(()=>[T[1]||(T[1]=s("div",{class:"swipe-handler"},null,-1)),s("div",hu,[t(M,{text:e(F)("Reset"),onClick:d},null,8,["text"])]),s("div",_u,[t(M,{text:e(F)("Done"),onClick:p},null,8,["text"])])]),_:1}),t(I,null,{default:l(()=>[s("div",ku,[t(U,{"datetime-picker-class":"justify-content-center","is-dark-mode":b.value,"numeral-system":f.numeralSystem,"enable-time-picker":!1,"disable-year-select":!0,"no-swipe-and-scroll":!0,"min-date":e(m),"max-date":e(c),"disabled-dates":e(A),modelValue:e(P),"onUpdate:modelValue":T[0]||(T[0]=L=>St(P)?P.value=L:null)},null,8,["is-dark-mode","numeral-system","min-date","max-date","disabled-dates","modelValue"])])]),_:1})]),_:1},8,["opened"])}}}),wu={class:"display-flex padding justify-content-space-between align-items-center"},Tu={key:0,class:"ebk-sheet-title"},Cu={class:"padding-horizontal padding-bottom"},Su={key:0,class:"no-margin-top"},xu={key:1,class:"no-margin-top margin-bottom"},Au={class:"margin-top text-align-center"},$u=Re({__name:"DateRangeSelectionSheet",props:{minTime:{},maxTime:{},title:{},hint:{},show:{type:Boolean}},emits:["update:show","dateRange:change"],setup(f,{emit:_}){const n=f,h=_,{tt:F}=ze(),{showToast:V}=nt(),{dateRange:k,beginDateTime:A,endDateTime:C,presetRanges:P,getFinalDateRange:m}=Oo(n),c=kl(),b=jt("datetimepicker"),p=re(()=>c.framework7DarkMode||!1);function d(){try{const T=m();if(!T)return;h("dateRange:change",T.minUnixTime,T.maxUnixTime)}catch(T){T instanceof Error&&V(T.message)}}function x(){h("update:show",!1)}function E(){n.minTime&&(k.value[0]=ln(na(n.minTime,Bl(),cl()))),n.maxTime&&(k.value[1]=ln(na(n.maxTime,Bl(),cl()))),window.dispatchEvent(new Event("resize")),b.value?.switchView("calendar")}function D(){h("update:show",!1)}return(T,M)=>{const w=o("f7-button"),U=o("f7-link"),I=o("f7-page-content"),B=o("f7-sheet");return a(),i(B,{"swipe-to-close":"","swipe-handler":".swipe-handler",style:{height:"auto"},opened:f.show,"onSheet:open":E,"onSheet:closed":D},{default:l(()=>[M[2]||(M[2]=s("div",{class:"swipe-handler",style:{"z-index":"10"}},null,-1)),t(I,null,{default:l(()=>[s("div",wu,[f.title?(a(),$("div",Tu,[s("b",null,u(f.title),1)])):r("",!0)]),s("div",Cu,[f.hint?(a(),$("p",Su,u(f.hint),1)):r("",!0),e(A)&&e(C)?(a(),$("p",xu,[s("span",null,u(e(A)),1),M[1]||(M[1]=s("span",null," - ",-1)),s("span",null,u(e(C)),1)])):r("",!0),Zl(T.$slots,"default"),t(Kn,{ref_key:"datetimepicker",ref:b,"datetime-picker-class":"justify-content-center margin-bottom","is-dark-mode":p.value,"enable-time-picker":!0,"preset-dates":e(P),"show-alternate-dates":!0,modelValue:e(k),"onUpdate:modelValue":M[0]||(M[0]=L=>St(k)?k.value=L:null)},null,8,["is-dark-mode","preset-dates","modelValue"]),t(w,{large:"",fill:"",class:R({disabled:!e(k)[0]||!e(k)[1]}),text:e(F)("Continue"),onClick:d},null,8,["class","text"]),s("div",Au,[t(U,{onClick:x,text:e(F)("Cancel")},null,8,["text"])])])]),_:3})]),_:3},8,["opened"])}}}),Du={class:"display-flex padding justify-content-space-between align-items-center"},Iu={key:0,class:"ebk-sheet-title"},Vu={class:"padding-horizontal padding-bottom"},Fu={key:0,class:"no-margin-top"},Pu={class:"margin-top text-align-center"},Uu=Re({__name:"MonthSelectionSheet",props:{modelValue:{},title:{},hint:{},show:{type:Boolean}},emits:["update:modelValue","update:show"],setup(f,{emit:_}){const n=f,h=_,{tt:F}=ze(),{showToast:V}=nt(),k=kl(),A=S(zo(Yo())),C=re(()=>k.framework7DarkMode||!1);function P(){if(A.value.year<=0||A.value.month0base<0){V("Date is too early");return}h("update:modelValue",A.value)}function m(){h("update:show",!1)}function c(){n.modelValue&&(A.value=n.modelValue)}function b(){h("update:show",!1)}return(p,d)=>{const x=o("month-picker"),E=o("f7-button"),D=o("f7-link"),T=o("f7-page-content"),M=o("f7-sheet");return a(),i(M,{"swipe-to-close":"","swipe-handler":".swipe-handler",class:"month-selection-sheet",style:{height:"auto"},opened:f.show,"onSheet:open":c,"onSheet:closed":b},{default:l(()=>[d[1]||(d[1]=s("div",{class:"swipe-handler",style:{"z-index":"10"}},null,-1)),t(T,null,{default:l(()=>[s("div",Du,[f.title?(a(),$("div",Iu,[s("b",null,u(f.title),1)])):r("",!0)]),s("div",Vu,[f.hint?(a(),$("p",Fu,u(f.hint),1)):r("",!0),Zl(p.$slots,"default"),t(x,{"month-picker-class":"justify-content-center margin-bottom","is-dark-mode":C.value,modelValue:A.value,"onUpdate:modelValue":d[0]||(d[0]=w=>A.value=w)},null,8,["is-dark-mode","modelValue"]),t(E,{large:"",fill:"",class:R({disabled:!A.value}),text:e(F)("Continue"),onClick:P},null,8,["class","text"]),s("div",Pu,[t(D,{onClick:m,text:e(F)("Cancel")},null,8,["text"])])])]),_:3})]),_:3},8,["opened"])}}}),Bu={class:"display-flex padding justify-content-space-between align-items-center"},Nu={key:0,class:"ebk-sheet-title"},Mu={class:"padding-horizontal padding-bottom"},Eu={key:0,class:"no-margin-top"},Lu={key:1,class:"no-margin-top margin-bottom"},Ru={class:"margin-top text-align-center"},Ou=Re({__name:"MonthRangeSelectionSheet",props:{minTime:{},maxTime:{},title:{},hint:{},show:{type:Boolean}},emits:["update:show","dateRange:change"],setup(f,{emit:_}){const n=f,h=_,{tt:F}=ze(),{showToast:V}=nt(),{dateRange:k,beginDateTime:A,endDateTime:C,getFinalMonthRange:P}=Ho(n),m=kl(),c=re(()=>m.framework7DarkMode||!1);function b(){try{const E=P();if(!E)return;h("dateRange:change",E.minYearMonth,E.maxYearMonth)}catch(E){E instanceof Error&&V(E.message)}}function p(){h("update:show",!1)}function d(){if(n.minTime){const E=aa(n.minTime);E&&(k.value[0]=E)}if(n.maxTime){const E=aa(n.maxTime);E&&(k.value[1]=E)}}function x(){h("update:show",!1)}return(E,D)=>{const T=o("month-picker"),M=o("f7-button"),w=o("f7-link"),U=o("f7-page-content"),I=o("f7-sheet");return a(),i(I,{"swipe-to-close":"","swipe-handler":".swipe-handler",class:"month-range-selection-sheet",style:{height:"auto"},opened:f.show,"onSheet:open":d,"onSheet:closed":x},{default:l(()=>[D[2]||(D[2]=s("div",{class:"swipe-handler",style:{"z-index":"10"}},null,-1)),t(U,null,{default:l(()=>[s("div",Bu,[f.title?(a(),$("div",Nu,[s("b",null,u(f.title),1)])):r("",!0)]),s("div",Mu,[f.hint?(a(),$("p",Eu,u(f.hint),1)):r("",!0),e(A)&&e(C)?(a(),$("p",Lu,[s("span",null,u(e(A)),1),D[1]||(D[1]=s("span",null," - ",-1)),s("span",null,u(e(C)),1)])):r("",!0),Zl(E.$slots,"default"),t(T,{"month-picker-class":"justify-content-center margin-bottom","is-dark-mode":c.value,modelValue:e(k),"onUpdate:modelValue":D[0]||(D[0]=B=>St(k)?k.value=B:null)},null,8,["is-dark-mode","modelValue"]),t(M,{large:"",fill:"",class:R({disabled:!e(k)[0]||!e(k)[1]}),text:e(F)("Continue"),onClick:b},null,8,["class","text"]),s("div",Ru,[t(w,{onClick:p,text:e(F)("Cancel")},null,8,["text"])])])]),_:3})]),_:3},8,["opened"])}}}),zu=Re({__name:"ListNumberInput",props:{minValue:{},maxValue:{},maxDecimalCount:{},label:{},placeholder:{},disabled:{type:Boolean},readonly:{type:Boolean},modelValue:{}},emits:["update:modelValue"],setup(f,{emit:_}){const n=f,h=_,{currentValue:F,onKeyUpDown:V,onPaste:k}=qo(n,h);return(A,C)=>{const P=o("f7-list-input");return a(),i(P,{type:"text",readonly:!!f.readonly,disabled:!!f.disabled,label:f.label,placeholder:f.placeholder,value:e(F),"onUpdate:value":C[0]||(C[0]=m=>St(F)?F.value=m:null),onKeydown:e(V),onKeyup:e(V),onPaste:e(k)},null,8,["readonly","disabled","label","placeholder","value","onKeydown","onKeyup","onPaste"])}}}),Yu={class:"right"},Hu=Re({__name:"ListItemSelectionSheet",props:{modelValue:{},valueType:{},keyField:{},valueField:{},titleField:{},titleI18n:{type:Boolean},afterField:{},afterI18n:{type:Boolean},iconField:{},iconType:{},colorField:{},hiddenField:{},items:{},show:{type:Boolean}},emits:["update:modelValue","update:show"],setup(f,{emit:_}){const n=f,h=_,{tt:F,ti:V}=ze(),k=S(n.modelValue),A=re(()=>n.items.length>10?"list-item-selection-huge-sheet":n.items.length>6?"list-item-selection-large-sheet":"");function C(d,x){return n.valueType==="index"?k.value===x:n.valueField?k.value===d[n.valueField]:k.value===d}function P(d,x,E,D){return D==="index"?x:E?d[E]:d}function m(){h("update:show",!1)}function c(d,x){n.valueType==="index"?k.value=x:n.valueField?k.value=d[n.valueField]:k.value=d,h("update:modelValue",k.value),m()}function b(d){k.value=n.modelValue,al(d.$el,".page-content","li.list-item-selected")}function p(){m()}return(d,x)=>{const E=o("f7-link"),D=o("f7-toolbar"),T=o("f7-icon"),M=o("ItemIcon"),w=o("f7-list-item"),U=o("f7-list"),I=o("f7-page-content"),B=o("f7-sheet");return a(),i(B,{"swipe-to-close":"","swipe-handler":".swipe-handler",class:R(A.value),opened:f.show,"onSheet:open":b,"onSheet:closed":p},{default:l(()=>[t(D,null,{default:l(()=>[x[0]||(x[0]=s("div",{class:"swipe-handler"},null,-1)),x[1]||(x[1]=s("div",{class:"left"},null,-1)),s("div",Yu,[t(E,{"sheet-close":"",text:e(F)("Done")},null,8,["text"])])]),_:1}),t(I,null,{default:l(()=>[t(U,{dividers:"",class:"no-margin-vertical"},{default:l(()=>[(a(!0),$(ke,null,Te(f.items,(L,v)=>ut((a(),i(w,{link:"#","no-chevron":"",title:e(V)(f.titleField?L[f.titleField]:L,!!f.titleI18n),value:P(L,v,f.valueField,f.valueType),after:e(V)(f.afterField?L[f.afterField]:"",!!f.afterI18n),class:R({"list-item-selected":C(L,v)}),key:P(L,v,f.keyField,f.valueType),onClick:N=>c(L,v)},Gn({"content-start":l(()=>[t(T,{class:"list-item-checked-icon",f7:"checkmark_alt",style:bt({color:C(L,v)?"":"transparent"})},null,8,["style"])]),_:2},[f.iconField?{name:"media",fn:l(()=>[t(M,{"icon-type":f.iconType,"icon-id":L[f.iconField],color:f.colorField?L[f.colorField]:void 0},null,8,["icon-type","icon-id","color"])]),key:"0"}:void 0]),1032,["title","value","after","class","onClick"])),[[vt,L&&(!f.hiddenField||!L[f.hiddenField])]])),128))]),_:1})]),_:1})]),_:1},8,["class","opened"])}}}),qu={key:0},Wu=Re({__name:"ListItemSelectionPopup",props:{modelValue:{},title:{},valueType:{},keyField:{},valueField:{},titleField:{},titleI18n:{type:Boolean},afterField:{},afterI18n:{type:Boolean},iconField:{},iconType:{},colorField:{},hiddenField:{},enableFilter:{type:Boolean},filterPlaceholder:{},filterNoItemsText:{},items:{},show:{type:Boolean}},emits:["update:modelValue","update:show"],setup(f,{emit:_}){const n=f,h=_,{tt:F,ti:V}=ze(),k=jt("searchbar"),A=S(n.modelValue),C=S(""),P=re(()=>{const D=[],T=n.items,M=C.value?.toLowerCase()??"";for(const w of T)if(n.valueType==="index"){if(!n.enableFilter||!M||String(w).toLowerCase().indexOf(M)>=0){D.push(w);continue}}else{const U=w;if(n.hiddenField&&U[n.hiddenField])continue;if(!n.enableFilter||!M){D.push(w);continue}if(V(U[n.titleField],!!n.titleI18n).toLowerCase().indexOf(M)>=0){D.push(w);continue}if(b(w).toLowerCase().indexOf(M)>=0){D.push(w);continue}}return D});function m(D,T){return n.valueType==="index"?A.value===T:n.valueField?A.value===D[n.valueField]:A.value===D}function c(D,T,M,w){return w==="index"?T:M?D[M]:D}function b(D){return n.valueType==="index"?"":n.afterField?V(D[n.afterField],!!n.afterI18n):""}function p(){h("update:show",!1)}function d(D,T){n.valueType==="index"?A.value=T:n.valueField?A.value=D[n.valueField]:A.value=D,h("update:modelValue",A.value),p()}function x(D){A.value=n.modelValue,al(D.$el,".page-content","li.list-item-selected")}function E(){p(),C.value="",k.value?.clear()}return(D,T)=>{const M=o("f7-nav-left"),w=o("f7-nav-title"),U=o("f7-link"),I=o("f7-nav-right"),B=o("f7-navbar"),L=o("f7-searchbar"),v=o("f7-icon"),N=o("ItemIcon"),z=o("f7-list-item"),K=o("f7-list"),W=o("f7-block"),q=o("f7-page"),g=o("f7-popup");return a(),i(g,{push:"",opened:f.show,"onPopup:open":x,"onPopup:closed":E},{default:l(()=>[t(q,null,{default:l(()=>[t(B,{outline:!1},{default:l(()=>[t(M),f.title?(a(),i(w,{key:0,title:f.title},null,8,["title"])):r("",!0),t(I,null,{default:l(()=>[t(U,{"popup-close":"",text:e(F)("Done")},null,8,["text"])]),_:1})]),_:1}),f.enableFilter?(a(),i(L,{key:0,ref_key:"searchbar",ref:k,"custom-searchs":"",value:C.value,placeholder:f.filterPlaceholder,"disable-button":!1,onInput:T[0]||(T[0]=J=>C.value=J.target.value)},null,8,["value","placeholder"])):r("",!0),t(W,{class:"no-padding"},{default:l(()=>[t(K,{strong:"",outline:"",dividers:""},{default:l(()=>[(a(!0),$(ke,null,Te(P.value,(J,te)=>ut((a(),i(z,{link:"#","no-chevron":"",title:e(V)(f.titleField?J[f.titleField]:J,!!f.titleI18n),value:c(J,te,f.valueField,f.valueType),class:R({"list-item-selected":m(J,te)}),key:c(J,te,f.keyField,f.valueType),onClick:Z=>d(J,te)},Gn({"content-start":l(()=>[t(v,{class:"list-item-checked-icon",f7:"checkmark_alt",style:bt({color:m(J,te)?"":"transparent"})},null,8,["style"])]),after:l(()=>[f.afterField?(a(),$("small",qu,u(b(J)),1)):r("",!0)]),_:2},[f.iconField?{name:"media",fn:l(()=>[t(N,{"icon-type":f.iconType,"icon-id":J[f.iconField],color:f.colorField?J[f.colorField]:void 0},null,8,["icon-type","icon-id","color"])]),key:"0"}:void 0]),1032,["title","value","class","onClick"])),[[vt,J&&(!f.hiddenField||!J[f.hiddenField])]])),128)),!P.value||!P.value.length?(a(),i(z,{key:0,title:f.filterNoItemsText},null,8,["title"])):r("",!0)]),_:1})]),_:1})]),_:1})]),_:1},8,["opened"])}}}),Gu={class:"right"},ju={class:"primary-list-container"},Ku={class:"secondary-list-container"},Zu=Re({__name:"TwoColumnListItemSelectionSheet",props:{show:{type:Boolean},primaryValueField:{},primaryHeaderField:{},primaryHeaderI18n:{type:Boolean},primaryFooterField:{},primaryFooterI18n:{type:Boolean},secondaryHeaderField:{},secondaryHeaderI18n:{type:Boolean},secondaryFooterField:{},secondaryFooterI18n:{type:Boolean},modelValue:{},primaryKeyField:{},primaryTitleField:{},primaryTitleI18n:{type:Boolean},primaryIconField:{},primaryIconType:{},primaryColorField:{},primaryHiddenField:{},primarySubItemsField:{},secondaryKeyField:{},secondaryValueField:{},secondaryTitleField:{},secondaryTitleI18n:{type:Boolean},secondaryIconField:{},secondaryIconType:{},secondaryColorField:{},secondaryHiddenField:{},enableFilter:{type:Boolean},filterPlaceholder:{},filterNoItemsText:{},items:{}},emits:["update:modelValue","update:show"],setup(f,{emit:_}){const n=f,h=_,{tt:F,ti:V}=ze(),{filterContent:k,filteredItems:A,getFilteredSubItems:C,getCurrentPrimaryValueBySecondaryValue:P,isSecondaryValueSelected:m,getSelectedPrimaryItem:c,updateCurrentPrimaryValue:b,updateCurrentSecondaryValue:p}=Wo(n),d=jt("sheet"),x=jt("searchbar"),E=S(P(n.modelValue)),D=S(n.modelValue),T=re(()=>C(M.value)),M=re(()=>c(E.value));function w(z){return m(D.value,z)}function U(){h("update:show",!1)}function I(z){b(E,z)}function B(z){p(D,z),h("update:modelValue",D.value),U()}function L(){Jn(d.value?.$el,window.innerHeight)}function v(z){E.value=P(n.modelValue),D.value=n.modelValue,al(z.$el,".primary-list-container","li.primary-list-item-selected"),al(z.$el,".secondary-list-container","li.secondary-list-item-selected")}function N(){U(),k.value="",x.value?.clear()}return(z,K)=>{const W=o("f7-link"),q=o("f7-toolbar"),g=o("f7-searchbar"),J=o("ItemIcon"),te=o("f7-icon"),Z=o("f7-list-item"),Y=o("f7-list"),H=o("f7-page-content"),fe=o("f7-sheet");return a(),i(fe,{ref_key:"sheet",ref:d,"swipe-to-close":"","swipe-handler":".swipe-handler",style:{height:"auto"},opened:f.show,"onSheet:open":v,"onSheet:closed":N},{default:l(()=>[t(q,null,{default:l(()=>[K[1]||(K[1]=s("div",{class:"swipe-handler"},null,-1)),K[2]||(K[2]=s("div",{class:"left"},null,-1)),s("div",Gu,[t(W,{"sheet-close":"",text:e(F)("Done")},null,8,["text"])])]),_:1}),f.enableFilter?(a(),i(g,{key:0,ref_key:"searchbar",ref:x,"custom-searchs":"",value:e(k),placeholder:f.filterPlaceholder,"disable-button":!1,onInput:K[0]||(K[0]=ee=>k.value=ee.target.value),onFocus:L},null,8,["value","placeholder"])):r("",!0),t(H,{class:"no-padding-top"},{default:l(()=>[s("div",{class:R(["grid grid-gap",{"grid-cols-2":e(A)&&e(A).length}])},[s("div",null,[s("div",ju,[t(Y,{dividers:"",class:"primary-list no-margin-vertical"},{default:l(()=>[(a(!0),$(ke,null,Te(e(A),ee=>(a(),i(Z,{link:"#","no-chevron":"",class:R({"primary-list-item-selected":ee===M.value}),value:f.primaryValueField?ee[f.primaryValueField]:ee,title:f.primaryTitleField?e(V)(ee[f.primaryTitleField],!!f.primaryTitleI18n):"",header:f.primaryHeaderField?e(V)(ee[f.primaryHeaderField],!!f.primaryHeaderI18n):"",footer:f.primaryFooterField?e(V)(ee[f.primaryFooterField],!!f.primaryFooterI18n):"",key:f.primaryKeyField?ee[f.primaryKeyField]:ee,onClick:j=>I(ee)},{media:l(()=>[t(J,{"icon-type":f.primaryIconType,"icon-id":f.primaryIconField?ee[f.primaryIconField]:void 0,color:f.primaryColorField?ee[f.primaryColorField]:void 0},null,8,["icon-type","icon-id","color"])]),after:l(()=>[ee===M.value?(a(),i(te,{key:0,class:"list-item-showing icon-with-direction",f7:"chevron_right"})):r("",!0)]),_:2},1032,["class","value","title","header","footer","onClick"]))),128)),!e(A)||!e(A).length?(a(),i(Z,{key:0,title:f.filterNoItemsText},null,8,["title"])):r("",!0)]),_:1})])]),ut(s("div",null,[s("div",Ku,[M.value&&f.primarySubItemsField&&M.value[f.primarySubItemsField]?(a(),i(Y,{key:0,dividers:"",class:"secondary-list no-margin-vertical"},{default:l(()=>[(a(!0),$(ke,null,Te(T.value,ee=>(a(),i(Z,{link:"#","no-chevron":"",class:R({"secondary-list-item-selected":w(ee)}),value:f.secondaryValueField?ee[f.secondaryValueField]:ee,title:f.secondaryTitleField?e(V)(ee[f.secondaryTitleField],!!f.secondaryTitleI18n):"",header:f.secondaryHeaderField?e(V)(ee[f.secondaryHeaderField],!!f.secondaryHeaderI18n):"",footer:f.secondaryFooterField?e(V)(ee[f.secondaryFooterField],!!f.secondaryFooterI18n):"",key:f.secondaryKeyField?ee[f.secondaryKeyField]:ee,onClick:j=>B(ee)},{media:l(()=>[t(J,{"icon-type":f.secondaryIconType,"icon-id":f.secondaryIconField?ee[f.secondaryIconField]:void 0,color:f.secondaryColorField?ee[f.secondaryColorField]:void 0},null,8,["icon-type","icon-id","color"])]),after:l(()=>[w(ee)?(a(),i(te,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"})):r("",!0)]),_:2},1032,["class","value","title","header","footer","onClick"]))),128))]),_:1})):r("",!0)])],512),[[vt,e(A)&&e(A).length]])],2)]),_:1})]),_:1},8,["opened"])}}}),Xu={class:"right"},Qu=Re({__name:"TreeViewSelectionSheet",props:{show:{type:Boolean},modelValue:{},primaryKeyField:{},primaryTitleField:{},primaryTitleI18n:{type:Boolean},primaryIconField:{},primaryIconType:{},primaryColorField:{},primaryHiddenField:{},primarySubItemsField:{},secondaryKeyField:{},secondaryValueField:{},secondaryTitleField:{},secondaryTitleI18n:{type:Boolean},secondaryIconField:{},secondaryIconType:{},secondaryColorField:{},secondaryHiddenField:{},enableFilter:{type:Boolean},filterPlaceholder:{},filterNoItemsText:{},items:{}},emits:["update:modelValue","update:show"],setup(f,{emit:_}){const n=f,h=_,{tt:F,ti:V}=ze(),{filterContent:k,visibleItemsCount:A,filteredItems:C,getFilteredSubItems:P,isSecondaryValueSelected:m,updateCurrentSecondaryValue:c}=Go(n),b=jt("sheet"),p=jt("searchbar"),d=S(n.modelValue),x=re(()=>A.value>6?"tree-view-selection-huge-sheet":A.value>2?"tree-view-selection-large-sheet":"tree-view-selection-default-sheet");function E(U){const I=U[n.primarySubItemsField];if(I.length<1)return!1;const B=k.value?.toLowerCase()??"";for(const L of I)if(!(n.secondaryHiddenField&&L[n.secondaryHiddenField])){if(n.primaryTitleField&&B&&V(L[n.primaryTitleField],!!n.primaryTitleI18n).toLowerCase().indexOf(B)>=0||n.secondaryValueField&&L[n.secondaryValueField]===d.value)return!0;if(!n.secondaryValueField&&L===d.value)return!0}return!1}function D(U){c(d,U),h("update:modelValue",d.value),h("update:show",!1)}function T(){Jn(b.value?.$el,window.innerHeight)}function M(U){d.value=n.modelValue,al(U.$el,".page-content",".treeview-item .treeview-item-selected")}function w(){h("update:show",!1),k.value="",p.value?.clear()}return(U,I)=>{const B=o("f7-link"),L=o("f7-toolbar"),v=o("f7-searchbar"),N=o("f7-list-item"),z=o("f7-list"),K=o("ItemIcon"),W=o("f7-treeview-item"),q=o("f7-treeview"),g=o("f7-page-content"),J=o("f7-sheet");return a(),i(J,{ref_key:"sheet",ref:b,"swipe-to-close":"","swipe-handler":".swipe-handler",style:{height:"auto"},opened:f.show,"onSheet:open":M,"onSheet:closed":w},{default:l(()=>[t(L,null,{default:l(()=>[I[1]||(I[1]=s("div",{class:"swipe-handler"},null,-1)),I[2]||(I[2]=s("div",{class:"left"},null,-1)),s("div",Xu,[t(B,{"sheet-close":"",text:e(F)("Done")},null,8,["text"])])]),_:1}),f.enableFilter?(a(),i(v,{key:0,ref_key:"searchbar",ref:p,"custom-searchs":"",value:e(k),placeholder:f.filterPlaceholder,"disable-button":!1,onInput:I[0]||(I[0]=te=>k.value=te.target.value),onFocus:T},null,8,["value","placeholder"])):r("",!0),t(g,{class:R("no-padding-top "+x.value)},{default:l(()=>[!e(C)||!e(C).length?(a(),i(z,{key:0,class:"no-margin-top no-margin-bottom"},{default:l(()=>[t(N,{title:f.filterNoItemsText},null,8,["title"])]),_:1})):r("",!0),t(q,null,{default:l(()=>[(a(!0),$(ke,null,Te(e(C),te=>(a(),i(W,{"item-toggle":"",opened:E(te),label:e(V)(f.primaryTitleField?te[f.primaryTitleField]:te,!!f.primaryTitleI18n),key:f.primaryKeyField?te[f.primaryKeyField]:te},{media:l(()=>[f.primaryIconField?(a(),i(K,{key:0,"icon-type":f.primaryIconType,"icon-id":te[f.primaryIconField],color:f.primaryColorField?te[f.primaryColorField]:void 0},null,8,["icon-type","icon-id","color"])):r("",!0)]),default:l(()=>[(a(!0),$(ke,null,Te(e(P)(te),Z=>(a(),i(W,{selectable:"",selected:e(m)(d.value,Z),label:e(V)(f.secondaryTitleField?Z[f.secondaryTitleField]:Z,!!f.secondaryTitleI18n),key:f.secondaryKeyField?Z[f.secondaryKeyField]:Z,onClick:Y=>D(Z)},{media:l(()=>[f.secondaryIconField?(a(),i(K,{key:0,"icon-type":f.secondaryIconType,"icon-id":Z[f.secondaryIconField],color:f.secondaryColorField?Z[f.secondaryColorField]:void 0},null,8,["icon-type","icon-id","color"])):r("",!0)]),_:2},1032,["selected","label","onClick"]))),128))]),_:2},1032,["opened","label"]))),128))]),_:1})]),_:1},8,["class"])]),_:1},8,["opened"])}}}),Ju={class:"right"},ec=Re({__name:"IconSelectionSheet",props:{modelValue:{},show:{type:Boolean},columnCount:{},color:{},allIconInfos:{}},emits:["update:modelValue","update:show"],setup(f,{emit:_}){const n=f,h=_,{tt:F}=ze(),V=S(n.modelValue),k=S(n.columnCount||7),A=re(()=>jo(n.allIconInfos,k.value)),C=re(()=>A.value.length>10?"icon-selection-huge-sheet":A.value.length>6?"icon-selection-large-sheet":"");function P(p){V.value=p.id,h("update:modelValue",V.value)}function m(p){return ba(p,"id",V.value)}function c(p){al(p.$el,".page-content",".row-has-selected-item")}function b(){h("update:show",!1)}return(p,d)=>{const x=o("f7-link"),E=o("f7-toolbar"),D=o("f7-icon"),T=o("f7-badge"),M=o("ItemIcon"),w=o("f7-block"),U=o("f7-page-content"),I=o("f7-sheet");return a(),i(I,{"swipe-to-close":"","swipe-handler":".swipe-handler",class:R(C.value),opened:f.show,"onSheet:open":c,"onSheet:closed":b},{default:l(()=>[t(E,null,{default:l(()=>[d[0]||(d[0]=s("div",{class:"swipe-handler"},null,-1)),d[1]||(d[1]=s("div",{class:"left"},null,-1)),s("div",Ju,[t(x,{"sheet-close":"",text:e(F)("Done")},null,8,["text"])])]),_:1}),t(U,null,{default:l(()=>[t(w,{class:"margin-vertical no-padding"},{default:l(()=>[(a(!0),$(ke,null,Te(A.value,(B,L)=>(a(),$("div",{class:R(["grid padding-vertical-half padding-horizontal-half",{"row-has-selected-item":m(B)}]),style:bt(`grid-template-columns: repeat(${k.value}, minmax(0, 1fr));`),key:L},[(a(!0),$(ke,null,Te(B,v=>(a(),$("div",{class:"text-align-center",key:v.id},[t(M,{"icon-type":"fixed","icon-id":v.icon,color:f.color,onClick:N=>P(v)},{default:l(()=>[V.value&&V.value===v.id?(a(),i(T,{key:0,color:"default",class:"right-bottom-icon"},{default:l(()=>[t(D,{f7:"checkmark_alt"})]),_:1})):r("",!0)]),_:2},1032,["icon-id","color","onClick"])]))),128))],6))),128))]),_:1})]),_:1})]),_:1},8,["class","opened"])}}}),tc={class:"right"},lc=Re({__name:"ColorSelectionSheet",props:{modelValue:{},show:{type:Boolean},columnCount:{},allColorInfos:{}},emits:["update:modelValue","update:show"],setup(f,{emit:_}){const n=f,h=_,{tt:F}=ze(),V=S(n.modelValue),k=S(n.columnCount||7),A=re(()=>Ko(n.allColorInfos,k.value));function C(b){V.value=b.color,h("update:modelValue",V.value)}function P(b){return ba(b,"id",V.value)}function m(b){V.value=n.modelValue,al(b.$el,".page-content",".row-has-selected-item")}function c(){h("update:show",!1)}return(b,p)=>{const d=o("f7-link"),x=o("f7-toolbar"),E=o("f7-icon"),D=o("f7-badge"),T=o("ItemIcon"),M=o("f7-block"),w=o("f7-page-content"),U=o("f7-sheet");return a(),i(U,{"swipe-to-close":"","swipe-handler":".swipe-handler",opened:f.show,"onSheet:open":m,"onSheet:closed":c},{default:l(()=>[t(x,null,{default:l(()=>[p[0]||(p[0]=s("div",{class:"swipe-handler"},null,-1)),p[1]||(p[1]=s("div",{class:"left"},null,-1)),s("div",tc,[t(d,{"sheet-close":"",text:e(F)("Done")},null,8,["text"])])]),_:1}),t(w,null,{default:l(()=>[t(M,{class:"margin-vertical no-padding"},{default:l(()=>[(a(!0),$(ke,null,Te(A.value,(I,B)=>(a(),$("div",{class:R(["grid padding-vertical-half padding-horizontal-half",{"row-has-selected-item":P(I)}]),style:bt(`grid-template-columns: repeat(${k.value}, minmax(0, 1fr));`),key:B},[(a(!0),$(ke,null,Te(I,L=>(a(),$("div",{class:"text-align-center",key:L.color},[t(T,{"icon-type":"fixed-f7","icon-id":"app_fill",color:L.color,onClick:v=>C(L)},{default:l(()=>[V.value&&V.value===L.color?(a(),i(D,{key:0,color:"default",class:"right-bottom-icon"},{default:l(()=>[t(E,{f7:"checkmark_alt"})]),_:1})):r("",!0)]),_:2},1032,["color","onClick"])]))),128))],6))),128))]),_:1})]),_:1})]),_:1},8,["opened"])}}}),nc={class:"display-flex padding justify-content-space-between align-items-center"},ac={key:0,class:"ebk-sheet-title"},oc={class:"padding-horizontal padding-bottom"},sc={key:0,class:"no-margin-top margin-bottom-half"},ic=["rows","value"],rc={class:"margin-top text-align-center"},uc=Re({__name:"InformationSheet",props:{title:{},hint:{},information:{},rowCount:{},enableCopy:{type:Boolean},show:{type:Boolean}},emits:["update:show","info:copied"],setup(f,{emit:_}){const n=f,h=_,{tt:F}=ze();function V(){Zo(n.information),h("info:copied")}function k(){h("update:show",!1)}function A(){k()}return(C,P)=>{const m=o("f7-link"),c=o("f7-page-content"),b=o("f7-sheet");return a(),i(b,{"swipe-to-close":"","swipe-handler":".swipe-handler",style:{height:"auto"},opened:f.show,"onSheet:closed":A},{default:l(()=>[P[0]||(P[0]=s("div",{class:"swipe-handler",style:{"z-index":"10"}},null,-1)),t(c,{class:"margin-top no-padding-top"},{default:l(()=>[s("div",nc,[f.title?(a(),$("div",ac,[s("b",null,u(f.title),1)])):r("",!0)]),s("div",oc,[f.hint?(a(),$("p",sc,[s("span",null,u(f.hint),1),f.enableCopy?(a(),i(m,{key:0,class:"icon-after-text","icon-only":"","icon-f7":"doc_on_doc",onClick:V})):r("",!0)])):r("",!0),s("textarea",{class:"information-content full-line",readonly:!0,rows:f.rowCount,value:f.information},null,8,ic),s("div",rc,[t(m,{onClick:k,text:e(F)("Close")},null,8,["text"])])])]),_:1})]),_:1},8,["opened"])}}}),cc={key:0,class:"margin-top padding-horizontal"},dc={class:"numpad-values"},fc={class:"numpad-buttons"},pc={class:"numpad-button-text numpad-button-text-normal"},mc={class:"numpad-button-text numpad-button-text-normal"},vc={class:"numpad-button-text numpad-button-text-normal"},gc={class:"numpad-button-text numpad-button-text-normal"},yc={class:"numpad-button-text numpad-button-text-normal"},hc={class:"numpad-button-text numpad-button-text-normal"},_c={class:"numpad-button-text numpad-button-text-normal"},kc={class:"numpad-button-text numpad-button-text-normal"},bc={class:"numpad-button-text numpad-button-text-normal"},wc={class:"numpad-button-text numpad-button-text-normal"},Tc={class:"numpad-button-text numpad-button-text-normal"},Cc={class:"numpad-button-text numpad-button-text-normal"},Sc={class:"numpad-button-text numpad-button-text-normal"},xc=Re({__name:"NumberPadSheet",props:{modelValue:{},minValue:{},maxValue:{},currency:{},flipNegative:{type:Boolean},hint:{},show:{type:Boolean}},emits:["update:modelValue","update:show"],setup(f,{emit:_}){const n=f,h=_,{tt:F,getAllLocalizedDigits:V,getCurrentNumeralSystemType:k,getCurrentDecimalSeparator:A,parseAmountFromWesternArabicNumerals:C,formatAmountToWesternArabicNumeralsWithoutDigitGrouping:P,appendDigitGroupingSymbolAndDecimalSeparator:m}=ze(),{showToast:c}=nt(),b=S(""),p=S(""),d=S(I(n.modelValue,n.flipNegative)),x=re(()=>k()),E=re(()=>V()),D=re(()=>A()),T=re(()=>!n.currency||!Un[n.currency]||!Zt(Un[n.currency].fraction)?!0:Un[n.currency].fraction>0),M=re(()=>{const Z=m(x.value.replaceWesternArabicDigitsToLocalizedDigits(b.value));let Y=d.value,H="";return Y&&Y[Y.length-1]===D.value&&(Y=Y.substring(0,Y.length-1),H=D.value),Y=m(x.value.replaceWesternArabicDigitsToLocalizedDigits(Y)),H&&(Y+=H),p.value?`${Z} ${p.value} ${Y}`:Y}),w=re(()=>M.value&&M.value.length>=24?"numpad-value-small":M.value&&M.value.length>=16?"numpad-value-normal":"numpad-value-large"),U=re(()=>p.value?"=":F("OK"));function I(Z,Y){return Y&&(Z=-Z),B(Z,!0)}function B(Z,Y){if(!Zt(Z))return"";const H=P(Z,n.currency),fe=A(),ee=H.indexOf(fe);if(ee<0)return Y&&H===ul.WesternArabicNumerals.digitZero?"":H;const j=H.substring(0,ee),O=H.substring(ee+1,H.length);let le="";for(let ge=O.length-1;ge>=0;ge--)(O[ge]!==ul.WesternArabicNumerals.digitZero||le.length>0)&&(le=O[ge]+le);return le.length<1?Y&&j===ul.WesternArabicNumerals.digitZero?"":j:`${j}${fe}${le}`}function L(Z){if(!b.value&&p.value===""&&(d.value="-"+d.value,p.value=""),d.value===ul.WesternArabicNumerals.digitZero){d.value=Z.toString();return}else if(d.value===`-${ul.WesternArabicNumerals.digitZero}`){d.value="-"+Z.toString();return}const Y=d.value.indexOf(D.value);if(Y>=0&&d.value.substring(Y+1,d.value.length).length>=2)return;const H=d.value+Z.toString();Zt(n.minValue)&&C(H)<n.minValue||Zt(n.maxValue)&&C(H)>n.maxValue||(d.value=H)}function v(Z){L(Z),L(Z)}function N(){d.value.indexOf(D.value)>=0||(!b.value&&p.value===""&&(d.value="-"+d.value,p.value=""),d.value.length<1?d.value=ul.WesternArabicNumerals.digitZero:d.value==="-"&&(d.value="-"+ul.WesternArabicNumerals.digitZero),d.value=d.value+D.value)}function z(Z){if(d.value){if(p.value&&!q())return;b.value=d.value,d.value=""}p.value=Z}function K(){if(!d.value||d.value.length<1){p.value&&(d.value=b.value,b.value="",p.value="");return}d.value=d.value.substring(0,d.value.length-1)}function W(){d.value="",b.value="",p.value=""}function q(){if(p.value&&d.value.length>=1){const Z=C(b.value),Y=C(d.value);let H=0;switch(p.value){case"+":H=Z+Y;break;case"":H=Z-Y;break;case"":H=Math.trunc(Z*Y/100);break;default:H=Z}return Zt(n.minValue)&&H<n.minValue||Zt(n.maxValue)&&H>n.maxValue?(c("Numeric Overflow"),!1):(d.value=B(H,!1),b.value="",p.value="",!0)}else{if(p.value&&d.value.length<1)return d.value=b.value,b.value="",p.value="",!0;{let Z=C(d.value);return n.flipNegative&&(Z=-Z),h("update:modelValue",Z),g(),!0}}}function g(){h("update:show",!1)}function J(){d.value=I(n.modelValue,n.flipNegative),b.value="",p.value=""}function te(){g()}return Dl(()=>n.flipNegative,Z=>{d.value=I(n.modelValue,Z)}),(Z,Y)=>{const H=o("f7-button"),fe=o("f7-icon"),ee=o("f7-page-content"),j=o("f7-sheet");return a(),i(j,{"swipe-to-close":"","swipe-handler":".swipe-handler",class:"numpad-sheet",style:{height:"auto"},opened:f.show,"onSheet:open":J,"onSheet:closed":te},{default:l(()=>[Y[20]||(Y[20]=s("div",{class:"swipe-handler",style:{"z-index":"10"}},null,-1)),t(ee,{class:"margin-top no-padding-top"},{default:l(()=>[f.hint?(a(),$("div",cc,[s("span",null,u(f.hint),1)])):r("",!0),s("div",dc,[s("span",{class:R(["numpad-value",w.value])},u(M.value),3)]),s("div",fc,[t(H,{class:"numpad-button numpad-button-num",onClick:Y[0]||(Y[0]=O=>L(7))},{default:l(()=>[s("span",pc,u(E.value[7]),1)]),_:1}),t(H,{class:"numpad-button numpad-button-num",onClick:Y[1]||(Y[1]=O=>L(8))},{default:l(()=>[s("span",mc,u(E.value[8]),1)]),_:1}),t(H,{class:"numpad-button numpad-button-num",onClick:Y[2]||(Y[2]=O=>L(9))},{default:l(()=>[s("span",vc,u(E.value[9]),1)]),_:1}),t(H,{class:"numpad-button numpad-button-function no-right-border",onClick:Y[3]||(Y[3]=O=>z(""))},{default:l(()=>[...Y[17]||(Y[17]=[s("span",{class:"numpad-button-text numpad-button-text-normal"},"",-1)])]),_:1}),t(H,{class:"numpad-button numpad-button-num",onClick:Y[4]||(Y[4]=O=>L(4))},{default:l(()=>[s("span",gc,u(E.value[4]),1)]),_:1}),t(H,{class:"numpad-button numpad-button-num",onClick:Y[5]||(Y[5]=O=>L(5))},{default:l(()=>[s("span",yc,u(E.value[5]),1)]),_:1}),t(H,{class:"numpad-button numpad-button-num",onClick:Y[6]||(Y[6]=O=>L(6))},{default:l(()=>[s("span",hc,u(E.value[6]),1)]),_:1}),t(H,{class:"numpad-button numpad-button-function no-right-border",onClick:Y[7]||(Y[7]=O=>z(""))},{default:l(()=>[...Y[18]||(Y[18]=[s("span",{class:"numpad-button-text numpad-button-text-normal"},"",-1)])]),_:1}),t(H,{class:"numpad-button numpad-button-num",onClick:Y[8]||(Y[8]=O=>L(1))},{default:l(()=>[s("span",_c,u(E.value[1]),1)]),_:1}),t(H,{class:"numpad-button numpad-button-num",onClick:Y[9]||(Y[9]=O=>L(2))},{default:l(()=>[s("span",kc,u(E.value[2]),1)]),_:1}),t(H,{class:"numpad-button numpad-button-num",onClick:Y[10]||(Y[10]=O=>L(3))},{default:l(()=>[s("span",bc,u(E.value[3]),1)]),_:1}),t(H,{class:"numpad-button numpad-button-function no-right-border",onClick:Y[11]||(Y[11]=O=>z("+"))},{default:l(()=>[...Y[19]||(Y[19]=[s("span",{class:"numpad-button-text numpad-button-text-normal"},"+",-1)])]),_:1}),T.value?(a(),i(H,{key:0,class:"numpad-button numpad-button-num",onClick:Y[12]||(Y[12]=O=>N())},{default:l(()=>[s("span",wc,u(D.value),1)]),_:1})):r("",!0),T.value?r("",!0):(a(),i(H,{key:1,class:"numpad-button numpad-button-num",onClick:Y[13]||(Y[13]=O=>v(0))},{default:l(()=>[s("span",Tc,u(`${E.value[0]}${E.value[0]}`),1)]),_:1})),t(H,{class:"numpad-button numpad-button-num",onClick:Y[14]||(Y[14]=O=>L(0))},{default:l(()=>[s("span",Cc,u(E.value[0]),1)]),_:1}),t(H,{class:"numpad-button numpad-button-num",onClick:K,onTaphold:Y[15]||(Y[15]=O=>W())},{default:l(()=>[s("span",Sc,[t(fe,{class:"icon-with-direction",f7:"delete_left"})])]),_:1}),t(H,{class:"numpad-button numpad-button-confirm no-right-border no-bottom-border",fill:"",onClick:Y[16]||(Y[16]=O=>q())},{default:l(()=>[s("span",{class:R({"numpad-button-text":!0,"numpad-button-text-confirm":!p.value})},u(U.value),3)]),_:1})])]),_:1})]),_:1},8,["opened"])}}}),Ac={class:"left"},$c={class:"right"},Dc={class:"display-flex padding justify-content-space-between align-items-center"},Ic={key:0,class:"ebk-sheet-title"},Vc={key:1,class:"ebk-sheet-title"},Fc={key:2,class:"ebk-sheet-title"},Pc={class:"padding-horizontal padding-bottom"},Uc={class:"no-margin"},Bc={class:"margin-top text-align-center"},Nc=Re({__name:"MapSheet",props:{modelValue:{},readonly:{type:Boolean},setGeoLocationByClickMap:{type:Boolean},show:{type:Boolean}},emits:["update:modelValue","update:setGeoLocationByClickMap","update:show"],setup(f,{emit:_}){const n=f,h=_,{tt:F}=ze(),V=jt("map"),k=re({get:()=>n.modelValue,set:p=>{h("update:modelValue",p)}});function A(p){!n.readonly&&Bn()&&n.setGeoLocationByClickMap&&(k.value=p,V.value?.setMarkerPosition(p))}function C(p){h("update:setGeoLocationByClickMap",p)}function P(){h("update:show",!1)}function m(){h("update:show",!1)}function c(){V.value&&V.value.initMapView()}function b(){m()}return(p,d)=>{const x=o("f7-link"),E=o("f7-toolbar"),D=o("f7-page-content"),T=o("f7-sheet");return a(),i(T,{"swipe-to-close":"","swipe-handler":".swipe-handler",style:{height:"auto"},opened:f.show,"onSheet:open":c,"onSheet:closed":b},{default:l(()=>[t(E,null,{default:l(()=>[d[2]||(d[2]=s("div",{class:"swipe-handler"},null,-1)),s("div",Ac,[!f.readonly&&e(Bn)()&&n.setGeoLocationByClickMap?(a(),i(x,{key:0,text:e(F)("Disable Click to Set Location"),onClick:d[0]||(d[0]=M=>C(!1))},null,8,["text"])):r("",!0),!f.readonly&&e(Bn)()&&!n.setGeoLocationByClickMap?(a(),i(x,{key:1,text:e(F)("Enable Click to Set Location"),onClick:d[1]||(d[1]=M=>C(!0))},null,8,["text"])):r("",!0)]),s("div",$c,[t(x,{text:e(F)("Done"),onClick:P},null,8,["text"])])]),_:1}),t(D,{class:"no-margin-vertical no-padding-vertical"},{default:l(()=>[t(wa,{ref_key:"map",ref:V,height:"400px","geo-location":k.value,onClick:A},{"error-title":l(({mapSupported:M,mapDependencyLoaded:w})=>[s("div",Dc,[M?w?(a(),$("div",Fc)):(a(),$("div",Vc,[s("b",null,u(e(F)("Cannot Initialize Map")),1)])):(a(),$("div",Ic,[s("b",null,u(e(F)("Unsupported Map Provider")),1)]))])]),"error-content":l(()=>[s("div",Pc,[s("p",Uc,u(e(F)("Please refresh the page and try again. If the error persists, ensure that the server's map settings are correctly configured.")),1),s("div",Bc,[t(x,{onClick:m,text:e(F)("Close")},null,8,["text"])])])]),_:1},8,["geo-location"])]),_:1})]),_:1},8,["opened"])}}}),Mc={class:"left"},Ec={class:"right"},Lc={class:"display-flex"},Rc={class:"tag-selection-list-item list-item-valign-middle padding-inline-start-half"},Oc={class:"display-flex"},zc=Re({__name:"TransactionTagSelectionSheet",props:{modelValue:{},allowAddNewTag:{type:Boolean},enableFilter:{type:Boolean},show:{type:Boolean}},emits:["update:modelValue","update:show"],setup(f,{emit:_}){const n=f,h=_,{tt:F}=ze(),{showToast:V}=nt(),k=on(),A=jt("sheet"),C=jt("searchbar"),P=S(""),m=S(Array.from(n.modelValue)),c=S(null),b=S(x()),p=re(()=>{const v=[];for(const N of k.allTransactionTags)if(!(N.hidden&&!E(N.id))){if(!n.enableFilter||!P.value){v.push(N);continue}N.name.toLowerCase().indexOf(P.value.toLowerCase())>=0&&v.push(N)}return v}),d=re(()=>{if(k.allTransactionTags){for(const v of k.allTransactionTags)if(!v.hidden)return!1}return!0});function x(){return k.allTransactionTags&&k.allVisibleTagsCount>8?"tag-selection-huge-sheet":k.allTransactionTags&&k.allVisibleTagsCount>4?"tag-selection-large-sheet":"tag-selection-default-sheet"}function E(v){return m.value.indexOf(v)>=0}function D(v){const N=v.target,z=N.value,K=m.value.indexOf(z);N.checked?K<0&&m.value.push(z):K>=0&&m.value.splice(K,1)}function T(){h("update:modelValue",m.value),h("update:show",!1)}function M(){c.value=Yn.createNewTag()}function w(){c.value&&(je(),k.saveTag({tag:c.value}).then(v=>{Se(),c.value=null,v&&v.id&&m.value.push(v.id)}).catch(v=>{Se(),v.processed||V(v.message||v)}))}function U(){c.value=null}function I(){Jn(A.value?.$el,window.innerHeight)}function B(v){m.value=Array.from(n.modelValue),c.value=null,al(v.$el,".page-content","li.list-item-selected")}function L(){h("update:show",!1),P.value="",C.value?.clear()}return(v,N)=>{const z=o("f7-link"),K=o("f7-toolbar"),W=o("f7-searchbar"),q=o("f7-list-item"),g=o("f7-list"),J=o("f7-icon"),te=o("f7-block"),Z=o("f7-input"),Y=o("f7-button"),H=o("f7-page-content"),fe=o("f7-sheet");return a(),i(fe,{ref_key:"sheet",ref:A,"swipe-to-close":"","swipe-handler":".swipe-handler",style:{height:"auto"},opened:f.show,"onSheet:open":B,"onSheet:closed":L},{default:l(()=>[t(K,null,{default:l(()=>[N[6]||(N[6]=s("div",{class:"swipe-handler"},null,-1)),s("div",Mc,[t(z,{"sheet-close":"",text:e(F)("Cancel")},null,8,["text"])]),s("div",Ec,[p.value&&p.value.length&&!d.value?(a(),i(z,{key:0,text:e(F)("Done"),onClick:T},null,8,["text"])):r("",!0),!p.value||!p.value.length||d.value?(a(),i(z,{key:1,class:R({disabled:c.value}),text:e(F)("Add"),onClick:M},null,8,["class","text"])):r("",!0)])]),_:1}),f.enableFilter?(a(),i(W,{key:0,ref_key:"searchbar",ref:C,"custom-searchs":"",value:P.value,placeholder:e(F)("Find tag"),"disable-button":!1,onInput:N[0]||(N[0]=ee=>P.value=ee.target.value),onFocus:I},null,8,["value","placeholder"])):r("",!0),t(H,{class:R("no-padding-top "+b.value)},{default:l(()=>[(!p.value||!p.value.length||d.value)&&!c.value?(a(),i(g,{key:0,class:"no-margin-top no-margin-bottom"},{default:l(()=>[t(q,{title:e(F)("No available tag")},null,8,["title"])]),_:1})):p.value&&p.value.length&&!d.value||c.value?(a(),i(g,{key:1,dividers:"",class:"no-margin-top no-margin-bottom tag-selection-list"},{default:l(()=>[(a(!0),$(ke,null,Te(p.value,ee=>(a(),i(q,{checkbox:"",class:R(E(ee.id)?"list-item-selected":""),value:ee.id,checked:E(ee.id),key:ee.id,onChange:D},{title:l(()=>[t(te,{class:"no-padding no-margin"},{default:l(()=>[s("div",Lc,[t(J,{class:"transaction-tag-icon",f7:"number"}),s("div",Rc,u(ee.name),1)])]),_:2},1024)]),_:2},1032,["class","value","checked"]))),128)),f.allowAddNewTag&&!c.value?(a(),i(q,{key:0,link:"#","no-chevron":"",title:e(F)("Add new tag"),onClick:N[1]||(N[1]=ee=>M())},null,8,["title"])):r("",!0),f.allowAddNewTag&&c.value?(a(),i(q,{key:1,checkbox:"",indeterminate:"",disabled:""},{media:l(()=>[t(J,{class:"transaction-tag-icon",f7:"number"})]),title:l(()=>[s("div",Oc,[t(Z,{class:"list-title-input padding-inline-start-half",type:"text",placeholder:e(F)("Tag Title"),value:c.value.name,"onUpdate:value":N[2]||(N[2]=ee=>c.value.name=ee),onKeyup:N[3]||(N[3]=hl(ee=>w(),["enter"]))},null,8,["placeholder","value"])])]),after:l(()=>[t(Y,{class:R({"no-padding":!0,disabled:!c.value||!c.value.name}),raised:"",fill:"","icon-f7":"checkmark_alt",color:"blue",onClick:N[4]||(N[4]=ee=>w())},null,8,["class"]),t(Y,{class:"no-padding margin-inline-start-half",raised:"",fill:"","icon-f7":"xmark",color:"gray",onClick:N[5]||(N[5]=ee=>U())})]),_:1})):r("",!0)]),_:1})):r("",!0)]),_:1},8,["class"])]),_:1},8,["opened"])}}}),Yc={class:"left"},Hc={class:"right"},qc={class:"grid grid-cols-2 grid-gap"},Wc={class:"schedule-frequency-type-container"},Gc={class:"schedule-frequency-value-container"},jc=Re({__name:"ScheduleFrequencySheet",props:{show:{type:Boolean},type:{},modelValue:{},disabled:{type:Boolean},readonly:{type:Boolean},label:{}},emits:["update:type","update:modelValue","update:show"],setup(f,{emit:_}){const n=f,h=_,{tt:F}=ze(),{allTransactionScheduledFrequencyTypes:V,allWeekDays:k,allAvailableMonthDays:A,getFrequencyValues:C}=Xo(),P=el(),m=S(n.type),c=S(C(n.modelValue)),b=re(()=>P.currentUserFirstDayOfWeek);function p(w){return c.value.indexOf(w)>=0}function d(w){m.value!==w&&(m.value=w,w===yl.Weekly.type?c.value=[b.value]:w===yl.Monthly.type?c.value=[1]:c.value=[])}function x(w){const U=parseInt(w.target.value);if(w.target.checked){for(const I of c.value)if(I===U)return;c.value.push(U)}else for(const[I,B]of an(c.value))if(I===U){c.value.splice(B,1);break}}function E(){h("update:type",m.value),h("update:modelValue",Qo(c.value).join(",")),h("update:show",!1)}function D(){h("update:show",!1)}function T(w){m.value=n.type,c.value=C(n.modelValue),al(w.$el,".schedule-frequency-value-container","li.list-item-selected")}function M(){D()}return(w,U)=>{const I=o("f7-link"),B=o("f7-toolbar"),L=o("f7-icon"),v=o("f7-list-item"),N=o("f7-list"),z=o("f7-page-content"),K=o("f7-sheet");return a(),i(K,{"swipe-to-close":"","swipe-handler":".swipe-handler",style:{height:"auto"},opened:f.show,"onSheet:open":T,"onSheet:closed":M},{default:l(()=>[t(B,null,{default:l(()=>[U[0]||(U[0]=s("div",{class:"swipe-handler"},null,-1)),s("div",Yc,[t(I,{"sheet-close":"",text:e(F)("Cancel")},null,8,["text"])]),s("div",Hc,[t(I,{text:e(F)("Done"),onClick:E},null,8,["text"])])]),_:1}),t(z,null,{default:l(()=>[s("div",qc,[s("div",null,[s("div",Wc,[t(N,{dividers:"",class:"schedule-frequency-type-list no-margin-vertical"},{default:l(()=>[(a(!0),$(ke,null,Te(e(V),W=>(a(),i(v,{link:"#","no-chevron":"",key:W.type,title:W.displayName,onClick:q=>d(W.type)},{after:l(()=>[m.value===W.type?(a(),i(L,{key:0,class:"list-item-showing icon-with-direction",f7:"chevron_right"})):r("",!0)]),_:2},1032,["title","onClick"]))),128))]),_:1})])]),s("div",null,[s("div",Gc,[m.value===e(yl).Disabled.type?(a(),i(N,{key:0,dividers:"",class:"schedule-frequency-value-list no-margin-vertical"},{default:l(()=>[t(v,{title:e(F)("None")},null,8,["title"])]),_:1})):r("",!0),m.value===e(yl).Weekly.type?(a(),i(N,{key:1,dividers:"",class:"schedule-frequency-value-list no-margin-vertical"},{default:l(()=>[(a(!0),$(ke,null,Te(e(k),W=>(a(),i(v,{checkbox:"",class:R(p(W.type)?"list-item-selected":""),key:W.type,value:W.type,checked:p(W.type),title:W.displayName,onChange:x},null,8,["class","value","checked","title"]))),128))]),_:1})):r("",!0),m.value===e(yl).Monthly.type?(a(),i(N,{key:2,dividers:"",class:"schedule-frequency-value-list no-margin-vertical"},{default:l(()=>[(a(!0),$(ke,null,Te(e(A),W=>(a(),i(v,{checkbox:"",class:R(p(W.day)?"list-item-selected":""),key:W.day,value:W.day,checked:p(W.day),title:W.displayName,onChange:x},null,8,["class","value","checked","title"]))),128))]),_:1})):r("",!0)])])])]),_:1})]),_:1},8,["opened"])}}}),Kc={class:"display-flex padding-top-half"},Zc={class:"statistics-percent-line width-100 no-margin-horizontal"},Xc={class:"display-flex padding-top-half"},Qc={class:"statistics-percent-line width-100 no-margin-horizontal"},Jc=Re({__name:"AccountBalanceTrendsBarChart",props:{loading:{type:Boolean},items:{},dateAggregationType:{},fiscalYearStart:{},account:{}},setup(f){const _=f,{tt:n,formatAmountToLocalizedNumeralsWithCurrency:h}=ze(),{allDataItems:F}=Jo(_),V=S({items:[],topPosition:0}),k=re(()=>{const C=[];let P=0;for(const[m,c]of an(F.value)){m.closingBalance>P&&(P=m.closingBalance);const b={index:c,displayDate:m.displayDate,openingBalance:m.openingBalance,closingBalance:m.closingBalance,medianBalance:m.medianBalance,averageBalance:m.averageBalance,minimumBalance:m.minimumBalance,maximumBalance:m.maximumBalance,color:`#${zn[0]}`,percent:0};C.push(b)}for(const m of C)P>0&&m.closingBalance>0?m.percent=100*m.closingBalance/P:m.percent=0;return C});function A(C,P){V.value=P}return(C,P)=>{const m=o("f7-icon"),c=o("f7-progressbar"),b=o("f7-list-item"),p=o("f7-list");return f.loading?(a(),i(p,{key:0,class:"skeleton-text margin-top-half","media-list":""},{default:l(()=>[(a(),$(ke,null,Te([1,2,3,4,5,6,7,8,9,10,11,12],d=>t(b,{class:"account-balance-trends-list-item",title:"Date Range",after:"0.00 USD",key:d},{media:l(()=>[t(m,{f7:"app_fill"})]),inner:l(()=>[s("div",Kc,[s("div",Zc,[t(c,{progress:0})])])]),_:1})),64))]),_:1})):!f.loading&&(!k.value||!k.value.length)?(a(),i(p,{key:1},{default:l(()=>[t(b,{title:e(n)("No transaction data")},null,8,["title"])]),_:1})):!f.loading&&k.value&&k.value.length>0?(a(),i(p,{class:"margin-top-half","media-list":"","virtual-list":"","virtual-list-params":{items:k.value,renderExternal:A,height:"auto"},key:`account-balance-trends-${f.dateAggregationType}`},{default:l(()=>[s("ul",null,[(a(!0),$(ke,null,Te(V.value.items,d=>(a(),i(b,{class:"account-balance-trends-list-item",key:d.index,style:bt(`top: ${V.value.topPosition}px`),"virtual-list-index":d.index,title:d.displayDate,after:e(h)(d.closingBalance,f.account.currency)},{media:l(()=>[t(m,{f7:"calendar"})]),inner:l(()=>[s("div",Xc,[s("div",Qc,[t(c,{progress:d.percent>=0?d.percent:0,style:bt({"--f7-progressbar-progress-color":d.color})},null,8,["progress","style"])])])]),_:2},1032,["style","virtual-list-index","title","after"]))),128))])]),_:1},8,["virtual-list-params"])):r("",!0)}}}),ed={class:"left"},td={class:"right"},ld=["src"],nd={key:1,class:"image-container-background display-flex justify-content-center align-items-center text-align-center padding-horizontal"},ad={key:0,class:"display-inline-flex flex-direction-column"},od={class:"margin-top-half"},sd={key:1},id=["accept"],rd=Re({__name:"AIImageRecognitionSheet",props:{show:{type:Boolean}},emits:["update:show","recognition:change"],setup(f,{emit:_}){const n=_,{tt:h}=ze(),{showCancelableLoading:F,showToast:V}=nt(),k=Ml(),A=jt("imageInput"),C=S(!1),P=S(!1),m=S(void 0),c=S(null),b=S(void 0);function p(I){C.value=!0,c.value=null,b.value=void 0,es(I,1280,1280,.8).then(B=>{c.value=ts.JPG.createFileFromBlob(B,"image"),b.value=URL.createObjectURL(B),C.value=!1}).catch(B=>{c.value=null,b.value=void 0,C.value=!1,_l.error("failed to compress image",B),V("Unable to load image")})}function d(){C.value||P.value||A.value?.click()}function x(I){if(!I||!I.target)return;const B=I.target;if(!B.files||!B.files.length||!B.files[0])return;const L=B.files[0];B.value="",p(L)}function E(){C.value||P.value||!c.value||(m.value=sn(),P.value=!0,F("Recognizing","AI can make mistakes. Check important info.","Cancel Recognition",D),k.recognizeReceiptImage({imageFile:c.value,cancelableUuid:m.value}).then(I=>{P.value=!1,m.value=void 0,On(),n("update:show",!1),n("recognition:change",I)}).catch(I=>{I.canceled||(P.value=!1,m.value=void 0,On(),I.processed||V(I.message||I))}))}function D(){m.value&&(k.cancelRecognizeReceiptImage(m.value),P.value=!1,m.value=void 0,On(),V("User Canceled"))}function T(){M()}function M(){n("update:show",!1),C.value=!1,P.value=!1,m.value=void 0,c.value=null,b.value=void 0}function w(){C.value=!1,P.value=!1,m.value=void 0,c.value=null,b.value=void 0}function U(){M()}return(I,B)=>{const L=o("f7-link"),v=o("f7-toolbar"),N=o("f7-page-content"),z=o("f7-sheet");return a(),i(z,{"swipe-to-close":"","swipe-handler":".swipe-handler",style:{height:"auto"},opened:f.show,"onSheet:open":w,"onSheet:closed":U},{default:l(()=>[t(v,null,{default:l(()=>[B[1]||(B[1]=s("div",{class:"swipe-handler"},null,-1)),s("div",ed,[t(L,{class:R({disabled:C.value||P.value}),text:e(h)("Cancel"),onClick:T},null,8,["class","text"])]),s("div",td,[t(L,{class:R({disabled:C.value||P.value||!c.value}),text:e(h)("Recognize"),onClick:E},null,8,["class","text"])])]),_:1}),t(N,{class:"no-margin-vertical no-padding-vertical"},{default:l(()=>[s("div",{class:"image-container display-flex justify-content-center",style:{height:"400px"},onClick:d},[b.value?(a(),$("img",{key:0,height:"400px",src:b.value},null,8,ld)):r("",!0),b.value?r("",!0):(a(),$("div",nd,[C.value?C.value?(a(),$("span",sd,u(e(h)("Loading image...")),1)):r("",!0):(a(),$("div",ad,[s("span",null,u(e(h)("Click here to select a receipt or transaction image")),1),s("small",od,u(e(h)("Uploaded image and personal data will be sent to the large language model, please be aware of potential privacy risks.")),1)]))]))])]),_:1}),s("input",{ref_key:"imageInput",ref:A,type:"file",style:{display:"none"},accept:`${e(Ta)};capture=camera`,onChange:B[0]||(B[0]=K=>x(K))},null,40,id)]),_:1},8,["opened"])}}}),ud={mounted(f){va(f)},updated(f){va(f)}},cd={class:"no-margin"},dd={key:0,class:"card-header-content"},fd={key:1,class:"card-header-content"},pd={class:"home-summary-month"},md={class:"no-margin"},vd={key:0,class:"month-expense"},gd={key:1,class:"month-expense"},yd={class:"no-margin"},hd={key:0,class:"home-summary-misc"},_d={key:1,class:"home-summary-misc"},kd={class:"padding-top-half"},bd={key:0},wd={key:1},Td={class:"overview-transaction-footer padding-bottom-half"},Cd={key:0},Sd={key:1},xd={class:"overview-transaction-amount"},Ad={class:"text-income text-align-right"},$d={key:0},Dd={key:1},Id={class:"text-expense text-align-right"},Vd={key:0},Fd={key:1},Pd={class:"padding-top-half"},Ud={key:0},Bd={key:1},Nd={class:"overview-transaction-footer padding-bottom-half"},Md={key:0},Ed={key:1},Ld={key:2},Rd={key:3},Od={class:"overview-transaction-amount"},zd={class:"text-income text-align-right"},Yd={key:0},Hd={key:1},qd={class:"text-expense text-align-right"},Wd={key:0},Gd={key:1},jd={class:"padding-top-half"},Kd={key:0},Zd={key:1},Xd={class:"overview-transaction-footer padding-bottom-half"},Qd={key:0},Jd={key:1},ef={key:2},tf={key:3},lf={class:"overview-transaction-amount"},nf={class:"text-income text-align-right"},af={key:0},of={key:1},sf={class:"text-expense text-align-right"},rf={key:0},uf={key:1},cf={class:"padding-top-half"},df={key:0},ff={key:1},pf={class:"overview-transaction-footer padding-bottom-half"},mf={key:0},vf={key:1},gf={class:"overview-transaction-amount"},yf={class:"text-income text-align-right"},hf={key:0},_f={key:1},kf={class:"text-expense text-align-right"},bf={key:0},wf={key:1},Tf={class:"tabbar-label"},Cf={class:"tabbar-label"},Sf={class:"tabbar-label"},xf={class:"tabbar-label"},Af=Re({__name:"HomePage",props:{f7router:{}},setup(f){const _=f,{tt:n}=ze(),{showToast:h}=nt(),{showAmountInHomePage:F,displayDateRange:V,transactionOverview:k,getDisplayIncomeAmount:A,getDisplayExpenseAmount:C}=ls(),P=ol(),m=sl(),c=Zn(),b=ns(),p=S(!0),d=S(!1),x=S(!1),E=re(()=>c.allVisibleTemplates[Mt.Normal.type]||[]);function D(){(oa()||E.value&&E.value.length)&&(d.value=!0)}function T(){if(Nl()&&rn()){p.value=!0;const I=[P.loadAllAccounts({force:!1}),m.loadAllCategories({force:!1}),c.loadAllTemplates({templateType:Mt.Normal.type,force:!1}),b.loadTransactionOverview({force:!1})];Promise.all(I).then(()=>{p.value=!1}).catch(B=>{p.value=!1,B.processed||h(B.message||B)})}}function M(I){const B=!!I;b.loadTransactionOverview({force:B}).then(()=>{I?.(),B&&h("Data has been updated")}).catch(L=>{I?.(),L.processed||h(L.message||L)})}function w(I){const B=[];I.type&&B.push(`type=${I.type}`),I.time&&B.push(`time=${I.time}`),I.categoryId&&B.push(`categoryId=${I.categoryId}`),I.sourceAccountId&&B.push(`accountId=${I.sourceAccountId}`),I.destinationAccountId&&B.push(`destinationAccountId=${I.destinationAccountId}`),I.sourceAmount&&B.push(`amount=${I.sourceAmount}`),I.destinationAmount&&B.push(`destinationAmount=${I.destinationAmount}`),I.tagIds&&B.push(`tagIds=${I.tagIds.join(",")}`),I.comment&&B.push(`comment=${encodeURIComponent(I.comment)}`),B.push("noTransactionDraft=true"),_.f7router.navigate(`/transaction/add?${B.join("&")}`)}function U(){p.value||M()}return T(),(I,B)=>{const L=o("f7-nav-title"),v=o("f7-navbar"),N=o("f7-icon"),z=o("f7-link"),K=o("f7-card-header"),W=o("f7-card"),q=o("f7-list-item"),g=o("f7-list"),J=o("f7-toolbar"),te=o("f7-popover"),Z=o("a-i-image-recognition-sheet"),Y=o("f7-page");return a(),i(Y,{ptr:"","onPtr:refresh":M,"onPage:afterin":U},{default:l(()=>[t(v,null,{default:l(()=>[t(L,{title:e(n)("global.app.title")},null,8,["title"])]),_:1}),t(W,{class:R(["home-summary-card",{"skeleton-text":p.value}])},{default:l(()=>[t(K,{class:"display-block",style:{"padding-top":"120px"}},{default:l(()=>[s("p",cd,[p.value?(a(),$("span",dd,[...B[4]||(B[4]=[s("span",{class:"home-summary-month"},"Month",-1),s("span",null,"",-1),s("small",null,"Expense",-1)])])):p.value?r("",!0):(a(),$("span",fd,[s("span",pd,u(e(V)?.thisMonth?.displayTime),1),B[5]||(B[5]=s("span",null,"",-1)),s("small",null,u(e(n)("Expense")),1)]))]),s("p",md,[p.value?(a(),$("span",vd,"0.00 USD")):p.value?r("",!0):(a(),$("span",gd,u(e(k)&&e(k).thisMonth?e(C)(e(k).thisMonth):"-"),1)),t(z,{class:"margin-inline-start-half",onClick:B[0]||(B[0]=H=>F.value=!e(F))},{default:l(()=>[t(N,{class:"ebk-hide-icon",f7:e(F)?"eye_slash_fill":"eye_fill"},null,8,["f7"])]),_:1})]),s("p",yd,[p.value?(a(),$("small",hd,"Monthly income 0.00 USD")):p.value?r("",!0):(a(),$("small",_d,[s("span",null,u(e(n)("Monthly income")),1),s("span",null,u(e(k)&&e(k).thisMonth?e(A)(e(k).thisMonth):"-"),1)]))])]),_:1})]),_:1},8,["class"]),t(g,{strong:"",inset:"",dividers:"",class:R(["margin-top overview-transaction-list",{"skeleton-text":p.value}])},{default:l(()=>[t(q,{link:`/transaction/list?${e(b).getTransactionListPageParams({dateType:e(Dt).Today.type})}`,"chevron-center":""},{media:l(()=>[t(N,{f7:"calendar_today"})]),title:l(()=>[s("div",kd,[p.value?(a(),$("span",bd,"Today")):p.value?r("",!0):(a(),$("span",wd,u(e(n)("Today")),1))])]),footer:l(()=>[s("div",Td,[p.value?(a(),$("span",Cd,"MM/DD/YYYY")):p.value?r("",!0):(a(),$("span",Sd,u(e(V)?.today?.displayTime),1))])]),after:l(()=>[s("div",xd,[s("div",Ad,[p.value?(a(),$("small",$d,"0.00 USD")):!p.value&&e(k).today&&e(k).today.valid?(a(),$("small",Dd,u(e(A)(e(k).today)),1)):r("",!0)]),s("div",Id,[p.value?(a(),$("small",Vd,"0.00 USD")):!p.value&&e(k).today&&e(k).today.valid?(a(),$("small",Fd,u(e(C)(e(k).today)),1)):r("",!0)])])]),_:1},8,["link"]),t(q,{link:`/transaction/list?${e(b).getTransactionListPageParams({dateType:e(Dt).ThisWeek.type})}`,"chevron-center":""},{media:l(()=>[t(N,{f7:"calendar"})]),title:l(()=>[s("div",Pd,[p.value?(a(),$("span",Ud,"This Week")):p.value?r("",!0):(a(),$("span",Bd,u(e(n)("This Week")),1))])]),footer:l(()=>[s("div",Nd,[p.value?(a(),$("span",Md,"MM/DD")):p.value?r("",!0):(a(),$("span",Ed,u(e(V)?.thisWeek?.startTime),1)),B[6]||(B[6]=s("span",null,"-",-1)),p.value?(a(),$("span",Ld,"MM/DD")):p.value?r("",!0):(a(),$("span",Rd,u(e(V)?.thisWeek?.endTime),1))])]),after:l(()=>[s("div",Od,[s("div",zd,[p.value?(a(),$("small",Yd,"0.00 USD")):!p.value&&e(k).thisWeek&&e(k).thisWeek.valid?(a(),$("small",Hd,u(e(A)(e(k).thisWeek)),1)):r("",!0)]),s("div",qd,[p.value?(a(),$("small",Wd,"0.00 USD")):!p.value&&e(k).thisWeek&&e(k).thisWeek.valid?(a(),$("small",Gd,u(e(C)(e(k).thisWeek)),1)):r("",!0)])])]),_:1},8,["link"]),t(q,{link:`/transaction/list?${e(b).getTransactionListPageParams({dateType:e(Dt).ThisMonth.type})}`,"chevron-center":""},{media:l(()=>[t(N,{f7:"calendar"})]),title:l(()=>[s("div",jd,[p.value?(a(),$("span",Kd,"This Month")):p.value?r("",!0):(a(),$("span",Zd,u(e(n)("This Month")),1))])]),footer:l(()=>[s("div",Xd,[p.value?(a(),$("span",Qd,"MM/DD")):p.value?r("",!0):(a(),$("span",Jd,u(e(V)?.thisMonth?.startTime),1)),B[7]||(B[7]=s("span",null,"-",-1)),p.value?(a(),$("span",ef,"MM/DD")):p.value?r("",!0):(a(),$("span",tf,u(e(V)?.thisMonth?.endTime),1))])]),after:l(()=>[s("div",lf,[s("div",nf,[p.value?(a(),$("small",af,"0.00 USD")):!p.value&&e(k).thisMonth&&e(k).thisMonth.valid?(a(),$("small",of,u(e(A)(e(k).thisMonth)),1)):r("",!0)]),s("div",sf,[p.value?(a(),$("small",rf,"0.00 USD")):!p.value&&e(k).thisMonth&&e(k).thisMonth.valid?(a(),$("small",uf,u(e(C)(e(k).thisMonth)),1)):r("",!0)])])]),_:1},8,["link"]),t(q,{link:`/transaction/list?${e(b).getTransactionListPageParams({dateType:e(Dt).ThisYear.type})}`,"chevron-center":""},{media:l(()=>[t(N,{f7:"square_stack_3d_up"})]),title:l(()=>[s("div",cf,[p.value?(a(),$("span",df,"This Year")):p.value?r("",!0):(a(),$("span",ff,u(e(n)("This Year")),1))])]),footer:l(()=>[s("div",pf,[p.value?(a(),$("span",mf,"YYYY")):p.value?r("",!0):(a(),$("span",vf,u(e(V)?.thisYear?.displayTime),1))])]),after:l(()=>[s("div",gf,[s("div",yf,[p.value?(a(),$("small",hf,"0.00 USD")):!p.value&&e(k).thisYear&&e(k).thisYear.valid?(a(),$("small",_f,u(e(A)(e(k).thisYear)),1)):r("",!0)]),s("div",kf,[p.value?(a(),$("small",bf,"0.00 USD")):!p.value&&e(k).thisYear&&e(k).thisYear.valid?(a(),$("small",wf,u(e(C)(e(k).thisYear)),1)):r("",!0)])])]),_:1},8,["link"])]),_:1},8,["class"]),t(J,{tabbar:"",icons:"",bottom:"",class:"main-tabbar"},{default:l(()=>[t(z,{class:"link",href:"/transaction/list"},{default:l(()=>[t(N,{f7:"square_list"}),s("span",Tf,u(e(n)("Details")),1)]),_:1}),t(z,{class:"link",href:"/account/list"},{default:l(()=>[t(N,{f7:"creditcard"}),s("span",Cf,u(e(n)("Accounts")),1)]),_:1}),t(z,{id:"homepage-add-button",class:"link",href:"/transaction/add",onTaphold:D},{default:l(()=>[t(N,{f7:"plus_square",class:"ebk-tarbar-big-icon"})]),_:1}),t(z,{class:"link",href:"/statistic/transaction"},{default:l(()=>[t(N,{f7:"chart_pie"}),s("span",Sf,u(e(n)("Statistics")),1)]),_:1}),t(z,{class:"link",href:"/settings"},{default:l(()=>[t(N,{f7:"gear_alt"}),s("span",xf,u(e(n)("Settings")),1)]),_:1})]),_:1}),t(te,{class:"template-popover-menu","target-el":"#homepage-add-button",opened:d.value,"onUpdate:opened":B[2]||(B[2]=H=>d.value=H)},{default:l(()=>[E.value?(a(),i(g,{key:0,dividers:""},{default:l(()=>[e(oa)()?(a(),i(q,{key:"AIImageRecognition",title:e(n)("AI Image Recognition"),onClick:B[1]||(B[1]=H=>{x.value=!0,d.value=!1})},{media:l(()=>[t(N,{f7:"wand_stars"})]),_:1},8,["title"])):r("",!0),(a(!0),$(ke,null,Te(E.value,H=>(a(),i(q,{key:H.id,title:H.name,link:"/transaction/add?templateId="+H.id},{media:l(()=>[t(N,{f7:"doc_plaintext"})]),_:1},8,["title","link"]))),128))]),_:1})):r("",!0)]),_:1},8,["opened"]),t(Z,{show:x.value,"onUpdate:show":B[3]||(B[3]=H=>x.value=H),"onRecognition:change":w},null,8,["show"])]),_:1})}}}),$f=["src"],Df={class:"login-page-powered-by margin-top-half"},If={class:"login-page-powered-by margin-top-half"},Vf={class:"display-flex padding justify-content-space-between align-items-center"},Ff={class:"ebk-sheet-title"},Pf={class:"padding-horizontal padding-bottom"},Uf={class:"margin-top text-align-center"},Bf={class:"display-flex padding justify-content-space-between align-items-center"},Nf={class:"ebk-sheet-title"},Mf={class:"padding-horizontal padding-bottom"},Ef={class:"no-margin"},Lf={class:"margin-top text-align-center"},Rf=Re({__name:"LoginPage",props:{f7router:{}},setup(f){const _=f,{tt:n}=ze(),{showAlert:h,showConfirm:F,showToast:V,openExternalUrl:k}=nt(),A=El(),{version:C,username:P,password:m,passcode:c,backupCode:b,tempToken:p,twoFAVerifyType:d,oauth2ClientSessionId:x,loggingInByPassword:E,loggingInByOAuth2:D,verifying:T,inputIsEmpty:M,twoFAInputIsEmpty:w,oauth2LoginUrl:U,oauth2LoginDisplayName:I,tips:B,doAfterLogin:L}=as("mobile"),v=S(""),N=S(""),z=S(!1),K=S(""),W=S(!1),q=S(!1),g=S(!1),J=S(!1),te=S(!1),Z=re(()=>d.value==="backupcode"?"Use Passcode":"Use Backup Code");function Y(){F("Are you sure you want to switch to desktop version?",()=>{window.location.replace(Ca())})}function H(){const $e=_.f7router;if(!P.value){h("Username cannot be blank");return}if(!m.value){h("Password cannot be blank");return}if(p.value){g.value=!0;return}E.value=!0,N.value="",z.value=!1,K.value="",je(()=>E.value),A.authorize({loginName:P.value,password:m.value}).then(se=>{if(E.value=!1,Se(),se.need2FA){p.value=se.token,g.value=!0;return}L(se),$e.refreshPage()}).catch(se=>{if(E.value=!1,Se(),Hn()&&se.error&&se.error.errorCode===wn.UserEmailNotVerified&&se.error.context&&se.error.context.email){N.value=se.error.context.email,z.value=se.error.context.hasValidEmailVerifyToken||!1,K.value="",te.value=!0;return}se.processed||V(se.message||se)})}function fe(){if(!Qn())return H()}function ee(){D.value=!0,je()}function j(){const $e=_.f7router;if(!(w.value||T.value)){if(d.value==="passcode"&&!c.value){h("Passcode cannot be blank");return}else if(d.value==="backupcode"&&!b.value){h("Backup code cannot be blank");return}T.value=!0,je(()=>T.value),A.authorize2FA({token:p.value,passcode:d.value==="passcode"?c.value:null,recoveryCode:d.value==="backupcode"?b.value:null}).then(se=>{T.value=!1,Se(),L(se),g.value=!1,$e.refreshPage()}).catch(se=>{T.value=!1,Se(),se.processed||V(se.message||se)})}}function O(){if(!v.value){h("Email address cannot be blank");return}W.value=!0,je(()=>W.value),A.requestResetPassword({email:v.value}).then(()=>{W.value=!1,Se(),V("Password reset email has been sent"),J.value=!1}).catch($e=>{W.value=!1,Se(),$e.processed||V($e.message||$e)})}function le(){if(!K.value){V("Current password cannot be blank");return}q.value=!0,je(()=>q.value),A.resendVerifyEmailByUnloginUser({email:N.value,password:K.value}).then(()=>{q.value=!1,Se(),V("Validation email has been sent"),te.value=!1}).catch($e=>{q.value=!1,Se(),$e.processed||V($e.message||$e)})}function ge(){d.value==="passcode"?d.value="backupcode":d.value="passcode"}return x.value=sn(),($e,se)=>{const Ze=o("f7-block"),Me=o("f7-login-screen-title"),Ue=o("f7-block-footer"),qe=o("f7-list"),he=o("f7-list-input"),X=o("f7-link"),Ce=o("f7-list-item"),pe=o("f7-list-button"),we=o("language-select-button"),be=o("f7-toolbar"),Be=o("f7-button"),ce=o("f7-page-content"),ae=o("f7-sheet"),oe=o("password-input-sheet"),Pe=o("f7-page");return a(),i(Pe,{"no-navbar":"","no-swipeback":"","login-screen":"","hide-toolbar-on-scroll":""},{default:l(()=>[t(Me,null,{default:l(()=>[s("img",{alt:"logo",class:"login-page-logo",src:e(Xn)},null,8,$f),t(Ze,{class:"login-page-tile margin-vertical-half"},{default:l(()=>[ne(u(e(n)("global.app.title")),1)]),_:1})]),_:1}),e(B)?(a(),i(qe,{key:0,inset:""},{default:l(()=>[t(Ue,null,{default:l(()=>[ne(u(e(B)),1)]),_:1})]),_:1})):r("",!0),e(yn)()?(a(),i(qe,{key:1,form:"",dividers:"",class:"margin-bottom-half"},{default:l(()=>[t(he,{type:"text",autocomplete:"username","clear-button":"",disabled:e(E)||e(D),label:e(n)("Username"),placeholder:e(n)("Your username or email"),value:e(P),"onUpdate:value":se[0]||(se[0]=ve=>St(P)?P.value=ve:null),onInput:se[1]||(se[1]=ve=>p.value="")},null,8,["disabled","label","placeholder","value"]),t(he,{type:"password",autocomplete:"current-password","clear-button":"",disabled:e(E)||e(D),label:e(n)("Password"),placeholder:e(n)("Your password"),value:e(m),"onUpdate:value":se[2]||(se[2]=ve=>St(m)?m.value=ve:null),onInput:se[3]||(se[3]=ve=>p.value=""),onKeyup:hl(fe,["enter"])},null,8,["disabled","label","placeholder","value"])]),_:1})):r("",!0),t(qe,{class:"no-margin-vertical"},{default:l(()=>[t(Ce,null,{title:l(()=>[s("small",null,[t(X,{class:R({disabled:e(E)||e(D)}),onClick:Y},{default:l(()=>[ne(u(e(n)("Switch to Desktop Version")),1)]),_:1},8,["class"])])]),after:l(()=>[s("small",null,[t(X,{class:R({disabled:!e(os)()||e(E)||e(D)}),onClick:se[4]||(se[4]=ve=>{v.value="",J.value=!0})},{default:l(()=>[ne(u(e(n)("Forget Password?")),1)]),_:1},8,["class"])])]),_:1})]),_:1}),t(qe,{class:"margin-vertical-half"},{default:l(()=>[e(yn)()?(a(),i(pe,{key:0,class:R({disabled:e(M)||e(E)||e(D)}),text:e(n)("Log In"),onClick:H},null,8,["class","text"])):r("",!0),e(yn)()&&e(sa)()?(a(),i(Ce,{key:1,class:"login-divider display-flex align-items-center"},{default:l(()=>[se[15]||(se[15]=s("hr",{class:"margin-inline-end-half"},null,-1)),s("small",null,u(e(n)("or")),1),se[16]||(se[16]=s("hr",{class:"margin-inline-start-half"},null,-1))]),_:1})):r("",!0),e(sa)()?(a(),i(pe,{key:2,external:"",class:R({disabled:e(E)||e(D)}),href:e(U),text:e(I),onClick:ee},null,8,["class","href","text"])):r("",!0),e(yn)()?(a(),i(Ue,{key:3},{default:l(()=>[s("span",null,u(e(n)("Don't have an account?")),1),se[17]||(se[17]=ne(" ",-1)),t(X,{class:R({disabled:!e(ss)()||e(E)||e(D)}),href:"/signup",text:e(n)("Create an account")},null,8,["class","text"])]),_:1})):r("",!0),t(Ue,{class:"padding-bottom"})]),_:1}),t(qe,{class:"login-page-bottom"},{default:l(()=>[t(Ue,null,{default:l(()=>[t(we,{disabled:e(E)||e(D)},null,8,["disabled"]),s("div",Df,[se[19]||(se[19]=s("span",null,"Powered by",-1)),t(X,{onClick:se[5]||(se[5]=ve=>e(k)("https://github.com/mayswind/ezbookkeeping")),target:"_blank"},{default:l(()=>[...se[18]||(se[18]=[ne("ezBookkeeping",-1)])]),_:1}),s("span",null,u(e(C)),1)])]),_:1})]),_:1}),t(be,{class:"login-page-fixed-bottom",tabbar:"",bottom:"",outline:!1},{default:l(()=>[t(we,{disabled:e(E)||e(D)},null,8,["disabled"]),s("div",If,[se[21]||(se[21]=s("span",null,"Powered by",-1)),t(X,{onClick:se[6]||(se[6]=ve=>e(k)("https://github.com/mayswind/ezbookkeeping")),target:"_blank"},{default:l(()=>[...se[20]||(se[20]=[ne("ezBookkeeping",-1)])]),_:1}),s("span",null,u(e(C)),1)])]),_:1}),t(ae,{style:{height:"auto"},opened:g.value,"onSheet:closed":se[9]||(se[9]=ve=>g.value=!1)},{default:l(()=>[t(ce,null,{default:l(()=>[s("div",Vf,[s("div",Ff,[s("b",null,u(e(n)("Two-Factor Authentication")),1)])]),s("div",Pf,[t(qe,{strong:"",class:"no-margin"},{default:l(()=>[e(d)==="passcode"?(a(),i(he,{key:0,type:"number",autocomplete:"one-time-code",outline:"","floating-label":"","clear-button":"",class:"no-margin no-padding-bottom",label:e(n)("Passcode"),placeholder:e(n)("Passcode"),value:e(c),"onUpdate:value":se[7]||(se[7]=ve=>St(c)?c.value=ve:null),onKeyup:hl(j,["enter"])},null,8,["label","placeholder","value"])):r("",!0),e(d)==="backupcode"?(a(),i(he,{key:1,outline:"","floating-label":"","clear-button":"",class:"no-margin no-padding-bottom",label:e(n)("Backup Code"),placeholder:e(n)("Backup Code"),value:e(b),"onUpdate:value":se[8]||(se[8]=ve=>St(b)?b.value=ve:null),onKeyup:hl(j,["enter"])},null,8,["label","placeholder","value"])):r("",!0)]),_:1}),t(Be,{large:"",fill:"",class:R({disabled:e(w)||e(T)}),text:e(n)("Verify"),onClick:j},null,8,["class","text"]),s("div",Uf,[t(X,{onClick:ge,text:e(n)(Z.value)},null,8,["text"])])])]),_:1})]),_:1},8,["opened"]),t(ae,{"swipe-to-close":"","swipe-handler":".swipe-handler",style:{height:"auto"},opened:J.value,"onSheet:closed":se[12]||(se[12]=ve=>J.value=!1)},{default:l(()=>[se[22]||(se[22]=s("div",{class:"swipe-handler",style:{"z-index":"10"}},null,-1)),t(ce,null,{default:l(()=>[s("div",Bf,[s("div",Nf,[s("b",null,u(e(n)("Forget Password?")),1)])]),s("div",Mf,[s("p",Ef,[s("span",null,u(e(n)("Please enter your email address used for registration and we'll send you an email with a reset password link")),1)]),t(qe,{strong:"",class:"no-margin"},{default:l(()=>[t(he,{type:"email",autocomplete:"email",outline:"","floating-label":"","clear-button":"",class:"no-margin no-padding-bottom",label:e(n)("E-mail"),placeholder:e(n)("Your email address"),value:v.value,"onUpdate:value":se[10]||(se[10]=ve=>v.value=ve),onKeyup:hl(O,["enter"])},null,8,["label","placeholder","value"])]),_:1}),t(Be,{large:"",fill:"",class:R({disabled:!v.value||W.value}),text:e(n)("Send Reset Link"),onClick:O},null,8,["class","text"]),s("div",Lf,[t(X,{class:R({disabled:W.value}),onClick:se[11]||(se[11]=ve=>J.value=!1),text:e(n)("Cancel")},null,8,["class","text"])])])]),_:1})]),_:1},8,["opened"]),t(oe,{title:e(n)("Verify your email"),hint:e(n)(z.value?"format.misc.accountActivationAndResendValidationEmailTip":"format.misc.resendValidationEmailTip",{email:N.value}),"confirm-disabled":q.value,"cancel-disabled":q.value,show:te.value,"onUpdate:show":se[13]||(se[13]=ve=>te.value=ve),modelValue:K.value,"onUpdate:modelValue":se[14]||(se[14]=ve=>K.value=ve),"onPassword:confirm":le},null,8,["title","hint","confirm-disabled","cancel-disabled","show","modelValue"])]),_:1})}}}),Of={class:"smaller"},zf=Re({__name:"SignupPage",props:{f7router:{}},setup(f){const _=f,{tt:n,getAllLanguageOptions:h,getAllCurrencies:F,getAllWeekDays:V,getAllTransactionDefaultCategories:k,getCurrencyName:A}=ze(),{showAlert:C,showToast:P}=nt(),{user:m,submitting:c,languageTitle:b,currentLocale:p,currentLanguageName:d,inputEmptyProblemMessage:x,inputInvalidProblemMessage:E,inputIsEmpty:D,inputIsInvalid:T,getCategoryTypeName:M,doAfterSignupSuccess:w}=is(),U=El(),I=S(!1),B=S(!1),L=S(!1),v=S(!1),N=S(!1),z=S(!1),K=S(!1),W=re(()=>h(!1)),q=re(()=>F()),g=re(()=>V()),J=re(()=>k(0,p.value)),te=re(()=>kt(g.value,m.value.firstDayOfWeek));function Z(){const Y=_.f7router,H=x.value||E.value;if(H){C(H);return}c.value=!0,je(()=>c.value);let fe=[];I.value&&(fe=Sa(J.value)),U.register({user:m.value,presetCategories:fe}).then(ee=>{if(!Nl()){c.value=!1,Se(),I.value&&!ee.presetCategoriesSaved?P("You have been successfully registered, but there was an failure when adding preset categories. You can re-add preset categories in settings page anytime.",5e3):ee.needVerifyEmail?P("You have been successfully registered. An account activation link has been sent to your email address, please activate your account first.",5e3):P("You have been successfully registered"),Y.navigate("/");return}w(ee),c.value=!1,Se(),I.value&&!ee.presetCategoriesSaved?P("You have been successfully registered, but there was an failure when adding preset categories. You can re-add preset categories in settings page anytime."):P("You have been successfully registered"),Y.navigate("/")}).catch(ee=>{c.value=!1,Se(),ee.processed||P(ee.message||ee)})}return(Y,H)=>{const fe=o("f7-nav-left"),ee=o("f7-nav-title"),j=o("f7-link"),O=o("f7-nav-right"),le=o("f7-navbar"),ge=o("f7-list-input"),$e=o("f7-list-item"),se=o("f7-list"),Ze=o("list-item-selection-popup"),Me=o("f7-block"),Ue=o("f7-toggle"),qe=o("f7-block-title"),he=o("ItemIcon"),X=o("f7-accordion-content"),Ce=o("f7-page"),pe=o("f7-actions-button"),we=o("f7-actions-group"),be=o("f7-actions"),Be=o("list-item-selection-sheet"),ce=o("f7-popup");return a(),i(Ce,null,{default:l(()=>[t(le,null,{default:l(()=>[t(fe,{"back-link":e(n)("Back")},null,8,["back-link"]),t(ee,{title:e(n)("Sign Up")},null,8,["title"]),t(O,null,{default:l(()=>[t(j,{class:R({disabled:e(D)||e(c)}),text:e(n)("Submit"),onClick:Z},null,8,["class","text"])]),_:1})]),_:1}),t(se,{form:"",strong:"",inset:"",dividers:"",class:"margin-vertical"},{default:l(()=>[t(ge,{type:"text",autocomplete:"username","clear-button":"",label:e(n)("Username"),placeholder:e(n)("Your username"),value:e(m).username,"onUpdate:value":H[0]||(H[0]=ae=>e(m).username=ae)},null,8,["label","placeholder","value"]),t(ge,{type:"password",autocomplete:"new-password","clear-button":"",label:e(n)("Password"),placeholder:e(n)("Your password, at least 6 characters"),value:e(m).password,"onUpdate:value":H[1]||(H[1]=ae=>e(m).password=ae)},null,8,["label","placeholder","value"]),t(ge,{type:"password",autocomplete:"new-password","clear-button":"",label:e(n)("Confirm Password"),placeholder:e(n)("Re-enter the password"),value:e(m).confirmPassword,"onUpdate:value":H[2]||(H[2]=ae=>e(m).confirmPassword=ae)},null,8,["label","placeholder","value"]),t(ge,{type:"email",autocomplete:"email","clear-button":"",label:e(n)("E-mail"),placeholder:e(n)("Your email address"),value:e(m).email,"onUpdate:value":H[3]||(H[3]=ae=>e(m).email=ae)},null,8,["label","placeholder","value"]),t(ge,{type:"text",autocomplete:"nickname","clear-button":"",label:e(n)("Nickname"),placeholder:e(n)("Your nickname"),value:e(m).nickname,"onUpdate:value":H[4]||(H[4]=ae=>e(m).nickname=ae)},null,8,["label","placeholder","value"]),e(T)?(a(),i($e,{key:0,class:"ebk-list-item-error-info",footer:e(n)(e(E))},null,8,["footer"])):r("",!0)]),_:1}),t(se,{strong:"",inset:"",dividers:"",class:"margin-vertical"},{default:l(()=>[t($e,{class:"list-item-with-header-and-title list-item-no-item-after",link:"#",header:e(b),title:e(d),onClick:H[7]||(H[7]=ae=>B.value=!0)},{default:l(()=>[t(Ze,{"value-type":"item","key-field":"languageTag","value-field":"languageTag","title-field":"nativeDisplayName","after-field":"displayName",title:e(b),"enable-filter":!0,"filter-placeholder":e(n)("Language"),"filter-no-items-text":e(n)("No results"),items:W.value,show:B.value,"onUpdate:show":H[5]||(H[5]=ae=>B.value=ae),modelValue:e(p),"onUpdate:modelValue":H[6]||(H[6]=ae=>St(p)?p.value=ae:null)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["header","title"]),t($e,{class:"list-item-with-header-and-title list-item-no-item-after",link:"#",header:e(n)("Default Currency"),onClick:H[10]||(H[10]=ae=>L.value=!0)},{title:l(()=>[t(Me,{class:"no-padding no-margin"},{default:l(()=>[s("span",null,u(e(A)(e(m).defaultCurrency))+"",1),s("small",Of,u(e(m).defaultCurrency),1)]),_:1})]),default:l(()=>[t(Ze,{"value-type":"item","key-field":"currencyCode","value-field":"currencyCode","title-field":"displayName","after-field":"currencyCode",title:e(n)("Default Currency"),"enable-filter":!0,"filter-placeholder":e(n)("Currency"),"filter-no-items-text":e(n)("No results"),items:q.value,show:L.value,"onUpdate:show":H[8]||(H[8]=ae=>L.value=ae),modelValue:e(m).defaultCurrency,"onUpdate:modelValue":H[9]||(H[9]=ae=>e(m).defaultCurrency=ae)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["header"]),t($e,{link:"#",class:"list-item-with-header-and-title list-item-no-item-after",header:e(n)("First Day of Week"),title:te.value,onClick:H[13]||(H[13]=ae=>v.value=!0)},{default:l(()=>[t(Ze,{"value-type":"item","key-field":"type","value-field":"type","title-field":"displayName",title:e(n)("First Day of Week"),"enable-filter":!0,"filter-placeholder":e(n)("Date"),"filter-no-items-text":e(n)("No results"),items:g.value,show:v.value,"onUpdate:show":H[11]||(H[11]=ae=>v.value=ae),modelValue:e(m).firstDayOfWeek,"onUpdate:modelValue":H[12]||(H[12]=ae=>e(m).firstDayOfWeek=ae)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["header","title"])]),_:1}),t(se,{strong:"",inset:"",dividers:"",class:"margin-vertical"},{default:l(()=>[t($e,{title:e(n)("Use preset transaction categories"),link:"#",onClick:H[15]||(H[15]=ae=>N.value=!0)},{default:l(()=>[t(Ue,{checked:I.value,"onToggle:change":H[14]||(H[14]=ae=>I.value=ae)},null,8,["checked"])]),_:1},8,["title"])]),_:1}),t(ce,{push:"","close-on-escape":!1,opened:N.value,"onPopup:closed":H[23]||(H[23]=ae=>N.value=!1)},{default:l(()=>[t(Ce,null,{default:l(()=>[t(le,null,{default:l(()=>[t(fe,null,{default:l(()=>[t(j,{"popup-close":"",text:e(n)("Back")},null,8,["text"])]),_:1}),t(ee,{title:e(n)("Preset Categories")},null,8,["title"]),t(O,null,{default:l(()=>[t(j,{"icon-f7":"ellipsis",onClick:H[16]||(H[16]=ae=>z.value=!0)}),I.value?r("",!0):(a(),i(j,{key:0,close:"",onClick:H[17]||(H[17]=ae=>{I.value=!0,N.value=!1})},{default:l(()=>[ne(u(e(n)("Enable")),1)]),_:1})),I.value?(a(),i(j,{key:1,close:"",onClick:H[18]||(H[18]=ae=>{I.value=!1,N.value=!1})},{default:l(()=>[ne(u(e(n)("Disable")),1)]),_:1})):r("",!0)]),_:1})]),_:1}),(a(!0),$(ke,null,Te(J.value,(ae,oe)=>(a(),i(Me,{class:"no-padding no-margin",key:oe},{default:l(()=>[t(qe,{class:"margin-top margin-horizontal"},{default:l(()=>[ne(u(e(M)(oe)),1)]),_:2},1024),N.value?(a(),i(se,{key:0,strong:"",inset:"",dividers:""},{default:l(()=>[(a(!0),$(ke,null,Te(ae,(Pe,ve)=>(a(),i($e,{title:Pe.name,"accordion-item":!!Pe.subCategories.length,key:ve},{media:l(()=>[t(he,{"icon-type":"category","icon-id":Pe.icon,color:Pe.color},null,8,["icon-id","color"])]),default:l(()=>[Pe.subCategories.length?(a(),i(X,{key:0,class:"padding-inline-start-half"},{default:l(()=>[t(se,null,{default:l(()=>[(a(!0),$(ke,null,Te(Pe.subCategories,(Je,ft)=>(a(),i($e,{title:Je.name,key:ft},{media:l(()=>[t(he,{"icon-type":"category","icon-id":Je.icon,color:Je.color},null,8,["icon-id","color"])]),_:2},1032,["title"]))),128))]),_:2},1024)]),_:2},1024)):r("",!0)]),_:2},1032,["title","accordion-item"]))),128))]),_:2},1024)):r("",!0)]),_:2},1024))),128))]),_:1}),t(be,{"close-by-outside-click":"","close-on-escape":"",opened:z.value,"onActions:closed":H[20]||(H[20]=ae=>z.value=!1)},{default:l(()=>[t(we,null,{default:l(()=>[t(pe,{onClick:H[19]||(H[19]=ae=>K.value=!0)},{default:l(()=>[ne(u(e(n)("Change Language")),1)]),_:1})]),_:1}),t(we,null,{default:l(()=>[t(pe,{bold:"",close:""},{default:l(()=>[ne(u(e(n)("Cancel")),1)]),_:1})]),_:1})]),_:1},8,["opened"]),t(Be,{"value-type":"item","key-field":"languageTag","value-field":"languageTag","title-field":"nativeDisplayName","after-field":"displayName",items:W.value,show:K.value,"onUpdate:show":H[21]||(H[21]=ae=>K.value=ae),modelValue:e(p),"onUpdate:modelValue":H[22]||(H[22]=ae=>St(p)?p.value=ae:null)},null,8,["items","show","modelValue"])]),_:1},8,["opened"])]),_:1})}}}),Yf=["src"],Hf={class:"display-flex justify-content-center full-line"},qf={class:"login-page-powered-by margin-top-half"},Wf={class:"login-page-powered-by margin-top-half"},Gf=Re({__name:"UnlockPage",props:{f7router:{}},setup(f){const _=f,{tt:n}=ze(),{showToast:h,showConfirm:F,openExternalUrl:V}=nt(),{version:k,pinCode:A,isWebAuthnAvailable:C,isPinCodeValid:P,doAfterUnlocked:m,doRelogin:c}=rs(),b=Ll(),p=el();function d(){const D=_.f7router,T=us();if(!p.currentUserBasicInfo||!T){h("An error occurred");return}if(!b.appSettings.applicationLockWebAuthn||!cs()){h("WebAuthn is not enabled");return}if(!ds()){h("WebAuth is not supported on this device");return}je(),fs(p.currentUserBasicInfo,T).then(({id:M,userName:w,userSecret:U})=>{Se(),ps(M,w,U),m(),D.refreshPage()}).catch(M=>{Se(),_l.error("failed to use webauthn to verify",M),M.notSupported?h("WebAuth is not supported on this device"):M.name==="NotAllowedError"?h("User has canceled authentication"):M.invalid?h("Failed to authenticate with WebAuthn"):h("User has canceled or this device does not support WebAuthn")})}function x(D){if(!P(D)||Qn())return;const T=_.f7router,M=p.currentUserBasicInfo;if(!M||!M.username){h("An error occurred");return}try{ms(M.username,D),m(),T.refreshPage()}catch(w){_l.error("failed to unlock with pin code",w),h("Incorrect PIN code")}}function E(){const D=_.f7router;F("Are you sure you want to re-login?",()=>{c(),D.navigate("/login",{clearPreviousHistory:!0})})}return(D,T)=>{const M=o("f7-block"),w=o("f7-login-screen-title"),U=o("f7-list-item"),I=o("pin-code-input"),B=o("f7-list"),L=o("f7-list-button"),v=o("f7-link"),N=o("f7-block-footer"),z=o("language-select-button"),K=o("f7-toolbar"),W=o("f7-page");return a(),i(W,{"no-navbar":"","no-swipeback":"","login-screen":"","hide-toolbar-on-scroll":""},{default:l(()=>[t(w,null,{default:l(()=>[s("img",{alt:"logo",class:"login-page-logo",src:e(Xn)},null,8,Yf),t(M,{class:"login-page-tile margin-vertical-half"},{default:l(()=>[ne(u(e(n)("global.app.title")),1)]),_:1})]),_:1}),t(B,{form:""},{default:l(()=>[t(U,{class:"no-padding no-margin"},{inner:l(()=>[s("div",Hf,u(e(n)("Unlock Application")),1)]),_:1}),t(U,{class:"list-item-pincode-input padding-horizontal margin-horizontal"},{default:l(()=>[t(I,{secure:!0,length:6,"auto-confirm":!0,modelValue:e(A),"onUpdate:modelValue":T[0]||(T[0]=q=>St(A)?A.value=q:null),"onPincode:confirm":x},null,8,["modelValue"])]),_:1})]),_:1}),t(B,null,{default:l(()=>[t(L,{class:R({disabled:!e(P)(e(A))}),text:e(n)("Unlock with PIN Code"),onClick:x},null,8,["class","text"]),e(C)?(a(),i(L,{key:0,text:e(n)("Unlock with WebAuthn"),onClick:d},null,8,["text"])):r("",!0),t(N,null,{default:l(()=>[t(v,{text:e(n)("Re-login"),onClick:E},null,8,["text"])]),_:1}),t(N,{class:"padding-bottom"})]),_:1}),t(B,{class:"login-page-bottom"},{default:l(()=>[t(N,null,{default:l(()=>[t(z),s("div",qf,[T[4]||(T[4]=s("span",null,"Powered by",-1)),t(v,{onClick:T[1]||(T[1]=q=>e(V)("https://github.com/mayswind/ezbookkeeping")),target:"_blank"},{default:l(()=>[...T[3]||(T[3]=[ne("ezBookkeeping",-1)])]),_:1}),s("span",null,u(e(k)),1)])]),_:1})]),_:1}),t(K,{class:"login-page-fixed-bottom",tabbar:"",bottom:"",outline:!1},{default:l(()=>[t(z),s("div",Wf,[T[6]||(T[6]=s("span",null,"Powered by",-1)),t(v,{onClick:T[2]||(T[2]=q=>e(V)("https://github.com/mayswind/ezbookkeeping")),target:"_blank"},{default:l(()=>[...T[5]||(T[5]=[ne("ezBookkeeping",-1)])]),_:1}),s("span",null,u(e(k)),1)])]),_:1})]),_:1})}}}),jf={style:{color:"var(--f7-text-color)"}},Kf={key:1,class:"skeleton-text"},Zf={key:0,class:"transaction-amount-statistics"},Xf={class:"display-flex no-padding-horizontal"},Qf={class:"item-media"},Jf={class:"transaction-icon display-flex align-items-center"},ep={key:0,class:"transaction-amount-statistics"},tp={class:"text-income"},lp={class:"text-expense"},np={class:"transaction-day full-line flex-direction-column"},ap={key:0,class:"transaction-day-of-week full-line flex-direction-column"},op={class:"display-flex no-padding-horizontal"},sp={class:"item-media"},ip={class:"transaction-icon display-flex align-items-center"},rp={class:"actual-item-inner"},up={class:"item-title-row"},cp={class:"item-title"},dp={class:"transaction-category-name no-padding"},fp={key:0},pp={key:1},mp={key:2},vp={class:"item-after"},gp={class:"item-text"},yp={key:0,class:"transaction-description"},hp={class:"item-footer"},_p={key:0,class:"transaction-tags"},kp={class:"transaction-footer"},bp={key:0},wp={key:1},Tp={key:2},Cp={key:4},Sp={key:0},xp={key:0,class:"margin-inline-end-half"},Ap=Re({__name:"ListPage",props:{f7route:{},f7router:{}},setup(f){const _=f,{tt:n,getCurrentLanguageTextDirection:h,getAllTransactionTagFilterTypes:F,getWeekdayShortName:V,getCalendarDisplayDayOfMonthFromUnixTime:k}=ze(),{showAlert:A,showToast:C,routeBackOnError:P}=nt(),{pageType:m,loading:c,customMinDatetime:b,customMaxDatetime:p,currentCalendarDate:d,currentTimezoneOffsetMinutes:x,firstDayOfWeek:E,fiscalYearStart:D,defaultCurrency:T,showTotalAmountInTransactionListPage:M,showTagInTransactionListPage:w,allDateRanges:U,allAccounts:I,allAccountsMap:B,allAvailableAccountsCount:L,allCategories:v,allPrimaryCategories:N,allAvailableCategoriesCount:z,allTransactionTags:K,allAvailableTagsCount:W,displayPageTypeName:q,query:g,queryDateRangeName:J,queryMinTime:te,queryMaxTime:Z,queryMonthlyData:Y,queryMonth:H,queryAllFilterCategoryIds:fe,queryAllFilterAccountIds:ee,queryAllFilterTagIds:j,queryAllFilterCategoryIdsCount:O,queryAllFilterAccountIdsCount:le,queryAllFilterTagIdsCount:ge,queryAccountName:$e,queryCategoryName:se,queryAmount:Ze,transactionCalendarMinDate:Me,transactionCalendarMaxDate:Ue,currentMonthTransactionData:qe,canAddTransaction:he,getDisplayTime:X,getDisplayLongYearMonth:Ce,getDisplayTimezone:pe,getDisplayAmount:we,getDisplayMonthTotalAmount:be,getTransactionTypeName:Be}=vs(),ce=kl(),ae=ol(),oe=sl(),Pe=on(),ve=Ml(),Je=S(null),ft=S(!1),xt=S(null),mt=S({}),Vt=S({}),At=S(!1),Pt=S(!1),gt=S(!1),$t=S(!1),Ct=S(!1),It=S(!1),it=S(!1),Le=S(!1),xe=re(()=>h()),lt=re(()=>ce.framework7DarkMode||!1),ie=re(()=>F()),He=re(()=>{if(c.value)return[];if(m.value===Ut.List.type)return ve.transactions;if(m.value===Ut.Calendar.type)if(Y.value){const G=qe.value;if(!G||!G.items)return[];const y=[];for(const ye of G.items)ye.gregorianCalendarYearDashMonthDashDay===d.value&&y.push(ye);return[{year:qe.value.year,month:qe.value.month,yearDashMonth:qe.value.yearDashMonth,opened:!0,items:y,totalAmount:{income:0,expense:0,incompleteIncome:!1,incompleteExpense:!1},dailyTotalAmounts:{}}]}else return[];else return[]}),De=re(()=>m.value===Ut.List.type?ve.noTransaction:m.value===Ut.Calendar.type?!He.value||!He.value.length||!He.value[0].items||!He.value[0].items.length:!0),Oe=re(()=>ve.hasMoreTransaction);function at(G){return"transaction_month_title_"+G}function pt(G){return"transaction_month_list_"+G}function Ae(G){return"transaction_"+G.id}function Ie(G){return Vt.value[G.yearDashMonth]?!!(!G.opened||mt.value[G.yearDashMonth]):!1}function Qe(G){return Ie(G)?Vt.value[G.yearDashMonth]+"px":"auto"}function Ke(G){return Gl(()=>{if(G&&(mt.value={},Vt.value={}),He.value&&He.value.length){const y=qr(".transaction-month-list");for(let Ve=0;Ve<He.value.length-1;Ve++){const et=He.value[Ve].yearDashMonth,rl=pt(et),Xt=y[rl];!Vt.value[et]&&Zt(Xt)&&(Vt.value[et]=Xt)}}})}function Q(){if(!(!He.value||!He.value.length))for(let G=0;G<He.value.length-1;G++){const Ve=He.value[G].yearDashMonth,ye=at(Ve),et=Wr(`#${ye}`);if(!et)continue;const rl=Vt.value[Ve]||0,Xt=et.top+et.height,Ql=Xt+rl;Xt>2*window.innerHeight||Ql<-2*window.innerHeight?mt.value[Ve]=!0:delete mt.value[Ve]}}function Lt(G,y){return!y||G.gregorianCalendarDayOfMonth!==y.gregorianCalendarDayOfMonth?{}:{color:"transparent"}}function Kt(G,y){if(y&&y[G.id])return{"list-item-checked":!0};if(G.subCategories){for(const Ve of G.subCategories)if(y&&y[Ve.id])return{"list-item-checked":!0}}return{}}function Et(){const G=_.f7route.query;let y=nn(G.dateType?parseInt(G.dateType):void 0,E.value,D.value);!y&&G.dateType&&G.maxTime&&G.minTime&&(Dt.isBillingCycle(parseInt(G.dateType))||G.dateType===Dt.Custom.type.toString())&&parseInt(G.maxTime)>0&&parseInt(G.minTime)>0&&(y={dateType:parseInt(G.dateType),maxTime:parseInt(G.maxTime),minTime:parseInt(G.minTime)}),ve.initTransactionListFilter({dateType:y?y.dateType:void 0,maxTime:y?y.maxTime:void 0,minTime:y?y.minTime:void 0,type:G.type&&parseInt(G.type)>0?parseInt(G.type):void 0,categoryIds:G.categoryIds,accountIds:G.accountIds,tagIds:G.tagIds,tagFilterType:G.tagFilterType&&parseInt(G.tagFilterType)>=0?parseInt(G.tagFilterType):void 0,keyword:G.keyword}),rt()}function rt(G){const y=!!G;G||(c.value=!0),mt.value={},Vt.value={},Promise.all([ae.loadAllAccounts({force:!1}),oe.loadAllCategories({force:!1}),Pe.loadAllTags({force:!1})]).then(()=>{if(Y.value){const Ve=xa(g.value.minTime),ye=Ve.getGregorianCalendarYear(),et=Ve.getGregorianCalendarMonth();return ve.loadMonthlyAllTransactions({year:ye,month:et,autoExpand:!0,defaultCurrency:T.value})}else return ve.loadTransactions({reload:!0,autoExpand:!0,defaultCurrency:T.value})}).then(()=>{G?.(),y&&C("Data has been updated"),c.value=!1,Ke(!0)}).catch(Ve=>{(Ve.processed||G)&&(c.value=!1),G?.(),Ve.processed||(G||(Je.value=Ve),C(Ve.message||Ve))})}function Wt(G){Oe.value&&(ft.value||c.value||(ft.value=!0,ve.loadTransactions({reload:!1,autoExpand:G,defaultCurrency:T.value}).then(()=>{ft.value=!1,Ke(!1)}).catch(y=>{ft.value=!1,y.processed||C(y.message||y)})))}function Ft(G){if(m.value=G,d.value=vl(g.value.minTime,d.value),m.value===Ut.Calendar.type){const y=hn(g.value.minTime,g.value.maxTime,E.value,D.value);y&&ve.updateTransactionListFilter({dateType:y.dateType,maxTime:y.maxTime,minTime:y.minTime})&&(d.value=vl(g.value.minTime,d.value),rt())}}function ht(G){if(G===Dt.Custom.type){!g.value.minTime||!g.value.maxTime?(p.value=Sl(xl(),x.value,cl()),b.value=gs(p.value)):(p.value=g.value.maxTime,b.value=g.value.minTime),m.value===Ut.Calendar.type?it.value=!0:It.value=!0,Pt.value=!1;return}else if(g.value.dateType===G)return;let y=null;if(Dt.isBillingCycle(G)?y=Aa(G,E.value,D.value,ae.getAccountStatementDate(g.value.accountIds)):y=nn(G,E.value,D.value),!y)return;if(m.value===Ut.Calendar.type){d.value=vl(y.minTime,d.value);const ye=hn(y.minTime,y.maxTime,E.value,D.value);ye&&(y=ye,d.value=vl(y.minTime,d.value))}const Ve=ve.updateTransactionListFilter({dateType:y.dateType,maxTime:y.maxTime,minTime:y.minTime});Pt.value=!1,Ve&&rt()}function Ye(G,y){if(!G||!y)return;let Ve=$a(G,y,E.value,D.value,qt.Normal,ae.getAccountStatementDate(g.value.accountIds));if(Ve||(Ve=Ul(G,y,E.value,D.value,qt.Normal)),m.value===Ut.Calendar.type){d.value=vl(G,d.value);const et=hn(G,y,E.value,D.value);et&&(G=et.minTime,y=et.maxTime,Ve=et.dateType,d.value=vl(G,d.value))}const ye=ve.updateTransactionListFilter({dateType:Ve,maxTime:y,minTime:G});It.value=!1,ye&&rt()}function tl(G){if(!G)return;const y=jl(G),Ve=Sn(G),ye=Ul(y,Ve,E.value,D.value,qt.Normal);m.value===Ut.Calendar.type&&(d.value=vl(y,d.value));const et=ve.updateTransactionListFilter({dateType:ye,maxTime:Ve,minTime:y});it.value=!1,et&&rt()}function yt(G,y,Ve){if(g.value.dateType===Dt.All.type)return;let ye=null;if((Dt.isBillingCycle(g.value.dateType)||g.value.dateType===Dt.Custom.type)&&(ye=ys(G,y,Ve,E.value,D.value,qt.Normal,ae.getAccountStatementDate(g.value.accountIds))),ye||(ye=Tn(G,y,Ve,E.value,D.value,qt.Normal)),m.value===Ut.Calendar.type){d.value=vl(ye.minTime,d.value);const rl=hn(ye.minTime,ye.maxTime,E.value,D.value);rl&&(ye=rl,d.value=vl(ye.minTime,d.value))}ve.updateTransactionListFilter({dateType:ye.dateType,maxTime:ye.maxTime,minTime:ye.minTime})&&rt()}function Ot(G){if(g.value.type===G)return;let y;if(G&&g.value.categoryIds){y="";for(const ye of hs(fe.value)){const et=v.value[ye];et&&et.type===ia(G)&&(y.length>0&&(y+=","),y+=ye)}}const Ve=ve.updateTransactionListFilter({type:G,categoryIds:y});Ct.value=!1,Ve&&rt()}function _e(G){if(g.value.categoryIds===G)return;const y=ve.updateTransactionListFilter({categoryIds:G});gt.value=!1,y&&rt()}function zt(){let G="/settings/filter/category?type=transactionListCurrent";We.Income<=g.value.type&&g.value.type<=We.Transfer&&(G+="&allowCategoryTypes="+ia(g.value.type)),_.f7router.navigate(G)}function il(G){if(g.value.accountIds===G)return;const y=ve.updateTransactionListFilter({accountIds:G});$t.value=!1,y&&rt()}function Vl(){_.f7router.navigate("/settings/filter/account?type=transactionListCurrent")}function fl(G){if(g.value.tagIds===G)return;const y=ve.updateTransactionListFilter({tagIds:G});Ct.value=!1,y&&rt()}function Fl(){_.f7router.navigate("/settings/filter/tag?type=transactionListCurrent")}function ue(G){if(g.value.tagFilterType===G)return;const y=ve.updateTransactionListFilter({tagFilterType:G});Ct.value=!1,y&&rt()}function bl(G){if(g.value.keyword===G)return;ve.updateTransactionListFilter({keyword:G})&&rt()}function Rl(G){if(g.value.amountFilter===G)return;if(G){Ct.value=!1,_.f7router.navigate(`/transaction/filter/amount?type=${G}&value=${g.value.amountFilter}`);return}const y=ve.updateTransactionListFilter({amountFilter:G});Ct.value=!1,y&&rt()}function Ol(){const G=xl();let y=!1,Ve;g.value.maxTime&&g.value.minTime&&(g.value.maxTime<G?(y=!0,Ve=g.value.maxTime):G<g.value.minTime&&(y=!0,Ve=g.value.minTime));const ye=[];y&&ye.push(`time=${Ve}`),g.value.type!==We.ModifyBalance&&ye.push(`type=${g.value.type}`),O.value===1&&ye.push(`categoryId=${g.value.categoryIds}`),le.value===1&&ye.push(`accountId=${g.value.accountIds}`),g.value.tagIds&&ye.push(`tagIds=${g.value.tagIds}`),_.f7router.navigate(`/transaction/add?${ye.join("&")}`)}function zl(G){_.f7router.navigate(`/transaction/add?id=${G.id}&type=${G.type}`)}function Fe(G){_.f7router.navigate(`/transaction/edit?id=${G.id}&type=${G.type}`)}function Yt(G,y){if(!G){A("An error occurred");return}if(!y){xt.value=G,Le.value=!0;return}Le.value=!1,xt.value=null,je(),ve.deleteTransaction({transaction:G,defaultCurrency:T.value,beforeResolve:Ve=>{Il(Ae(G),Ve)}}).then(()=>{Se()}).catch(Ve=>{Se(),Ve.processed||C(Ve.message||Ve)})}function un(G,y){ve.collapseMonthInTransactionList({monthList:G,collapse:y}),!y&&mt.value[G.yearDashMonth]&&delete mt.value[G.yearDashMonth]}function Xl(G){al(G.$el,".popover-inner","li.list-item-selected")}function An(){ve.transactionListStateInvalid&&!c.value&&rt(),P(_.f7router,Je)}function Pl(){Ke(!0).then(()=>{Ke(!1)})}function $n(){Q()}function cn(){Ke(!1).then(()=>{Q()})}return ka(()=>{window.addEventListener("resize",Pl),Gr($n)}),Ma(()=>{window.removeEventListener("resize",Pl)}),Et(),(G,y)=>{const Ve=o("f7-nav-left"),ye=o("f7-icon"),et=o("f7-link"),rl=o("f7-nav-title"),Xt=o("f7-nav-right"),Ql=o("f7-searchbar"),dn=o("f7-subnavbar"),Dn=o("f7-navbar"),ct=o("f7-list-item"),dt=o("f7-list"),pl=o("f7-popover"),wl=o("f7-toolbar"),fn=o("transaction-calendar"),Tl=o("f7-block"),ml=o("f7-accordion-toggle"),Yl=o("f7-block-title"),Hl=o("f7-accordion-content"),pn=o("f7-accordion-item"),ql=o("ItemIcon"),mn=o("f7-chip"),Jl=o("f7-swipeout-button"),In=o("f7-swipeout-actions"),Vn=o("date-range-selection-sheet"),vn=o("month-selection-sheet"),Rt=o("f7-actions-label"),ll=o("f7-actions-button"),en=o("f7-actions-group"),Fn=o("f7-actions"),Pn=o("f7-page");return a(),i(Pn,{"with-subnavbar":"",ptr:"",infinite:"","infinite-preloader":ft.value,"infinite-distance":600,"onPtr:refresh":rt,"onPage:afterin":An,onInfinite:y[27]||(y[27]=me=>Wt(!0))},{default:l(()=>[t(Dn,null,{default:l(()=>[t(Ve,{"back-link":e(n)("Back")},null,8,["back-link"]),t(rl,null,{default:l(()=>[t(et,{"popover-open":".chart-data-type-popover-menu"},{default:l(()=>[s("span",jf,u(e(q)),1),t(ye,{class:"page-title-bar-icon",color:"gray",style:{opacity:"0.5"},f7:"chevron_down_circle_fill"})]),_:1})]),_:1}),t(Xt,{class:"navbar-compact-icons"},{default:l(()=>[t(et,{"icon-f7":"plus",class:R({disabled:!e(he)}),onClick:Ol},null,8,["class"])]),_:1}),t(dn,{inner:!1},{default:l(()=>[t(Ql,{"custom-searchs":"",value:e(g).keyword,placeholder:e(n)("Search transaction description"),"disable-button-text":e(n)("Cancel"),onChange:y[0]||(y[0]=me=>bl(me.target.value))},null,8,["value","placeholder","disable-button-text"])]),_:1})]),_:1}),t(pl,{class:"chart-data-type-popover-menu",opened:At.value,"onUpdate:opened":y[1]||(y[1]=me=>At.value=me)},{default:l(()=>[t(dt,{dividers:""},{default:l(()=>[(a(!0),$(ke,null,Te(e(Ut).values(),me=>(a(),i(ct,{title:e(n)(me.name),class:R({"list-item-selected":e(m)===me.type}),key:me.type,onClick:Ee=>{Ft(me.type),At.value=!1}},{after:l(()=>[e(m)===me.type?(a(),i(ye,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"})):r("",!0)]),_:2},1032,["title","class","onClick"]))),128))]),_:1})]),_:1},8,["opened"]),t(wl,{tabbar:"",bottom:"",class:"toolbar-item-auto-size transaction-list-toolbar"},{default:l(()=>[t(et,{class:R({disabled:e(c)||e(g).dateType===e(Dt).All.type}),onClick:y[2]||(y[2]=me=>yt(e(g).minTime,e(g).maxTime,-1))},{default:l(()=>[t(ye,{class:"icon-with-direction",f7:"arrow_left_square"})]),_:1},8,["class"]),t(et,{class:R({"tabbar-text-with-ellipsis":!0,disabled:e(c)}),"popover-open":".date-popover-menu"},{default:l(()=>[s("span",{class:R({"tabbar-item-changed":e(g).dateType!==e(Dt).All.type})},u(e(J)),3)]),_:1},8,["class"]),t(et,{class:R({disabled:e(c)||e(g).dateType===e(Dt).All.type}),onClick:y[3]||(y[3]=me=>yt(e(g).minTime,e(g).maxTime,1))},{default:l(()=>[t(ye,{class:"icon-with-direction",f7:"arrow_right_square"})]),_:1},8,["class"]),t(et,{class:R(["tabbar-text-with-ellipsis",{disabled:e(g).type===1}]),"popover-open":".category-popover-menu"},{default:l(()=>[s("span",{class:R({"tabbar-item-changed":e(g).categoryIds})},u(e(se)),3)]),_:1},8,["class"]),t(et,{class:"tabbar-text-with-ellipsis","popover-open":".account-popover-menu"},{default:l(()=>[s("span",{class:R({"tabbar-item-changed":e(g).accountIds})},u(e($e)),3)]),_:1}),t(et,{"popover-open":".more-popover-menu"},{default:l(()=>[t(ye,{f7:"ellipsis_vertical",class:R({"tabbar-item-changed":e(g).type>0||e(g).amountFilter||e(g).tagIds})},null,8,["class"])]),_:1})]),_:1}),e(m)===e(Ut).Calendar.type?(a(),i(Tl,{key:0,class:"transaction-calendar-container margin-vertical"},{default:l(()=>[t(fn,{"calendar-class":"justify-content-center","week-day-name-type":"short",readonly:e(c),"is-dark-mode":lt.value,"default-currency":!1,"min-date":e(Me),"max-date":e(Ue),dailyTotalAmounts:e(qe)?.dailyTotalAmounts,modelValue:e(d),"onUpdate:modelValue":y[4]||(y[4]=me=>St(d)?d.value=me:null)},null,8,["readonly","is-dark-mode","min-date","max-date","dailyTotalAmounts","modelValue"])]),_:1})):r("",!0),e(c)?(a(),$("div",Kf,[(a(!0),$(ke,null,Te(e(m)===e(Ut).List.type?[1,2]:[1],me=>(a(),i(Tl,{class:R(["combination-list-wrapper margin-vertical",{"no-accordion-toggle":e(m)!==e(Ut).List.type}]),key:me},{default:l(()=>[t(pn,null,{default:l(()=>[e(m)===e(Ut).List.type?(a(),i(Yl,{key:0},{default:l(()=>[t(ml,null,{default:l(()=>[t(dt,{strong:"",inset:"",dividers:"","media-list":"",class:"transaction-amount-list combination-list-header combination-list-opened"},{default:l(()=>[t(ct,null,{title:l(()=>[y[29]||(y[29]=s("small",null,"YYYY-MM",-1)),e(M)?(a(),$("small",Zf,[...y[28]||(y[28]=[s("span",null,"0.00 USD",-1),s("span",null,"0.00 USD",-1)])])):r("",!0),t(ye,{class:"combination-list-chevron-icon",f7:"chevron_up"})]),_:1})]),_:1})]),_:1})]),_:1})):r("",!0),t(Hl,{style:{height:"auto"}},{default:l(()=>[t(dt,{strong:"",inset:"",dividers:"","media-list":"","accordion-list":"",class:"transaction-info-list combination-list-content"},{default:l(()=>[(a(!0),$(ke,null,Te(e(m)===e(Ut).List.type&&me===1?[1,2,3,4,5,6,7]:[1,2,3],Ee=>(a(),i(ct,{link:"#","chevron-center":"",class:"transaction-info",key:Ee},{media:l(()=>[...y[30]||(y[30]=[s("div",{class:"display-flex flex-direction-column transaction-date"},[s("span",{class:"transaction-day full-line flex-direction-column"},"DD"),s("span",{class:"transaction-day-of-week full-line flex-direction-column"},"Sun")],-1)])]),inner:l(()=>[s("div",Xf,[s("div",Qf,[s("div",Jf,[t(ye,{f7:"app_fill"})])]),y[31]||(y[31]=s("div",{class:"actual-item-inner"},[s("div",{class:"item-title-row"},[s("div",{class:"item-title"},[s("div",{class:"transaction-category-name no-padding"},[s("span",null,"Category")])]),s("div",{class:"item-after"},[s("div",{class:"transaction-amount"},[s("span",null,"0.00 USD")])])]),s("div",{class:"item-text"},[s("div",{class:"transaction-description"},[s("span",null,"Transaction Description")])]),s("div",{class:"item-footer"},[s("div",{class:"transaction-footer"},[s("span",null,"HH:mm"),s("span",null,""),s("span",null,"Source Account")])])],-1))])]),_:1}))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["class"]))),128))])):r("",!0),!e(c)&&De.value?(a(),i(dt,{key:2,strong:"",inset:"",dividers:"",class:"margin-vertical"},{default:l(()=>[t(ct,{title:e(n)("No transaction data")},null,8,["title"])]),_:1})):r("",!0),(a(!0),$(ke,null,Te(He.value,me=>(a(),i(Tl,{class:R(["combination-list-wrapper margin-vertical",{"no-accordion-toggle":e(m)!==e(Ut).List.type}]),key:me.yearDashMonth},{default:l(()=>[t(pn,{opened:me.opened,"onAccordion:open":Ee=>un(me,!1),"onAccordion:opened":cn,"onAccordion:close":Ee=>un(me,!0),"onAccordion:closed":cn},{default:l(()=>[e(m)===e(Ut).List.type?(a(),i(Yl,{key:0,id:at(me.yearDashMonth)},{default:l(()=>[t(ml,null,{default:l(()=>[t(dt,{strong:"",inset:"",dividers:"","media-list":"",class:R(["transaction-amount-list combination-list-header",me.opened?"combination-list-opened":"combination-list-closed"])},{default:l(()=>[t(ct,null,{title:l(()=>[s("small",null,[s("span",null,u(e(Ce)(me)),1)]),e(M)&&me.totalAmount?(a(),$("small",ep,[s("span",tp,u(e(be)(me.totalAmount.income,e(T),"+",me.totalAmount.incompleteIncome)),1),s("span",lp,u(e(be)(me.totalAmount.expense,e(T),"-",me.totalAmount.incompleteExpense)),1)])):r("",!0),t(ye,{class:"combination-list-chevron-icon",f7:me.opened?"chevron_up":"chevron_down"},null,8,["f7"])]),_:2},1024)]),_:2},1032,["class"])]),_:2},1024)]),_:2},1032,["id"])):r("",!0),t(Hl,null,{default:l(()=>[Ie(me)?(a(),i(Tl,{key:0,style:bt({height:Qe(me)})},null,8,["style"])):r("",!0),Ie(me)?r("",!0):(a(),i(dt,{key:1,strong:"",inset:"",dividers:"","media-list":"","accordion-list":"",class:"transaction-info-list transaction-month-list combination-list-content",id:pt(me.yearDashMonth)},{default:l(()=>[(a(!0),$(ke,null,Te(me.items,(Ee,de)=>(a(),i(ct,{swipeout:"","chevron-center":"","accordion-item":"",class:"transaction-info",id:Ae(Ee),link:`/transaction/detail?id=${Ee.id}&type=${Ee.type}`,key:Ee.id},{media:l(()=>[s("div",{class:"display-flex flex-direction-column transaction-date",style:bt(Lt(Ee,de>0?me.items[de-1]:void 0))},[s("span",np,u(e(k)(Ee.time)),1),Ee.displayDayOfWeek?(a(),$("span",ap,u(e(V)(Ee.displayDayOfWeek)),1)):r("",!0)],4)]),inner:l(()=>[s("div",op,[s("div",sp,[s("div",ip,[Ee.category&&Ee.category.color?(a(),i(ql,{key:0,"icon-type":"category","icon-id":Ee.category.icon,color:Ee.category.color},null,8,["icon-id","color"])):!Ee.category||!Ee.category.color?(a(),i(ye,{key:1,f7:"pencil_ellipsis_rectangle"})):r("",!0)])]),s("div",rp,[s("div",up,[s("div",cp,[s("div",dp,[Ee.type===e(We).ModifyBalance?(a(),$("span",fp,u(e(n)("Modify Balance")),1)):Ee.type!==e(We).ModifyBalance&&Ee.category?(a(),$("span",pp,u(Ee.category.name),1)):Ee.type!==e(We).ModifyBalance&&!Ee.category?(a(),$("span",mp,u(e(Be)(Ee.type,"Transaction")),1)):r("",!0)])]),s("div",vp,[Ee.sourceAccount?(a(),$("div",{key:0,class:R(["transaction-amount",{"text-expense":Ee.type===e(We).Expense,"text-income":Ee.type===e(We).Income}])},[s("span",null,u(e(we)(Ee)),1)],2)):r("",!0)])]),s("div",gp,[Ee.comment?(a(),$("div",yp,[s("span",null,u(Ee.comment),1)])):r("",!0)]),s("div",hp,[e(w)&&Ee.tagIds&&Ee.tagIds.length?(a(),$("div",_p,[(a(!0),$(ke,null,Te(Ee.tagIds,Nt=>(a(),i(mn,{"media-text-color":"var(--f7-chip-text-color)",class:"transaction-tag",text:e(K)[Nt]?.name,key:Nt},{media:l(()=>[t(ye,{f7:"number"})]),_:1},8,["text"]))),128))])):r("",!0),s("div",kp,[s("span",null,u(e(X)(Ee)),1),Ee.utcOffset!==e(x)?(a(),$("span",bp,u(`(${e(pe)(Ee)})`),1)):r("",!0),Ee.sourceAccount?(a(),$("span",wp,"")):r("",!0),Ee.sourceAccount?(a(),$("span",Tp,u(Ee.sourceAccount.name),1)):r("",!0),Ee.sourceAccount&&Ee.type===e(We).Transfer&&Ee.destinationAccount&&Ee.sourceAccount.id!==Ee.destinationAccount.id?(a(),i(ye,{key:3,class:"transaction-account-arrow icon-with-direction",f7:"arrow_right"})):r("",!0),Ee.sourceAccount&&Ee.type===e(We).Transfer&&Ee.destinationAccount&&Ee.sourceAccount.id!==Ee.destinationAccount.id?(a(),$("span",Cp,u(Ee.destinationAccount.name),1)):r("",!0)])])])])]),default:l(()=>[t(In,{left:xe.value===e(wt).RTL,right:xe.value===e(wt).LTR},{default:l(()=>[Ee.type!==e(We).ModifyBalance?(a(),i(Jl,{key:0,color:"primary",close:"",text:e(n)("Duplicate"),onClick:Nt=>zl(Ee)},null,8,["text","onClick"])):r("",!0),Ee.editable?(a(),i(Jl,{key:1,color:"orange",close:"",text:e(n)("Edit"),onClick:Nt=>Fe(Ee)},null,8,["text","onClick"])):r("",!0),Ee.editable?(a(),i(Jl,{key:2,color:"red",class:"padding-horizontal",onClick:Nt=>Yt(Ee,!1)},{default:l(()=>[t(ye,{f7:"trash"})]),_:1},8,["onClick"])):r("",!0)]),_:2},1032,["left","right"])]),_:2},1032,["id","link"]))),128))]),_:2},1032,["id"]))]),_:2},1024)]),_:2},1032,["opened","onAccordion:open","onAccordion:close"])]),_:2},1032,["class"]))),128)),e(m)===e(Ut).List.type?ut((a(),i(Tl,{key:3,class:R(["text-align-center",{disabled:ft.value}])},{default:l(()=>[t(et,{href:"#",onClick:y[5]||(y[5]=me=>Wt(!1))},{default:l(()=>[ne(u(e(n)("Load More")),1)]),_:1})]),_:1},8,["class"])),[[vt,!e(c)&&Oe.value]]):r("",!0),t(pl,{class:"date-popover-menu",opened:Pt.value,"onUpdate:opened":y[6]||(y[6]=me=>Pt.value=me),"onPopover:open":Xl},{default:l(()=>[t(dt,{dividers:""},{default:l(()=>[(a(!0),$(ke,null,Te(e(U),me=>ut((a(),i(ct,{title:me.displayName,class:R({"list-item-selected":e(g).dateType===me.type}),key:me.type,onClick:Ee=>ht(me.type)},{after:l(()=>[e(g).dateType===me.type?(a(),i(ye,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"})):r("",!0)]),footer:l(()=>[me.isUserCustomRange&&e(g).dateType===me.type&&e(g).minTime&&e(g).maxTime?(a(),$("div",Sp,[s("span",null,u(e(te)),1),y[32]||(y[32]=s("span",null,"-",-1)),y[33]||(y[33]=s("br",null,null,-1)),s("span",null,u(e(Z)),1)])):r("",!0)]),_:2},1032,["title","class","onClick"])),[[vt,e(m)===e(Ut).List.type||me.type===e(Dt).ThisMonth.type||me.type===e(Dt).LastMonth.type||me.type===e(Dt).Custom.type]])),128))]),_:1})]),_:1},8,["opened"]),t(Vn,{title:e(n)("Custom Date Range"),"min-time":e(b),"max-time":e(p),show:It.value,"onUpdate:show":y[7]||(y[7]=me=>It.value=me),"onDateRange:change":Ye},null,8,["title","min-time","max-time","show"]),t(vn,{title:e(n)("Select Month"),"model-value":e(H),show:it.value,"onUpdate:show":y[8]||(y[8]=me=>it.value=me),"onUpdate:modelValue":tl},null,8,["title","model-value","show"]),t(pl,{class:"category-popover-menu",opened:gt.value,"onUpdate:opened":y[11]||(y[11]=me=>gt.value=me),"onPopover:open":Xl},{default:l(()=>[t(dt,{dividers:"","accordion-list":""},{default:l(()=>[t(ct,{class:R({"list-item-selected":!e(g).categoryIds}),title:e(n)("All"),onClick:y[9]||(y[9]=me=>_e(""))},{media:l(()=>[t(ye,{f7:"rectangle_grid_2x2"})]),after:l(()=>[e(g).categoryIds?r("",!0):(a(),i(ye,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"}))]),_:1},8,["class","title"]),e(z)>0?(a(),i(ct,{key:0,class:R({"list-item-selected":e(g).categoryIds&&e(O)>1}),title:e(n)("Multiple Categories"),onClick:y[10]||(y[10]=me=>zt())},{media:l(()=>[t(ye,{f7:"rectangle_on_rectangle"})]),after:l(()=>[e(g).categoryIds&&e(O)>1?(a(),i(ye,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"})):r("",!0)]),_:1},8,["class","title"])):r("",!0)]),_:1}),(a(!0),$(ke,null,Te(e(N),(me,Ee)=>ut((a(),i(dt,{dividers:"","accordion-list":"",class:"no-margin-vertical",key:Ee},{default:l(()=>[t(ct,{divider:"",title:e(Be)(e(_s)(parseInt(Ee)),"Type")},null,8,["title"]),(a(!0),$(ke,null,Te(me,de=>ut((a(),i(ct,{"accordion-item":"",title:de.name,class:R(Kt(de,e(fe))),key:de.id},{media:l(()=>[t(ql,{"icon-type":"category","icon-id":de.icon,color:de.color},null,8,["icon-id","color"])]),default:l(()=>[t(Hl,null,{default:l(()=>[t(dt,{dividers:"",class:"padding-inline-start"},{default:l(()=>[t(ct,{class:R({"list-item-selected":e(g).categoryIds===de.id,"item-in-multiple-selection":e(O)>1&&e(fe)[de.id]}),title:e(n)("All"),onClick:Nt=>_e(de.id)},{media:l(()=>[t(ye,{f7:"rectangle_grid_2x2"})]),after:l(()=>[e(g).categoryIds===de.id?(a(),i(ye,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"})):r("",!0)]),_:2},1032,["class","title","onClick"]),(a(!0),$(ke,null,Te(de.subCategories,Nt=>ut((a(),i(ct,{title:Nt.name,class:R({"list-item-selected":e(g).categoryIds===Nt.id,"item-in-multiple-selection":e(O)>1&&e(fe)[Nt.id]}),key:Nt.id,onClick:Na=>_e(Nt.id)},{media:l(()=>[t(ql,{"icon-type":"category","icon-id":Nt.icon,color:Nt.color},null,8,["icon-id","color"])]),after:l(()=>[e(g).categoryIds===Nt.id?(a(),i(ye,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"})):r("",!0)]),_:2},1032,["title","class","onClick"])),[[vt,!Nt.hidden||e(g).categoryIds===Nt.id]])),128))]),_:2},1024)]),_:2},1024)]),_:2},1032,["title","class"])),[[vt,!de.hidden||e(g).categoryIds===de.id||e(v)[e(g).categoryIds]&&e(v)[e(g).categoryIds]?.parentId===de.id]])),128))]),_:2},1024)),[[vt,me&&me.length]])),128))]),_:1},8,["opened"]),t(pl,{class:"account-popover-menu",opened:$t.value,"onUpdate:opened":y[14]||(y[14]=me=>$t.value=me),"onPopover:open":Xl},{default:l(()=>[t(dt,{dividers:""},{default:l(()=>[t(ct,{class:R({"list-item-selected":!e(g).accountIds}),title:e(n)("All"),onClick:y[12]||(y[12]=me=>il(""))},{media:l(()=>[t(ye,{f7:"rectangle_grid_2x2"})]),after:l(()=>[e(g).accountIds?r("",!0):(a(),i(ye,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"}))]),_:1},8,["class","title"]),e(L)>0?(a(),i(ct,{key:0,class:R({"list-item-selected":e(g).accountIds&&e(le)>1}),title:e(n)("Multiple Accounts"),onClick:y[13]||(y[13]=me=>Vl())},{media:l(()=>[t(ye,{f7:"rectangle_on_rectangle"})]),after:l(()=>[e(g).accountIds&&e(le)>1?(a(),i(ye,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"})):r("",!0)]),_:1},8,["class","title"])):r("",!0),(a(!0),$(ke,null,Te(e(I),me=>ut((a(),i(ct,{title:me.name,class:R({"list-item-selected":e(g).accountIds===me.id,"item-in-multiple-selection":e(le)>1&&e(ee)[me.id]}),key:me.id,onClick:Ee=>il(me.id)},{media:l(()=>[t(ql,{"icon-type":"account","icon-id":me.icon,color:me.color},null,8,["icon-id","color"])]),after:l(()=>[e(g).accountIds===me.id?(a(),i(ye,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"})):r("",!0)]),_:2},1032,["title","class","onClick"])),[[vt,!me.hidden&&(!e(B)[me.parentId]||!e(B)[me.parentId].hidden)||e(g).accountIds===me.id]])),128))]),_:1})]),_:1},8,["opened"]),t(pl,{class:"more-popover-menu",opened:Ct.value,"onUpdate:opened":y[24]||(y[24]=me=>Ct.value=me)},{default:l(()=>[t(dt,{dividers:""},{default:l(()=>[t(ct,{"group-title":""},{default:l(()=>[s("small",null,u(e(n)("Type")),1)]),_:1}),t(ct,{class:R({"list-item-selected":e(g).type===0}),title:e(n)("All"),onClick:y[15]||(y[15]=me=>Ot(0))},{after:l(()=>[e(g).type===0?(a(),i(ye,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"})):r("",!0)]),_:1},8,["class","title"]),t(ct,{class:R({"list-item-selected":e(g).type===1}),title:e(n)("Modify Balance"),onClick:y[16]||(y[16]=me=>Ot(1))},{after:l(()=>[e(g).type===1?(a(),i(ye,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"})):r("",!0)]),_:1},8,["class","title"]),t(ct,{class:R({"list-item-selected":e(g).type===2}),title:e(n)("Income"),onClick:y[17]||(y[17]=me=>Ot(2))},{after:l(()=>[e(g).type===2?(a(),i(ye,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"})):r("",!0)]),_:1},8,["class","title"]),t(ct,{class:R({"list-item-selected":e(g).type===3}),title:e(n)("Expense"),onClick:y[18]||(y[18]=me=>Ot(3))},{after:l(()=>[e(g).type===3?(a(),i(ye,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"})):r("",!0)]),_:1},8,["class","title"]),t(ct,{class:R({"list-item-selected":e(g).type===4}),title:e(n)("Transfer"),onClick:y[19]||(y[19]=me=>Ot(4))},{after:l(()=>[e(g).type===4?(a(),i(ye,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"})):r("",!0)]),_:1},8,["class","title"]),t(ct,{"group-title":""},{default:l(()=>[s("small",null,u(e(n)("Amount")),1)]),_:1}),t(ct,{class:R({"list-item-selected":!e(g).amountFilter}),title:e(n)("All"),onClick:y[20]||(y[20]=me=>Rl(""))},{after:l(()=>[e(g).amountFilter?r("",!0):(a(),i(ye,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"}))]),_:1},8,["class","title"]),(a(!0),$(ke,null,Te(e(gl).values(),me=>(a(),i(ct,{key:me.type,class:R({"list-item-selected":e(g).amountFilter&&e(g).amountFilter.startsWith(`${me.type}:`)}),title:e(n)(me.name),onClick:Ee=>Rl(me.type)},{after:l(()=>[e(g).amountFilter&&e(g).amountFilter.startsWith(`${me.type}:`)?(a(),$("span",xp,u(e(Ze)),1)):r("",!0),e(g).amountFilter&&e(g).amountFilter.startsWith(`${me.type}:`)?(a(),i(ye,{key:1,class:"list-item-checked-icon",f7:"checkmark_alt"})):r("",!0)]),_:2},1032,["class","title","onClick"]))),128)),t(ct,{"group-title":""},{default:l(()=>[s("small",null,u(e(n)("Tags")),1)]),_:1}),t(ct,{class:R({"list-item-selected":!e(g).tagIds}),title:e(n)("All"),onClick:y[21]||(y[21]=me=>fl(""))},{after:l(()=>[e(g).tagIds?r("",!0):(a(),i(ye,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"}))]),_:1},8,["class","title"]),t(ct,{class:R({"list-item-selected":e(g).tagIds==="none"}),title:e(n)("Without Tags"),onClick:y[22]||(y[22]=me=>fl("none"))},{after:l(()=>[e(g).tagIds==="none"?(a(),i(ye,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"})):r("",!0)]),_:1},8,["class","title"]),e(W)>0?(a(),i(ct,{key:0,class:R({"list-item-selected":e(g).tagIds&&e(ge)>1}),title:e(n)("Multiple Tags"),onClick:y[23]||(y[23]=me=>Fl())},{after:l(()=>[e(g).tagIds&&e(ge)>1?(a(),i(ye,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"})):r("",!0)]),_:1},8,["class","title"])):r("",!0),e(g).tagIds&&e(g).tagIds!=="none"?(a(!0),$(ke,{key:1},Te(ie.value,me=>(a(),i(ct,{title:me.displayName,key:me.type,onClick:Ee=>ue(me.type)},{after:l(()=>[e(g).tagFilterType===me.type?(a(),i(ye,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"})):r("",!0)]),_:2},1032,["title","onClick"]))),128)):r("",!0),(a(!0),$(ke,null,Te(e(K),me=>ut((a(),i(ct,{title:me.name,class:R({"list-item-selected":e(g).tagIds===me.id,"item-in-multiple-selection":e(ge)>1&&e(j)[me.id]}),key:me.id,onClick:Ee=>fl(me.id)},{"before-title":l(()=>[t(ye,{class:"transaction-tag-name transaction-tag-icon",f7:"number"})]),after:l(()=>[e(g).tagIds===me.id?(a(),i(ye,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"})):r("",!0)]),_:2},1032,["title","class","onClick"])),[[vt,!me.hidden||e(g).tagIds===me.id]])),128))]),_:1})]),_:1},8,["opened"]),t(Fn,{"close-by-outside-click":"","close-on-escape":"",opened:Le.value,"onActions:closed":y[26]||(y[26]=me=>Le.value=!1)},{default:l(()=>[t(en,null,{default:l(()=>[t(Rt,null,{default:l(()=>[ne(u(e(n)("Are you sure you want to delete this transaction?")),1)]),_:1}),t(ll,{color:"red",onClick:y[25]||(y[25]=me=>Yt(xt.value,!0))},{default:l(()=>[ne(u(e(n)("Delete")),1)]),_:1})]),_:1}),t(en,null,{default:l(()=>[t(ll,{bold:"",close:""},{default:l(()=>[ne(u(e(n)("Cancel")),1)]),_:1})]),_:1})]),_:1},8,["opened"])]),_:1},8,["infinite-preloader"])}}}),$p={key:0,class:"list-item-custom-title"},Dp={key:1,class:"list-item-custom-title"},Ip={key:0,class:"list-item-custom-title"},Vp={key:1,class:"list-item-custom-title"},Fp={key:0,class:"list-item-custom-title"},Pp={key:1,class:"list-item-custom-title"},Up={class:"transaction-edit-datetime-title"},Bp={key:0,class:"transaction-edit-timezone-name"},Np={key:1,class:"transaction-edit-timezone-name"},Mp={key:0},Ep={key:1},Lp={pagination:!1,"space-between":10,"slides-per-view":"auto",class:"transaction-pictures"},Rp=["onClick"],Op={class:"transaction-picture"},zp={key:0,class:"display-flex justify-content-center align-items-center transaction-picture-control-backdrop"},Yp=["src"],Hp={class:"display-flex justify-content-center align-items-center transaction-picture transaction-picture-add"},qp={class:"tabbar-primary-link"},Wp=["accept"],tn=Re({__name:"EditPage",props:{f7route:{},f7router:{}},setup(f){const _=f,n=_.f7route.query,h=Fl(),{tt:F,getMultiMonthdayShortNames:V,getMultiWeekdayLongNames:k,formatUnixTimeToLongDate:A,formatUnixTimeToLongTime:C,formatGregorianTextualYearMonthDayToLongDate:P}=ze(),{showAlert:m,showConfirm:c,showToast:b,routeBackOnError:p}=nt(),{mode:d,isSupportGeoLocation:x,editId:E,addByTemplateId:D,duplicateFromId:T,clientSessionId:M,loading:w,submitting:U,uploadingPicture:I,geoLocationStatus:B,setGeoLocationByClickMap:L,transaction:v,numeralSystem:N,currentTimezoneOffsetMinutes:z,defaultCurrency:K,defaultAccountId:W,firstDayOfWeek:q,coordinateDisplayType:g,allTimezones:J,allVisibleAccounts:te,allAccountsMap:Z,allVisibleCategorizedAccounts:Y,allCategories:H,allCategoriesMap:fe,allTags:ee,allTagsMap:j,firstVisibleAccountId:O,hasAvailableExpenseCategories:le,hasAvailableIncomeCategories:ge,hasAvailableTransferCategories:$e,canAddTransactionPicture:se,title:Ze,saveButtonTitle:Me,sourceAmountTitle:Ue,sourceAccountTitle:qe,transferInAmountTitle:he,sourceAccountName:X,destinationAccountName:Ce,sourceAccountCurrency:pe,destinationAccountCurrency:we,transactionDisplayTimezone:be,transactionTimezoneTimeDifference:Be,geoLocationStatusInfo:ce,inputEmptyProblemMessage:ae,inputIsEmpty:oe,swapTransactionData:Pe,getDisplayAmount:ve,getTransactionPictureUrl:Je}=ks(h?.type||Xe.Transaction,h?.mode,n.type?parseInt(n.type):void 0),ft=Ll(),xt=kl(),mt=el(),Vt=ol(),At=sl(),Pt=on(),gt=Ml(),$t=Zn(),Ct=jt("pictureBrowser"),It=jt("pictureInput"),it=S(null),Le=S(!1),xe=S(null),lt=S("time"),ie=S(!1),He=S(!1),De=S(!1),Oe=S(!1),at=S(!1),pt=S(!1),Ae=S(!1),Ie=S(!1),Qe=S(!1),Ke=S(!1),Q=S(!1),Lt=S(!1),Kt=S(!1),Et=S(!1),rt=S(!1),Wt=S(h?.type===Xe.Transaction&&(h?.mode===Ne.Add||h?.mode===Ne.Edit)&&ft.appSettings.alwaysShowTransactionPicturesInMobileTransactionEditPage),Ft=re(()=>xt.framework7DarkMode||!1),ht=re(()=>{const G={readonly:d.value===Ne.View,"text-expense":v.value.type===We.Expense,"text-income":v.value.type===We.Income,"text-color-primary":v.value.type===We.Transfer};return G[ue(v.value.sourceAmount)]=!0,G}),Ye=re(()=>{const G={readonly:d.value===Ne.View};return G[ue(v.value.destinationAmount)]=!0,G}),tl=re(()=>d.value!==Ne.View||!ie.value?A(Sl(v.value.time,Bl(),cl())):A(Sl(v.value.time,v.value.utcOffset,cl()))),yt=re(()=>{if(d.value!==Ne.View||!ie.value)return C(Sl(v.value.time,Bl(),cl()));const G=N.value.replaceWesternArabicDigitsToLocalizedDigits(bs(ft.appSettings.timeZone));return`${C(Sl(v.value.time,v.value.utcOffset,cl()))} (UTC${G})`}),Ot=re(()=>{for(const G of J.value)if(G.name===v.value.timeZone)return G.displayName;return""}),_e=re(()=>{const G=[];if(!v.value.pictures||!v.value.pictures.length)return G;for(const y of v.value.pictures)G.push({url:Je(y)});return G}),zt=re(()=>{const G=[];if(!v.value.pictures||!v.value.pictures.length)return G;for(const y of v.value.pictures)G.push(Je(y));return G}),il=re(()=>{if(h?.type!==Xe.Template)return"";const G=v.value;if(G.scheduledFrequencyType===yl.Disabled.type)return F("Disabled");const y=(G.scheduledFrequency||"").split(","),Ve=[];for(const ye of y)ye&&Ve.push(parseInt(ye));return G.scheduledFrequencyType===yl.Weekly.type?Ve.length?F("format.misc.everyMultiDaysOfWeek",{days:k(Ve,q.value)}):F("Weekly"):G.scheduledFrequencyType===yl.Monthly.type?Ve.length?F("format.misc.everyMultiDaysOfMonth",{days:V(Ve)}):F("Monthly"):""}),Vl=re(()=>{if(h?.type!==Xe.Template)return"";const G=v.value;return G.scheduledStartDate?P(G.scheduledStartDate):F("No limit")}),fl=re(()=>{if(h?.type!==Xe.Template)return"";const G=v.value;return G.scheduledEndDate?P(G.scheduledEndDate):F("No limit")});function Fl(){return _.f7route.path==="/transaction/add"?{type:Xe.Transaction,mode:Ne.Add}:_.f7route.path==="/transaction/edit"?{type:Xe.Transaction,mode:Ne.Edit}:_.f7route.path==="/transaction/detail"?{type:Xe.Transaction,mode:Ne.View}:_.f7route.path==="/template/add"?{type:Xe.Template,mode:Ne.Add}:_.f7route.path==="/template/edit"?{type:Xe.Template,mode:Ne.Edit}:null}function ue(G){return G>=1e8||G<=-1e8?"ebk-small-amount":G>=1e6||G<=-1e6?"ebk-normal-amount":"ebk-large-amount"}function bl(G){for(const y of ee.value)if(y.id===G)return y.name;return""}function Rl(){if(!h){b("Parameter Invalid"),it.value="Parameter Invalid";return}w.value=!0;const G=[Vt.loadAllAccounts({force:!1}),At.loadAllCategories({force:!1}),Pt.loadAllTags({force:!1}),$t.loadAllTemplates({force:!1,templateType:Mt.Normal.type})];if(h.type===Xe.Transaction)n.id&&(d.value===Ne.Edit?E.value=n.id:d.value===Ne.Add&&(T.value=n.id),G.push(gt.getTransaction({transactionId:n.id,withPictures:d.value!==Ne.Add})));else if(h.type===Xe.Template){const Ve=Qt.createNewTransactionTemplate(v.value);Ve.name="",n.templateType&&(Ve.templateType=parseInt(n.templateType)),Ve.templateType===Mt.Schedule.type&&(Ve.scheduledFrequencyType=yl.Disabled.type,Ve.scheduledFrequency=""),v.value=Ve,n.id&&(d.value===Ne.Edit&&(E.value=n.id),G.push($t.getTemplate({templateId:n.id})))}const y=n.type?parseInt(n.type):0;(y&&y>=We.Income&&y<=We.Transfer||y===We.ModifyBalance&&h.type===Xe.Transaction&&d.value===Ne.View)&&(v.value.type=y),d.value===Ne.Add&&(M.value=sn()),Promise.all(G).then(function(Ve){if(n.id&&!Ve[4]){h.type===Xe.Transaction?(b("Unable to retrieve transaction"),it.value="Unable to retrieve transaction"):h.type===Xe.Template&&(b("Unable to retrieve template"),it.value="Unable to retrieve template");return}let ye=null;if(h.type===Xe.Transaction?n.id&&Ve[4]instanceof Nn?ye=Ve[4]:n.templateId&&$t.allTransactionTemplatesMap&&$t.allTransactionTemplatesMap[Mt.Normal.type]?(ye=$t.allTransactionTemplatesMap[Mt.Normal.type][n.templateId]??null,ye&&(D.value=ye.id)):n.noTransactionDraft!=="true"&&(ft.appSettings.autoSaveTransactionDraft==="enabled"||ft.appSettings.autoSaveTransactionDraft==="confirmation")&&gt.transactionDraft&&(ye=Nn.ofDraft(gt.transactionDraft)):h.type===Xe.Template&&Ve[4]instanceof Qt&&n.id&&(ye=Ve[4]),ws(v.value,ye,H.value,fe.value,te.value,Z.value,j.value,W.value,{time:n.time?parseInt(n.time):void 0,type:y,categoryId:n.categoryId,accountId:n.accountId,destinationAccountId:n.destinationAccountId,amount:n.amount?parseInt(n.amount):void 0,destinationAmount:n.destinationAmount?parseInt(n.destinationAmount):void 0,tagIds:n.tagIds,comment:n.comment},h.type===Xe.Transaction&&(d.value===Ne.Edit||d.value===Ne.View),h.type===Xe.Transaction&&(d.value===Ne.Edit||d.value===Ne.View)),h.type===Xe.Transaction&&n.id&&Ve[4]instanceof Nn)ye&&n.withTime&&n.withTime==="true"&&(v.value.time=ye.time,v.value.timeZone=ye.timeZone,v.value.utcOffset=ye.utcOffset),ye&&n.withGeoLocation&&n.withGeoLocation==="true"&&v.value.setGeoLocation(ye.geoLocation);else if(h.type===Xe.Template&&n.id&&Ve[4]instanceof Qt){const et=Ve[4];v.value.id=et.id,v.value instanceof Qt||(v.value=Qt.createNewTransactionTemplate(v.value)),v.value.fillFrom(et)}w.value=!1}).catch(Ve=>{_l.error("failed to load essential data for editing transaction",Ve),Ve.processed?w.value=!1:(it.value=Ve,b(Ve.message||Ve))})}function Ol(){const G=_.f7router;if(d.value===Ne.View)return;const y=ae.value;if(y){m(y);return}if(h?.type===Xe.Transaction&&(d.value===Ne.Add||d.value===Ne.Edit)){const Ve=function(){U.value=!0,je(()=>U.value),gt.saveTransaction({transaction:v.value,defaultCurrency:K.value,isEdit:d.value===Ne.Edit,clientSessionId:M.value}).then(()=>{U.value=!1,Se(),d.value===Ne.Add?b("You have added a new transaction"):d.value===Ne.Edit&&b("You have saved this transaction"),d.value===Ne.Add&&n.noTransactionDraft!=="true"&&!D.value&&!T.value&&gt.clearTransactionDraft(),Le.value=!0,G.back()}).catch(ye=>{U.value=!1,Se(),ye.error&&(ye.error.errorCode===wn.TransactionCannotCreateInThisTime||ye.error.errorCode===wn.TransactionCannotModifyInThisTime)?c("You have set this time range to prevent editing transactions. Would you like to change the editable transaction range to All?",()=>{U.value=!0,je(()=>U.value),mt.updateUserTransactionEditScope({transactionEditScope:Ts.All.type}).then(()=>{U.value=!1,Se(),b("Your editable transaction range has been set to All")}).catch(et=>{U.value=!1,Se(),et.processed||b(et.message||et)})}):ye.processed||b(ye.message||ye)})};v.value.sourceAmount===0?c("Are you sure you want to save this transaction with a zero amount?",()=>{Ve()}):Ve()}else h?.type===Xe.Template&&(d.value===Ne.Add||d.value===Ne.Edit)&&(U.value=!0,je(()=>U.value),$t.saveTemplateContent({template:v.value,isEdit:d.value===Ne.Edit,clientSessionId:M.value}).then(()=>{U.value=!1,Se(),d.value===Ne.Add?b("You have added a new template"):d.value===Ne.Edit&&b("You have saved this template"),Le.value=!0,G.back()}).catch(Ve=>{U.value=!1,Se(),Ve.processed||b(Ve.message||Ve)}))}function zl(G){if(!x){_l.warn("this browser does not support geo location"),G&&b("Unable to retrieve current position");return}navigator.geolocation.getCurrentPosition(function(y){if(!y||!y.coords){_l.error("current position is null"),B.value=_n.Error,G&&b("Unable to retrieve current position");return}B.value=_n.Success,v.value.setLatitudeAndLongitude(y.coords.latitude,y.coords.longitude)},function(y){_l.error("cannot retrieve current position",y),B.value=_n.Error,G&&b("Unable to retrieve current position")}),B.value=_n.Getting}function Fe(){B.value=null,v.value.removeGeoLocation()}function Yt(G){d.value===Ne.View?ie.value=!ie.value:(lt.value=G,Ke.value=!0)}function un(){!se.value||U.value||It.value?.click()}function Xl(G){if(!G||!G.target)return;const y=G.target;if(!y.files||!y.files.length)return;const Ve=y.files[0];y.value="",I.value=!0,U.value=!0,gt.uploadTransactionPicture({pictureFile:Ve}).then(ye=>{v.value.addPicture(ye),I.value=!1,U.value=!1}).catch(ye=>{I.value=!1,U.value=!1,ye.processed||b(ye.message||ye)})}function An(G){if(d.value!==Ne.Add&&d.value!==Ne.Edit&&v.value.pictures&&v.value.pictures.length){Ct.value?.open();return}c("Are you sure you want to remove this transaction picture?",()=>{xe.value=G.pictureId,U.value=!0,gt.removeUnusedTransactionPicture({pictureInfo:G}).then(y=>{y&&v.value.removePicture(G),xe.value="",U.value=!1}).catch(y=>{y.error&&y.error.errorCode===wn.TransactionPictureNotFound?v.value.removePicture(G):y.processed||b(y.message||y),xe.value="",U.value=!1})})}function Pl(G,y){_.f7router.navigate(`/transaction/add?id=${v.value.id}&type=${v.value.type}&withTime=${G??!1}&withGeoLocation=${y??!1}`)}function $n(){p(_.f7router,it),ft.appSettings.autoGetCurrentGeoLocation&&d.value===Ne.Add&&!B.value&&!v.value.geoLocation&&zl(!1)}function cn(){if(Le.value||h?.type!==Xe.Transaction||d.value!==Ne.Add||n.noTransactionDraft==="true"||D.value||T.value)return;const G=n.amount?parseInt(n.amount):void 0;ft.appSettings.autoSaveTransactionDraft==="confirmation"?gt.isTransactionDraftModified(v.value,G,n.categoryId,n.accountId,n.tagIds,O.value)?c("Do you want to save this transaction draft?",()=>{gt.saveTransactionDraft(v.value,G,n.categoryId,n.accountId,n.tagIds,O.value)},()=>{gt.clearTransactionDraft()}):gt.clearTransactionDraft():ft.appSettings.autoSaveTransactionDraft==="enabled"&&gt.saveTransactionDraft(v.value,G,n.categoryId,n.accountId,n.tagIds,O.value)}return Rl(),(G,y)=>{const Ve=o("f7-nav-left"),ye=o("f7-nav-title"),et=o("f7-link"),rl=o("f7-nav-right"),Xt=o("f7-button"),Ql=o("f7-segmented"),dn=o("f7-subnavbar"),Dn=o("f7-navbar"),ct=o("f7-list-input"),dt=o("f7-list-item"),pl=o("f7-chip"),wl=o("f7-block"),fn=o("f7-list"),Tl=o("number-pad-sheet"),ml=o("f7-icon"),Yl=o("tree-view-selection-sheet"),Hl=o("two-column-list-item-selection-sheet"),pn=o("date-time-selection-sheet"),ql=o("schedule-frequency-sheet"),mn=o("date-selection-sheet"),Jl=o("list-item-selection-popup"),In=o("map-sheet"),Vn=o("transaction-tag-selection-sheet"),vn=o("f7-preloader"),Rt=o("f7-actions-button"),ll=o("f7-actions-group"),en=o("f7-actions"),Fn=o("f7-toolbar"),Pn=o("f7-photo-browser"),me=o("f7-page"),Ee=jn("textarea-auto-size");return a(),i(me,{"with-subnavbar":"","onPage:afterin":$n,"onPage:beforeout":cn},{default:l(()=>[t(Dn,null,{default:l(()=>[t(Ve,{"back-link":e(F)("Back")},null,8,["back-link"]),t(ye,{title:e(F)(e(Ze))},null,8,["title"]),e(d)!==e(Ne).View||e(v).type!==e(We).ModifyBalance?(a(),i(rl,{key:0},{default:l(()=>[t(et,{"icon-f7":"ellipsis",onClick:y[0]||(y[0]=de=>Oe.value=!0)}),e(d)!==e(Ne).View?(a(),i(et,{key:0,class:R({disabled:e(oe)||e(U)}),text:e(F)(e(Me)),onClick:Ol},null,8,["class","text"])):r("",!0)]),_:1})):r("",!0),t(dn,null,{default:l(()=>[t(Ql,{strong:"",class:R({readonly:e(h)?.type===e(Xe).Transaction&&e(d)!==e(Ne).Add})},{default:l(()=>[e(v).type!==e(We).ModifyBalance?(a(),i(Xt,{key:0,text:e(F)("Expense"),active:e(v).type===e(We).Expense,disabled:e(h)?.type===e(Xe).Transaction&&e(d)!==e(Ne).Add&&e(v).type!==e(We).Expense,onClick:y[1]||(y[1]=de=>e(v).type=e(We).Expense)},null,8,["text","active","disabled"])):r("",!0),e(v).type!==e(We).ModifyBalance?(a(),i(Xt,{key:1,text:e(F)("Income"),active:e(v).type===e(We).Income,disabled:e(h)?.type===e(Xe).Transaction&&e(d)!==e(Ne).Add&&e(v).type!==e(We).Income,onClick:y[2]||(y[2]=de=>e(v).type=e(We).Income)},null,8,["text","active","disabled"])):r("",!0),e(v).type!==e(We).ModifyBalance?(a(),i(Xt,{key:2,text:e(F)("Transfer"),active:e(v).type===e(We).Transfer,disabled:e(h)?.type===e(Xe).Transaction&&e(d)!==e(Ne).Add&&e(v).type!==e(We).Transfer,onClick:y[3]||(y[3]=de=>e(v).type=e(We).Transfer)},null,8,["text","active","disabled"])):r("",!0),e(h)?.type===e(Xe).Transaction&&e(v).type===e(We).ModifyBalance?(a(),i(Xt,{key:3,text:e(F)("Modify Balance"),active:e(v).type===e(We).ModifyBalance},null,8,["text","active"])):r("",!0)]),_:1},8,["class"])]),_:1})]),_:1}),e(w)?(a(),i(fn,{key:0,strong:"",inset:"",dividers:"",class:"margin-vertical skeleton-text"},{default:l(()=>[e(h)?.type===e(Xe).Template?(a(),i(ct,{key:0,label:"Template Name",placeholder:"Template Name"})):r("",!0),t(dt,{class:"transaction-edit-amount ebk-large-amount",header:"Expense Amount",title:"0.00"}),e(v).type!==e(We).ModifyBalance?(a(),i(dt,{key:1,class:"list-item-with-header-and-title list-item-title-hide-overflow",header:"Category",title:"Category Names"})):r("",!0),t(dt,{class:"list-item-with-header-and-title",header:"Account",title:"Account Name"}),e(h)?.type===e(Xe).Transaction?(a(),i(dt,{key:2,class:"list-item-with-header-and-title",header:"Transaction Time",title:"YYYY/MM/DD HH:mm:ss"})):r("",!0),e(h)?.type===e(Xe).Template&&e(v)instanceof e(Qt)&&e(v).templateType===e(Mt).Schedule.type?(a(),i(dt,{key:3,class:"list-item-with-header-and-title",header:"Scheduled Transaction Frequency",title:"Every XXXXX"})):r("",!0),e(h)?.type===e(Xe).Transaction||e(h)?.type===e(Xe).Template&&e(v)instanceof e(Qt)&&e(v).templateType===e(Mt).Schedule.type?(a(),i(dt,{key:4,class:"list-item-with-header-and-title list-item-title-hide-overflow list-item-no-item-after",header:"Transaction Timezone",title:"(UTC XX:XX) System Default",link:"#","no-chevron":e(d)===e(Ne).View},null,8,["no-chevron"])):r("",!0),e(h)?.type===e(Xe).Transaction?(a(),i(dt,{key:5,class:"list-item-with-header-and-title list-item-title-hide-overflow",header:"Geographic Location",title:"No Location"})):r("",!0),t(dt,{header:"Tags"},{footer:l(()=>[t(wl,{class:"margin-top-half no-padding no-margin"},{default:l(()=>[t(pl,{class:"transaction-edit-tag",text:"None"})]),_:1})]),_:1}),t(ct,{type:"textarea",label:"Description",placeholder:"Your transaction description (optional)"})]),_:1})):e(w)?r("",!0):(a(),i(fn,{key:1,form:"",strong:"",inset:"",dividers:"",class:"margin-vertical"},{default:l(()=>[e(h)?.type===e(Xe).Template&&e(v)instanceof e(Qt)?(a(),i(ct,{key:0,type:"text","clear-button":"",label:e(F)("Template Name"),placeholder:e(F)("Template Name"),value:e(v).name,"onUpdate:value":y[4]||(y[4]=de=>e(v).name=de)},null,8,["label","placeholder","value"])):r("",!0),t(dt,{class:R(["transaction-edit-amount",ht.value]),link:"#","no-chevron":"",header:e(Ue),title:e(ve)(e(v).sourceAmount,e(v).hideAmount,e(pe)),onClick:y[7]||(y[7]=de=>at.value=!0)},{default:l(()=>[t(Tl,{"min-value":e($l),"max-value":e(Al),currency:e(pe),show:at.value,"onUpdate:show":y[5]||(y[5]=de=>at.value=de),modelValue:e(v).sourceAmount,"onUpdate:modelValue":y[6]||(y[6]=de=>e(v).sourceAmount=de)},null,8,["min-value","max-value","currency","show","modelValue"])]),_:1},8,["class","header","title"]),e(v).type===e(We).Transfer?(a(),i(dt,{key:1,class:R(["transaction-edit-amount text-color-primary",Ye.value]),link:"#","no-chevron":"",header:e(he),title:e(ve)(e(v).destinationAmount,e(v).hideAmount,e(we)),onClick:y[10]||(y[10]=de=>pt.value=!0)},{default:l(()=>[t(Tl,{"min-value":e($l),"max-value":e(Al),currency:e(we),show:pt.value,"onUpdate:show":y[8]||(y[8]=de=>pt.value=de),modelValue:e(v).destinationAmount,"onUpdate:modelValue":y[9]||(y[9]=de=>e(v).destinationAmount=de)},null,8,["min-value","max-value","currency","show","modelValue"])]),_:1},8,["class","header","title"])):r("",!0),e(v).type===e(We).Expense?(a(),i(dt,{class:R(["list-item-with-header-and-title list-item-title-hide-overflow",{disabled:!e(le),readonly:e(d)===e(Ne).View}]),key:"expenseCategorySelection",link:"#","no-chevron":"",header:e(F)("Category"),onClick:y[13]||(y[13]=de=>Ae.value=!0)},{title:l(()=>[e(le)?(a(),$("div",$p,[s("span",null,u(e(Mn)(e(v).expenseCategoryId,e(H)[e(Tt).Expense])),1),t(ml,{class:"category-separate-icon icon-with-direction",f7:"chevron_right"}),s("span",null,u(e(En)(e(v).expenseCategoryId,e(H)[e(Tt).Expense])),1)])):e(le)?r("",!0):(a(),$("div",Dp,[s("span",null,u(e(F)("None")),1)]))]),default:l(()=>[t(Yl,{"primary-key-field":"id","primary-title-field":"name","primary-icon-field":"icon","primary-icon-type":"category","primary-color-field":"color","primary-hidden-field":"hidden","primary-sub-items-field":"subCategories","secondary-key-field":"id","secondary-value-field":"id","secondary-title-field":"name","secondary-icon-field":"icon","secondary-icon-type":"category","secondary-color-field":"color","secondary-hidden-field":"hidden","enable-filter":!0,"filter-placeholder":e(F)("Find category"),"filter-no-items-text":e(F)("No available category"),items:e(H)[e(Tt).Expense],show:Ae.value,"onUpdate:show":y[11]||(y[11]=de=>Ae.value=de),modelValue:e(v).expenseCategoryId,"onUpdate:modelValue":y[12]||(y[12]=de=>e(v).expenseCategoryId=de)},null,8,["filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["class","header"])):r("",!0),e(v).type===e(We).Income?(a(),i(dt,{class:R(["list-item-with-header-and-title list-item-title-hide-overflow",{disabled:!e(ge),readonly:e(d)===e(Ne).View}]),key:"incomeCategorySelection",link:"#","no-chevron":"",header:e(F)("Category"),onClick:y[16]||(y[16]=de=>Ae.value=!0)},{title:l(()=>[e(ge)?(a(),$("div",Ip,[s("span",null,u(e(Mn)(e(v).incomeCategoryId,e(H)[e(Tt).Income])),1),t(ml,{class:"category-separate-icon icon-with-direction",f7:"chevron_right"}),s("span",null,u(e(En)(e(v).incomeCategoryId,e(H)[e(Tt).Income])),1)])):e(ge)?r("",!0):(a(),$("div",Vp,[s("span",null,u(e(F)("None")),1)]))]),default:l(()=>[t(Yl,{"primary-key-field":"id","primary-title-field":"name","primary-icon-field":"icon","primary-icon-type":"category","primary-color-field":"color","primary-hidden-field":"hidden","primary-sub-items-field":"subCategories","secondary-key-field":"id","secondary-value-field":"id","secondary-title-field":"name","secondary-icon-field":"icon","secondary-icon-type":"category","secondary-color-field":"color","secondary-hidden-field":"hidden","enable-filter":!0,"filter-placeholder":e(F)("Find category"),"filter-no-items-text":e(F)("No available category"),items:e(H)[e(Tt).Income],show:Ae.value,"onUpdate:show":y[14]||(y[14]=de=>Ae.value=de),modelValue:e(v).incomeCategoryId,"onUpdate:modelValue":y[15]||(y[15]=de=>e(v).incomeCategoryId=de)},null,8,["filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["class","header"])):r("",!0),e(v).type===e(We).Transfer?(a(),i(dt,{class:R(["list-item-with-header-and-title list-item-title-hide-overflow",{disabled:!e($e),readonly:e(d)===e(Ne).View}]),key:"transferCategorySelection",link:"#","no-chevron":"",header:e(F)("Category"),onClick:y[19]||(y[19]=de=>Ae.value=!0)},{title:l(()=>[e($e)?(a(),$("div",Fp,[s("span",null,u(e(Mn)(e(v).transferCategoryId,e(H)[e(Tt).Transfer])),1),t(ml,{class:"category-separate-icon icon-with-direction",f7:"chevron_right"}),s("span",null,u(e(En)(e(v).transferCategoryId,e(H)[e(Tt).Transfer])),1)])):e($e)?r("",!0):(a(),$("div",Pp,[s("span",null,u(e(F)("None")),1)]))]),default:l(()=>[t(Yl,{"primary-key-field":"id","primary-title-field":"name","primary-icon-field":"icon","primary-icon-type":"category","primary-color-field":"color","primary-hidden-field":"hidden","primary-sub-items-field":"subCategories","secondary-key-field":"id","secondary-value-field":"id","secondary-title-field":"name","secondary-icon-field":"icon","secondary-icon-type":"category","secondary-color-field":"color","secondary-hidden-field":"hidden","enable-filter":!0,"filter-placeholder":e(F)("Find category"),"filter-no-items-text":e(F)("No available category"),items:e(H)[e(Tt).Transfer],show:Ae.value,"onUpdate:show":y[17]||(y[17]=de=>Ae.value=de),modelValue:e(v).transferCategoryId,"onUpdate:modelValue":y[18]||(y[18]=de=>e(v).transferCategoryId=de)},null,8,["filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["class","header"])):r("",!0),t(dt,{class:R(["list-item-with-header-and-title",{disabled:!e(te).length||e(d)===e(Ne).Edit&&e(v).type===e(We).ModifyBalance,readonly:e(d)===e(Ne).View}]),link:"#","no-chevron":"",header:e(F)(e(qe)),title:e(X),onClick:y[22]||(y[22]=de=>Ie.value=!0)},{default:l(()=>[t(Hl,{"primary-key-field":"id","primary-value-field":"category","primary-title-field":"name","primary-footer-field":"displayBalance","primary-icon-field":"icon","primary-icon-type":"account","primary-sub-items-field":"accounts","primary-title-i18n":!0,"secondary-key-field":"id","secondary-value-field":"id","secondary-title-field":"name","secondary-footer-field":"displayBalance","secondary-icon-field":"icon","secondary-icon-type":"account","secondary-color-field":"color","enable-filter":!0,"filter-placeholder":e(F)("Find account"),"filter-no-items-text":e(F)("No available account"),items:e(Y),show:Ie.value,"onUpdate:show":y[20]||(y[20]=de=>Ie.value=de),modelValue:e(v).sourceAccountId,"onUpdate:modelValue":y[21]||(y[21]=de=>e(v).sourceAccountId=de)},null,8,["filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["class","header","title"]),e(v).type===e(We).Transfer?(a(),i(dt,{key:5,class:R(["list-item-with-header-and-title",{disabled:!e(te).length,readonly:e(d)===e(Ne).View}]),link:"#","no-chevron":"",header:e(F)("Destination Account"),title:e(Ce),onClick:y[25]||(y[25]=de=>Qe.value=!0)},{default:l(()=>[t(Hl,{"primary-key-field":"id","primary-value-field":"category","primary-title-field":"name","primary-footer-field":"displayBalance","primary-icon-field":"icon","primary-icon-type":"account","primary-sub-items-field":"accounts","primary-title-i18n":!0,"secondary-key-field":"id","secondary-value-field":"id","secondary-title-field":"name","secondary-footer-field":"displayBalance","secondary-icon-field":"icon","secondary-icon-type":"account","secondary-color-field":"color","enable-filter":!0,"filter-placeholder":e(F)("Find account"),"filter-no-items-text":e(F)("No available account"),items:e(Y),show:Qe.value,"onUpdate:show":y[23]||(y[23]=de=>Qe.value=de),modelValue:e(v).destinationAccountId,"onUpdate:modelValue":y[24]||(y[24]=de=>e(v).destinationAccountId=de)},null,8,["filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["class","header","title"])):r("",!0),e(h)?.type===e(Xe).Transaction?(a(),i(dt,{key:6,class:R(["transaction-edit-datetime list-item-with-header-and-title",{disabled:e(d)===e(Ne).Edit&&e(v).type===e(We).ModifyBalance,readonly:e(d)===e(Ne).View&&e(v).utcOffset===e(z)}]),link:"#","no-chevron":""},{header:l(()=>[s("div",{class:"transaction-edit-datetime-header",onClick:y[26]||(y[26]=de=>Yt("time"))},u(e(F)("Transaction Time")),1)]),title:l(()=>[s("div",Up,[s("div",{onClick:y[27]||(y[27]=de=>Yt("date"))},u(tl.value),1),y[67]||(y[67]=ne("",-1)),s("div",{class:"transaction-edit-datetime-time",onClick:y[28]||(y[28]=de=>Yt("time"))},u(yt.value),1)])]),default:l(()=>[t(pn,{"init-mode":lt.value,show:Ke.value,"onUpdate:show":y[29]||(y[29]=de=>Ke.value=de),modelValue:e(v).time,"onUpdate:modelValue":y[30]||(y[30]=de=>e(v).time=de)},null,8,["init-mode","show","modelValue"])]),_:1},8,["class"])):r("",!0),e(h)?.type===e(Xe).Template&&e(v)instanceof e(Qt)&&e(v).templateType===e(Mt).Schedule.type?(a(),i(dt,{key:7,class:R(["list-item-with-header-and-title",{readonly:e(d)===e(Ne).View}]),link:"#","no-chevron":"",header:e(F)("Scheduled Transaction Frequency"),title:il.value,onClick:y[34]||(y[34]=de=>Q.value=!0)},{default:l(()=>[t(ql,{show:Q.value,"onUpdate:show":y[31]||(y[31]=de=>Q.value=de),type:e(v).scheduledFrequencyType,"onUpdate:type":y[32]||(y[32]=de=>e(v).scheduledFrequencyType=de),modelValue:e(v).scheduledFrequency,"onUpdate:modelValue":y[33]||(y[33]=de=>e(v).scheduledFrequency=de)},null,8,["show","type","modelValue"])]),_:1},8,["class","header","title"])):r("",!0),e(h)?.type===e(Xe).Template&&e(v)instanceof e(Qt)&&e(v).templateType===e(Mt).Schedule.type?(a(),i(dt,{key:8,class:R(["transaction-edit-datetime list-item-with-header-and-title",{readonly:e(d)===e(Ne).View}]),link:"#","no-chevron":"",header:e(F)("Start Date"),title:Vl.value,onClick:y[37]||(y[37]=de=>Lt.value=!0)},{default:l(()=>[t(mn,{show:Lt.value,"onUpdate:show":y[35]||(y[35]=de=>Lt.value=de),modelValue:e(v).scheduledStartDate,"onUpdate:modelValue":y[36]||(y[36]=de=>e(v).scheduledStartDate=de)},null,8,["show","modelValue"])]),_:1},8,["class","header","title"])):r("",!0),e(h)?.type===e(Xe).Template&&e(v)instanceof e(Qt)&&e(v).templateType===e(Mt).Schedule.type?(a(),i(dt,{key:9,class:R(["transaction-edit-datetime list-item-with-header-and-title",{readonly:e(d)===e(Ne).View}]),link:"#","no-chevron":"",header:e(F)("End Date"),title:fl.value,onClick:y[40]||(y[40]=de=>Kt.value=!0)},{default:l(()=>[t(mn,{show:Kt.value,"onUpdate:show":y[38]||(y[38]=de=>Kt.value=de),modelValue:e(v).scheduledEndDate,"onUpdate:modelValue":y[39]||(y[39]=de=>e(v).scheduledEndDate=de)},null,8,["show","modelValue"])]),_:1},8,["class","header","title"])):r("",!0),e(h)?.type===e(Xe).Transaction||e(h)?.type===e(Xe).Template&&e(v)instanceof e(Qt)&&e(v).templateType===e(Mt).Schedule.type?(a(),i(dt,{key:10,"no-chevron":e(d)===e(Ne).View,link:"#",class:R(["list-item-with-header-and-title list-item-title-hide-overflow list-item-no-item-after",{disabled:e(d)===e(Ne).Edit&&e(v).type===e(We).ModifyBalance,readonly:e(d)===e(Ne).View}]),header:e(F)("Transaction Timezone"),onClick:y[43]||(y[43]=de=>He.value=!0)},{title:l(()=>[t(wl,{class:"list-item-custom-title no-padding no-margin"},{default:l(()=>[s("span",null,u(`(${e(be)})`),1),e(v).timeZone||e(v).timeZone===""?(a(),$("span",Bp,u(Ot.value),1)):!e(v).timeZone&&e(v).timeZone!==""?(a(),$("span",Np,u(e(Be)),1)):r("",!0)]),_:1})]),default:l(()=>[t(Jl,{"value-type":"item","key-field":"name","value-field":"name","title-field":"displayNameWithUtcOffset",title:e(F)("Transaction Timezone"),"enable-filter":!0,"filter-placeholder":e(F)("Timezone"),"filter-no-items-text":e(F)("No results"),items:e(J),show:He.value,"onUpdate:show":y[41]||(y[41]=de=>He.value=de),modelValue:e(v).timeZone,"onUpdate:modelValue":y[42]||(y[42]=de=>e(v).timeZone=de)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["no-chevron","class","header"])):r("",!0),e(h)?.type===e(Xe).Transaction?(a(),i(dt,{key:11,link:"#","no-chevron":"",class:R(["list-item-with-header-and-title list-item-title-hide-overflow",{readonly:e(d)===e(Ne).View&&!e(v).geoLocation}]),header:e(F)("Geographic Location"),onClick:y[47]||(y[47]=de=>De.value=!0)},{title:l(()=>[t(wl,{class:"list-item-custom-title no-padding no-margin"},{default:l(()=>[e(v).geoLocation?(a(),$("span",Mp,u(`(${e(Cs)(e(v).geoLocation,e(g))})`),1)):e(v).geoLocation?r("",!0):(a(),$("span",Ep,u(e(ce)),1))]),_:1})]),default:l(()=>[t(In,{readonly:e(d)===e(Ne).View,modelValue:e(v).geoLocation,"onUpdate:modelValue":y[44]||(y[44]=de=>e(v).geoLocation=de),"set-geo-location-by-click-map":e(L),"onUpdate:setGeoLocationByClickMap":y[45]||(y[45]=de=>St(L)?L.value=de:null),show:Et.value,"onUpdate:show":y[46]||(y[46]=de=>Et.value=de)},null,8,["readonly","modelValue","set-geo-location-by-click-map","show"])]),_:1},8,["class","header"])):r("",!0),t(dt,{link:"#","no-chevron":"",class:R({readonly:e(d)===e(Ne).View}),header:e(F)("Tags"),onClick:y[50]||(y[50]=de=>rt.value=!0)},{footer:l(()=>[e(v).tagIds&&e(v).tagIds.length?(a(),i(wl,{key:0,class:"margin-top-half no-padding no-margin"},{default:l(()=>[(a(!0),$(ke,null,Te(e(v).tagIds,de=>(a(),i(pl,{"media-text-color":"var(--f7-chip-text-color)",class:"transaction-edit-tag",text:bl(de),key:de},{media:l(()=>[t(ml,{f7:"number"})]),_:1},8,["text"]))),128))]),_:1})):!e(v).tagIds||!e(v).tagIds.length?(a(),i(wl,{key:1,class:"margin-top-half no-padding no-margin"},{default:l(()=>[t(pl,{class:"transaction-edit-tag",text:e(F)("None")},null,8,["text"])]),_:1})):r("",!0)]),default:l(()=>[t(Vn,{"allow-add-new-tag":!0,"enable-filter":!0,show:rt.value,"onUpdate:show":y[48]||(y[48]=de=>rt.value=de),modelValue:e(v).tagIds,"onUpdate:modelValue":y[49]||(y[49]=de=>e(v).tagIds=de)},null,8,["show","modelValue"])]),_:1},8,["class","header"]),Wt.value||e(v).pictures&&e(v).pictures.length>0?(a(),i(dt,{key:12,link:"#","no-chevron":"",header:e(F)("Pictures")},{footer:l(()=>[t(wl,{class:R(["margin-top-half no-padding no-margin",{readonly:e(U)||e(I)||xe.value}])},{default:l(()=>[s("swiper-container",Lp,[(a(!0),$(ke,null,Te(e(v).pictures,(de,Nt)=>(a(),$("swiper-slide",{class:"transaction-picture-container",key:Nt,onClick:Na=>An(de)},[s("div",Op,[e(d)===e(Ne).Add||e(d)===e(Ne).Edit?(a(),$("div",zp,[de.pictureId!==xe.value?(a(),i(ml,{key:0,class:"picture-control-icon picture-remove-icon",f7:"trash"})):r("",!0),de.pictureId===xe.value?(a(),i(vn,{key:1,color:"white",size:28})):r("",!0)])):r("",!0),s("img",{alt:"picture",src:e(Je)(de)},null,8,Yp)])],8,Rp))),128)),e(se)?(a(),$("swiper-slide",{key:0,onClick:un},[s("div",Hp,[e(I)?r("",!0):(a(),i(ml,{key:0,class:"picture-control-icon",f7:"plus"})),e(I)?(a(),i(vn,{key:1,size:28})):r("",!0)])])):r("",!0)])]),_:1},8,["class"])]),_:1},8,["header"])):r("",!0),ut(t(ct,{type:"textarea",class:R(["transaction-edit-comment",{readonly:e(d)===e(Ne).View}]),style:{height:"auto"},label:e(F)("Description"),placeholder:e(d)!==e(Ne).View?e(F)("Your transaction description (optional)"):"",value:e(v).comment,"onUpdate:value":y[51]||(y[51]=de=>e(v).comment=de)},null,8,["class","label","placeholder","value"]),[[Ee]])]),_:1})),t(en,{"close-by-outside-click":"","close-on-escape":"",opened:De.value,"onActions:closed":y[54]||(y[54]=de=>De.value=!1)},{default:l(()=>[t(ll,null,{default:l(()=>[e(d)!==e(Ne).View?(a(),i(Rt,{key:0,onClick:y[52]||(y[52]=de=>zl(!0))},{default:l(()=>[ne(u(e(F)("Update Geographic Location")),1)]),_:1})):r("",!0),e(d)!==e(Ne).View?(a(),i(Rt,{key:1,onClick:Fe},{default:l(()=>[ne(u(e(F)("Clear Geographic Location")),1)]),_:1})):r("",!0)]),_:1}),e(Ss)()?(a(),i(ll,{key:0},{default:l(()=>[t(Rt,{class:R({disabled:!e(v).geoLocation}),onClick:y[53]||(y[53]=de=>Et.value=!0)},{default:l(()=>[ne(u(e(F)("Show on the map")),1)]),_:1},8,["class"])]),_:1})):r("",!0),t(ll,null,{default:l(()=>[t(Rt,{bold:"",close:""},{default:l(()=>[ne(u(e(F)("Cancel")),1)]),_:1})]),_:1})]),_:1},8,["opened"]),t(en,{"close-by-outside-click":"","close-on-escape":"",opened:Oe.value,"onActions:closed":y[65]||(y[65]=de=>Oe.value=!1)},{default:l(()=>[e(d)!==e(Ne).View&&e(v).type===e(We).Transfer?(a(),i(ll,{key:0},{default:l(()=>[t(Rt,{onClick:y[55]||(y[55]=de=>e(Pe)(!0,!1))},{default:l(()=>[ne(u(e(F)("Swap Account")),1)]),_:1}),t(Rt,{onClick:y[56]||(y[56]=de=>e(Pe)(!1,!0))},{default:l(()=>[ne(u(e(F)("Swap Amount")),1)]),_:1}),t(Rt,{onClick:y[57]||(y[57]=de=>e(Pe)(!0,!0))},{default:l(()=>[ne(u(e(F)("Swap Account and Amount")),1)]),_:1})]),_:1})):r("",!0),e(d)!==e(Ne).View?(a(),i(ll,{key:1},{default:l(()=>[e(v).hideAmount?(a(),i(Rt,{key:0,onClick:y[58]||(y[58]=de=>e(v).hideAmount=!1)},{default:l(()=>[ne(u(e(F)("Show Amount")),1)]),_:1})):r("",!0),e(v).hideAmount?r("",!0):(a(),i(Rt,{key:1,onClick:y[59]||(y[59]=de=>e(v).hideAmount=!0)},{default:l(()=>[ne(u(e(F)("Hide Amount")),1)]),_:1}))]),_:1})):r("",!0),e(h)?.type===e(Xe).Transaction&&(e(d)===e(Ne).Add||e(d)===e(Ne).Edit)&&e(xs)()&&!Wt.value?(a(),i(ll,{key:2},{default:l(()=>[t(Rt,{onClick:y[60]||(y[60]=de=>Wt.value=!0)},{default:l(()=>[ne(u(e(F)("Add Picture")),1)]),_:1})]),_:1})):r("",!0),e(h)?.type===e(Xe).Transaction&&e(d)===e(Ne).View&&e(v).type!==e(We).ModifyBalance?(a(),i(ll,{key:3},{default:l(()=>[t(Rt,{onClick:y[61]||(y[61]=de=>Pl(!1,!1))},{default:l(()=>[ne(u(e(F)("Duplicate")),1)]),_:1}),t(Rt,{onClick:y[62]||(y[62]=de=>Pl(!0,!1))},{default:l(()=>[ne(u(e(F)("Duplicate (With Time)")),1)]),_:1}),e(v).geoLocation?(a(),i(Rt,{key:0,onClick:y[63]||(y[63]=de=>Pl(!1,!0))},{default:l(()=>[ne(u(e(F)("Duplicate (With Geographic Location)")),1)]),_:1})):r("",!0),e(v).geoLocation?(a(),i(Rt,{key:1,onClick:y[64]||(y[64]=de=>Pl(!0,!0))},{default:l(()=>[ne(u(e(F)("Duplicate (With Time and Geographic Location)")),1)]),_:1})):r("",!0)]),_:1})):r("",!0),t(ll,null,{default:l(()=>[t(Rt,{bold:"",close:""},{default:l(()=>[ne(u(e(F)("Cancel")),1)]),_:1})]),_:1})]),_:1},8,["opened"]),e(d)!==e(Ne).View?(a(),i(Fn,{key:2,tabbar:"",bottom:""},{default:l(()=>[t(et,{class:R({disabled:e(oe)||e(U)}),onClick:Ol},{default:l(()=>[s("span",qp,u(e(F)(e(Me))),1)]),_:1},8,["class"])]),_:1})):r("",!0),t(Pn,{ref_key:"pictureBrowser",ref:Ct,type:"popup","navbar-of-text":"/",theme:Ft.value?"dark":"light","navbar-show-count":!0,exposition:!1,photos:_e.value,thumbs:zt.value},null,8,["theme","photos","thumbs"]),s("input",{ref_key:"pictureInput",ref:It,type:"file",style:{display:"none"},accept:`${e(Ta)};capture=camera`,onChange:y[66]||(y[66]=de=>Xl(de))},null,40,Wp)]),_:1})}}}),Gp=Re({__name:"AmountFilterPage",props:{f7route:{},f7router:{}},setup(f){const _=f,n=S(""),h=S(0),F=S(0),V=S(!1),k=S(!1),{tt:A,formatAmountToLocalizedNumeralsWithCurrency:C}=ze(),{showToast:P}=nt(),m=Ml(),c=re(()=>d(n.value)),b=re(()=>n.value===gl.GreaterThan.type||n.value===gl.Between.type||n.value===gl.NotBetween.type?A("Minimum Amount"):n.value===gl.LessThan.type?A("Maximum Amount"):A("Amount")),p=re(()=>n.value===gl.Between.type||n.value===gl.NotBetween.type?A("Maximum Amount"):A("Amount"));function d(D){const T=gl.valueOf(D);return T?T.paramCount:0}function x(){const D=_.f7route.query;n.value=D.type||"";let T=0,M=0;if(qn(D.value))try{const w=D.value.split(":"),U=d(w[0]);w.length===2&&U===1?T=parseInt(w[1]):w.length===3&&U===2&&(T=parseInt(w[1]),M=parseInt(w[2]))}catch(w){_l.warn("cannot parse amount from filter value, original value is "+D.value,w)}h.value=T,F.value=M}function E(){const D=_.f7router;let T=n.value;if(c.value===1)T+=":"+h.value;else if(c.value===2){if(F.value<h.value){P("Incorrect amount range");return}T+=":"+h.value+":"+F.value}else{D.back();return}m.updateTransactionListFilter({amountFilter:T})&&m.updateTransactionListInvalidState(!0),D.back()}return x(),(D,T)=>{const M=o("f7-nav-left"),w=o("f7-nav-title"),U=o("f7-link"),I=o("f7-nav-right"),B=o("f7-navbar"),L=o("number-pad-sheet"),v=o("f7-list-item"),N=o("f7-list"),z=o("f7-icon"),K=o("f7-page");return a(),i(K,null,{default:l(()=>[t(B,null,{default:l(()=>[t(M,{"back-link":e(A)("Back")},null,8,["back-link"]),t(w,{title:e(A)("Filter Amount")},null,8,["title"]),t(I,null,{default:l(()=>[t(U,{text:e(A)("Apply"),onClick:E},null,8,["text"])]),_:1})]),_:1}),t(N,{form:"",strong:"",inset:"",dividers:"",class:"margin-vertical"},{default:l(()=>[t(v,{class:"ebk-small-amount",link:"#","no-chevron":"",header:b.value,title:e(C)(h.value),onClick:T[2]||(T[2]=W=>V.value=!0)},{default:l(()=>[t(L,{"min-value":e($l),"max-value":e(Al),show:V.value,"onUpdate:show":T[0]||(T[0]=W=>V.value=W),modelValue:h.value,"onUpdate:modelValue":T[1]||(T[1]=W=>h.value=W)},null,8,["min-value","max-value","show","modelValue"])]),_:1},8,["header","title"]),c.value===2?(a(),i(v,{key:0,class:"ebk-small-amount",link:"#","no-chevron":"",header:p.value,title:e(C)(F.value),onClick:T[5]||(T[5]=W=>k.value=!0)},{default:l(()=>[t(L,{"min-value":e($l),"max-value":e(Al),show:k.value,"onUpdate:show":T[3]||(T[3]=W=>k.value=W),modelValue:F.value,"onUpdate:modelValue":T[4]||(T[4]=W=>F.value=W)},null,8,["min-value","max-value","show","modelValue"])]),_:1},8,["header","title"])):r("",!0)]),_:1}),t(N,{form:"",strong:"",inset:"",dividers:"",class:"margin-vertical"},{default:l(()=>[(a(!0),$(ke,null,Te(e(gl).values(),W=>(a(),i(v,{key:W.type,title:e(A)(W.name),onClick:q=>n.value=W.type},{after:l(()=>[n.value===W.type?(a(),i(z,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"})):r("",!0)]),_:2},1032,["title","onClick"]))),128))]),_:1})]),_:1})}}}),jp={class:"no-margin"},Kp={key:0,class:"card-header-content"},Zp={key:1,class:"card-header-content"},Xp={class:"no-margin"},Qp={key:0,class:"net-assets"},Jp={key:1,class:"net-assets"},em={class:"no-margin"},tm={key:0,class:"account-overview-info"},lm={key:1,class:"account-overview-info"},nm={key:0,class:"skeleton-text"},am={style:{"margin-inline-start":"10px"}},om={class:"nested-list-item-inner display-flex padding-top-half padding-bottom-half"},sm={class:"nested-list-item-title"},im={key:0,class:"item-footer"},rm={key:1,class:"nested-list-item-after"},um={key:0},cm={class:"no-padding"},dm=Re({__name:"ListPage",props:{f7router:{}},setup(f){const _=f,{tt:n,getCurrentLanguageTextDirection:h}=ze(),{showAlert:F,showToast:V,routeBackOnError:k}=nt(),{loading:A,showHidden:C,displayOrderModified:P,showAccountBalance:m,allCategorizedAccountsMap:c,allAccountCount:b,netAssets:p,totalAssets:d,totalLiabilities:x,accountCategoryTotalBalance:E,accountBalance:D}=As(),T=El(),M=ol(),w=S(null),U=S(!1),I=S(null),B=S(null),L=S(null),v=S(""),N=S(!1),z=S(!1),K=S(!1),W=S(!1),q=S(!1),g=S(!1),J=re(()=>h()),te=re(()=>M.getFirstShowingIds(C.value)),Z=re(()=>M.getLastShowingIds(C.value)),Y=re(()=>M.allVisibleAccountsCount>0),H=re(()=>C.value?M.allAvailableAccountsCount<1:M.allVisibleAccountsCount<1);function fe(ce,ae){return M.hasAccount(ce,ae)}function ee(ce){return M.hasVisibleSubAccount(C.value,ce)}function j(ce){return"account_"+ce.id}function O(ce){return!ce||ce.indexOf("account_")!==0?null:ce.substring(8)}function le(){A.value=!0,M.loadAllAccounts({force:!1}).then(()=>{A.value=!1}).catch(ce=>{ce.processed?A.value=!1:(w.value=ce,V(ce.message||ce))})}function ge(ce){if(U.value){ce?.();return}const ae=!!ce;M.loadAllAccounts({force:ae}).then(()=>{ce?.(),ae&&V("Account list has been updated")}).catch(oe=>{ce?.(),oe.processed||V(oe.message||oe)})}function $e(ce){_.f7router.navigate("/account/edit?id="+ce.id)}function se(ce){I.value=ce,z.value=!0}function Ze(ce){if(!ce){F("An error occurred");return}_.f7router.navigate("/account/reconciliation_statements?accountId="+ce.id),z.value=!1,I.value=null}function Me(ce){if(!ce){F("An error occurred");return}_.f7router.navigate("/account/move_all_transactions?fromAccountId="+ce.id),z.value=!1,I.value=null}function Ue(ce){if(!ce){F("An error occurred");return}L.value=ce,v.value="",q.value=!0,z.value=!1,I.value=null}function qe(ce){if(!L.value){F("An error occurred");return}N.value=!0,je(()=>N.value),T.clearAllUserTransactionsOfAccount({accountId:L.value.id,password:ce}).then(()=>{N.value=!1,v.value="",Se(),q.value=!1,V("All transactions in this account has been cleared")}).catch(ae=>{N.value=!1,Se(),ae.processed||V(ae.message||ae)})}function he(ce,ae){je(),M.hideAccount({account:ce,hidden:ae}).then(()=>{Se()}).catch(oe=>{Se(),oe.processed||V(oe.message||oe)})}function X(ce,ae){if(!ce){F("An error occurred");return}if(!ae){B.value=ce,W.value=!0;return}W.value=!1,B.value=null,je(),M.deleteAccount({account:ce,beforeResolve:oe=>{Il(j(ce),oe)}}).then(()=>{Se()}).catch(oe=>{Se(),oe.processed||V(oe.message||oe)})}function Ce(){U.value||(C.value=!0,U.value=!0,P.value=!1)}function pe(){if(!P.value){C.value=!1,U.value=!1;return}g.value=!0,je(),M.updateAccountDisplayOrders().then(()=>{g.value=!1,Se(),C.value=!1,U.value=!1,P.value=!1}).catch(ce=>{g.value=!1,Se(),ce.processed||V(ce.message||ce)})}function we(){_.f7router.navigate("/settings/filter/account?type=accountListTotalAmount")}function be(ce){if(!ce||!ce.el||!ce.el.id){V("Unable to move account");return}const ae=O(ce.el.id);if(!ae){V("Unable to move account");return}M.changeAccountDisplayOrder({accountId:ae,from:ce.from-1,to:ce.to-1,updateListOrder:!0,updateGlobalListOrder:!0}).then(()=>{P.value=!0}).catch(oe=>{V(oe.message||oe)})}function Be(){M.accountListStateInvalid&&!A.value&&ge(),k(_.f7router,w)}return le(),(ce,ae)=>{const oe=o("f7-nav-left"),Pe=o("f7-nav-title"),ve=o("f7-link"),Je=o("f7-nav-right"),ft=o("f7-navbar"),xt=o("f7-icon"),mt=o("f7-card-header"),Vt=o("f7-card"),At=o("f7-list-item"),Pt=o("f7-list"),gt=o("f7-badge"),$t=o("ItemIcon"),Ct=o("f7-swipeout-button"),It=o("f7-swipeout-actions"),it=o("f7-actions-button"),Le=o("f7-actions-group"),xe=o("f7-actions-label"),lt=o("f7-actions"),ie=o("password-input-sheet"),He=o("f7-page");return a(),i(He,{ptr:!U.value,"onPtr:refresh":ge,"onPage:afterin":Be},{default:l(()=>[t(ft,null,{default:l(()=>[t(oe,{"back-link":e(n)("Back")},null,8,["back-link"]),t(Pe,{title:e(n)("Account List")},null,8,["title"]),t(Je,{class:"navbar-compact-icons"},{default:l(()=>[U.value?r("",!0):(a(),i(ve,{key:0,"icon-f7":"ellipsis",class:R({disabled:!e(b)}),onClick:ae[0]||(ae[0]=De=>K.value=!0)},null,8,["class"])),U.value?U.value?(a(),i(ve,{key:2,text:e(n)("Done"),class:R({disabled:g.value}),onClick:pe},null,8,["text","class"])):r("",!0):(a(),i(ve,{key:1,href:"/account/add","icon-f7":"plus"}))]),_:1})]),_:1}),t(Vt,{class:R(["account-overview-card",{"skeleton-text":e(A)}])},{default:l(()=>[t(mt,{class:"display-block",style:{"padding-top":"120px"}},{default:l(()=>[s("p",jp,[e(A)?(a(),$("small",Kp,"Net assets")):e(A)?r("",!0):(a(),$("small",Zp,u(e(n)("Net assets")),1))]),s("p",Xp,[e(A)?(a(),$("span",Qp,"0.00 USD")):e(A)?r("",!0):(a(),$("span",Jp,u(e(p)),1)),t(ve,{class:"margin-inline-start-half",onClick:ae[1]||(ae[1]=De=>m.value=!e(m))},{default:l(()=>[t(xt,{class:"ebk-hide-icon",f7:e(m)?"eye_slash_fill":"eye_fill"},null,8,["f7"])]),_:1})]),s("p",em,[e(A)?(a(),$("small",tm,[...ae[16]||(ae[16]=[s("span",null,"Total assets | Total liabilities",-1)])])):e(A)?r("",!0):(a(),$("small",lm,[s("span",null,u(e(n)("Total assets")),1),s("span",null,u(e(d)),1),ae[17]||(ae[17]=s("span",null,"|",-1)),s("span",null,u(e(n)("Total liabilities")),1),s("span",null,u(e(x)),1)]))])]),_:1})]),_:1},8,["class"]),e(A)?(a(),$("div",nm,[(a(),$(ke,null,Te([1,2,3],De=>t(Pt,{strong:"",inset:"",dividers:"",sortable:"",class:"list-has-group-title account-list margin-vertical",key:De},{default:l(()=>[t(At,{"group-title":"",sortable:!1},{default:l(()=>[...ae[18]||(ae[18]=[s("small",null,[s("span",null,"Account Category"),s("span",{style:{"margin-inline-start":"10px"}},"0.00 USD")],-1)])]),_:1}),(a(!0),$(ke,null,Te(De===1?[1]:[1,2],Oe=>(a(),i(At,{class:"nested-list-item",after:"0.00 USD",link:"#",key:Oe},{media:l(()=>[t(xt,{f7:"app_fill"})]),title:l(()=>[...ae[19]||(ae[19]=[s("div",{class:"display-flex padding-top-half padding-bottom-half"},[s("div",{class:"nested-list-item-title"},[s("span",null,"Account Name")])],-1)])]),_:1}))),128))]),_:2},1024)),64))])):r("",!0),!e(A)&&H.value?(a(),i(Pt,{key:1,strong:"",inset:"",dividers:"",class:"margin-vertical"},{default:l(()=>[t(At,{title:e(n)("No available account")},null,8,["title"])]),_:1})):r("",!0),(a(!0),$(ke,null,Te(e(Da).values(),De=>ut((a(),$("div",{key:De.type},[e(c)[De.type]?(a(),i(Pt,{key:0,strong:"",inset:"",dividers:"",sortable:"",class:"list-has-group-title account-list margin-vertical","sortable-enabled":U.value,"onSortable:sort":be},{default:l(()=>[t(At,{"group-title":"",sortable:!1},{default:l(()=>[s("small",null,[s("span",null,u(e(n)(De.name)),1),s("span",am,u(e(E)(De)),1)])]),_:2},1024),(a(!0),$(ke,null,Te(e(c)[De.type].accounts,Oe=>ut((a(),i(At,{swipeout:"",class:R(["nested-list-item",{"has-child-list-item":Oe.type===e(Ht).MultiSubAccounts.type&&ee(Oe),"actual-first-child":Oe.id===te.value.accounts[De.type],"actual-last-child":Oe.id===Z.value.accounts[De.type]}]),id:j(Oe),after:Oe.type===e(Ht).SingleAccount.type?e(D)(Oe):"",link:U.value?null:"/transaction/list?accountIds="+Oe.id,key:Oe.id,onTaphold:ae[2]||(ae[2]=at=>Ce())},Gn({title:l(()=>[s("div",om,[Oe.type===e(Ht).MultiSubAccounts.type&&ee(Oe)?(a(),i($t,{key:0,"icon-type":"account","icon-id":Oe.icon,color:Oe.color},{default:l(()=>[Oe.hidden?(a(),i(gt,{key:0,color:"gray",class:"right-bottom-icon"},{default:l(()=>[t(xt,{f7:"eye_slash_fill"})]),_:1})):r("",!0)]),_:2},1032,["icon-id","color"])):r("",!0),s("div",sm,[s("span",null,u(Oe.name),1),Oe.comment?(a(),$("div",im,u(Oe.comment),1)):r("",!0)]),Oe.type===e(Ht).MultiSubAccounts.type?(a(),$("div",rm,[s("span",null,u(e(D)(Oe)),1)])):r("",!0)]),Oe.type===e(Ht).MultiSubAccounts.type?(a(),$("li",um,[s("ul",cm,[(a(!0),$(ke,null,Te(Oe.subAccounts,at=>ut((a(),i(At,{class:R(["no-sortable nested-list-item-child",{"actual-first-child":at.id===te.value.subAccounts[Oe.id],"actual-last-child":at.id===Z.value.subAccounts[Oe.id]}]),id:j(at),title:at.name,footer:at.comment,after:e(D)(Oe,at.id),link:U.value?null:"/transaction/list?accountIds="+at.id,key:at.id},{media:l(()=>[t($t,{"icon-type":"account","icon-id":at.icon,color:at.color},{default:l(()=>[at.hidden?(a(),i(gt,{key:0,color:"gray",class:"right-bottom-icon"},{default:l(()=>[t(xt,{f7:"eye_slash_fill"})]),_:1})):r("",!0)]),_:2},1032,["icon-id","color"])]),_:2},1032,["class","id","title","footer","after","link"])),[[vt,e(C)||!at.hidden]])),128))])])):r("",!0)]),default:l(()=>[U.value?(a(),i(It,{key:0,left:J.value===e(wt).LTR,right:J.value===e(wt).RTL},{default:l(()=>[t(Ct,{color:Oe.hidden?"blue":"gray",class:"padding-horizontal",overswipe:"",close:"",onClick:at=>he(Oe,!Oe.hidden)},{default:l(()=>[t(xt,{f7:Oe.hidden?"eye":"eye_slash"},null,8,["f7"])]),_:2},1032,["color","onClick"])]),_:2},1032,["left","right"])):r("",!0),U.value?r("",!0):(a(),i(It,{key:1,left:J.value===e(wt).RTL,right:J.value===e(wt).LTR},{default:l(()=>[t(Ct,{color:"orange",close:"",text:e(n)("Edit"),onClick:at=>$e(Oe)},null,8,["text","onClick"]),t(Ct,{color:"primary",close:"",text:e(n)("More"),onClick:at=>se(Oe)},null,8,["text","onClick"]),t(Ct,{color:"red",class:"padding-horizontal",onClick:at=>X(Oe,!1)},{default:l(()=>[t(xt,{f7:"trash"})]),_:1},8,["onClick"])]),_:2},1032,["left","right"]))]),_:2},[Oe.type!==e(Ht).MultiSubAccounts.type||!ee(Oe)?{name:"media",fn:l(()=>[t($t,{"icon-type":"account","icon-id":Oe.icon,color:Oe.color},{default:l(()=>[Oe.hidden?(a(),i(gt,{key:0,color:"gray",class:"right-bottom-icon"},{default:l(()=>[t(xt,{f7:"eye_slash_fill"})]),_:1})):r("",!0)]),_:2},1032,["icon-id","color"])]),key:"0"}:void 0]),1032,["id","class","after","link"])),[[vt,e(C)||!Oe.hidden]])),128))]),_:2},1032,["sortable-enabled"])):r("",!0)])),[[vt,!e(A)&&(e(C)&&fe(De,!1)||fe(De,!0))]])),128)),t(lt,{"close-by-outside-click":"","close-on-escape":"",opened:z.value,"onActions:closed":ae[6]||(ae[6]=De=>z.value=!1)},{default:l(()=>[I.value&&I.value.type===e(Ht).SingleAccount.type?(a(),i(Le,{key:0},{default:l(()=>[t(it,{onClick:ae[3]||(ae[3]=De=>Ze(I.value))},{default:l(()=>[ne(u(e(n)("Reconciliation Statement")),1)]),_:1})]),_:1})):r("",!0),I.value&&I.value.type===e(Ht).SingleAccount.type?(a(),i(Le,{key:1},{default:l(()=>[t(it,{onClick:ae[4]||(ae[4]=De=>Me(I.value))},{default:l(()=>[ne(u(e(n)("Move All Transactions")),1)]),_:1}),t(it,{color:"red",onClick:ae[5]||(ae[5]=De=>Ue(I.value))},{default:l(()=>[ne(u(e(n)("Clear All Transactions")),1)]),_:1})]),_:1})):r("",!0),I.value&&I.value.type===e(Ht).MultiSubAccounts.type?(a(!0),$(ke,{key:2},Te(I.value.subAccounts,De=>ut((a(),i(Le,{key:De.id},{default:l(()=>[t(xe,null,{default:l(()=>[ne(u(De.name),1)]),_:2},1024),t(it,{onClick:Oe=>Ze(De)},{default:l(()=>[ne(u(e(n)("Reconciliation Statement")),1)]),_:1},8,["onClick"]),t(it,{onClick:Oe=>Me(De)},{default:l(()=>[ne(u(e(n)("Move All Transactions")),1)]),_:1},8,["onClick"]),t(it,{color:"red",onClick:Oe=>Ue(De)},{default:l(()=>[ne(u(e(n)("Clear All Transactions")),1)]),_:1},8,["onClick"])]),_:2},1024)),[[vt,e(C)||!De.hidden]])),128)):r("",!0),t(Le,null,{default:l(()=>[t(it,{bold:"",close:""},{default:l(()=>[ne(u(e(n)("Cancel")),1)]),_:1})]),_:1})]),_:1},8,["opened"]),t(lt,{"close-by-outside-click":"","close-on-escape":"",opened:K.value,"onActions:closed":ae[11]||(ae[11]=De=>K.value=!1)},{default:l(()=>[t(Le,null,{default:l(()=>[t(it,{onClick:ae[7]||(ae[7]=De=>Ce())},{default:l(()=>[ne(u(e(n)("Sort")),1)]),_:1}),e(C)?r("",!0):(a(),i(it,{key:0,onClick:ae[8]||(ae[8]=De=>C.value=!0)},{default:l(()=>[ne(u(e(n)("Show Hidden Accounts")),1)]),_:1})),e(C)?(a(),i(it,{key:1,onClick:ae[9]||(ae[9]=De=>C.value=!1)},{default:l(()=>[ne(u(e(n)("Hide Hidden Accounts")),1)]),_:1})):r("",!0)]),_:1}),Y.value?(a(),i(Le,{key:0},{default:l(()=>[t(it,{onClick:ae[10]||(ae[10]=De=>we())},{default:l(()=>[ne(u(e(n)("Set Accounts Included in Total")),1)]),_:1})]),_:1})):r("",!0),t(Le,null,{default:l(()=>[t(it,{bold:"",close:""},{default:l(()=>[ne(u(e(n)("Cancel")),1)]),_:1})]),_:1})]),_:1},8,["opened"]),t(lt,{"close-by-outside-click":"","close-on-escape":"",opened:W.value,"onActions:closed":ae[13]||(ae[13]=De=>W.value=!1)},{default:l(()=>[t(Le,null,{default:l(()=>[t(xe,null,{default:l(()=>[ne(u(e(n)("Are you sure you want to delete this account?")),1)]),_:1}),t(it,{color:"red",onClick:ae[12]||(ae[12]=De=>X(B.value,!0))},{default:l(()=>[ne(u(e(n)("Delete")),1)]),_:1})]),_:1}),t(Le,null,{default:l(()=>[t(it,{bold:"",close:""},{default:l(()=>[ne(u(e(n)("Cancel")),1)]),_:1})]),_:1})]),_:1},8,["opened"]),t(ie,{title:e(n)("Are you sure you want to clear all transactions?"),hint:e(n)("format.misc.clearTransactionsInAccountTip",{account:L.value?.name??"undefined"}),"confirm-disabled":N.value,"cancel-disabled":N.value,color:"red",show:q.value,"onUpdate:show":ae[14]||(ae[14]=De=>q.value=De),modelValue:v.value,"onUpdate:modelValue":ae[15]||(ae[15]=De=>v.value=De),"onPassword:confirm":qe},null,8,["title","hint","confirm-disabled","cancel-disabled","show","modelValue"])]),_:1},8,["ptr"])}}}),fm={class:"grid grid-cols-2"},pm={class:"list-item-subitem no-chevron"},mm={class:"item-link",href:"#"},vm={class:"item-content"},gm={class:"item-inner"},ym={class:"item-title"},hm={class:"list-item-custom-title no-padding"},_m={class:"list-item-subitem no-chevron"},km={class:"item-link",href:"#"},bm={class:"item-content"},wm={class:"item-inner"},Tm={class:"item-title"},Cm={class:"list-item-custom-title no-padding"},Sm={class:"grid grid-cols-2"},xm={class:"list-item-subitem no-chevron"},Am={class:"item-content"},$m={class:"item-inner"},Dm={class:"item-header"},Im={class:"item-title"},Vm={class:"list-item-custom-title no-padding"},Fm={class:"list-item-subitem no-chevron"},Pm={class:"item-content"},Um={class:"item-inner"},Bm={class:"item-header"},Nm={class:"item-title"},Mm={class:"list-item-custom-title no-padding"},Em={class:"no-padding no-margin"},Lm={class:"smaller"},Rm={class:"account-edit-balancetime-title"},Om={class:"grid grid-cols-2"},zm={class:"list-item-subitem no-chevron"},Ym={class:"item-content"},Hm={class:"item-inner"},qm={class:"item-header"},Wm={class:"item-title"},Gm={class:"list-item-custom-title no-padding"},jm={class:"list-item-subitem no-chevron"},Km={class:"item-content"},Zm={class:"item-inner"},Xm={class:"item-header"},Qm={class:"item-title"},Jm={class:"list-item-custom-title no-padding"},ev={class:"grid grid-cols-2"},tv={class:"list-item-subitem no-chevron"},lv=["onClick"],nv={class:"item-content"},av={class:"item-inner"},ov={class:"item-header"},sv={class:"item-title"},iv={class:"list-item-custom-title no-padding"},rv={class:"list-item-subitem no-chevron"},uv=["onClick"],cv={class:"item-content"},dv={class:"item-inner"},fv={class:"item-header"},pv={class:"item-title"},mv={class:"list-item-custom-title no-padding"},vv={class:"no-padding no-margin"},gv={class:"smaller"},yv=["onClick"],hv={class:"account-edit-balancetime-title"},_v=["onClick"],kv=["onClick"],ga=Re({__name:"EditPage",props:{f7route:{},f7router:{}},setup(f){const _=f,{tt:n,getAllCurrencies:h,getCurrencyName:F,formatUnixTimeToLongDate:V,formatUnixTimeToLongTime:k,formatAmountToLocalizedNumeralsWithCurrency:A}=ze(),{showAlert:C,showToast:P,routeBackOnError:m}=nt(),{editAccountId:c,clientSessionId:b,loading:p,submitting:d,account:x,subAccounts:E,title:D,saveButtonTitle:T,inputEmptyProblemMessage:M,inputIsEmpty:w,allAccountCategories:U,allAccountTypes:I,allAvailableMonthDays:B,isAccountSupportCreditCardStatementDate:L,getAccountCreditCardStatementDate:v,isNewAccount:N,addSubAccount:z,setAccount:K}=$s(),W=ol(),q={showIconSelectionSheet:!1,showColorSelectionSheet:!1,showCurrencyPopup:!1,showCreditCardStatementDatePopup:!1,showBalanceSheet:!1,showBalanceDateTimeSheet:!1,balanceDateTimeSheetMode:"time"},g=S(Object.assign({},q)),J=S([]),te=S(null),Z=S(null),Y=S(!1),H=S(!1),fe=S(!1),ee=S(!1),j=re(()=>h());function O(he){const X=x.value.isLiability?-he.balance:he.balance;return A(X,he.currency)}function le(he){return Kl(he.balanceTime)?V(Sl(he.balanceTime,Bl(),cl())):""}function ge(he){return Kl(he.balanceTime)?k(Sl(he.balanceTime,Bl(),cl())):""}function $e(){const he=_.f7route.query;b.value=sn(),he.id?(p.value=!0,c.value=he.id,W.getAccount({accountId:c.value}).then(X=>{K(X),J.value=[];for(let Ce=0;Ce<E.value.length;Ce++)J.value.push(Object.assign({},q));p.value=!1}).catch(X=>{X.processed?p.value=!1:(Z.value=X,P(X.message||X))})):p.value=!1}function se(){const he=_.f7router,X=M.value;if(X){C(X);return}d.value=!0,je(()=>d.value),W.saveAccount({account:x.value,subAccounts:E.value,isEdit:!!c.value,clientSessionId:b.value}).then(()=>{d.value=!1,Se(),c.value?P("You have saved this account"):P("You have added a new account"),he.back()}).catch(Ce=>{d.value=!1,Se(),Ce.processed||P(Ce.message||Ce)})}function Ze(){z()&&J.value.push(Object.assign({},q))}function Me(he,X){if(!he){C("An error occurred");return}if(!X){te.value=he,ee.value=!0;return}ee.value=!1,te.value=null;for(const[Ce,pe]of an(E.value))Ce===he&&(E.value.splice(pe,1),J.value.splice(pe,1))}function Ue(he,X){he.balanceDateTimeSheetMode=X,he.showBalanceDateTimeSheet=!0}function qe(){m(_.f7router,Z)}return Dl(()=>x.value.type,()=>{E.value.length<1&&Ze()}),$e(),(he,X)=>{const Ce=o("f7-nav-left"),pe=o("f7-nav-title"),we=o("f7-link"),be=o("f7-nav-right"),Be=o("f7-navbar"),ce=o("f7-list-item"),ae=o("f7-list"),oe=o("list-item-selection-sheet"),Pe=o("f7-list-input"),ve=o("f7-icon"),Je=o("ItemIcon"),ft=o("icon-selection-sheet"),xt=o("color-selection-sheet"),mt=o("list-item-selection-popup"),Vt=o("number-pad-sheet"),At=o("date-time-selection-sheet"),Pt=o("f7-toggle"),gt=o("f7-button"),$t=o("f7-block"),Ct=o("f7-actions-button"),It=o("f7-actions-group"),it=o("f7-actions"),Le=o("f7-actions-label"),xe=o("f7-page"),lt=jn("textarea-auto-size");return a(),i(xe,{"onPage:afterin":qe},{default:l(()=>[t(Be,null,{default:l(()=>[t(Ce,{"back-link":e(n)("Back")},null,8,["back-link"]),t(pe,{title:e(n)(e(D))},null,8,["title"]),t(be,null,{default:l(()=>[t(we,{"icon-f7":"ellipsis",class:R({disabled:e(x).type!==e(Ht).MultiSubAccounts.type}),onClick:X[0]||(X[0]=ie=>fe.value=!0)},null,8,["class"]),t(we,{class:R({disabled:e(w)||e(d)}),text:e(n)(e(T)),onClick:se},null,8,["class","text"])]),_:1})]),_:1}),e(p)?(a(),i(ae,{key:0,strong:"",inset:"",dividers:"",class:"margin-vertical skeleton-text"},{default:l(()=>[t(ce,{class:"list-item-with-header-and-title",header:"Account Category",title:"Category"}),t(ce,{class:"list-item-with-header-and-title",header:"Account Type",title:"Account Type"})]),_:1})):e(p)?r("",!0):(a(),i(ae,{key:1,form:"",strong:"",inset:"",dividers:"",class:"margin-vertical"},{default:l(()=>[t(ce,{link:"#","no-chevron":"",class:"list-item-with-header-and-title",header:e(n)("Account Category"),title:e(kt)(e(U),e(x).category),onClick:X[3]||(X[3]=ie=>Y.value=!0)},{default:l(()=>[t(oe,{"value-type":"item","key-field":"type","value-field":"type","title-field":"displayName","icon-field":"defaultAccountIconId","icon-type":"account",items:e(U),show:Y.value,"onUpdate:show":X[1]||(X[1]=ie=>Y.value=ie),modelValue:e(x).category,"onUpdate:modelValue":X[2]||(X[2]=ie=>e(x).category=ie)},null,8,["items","show","modelValue"])]),_:1},8,["header","title"]),t(ce,{link:"#","no-chevron":"",class:R(["list-item-with-header-and-title",{disabled:e(c)}]),header:e(n)("Account Type"),title:e(kt)(e(I),e(x).type),onClick:X[6]||(X[6]=ie=>H.value=!0)},{default:l(()=>[t(oe,{"value-type":"item","key-field":"type","value-field":"type","title-field":"displayName",items:e(I),show:H.value,"onUpdate:show":X[4]||(X[4]=ie=>H.value=ie),modelValue:e(x).type,"onUpdate:modelValue":X[5]||(X[5]=ie=>e(x).type=ie)},null,8,["items","show","modelValue"])]),_:1},8,["class","header","title"])]),_:1})),e(p)?(a(),i(ae,{key:2,strong:"",inset:"",dividers:"",class:"margin-vertical skeleton-text"},{default:l(()=>[t(Pe,{label:"Account Name",placeholder:"Your account name"}),t(ce,{class:"list-item-with-header-and-title list-item-with-multi-item"},{default:l(()=>[s("div",fm,[s("div",pm,[s("a",mm,[s("div",vm,[s("div",gm,[X[45]||(X[45]=s("div",{class:"item-header"},[s("span",null,"Account Icon")],-1)),s("div",ym,[s("div",hm,[t(ve,{f7:"app_fill"})])])])])])]),s("div",_m,[s("a",km,[s("div",bm,[s("div",wm,[X[46]||(X[46]=s("div",{class:"item-header"},[s("span",null,"Account Color")],-1)),s("div",Tm,[s("div",Cm,[t(ve,{f7:"app_fill"})])])])])])])])]),_:1}),t(ce,{class:"list-item-with-header-and-title list-item-no-item-after",header:"Currency",title:"Currency",link:e(c)?null:"#"},null,8,["link"]),t(ce,{class:"list-item-with-header-and-title",header:"Account Balance",title:"Balance"}),t(ce,{class:"list-item-toggle",header:"Visible",after:"True"}),t(Pe,{label:"Description",type:"textarea",placeholder:"Your account description (optional)"})]),_:1})):!e(p)&&e(x).type===e(Ht).SingleAccount.type?(a(),i(ae,{key:3,form:"",strong:"",inset:"",dividers:"",class:"margin-vertical"},{default:l(()=>[t(Pe,{type:"text","clear-button":"",label:e(n)("Account Name"),placeholder:e(n)("Your account name"),value:e(x).name,"onUpdate:value":X[7]||(X[7]=ie=>e(x).name=ie)},null,8,["label","placeholder","value"]),t(ce,{class:"list-item-with-header-and-title list-item-with-multi-item"},{default:l(()=>[s("div",Sm,[s("div",xm,[s("a",{class:"item-link",href:"#",onClick:X[8]||(X[8]=ie=>g.value.showIconSelectionSheet=!0)},[s("div",Am,[s("div",$m,[s("div",Dm,[s("span",null,u(e(n)("Account Icon")),1)]),s("div",Im,[s("div",Vm,[t(Je,{"icon-type":"account","icon-id":e(x).icon,color:e(x).color},null,8,["icon-id","color"])])])])])]),t(ft,{"all-icon-infos":e(Ln),color:e(x).color,show:g.value.showIconSelectionSheet,"onUpdate:show":X[9]||(X[9]=ie=>g.value.showIconSelectionSheet=ie),modelValue:e(x).icon,"onUpdate:modelValue":X[10]||(X[10]=ie=>e(x).icon=ie)},null,8,["all-icon-infos","color","show","modelValue"])]),s("div",Fm,[s("a",{class:"item-link",href:"#",onClick:X[11]||(X[11]=ie=>g.value.showColorSelectionSheet=!0)},[s("div",Pm,[s("div",Um,[s("div",Bm,[s("span",null,u(e(n)("Account Color")),1)]),s("div",Nm,[s("div",Mm,[t(Je,{"icon-type":"fixed-f7","icon-id":"app_fill",color:e(x).color},null,8,["color"])])])])])]),t(xt,{"all-color-infos":e(Rn),show:g.value.showColorSelectionSheet,"onUpdate:show":X[12]||(X[12]=ie=>g.value.showColorSelectionSheet=ie),modelValue:e(x).color,"onUpdate:modelValue":X[13]||(X[13]=ie=>e(x).color=ie)},null,8,["all-color-infos","show","modelValue"])])])]),_:1}),t(ce,{class:R(["list-item-with-header-and-title list-item-no-item-after",{disabled:e(c)}]),link:"#",header:e(n)("Currency"),"no-chevron":!!e(c),onClick:X[16]||(X[16]=ie=>g.value.showCurrencyPopup=!0)},{title:l(()=>[s("div",Em,[s("span",null,u(e(F)(e(x).currency))+"",1),s("small",Lm,u(e(x).currency),1)])]),default:l(()=>[t(mt,{"value-type":"item","key-field":"currencyCode","value-field":"currencyCode","title-field":"displayName","after-field":"currencyCode",title:e(n)("Currency Name"),"enable-filter":!0,"filter-placeholder":e(n)("Currency"),"filter-no-items-text":e(n)("No results"),items:j.value,show:g.value.showCurrencyPopup,"onUpdate:show":X[14]||(X[14]=ie=>g.value.showCurrencyPopup=ie),modelValue:e(x).currency,"onUpdate:modelValue":X[15]||(X[15]=ie=>e(x).currency=ie)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["class","header","no-chevron"]),e(L)?(a(),i(ce,{key:0,link:"#",class:"list-item-with-header-and-title list-item-no-item-after",header:e(n)("Statement Date"),title:e(v)(e(x).creditCardStatementDate),onClick:X[19]||(X[19]=ie=>g.value.showCreditCardStatementDatePopup=!0)},{default:l(()=>[t(mt,{"value-type":"item","key-field":"day","value-field":"day","title-field":"displayName",title:e(n)("Statement Date"),"enable-filter":!0,"filter-placeholder":e(n)("Statement Date"),"filter-no-items-text":e(n)("No results"),items:e(B),show:g.value.showCreditCardStatementDatePopup,"onUpdate:show":X[17]||(X[17]=ie=>g.value.showCreditCardStatementDatePopup=ie),modelValue:e(x).creditCardStatementDate,"onUpdate:modelValue":X[18]||(X[18]=ie=>e(x).creditCardStatementDate=ie)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["header","title"])):r("",!0),t(ce,{link:"#","no-chevron":"",class:R(["list-item-with-header-and-title",{disabled:e(c)}]),header:e(x).isLiability?e(n)("Account Outstanding Balance"):e(n)("Account Balance"),title:O(e(x)),onClick:X[22]||(X[22]=ie=>g.value.showBalanceSheet=!0)},{default:l(()=>[t(Vt,{"min-value":e($l),"max-value":e(Al),currency:e(x).currency,"flip-negative":e(x).isLiability,show:g.value.showBalanceSheet,"onUpdate:show":X[20]||(X[20]=ie=>g.value.showBalanceSheet=ie),modelValue:e(x).balance,"onUpdate:modelValue":X[21]||(X[21]=ie=>e(x).balance=ie)},null,8,["min-value","max-value","currency","flip-negative","show","modelValue"])]),_:1},8,["class","header","title"]),e(c)?r("",!0):ut((a(),i(ce,{key:1,class:"account-edit-balancetime list-item-with-header-and-title",link:"#","no-chevron":""},{header:l(()=>[s("div",{class:"account-edit-balancetime-header",onClick:X[23]||(X[23]=ie=>Ue(g.value,"time"))},u(e(n)("Balance Time")),1)]),title:l(()=>[s("div",Rm,[s("div",{onClick:X[24]||(X[24]=ie=>Ue(g.value,"date"))},u(le(e(x))),1),X[47]||(X[47]=ne("",-1)),s("div",{class:"account-edit-balancetime-time",onClick:X[25]||(X[25]=ie=>Ue(g.value,"time"))},u(ge(e(x))),1)])]),default:l(()=>[t(At,{"init-mode":g.value.balanceDateTimeSheetMode,show:g.value.showBalanceDateTimeSheet,"onUpdate:show":X[26]||(X[26]=ie=>g.value.showBalanceDateTimeSheet=ie),modelValue:e(x).balanceTime,"onUpdate:modelValue":X[27]||(X[27]=ie=>e(x).balanceTime=ie)},null,8,["init-mode","show","modelValue"])]),_:1},512)),[[vt,e(x).balance]]),e(c)?(a(),i(ce,{key:2,title:e(n)("Visible")},{default:l(()=>[t(Pt,{checked:e(x).visible,"onToggle:change":X[28]||(X[28]=ie=>e(x).visible=ie)},null,8,["checked"])]),_:1},8,["title"])):r("",!0),ut(t(Pe,{type:"textarea",style:{height:"auto"},label:e(n)("Description"),placeholder:e(n)("Your account description (optional)"),value:e(x).comment,"onUpdate:value":X[29]||(X[29]=ie=>e(x).comment=ie)},null,8,["label","placeholder","value"]),[[lt]])]),_:1})):!e(p)&&e(x).type===e(Ht).MultiSubAccounts.type?(a(),i(ae,{key:4,form:"",strong:"",inset:"",dividers:"",class:"margin-vertical"},{default:l(()=>[t(Pe,{type:"text","clear-button":"",label:e(n)("Account Name"),placeholder:e(n)("Your account name"),value:e(x).name,"onUpdate:value":X[30]||(X[30]=ie=>e(x).name=ie)},null,8,["label","placeholder","value"]),t(ce,{class:"list-item-with-header-and-title list-item-with-multi-item"},{default:l(()=>[s("div",Om,[s("div",zm,[s("a",{class:"item-link",href:"#",onClick:X[31]||(X[31]=ie=>g.value.showIconSelectionSheet=!0)},[s("div",Ym,[s("div",Hm,[s("div",qm,[s("span",null,u(e(n)("Account Icon")),1)]),s("div",Wm,[s("div",Gm,[t(Je,{"icon-type":"account","icon-id":e(x).icon,color:e(x).color},null,8,["icon-id","color"])])])])])]),t(ft,{"all-icon-infos":e(Ln),color:e(x).color,show:g.value.showIconSelectionSheet,"onUpdate:show":X[32]||(X[32]=ie=>g.value.showIconSelectionSheet=ie),modelValue:e(x).icon,"onUpdate:modelValue":X[33]||(X[33]=ie=>e(x).icon=ie)},null,8,["all-icon-infos","color","show","modelValue"])]),s("div",jm,[s("a",{class:"item-link",href:"#",onClick:X[34]||(X[34]=ie=>g.value.showColorSelectionSheet=!0)},[s("div",Km,[s("div",Zm,[s("div",Xm,[s("span",null,u(e(n)("Account Color")),1)]),s("div",Qm,[s("div",Jm,[t(Je,{"icon-type":"fixed-f7","icon-id":"app_fill",color:e(x).color},null,8,["color"])])])])])]),t(xt,{"all-color-infos":e(Rn),show:g.value.showColorSelectionSheet,"onUpdate:show":X[35]||(X[35]=ie=>g.value.showColorSelectionSheet=ie),modelValue:e(x).color,"onUpdate:modelValue":X[36]||(X[36]=ie=>e(x).color=ie)},null,8,["all-color-infos","show","modelValue"])])])]),_:1}),e(L)?(a(),i(ce,{key:0,link:"#",class:"list-item-with-header-and-title list-item-no-item-after",header:e(n)("Statement Date"),title:e(v)(e(x).creditCardStatementDate),onClick:X[39]||(X[39]=ie=>g.value.showCreditCardStatementDatePopup=!0)},{default:l(()=>[t(mt,{"value-type":"item","key-field":"day","value-field":"day","title-field":"displayName",title:e(n)("Statement Date"),"enable-filter":!0,"filter-placeholder":e(n)("Statement Date"),"filter-no-items-text":e(n)("No results"),items:e(B),show:g.value.showCreditCardStatementDatePopup,"onUpdate:show":X[37]||(X[37]=ie=>g.value.showCreditCardStatementDatePopup=ie),modelValue:e(x).creditCardStatementDate,"onUpdate:modelValue":X[38]||(X[38]=ie=>e(x).creditCardStatementDate=ie)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["header","title"])):r("",!0),e(c)?(a(),i(ce,{key:1,title:e(n)("Visible")},{default:l(()=>[t(Pt,{checked:e(x).visible,"onToggle:change":X[40]||(X[40]=ie=>e(x).visible=ie)},null,8,["checked"])]),_:1},8,["title"])):r("",!0),ut(t(Pe,{type:"textarea",style:{height:"auto"},label:e(n)("Description"),placeholder:e(n)("Your account description (optional)"),value:e(x).comment,"onUpdate:value":X[41]||(X[41]=ie=>e(x).comment=ie)},null,8,["label","placeholder","value"]),[[lt]])]),_:1})):r("",!0),!e(p)&&e(x).type===e(Ht).MultiSubAccounts.type?(a(),i($t,{key:5,class:"no-padding no-margin"},{default:l(()=>[(a(!0),$(ke,null,Te(e(E),(ie,He)=>(a(),i(ae,{strong:"",inset:"",dividers:"",class:"subaccount-edit-list margin-vertical",key:He},{default:l(()=>[t(ce,{"group-title":""},{default:l(()=>[s("small",null,u(e(n)("Sub Account")+" #"+(He+1)),1),t(gt,{rasied:"",fill:"",class:"subaccount-delete-button",color:"red","icon-f7":"trash","icon-size":"16px",tooltip:e(n)("Remove Sub-account"),onClick:De=>Me(ie,!1)},null,8,["tooltip","onClick"])]),_:2},1024),t(Pe,{type:"text","clear-button":"",label:e(n)("Sub-account Name"),placeholder:e(n)("Your sub-account name"),value:ie.name,"onUpdate:value":De=>ie.name=De},null,8,["label","placeholder","value","onUpdate:value"]),t(ce,{class:"list-item-with-header-and-title list-item-with-multi-item"},{default:l(()=>[s("div",ev,[s("div",tv,[s("a",{class:"item-link",href:"#",onClick:De=>J.value[He].showIconSelectionSheet=!0},[s("div",nv,[s("div",av,[s("div",ov,[s("span",null,u(e(n)("Sub-account Icon")),1)]),s("div",sv,[s("div",iv,[t(Je,{"icon-type":"account","icon-id":ie.icon,color:ie.color},null,8,["icon-id","color"])])])])])],8,lv),t(ft,{"all-icon-infos":e(Ln),color:ie.color,show:J.value[He].showIconSelectionSheet,"onUpdate:show":De=>J.value[He].showIconSelectionSheet=De,modelValue:ie.icon,"onUpdate:modelValue":De=>ie.icon=De},null,8,["all-icon-infos","color","show","onUpdate:show","modelValue","onUpdate:modelValue"])]),s("div",rv,[s("a",{class:"item-link",href:"#",onClick:De=>J.value[He].showColorSelectionSheet=!0},[s("div",cv,[s("div",dv,[s("div",fv,[s("span",null,u(e(n)("Sub-account Color")),1)]),s("div",pv,[s("div",mv,[t(Je,{"icon-type":"fixed-f7","icon-id":"app_fill",color:ie.color},null,8,["color"])])])])])],8,uv),t(xt,{"all-color-infos":e(Rn),show:J.value[He].showColorSelectionSheet,"onUpdate:show":De=>J.value[He].showColorSelectionSheet=De,modelValue:ie.color,"onUpdate:modelValue":De=>ie.color=De},null,8,["all-color-infos","show","onUpdate:show","modelValue","onUpdate:modelValue"])])])]),_:2},1024),t(ce,{class:R(["list-item-with-header-and-title list-item-no-item-after",{disabled:e(c)&&!e(N)(ie)}]),link:"#",header:e(n)("Currency"),"no-chevron":!!e(c)&&!e(N)(ie),onClick:De=>J.value[He].showCurrencyPopup=!0},{title:l(()=>[s("div",vv,[s("span",null,u(e(F)(ie.currency))+"",1),s("small",gv,u(ie.currency),1)])]),default:l(()=>[t(mt,{"value-type":"item","key-field":"currencyCode","value-field":"currencyCode","title-field":"displayName","after-field":"currencyCode",title:e(n)("Currency Name"),"enable-filter":!0,"filter-placeholder":e(n)("Currency"),"filter-no-items-text":e(n)("No results"),items:j.value,show:J.value[He].showCurrencyPopup,"onUpdate:show":De=>J.value[He].showCurrencyPopup=De,modelValue:ie.currency,"onUpdate:modelValue":De=>ie.currency=De},null,8,["title","filter-placeholder","filter-no-items-text","items","show","onUpdate:show","modelValue","onUpdate:modelValue"])]),_:2},1032,["class","header","no-chevron","onClick"]),t(ce,{link:"#","no-chevron":"",class:R(["list-item-with-header-and-title",{disabled:e(c)&&!e(N)(ie)}]),header:e(x).isLiability?e(n)("Sub-account Outstanding Balance"):e(n)("Sub-account Balance"),title:O(ie),onClick:De=>J.value[He].showBalanceSheet=!0},{default:l(()=>[t(Vt,{"min-value":e($l),"max-value":e(Al),currency:ie.currency,"flip-negative":e(x).isLiability,show:J.value[He].showBalanceSheet,"onUpdate:show":De=>J.value[He].showBalanceSheet=De,modelValue:ie.balance,"onUpdate:modelValue":De=>ie.balance=De},null,8,["min-value","max-value","currency","flip-negative","show","onUpdate:show","modelValue","onUpdate:modelValue"])]),_:2},1032,["class","header","title","onClick"]),!e(c)||e(N)(ie)?ut((a(),i(ce,{key:0,class:"account-edit-balancetime list-item-with-header-and-title",link:"#","no-chevron":""},{header:l(()=>[s("div",{class:"account-edit-balancetime-header",onClick:De=>Ue(J.value[He],"time")},u(e(n)("Sub-account Balance Time")),9,yv)]),title:l(()=>[s("div",hv,[s("div",{onClick:De=>Ue(J.value[He],"date")},u(le(ie)),9,_v),X[48]||(X[48]=ne("",-1)),s("div",{class:"account-edit-balancetime-time",onClick:De=>Ue(J.value[He],"time")},u(ge(ie)),9,kv)])]),default:l(()=>[t(At,{"init-mode":J.value[He].balanceDateTimeSheetMode,show:J.value[He].showBalanceDateTimeSheet,"onUpdate:show":De=>J.value[He].showBalanceDateTimeSheet=De,modelValue:ie.balanceTime,"onUpdate:modelValue":De=>ie.balanceTime=De},null,8,["init-mode","show","onUpdate:show","modelValue","onUpdate:modelValue"])]),_:2},1536)),[[vt,ie.balance]]):r("",!0),e(c)&&!e(N)(ie)?(a(),i(ce,{key:1,title:e(n)("Visible")},{default:l(()=>[t(Pt,{checked:ie.visible,"onToggle:change":De=>ie.visible=De},null,8,["checked","onToggle:change"])]),_:2},1032,["title"])):r("",!0),ut(t(Pe,{type:"textarea",style:{height:"auto"},label:e(n)("Description"),placeholder:e(n)("Your sub-account description (optional)"),value:ie.comment,"onUpdate:value":De=>ie.comment=De},null,8,["label","placeholder","value","onUpdate:value"]),[[lt]])]),_:2},1024))),128))]),_:1})):r("",!0),t(it,{"close-by-outside-click":"","close-on-escape":"",opened:fe.value,"onActions:closed":X[42]||(X[42]=ie=>fe.value=!1)},{default:l(()=>[t(It,null,{default:l(()=>[t(Ct,{onClick:Ze},{default:l(()=>[ne(u(e(n)("Add Sub-account")),1)]),_:1})]),_:1}),t(It,null,{default:l(()=>[t(Ct,{bold:"",close:""},{default:l(()=>[ne(u(e(n)("Cancel")),1)]),_:1})]),_:1})]),_:1},8,["opened"]),t(it,{"close-by-outside-click":"","close-on-escape":"",opened:ee.value,"onActions:closed":X[44]||(X[44]=ie=>ee.value=!1)},{default:l(()=>[t(It,null,{default:l(()=>[t(Le,null,{default:l(()=>[ne(u(e(n)("Are you sure you want to remove this sub-account?")),1)]),_:1}),t(Ct,{color:"red",onClick:X[43]||(X[43]=ie=>Me(te.value,!0))},{default:l(()=>[ne(u(e(n)("Remove")),1)]),_:1})]),_:1}),t(It,null,{default:l(()=>[t(Ct,{bold:"",close:""},{default:l(()=>[ne(u(e(n)("Cancel")),1)]),_:1})]),_:1})]),_:1},8,["opened"])]),_:1})}}}),bv={key:0,style:{color:"var(--f7-text-color)"}},wv={style:{color:"var(--f7-text-color)"}},Tv={key:0},Cv={key:0,class:"display-flex no-padding-horizontal"},Sv={key:1,class:"display-flex no-padding-horizontal"},xv={class:"item-media"},Av={class:"transaction-icon display-flex align-items-center"},$v={key:0,class:"display-flex no-padding-horizontal"},Dv={class:"actual-item-inner"},Iv={class:"item-title-row"},Vv={class:"item-title"},Fv={key:1,class:"display-flex no-padding-horizontal"},Pv={class:"item-media"},Uv={class:"transaction-icon display-flex align-items-center"},Bv={class:"actual-item-inner"},Nv={class:"item-title-row"},Mv={class:"item-title"},Ev={class:"transaction-category-name no-padding"},Lv={key:0},Rv={key:1},Ov={class:"item-after"},zv={key:0},Yv={key:1},Hv={class:"item-text"},qv={key:0,class:"transaction-description"},Wv={class:"item-footer"},Gv={class:"transaction-footer display-flex justify-content-space-between"},jv={class:"flex-shrink-0"},Kv={key:0},Zv={class:"account-balance flex-shrink-1"},Xv={style:{"margin-inline-start":"4px"}},Qv={class:"statistics-chart-header display-flex full-line justify-content-space-between"},Jv={class:"align-self-flex-end"},eg={style:{"margin-inline-end":"4px"}},tg=Re({__name:"ReconciliationStatementPage",props:{f7route:{},f7router:{}},setup(f){const _=f,{tt:n,getCurrentLanguageTextDirection:h,getAllDateRanges:F,formatUnixTimeToLongDateTime:V,formatNumberToLocalizedNumerals:k}=ze(),{showAlert:A,showToast:C,routeBackOnError:P}=nt(),{accountId:m,startTime:c,endTime:b,reconciliationStatements:p,firstDayOfWeek:d,fiscalYearStart:x,allDateAggregationTypes:E,currentTimezoneOffsetMinutes:D,isCurrentLiabilityAccount:T,allCategoriesMap:M,currentAccount:w,currentAccountCurrency:U,displayStartDateTime:I,displayEndDateTime:B,displayTotalInflows:L,displayTotalOutflows:v,displayTotalBalance:N,displayOpeningBalance:z,displayClosingBalance:K,getDisplayDate:W,getDisplayTime:q,getDisplayTimezone:g,getDisplaySourceAmount:J,getDisplayDestinationAmount:te,getDisplayAccountBalance:Z}=Ds(),Y=ol(),H=sl(),fe=Ml(),ee=S(!1),j=S(!1),O=S(null),le=S(Dt.ThisMonth.type),ge=S(!1),$e=S(Bt.Day.type),se=S(null),Ze=S(0),Me=S(!1),Ue=S(!1),qe=S(!1),he=S(!1),X=S(!1),Ce=S(!1),pe=S({items:[],topPosition:0}),we=re(()=>h()),be=re(()=>w.value&&w.value.type===Ht.SingleAccount.type),Be=re(()=>F(qt.Normal,!0,!!Y.getAccountStatementDate(m.value))),ce=re(()=>V(c.value)),ae=re(()=>V(b.value)),oe=re(()=>{const Le=[];if(!p.value||!p.value.transactions||p.value.transactions.length<1)return Le;let xe=0,lt=null;for(const ie of p.value.transactions){const He=W(ie);lt!==He&&(lt=He,Le.push({index:xe++,type:"date",displayDate:He})),Le.push({index:xe++,type:"transaction",transaction:ie})}return Le}),Pe=re(()=>kt(E.value,$e.value)||n("Unknown"));function ve(Le){return"transaction_"+Le.id}function Je(){const Le=_.f7route.query,xe=nn(le.value,d.value,x.value);ee.value=!1,j.value=!1,m.value=Le.accountId||"",c.value=xe?.minTime||0,b.value=xe?.maxTime||0,p.value=void 0,Promise.all([Y.loadAllAccounts({force:!1}),H.loadAllCategories({force:!1})]).catch(lt=>{O.value=lt,C(lt.message||lt)})}function ft(Le){if(Le===Dt.Custom.type){Ue.value=!0;return}let xe=null;Dt.isBillingCycle(Le)?xe=Aa(Le,d.value,x.value,Y.getAccountStatementDate(m.value)):xe=nn(Le,d.value,x.value),xe&&(le.value=xe.dateType,c.value=xe.minTime,b.value=xe.maxTime)}function xt(Le,xe){if(!Le||!xe)return;let lt=$a(Le,xe,d.value,x.value,qt.Normal,Y.getAccountStatementDate(m.value));lt||(lt=Ul(Le,xe,d.value,x.value,qt.Normal)),le.value=lt,c.value=Le,b.value=xe,Ue.value=!1}function mt(Le){ee.value=!0,j.value=!0,fe.getReconciliationStatements({accountId:m.value,startTime:c.value,endTime:b.value}).then(xe=>{Le&&(Ia(p.value,xe)?C("Data is up to date"):C("Data has been updated")),j.value=!1,p.value=xe}).catch(xe=>{j.value=!1,xe.processed||C(xe.message||xe)})}function Vt(){_.f7router.navigate(`/transaction/add?accountId=${m.value}`)}function At(Le){_.f7router.navigate(`/transaction/add?id=${Le.id}&type=${Le.type}`)}function Pt(Le){_.f7router.navigate(`/transaction/edit?id=${Le.id}&type=${Le.type}`)}function gt(Le){let xe=p.value?.closingBalance??0;if(T.value&&(xe=-xe),!Kl(Le)){Ze.value=xe,qe.value=!0;return}const lt=xl();let ie=!1,He;b.value<lt?(ie=!0,He=b.value):lt<c.value&&(ie=!0,He=c.value);let De=T.value?We.Expense:We.Income,Oe=Le-xe;Oe<0&&(De=T.value?We.Income:We.Expense,Oe=-Oe);const at=[];ie&&at.push(`time=${He}`),at.push(`type=${De}`),at.push(`amount=${Oe}`),at.push(`accountId=${m.value}`),at.push("noTransactionDraft=true"),_.f7router.navigate(`/transaction/add?${at.join("&")}`)}function $t(Le,xe){if(!Le){A("An error occurred");return}if(!xe){se.value=Le,X.value=!0;return}X.value=!1,se.value=null,je(),fe.deleteTransaction({transaction:Le,defaultCurrency:U.value,beforeResolve:lt=>{Il(ve(Le),lt)}}).then(()=>{Se(),mt(!1)}).catch(lt=>{Se(),lt.processed||C(lt.message||lt)})}function Ct(Le){$e.value=Le,Ce.value=!1}function It(Le,xe){pe.value=xe}function it(){ee.value&&fe.transactionReconciliationStatementStateInvalid&&mt(!1),P(_.f7router,O)}return Je(),(Le,xe)=>{const lt=o("f7-nav-left"),ie=o("f7-icon"),He=o("f7-link"),De=o("f7-nav-title"),Oe=o("f7-nav-right"),at=o("f7-navbar"),pt=o("f7-list-item"),Ae=o("f7-list"),Ie=o("f7-popover"),Qe=o("ItemIcon"),Ke=o("f7-swipeout-button"),Q=o("f7-swipeout-actions"),Lt=o("f7-card-header"),Kt=o("account-balance-trends-bar-chart"),Et=o("f7-card-content"),rt=o("f7-card"),Wt=o("date-range-selection-sheet"),Ft=o("number-pad-sheet"),ht=o("f7-actions-button"),Ye=o("f7-actions-group"),tl=o("f7-actions"),yt=o("f7-actions-label"),Ot=o("f7-page");return a(),i(Ot,{"onPage:afterin":it},{default:l(()=>[t(at,null,{default:l(()=>[t(lt,{"back-link":e(n)("Back")},null,8,["back-link"]),t(De,null,{default:l(()=>[ee.value?r("",!0):(a(),$("span",bv,u(e(n)("Reconciliation Statement")),1)),ee.value?(a(),i(He,{key:1,"popover-open":".display-mode-popover-menu"},{default:l(()=>[s("span",wv,u(e(n)("Reconciliation Statement")),1),t(ie,{class:"page-title-bar-icon",color:"gray",style:{opacity:"0.5"},f7:"chevron_down_circle_fill"})]),_:1})):r("",!0)]),_:1}),t(Oe,null,{default:l(()=>[ee.value?r("",!0):(a(),i(He,{key:0,class:R({disabled:!be.value}),text:e(n)("Next"),onClick:xe[0]||(xe[0]=_e=>mt(!1))},null,8,["class","text"])),ee.value?(a(),i(He,{key:1,class:R({disabled:j.value}),"icon-f7":"ellipsis",onClick:xe[1]||(xe[1]=_e=>he.value=!0)},null,8,["class"])):r("",!0)]),_:1})]),_:1}),t(Ie,{class:"display-mode-popover-menu",opened:Me.value,"onUpdate:opened":xe[4]||(xe[4]=_e=>Me.value=_e)},{default:l(()=>[t(Ae,{dividers:""},{default:l(()=>[t(pt,{title:e(n)("Transaction List"),class:R({"list-item-selected":!ge.value}),onClick:xe[2]||(xe[2]=_e=>{ge.value=!1,Me.value=!1})},{after:l(()=>[ge.value?r("",!0):(a(),i(ie,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"}))]),_:1},8,["title","class"]),t(pt,{title:e(n)("Account Balance Trends"),class:R({"list-item-selected":ge.value}),onClick:xe[3]||(xe[3]=_e=>{ge.value=!0,Me.value=!1})},{after:l(()=>[ge.value?(a(),i(ie,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"})):r("",!0)]),_:1},8,["title","class"])]),_:1})]),_:1},8,["opened"]),ee.value?r("",!0):(a(),i(Ae,{key:0,form:"",strong:"",inset:"",dividers:"",class:"margin-vertical"},{default:l(()=>[t(pt,{"group-title":""},{default:l(()=>[s("small",null,u(e(n)("Date Range")),1)]),_:1}),(a(!0),$(ke,null,Te(Be.value,_e=>(a(),i(pt,{key:_e.type,title:_e.displayName,disabled:!be.value,onClick:zt=>ft(_e.type)},{after:l(()=>[le.value===_e.type?(a(),i(ie,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"})):r("",!0)]),footer:l(()=>[_e.isUserCustomRange&&le.value===_e.type&&e(c)&&e(b)?(a(),$("div",Tv,[s("span",null,u(ce.value),1),xe[15]||(xe[15]=s("span",null,"-",-1)),xe[16]||(xe[16]=s("br",null,null,-1)),s("span",null,u(ae.value),1)])):r("",!0)]),_:2},1032,["title","disabled","onClick"]))),128))]),_:1})),ee.value&&!e(c)&&!e(b)?(a(),i(Ae,{key:1,strong:"",inset:"",dividers:"",class:"margin-vertical"},{default:l(()=>[t(pt,{title:e(n)("Date Range"),after:e(n)("All")},null,8,["title","after"])]),_:1})):r("",!0),ee.value&&(e(c)||e(b))?(a(),i(Ae,{key:2,strong:"",inset:"",dividers:"",class:"margin-vertical"},{default:l(()=>[t(pt,{title:e(n)("Start Time"),after:e(I)},null,8,["title","after"]),t(pt,{title:e(n)("End Time"),after:e(B)},null,8,["title","after"])]),_:1})):r("",!0),ee.value&&j.value?(a(),i(Ae,{key:3,strong:"",inset:"",dividers:"",class:"margin-vertical skeleton-text"},{default:l(()=>[t(pt,{title:e(n)("Total Transactions"),after:"Count"},null,8,["title"]),t(pt,{title:e(n)("Total Inflows"),after:"Count"},null,8,["title"]),t(pt,{title:e(n)("Total Outflows"),after:"Count"},null,8,["title"]),t(pt,{title:e(n)("Net Cash Flow"),after:"Count"},null,8,["title"])]),_:1})):r("",!0),ee.value&&!j.value?(a(),i(Ae,{key:4,strong:"",inset:"",dividers:"",class:"margin-vertical"},{default:l(()=>[e(p)&&e(p).transactions?(a(),i(pt,{key:0,title:e(n)("Total Transactions"),after:e(k)(e(p).transactions.length)},null,8,["title","after"])):r("",!0),t(pt,{title:e(n)("Total Inflows"),after:e(L)},null,8,["title","after"]),t(pt,{title:e(n)("Total Outflows"),after:e(v)},null,8,["title","after"]),t(pt,{title:e(n)("Net Cash Flow"),after:e(N)},null,8,["title","after"])]),_:1})):r("",!0),ee.value&&j.value?(a(),i(Ae,{key:5,strong:"",inset:"",dividers:"",class:"margin-vertical skeleton-text"},{default:l(()=>[t(pt,{title:e(n)("Opening Balance"),after:"Count"},null,8,["title"]),t(pt,{title:e(n)("Closing Balance"),after:"Count"},null,8,["title"])]),_:1})):r("",!0),ee.value&&!j.value?(a(),i(Ae,{key:6,strong:"",inset:"",dividers:"",class:"margin-vertical"},{default:l(()=>[t(pt,{title:e(n)("Opening Balance"),after:e(z)},null,8,["title","after"]),t(pt,{title:e(n)("Closing Balance"),after:e(K)},null,8,["title","after"])]),_:1})):r("",!0),ee.value&&!ge.value&&j.value?(a(),i(Ae,{key:7,strong:"",inset:"",dividers:"","media-list":"",class:"skeleton-text margin-vertical transaction-info-list reconciliation-statement-list"},{default:l(()=>[s("ul",null,[(a(),$(ke,null,Te(["d","t","t","d","t","t","t"],(_e,zt)=>t(pt,{"chevron-center":"",key:zt,class:R({"transaction-info":_e==="t","last-transaction-of-day":zt===2,"reconciliation-statement-transaction-date":_e==="d"}),link:_e==="t"?"#":null},{default:l(()=>[_e==="d"?(a(),$("div",Cv,[...xe[17]||(xe[17]=[s("div",{class:"actual-item-inner"},[s("div",{class:"item-title-row"},[s("div",{class:"item-title"},[s("small",null,"yyyy-MM-dd")])])],-1)])])):r("",!0),_e==="t"?(a(),$("div",Sv,[s("div",xv,[s("div",Av,[t(ie,{f7:"app_fill"})])]),xe[18]||(xe[18]=s("div",{class:"actual-item-inner"},[s("div",{class:"item-title-row"},[s("div",{class:"item-title"},[s("div",{class:"transaction-category-name no-padding"},[s("span",null,"Category")])]),s("div",{class:"item-after"},[s("div",{class:"transaction-amount"},[s("span",null,"0.00 USD")])])]),s("div",{class:"item-text"},[s("div",{class:"transaction-description"},[s("span",null,"Transaction Description")])]),s("div",{class:"item-footer"},[s("div",{class:"transaction-footer display-flex justify-content-space-between"},[s("div",{class:"flex-shrink-0"},[s("span",null,"HH:mm")]),s("div",{class:"account-balance flex-shrink-1"},[s("span",null,"Balance"),s("span",{style:{"margin-inline-start":"4px"}},"0.00 USD")])])])],-1))])):r("",!0)]),_:2},1032,["class","link"])),64))])]),_:1})):r("",!0),ee.value&&!ge.value&&!j.value&&(!oe.value||!oe.value.length)?(a(),i(Ae,{key:8,strong:"",inset:"",dividers:"",class:"margin-vertical"},{default:l(()=>[t(pt,{title:e(n)("No transaction data")},null,8,["title"])]),_:1})):r("",!0),ee.value&&!ge.value&&!j.value&&oe.value&&oe.value.length?(a(),i(Ae,{key:9,strong:"",inset:"",dividers:"","media-list":"","virtual-list":"",class:"margin-vertical transaction-info-list reconciliation-statement-list","virtual-list-params":{items:oe.value,renderExternal:It,height:"auto"}},{default:l(()=>[s("ul",null,[(a(!0),$(ke,null,Te(pe.value.items,_e=>(a(),i(pt,{"chevron-center":"",key:_e.index,id:_e.transaction?ve(_e.transaction):void 0,class:R({"transaction-info":_e.type=="transaction","last-transaction-of-day":oe.value[_e.index+1]&&oe.value[_e.index+1].type==="date","reconciliation-statement-transaction-date":_e.type=="date"}),style:bt(`top: ${pe.value.topPosition}px`),"virtual-list-index":_e.index,swipeout:_e.type==="transaction"&&!!_e.transaction,"accordion-item":_e.type==="transaction"&&!!_e.transaction,link:_e.type=="transaction"&&_e.transaction&&_e.transaction.type!==e(We).ModifyBalance?`/transaction/detail?id=${_e.transaction?.id}&type=${_e.transaction.type}`:null},{inner:l(()=>[_e.type=="date"&&_e.displayDate?(a(),$("div",$v,[s("div",Dv,[s("div",Iv,[s("div",Vv,[s("small",null,u(_e.displayDate),1)])])])])):r("",!0),_e.type=="transaction"&&_e.transaction?(a(),$("div",Fv,[s("div",Pv,[s("div",Uv,[e(M)[_e.transaction.categoryId]&&e(M)[_e.transaction.categoryId]?.color?(a(),i(Qe,{key:0,"icon-type":"category","icon-id":e(M)[_e.transaction.categoryId]?.icon,color:e(M)[_e.transaction.categoryId]?.color},null,8,["icon-id","color"])):!e(M)[_e.transaction.categoryId]||!e(M)[_e.transaction.categoryId]?.color?(a(),i(ie,{key:1,f7:"pencil_ellipsis_rectangle"})):r("",!0)])]),s("div",Bv,[s("div",Nv,[s("div",Mv,[s("div",Ev,[_e.transaction.type===e(We).ModifyBalance?(a(),$("span",Lv,u(e(n)("Modify Balance")),1)):_e.transaction.type!==e(We).ModifyBalance&&e(M)[_e.transaction.categoryId]?(a(),$("span",Rv,u(e(M)[_e.transaction.categoryId].name),1)):r("",!0)])]),s("div",Ov,[s("div",{class:R(["transaction-amount",{"text-expense":_e.transaction.type===e(We).Expense,"text-income":_e.transaction.type===e(We).Income}])},[_e.transaction.type===e(We).Transfer&&_e.transaction.destinationAccountId===e(m)?(a(),$("span",zv,u(e(te)(_e.transaction)),1)):_e.transaction.type!==e(We).Transfer||_e.transaction.destinationAccountId!==e(m)?(a(),$("span",Yv,u(e(J)(_e.transaction)),1)):r("",!0)],2)])]),s("div",Hv,[_e.transaction.comment?(a(),$("div",qv,[s("span",null,u(_e.transaction.comment),1)])):r("",!0)]),s("div",Wv,[s("div",Gv,[s("div",jv,[s("span",null,u(e(q)(_e.transaction)),1),_e.transaction.utcOffset!==e(D)?(a(),$("span",Kv,u(`(${e(g)(_e.transaction)})`),1)):r("",!0)]),s("div",Zv,[s("span",null,u(e(T)?e(n)("Outstanding Balance"):e(n)("Balance")),1),s("span",Xv,u(e(Z)(_e.transaction)),1)])])])])])):r("",!0)]),default:l(()=>[_e.type=="transaction"&&_e.transaction?(a(),i(Q,{key:0,left:we.value===e(wt).RTL,right:we.value===e(wt).LTR},{default:l(()=>[_e.transaction.type!==e(We).ModifyBalance?(a(),i(Ke,{key:0,color:"primary",close:"",text:e(n)("Duplicate"),onClick:zt=>At(_e.transaction)},null,8,["text","onClick"])):r("",!0),_e.transaction.editable&&_e.transaction.type!==e(We).ModifyBalance?(a(),i(Ke,{key:1,color:"orange",close:"",text:e(n)("Edit"),onClick:zt=>Pt(_e.transaction)},null,8,["text","onClick"])):r("",!0),_e.transaction.editable?(a(),i(Ke,{key:2,color:"red",class:"padding-horizontal",onClick:zt=>$t(_e.transaction,!1)},{default:l(()=>[t(ie,{f7:"trash"})]),_:1},8,["onClick"])):r("",!0)]),_:2},1032,["left","right"])):r("",!0)]),_:2},1032,["id","class","style","virtual-list-index","swipeout","accordion-item","link"]))),128))])]),_:1},8,["virtual-list-params"])):r("",!0),ee.value&&ge.value?(a(),i(rt,{key:10},{default:l(()=>[t(Lt,{class:"no-border display-block"},{default:l(()=>[s("div",Qv,[xe[19]||(xe[19]=s("div",null,null,-1)),s("div",Jv,[s("span",eg,u(e(n)("Time Granularity")),1),t(He,{class:R({disabled:j.value}),href:"#","popover-open":".chart-data-date-aggregation-type-popover-menu"},{default:l(()=>[ne(u(Pe.value),1)]),_:1},8,["class"])])])]),_:1}),t(Et,{style:{"margin-top":"-14px"},padding:!1},{default:l(()=>[t(Kt,{loading:j.value,"date-aggregation-type":$e.value,"fiscal-year-start":e(x),items:e(p)?.transactions,account:e(w)},null,8,["loading","date-aggregation-type","fiscal-year-start","items","account"])]),_:1})]),_:1})):r("",!0),t(Ie,{class:"chart-data-date-aggregation-type-popover-menu",opened:Ce.value,"onUpdate:opened":xe[5]||(xe[5]=_e=>Ce.value=_e)},{default:l(()=>[t(Ae,{dividers:""},{default:l(()=>[(a(!0),$(ke,null,Te(e(E),_e=>(a(),i(pt,{title:_e.displayName,class:R({"list-item-selected":$e.value===_e.type}),key:_e.type,onClick:zt=>Ct(_e.type)},{after:l(()=>[$e.value===_e.type?(a(),i(ie,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"})):r("",!0)]),_:2},1032,["title","class","onClick"]))),128))]),_:1})]),_:1},8,["opened"]),t(Wt,{title:e(n)("Custom Date Range"),"min-time":e(c),"max-time":e(b),show:Ue.value,"onUpdate:show":xe[6]||(xe[6]=_e=>Ue.value=_e),"onDateRange:change":xt},null,8,["title","min-time","max-time","show"]),t(Ft,{"min-value":e($l),"max-value":e(Al),currency:e(U),hint:e(n)("Please enter the new closing balance for the account"),show:qe.value,"onUpdate:show":xe[7]||(xe[7]=_e=>qe.value=_e),modelValue:Ze.value,"onUpdate:modelValue":[xe[8]||(xe[8]=_e=>Ze.value=_e),gt]},null,8,["min-value","max-value","currency","hint","show","modelValue"]),t(tl,{"close-by-outside-click":"","close-on-escape":"",opened:he.value,"onActions:closed":xe[12]||(xe[12]=_e=>he.value=!1)},{default:l(()=>[t(Ye,null,{default:l(()=>[t(ht,{class:R({disabled:j.value}),onClick:xe[9]||(xe[9]=_e=>Vt())},{default:l(()=>[ne(u(e(n)("Add Transaction")),1)]),_:1},8,["class"]),t(ht,{class:R({disabled:j.value}),onClick:xe[10]||(xe[10]=_e=>gt(void 0))},{default:l(()=>[ne(u(e(n)("Update Closing Balance")),1)]),_:1},8,["class"])]),_:1}),t(Ye,null,{default:l(()=>[t(ht,{class:R({disabled:j.value}),onClick:xe[11]||(xe[11]=_e=>mt(!0))},{default:l(()=>[ne(u(e(n)("Refresh")),1)]),_:1},8,["class"])]),_:1}),t(Ye,null,{default:l(()=>[t(ht,{bold:"",close:""},{default:l(()=>[ne(u(e(n)("Cancel")),1)]),_:1})]),_:1})]),_:1},8,["opened"]),t(tl,{"close-by-outside-click":"","close-on-escape":"",opened:X.value,"onActions:closed":xe[14]||(xe[14]=_e=>X.value=!1)},{default:l(()=>[t(Ye,null,{default:l(()=>[t(yt,null,{default:l(()=>[ne(u(e(n)("Are you sure you want to delete this transaction?")),1)]),_:1}),t(ht,{color:"red",onClick:xe[13]||(xe[13]=_e=>$t(se.value,!0))},{default:l(()=>[ne(u(e(n)("Delete")),1)]),_:1})]),_:1}),t(Ye,null,{default:l(()=>[t(ht,{bold:"",close:""},{default:l(()=>[ne(u(e(n)("Cancel")),1)]),_:1})]),_:1})]),_:1},8,["opened"])]),_:1})}}}),lg=Re({__name:"MoveAllTransactionsPage",props:{f7route:{},f7router:{}},setup(f){const _=f,{tt:n}=ze(),{showToast:h,routeBackOnError:F}=nt(),{moving:V,fromAccount:k,toAccountId:A,toAccountName:C,allAccounts:P,allVisibleAccounts:m,allVisibleCategorizedAccounts:c,displayToAccountName:b,isToAccountNameValid:p}=Is(),d=ol(),x=Ml(),E=S(!0),D=S(null),T=S(!1);function M(){const B=_.f7route.query.fromAccountId;if(!B){h("Parameter Invalid"),D.value="Parameter Invalid";return}d.loadAllAccounts({force:!1}).then(()=>{E.value=!1;const L=d.allAccountsMap[B];if(!L){h("Parameter Invalid"),D.value="Parameter Invalid";return}k.value=L}).catch(L=>{L.processed?E.value=!1:(D.value=L,h(L.message||L))})}function w(){const I=_.f7router;!k.value||!A.value||k.value?.id===A.value||!C.value||!p.value||(V.value=!0,je(()=>V.value),x.moveAllTransactionsBetweenAccounts({fromAccountId:k.value.id,toAccountId:A.value}).then(()=>{V.value=!1,Se(),h("All transactions in this account has been moved."),I.back()}).catch(B=>{V.value=!1,Se(),B.processed||h(B.message||B)}))}function U(){F(_.f7router,D)}return M(),(I,B)=>{const L=o("f7-nav-left"),v=o("f7-nav-title"),N=o("f7-link"),z=o("f7-nav-right"),K=o("f7-navbar"),W=o("f7-card"),q=o("f7-list-item"),g=o("f7-list"),J=o("two-column-list-item-selection-sheet"),te=o("f7-list-input"),Z=o("f7-page");return a(),i(Z,{"onPage:afterin":U},{default:l(()=>[t(K,null,{default:l(()=>[t(L,{"back-link":e(n)("Back")},null,8,["back-link"]),t(v,{title:e(n)("Move All Transactions")},null,8,["title"]),t(z,null,{default:l(()=>[t(N,{class:R({disabled:!e(k)||!e(A)||e(k)?.id===e(A)||!e(C)||!e(p)||e(V)}),text:e(n)("Confirm"),onClick:w},null,8,["class","text"])]),_:1})]),_:1}),t(W,{title:e(n)("Are you sure you want to move all transactions?"),content:e(n)("format.misc.moveTransactionsInAccountTip",{fromAccount:e(k)?.name,toAccount:e(b)})},null,8,["title","content"]),E.value?(a(),i(g,{key:0,strong:"",inset:"",dividers:"",class:"margin-vertical skeleton-text"},{default:l(()=>[t(q,{class:"list-item-with-header-and-title list-item-no-item-after",header:"Target Account",title:"Unspecified"}),t(q,{class:"list-item-with-header-and-title list-item-no-item-after",header:"Confirm Target Account Name",title:"Unspecified"})]),_:1})):r("",!0),E.value?r("",!0):(a(),i(g,{key:1,form:"",strong:"",inset:"",dividers:"",class:"margin-vertical"},{default:l(()=>[t(q,{class:R(["list-item-with-header-and-title",{disabled:e(V)||!e(m).length}]),link:"#","no-chevron":"",header:e(n)("Target Account"),title:e(Va).findAccountNameById(e(P),e(A),e(n)("Unspecified")),onClick:B[2]||(B[2]=Y=>T.value=!0)},{default:l(()=>[t(J,{"primary-key-field":"id","primary-value-field":"category","primary-title-field":"name","primary-footer-field":"displayBalance","primary-icon-field":"icon","primary-icon-type":"account","primary-sub-items-field":"accounts","primary-title-i18n":!0,"secondary-key-field":"id","secondary-value-field":"id","secondary-title-field":"name","secondary-footer-field":"displayBalance","secondary-icon-field":"icon","secondary-icon-type":"account","secondary-color-field":"color","enable-filter":!0,"filter-placeholder":e(n)("Find account"),"filter-no-items-text":e(n)("No available account"),items:e(c),show:T.value,"onUpdate:show":B[0]||(B[0]=Y=>T.value=Y),modelValue:e(A),"onUpdate:modelValue":B[1]||(B[1]=Y=>St(A)?A.value=Y:null)},null,8,["filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["class","header","title"]),t(te,{type:"text","clear-button":"",label:e(n)("Confirm Target Account Name"),placeholder:e(n)("Please re-enter the target account name to confirm"),value:e(C),"onUpdate:value":B[3]||(B[3]=Y=>St(C)?C.value=Y:null)},null,8,["label","placeholder","value"])]),_:1}))]),_:1})}}}),ng={style:{color:"var(--f7-text-color)"}},ag={style:{"margin-inline-end":"4px"}},og={key:0,class:"statistics-pie-chart-total-amount-title"},sg={key:1,class:"statistics-pie-chart-total-amount-value"},ig={key:2,class:"statistics-pie-chart-total-no-data",cy:"50%"},rg={class:"statistics-chart-header display-flex full-line justify-content-space-between"},ug={class:"align-self-flex-end"},cg={style:{"margin-inline-end":"4px"}},dg={class:"display-flex full-line"},fg={key:0},pg={class:"display-flex no-padding-horizontal"},mg={class:"display-flex align-items-center statistics-icon"},vg={class:"statistics-item-end"},gg={class:"statistics-percent-line"},yg={class:"display-flex no-padding-horizontal"},hg={class:"display-flex align-items-center statistics-icon"},_g={class:"statistics-list-item-text"},kg={key:0,class:"statistics-percent"},bg={class:"statistics-item-end"},wg={class:"statistics-percent-line"},Tg={class:"statistics-chart-header display-flex full-line justify-content-space-between"},Cg={class:"align-self-flex-end"},Sg={style:{"margin-inline-end":"4px"}},xg={class:"statistics-chart-header display-flex full-line justify-content-space-between"},Ag={class:"align-self-flex-end"},$g={style:{"margin-inline-end":"4px"}},Dg={key:0},Ig=Re({__name:"TransactionPage",props:{f7router:{}},setup(f){const _=f,{tt:n,getCurrentLanguageTextDirection:h,getAllCategoricalChartTypes:F,formatPercentToLocalizedNumerals:V}=ze(),{showPrompt:k,showToast:A,routeBackOnError:C}=nt(),{loading:P,analysisType:m,trendDateAggregationType:c,assetTrendsDateAggregationType:b,defaultCurrency:p,firstDayOfWeek:d,fiscalYearStart:x,allDateRanges:E,allSortingTypes:D,allTrendAnalysisDateAggregationTypes:T,allAssetTrendsDateAggregationTypes:M,query:w,queryChartDataCategory:U,queryDateType:I,queryStartTime:B,queryEndTime:L,queryDateRangeName:v,queryChartDataTypeName:N,querySortingTypeName:z,queryTrendDateAggregationTypeName:K,queryAssetTrendsDateAggregationTypeName:W,isQueryDateRangeChanged:q,canChangeDateRange:g,canShiftDateRange:J,canUseCategoryFilter:te,canUseTagFilter:Z,canUseKeywordFilter:Y,showAmountInChart:H,totalAmountName:fe,showPercentInCategoricalChart:ee,showStackedInTrendsChart:j,translateNameInTrendsChart:O,categoricalAnalysisData:le,trendsAnalysisData:ge,assetTrendsData:$e,canShowCustomDateRange:se,getTransactionCategoricalAnalysisDataItemDisplayColor:Ze,getDisplayAmount:Me}=Vs(),Ue=ol(),qe=sl(),he=Fs(),X=S(null),Ce=S(!1),pe=S(!1),we=S(!1),be=S(!1),Be=S(!1),ce=S(!1),ae=S(!1),oe=S(!1),Pe=re(()=>h()),ve=re(()=>m.value===Ge.CategoricalAnalysis?F():[]),Je=re({get:()=>m.value===Ge.CategoricalAnalysis?w.value.categoricalChartType:m.value===Ge.TrendAnalysis?w.value.trendChartType:m.value===Ge.AssetTrends?w.value.assetTrendsChartType:void 0,set:Ae=>{Vt(Ae)}});function ft(Ae,Ie){return`/transaction/list?${he.getTransactionListPageParams(m.value,Ae,Ie)}`}function xt(){he.initTransactionStatisticsFilter(m.value),Promise.all([Ue.loadAllAccounts({force:!1}),qe.loadAllCategories({force:!1})]).then(()=>m.value===Ge.CategoricalAnalysis?he.loadCategoricalAnalysis({force:!1}):m.value===Ge.TrendAnalysis?he.loadTrendAnalysis({force:!1}):m.value===Ge.AssetTrends?he.loadAssetTrends({force:!1}):Promise.reject("An error occurred")).then(()=>{P.value=!1}).catch(Ae=>{Ae.processed?P.value=!1:(X.value=Ae,A(Ae.message||Ae))})}function mt(Ae){const Ie=!!Ae;let Qe=null;Ce.value=!0,w.value.chartDataType===_t.OutflowsByAccount.type||w.value.chartDataType===_t.ExpenseByAccount.type||w.value.chartDataType===_t.ExpenseByPrimaryCategory.type||w.value.chartDataType===_t.ExpenseBySecondaryCategory.type||w.value.chartDataType===_t.InflowsByAccount.type||w.value.chartDataType===_t.IncomeByAccount.type||w.value.chartDataType===_t.IncomeByPrimaryCategory.type||w.value.chartDataType===_t.IncomeBySecondaryCategory.type||w.value.chartDataType===_t.TotalOutflows.type||w.value.chartDataType===_t.TotalExpense.type||w.value.chartDataType===_t.TotalInflows.type||w.value.chartDataType===_t.TotalIncome.type||w.value.chartDataType===_t.NetCashFlow.type||w.value.chartDataType===_t.NetIncome.type||w.value.chartDataType===_t.NetWorth.type?m.value===Ge.CategoricalAnalysis?Qe=he.loadCategoricalAnalysis({force:Ie}):m.value===Ge.TrendAnalysis?Qe=he.loadTrendAnalysis({force:Ie}):m.value===Ge.AssetTrends&&(Qe=he.loadAssetTrends({force:Ie})):(w.value.chartDataType===_t.AccountTotalAssets.type||w.value.chartDataType===_t.AccountTotalLiabilities.type)&&(m.value===Ge.CategoricalAnalysis?Qe=Ue.loadAllAccounts({force:Ie}):m.value===Ge.AssetTrends&&(Qe=he.loadAssetTrends({force:Ie}))),Qe?Qe.then(()=>{Ce.value=!1,Ae?.(),Ie&&A("Data has been updated")}).catch(Ke=>{Ce.value=!1,Ae?.(),Ke.processed||A(Ke.message||Ke)}):Ce.value=!1}function Vt(Ae){m.value===Ge.CategoricalAnalysis?he.updateTransactionStatisticsFilter({categoricalChartType:Ae}):m.value===Ge.TrendAnalysis?he.updateTransactionStatisticsFilter({trendChartType:Ae}):m.value===Ge.AssetTrends&&he.updateTransactionStatisticsFilter({assetTrendsChartType:Ae})}function At(Ae,Ie){let Qe=!1;m.value!==Ae&&(_t.isAvailableForAnalysisType(w.value.chartDataType,Ae)||he.updateTransactionStatisticsFilter({chartDataType:_t.Default.type}),m.value=Ae,he.updateTransactionStatisticsInvalidState(!0),Qe=!0),he.updateTransactionStatisticsFilter({chartDataType:Ie}),pe.value=!1,Qe&&mt()}function Pt(Ae){if(Ae<ra.Amount.type||Ae>ra.Name.type){we.value=!1;return}he.updateTransactionStatisticsFilter({sortingType:Ae}),we.value=!1}function gt(Ae){c.value=Ae,Be.value=!1}function $t(Ae){b.value=Ae,Be.value=!1}function Ct(Ae){if(m.value===Ge.CategoricalAnalysis){if(Ae===Dt.Custom.type){ce.value=!0,be.value=!1;return}else if(w.value.categoricalChartDateType===Ae)return}else if(m.value===Ge.TrendAnalysis){if(Ae===Dt.Custom.type){ae.value=!0,be.value=!1;return}else if(w.value.trendChartDateType===Ae)return}else if(m.value===Ge.AssetTrends){if(Ae===Dt.Custom.type){ce.value=!0,be.value=!1;return}else if(w.value.assetTrendsChartDateType===Ae)return}const Ie=nn(Ae,d.value,x.value);if(!Ie)return;let Qe=!1;m.value===Ge.CategoricalAnalysis?Qe=he.updateTransactionStatisticsFilter({categoricalChartDateType:Ie.dateType,categoricalChartStartTime:Ie.minTime,categoricalChartEndTime:Ie.maxTime}):m.value===Ge.TrendAnalysis?Qe=he.updateTransactionStatisticsFilter({trendChartDateType:Ie.dateType,trendChartStartYearMonth:kn(Ie.minTime),trendChartEndYearMonth:kn(Ie.maxTime)}):m.value===Ge.AssetTrends&&(Qe=he.updateTransactionStatisticsFilter({assetTrendsChartDateType:Ie.dateType,assetTrendsChartStartTime:Ie.minTime,assetTrendsChartEndTime:Ie.maxTime})),be.value=!1,Qe&&mt()}function It(Ae,Ie){if(!Ae||!Ie)return;let Qe=!1;if(m.value===Ge.CategoricalAnalysis&&Zt(Ae)&&Zt(Ie)){const Ke=Ul(Ae,Ie,d.value,x.value,qt.Normal);Qe=he.updateTransactionStatisticsFilter({categoricalChartDateType:Ke,categoricalChartStartTime:Ae,categoricalChartEndTime:Ie}),ce.value=!1}else if(m.value===Ge.TrendAnalysis&&qn(Ae)&&qn(Ie)){const Ke=Ul(jl(Ae),Sn(Ie),d.value,x.value,qt.TrendAnalysis);Qe=he.updateTransactionStatisticsFilter({trendChartDateType:Ke,trendChartStartYearMonth:Ae,trendChartEndYearMonth:Ie}),ae.value=!1}else if(m.value===Ge.AssetTrends&&Zt(Ae)&&Zt(Ie)){const Ke=Ul(Ae,Ie,d.value,x.value,qt.AssetTrends);Qe=he.updateTransactionStatisticsFilter({assetTrendsChartDateType:Ke,assetTrendsChartStartTime:Ae,assetTrendsChartEndTime:Ie}),ce.value=!1}Qe&&mt()}function it(Ae){let Ie=!1;if(m.value===Ge.CategoricalAnalysis){if(w.value.categoricalChartDateType===Dt.All.type)return;const Qe=Tn(w.value.categoricalChartStartTime,w.value.categoricalChartEndTime,Ae,d.value,x.value,qt.Normal);Ie=he.updateTransactionStatisticsFilter({categoricalChartDateType:Qe.dateType,categoricalChartStartTime:Qe.minTime,categoricalChartEndTime:Qe.maxTime})}else if(m.value===Ge.TrendAnalysis){const Qe=Tn(jl(w.value.trendChartStartYearMonth),Sn(w.value.trendChartEndYearMonth),Ae,d.value,x.value,qt.TrendAnalysis);Ie=he.updateTransactionStatisticsFilter({trendChartDateType:Qe.dateType,trendChartStartYearMonth:kn(Qe.minTime),trendChartEndYearMonth:kn(Qe.maxTime)})}else if(m.value===Ge.AssetTrends){if(w.value.assetTrendsChartDateType===Dt.All.type)return;const Qe=Tn(w.value.assetTrendsChartStartTime,w.value.assetTrendsChartEndTime,Ae,d.value,x.value,qt.AssetTrends);Ie=he.updateTransactionStatisticsFilter({assetTrendsChartDateType:Qe.dateType,assetTrendsChartStartTime:Qe.minTime,assetTrendsChartEndTime:Qe.maxTime})}Ie&&mt()}function Le(){_.f7router.navigate("/settings/filter/account?type=statisticsCurrent")}function xe(){_.f7router.navigate("/settings/filter/category?type=statisticsCurrent")}function lt(){_.f7router.navigate("/settings/filter/tag?type=statisticsCurrent")}function ie(){m.value!==Ge.AssetTrends&&k("Filter transaction description",w.value.keyword,Ae=>{if(w.value.keyword===Ae)return;let Ie=!1;m.value===Ge.CategoricalAnalysis?Ie=he.updateTransactionStatisticsFilter({keyword:Ae}):m.value===Ge.TrendAnalysis&&(Ie=he.updateTransactionStatisticsFilter({keyword:Ae})),Ie&&mt()})}function He(){_.f7router.navigate("/statistic/settings")}function De(Ae){al(Ae.$el,".popover-inner","li.list-item-selected")}function Oe(Ae){_.f7router.navigate(ft(Ae.id))}function at(Ae){_.f7router.navigate(ft(Ae.itemId,Ae.dateRange))}function pt(){he.transactionStatisticsStateInvalid&&!P.value&&mt(),C(_.f7router,X)}return xt(),(Ae,Ie)=>{const Qe=o("f7-nav-left"),Ke=o("f7-icon"),Q=o("f7-link"),Lt=o("f7-nav-title"),Kt=o("f7-nav-right"),Et=o("f7-navbar"),rt=o("f7-list-item"),Wt=o("f7-list-group"),Ft=o("f7-list"),ht=o("f7-popover"),Ye=o("f7-card-header"),tl=o("pie-chart"),yt=o("f7-card-content"),Ot=o("f7-card"),_e=o("f7-progressbar"),zt=o("ItemIcon"),il=o("trends-bar-chart"),Vl=o("f7-toolbar"),fl=o("date-range-selection-sheet"),Fl=o("month-range-selection-sheet"),ue=o("f7-actions-button"),bl=o("f7-actions-group"),Rl=o("f7-actions-label"),Ol=o("f7-actions"),zl=o("f7-page");return a(),i(zl,{ptr:"","onPtr:refresh":mt,"onPage:afterin":pt},{default:l(()=>[t(Et,null,{default:l(()=>[t(Qe,{"back-link":e(n)("Back")},null,8,["back-link"]),t(Lt,null,{default:l(()=>[t(Q,{"popover-open":".chart-data-type-popover-menu"},{default:l(()=>[s("span",ng,u(e(N)),1),t(Ke,{class:"page-title-bar-icon",color:"gray",style:{opacity:"0.5"},f7:"chevron_down_circle_fill"})]),_:1})]),_:1}),t(Kt,null,{default:l(()=>[t(Q,{"icon-f7":"ellipsis",onClick:Ie[0]||(Ie[0]=Fe=>oe.value=!0)})]),_:1})]),_:1}),t(ht,{class:"chart-data-type-popover-menu",opened:pe.value,"onUpdate:opened":Ie[1]||(Ie[1]=Fe=>pe.value=Fe),"onPopover:open":De},{default:l(()=>[t(Ft,{dividers:""},{default:l(()=>[t(Wt,null,{default:l(()=>[t(rt,{"group-title":""},{default:l(()=>[s("small",null,u(e(n)("Categorical Analysis")),1)]),_:1}),(a(!0),$(ke,null,Te(e(_t).values(e(Ge).CategoricalAnalysis),Fe=>(a(),i(rt,{title:e(n)(Fe.name),class:R({"list-item-selected":e(m)===e(Ge).CategoricalAnalysis&&e(w).chartDataType===Fe.type}),key:Fe.type,onClick:Yt=>At(e(Ge).CategoricalAnalysis,Fe.type)},{after:l(()=>[e(m)===e(Ge).CategoricalAnalysis&&e(w).chartDataType===Fe.type?(a(),i(Ke,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"})):r("",!0)]),_:2},1032,["title","class","onClick"]))),128))]),_:1}),t(Wt,null,{default:l(()=>[t(rt,{"group-title":""},{default:l(()=>[s("small",null,u(e(n)("Trend Analysis")),1)]),_:1}),(a(!0),$(ke,null,Te(e(_t).values(e(Ge).TrendAnalysis),Fe=>(a(),i(rt,{title:e(n)(Fe.name),class:R({"list-item-selected":e(m)===e(Ge).TrendAnalysis&&e(w).chartDataType===Fe.type}),key:Fe.type,onClick:Yt=>At(e(Ge).TrendAnalysis,Fe.type)},{after:l(()=>[e(m)===e(Ge).TrendAnalysis&&e(w).chartDataType===Fe.type?(a(),i(Ke,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"})):r("",!0)]),_:2},1032,["title","class","onClick"]))),128))]),_:1}),t(Wt,null,{default:l(()=>[t(rt,{"group-title":""},{default:l(()=>[s("small",null,u(e(n)("Asset Trends")),1)]),_:1}),(a(!0),$(ke,null,Te(e(_t).values(e(Ge).AssetTrends),Fe=>(a(),i(rt,{title:e(n)(Fe.name),class:R({"list-item-selected":e(m)===e(Ge).AssetTrends&&e(w).chartDataType===Fe.type}),key:Fe.type,onClick:Yt=>At(e(Ge).AssetTrends,Fe.type)},{after:l(()=>[e(m)===e(Ge).AssetTrends&&e(w).chartDataType===Fe.type?(a(),i(Ke,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"})):r("",!0)]),_:2},1032,["title","class","onClick"]))),128))]),_:1})]),_:1})]),_:1},8,["opened"]),e(m)===e(Ge).CategoricalAnalysis&&e(w).categoricalChartType===e(ua).Pie.type?(a(),i(Ot,{key:0},{default:l(()=>[t(Ye,{class:"no-border display-block"},{default:l(()=>[s("div",{class:R({"statistics-chart-header":!0,"full-line":!0,"text-align-right":Pe.value===e(wt).LTR,"text-align-left":Pe.value===e(wt).RTL})},[s("span",ag,u(e(n)("Sort by")),1),t(Q,{href:"#","popover-open":".sorting-type-popover-menu"},{default:l(()=>[ne(u(e(z)),1)]),_:1})],2)]),_:1}),t(yt,{class:"pie-chart-container",style:{"margin-top":"-6px"},padding:!1},{default:l(()=>[e(P)?(a(),i(tl,{key:0,items:[{value:60,color:"7c7c7f"},{value:20,color:"a5a5aa"},{value:20,color:"c5c5c9"}],skeleton:!0,"show-center-text":!0,"show-selected-item-info":!0,class:"statistics-pie-chart","name-field":"name","value-field":"value","color-field":"color","center-text-background":"#cccccc"})):e(P)?r("",!0):(a(),i(tl,{key:1,items:e(le).items,"min-valid-percent":1e-4,"show-value":e(H),"show-percent":e(ee),"show-center-text":!0,"show-selected-item-info":!0,"enable-click-item":!0,"default-currency":e(p),class:"statistics-pie-chart","name-field":"name","value-field":"totalAmount","percent-field":"percent","hidden-field":"hidden",onClick:Oe},{default:l(()=>[e(le).items&&e(le).items.length?(a(),$("text",og,u(e(fe)),1)):r("",!0),e(le).items&&e(le).items.length?(a(),$("text",sg,u(e(Me)(e(le).totalAmount,e(p),16)),1)):r("",!0),!e(le).items||!e(le).items.length?(a(),$("text",ig,u(e(n)("No data")),1)):r("",!0)]),_:1},8,["items","show-value","show-percent","default-currency"]))]),_:1})]),_:1})):e(m)===e(Ge).CategoricalAnalysis&&e(w).categoricalChartType===e(ua).Bar.type?(a(),i(Ot,{key:1},{default:l(()=>[t(Ye,{class:"no-border display-block"},{default:l(()=>[s("div",rg,[s("div",null,u(e(fe)),1),s("div",ug,[s("span",cg,u(e(n)("Sort by")),1),t(Q,{href:"#","popover-open":".sorting-type-popover-menu"},{default:l(()=>[ne(u(e(z)),1)]),_:1})])]),s("div",dg,[s("div",{class:R({"statistics-list-item-overview-amount":!0,"text-expense":e(w).chartDataType===e(_t).OutflowsByAccount.type||e(w).chartDataType===e(_t).ExpenseByAccount.type||e(w).chartDataType===e(_t).ExpenseByPrimaryCategory.type||e(w).chartDataType===e(_t).ExpenseBySecondaryCategory.type,"text-income":e(w).chartDataType===e(_t).InflowsByAccount.type||e(w).chartDataType===e(_t).IncomeByAccount.type||e(w).chartDataType===e(_t).IncomeByPrimaryCategory.type||e(w).chartDataType===e(_t).IncomeBySecondaryCategory.type})},[!e(P)&&e(le)&&e(le).items&&e(le).items.length?(a(),$("span",fg,u(e(Me)(e(le).totalAmount,e(p))),1)):e(P)||!e(le)||!e(le).items||!e(le).items.length?(a(),$("span",{key:1,class:R({"skeleton-text":e(P)})},u(e(P)?"***.**":"---"),3)):r("",!0)],2)])]),_:1}),t(yt,{style:{"margin-top":"-14px"},padding:!1},{default:l(()=>[e(P)?(a(),i(Ft,{key:0,class:"statistics-list-item skeleton-text"},{default:l(()=>[(a(),$(ke,null,Te([1,2,3],Fe=>t(rt,{link:"#",key:Fe},{media:l(()=>[s("div",pg,[s("div",mg,[t(Ke,{f7:"app_fill"})])])]),title:l(()=>[...Ie[10]||(Ie[10]=[s("div",{class:"statistics-list-item-text"},[s("span",null,"Category Name"),s("small",{class:"statistics-percent"},"33.33")],-1)])]),after:l(()=>[...Ie[11]||(Ie[11]=[s("span",null,"0.00 USD",-1)])]),"inner-end":l(()=>[s("div",vg,[s("div",gg,[t(_e)])])]),_:1})),64))]),_:1})):!e(P)&&(!e(le)||!e(le).items||!e(le).items.length)?(a(),i(Ft,{key:1},{default:l(()=>[t(rt,{title:e(n)("No transaction data")},null,8,["title"])]),_:1})):!e(P)&&e(le)&&e(le).items&&e(le).items.length?(a(),i(Ft,{key:2},{default:l(()=>[(a(!0),$(ke,null,Te(e(le).items,(Fe,Yt)=>ut((a(),i(rt,{class:"statistics-list-item",link:ft(Fe.id),key:Yt},{media:l(()=>[s("div",yg,[s("div",hg,[Fe.icon?(a(),i(zt,{key:0,"icon-type":e(U),"icon-id":Fe.icon,color:Fe.color},null,8,["icon-type","icon-id","color"])):Fe.icon?r("",!0):(a(),i(Ke,{key:1,f7:"pencil_ellipsis_rectangle"}))])])]),title:l(()=>[s("div",_g,[s("span",null,u(Fe.name),1),e(ee)&&Fe.percent>=0?(a(),$("small",kg,u(e(V)(Fe.percent,2,"<0.01")),1)):r("",!0)])]),after:l(()=>[s("span",null,u(e(Me)(Fe.totalAmount,e(p))),1)]),"inner-end":l(()=>[s("div",bg,[s("div",wg,[t(_e,{progress:Fe.percent>=0?Fe.percent:0,style:bt({"--f7-progressbar-progress-color":Fe.color?e(Ze)(Fe):""})},null,8,["progress","style"])])])]),_:2},1032,["link"])),[[vt,!Fe.hidden]])),128))]),_:1})):r("",!0)]),_:1})]),_:1})):e(m)===e(Ge).TrendAnalysis?(a(),i(Ot,{key:2},{default:l(()=>[t(Ye,{class:"no-border display-block"},{default:l(()=>[s("div",Tg,[Ie[12]||(Ie[12]=s("div",null,null,-1)),s("div",Cg,[s("span",Sg,u(e(n)("Sort by")),1),t(Q,{href:"#","popover-open":".sorting-type-popover-menu"},{default:l(()=>[ne(u(e(z)),1)]),_:1})])])]),_:1}),t(yt,{style:{"margin-top":"-14px"},padding:!1},{default:l(()=>[t(il,{"chart-mode":"monthly",loading:e(P)||Ce.value,"start-time":void 0,"end-time":void 0,"start-year-month":e(w).trendChartStartYearMonth,"end-year-month":e(w).trendChartEndYearMonth,"sorting-type":e(w).sortingType,"data-aggregation-type":e(Cn).Sum,"date-aggregation-type":e(c),"fiscal-year-start":e(x),items:e(ge)&&e(ge).items&&e(ge).items.length?e(ge).items:[],stacked:e(j),"translate-name":e(O),"default-currency":e(p),"id-field":"id","name-field":"name","value-field":"totalAmount","hidden-field":"hidden","display-orders-field":"displayOrders",onClick:at},null,8,["loading","start-year-month","end-year-month","sorting-type","data-aggregation-type","date-aggregation-type","fiscal-year-start","items","stacked","translate-name","default-currency"])]),_:1})]),_:1})):e(m)===e(Ge).AssetTrends?(a(),i(Ot,{key:3},{default:l(()=>[t(Ye,{class:"no-border display-block"},{default:l(()=>[s("div",xg,[Ie[13]||(Ie[13]=s("div",null,null,-1)),s("div",Ag,[s("span",$g,u(e(n)("Sort by")),1),t(Q,{href:"#","popover-open":".sorting-type-popover-menu"},{default:l(()=>[ne(u(e(z)),1)]),_:1})])])]),_:1}),t(yt,{style:{"margin-top":"-14px"},padding:!1},{default:l(()=>[t(il,{"chart-mode":"daily",loading:e(P)||Ce.value,"start-time":e(w).assetTrendsChartStartTime,"end-time":e(w).assetTrendsChartEndTime,"start-year-month":void 0,"end-year-month":void 0,"sorting-type":e(w).sortingType,"data-aggregation-type":e(Cn).Last,"date-aggregation-type":e(b),"fiscal-year-start":e(x),items:e($e)&&e($e).items&&e($e).items.length?e($e).items:[],stacked:e(j),"translate-name":e(O),"default-currency":e(p),"id-field":"id","name-field":"name","value-field":"totalAmount","hidden-field":"hidden","display-orders-field":"displayOrders",onClick:at},null,8,["loading","start-time","end-time","sorting-type","data-aggregation-type","date-aggregation-type","fiscal-year-start","items","stacked","translate-name","default-currency"])]),_:1})]),_:1})):r("",!0),t(ht,{class:"sorting-type-popover-menu",opened:we.value,"onUpdate:opened":Ie[2]||(Ie[2]=Fe=>we.value=Fe)},{default:l(()=>[t(Ft,{dividers:""},{default:l(()=>[(a(!0),$(ke,null,Te(e(D),Fe=>(a(),i(rt,{title:Fe.displayName,class:R({"list-item-selected":e(w).sortingType===Fe.type}),key:Fe.type,onClick:Yt=>Pt(Fe.type)},{after:l(()=>[e(w).sortingType===Fe.type?(a(),i(Ke,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"})):r("",!0)]),_:2},1032,["title","class","onClick"]))),128))]),_:1})]),_:1},8,["opened"]),t(Vl,{tabbar:"",bottom:"",class:"toolbar-item-auto-size"},{default:l(()=>[t(Q,{class:R({disabled:Ce.value||!e(J)}),onClick:Ie[3]||(Ie[3]=Fe=>it(-1))},{default:l(()=>[t(Ke,{class:"icon-with-direction",f7:"arrow_left_square"})]),_:1},8,["class"]),t(Q,{class:R({"tabbar-text-with-ellipsis":!0,disabled:Ce.value||!e(g)}),"popover-open":".date-popover-menu"},{default:l(()=>[s("span",{class:R({"tabbar-item-changed":e(q)})},u(e(v)),3)]),_:1},8,["class"]),t(Q,{class:R({disabled:Ce.value||!e(J)}),onClick:Ie[4]||(Ie[4]=Fe=>it(1))},{default:l(()=>[t(Ke,{class:"icon-with-direction",f7:"arrow_right_square"})]),_:1},8,["class"]),e(m)===e(Ge).TrendAnalysis?(a(),i(Q,{key:0,class:R({"tabbar-text-with-ellipsis":!0,disabled:Ce.value}),"popover-open":".date-aggregation-popover-menu"},{default:l(()=>[s("span",{class:R({"tabbar-item-changed":e(c)!==e(Bt).Default.type})},u(e(K)),3)]),_:1},8,["class"])):r("",!0),e(m)===e(Ge).AssetTrends?(a(),i(Q,{key:1,class:R({"tabbar-text-with-ellipsis":!0,disabled:Ce.value}),"popover-open":".date-aggregation-popover-menu"},{default:l(()=>[s("span",{class:R({"tabbar-item-changed":e(b)!==e(Bt).Default.type})},u(e(W)),3)]),_:1},8,["class"])):r("",!0),(a(!0),$(ke,null,Te(ve.value,Fe=>(a(),i(Q,{class:"tabbar-text-with-ellipsis",key:Fe.type,onClick:Yt=>Vt(Fe.type)},{default:l(()=>[s("span",{class:R({"tabbar-item-changed":Je.value===Fe.type})},u(Fe.displayName),3)]),_:2},1032,["onClick"]))),128))]),_:1}),t(ht,{class:"date-popover-menu",opened:be.value,"onUpdate:opened":Ie[5]||(Ie[5]=Fe=>be.value=Fe),"onPopover:open":De},{default:l(()=>[t(Ft,{dividers:""},{default:l(()=>[(a(!0),$(ke,null,Te(e(E),Fe=>(a(),i(rt,{title:Fe.displayName,class:R({"list-item-selected":e(I)===Fe.type}),key:Fe.type,onClick:Yt=>Ct(Fe.type)},{after:l(()=>[e(I)===Fe.type?(a(),i(Ke,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"})):r("",!0)]),footer:l(()=>[Fe.isUserCustomRange&&e(se)(Fe.type)?(a(),$("div",Dg,[s("span",null,u(e(B)),1),Ie[14]||(Ie[14]=s("span",null,"-",-1)),Ie[15]||(Ie[15]=s("br",null,null,-1)),s("span",null,u(e(L)),1)])):r("",!0)]),_:2},1032,["title","class","onClick"]))),128))]),_:1})]),_:1},8,["opened"]),t(ht,{class:"date-aggregation-popover-menu",opened:Be.value,"onUpdate:opened":Ie[6]||(Ie[6]=Fe=>Be.value=Fe),"onPopover:open":De},{default:l(()=>[e(m)===e(Ge).TrendAnalysis?(a(),i(Ft,{key:0,dividers:""},{default:l(()=>[(a(!0),$(ke,null,Te(e(T),Fe=>(a(),i(rt,{title:Fe.displayName,class:R({"list-item-selected":e(c)===Fe.type}),key:Fe.type,onClick:Yt=>gt(Fe.type)},{after:l(()=>[e(c)===Fe.type?(a(),i(Ke,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"})):r("",!0)]),_:2},1032,["title","class","onClick"]))),128))]),_:1})):e(m)===e(Ge).AssetTrends?(a(),i(Ft,{key:1,dividers:""},{default:l(()=>[(a(!0),$(ke,null,Te(e(M),Fe=>(a(),i(rt,{title:Fe.displayName,class:R({"list-item-selected":e(b)===Fe.type}),key:Fe.type,onClick:Yt=>$t(Fe.type)},{after:l(()=>[e(b)===Fe.type?(a(),i(Ke,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"})):r("",!0)]),_:2},1032,["title","class","onClick"]))),128))]),_:1})):r("",!0)]),_:1},8,["opened"]),t(fl,{title:e(n)("Custom Date Range"),"min-time":e(w).categoricalChartStartTime,"max-time":e(w).categoricalChartEndTime,show:ce.value,"onUpdate:show":Ie[7]||(Ie[7]=Fe=>ce.value=Fe),"onDateRange:change":It},null,8,["title","min-time","max-time","show"]),t(Fl,{title:e(n)("Custom Date Range"),"min-time":e(w).trendChartStartYearMonth,"max-time":e(w).trendChartEndYearMonth,show:ae.value,"onUpdate:show":Ie[8]||(Ie[8]=Fe=>ae.value=Fe),"onDateRange:change":It},null,8,["title","min-time","max-time","show"]),t(Ol,{"close-by-outside-click":"","close-on-escape":"",opened:oe.value,"onActions:closed":Ie[9]||(Ie[9]=Fe=>oe.value=!1)},{default:l(()=>[t(bl,null,{default:l(()=>[t(ue,{class:R({disabled:Ce.value}),onClick:Le},{default:l(()=>[ne(u(e(n)("Filter Accounts")),1)]),_:1},8,["class"]),e(te)?(a(),i(ue,{key:0,class:R({disabled:Ce.value}),onClick:xe},{default:l(()=>[ne(u(e(n)("Filter Transaction Categories")),1)]),_:1},8,["class"])):r("",!0),e(Z)?(a(),i(ue,{key:1,class:R({disabled:Ce.value}),onClick:lt},{default:l(()=>[ne(u(e(n)("Filter Transaction Tags")),1)]),_:1},8,["class"])):r("",!0)]),_:1}),e(Y)?(a(),i(bl,{key:0},{default:l(()=>[e(w).keyword?(a(),i(Rl,{key:0},{default:l(()=>[ne(u(e(w).keyword),1)]),_:1})):r("",!0),t(ue,{class:R({disabled:Ce.value}),onClick:ie},{default:l(()=>[ne(u(e(n)("Filter transaction description")),1)]),_:1},8,["class"])]),_:1})):r("",!0),t(bl,null,{default:l(()=>[t(ue,{onClick:He},{default:l(()=>[ne(u(e(n)("Settings")),1)]),_:1})]),_:1}),t(bl,null,{default:l(()=>[t(ue,{bold:"",close:""},{default:l(()=>[ne(u(e(n)("Cancel")),1)]),_:1})]),_:1})]),_:1},8,["opened"])]),_:1})}}}),Vg=Re({__name:"SettingsPage",setup(f){const{tt:_}=ze(),{allChartDataTypes:n,allTimezoneTypesUsedForStatistics:h,allSortingTypes:F,allCategoricalChartTypes:V,allCategoricalChartDateRanges:k,allTrendChartDateRanges:A,allAssetTrendsChartDateRanges:C,defaultChartDataType:P,defaultTimezoneType:m,defaultSortingType:c,defaultCategoricalChartType:b,defaultCategoricalChartDateRange:p,defaultTrendChartDateRange:d,defaultAssetTrendsChartDateRange:x}=Ps(),E=S(!1),D=S(!1),T=S(!1),M=S(!1),w=S(!1),U=S(!1),I=S(!1);return(B,L)=>{const v=o("f7-navbar"),N=o("f7-block-title"),z=o("list-item-selection-popup"),K=o("f7-list-item"),W=o("f7-list"),q=o("f7-page");return a(),i(q,null,{default:l(()=>[t(v,{title:e(_)("Statistics Settings"),"back-link":e(_)("Back")},null,8,["title","back-link"]),t(N,{class:"margin-top"},{default:l(()=>[ne(u(e(_)("Common Settings")),1)]),_:1}),t(W,{strong:"",inset:"",dividers:"",class:"settings-list"},{default:l(()=>[t(K,{link:"#",title:e(_)("Default Chart Data Type"),after:e(kt)(e(n),e(P)),onClick:L[2]||(L[2]=g=>E.value=!0)},{default:l(()=>[t(z,{"value-type":"item","key-field":"type","value-field":"type","title-field":"displayName",title:e(_)("Default Chart Data Type"),"enable-filter":!0,"filter-placeholder":e(_)("Chart Data Type"),"filter-no-items-text":e(_)("No results"),items:e(n),show:E.value,"onUpdate:show":L[0]||(L[0]=g=>E.value=g),modelValue:e(P),"onUpdate:modelValue":L[1]||(L[1]=g=>St(P)?P.value=g:null)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["title","after"]),t(K,{link:"#",title:e(_)("Timezone Used for Date Range"),after:e(kt)(e(h),e(m)),onClick:L[5]||(L[5]=g=>D.value=!0)},{default:l(()=>[t(z,{"value-type":"item","key-field":"type","value-field":"type","title-field":"displayName",title:e(_)("Timezone Used for Date Range"),"enable-filter":!0,"filter-placeholder":e(_)("Timezone Type"),"filter-no-items-text":e(_)("No results"),items:e(h),show:D.value,"onUpdate:show":L[3]||(L[3]=g=>D.value=g),modelValue:e(m),"onUpdate:modelValue":L[4]||(L[4]=g=>St(m)?m.value=g:null)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["title","after"]),t(K,{title:e(_)("Default Account Filter"),link:"/settings/filter/account?type=statisticsDefault"},null,8,["title"]),t(K,{title:e(_)("Default Transaction Category Filter"),link:"/settings/filter/category?type=statisticsDefault"},null,8,["title"]),t(K,{link:"#",title:e(_)("Default Sort Order"),after:e(kt)(e(F),e(c)),onClick:L[8]||(L[8]=g=>T.value=!0)},{default:l(()=>[t(z,{"value-type":"item","key-field":"type","value-field":"type","title-field":"displayName",title:e(_)("Default Sort Order"),"enable-filter":!0,"filter-placeholder":e(_)("Sort Order"),"filter-no-items-text":e(_)("No results"),items:e(F),show:T.value,"onUpdate:show":L[6]||(L[6]=g=>T.value=g),modelValue:e(c),"onUpdate:modelValue":L[7]||(L[7]=g=>St(c)?c.value=g:null)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["title","after"])]),_:1}),t(N,null,{default:l(()=>[ne(u(e(_)("Categorical Analysis Settings")),1)]),_:1}),t(W,{strong:"",inset:"",dividers:""},{default:l(()=>[t(K,{link:"#",title:e(_)("Default Chart Type"),after:e(kt)(e(V),e(b)),onClick:L[11]||(L[11]=g=>M.value=!0)},{default:l(()=>[t(z,{"value-type":"item","key-field":"type","value-field":"type","title-field":"displayName",title:e(_)("Default Chart Type"),"enable-filter":!0,"filter-placeholder":e(_)("Chart Type"),"filter-no-items-text":e(_)("No results"),items:e(V),show:M.value,"onUpdate:show":L[9]||(L[9]=g=>M.value=g),modelValue:e(b),"onUpdate:modelValue":L[10]||(L[10]=g=>St(b)?b.value=g:null)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["title","after"]),t(K,{link:"#",title:e(_)("Default Date Range"),after:e(kt)(e(k),e(p)),onClick:L[14]||(L[14]=g=>w.value=!0)},{default:l(()=>[t(z,{"value-type":"item","key-field":"type","value-field":"type","title-field":"displayName",title:e(_)("Default Date Range"),"enable-filter":!0,"filter-placeholder":e(_)("Date Range"),"filter-no-items-text":e(_)("No results"),items:e(k),show:w.value,"onUpdate:show":L[12]||(L[12]=g=>w.value=g),modelValue:e(p),"onUpdate:modelValue":L[13]||(L[13]=g=>St(p)?p.value=g:null)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["title","after"])]),_:1}),t(N,null,{default:l(()=>[ne(u(e(_)("Trend Analysis Settings")),1)]),_:1}),t(W,{strong:"",inset:"",dividers:""},{default:l(()=>[t(K,{link:"#",title:e(_)("Default Date Range"),after:e(kt)(e(A),e(d)),onClick:L[17]||(L[17]=g=>U.value=!0)},{default:l(()=>[t(z,{"value-type":"item","key-field":"type","value-field":"type","title-field":"displayName",title:e(_)("Default Date Range"),"enable-filter":!0,"filter-placeholder":e(_)("Date Range"),"filter-no-items-text":e(_)("No results"),items:e(A),show:U.value,"onUpdate:show":L[15]||(L[15]=g=>U.value=g),modelValue:e(d),"onUpdate:modelValue":L[16]||(L[16]=g=>St(d)?d.value=g:null)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["title","after"])]),_:1}),t(N,null,{default:l(()=>[ne(u(e(_)("Asset Trends Settings")),1)]),_:1}),t(W,{strong:"",inset:"",dividers:""},{default:l(()=>[t(K,{link:"#",title:e(_)("Default Date Range"),after:e(kt)(e(C),e(x)),onClick:L[20]||(L[20]=g=>I.value=!0)},{default:l(()=>[t(z,{"value-type":"item","key-field":"type","value-field":"type","title-field":"displayName",title:e(_)("Default Date Range"),"enable-filter":!0,"filter-placeholder":e(_)("Date Range"),"filter-no-items-text":e(_)("No results"),items:e(C),show:I.value,"onUpdate:show":L[18]||(L[18]=g=>I.value=g),modelValue:e(x),"onUpdate:modelValue":L[19]||(L[19]=g=>St(x)?x.value=g:null)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["title","after"])]),_:1})]),_:1})}}}),Fg={class:"transaction-amount-statistics"},Pg={class:"text-income"},Ug={class:"text-expense"},Bg={class:"display-flex flex-direction-column transaction-date"},Ng={class:"transaction-day full-line flex-direction-column"},Mg={class:"transaction-day-of-week full-line flex-direction-column"},Eg={class:"display-flex no-padding-horizontal"},Lg={class:"item-media"},Rg={class:"transaction-icon display-flex align-items-center"},Og={class:"actual-item-inner"},zg={class:"item-title-row"},Yg={class:"item-title"},Hg={class:"transaction-category-name no-padding"},qg={class:"item-after"},Wg={class:"transaction-amount"},Gg={class:"item-text"},jg={class:"transaction-description"},Kg={class:"item-footer"},Zg={class:"transaction-tags"},Xg={class:"transaction-footer"},Qg={class:"full-line padding-bottom padding-top-half"},Jg={class:"display-flex justify-content-space-between"},ey=Re({__name:"TextSizeSettingsPage",props:{f7router:{}},setup(f){const _=f,{tt:n,getCurrentLanguageTextDirection:h,getWeekdayShortName:F,getCalendarDisplayDayOfMonthFromUnixTime:V,formatUnixTimeToShortTime:k,formatUnixTimeToGregorianLikeLongYearMonth:A,formatAmountToLocalizedNumeralsWithCurrency:C}=ze(),P=Ll(),m=S(xl()),c=S(P.appSettings.fontSize),b=re(()=>h()),p=re(()=>Hr(c.value)),d=re(()=>A(m.value)),x=re(()=>V(m.value)),E=re(()=>F(xa(m.value).getWeekDay())),D=re(()=>k(m.value));function T(){return""}function M(){const w=_.f7router;c.value!==P.appSettings.fontSize&&(P.setFontSize(c.value),Ba(c.value)),w.back()}return(w,U)=>{const I=o("f7-nav-left"),B=o("f7-nav-title"),L=o("f7-link"),v=o("f7-nav-right"),N=o("f7-navbar"),z=o("f7-icon"),K=o("f7-list-item"),W=o("f7-list"),q=o("f7-accordion-toggle"),g=o("f7-block-title"),J=o("f7-chip"),te=o("f7-accordion-content"),Z=o("f7-accordion-item"),Y=o("f7-block"),H=o("f7-range"),fe=o("f7-page");return a(),i(fe,null,{default:l(()=>[t(N,null,{default:l(()=>[t(I,{"back-link":e(n)("Back")},null,8,["back-link"]),t(B,{title:e(n)("Text Size")},null,8,["title"]),t(v,null,{default:l(()=>[t(L,{text:e(n)("Done"),onClick:M},null,8,["text"])]),_:1})]),_:1}),t(Y,{class:R(["no-padding no-margin readonly",p.value])},{default:l(()=>[t(Y,{class:"combination-list-wrapper margin-vertical"},{default:l(()=>[t(Z,null,{default:l(()=>[t(g,null,{default:l(()=>[t(q,null,{default:l(()=>[t(W,{strong:"",inset:"",dividers:"","media-list":"",class:"transaction-amount-list combination-list-header combination-list-opened"},{default:l(()=>[t(K,null,{title:l(()=>[s("small",null,u(d.value),1),s("small",Fg,[s("span",Pg,u(`+${e(C)(12345)}`),1),s("span",Ug,u(`-${e(C)(67890)}`),1)]),t(z,{class:"combination-list-chevron-icon",f7:"chevron_up"})]),_:1})]),_:1})]),_:1})]),_:1}),t(te,{style:{height:"auto"}},{default:l(()=>[t(W,{strong:"",inset:"",dividers:"","media-list":"","accordion-list":"",class:"transaction-info-list combination-list-content"},{default:l(()=>[t(K,{"chevron-center":"",class:"transaction-info",link:"#"},{media:l(()=>[s("div",Bg,[s("span",Ng,u(x.value),1),s("span",Mg,u(E.value),1)])]),inner:l(()=>[s("div",Eg,[s("div",Lg,[s("div",Rg,[t(z,{f7:"pencil_ellipsis_rectangle"})])]),s("div",Og,[s("div",zg,[s("div",Yg,[s("div",Hg,[s("span",null,u(e(n)("Category Name")),1)])]),s("div",qg,[s("div",Wg,[s("span",null,u(e(C)(12345)),1)])])]),s("div",Gg,[s("div",jg,[s("span",null,u(e(n)("Description")),1)])]),s("div",Kg,[s("div",Zg,[t(J,{"media-text-color":"var(--f7-chip-text-color)",class:"transaction-tag",text:e(n)("Tag Title")},{media:l(()=>[t(z,{f7:"number"})]),_:1},8,["text"])]),s("div",Xg,[s("span",null,u(D.value),1),U[2]||(U[2]=s("span",null,"",-1)),s("span",null,u(e(n)("Account Name")),1)])])])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["class"]),t(Y,{class:"fontsize-panel no-padding margin-bottom"},{default:l(()=>[t(Y,{strong:"",inset:"",class:"no-padding-bottom margin-bottom"},{default:l(()=>[s("div",Qg,[s("div",Jg,[U[3]||(U[3]=s("div",{class:"fontsize-minimum"},"A",-1)),U[4]||(U[4]=s("div",{class:"fontsize-maximum"},"A",-1)),s("div",{class:"fontsize-default",style:bt(b.value===e(wt).LTR?`left: calc(${100/e(Cl).MaximumFontSize.type}% - 6px)`:`right: calc(${100/e(Cl).MaximumFontSize.type}% - 6px)`)},u(e(n)("Default")),5)]),t(H,{min:e(Cl).MinimumFontSize.type,max:e(Cl).MaximumFontSize.type,step:1,scale:!0,"scale-steps":e(Cl).MaximumFontSize.type,"scale-sub-steps":1,"format-scale-label":T,value:c.value,"onUpdate:value":U[0]||(U[0]=ee=>c.value=ee),onRangeChange:U[1]||(U[1]=ee=>c.value=ee)},null,8,["min","max","scale-steps","value"])])]),_:1})]),_:1})]),_:1})}}}),ty={key:1},ly={key:1},ny={key:1},ay=Re({__name:"PageSettingsPage",setup(f){const{tt:_}=ze(),{showToast:n}=nt(),{loadingAccounts:h,loadingTransactionCategories:F,hasAnyAccount:V,hasAnyVisibleAccount:k,hasAnyTransactionCategory:A,allTimezoneTypesUsedForStatistics:C,allCurrencySortingTypes:P,allAutoSaveTransactionDraftTypes:m,showAmountInHomePage:c,timezoneUsedForStatisticsInHomePage:b,showTotalAmountInTransactionListPage:p,showTagInTransactionListPage:d,autoSaveTransactionDraft:x,isAutoGetCurrentGeoLocation:E,currencySortByInExchangeRatesPage:D,accountsIncludedInHomePageOverviewDisplayContent:T,accountsIncludedInTotalDisplayContent:M,transactionCategoriesIncludedInHomePageOverviewDisplayContent:w}=Fa(),U=Ll(),I=ol(),B=sl(),L=S(!1),v=S(!1),N=S(!1),z=re({get:()=>U.appSettings.alwaysShowTransactionPicturesInMobileTransactionEditPage,set:W=>U.setAlwaysShowTransactionPicturesInMobileTransactionEditPage(W)});function K(){h.value=!0,I.loadAllAccounts({force:!1}).then(()=>{h.value=!1}).catch(W=>{h.value=!1,W.processed||n(W.message||W)}),B.loadAllCategories({force:!1}).then(()=>{F.value=!1}).catch(W=>{F.value=!1,W.processed||n(W.message||W)})}return K(),(W,q)=>{const g=o("f7-navbar"),J=o("f7-block-title"),te=o("f7-toggle"),Z=o("f7-list-item"),Y=o("list-item-selection-popup"),H=o("f7-preloader"),fe=o("f7-list"),ee=o("f7-page");return a(),i(ee,null,{default:l(()=>[t(g,{title:e(_)("Page Settings"),"back-link":e(_)("Back")},null,8,["title","back-link"]),t(J,{class:"margin-top"},{default:l(()=>[ne(u(e(_)("Overview Page")),1)]),_:1}),t(fe,{strong:"",inset:"",dividers:"",class:"settings-list"},{default:l(()=>[t(Z,null,{default:l(()=>[s("span",null,u(e(_)("Show Amount")),1),t(te,{checked:e(c),"onToggle:change":q[0]||(q[0]=j=>c.value=j)},null,8,["checked"])]),_:1}),t(Z,{link:"#",title:e(_)("Timezone Used for Statistics"),after:e(kt)(e(C),e(b)),onClick:q[3]||(q[3]=j=>L.value=!0)},{default:l(()=>[t(Y,{"value-type":"item","key-field":"type","value-field":"type","title-field":"displayName",title:e(_)("Timezone Used for Statistics"),"enable-filter":!0,"filter-placeholder":e(_)("Timezone Type"),"filter-no-items-text":e(_)("No results"),items:e(C),show:L.value,"onUpdate:show":q[1]||(q[1]=j=>L.value=j),modelValue:e(b),"onUpdate:modelValue":q[2]||(q[2]=j=>St(b)?b.value=j:null)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["title","after"]),t(Z,{disabled:!e(V),title:e(_)("Accounts Included in Overview Statistics"),link:"/settings/filter/account?type=homePageOverview"},{after:l(()=>[e(h)?(a(),i(H,{key:0})):e(h)?r("",!0):(a(),$("span",ty,u(e(T)),1))]),_:1},8,["disabled","title"]),t(Z,{disabled:!e(A),title:e(_)("Transaction Categories Included in Overview Statistics"),link:`/settings/filter/category?type=homePageOverview&allowCategoryTypes=${e(Tt).Income},${e(Tt).Expense}`},{after:l(()=>[e(F)?(a(),i(H,{key:0})):e(F)?r("",!0):(a(),$("span",ly,u(e(w)),1))]),_:1},8,["disabled","title","link"])]),_:1}),t(J,null,{default:l(()=>[ne(u(e(_)("Transaction List Page")),1)]),_:1}),t(fe,{strong:"",inset:"",dividers:""},{default:l(()=>[t(Z,null,{default:l(()=>[s("span",null,u(e(_)("Show Monthly Total Amount")),1),t(te,{checked:e(p),"onToggle:change":q[4]||(q[4]=j=>p.value=j)},null,8,["checked"])]),_:1}),t(Z,null,{default:l(()=>[s("span",null,u(e(_)("Show Transaction Tag")),1),t(te,{checked:e(d),"onToggle:change":q[5]||(q[5]=j=>d.value=j)},null,8,["checked"])]),_:1})]),_:1}),t(J,null,{default:l(()=>[ne(u(e(_)("Transaction Edit Page")),1)]),_:1}),t(fe,{strong:"",inset:"",dividers:""},{default:l(()=>[t(Z,{link:"#",title:e(_)("Automatically Save Draft"),after:e(Pa)(e(m),e(x)),onClick:q[8]||(q[8]=j=>v.value=!0)},{default:l(()=>[t(Y,{"value-type":"item","key-field":"value","value-field":"value","title-field":"name",title:e(_)("Automatically Save Draft"),"enable-filter":!0,"filter-placeholder":e(_)("Automatically Save Draft"),"filter-no-items-text":e(_)("No results"),items:e(m),show:v.value,"onUpdate:show":q[6]||(q[6]=j=>v.value=j),modelValue:e(x),"onUpdate:modelValue":q[7]||(q[7]=j=>St(x)?x.value=j:null)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["title","after"]),t(Z,null,{default:l(()=>[s("span",null,u(e(_)("Automatically Add Geolocation")),1),t(te,{checked:e(E),"onToggle:change":q[9]||(q[9]=j=>E.value=j)},null,8,["checked"])]),_:1}),t(Z,null,{default:l(()=>[s("span",null,u(e(_)("Always Show Transaction Pictures")),1),t(te,{checked:z.value,"onToggle:change":q[10]||(q[10]=j=>z.value=j)},null,8,["checked"])]),_:1})]),_:1}),t(J,null,{default:l(()=>[ne(u(e(_)("Account List Page")),1)]),_:1}),t(fe,{strong:"",inset:"",dividers:""},{default:l(()=>[t(Z,{disabled:!e(k),title:e(_)("Accounts Included in Total"),link:"/settings/filter/account?type=accountListTotalAmount"},{after:l(()=>[e(h)?(a(),i(H,{key:0})):e(h)?r("",!0):(a(),$("span",ny,u(e(M)),1))]),_:1},8,["disabled","title"])]),_:1}),t(J,null,{default:l(()=>[ne(u(e(_)("Exchange Rates Data Page")),1)]),_:1}),t(fe,{strong:"",inset:"",dividers:""},{default:l(()=>[t(Z,{link:"#",title:e(_)("Sort by"),after:e(kt)(e(P),e(D)),onClick:q[13]||(q[13]=j=>N.value=!0)},{default:l(()=>[t(Y,{"value-type":"item","key-field":"type","value-field":"type","title-field":"displayName",title:e(_)("Sort by"),"enable-filter":!0,"filter-placeholder":e(_)("Sort by"),"filter-no-items-text":e(_)("No results"),items:e(P),show:N.value,"onUpdate:show":q[11]||(q[11]=j=>N.value=j),modelValue:e(D),"onUpdate:modelValue":q[12]||(q[12]=j=>St(D)?D.value=j:null)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["title","after"])]),_:1})]),_:1})}}}),oy={class:"padding-inline-start"},sy={key:0,class:"margin-horizontal-half"},iy={key:1},ry=Re({__name:"ApplicationCloudSyncSettingsPage",props:{f7router:{}},setup(f){const _=f,{tt:n}=ze(),{showToast:h,routeBackOnError:F}=nt(),{ALL_APPLICATION_CLOUD_SETTINGS:V,loading:k,enabling:A,disabling:C,enabledApplicationCloudSettings:P,isEnableCloudSync:m,hasEnabledApplicationCloudSettings:c,enabledApplicationCloudSettingKeys:b,isAllSettingsSelected:p,hasSettingSelectedButNotAllChecked:d,updateSettingsSelected:x,selectAllSettings:E,selectNoneSettings:D,selectInvertSettings:T,setUserApplicationCloudSettings:M}=Us(),w=el(),U=S(null),I=S(!1);function B(){k.value=!0,w.getUserApplicationCloudSettings().then(z=>{M(z),k.value=!1}).catch(z=>{z.processed?k.value=!1:(U.value=z,h(z.message||z))})}function L(z){A.value=!0,je(()=>A.value),w.fullUpdateUserApplicationCloudSettings(b.value).then(()=>{A.value=!1,Se(),h(z?"Synchronized settings have been updated":"Settings sync has been enabled")}).catch(K=>{A.value=!1,Se(),K.processed||h(K.message||K)})}function v(){C.value=!0,je(()=>C.value),w.disableUserApplicationCloudSettings().then(()=>{P.value={},C.value=!1,Se(),h("Settings sync has been disabled")}).catch(z=>{C.value=!1,Se(),z.processed||h(z.message||z)})}function N(){F(_.f7router,U)}return B(),(z,K)=>{const W=o("f7-nav-left"),q=o("f7-nav-title"),g=o("f7-link"),J=o("f7-nav-right"),te=o("f7-navbar"),Z=o("f7-list-item"),Y=o("f7-list"),H=o("f7-icon"),fe=o("f7-list-button"),ee=o("f7-actions-button"),j=o("f7-actions-group"),O=o("f7-actions"),le=o("f7-page");return a(),i(le,{"onPage:afterin":N},{default:l(()=>[t(te,null,{default:l(()=>[t(W,{"back-link":e(n)("Back")},null,8,["back-link"]),t(q,{title:e(n)("Settings Sync")},null,8,["title"]),t(J,null,{default:l(()=>[t(g,{"icon-f7":"ellipsis",class:R({disabled:e(k)||e(A)||e(C)}),onClick:K[0]||(K[0]=ge=>I.value=!0)},null,8,["class"])]),_:1})]),_:1}),e(k)?(a(),i(Y,{key:0,strong:"",inset:"",dividers:"",class:"margin-vertical skeleton-text"},{default:l(()=>[t(Z,{title:"Status",after:"Unknown"})]),_:1})):e(k)?r("",!0):(a(),i(Y,{key:1,strong:"",inset:"",dividers:"",class:"margin-vertical"},{default:l(()=>[t(Z,{title:e(n)("Status"),after:e(n)(e(m)?"Enabled":"Disabled")},null,8,["title","after"])]),_:1})),t(Y,{strong:"",inset:"",dividers:"",class:R(["margin-vertical synchronized-settings-list",{disabled:e(k)||e(A)||e(C)}])},{default:l(()=>[t(Z,{"group-title":"",sortable:!1},{default:l(()=>[s("small",null,u(e(n)("Synchronized Settings")),1)]),_:1}),(a(!0),$(ke,null,Te(e(V),ge=>(a(),i(Z,{class:"has-child-list-item",checkbox:"",disabled:e(k)||e(A)||e(C),value:ge.categoryName,checked:e(p)(ge),indeterminate:e(d)(ge),key:ge.categoryName,onChange:$e=>e(x)(ge,$e.target.checked)},{root:l(()=>[s("ul",oy,[(a(!0),$(ke,null,Te(ge.items,$e=>(a(),i(Z,{checkbox:"",disabled:e(k)||e(A)||e(C),title:e(n)($e.settingName),value:$e.settingKey,checked:e(P)[$e.settingKey],key:$e.settingKey,onChange:se=>e(P)[$e.settingKey]=se.target.checked},{after:l(()=>[$e.mobile?(a(),i(H,{key:0,class:"synchronized-settings-device-icon",f7:"device_phone_portrait"})):r("",!0),$e.desktop?(a(),i(H,{key:1,class:"synchronized-settings-device-icon",f7:"device_desktop"})):r("",!0)]),_:2},1032,["disabled","title","value","checked","onChange"]))),128))])]),title:l(()=>[s("span",null,u(e(n)(ge.categoryName)),1),ge.categorySubName?(a(),$("span",sy,"/")):r("",!0),ge.categorySubName?(a(),$("span",iy,u(e(n)(ge.categorySubName)),1)):r("",!0)]),_:2},1032,["disabled","value","checked","indeterminate","onChange"]))),128))]),_:1},8,["class"]),e(k)?(a(),i(Y,{key:2,strong:"",inset:"",dividers:"",class:"margin-vertical skeleton-text"},{default:l(()=>[t(fe,{class:"disabled"},{default:l(()=>[...K[4]||(K[4]=[ne("Operate",-1)])]),_:1})]),_:1})):e(k)?r("",!0):(a(),i(Y,{key:3,strong:"",inset:"",dividers:"",class:"margin-vertical"},{default:l(()=>[e(m)?r("",!0):(a(),i(fe,{key:0,class:R({disabled:e(k)||e(A)||e(C)||!e(c)}),onClick:K[1]||(K[1]=ge=>L(!1))},{default:l(()=>[ne(u(e(n)("Enable Settings Sync")),1)]),_:1},8,["class"])),e(m)?(a(),i(fe,{key:1,class:R({disabled:e(k)||e(A)||e(C)||!e(c)}),onClick:K[2]||(K[2]=ge=>L(!0))},{default:l(()=>[ne(u(e(n)("Update Synchronized Settings")),1)]),_:1},8,["class"])):r("",!0),e(m)?(a(),i(fe,{key:2,class:R({disabled:e(k)||e(A)||e(C)}),onClick:v},{default:l(()=>[ne(u(e(n)("Disable")),1)]),_:1},8,["class"])):r("",!0)]),_:1})),t(O,{"close-by-outside-click":"","close-on-escape":"",opened:I.value,"onActions:closed":K[3]||(K[3]=ge=>I.value=!1)},{default:l(()=>[t(j,null,{default:l(()=>[t(ee,{class:R({disabled:e(k)||e(A)||e(C)}),onClick:e(E)},{default:l(()=>[ne(u(e(n)("Select All")),1)]),_:1},8,["class","onClick"]),t(ee,{class:R({disabled:e(k)||e(A)||e(C)}),onClick:e(D)},{default:l(()=>[ne(u(e(n)("Select None")),1)]),_:1},8,["class","onClick"]),t(ee,{class:R({disabled:e(k)||e(A)||e(C)}),onClick:e(T)},{default:l(()=>[ne(u(e(n)("Invert Selection")),1)]),_:1},8,["class","onClick"])]),_:1}),t(j,null,{default:l(()=>[t(ee,{bold:"",close:""},{default:l(()=>[ne(u(e(n)("Cancel")),1)]),_:1})]),_:1})]),_:1},8,["opened"])]),_:1})}}}),uy={key:0,class:"skeleton-text"},cy={key:0,class:"padding-inline-start"},dy=Re({__name:"AccountFilterSettingsPage",props:{f7route:{},f7router:{}},setup(f){const _=f,n=_.f7route.query,{tt:h}=ze(),{showToast:F,routeBackOnError:V}=nt(),{loading:k,showHidden:A,filterAccountIds:C,title:P,applyText:m,allowHiddenAccount:c,allCategorizedAccounts:b,hasAnyAvailableAccount:p,hasAnyVisibleAccount:d,isAccountChecked:x,loadFilterAccountIds:E,saveFilterAccountIds:D}=Bs(n.type),T=ol(),M=S(I()),w=S(null),U=S(!1);function I(){const J={},te=Da.values();for(const Z of te)J[Z.type]={opened:!0};return J}function B(){T.loadAllAccounts({force:!1}).then(()=>{k.value=!1,E()||(F("Parameter Invalid"),w.value="Parameter Invalid")}).catch(J=>{J.processed?k.value=!1:(w.value=J,F(J.message||J))})}function L(J){const te=J.target,Z=te.value,Y=T.allAccountsMap[Z];Y&&Ns(C.value,Y,!te.checked)}function v(J){const te=J.target,Z=te.value,Y=T.allAccountsMap[Z];Y&&(C.value[Y.id]=!te.checked)}function N(){Ms(C.value,T.allAccountsMap,!c.value)}function z(){Es(C.value,T.allAccountsMap,!c.value)}function K(){Ls(C.value,T.allAccountsMap,!c.value)}function W(){Rs(C.value,T.allAccountsMap)}function q(){D(),_.f7router.back()}function g(){V(_.f7router,w)}return B(),(J,te)=>{const Z=o("f7-nav-left"),Y=o("f7-nav-title"),H=o("f7-link"),fe=o("f7-nav-right"),ee=o("f7-navbar"),j=o("f7-icon"),O=o("f7-list-item"),le=o("f7-list"),ge=o("f7-accordion-toggle"),$e=o("f7-block-title"),se=o("f7-accordion-content"),Ze=o("f7-accordion-item"),Me=o("f7-block"),Ue=o("f7-badge"),qe=o("ItemIcon"),he=o("f7-actions-button"),X=o("f7-actions-group"),Ce=o("f7-actions"),pe=o("f7-page");return a(),i(pe,{"onPage:afterin":g},{default:l(()=>[t(ee,null,{default:l(()=>[t(Z,{"back-link":e(h)("Back")},null,8,["back-link"]),t(Y,{title:e(h)(e(P))},null,8,["title"]),t(fe,null,{default:l(()=>[t(H,{"icon-f7":"ellipsis",class:R({disabled:!e(p)}),onClick:te[0]||(te[0]=we=>U.value=!0)},null,8,["class"]),t(H,{text:e(h)(e(m)),class:R({disabled:!e(d)}),onClick:q},null,8,["text","class"])]),_:1})]),_:1}),e(k)?(a(),$("div",uy,[(a(),$(ke,null,Te([1,2,3],we=>t(Me,{class:"combination-list-wrapper margin-vertical",key:we},{default:l(()=>[t(Ze,null,{default:l(()=>[t($e,null,{default:l(()=>[t(ge,null,{default:l(()=>[t(le,{strong:"",inset:"",dividers:"",class:"combination-list-header combination-list-opened"},{default:l(()=>[t(O,{"group-title":""},{default:l(()=>[te[4]||(te[4]=s("small",null,"Account Category",-1)),t(j,{class:"combination-list-chevron-icon",f7:"chevron_up"})]),_:1})]),_:1})]),_:1})]),_:1}),t(se,{style:{height:"auto"}},{default:l(()=>[t(le,{strong:"",inset:"",dividers:"","accordion-list":"",class:"combination-list-content"},{default:l(()=>[(a(!0),$(ke,null,Te(we===1?[1]:[1,2],be=>(a(),i(O,{checkbox:"",class:"disabled",title:"Account Name",key:be},{media:l(()=>[t(j,{f7:"app_fill"})]),_:1}))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)),64))])):r("",!0),!e(k)&&!e(d)?(a(),i(le,{key:1,strong:"",inset:"",dividers:"","accordion-list":"",class:"margin-top"},{default:l(()=>[t(O,{title:e(h)("No available account")},null,8,["title"])]),_:1})):r("",!0),ut(t(Me,{class:"no-margin no-padding"},{default:l(()=>[(a(!0),$(ke,null,Te(e(b),we=>ut((a(),i(Me,{class:"combination-list-wrapper margin-vertical",key:we.category},{default:l(()=>[t(Ze,{opened:M.value[we.category].opened,"onAccordion:open":be=>M.value[we.category].opened=!0,"onAccordion:close":be=>M.value[we.category].opened=!1},{default:l(()=>[t($e,null,{default:l(()=>[t(ge,null,{default:l(()=>[t(le,{strong:"",inset:"",dividers:"",class:R(["combination-list-header",M.value[we.category].opened?"combination-list-opened":"combination-list-closed"])},{default:l(()=>[t(O,{"group-title":""},{default:l(()=>[s("small",null,u(e(h)(we.name)),1),t(j,{class:"combination-list-chevron-icon",f7:M.value[we.category].opened?"chevron_up":"chevron_down"},null,8,["f7"])]),_:2},1024)]),_:2},1032,["class"])]),_:2},1024)]),_:2},1024),t(se,{style:bt({height:M.value[we.category].opened?"auto":""})},{default:l(()=>[t(le,{strong:"",inset:"",dividers:"","accordion-list":"",class:"combination-list-content"},{default:l(()=>[(a(!0),$(ke,null,Te(we.allAccounts,be=>ut((a(),i(O,{checkbox:"",class:R({"has-child-list-item":be.type===e(Ht).MultiSubAccounts.type&&(e(A)&&we.allSubAccounts[be.id]||we.allVisibleSubAccountCounts[be.id])}),title:be.name,value:be.id,checked:e(zs)(be,e(C)),indeterminate:e(Os)(be,e(C)),key:be.id,onChange:L},{media:l(()=>[t(qe,{"icon-type":"account","icon-id":be.icon,color:be.color},{default:l(()=>[be.hidden?(a(),i(Ue,{key:0,color:"gray",class:"right-bottom-icon"},{default:l(()=>[t(j,{f7:"eye_slash_fill"})]),_:1})):r("",!0)]),_:2},1032,["icon-id","color"])]),root:l(()=>[be.type===e(Ht).MultiSubAccounts.type&&(e(A)&&we.allSubAccounts[be.id]||we.allVisibleSubAccountCounts[be.id])?(a(),$("ul",cy,[(a(!0),$(ke,null,Te(we.allSubAccounts[be.id],Be=>ut((a(),i(O,{checkbox:"",title:Be.name,value:Be.id,checked:e(x)(Be,e(C)),key:Be.id,onChange:v},{media:l(()=>[t(qe,{"icon-type":"account","icon-id":Be.icon,color:Be.color},{default:l(()=>[Be.hidden?(a(),i(Ue,{key:0,color:"gray",class:"right-bottom-icon"},{default:l(()=>[t(j,{f7:"eye_slash_fill"})]),_:1})):r("",!0)]),_:2},1032,["icon-id","color"])]),_:2},1032,["title","value","checked"])),[[vt,e(A)||!Be.hidden]])),128))])):r("",!0)]),_:2},1032,["class","title","value","checked","indeterminate"])),[[vt,e(A)||!be.hidden]])),128))]),_:2},1024)]),_:2},1032,["style"])]),_:2},1032,["opened","onAccordion:open","onAccordion:close"])]),_:2},1024)),[[vt,e(A)||we.allVisibleAccountCount>0]])),128))]),_:1},512),[[vt,!e(k)&&e(d)]]),t(Ce,{"close-by-outside-click":"","close-on-escape":"",opened:U.value,"onActions:closed":te[3]||(te[3]=we=>U.value=!1)},{default:l(()=>[t(X,null,{default:l(()=>[t(he,{class:R({disabled:!e(d)}),onClick:N},{default:l(()=>[ne(u(e(h)("Select All")),1)]),_:1},8,["class"]),t(he,{class:R({disabled:!e(d)}),onClick:z},{default:l(()=>[ne(u(e(h)("Select None")),1)]),_:1},8,["class"]),t(he,{class:R({disabled:!e(d)}),onClick:K},{default:l(()=>[ne(u(e(h)("Invert Selection")),1)]),_:1},8,["class"])]),_:1}),e(c)?(a(),i(X,{key:0},{default:l(()=>[t(he,{class:R({disabled:!e(d)}),onClick:W},{default:l(()=>[ne(u(e(h)("Select All Visible")),1)]),_:1},8,["class"])]),_:1})):r("",!0),e(c)?(a(),i(X,{key:1},{default:l(()=>[e(A)?r("",!0):(a(),i(he,{key:0,onClick:te[1]||(te[1]=we=>A.value=!0)},{default:l(()=>[ne(u(e(h)("Show Hidden Accounts")),1)]),_:1})),e(A)?(a(),i(he,{key:1,onClick:te[2]||(te[2]=we=>A.value=!1)},{default:l(()=>[ne(u(e(h)("Hide Hidden Accounts")),1)]),_:1})):r("",!0)]),_:1})):r("",!0),t(X,null,{default:l(()=>[t(he,{bold:"",close:""},{default:l(()=>[ne(u(e(h)("Cancel")),1)]),_:1})]),_:1})]),_:1},8,["opened"])]),_:1})}}}),fy={key:0,class:"skeleton-text"},py={class:"padding-inline-start"},my={key:0,class:"padding-inline-start"},vy=Re({__name:"CategoryFilterSettingsPage",props:{f7route:{},f7router:{}},setup(f){const _=f,n=_.f7route.query,{tt:h}=ze(),{showToast:F,routeBackOnError:V}=nt(),{loading:k,showHidden:A,filterCategoryIds:C,title:P,applyText:m,allTransactionCategories:c,hasAnyAvailableCategory:b,hasAnyVisibleCategory:p,hasAvailableCategory:d,isCategoryChecked:x,getCategoryTypeName:E,loadFilterCategoryIds:D,saveFilterCategoryIds:T}=Ys(n.type,n.allowCategoryTypes),M=sl(),w=S(null),U=S(!1),I=S({[Tt.Income]:{opened:!0},[Tt.Expense]:{opened:!0},[Tt.Transfer]:{opened:!0}});function B(){M.loadAllCategories({force:!1}).then(()=>{k.value=!1,D()||(F("Parameter Invalid"),w.value="Parameter Invalid")}).catch(J=>{J.processed?k.value=!1:(w.value=J,F(J.message||J))})}function L(J){const te=J.target,Z=te.value,Y=M.allTransactionCategoriesMap[Z];Y&&(C.value[Y.id]=!te.checked)}function v(J){const te=J.target,Z=te.value,Y=M.allTransactionCategoriesMap[Z];Hs(C.value,!te.checked,Y)}function N(){qs(C.value,M.allTransactionCategoriesMap)}function z(){Ws(C.value,M.allTransactionCategoriesMap)}function K(){Gs(C.value,M.allTransactionCategoriesMap)}function W(){js(C.value,M.allTransactionCategoriesMap)}function q(){T(),_.f7router.back()}function g(){V(_.f7router,w)}return B(),(J,te)=>{const Z=o("f7-nav-left"),Y=o("f7-nav-title"),H=o("f7-link"),fe=o("f7-nav-right"),ee=o("f7-navbar"),j=o("f7-icon"),O=o("f7-list-item"),le=o("f7-list"),ge=o("f7-accordion-toggle"),$e=o("f7-block-title"),se=o("f7-accordion-content"),Ze=o("f7-accordion-item"),Me=o("f7-block"),Ue=o("f7-badge"),qe=o("ItemIcon"),he=o("f7-actions-button"),X=o("f7-actions-group"),Ce=o("f7-actions"),pe=o("f7-page");return a(),i(pe,{"onPage:afterin":g},{default:l(()=>[t(ee,null,{default:l(()=>[t(Z,{"back-link":e(h)("Back")},null,8,["back-link"]),t(Y,{title:e(h)(e(P))},null,8,["title"]),t(fe,null,{default:l(()=>[t(H,{"icon-f7":"ellipsis",class:R({disabled:!e(b)}),onClick:te[0]||(te[0]=we=>U.value=!0)},null,8,["class"]),t(H,{text:e(h)(e(m)),class:R({disabled:!e(p)}),onClick:q},null,8,["text","class"])]),_:1})]),_:1}),e(k)?(a(),$("div",fy,[(a(),$(ke,null,Te([1,2],we=>t(Me,{class:"combination-list-wrapper margin-vertical",key:we},{default:l(()=>[t(Ze,null,{default:l(()=>[t($e,null,{default:l(()=>[t(ge,null,{default:l(()=>[t(le,{strong:"",inset:"",dividers:"",class:"combination-list-header combination-list-opened"},{default:l(()=>[t(O,{"group-title":""},{default:l(()=>[te[4]||(te[4]=s("small",null,"Transaction Category",-1)),t(j,{class:"combination-list-chevron-icon",f7:"chevron_up"})]),_:1})]),_:1})]),_:1})]),_:1}),t(se,{style:{height:"auto"}},{default:l(()=>[t(le,{strong:"",inset:"",dividers:"","accordion-list":"",class:"combination-list-content"},{default:l(()=>[(a(),$(ke,null,Te([1,2],be=>t(O,{checkbox:"",class:"disabled",title:"Category Name",key:be},{media:l(()=>[t(j,{f7:"app_fill"})]),root:l(()=>[s("ul",py,[(a(),$(ke,null,Te([1,2,3],Be=>t(O,{checkbox:"",class:"disabled",title:"Sub Category Name",key:Be},{media:l(()=>[t(j,{f7:"app_fill"})]),_:1})),64))])]),_:1})),64))]),_:1})]),_:1})]),_:1})]),_:1})),64))])):e(k)?r("",!0):(a(!0),$(ke,{key:1},Te(e(c),we=>(a(),i(Me,{class:"combination-list-wrapper margin-vertical",key:we.type},{default:l(()=>[t(Ze,{opened:I.value[we.type].opened,"onAccordion:open":be=>I.value[we.type].opened=!0,"onAccordion:close":be=>I.value[we.type].opened=!1},{default:l(()=>[t($e,null,{default:l(()=>[t(ge,null,{default:l(()=>[t(le,{strong:"",inset:"",dividers:"",class:R(["combination-list-header",I.value[we.type].opened?"combination-list-opened":"combination-list-closed"])},{default:l(()=>[t(O,{"group-title":""},{default:l(()=>[s("small",null,u(e(E)(we.type)),1),t(j,{class:"combination-list-chevron-icon",f7:I.value[we.type].opened?"chevron_up":"chevron_down"},null,8,["f7"])]),_:2},1024)]),_:2},1032,["class"])]),_:2},1024)]),_:2},1024),t(se,{style:bt({height:I.value[we.type].opened?"auto":""})},{default:l(()=>[e(d)[we.type]?e(d)[we.type]?(a(),i(le,{key:1,strong:"",inset:"",dividers:"","accordion-list":"",class:"combination-list-content"},{default:l(()=>[(a(!0),$(ke,null,Te(we.allCategories,be=>ut((a(),i(O,{checkbox:"",class:R({"has-child-list-item":e(A)&&we.allSubCategories[be.id]||we.allVisibleSubCategoryCounts[be.id]}),title:be.name,value:be.id,checked:e(Zs)(be,e(C)),indeterminate:e(Ks)(be,e(C)),key:be.id,onChange:v},{media:l(()=>[t(qe,{"icon-type":"category","icon-id":be.icon,color:be.color},{default:l(()=>[be.hidden?(a(),i(Ue,{key:0,color:"gray",class:"right-bottom-icon"},{default:l(()=>[t(j,{f7:"eye_slash_fill"})]),_:1})):r("",!0)]),_:2},1032,["icon-id","color"])]),root:l(()=>[e(A)&&we.allSubCategories[be.id]||we.allVisibleSubCategoryCounts[be.id]?(a(),$("ul",my,[(a(!0),$(ke,null,Te(we.allSubCategories[be.id],Be=>ut((a(),i(O,{checkbox:"",title:Be.name,value:Be.id,checked:e(x)(Be,e(C)),key:Be.id,onChange:L},{media:l(()=>[t(qe,{"icon-type":"category","icon-id":Be.icon,color:Be.color},{default:l(()=>[Be.hidden?(a(),i(Ue,{key:0,color:"gray",class:"right-bottom-icon"},{default:l(()=>[t(j,{f7:"eye_slash_fill"})]),_:1})):r("",!0)]),_:2},1032,["icon-id","color"])]),_:2},1032,["title","value","checked"])),[[vt,e(A)||!Be.hidden]])),128))])):r("",!0)]),_:2},1032,["class","title","value","checked","indeterminate"])),[[vt,e(A)||!be.hidden]])),128))]),_:2},1024)):r("",!0):(a(),i(le,{key:0,strong:"",inset:"",dividers:"","accordion-list":"",class:"combination-list-content"},{default:l(()=>[t(O,{title:e(h)("No available category")},null,8,["title"])]),_:1}))]),_:2},1032,["style"])]),_:2},1032,["opened","onAccordion:open","onAccordion:close"])]),_:2},1024))),128)),t(Ce,{"close-by-outside-click":"","close-on-escape":"",opened:U.value,"onActions:closed":te[3]||(te[3]=we=>U.value=!1)},{default:l(()=>[t(X,null,{default:l(()=>[t(he,{class:R({disabled:!e(p)}),onClick:N},{default:l(()=>[ne(u(e(h)("Select All")),1)]),_:1},8,["class"]),t(he,{class:R({disabled:!e(p)}),onClick:z},{default:l(()=>[ne(u(e(h)("Select None")),1)]),_:1},8,["class"]),t(he,{class:R({disabled:!e(p)}),onClick:K},{default:l(()=>[ne(u(e(h)("Invert Selection")),1)]),_:1},8,["class"])]),_:1}),t(X,null,{default:l(()=>[t(he,{class:R({disabled:!e(p)}),onClick:W},{default:l(()=>[ne(u(e(h)("Select All Visible")),1)]),_:1},8,["class"])]),_:1}),t(X,null,{default:l(()=>[e(A)?r("",!0):(a(),i(he,{key:0,onClick:te[1]||(te[1]=we=>A.value=!0)},{default:l(()=>[ne(u(e(h)("Show Hidden Transaction Categories")),1)]),_:1})),e(A)?(a(),i(he,{key:1,onClick:te[2]||(te[2]=we=>A.value=!1)},{default:l(()=>[ne(u(e(h)("Hide Hidden Transaction Categories")),1)]),_:1})):r("",!0)]),_:1}),t(X,null,{default:l(()=>[t(he,{bold:"",close:""},{default:l(()=>[ne(u(e(h)("Cancel")),1)]),_:1})]),_:1})]),_:1},8,["opened"])]),_:1})}}}),gy=Re({__name:"TransactionTagFilterSettingsPage",props:{f7route:{},f7router:{}},setup(f){const _=f,n=_.f7route.query,{tt:h}=ze(),{showToast:F,routeBackOnError:V}=nt(),{loading:k,showHidden:A,filterTagIds:C,tagFilterType:P,title:m,applyText:c,allTags:b,allTagFilterTypes:p,hasAnyAvailableTag:d,hasAnyVisibleTag:x,loadFilterTagIds:E,saveFilterTagIds:D}=Xs(n.type),T=on(),M=S(null),w=S(!1),U=S({default:{opened:!0}});function I(){T.loadAllTags({force:!1}).then(()=>{k.value=!1,E()||(F("Parameter Invalid"),M.value="Parameter Invalid")}).catch(q=>{q.processed?k.value=!1:(M.value=q,F(q.message||q))})}function B(q){const g=q.target,J=g.value,te=T.allTransactionTagsMap[J];te&&(C.value[te.id]=!g.checked)}function L(){Qs(C.value,T.allTransactionTagsMap)}function v(){Js(C.value,T.allTransactionTagsMap)}function N(){ei(C.value,T.allTransactionTagsMap)}function z(){ti(C.value,T.allTransactionTagsMap)}function K(){D(),_.f7router.back()}function W(){V(_.f7router,M)}return I(),(q,g)=>{const J=o("f7-nav-left"),te=o("f7-nav-title"),Z=o("f7-link"),Y=o("f7-nav-right"),H=o("f7-navbar"),fe=o("f7-icon"),ee=o("f7-list-item"),j=o("f7-list"),O=o("f7-accordion-toggle"),le=o("f7-block-title"),ge=o("f7-accordion-content"),$e=o("f7-accordion-item"),se=o("f7-block"),Ze=o("f7-badge"),Me=o("f7-actions-button"),Ue=o("f7-actions-group"),qe=o("f7-actions"),he=o("f7-page");return a(),i(he,{"onPage:afterin":W},{default:l(()=>[t(H,null,{default:l(()=>[t(J,{"back-link":e(h)("Back")},null,8,["back-link"]),t(te,{title:e(h)(e(m))},null,8,["title"]),t(Y,null,{default:l(()=>[t(Z,{"icon-f7":"ellipsis",class:R({disabled:!e(d)}),onClick:g[0]||(g[0]=X=>w.value=!0)},null,8,["class"]),t(Z,{text:e(h)(e(c)),class:R({disabled:!e(x)}),onClick:K},null,8,["text","class"])]),_:1})]),_:1}),e(k)?(a(),i(se,{key:0,class:"combination-list-wrapper margin-vertical skeleton-text"},{default:l(()=>[t($e,null,{default:l(()=>[t(le,null,{default:l(()=>[t(O,null,{default:l(()=>[t(j,{strong:"",inset:"",dividers:"",class:"combination-list-header combination-list-opened"},{default:l(()=>[t(ee,{"group-title":""},{default:l(()=>[g[6]||(g[6]=s("small",null,"Tags",-1)),t(fe,{class:"combination-list-chevron-icon",f7:"chevron_up"})]),_:1})]),_:1})]),_:1})]),_:1}),t(ge,{style:{height:"auto"}},{default:l(()=>[t(j,{strong:"",inset:"",dividers:"","accordion-list":"",class:"combination-list-content"},{default:l(()=>[(a(),$(ke,null,Te([1,2,3],X=>t(ee,{checkbox:"",class:"disabled",title:"Tag Name",key:X},{media:l(()=>[t(fe,{f7:"app_fill"})]),_:1})),64))]),_:1})]),_:1})]),_:1})]),_:1})):r("",!0),!e(k)&&!e(x)?(a(),i(j,{key:1,strong:"",inset:"",dividers:"","accordion-list":"",class:"margin-top"},{default:l(()=>[t(ee,{title:e(h)("No available tag")},null,8,["title"])]),_:1})):r("",!0),ut(t(se,{class:"combination-list-wrapper margin-vertical",key:"default"},{default:l(()=>[e(n).type==="statisticsCurrent"?(a(),i(j,{key:0,class:"margin-top-half margin-bottom",strong:"",inset:"",dividers:""},{default:l(()=>[(a(!0),$(ke,null,Te(e(p),X=>(a(),i(ee,{radio:"",title:X.displayName,value:X.type,checked:e(P)===X.type,key:X.type,onChange:Ce=>P.value=X.type},null,8,["title","value","checked","onChange"]))),128))]),_:1})):r("",!0),t($e,{opened:U.value.default.opened,"onAccordion:open":g[1]||(g[1]=X=>U.value.default.opened=!0),"onAccordion:close":g[2]||(g[2]=X=>U.value.default.opened=!1)},{default:l(()=>[t(le,null,{default:l(()=>[t(O,null,{default:l(()=>[t(j,{strong:"",inset:"",dividers:"",class:R(["combination-list-header",U.value.default.opened?"combination-list-opened":"combination-list-closed"])},{default:l(()=>[t(ee,{"group-title":""},{default:l(()=>[s("small",null,u(e(h)("Tags")),1),t(fe,{class:"combination-list-chevron-icon",f7:U.value.default.opened?"chevron_up":"chevron_down"},null,8,["f7"])]),_:1})]),_:1},8,["class"])]),_:1})]),_:1}),t(ge,{style:bt({height:U.value.default.opened?"auto":""})},{default:l(()=>[t(j,{strong:"",inset:"",dividers:"","accordion-list":"",class:"combination-list-content"},{default:l(()=>[(a(!0),$(ke,null,Te(e(b),X=>ut((a(),i(ee,{checkbox:"",title:X.name,value:X.id,checked:!e(C)[X.id],key:X.id,onChange:B},{media:l(()=>[t(fe,{class:"transaction-tag-icon",f7:"number"},{default:l(()=>[X.hidden?(a(),i(Ze,{key:0,color:"gray",class:"right-bottom-icon"},{default:l(()=>[t(fe,{f7:"eye_slash_fill"})]),_:1})):r("",!0)]),_:2},1024)]),_:2},1032,["title","value","checked"])),[[vt,e(A)||!X.hidden]])),128))]),_:1})]),_:1},8,["style"])]),_:1},8,["opened"])]),_:1},512),[[vt,!e(k)&&e(x)]]),t(qe,{"close-by-outside-click":"","close-on-escape":"",opened:w.value,"onActions:closed":g[5]||(g[5]=X=>w.value=!1)},{default:l(()=>[t(Ue,null,{default:l(()=>[t(Me,{class:R({disabled:!e(x)}),onClick:L},{default:l(()=>[ne(u(e(h)("Select All")),1)]),_:1},8,["class"]),t(Me,{class:R({disabled:!e(x)}),onClick:v},{default:l(()=>[ne(u(e(h)("Select None")),1)]),_:1},8,["class"]),t(Me,{class:R({disabled:!e(x)}),onClick:N},{default:l(()=>[ne(u(e(h)("Invert Selection")),1)]),_:1},8,["class"])]),_:1}),t(Ue,null,{default:l(()=>[t(Me,{class:R({disabled:!e(x)}),onClick:z},{default:l(()=>[ne(u(e(h)("Select All Visible")),1)]),_:1},8,["class"])]),_:1}),t(Ue,null,{default:l(()=>[e(A)?r("",!0):(a(),i(Me,{key:0,onClick:g[3]||(g[3]=X=>A.value=!0)},{default:l(()=>[ne(u(e(h)("Show Hidden Transaction Tags")),1)]),_:1})),e(A)?(a(),i(Me,{key:1,onClick:g[4]||(g[4]=X=>A.value=!1)},{default:l(()=>[ne(u(e(h)("Hide Hidden Transaction Tags")),1)]),_:1})):r("",!0)]),_:1}),t(Ue,null,{default:l(()=>[t(Me,{bold:"",close:""},{default:l(()=>[ne(u(e(h)("Cancel")),1)]),_:1})]),_:1})]),_:1},8,["opened"])]),_:1})}}}),yy=Re({__name:"SettingsPage",props:{f7router:{}},setup(f){const _=f,{tt:n,formatUnixTimeToLongDate:h,initLocale:F}=ze(),{showToast:V,showConfirm:k}=nt(),{allThemes:A,allTimezones:C,timeZone:P,isAutoUpdateExchangeRatesData:m,showAccountBalance:c}=Fa(),b=El(),p=Ll(),d=el(),x=xn(),E=`${li()}`,D=S(!1),T=S(!1),M=S(!1),w=re(()=>d.currentUserNickname||n("User")),U=re({get:()=>p.appSettings.theme,set:W=>{W!==p.appSettings.theme&&(p.setTheme(W),location.reload())}}),I=re(()=>{for(const W of C.value)if(W.name===P.value)return W.displayNameWithUtcOffset;return""}),B=re({get:()=>p.appSettings.swipeBack,set:W=>{W!==p.appSettings.swipeBack&&(p.setEnableSwipeBack(W),location.reload())}}),L=re({get:()=>p.appSettings.animate,set:W=>{W!==p.appSettings.animate&&(p.setEnableAnimate(W),location.reload())}}),v=re(()=>p.appSettings.applicationLock),N=re(()=>{const W=x.exchangeRatesLastUpdateTime;return W?h(W):""});function z(){k("Are you sure you want to switch to desktop version?",()=>{window.location.replace(Ca())})}function K(){k("Are you sure you want to log out?",()=>{D.value=!0,je(()=>D.value),b.logout().then(()=>{D.value=!1,Se(),p.clearAppSettings();const W=F(d.currentUserLanguage,p.appSettings.timeZone);p.updateLocalizedDefaultSettings(W),Wn(d.currentUserExpenseAmountColor,d.currentUserIncomeAmountColor),_.f7router.navigate("/")}).catch(W=>{D.value=!1,Se(),W.processed||V(W.message||W)})})}return(W,q)=>{const g=o("f7-navbar"),J=o("f7-block-title"),te=o("f7-list-item"),Z=o("f7-list-button"),Y=o("f7-list"),H=o("list-item-selection-popup"),fe=o("f7-toggle"),ee=o("f7-page");return a(),i(ee,null,{default:l(()=>[t(g,{title:e(n)("Settings"),"back-link":e(n)("Back")},null,8,["title","back-link"]),t(J,{class:"margin-top"},{default:l(()=>[ne(u(w.value),1)]),_:1}),t(Y,{strong:"",inset:"",dividers:""},{default:l(()=>[t(te,{title:e(n)("User Profile"),link:"/user/profile"},null,8,["title"]),t(te,{title:e(n)("Transaction Categories"),link:"/category/all"},null,8,["title"]),t(te,{title:e(n)("Transaction Tags"),link:"/tag/list"},null,8,["title"]),t(te,{title:e(n)("Transaction Templates"),link:"/template/list"},null,8,["title"]),e(ni)()?(a(),i(te,{key:0,title:e(n)("Scheduled Transactions"),link:"/schedule/list"},null,8,["title"])):r("",!0),t(te,{title:e(n)("Data Management"),link:"/user/data/management"},null,8,["title"]),t(te,{title:e(n)("Two-Factor Authentication"),link:"/user/2fa"},null,8,["title"]),t(te,{title:e(n)("Device & Sessions"),link:"/user/sessions"},null,8,["title"]),t(Z,{class:R({disabled:D.value}),onClick:K},{default:l(()=>[ne(u(e(n)("Log Out")),1)]),_:1},8,["class"])]),_:1}),t(J,null,{default:l(()=>[ne(u(e(n)("Application")),1)]),_:1}),t(Y,{strong:"",inset:"",dividers:"",class:"settings-list"},{default:l(()=>[t(te,{link:"#",title:e(n)("Theme"),after:e(Pa)(e(A),U.value),onClick:q[2]||(q[2]=j=>T.value=!0)},{default:l(()=>[t(H,{"value-type":"item","key-field":"value","value-field":"value","title-field":"name",title:e(n)("Theme"),"enable-filter":!0,"filter-placeholder":e(n)("Theme"),"filter-no-items-text":e(n)("No results"),items:e(A),show:T.value,"onUpdate:show":q[0]||(q[0]=j=>T.value=j),modelValue:U.value,"onUpdate:modelValue":q[1]||(q[1]=j=>U.value=j)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["title","after"]),t(te,{title:e(n)("Text Size"),link:"/settings/textsize"},null,8,["title"]),t(te,{link:"#",title:e(n)("Timezone"),after:I.value,onClick:q[5]||(q[5]=j=>M.value=!0)},{default:l(()=>[t(H,{"value-type":"item","key-field":"name","value-field":"name","title-field":"displayNameWithUtcOffset",title:e(n)("Timezone"),"enable-filter":!0,"filter-placeholder":e(n)("Timezone"),"filter-no-items-text":e(n)("No results"),items:e(C),show:M.value,"onUpdate:show":q[3]||(q[3]=j=>M.value=j),modelValue:e(P),"onUpdate:modelValue":q[4]||(q[4]=j=>St(P)?P.value=j:null)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["title","after"]),t(te,{title:e(n)("Application Lock"),after:v.value?e(n)("Enabled"):e(n)("Disabled"),link:"/app_lock"},null,8,["title","after"]),t(te,{title:e(n)("Exchange Rates Data"),after:N.value,link:"/exchange_rates"},null,8,["title","after"]),t(te,null,{default:l(()=>[s("span",null,u(e(n)("Auto-update Exchange Rates Data")),1),t(fe,{checked:e(m),"onToggle:change":q[6]||(q[6]=j=>m.value=j)},null,8,["checked"])]),_:1}),t(te,null,{default:l(()=>[s("span",null,u(e(n)("Show Account Balance")),1),t(fe,{checked:e(c),"onToggle:change":q[7]||(q[7]=j=>c.value=j)},null,8,["checked"])]),_:1}),t(te,{title:e(n)("Page Settings"),link:"/settings/page"},null,8,["title"]),t(te,{title:e(n)("Statistics Settings"),link:"/statistic/settings"},null,8,["title"]),t(te,{title:e(n)("Settings Sync"),link:"/settings/sync"},null,8,["title"]),t(te,null,{default:l(()=>[s("span",null,u(e(n)("Enable Swipe Back")),1),t(fe,{checked:B.value,"onToggle:change":q[8]||(q[8]=j=>B.value=j)},null,8,["checked"])]),_:1}),t(te,null,{default:l(()=>[s("span",null,u(e(n)("Enable Animation")),1),t(fe,{checked:L.value,"onToggle:change":q[9]||(q[9]=j=>L.value=j)},null,8,["checked"])]),_:1}),t(te,{link:"#","no-chevron":"",title:e(n)("Switch to Desktop Version"),onClick:z},null,8,["title"]),t(te,{title:e(n)("About"),link:"/about",after:E},null,8,["title"])]),_:1})]),_:1})}}}),hy=Re({__name:"ApplicationLockPage",setup(f){const{tt:_}=ze(),{showToast:n}=nt(),{isSupportedWebAuthn:h,isEnableApplicationLock:F,isEnableApplicationLockWebAuthn:V}=ai(),k=Ll(),A=el(),C=Ml(),P=S(""),m=S(""),c=S(!1),b=S(!1);function p(x){if(k.appSettings.applicationLock){n("Application lock has been enabled");return}if(!x){P.value="",c.value=!0;return}if(!P.value||P.value.length!==6){Gl(()=>{P.value=""}),n("Invalid PIN code");return}const E=A.currentUserBasicInfo;if(!E||!E.username){Gl(()=>{P.value=""}),n("An error occurred");return}oi(E.username,x),k.setEnableApplicationLock(!0),C.saveTransactionDraft(),k.setEnableApplicationLockWebAuthn(!1),bn(),c.value=!1}function d(x){if(!k.appSettings.applicationLock){n("Application lock is not enabled");return}if(!x){m.value="",b.value=!0;return}if(!si(x)){Gl(()=>{m.value=""}),n("Incorrect PIN code");return}ii(),k.setEnableApplicationLock(!1),C.saveTransactionDraft(),k.setEnableApplicationLockWebAuthn(!1),bn(),b.value=!1}return Dl(V,x=>{const E=ri();x&&E&&A.currentUserBasicInfo?(je(),ui(E,A.currentUserBasicInfo).then(({id:D})=>{Se(),ci(D),k.setEnableApplicationLockWebAuthn(!0),n("You have enabled WebAuthn successfully")}).catch(D=>{_l.error("failed to enable WebAuthn",D),Se(),D.notSupported?n("WebAuth is not supported on this device"):D.name==="NotAllowedError"?n("User has canceled authentication"):D.invalid?n("Failed to enable WebAuthn"):n("User has canceled or this device does not support WebAuthn"),V.value=!1,k.setEnableApplicationLockWebAuthn(!1),bn()})):(k.setEnableApplicationLockWebAuthn(!1),bn())}),(x,E)=>{const D=o("f7-nav-left"),T=o("f7-nav-title"),M=o("f7-navbar"),w=o("f7-list-item"),U=o("f7-toggle"),I=o("f7-list-button"),B=o("f7-list"),L=o("pin-code-input-sheet"),v=o("f7-page");return a(),i(v,null,{default:l(()=>[t(M,null,{default:l(()=>[t(D,{"back-link":e(_)("Back")},null,8,["back-link"]),t(T,{title:e(_)("Application Lock")},null,8,["title"])]),_:1}),t(B,{strong:"",inset:"",dividers:"",class:"margin-top"},{default:l(()=>[t(w,{title:e(_)("Status"),after:e(_)(e(F)?"Enabled":"Disabled")},null,8,["title","after"]),e(F)?(a(),i(w,{key:0},{default:l(()=>[s("span",null,u(e(_)("Unlock with PIN Code")),1),t(U,{checked:"",disabled:""})]),_:1})):r("",!0),e(F)&&e(h)?(a(),i(w,{key:1},{default:l(()=>[s("span",null,u(e(_)("Unlock with WebAuthn")),1),t(U,{checked:e(V),"onToggle:change":E[0]||(E[0]=N=>V.value=N)},null,8,["checked"])]),_:1})):r("",!0),e(F)?(a(),i(I,{key:2,onClick:E[1]||(E[1]=N=>d(null))},{default:l(()=>[ne(u(e(_)("Disable")),1)]),_:1})):r("",!0),e(F)?r("",!0):(a(),i(I,{key:3,onClick:E[2]||(E[2]=N=>p(null))},{default:l(()=>[ne(u(e(_)("Enable")),1)]),_:1}))]),_:1}),t(L,{title:e(_)("PIN Code"),hint:e(_)("Please enter a new 6-digit PIN code. The PIN code would encrypt your local data, so you need to enter it every time you open this app. If this PIN code is lost, you will need to log in again."),show:c.value,"onUpdate:show":E[3]||(E[3]=N=>c.value=N),modelValue:P.value,"onUpdate:modelValue":E[4]||(E[4]=N=>P.value=N),"onPincode:confirm":p},null,8,["title","hint","show","modelValue"]),t(L,{title:e(_)("PIN Code"),hint:e(_)("Your current PIN code is required to disable application lock."),show:b.value,"onUpdate:show":E[5]||(E[5]=N=>b.value=N),modelValue:m.value,"onUpdate:modelValue":E[6]||(E[6]=N=>m.value=N),"onPincode:confirm":d},null,8,["title","hint","show","modelValue"])]),_:1})}}}),_y={class:"no-padding no-margin"},ky={class:"smaller"},by={class:"no-padding no-margin"},wy={style:{"margin-inline-end":"5px"}},Ty={class:"smaller"},Cy={key:1},Sy={key:2},xy=Re({__name:"ListPage",props:{f7router:{}},setup(f){const _=f,{tt:n,getCurrentLanguageTextDirection:h,getCurrentNumeralSystemType:F,getCurrencyName:V,formatAmountToLocalizedNumerals:k,formatExchangeRateAmountToWesternArabicNumerals:A}=ze(),{showAlert:C,showToast:P,openExternalUrl:m}=nt(),{baseCurrency:c,baseAmount:b,defaultCurrency:p,exchangeRatesData:d,isUserCustomExchangeRates:x,exchangeRatesDataUpdateTime:E,availableExchangeRates:D,getConvertedAmount:T,setAsBaseline:M}=di(),w=xn(),U=S(!1),I=S(xl()),B=S(!1),L=S(!1),v=S(!1),N=S(!1),z=S(null),K=S(!1),W=re(()=>h()),q=re(()=>F()),g=re(()=>k(b.value,c.value)),J=re(()=>b.value>=1e8||b.value<=-1e8?"ebk-small-amount":b.value>=1e6||b.value<=-1e6?"ebk-normal-amount":"ebk-large-amount");function te(j){return"exchangeRate_"+j.currencyCode}function Z(j){if(U.value){j?.();return}U.value=!0,j||je(),w.getLatestExchangeRates({silent:!1,force:!0}).then(()=>{j?.(),U.value=!1,Se(),P("Exchange rates data has been updated")}).catch(O=>{j?.(),U.value=!1,Se(),O.processed||P(O.message||O)})}function Y(){_.f7router.navigate("/exchange_rates/update")}function H(j,O){if(!j){C("An error occurred");return}if(!O){z.value=j,K.value=!0;return}K.value=!1,z.value=null,je(),w.deleteUserCustomExchangeRate({currency:j.currencyCode,beforeResolve:le=>{Il(te(j),le)}}).then(()=>{j.currencyCode===c.value&&(c.value=p.value),Se()}).catch(le=>{Se(),le.processed||P(le.message||le)})}function fe(j,O){const le=w.latestExchangeRateMap[c.value],ge=T(b.value/100,le,j);if(!ge)return O?q.value.digitZero:ul.WesternArabicNumerals.digitZero;let $e=A(ge);return O&&($e=q.value.replaceWesternArabicDigitsToLocalizedDigits($e)),$e}function ee(){I.value=xl(),B.value=!1}return w.getLatestExchangeRates({silent:!0,force:!1}).then(()=>{if(d.value&&d.value.exchangeRates){const j=d.value.exchangeRates;let O=!1;for(const le of j)if(le.currency===c.value){O=!0;break}O||P("There is no exchange rates data for your default currency")}}),(j,O)=>{const le=o("f7-nav-left"),ge=o("f7-nav-title"),$e=o("f7-link"),se=o("f7-nav-right"),Ze=o("f7-navbar"),Me=o("list-item-selection-popup"),Ue=o("f7-list-item"),qe=o("number-pad-sheet"),he=o("f7-list"),X=o("f7-swipeout-button"),Ce=o("f7-icon"),pe=o("f7-swipeout-actions"),we=o("f7-actions-button"),be=o("f7-actions-group"),Be=o("f7-actions"),ce=o("f7-actions-label"),ae=o("f7-page");return a(),i(ae,{ptr:"","onPtr:refresh":Z},{default:l(()=>[t(Ze,null,{default:l(()=>[t(le,{"back-link":e(n)("Back")},null,8,["back-link"]),t(ge,{title:e(n)("Exchange Rates Data")},null,8,["title"]),t(se,null,{default:l(()=>[t($e,{"icon-f7":"ellipsis",onClick:O[0]||(O[0]=oe=>L.value=!0)})]),_:1})]),_:1}),e(d)&&e(d).exchangeRates&&e(d).exchangeRates.length?(a(),i(he,{key:0,strong:"",inset:"",dividers:"",class:"margin-vertical"},{default:l(()=>[t(Ue,{class:"list-item-with-header-and-title list-item-no-item-after",link:"#",header:e(n)("Base Currency"),onClick:O[3]||(O[3]=oe=>v.value=!0)},{title:l(()=>[s("div",_y,[s("span",null,u(e(V)(e(c)))+"",1),s("small",ky,u(e(c)),1)])]),default:l(()=>[t(Me,{"value-type":"item","key-field":"currencyCode","value-field":"currencyCode","title-field":"currencyDisplayName","after-field":"currencyCode",title:e(n)("Base Currency"),"enable-filter":!0,"filter-placeholder":e(n)("Currency"),"filter-no-items-text":e(n)("No results"),items:e(D),show:v.value,"onUpdate:show":O[1]||(O[1]=oe=>v.value=oe),modelValue:e(c),"onUpdate:modelValue":O[2]||(O[2]=oe=>St(c)?c.value=oe:null)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["header"]),t(Ue,{class:R(["currency-base-amount",J.value]),link:"#","no-chevron":"",header:e(n)("Base Amount"),title:g.value,onClick:O[6]||(O[6]=oe=>N.value=!0)},{default:l(()=>[t(qe,{"min-value":e($l),"max-value":e(Al),currency:e(c),show:N.value,"onUpdate:show":O[4]||(O[4]=oe=>N.value=oe),modelValue:e(b),"onUpdate:modelValue":O[5]||(O[5]=oe=>St(b)?b.value=oe:null)},null,8,["min-value","max-value","currency","show","modelValue"])]),_:1},8,["class","header","title"])]),_:1})):r("",!0),!e(d)||!e(d).exchangeRates||!e(d).exchangeRates.length?(a(),i(he,{key:1,strong:"",inset:"",dividers:"",class:"margin-vertical"},{default:l(()=>[t(Ue,{title:e(n)("No exchange rates data")},null,8,["title"])]),_:1})):r("",!0),e(d)&&e(d).exchangeRates&&e(d).exchangeRates.length?(a(),i(he,{key:2,strong:"",inset:"",dividers:"",class:"margin-vertical"},{default:l(()=>[(a(!0),$(ke,null,Te(e(D),oe=>(a(),i(Ue,{swipeout:"",id:te(oe),after:fe(oe,!0),key:I.value+"_"+oe.currencyCode,"onSwipeout:closed":O[7]||(O[7]=Pe=>ee())},{title:l(()=>[s("div",by,[s("span",wy,u(oe.currencyDisplayName),1),s("small",Ty,u(oe.currencyCode),1)])]),default:l(()=>[oe.currencyCode!==e(c)||oe.currencyCode!==e(p)&&e(x)?(a(),i(pe,{key:0,left:W.value===e(wt).RTL,right:W.value===e(wt).LTR},{default:l(()=>[B.value||oe.currencyCode!==e(c)?(a(),i(X,{key:0,color:"primary",close:"",text:e(n)("Set as Base"),class:R({disabled:oe.currencyCode===e(c)}),onClick:Pe=>{e(M)(oe.currencyCode,fe(oe,!1)),B.value=!0}},null,8,["text","class","onClick"])):r("",!0),oe.currencyCode!==e(p)&&e(x)?(a(),i(X,{key:1,color:"red",class:"padding-horizontal",onClick:Pe=>H(oe,!1)},{default:l(()=>[t(Ce,{f7:"trash"})]),_:1},8,["onClick"])):r("",!0)]),_:2},1032,["left","right"])):r("",!0)]),_:2},1032,["id","after"]))),128))]),_:1})):r("",!0),e(d)&&e(d).exchangeRates&&e(d).exchangeRates.length?(a(),i(he,{key:3,strong:"",inset:"",dividers:"",class:"margin-vertical"},{default:l(()=>[e(E)?(a(),i(Ue,{key:0},{default:l(()=>[s("small",null,u(e(n)("Last Updated")),1),s("small",null,u(e(E)),1)]),_:1})):r("",!0),t(Ue,null,{default:l(()=>[s("small",null,u(e(n)("Data source")),1),s("small",null,[!e(x)&&e(d).referenceUrl?(a(),i($e,{key:0,onClick:O[8]||(O[8]=oe=>e(m)(e(d).referenceUrl))},{default:l(()=>[ne(u(e(d).dataSource),1)]),_:1})):!e(x)&&!e(d).referenceUrl?(a(),$("span",Cy,u(e(d).dataSource),1)):e(x)?(a(),$("span",Sy,u(e(n)("User Custom")),1)):r("",!0)])]),_:1})]),_:1})):r("",!0),t(Be,{"close-by-outside-click":"","close-on-escape":"",opened:L.value,"onActions:closed":O[11]||(O[11]=oe=>L.value=!1)},{default:l(()=>[e(x)?(a(),i(be,{key:0},{default:l(()=>[t(we,{class:R({disabled:U.value}),onClick:O[9]||(O[9]=oe=>Y())},{default:l(()=>[s("span",null,u(e(n)("Update")),1)]),_:1},8,["class"])]),_:1})):r("",!0),t(be,null,{default:l(()=>[t(we,{class:R({disabled:U.value}),onClick:O[10]||(O[10]=oe=>Z(void 0))},{default:l(()=>[s("span",null,u(e(n)("Refresh")),1)]),_:1},8,["class"])]),_:1}),t(be,null,{default:l(()=>[t(we,{bold:"",close:""},{default:l(()=>[ne(u(e(n)("Cancel")),1)]),_:1})]),_:1})]),_:1},8,["opened"]),t(Be,{"close-by-outside-click":"","close-on-escape":"",opened:K.value,"onActions:closed":O[13]||(O[13]=oe=>K.value=!1)},{default:l(()=>[t(be,null,{default:l(()=>[t(ce,null,{default:l(()=>[ne(u(e(n)("Are you sure you want to delete this user custom exchange rate?")),1)]),_:1}),t(we,{color:"red",onClick:O[12]||(O[12]=oe=>H(z.value,!0))},{default:l(()=>[ne(u(e(n)("Delete")),1)]),_:1})]),_:1}),t(be,null,{default:l(()=>[t(we,{bold:"",close:""},{default:l(()=>[ne(u(e(n)("Cancel")),1)]),_:1})]),_:1})]),_:1},8,["opened"])]),_:1})}}}),Ay={class:"no-padding no-margin"},$y={class:"smaller"},Dy={class:"no-padding no-margin"},Iy={class:"smaller"},Vy=Re({__name:"UpdatePage",props:{f7router:{}},setup(f){const _=f,{tt:n,getAllCurrencies:h,getCurrencyName:F}=ze(),{showToast:V}=nt(),k=el(),A=xn(),C=S(!1),P=S(k.currentUserDefaultCurrency),m=S(1),c=S(k.currentUserDefaultCurrency),b=S(1),p=S(!1),d=re(()=>h());function x(){m.value=1,c.value=k.currentUserDefaultCurrency,b.value=1}function E(){const D=_.f7router;C.value=!0,je(()=>C.value),A.updateUserCustomExchangeRate({currency:c.value,rate:b.value/m.value}).then(()=>{C.value=!1,Se(),V("You have updated exchange rate"),D.back()}).catch(T=>{C.value=!1,Se(),T.processed||V(T.message||T)})}return x(),(D,T)=>{const M=o("f7-nav-left"),w=o("f7-nav-title"),U=o("f7-link"),I=o("f7-nav-right"),B=o("f7-navbar"),L=o("list-number-input"),v=o("f7-list-item"),N=o("f7-list"),z=o("f7-icon"),K=o("f7-block"),W=o("list-item-selection-popup"),q=o("f7-page");return a(),i(q,null,{default:l(()=>[t(B,null,{default:l(()=>[t(M,{"back-link":e(n)("Back")},null,8,["back-link"]),t(w,{title:e(n)("Update User Custom Exchange Rate")},null,8,["title"]),t(I,null,{default:l(()=>[t(U,{class:R({disabled:C.value||!m.value||!c.value||!b.value}),text:e(n)("Update"),onClick:E},null,8,["class","text"])]),_:1})]),_:1}),t(N,{form:"",strong:"",inset:"",dividers:"",class:"margin-vertical"},{list:l(()=>[t(L,{disabled:C.value,label:e(n)("Amount"),placeholder:e(n)("Amount"),"min-value":e(da),"max-value":e(ca),"max-decimal-count":4,modelValue:m.value,"onUpdate:modelValue":T[0]||(T[0]=g=>m.value=g)},null,8,["disabled","label","placeholder","min-value","max-value","modelValue"])]),default:l(()=>[t(v,{class:R(["list-item-with-header-and-title list-item-no-item-after",{disabled:!0}]),link:"#",header:e(n)("Currency"),"no-chevron":!0},{title:l(()=>[s("div",Ay,[s("span",null,u(e(F)(P.value))+"",1),s("small",$y,u(P.value),1)])]),_:1},8,["header"])]),_:1}),t(K,{class:"display-flex justify-content-center full-line margin-vertical"},{default:l(()=>[t(z,{class:"separate-icon",f7:"arrow_up_arrow_down"})]),_:1}),t(N,{form:"",strong:"",inset:"",dividers:"",class:"margin-vertical"},{list:l(()=>[t(L,{disabled:C.value,label:e(n)("Amount"),placeholder:e(n)("Amount"),"min-value":e(da),"max-value":e(ca),"max-decimal-count":4,modelValue:b.value,"onUpdate:modelValue":T[1]||(T[1]=g=>b.value=g)},null,8,["disabled","label","placeholder","min-value","max-value","modelValue"])]),default:l(()=>[t(v,{class:R(["list-item-with-header-and-title list-item-no-item-after",{disabled:C.value}]),link:"#",header:e(n)("Currency"),onClick:T[4]||(T[4]=g=>p.value=!0)},{title:l(()=>[s("div",Dy,[s("span",null,u(e(F)(c.value))+"",1),s("small",Iy,u(c.value),1)])]),default:l(()=>[t(W,{"value-type":"item","key-field":"currencyCode","value-field":"currencyCode","title-field":"displayName","after-field":"currencyCode",title:e(n)("Currency Name"),"enable-filter":!0,"filter-placeholder":e(n)("Currency"),"filter-no-items-text":e(n)("No results"),items:d.value,show:p.value,"onUpdate:show":T[2]||(T[2]=g=>p.value=g),modelValue:c.value,"onUpdate:modelValue":T[3]||(T[3]=g=>c.value=g)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["class","header"])]),_:1})]),_:1})}}}),Fy={key:0},Py={key:1},Uy={key:2},By={key:3,class:"work-break-all"},Ny={key:4},My={key:5,class:"work-break-all"},Ey=Re({__name:"AboutPage",setup(f){const{tt:_}=ze(),{showAlert:n,openExternalUrl:h}=nt(),{clientVersion:F,clientVersionMatchServerVersion:V,serverDisplayVersion:k,clientBuildTime:A,exchangeRatesData:C,isUserCustomExchangeRates:P,mapProviderName:m,mapProviderWebsite:c,licenseLines:b,thirdPartyLicenses:p,refreshBrowserCache:d,init:x}=fi(),E=S(!1),D=S(0),T=re(()=>D.value>=5);function M(){let w=`${_("Frontend Version")}: ${F}`;k.value&&(w+=`<br/>${_("Backend Version")}: ${k.value}`),D.value++,k.value&&k.value!=="unknown"&&k.value!==F&&n(w)}return x(),(w,U)=>{const I=o("f7-nav-left"),B=o("f7-nav-title"),L=o("f7-link"),v=o("f7-nav-right"),N=o("f7-navbar"),z=o("f7-block-title"),K=o("f7-list-item"),W=o("f7-list"),q=o("f7-subnavbar"),g=o("f7-block"),J=o("f7-page"),te=o("f7-popup"),Z=o("f7-actions-button"),Y=o("f7-actions-group"),H=o("f7-actions");return a(),i(J,null,{default:l(()=>[t(N,null,{default:l(()=>[t(I,{"back-link":e(_)("Back")},null,8,["back-link"]),t(B,{title:e(_)("About")},null,8,["title"]),t(v,null,{default:l(()=>[e(V)&&!T.value?(a(),i(L,{key:0,"icon-f7":""})):!e(V)||T.value?(a(),i(L,{key:1,"icon-f7":"ellipsis",onClick:U[0]||(U[0]=fe=>E.value=!0)})):r("",!0)]),_:1})]),_:1}),t(z,{class:"margin-top"},{default:l(()=>[ne(u(e(_)("global.app.title")),1)]),_:1}),t(W,{strong:"",inset:"",dividers:""},{default:l(()=>[t(K,{title:e(_)("Version"),after:e(F),onClick:M},null,8,["title","after"]),e(A)?(a(),i(K,{key:0,title:e(_)("Build Time"),after:e(A)},null,8,["title","after"])):r("",!0),t(K,{title:e(_)("Official Website"),link:"#",onClick:U[1]||(U[1]=fe=>e(h)("https://github.com/mayswind/ezbookkeeping"))},null,8,["title"]),t(K,{title:e(_)("Report Issue"),link:"#",onClick:U[2]||(U[2]=fe=>e(h)("https://github.com/mayswind/ezbookkeeping/issues"))},null,8,["title"]),t(K,{title:e(_)("Getting help"),link:"#",onClick:U[3]||(U[3]=fe=>e(h)("https://ezbookkeeping.mayswind.net"))},null,8,["title"]),t(K,{title:e(_)("License"),link:"#","popup-open":".license-popup"},null,8,["title"])]),_:1}),e(C)&&!e(P)?(a(),i(z,{key:0,class:"margin-top"},{default:l(()=>[ne(u(e(_)("Exchange Rates Data")),1)]),_:1})):r("",!0),e(C)&&!e(P)?(a(),i(W,{key:1,strong:"",inset:"",dividers:""},{default:l(()=>[e(C).referenceUrl?(a(),i(K,{key:0,title:e(_)("Provider"),after:e(C).dataSource,link:"#",onClick:U[4]||(U[4]=fe=>e(h)(e(C).referenceUrl))},null,8,["title","after"])):r("",!0),e(C).referenceUrl?r("",!0):(a(),i(K,{key:1,title:e(_)("Provider"),after:e(C).dataSource},null,8,["title","after"]))]),_:1})):r("",!0),e(m)?(a(),i(z,{key:2,class:"margin-top"},{default:l(()=>[ne(u(e(_)("Map")),1)]),_:1})):r("",!0),e(m)?(a(),i(W,{key:3,strong:"",inset:"",dividers:""},{default:l(()=>[e(c)?(a(),i(K,{key:0,title:e(_)("Provider"),after:e(m),link:"#",onClick:U[5]||(U[5]=fe=>e(h)(e(c)))},null,8,["title","after"])):r("",!0),e(c)?r("",!0):(a(),i(K,{key:1,title:e(_)("Provider"),after:e(m)},null,8,["title","after"]))]),_:1})):r("",!0),t(te,{push:"","with-subnavbar":"","swipe-to-close":"","swipe-handler":".swipe-handler",class:"license-popup"},{default:l(()=>[t(J,null,{default:l(()=>[t(N,null,{default:l(()=>[U[7]||(U[7]=s("div",{class:"swipe-handler",style:{"z-index":"10"}},null,-1)),t(q,{title:e(_)("License")},null,8,["title"])]),_:1}),t(g,{strong:"",outline:"",class:"license-content"},{default:l(()=>[s("p",null,[(a(!0),$(ke,null,Te(e(b),(fe,ee)=>(a(),$("span",{key:ee,style:bt({display:fe?"initial":"block",padding:fe?"0":"0 0 1em 0"})},u(fe),5))),128))]),U[8]||(U[8]=s("hr",null,null,-1)),U[9]||(U[9]=s("p",null,[s("span",null,"ezBookkeeping also contains additional third party software and illustration."),s("br"),s("span",null,"All the third party software/illustration included or linked is redistributed under the terms and conditions of their original licenses.")],-1)),U[10]||(U[10]=s("p",null,null,-1)),(a(!0),$(ke,null,Te(e(p),fe=>(a(),$("p",{key:fe.name},[s("strong",null,u(fe.name),1),fe.copyright?(a(),$("br",Fy)):r("",!0),fe.copyright?(a(),$("span",Py,u(fe.copyright),1)):r("",!0),fe.url?(a(),$("br",Uy)):r("",!0),fe.url?(a(),$("span",By,u(fe.url),1)):r("",!0),fe.licenseUrl?(a(),$("br",Ny)):r("",!0),fe.licenseUrl?(a(),$("span",My,"License: "+u(fe.licenseUrl),1)):r("",!0)]))),128))]),_:1})]),_:1})]),_:1}),t(H,{"close-by-outside-click":"","close-on-escape":"",opened:E.value,"onActions:closed":U[6]||(U[6]=fe=>E.value=!1)},{default:l(()=>[t(Y,null,{default:l(()=>[t(Z,{onClick:e(d)},{default:l(()=>[ne(u(e(_)("Refresh Browser Cache")),1)]),_:1},8,["onClick"])]),_:1}),t(Y,null,{default:l(()=>[t(Z,{bold:"",close:""},{default:l(()=>[ne(u(e(_)("Cancel")),1)]),_:1})]),_:1})]),_:1},8,["opened"])]),_:1})}}}),Ly={class:"smaller"},Ry=Re({__name:"UserProfilePage",props:{f7router:{}},setup(f){const _=f,{tt:n,getCurrentLanguageTextDirection:h,getAllLanguageOptions:F,getAllCurrencies:V,getCurrencyName:k,formatFiscalYearStartToGregorianLikeLongMonth:A}=ze(),{showAlert:C,showToast:P,routeBackOnError:m}=nt(),{newProfile:c,emailVerified:b,loading:p,resending:d,saving:x,allAccounts:E,allVisibleAccounts:D,allVisibleCategorizedAccounts:T,allWeekDays:M,allCalendarDisplayTypes:w,allDateDisplayTypes:U,allLongDateFormats:I,allShortDateFormats:B,allLongTimeFormats:L,allShortTimeFormats:v,allFiscalYearFormats:N,allCurrencyDisplayTypes:z,allNumeralSystemTypes:K,allDecimalSeparators:W,allDigitGroupingSymbols:q,allDigitGroupingTypes:g,allCoordinateDisplayTypes:J,allExpenseAmountColorTypes:te,allIncomeAmountColorTypes:Z,allTransactionEditScopeTypes:Y,languageTitle:H,supportDigitGroupingSymbol:fe,inputIsNotChangedProblemMessage:ee,inputInvalidProblemMessage:j,langAndRegionInputInvalidProblemMessage:O,extendInputInvalidProblemMessage:le,inputIsNotChanged:ge,inputIsInvalid:$e,langAndRegionInputIsInvalid:se,extendInputIsInvalid:Ze,setCurrentUserProfile:Me,doAfterProfileUpdate:Ue}=pi(),qe=El(),he=el(),X=ol(),Ce=S(""),pe=S(!1),we=S(null),be=S(!1),Be=S(!1),ce=S(!1),ae=S(!1),oe=S(!1),Pe=S(!1),ve=S(!1),Je=S(!1),ft=S(!1),xt=S(!1),mt=S(!1),Vt=S(!1),At=S(!1),Pt=S(!1),gt=S(!1),$t=S(!1),Ct=S(!1),It=S(!1),it=S(!1),Le=S(!1),xe=S(!1),lt=S(!1),ie=S(!1),He=re(()=>F(!0)),De=re(()=>V()),Oe=re(()=>{for(const Ke of He.value)if(Ke.languageTag===c.value.language)return Ke.nativeDisplayName;return n("Unknown")}),at=re(()=>kt(M.value,c.value.firstDayOfWeek));function pt(){p.value=!0;const Ke=[X.loadAllAccounts({force:!1}),he.getCurrentUserProfile()];Promise.all(Ke).then(Q=>{const Lt=Q[1];Me(Lt),pe.value=!!Lt.noPassword,p.value=!1}).catch(Q=>{Q.processed?p.value=!1:(we.value=Q,P(Q.message||Q))})}function Ae(Ke){const Q=_.f7router;be.value=!1;const Lt=ee.value||j.value||le.value||O.value;if(Lt){C(Lt);return}if(c.value.password&&!Ke){be.value=!0;return}const Kt=h();x.value=!0,je(()=>x.value),qe.updateUserProfile(c.value.toProfileUpdateRequest(Ce.value)).then(Et=>{x.value=!1,Se(),Ce.value="",Ue(Et.user),P("Your profile has been successfully updated"),Kt===h()&&Q.back()}).catch(Et=>{x.value=!1,Se(),Ce.value="",Et.processed||P(Et.message||Et)})}function Ie(){d.value=!0,je(()=>d.value),qe.resendVerifyEmailByLoginedUser().then(()=>{d.value=!1,Se(),P("Validation email has been sent")}).catch(Ke=>{d.value=!1,Se(),Ke.processed||P(Ke.message||Ke)})}function Qe(){m(_.f7router,we)}return pt(),(Ke,Q)=>{const Lt=o("f7-nav-left"),Kt=o("f7-nav-title"),Et=o("f7-link"),rt=o("f7-nav-right"),Wt=o("f7-navbar"),Ft=o("f7-list-input"),ht=o("f7-list"),Ye=o("f7-list-item"),tl=o("two-column-list-item-selection-sheet"),yt=o("list-item-selection-popup"),Ot=o("f7-block"),_e=o("fiscal-year-start-selection-sheet"),zt=o("f7-actions-button"),il=o("f7-actions-group"),Vl=o("f7-actions"),fl=o("password-input-sheet"),Fl=o("f7-page");return a(),i(Fl,{"onPage:afterin":Qe},{default:l(()=>[t(Wt,null,{default:l(()=>[t(Lt,{"back-link":e(n)("Back")},null,8,["back-link"]),t(Kt,{title:e(n)("User Profile")},null,8,["title"]),t(rt,{class:"navbar-compact-icons"},{default:l(()=>[t(Et,{"icon-f7":"ellipsis",class:R({disabled:!e(Hn)()||e(p)||e(b)}),onClick:Q[0]||(Q[0]=ue=>ie.value=!0)},null,8,["class"]),t(Et,{class:R({disabled:e(ge)||e($e)||e(x)}),text:e(n)("Save"),onClick:Q[1]||(Q[1]=ue=>Ae(pe.value))},null,8,["class","text"])]),_:1})]),_:1}),e(p)?(a(),i(ht,{key:0,strong:"",inset:"",dividers:"",class:"margin-vertical skeleton-text"},{default:l(()=>[t(Ft,{label:"Password",placeholder:"Your password"}),t(Ft,{label:"Confirm Password",placeholder:"Re-enter the password"}),t(Ft,{label:"E-mail",placeholder:"Your email address"}),t(Ft,{label:"Nickname",placeholder:"Your nickname"})]),_:1})):r("",!0),e(p)?(a(),i(ht,{key:1,strong:"",inset:"",dividers:"",class:"margin-vertical skeleton-text"},{default:l(()=>[t(Ye,{class:"list-item-with-header-and-title list-item-no-item-after",header:"Default Account",title:"Unspecified"}),t(Ye,{class:"list-item-with-header-and-title list-item-no-item-after",header:"Editable Transaction Range",title:"All",link:"#"})]),_:1})):r("",!0),e(p)?(a(),i(ht,{key:2,strong:"",inset:"",dividers:"",class:"margin-vertical skeleton-text"},{default:l(()=>[t(Ye,{class:"list-item-with-header-and-title list-item-no-item-after",header:"Default Language",title:"Language",link:"#"}),t(Ye,{class:"list-item-with-header-and-title list-item-no-item-after",header:"Default Currency",title:"Currency",link:"#"}),t(Ye,{class:"list-item-with-header-and-title list-item-no-item-after",header:"First Day of Week",title:"Week Day",link:"#"}),t(Ye,{class:"list-item-with-header-and-title list-item-no-item-after",header:"Fiscal Year Start Date",title:"January 1"})]),_:1})):r("",!0),e(p)?(a(),i(ht,{key:3,strong:"",inset:"",dividers:"",class:"margin-vertical skeleton-text"},{default:l(()=>[t(Ye,{class:"list-item-with-header-and-title list-item-no-item-after",header:"Calendar Display Type",title:"Calendar",link:"#"}),t(Ye,{class:"list-item-with-header-and-title list-item-no-item-after",header:"Date Display Type",title:"Calendar",link:"#"}),t(Ye,{class:"list-item-with-header-and-title list-item-no-item-after",header:"Long Date Format",title:"YYYY-MM-DD",link:"#"}),t(Ye,{class:"list-item-with-header-and-title list-item-no-item-after",header:"Short Date Format",title:"YYYY-MM-DD",link:"#"}),t(Ye,{class:"list-item-with-header-and-title list-item-no-item-after",header:"Long Time Format",title:"HH:mm:ss",link:"#"}),t(Ye,{class:"list-item-with-header-and-title list-item-no-item-after",header:"Short Time Format",title:"HH:mm",link:"#"}),t(Ye,{class:"list-item-with-header-and-title list-item-no-item-after",header:"Fiscal Year Format",title:"FY YYYY",link:"#"})]),_:1})):r("",!0),e(p)?(a(),i(ht,{key:4,strong:"",inset:"",dividers:"",class:"margin-vertical skeleton-text"},{default:l(()=>[t(Ye,{class:"list-item-with-header-and-title list-item-no-item-after",header:"Currency Display Mode",title:"Currency Symbol",link:"#"}),t(Ye,{class:"list-item-with-header-and-title list-item-no-item-after",header:"Digit Grouping",title:"Thousands Separator",link:"#"}),t(Ye,{class:"list-item-with-header-and-title list-item-no-item-after",header:"Digit Grouping Symbol",title:"Comma (,)",link:"#"}),t(Ye,{class:"list-item-with-header-and-title list-item-no-item-after",header:"Decimal Separator",title:"Dot (.)",link:"#"})]),_:1})):r("",!0),e(p)?(a(),i(ht,{key:5,strong:"",inset:"",dividers:"",class:"margin-vertical skeleton-text"},{default:l(()=>[t(Ye,{class:"list-item-with-header-and-title list-item-no-item-after",header:"Geographic Location Format",title:"Coordinate Format",link:"#"})]),_:1})):r("",!0),e(p)?(a(),i(ht,{key:6,strong:"",inset:"",dividers:"",class:"margin-vertical skeleton-text"},{default:l(()=>[t(Ye,{class:"list-item-with-header-and-title list-item-no-item-after",header:"Expense Amount Color",title:"Amount Color",link:"#"}),t(Ye,{class:"list-item-with-header-and-title list-item-no-item-after",header:"Income Amount Color",title:"Amount Color",link:"#"})]),_:1})):r("",!0),e(p)?r("",!0):(a(),i(ht,{key:7,form:"",strong:"",inset:"",dividers:"",class:"margin-vertical"},{default:l(()=>[t(Ft,{type:"password",autocomplete:"new-password","clear-button":"",label:e(n)("Password"),placeholder:e(n)("Your password"),value:e(c).password,"onUpdate:value":Q[2]||(Q[2]=ue=>e(c).password=ue)},null,8,["label","placeholder","value"]),t(Ft,{type:"password",autocomplete:"new-password","clear-button":"",label:e(n)("Confirm Password"),placeholder:e(n)("Re-enter the password"),value:e(c).confirmPassword,"onUpdate:value":Q[3]||(Q[3]=ue=>e(c).confirmPassword=ue)},null,8,["label","placeholder","value"]),t(Ft,{type:"email",autocomplete:"email","clear-button":"",label:e(n)("E-mail")+" "+(e(b)?e(n)("(Verified)"):e(n)("(Not Verified)")),placeholder:e(n)("Your email address"),value:e(c).email,"onUpdate:value":Q[4]||(Q[4]=ue=>e(c).email=ue)},null,8,["label","placeholder","value"]),t(Ft,{type:"text",autocomplete:"nickname","clear-button":"",label:e(n)("Nickname"),placeholder:e(n)("Your nickname"),value:e(c).nickname,"onUpdate:value":Q[5]||(Q[5]=ue=>e(c).nickname=ue)},null,8,["label","placeholder","value"]),e($e)?(a(),i(Ye,{key:0,class:"ebk-list-item-error-info",footer:e(n)(e(j)||"")},null,8,["footer"])):r("",!0)]),_:1})),e(p)?r("",!0):(a(),i(ht,{key:8,form:"",strong:"",inset:"",dividers:"",class:"margin-vertical"},{default:l(()=>[t(Ye,{class:R(["list-item-with-header-and-title",{disabled:!e(D).length}]),link:"#","no-chevron":"",header:e(n)("Default Account"),title:e(Va).findAccountNameById(e(E),e(c).defaultAccountId,e(n)("Unspecified")),onClick:Q[8]||(Q[8]=ue=>Be.value=!0)},{default:l(()=>[t(tl,{"primary-key-field":"id","primary-value-field":"category","primary-title-field":"name","primary-icon-field":"icon","primary-icon-type":"account","primary-sub-items-field":"accounts","primary-title-i18n":!0,"secondary-key-field":"id","secondary-value-field":"id","secondary-title-field":"name","secondary-icon-field":"icon","secondary-icon-type":"account","secondary-color-field":"color","enable-filter":!0,"filter-placeholder":e(n)("Find account"),"filter-no-items-text":e(n)("No available account"),items:e(T),show:Be.value,"onUpdate:show":Q[6]||(Q[6]=ue=>Be.value=ue),modelValue:e(c).defaultAccountId,"onUpdate:modelValue":Q[7]||(Q[7]=ue=>e(c).defaultAccountId=ue)},null,8,["filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["class","header","title"]),t(Ye,{link:"#",class:"list-item-with-header-and-title list-item-no-item-after",header:e(n)("Editable Transaction Range"),title:e(kt)(e(Y),e(c).transactionEditScope),onClick:Q[11]||(Q[11]=ue=>ce.value=!0)},{default:l(()=>[t(yt,{"value-type":"item","key-field":"type","value-field":"type","title-field":"displayName",title:e(n)("Editable Transaction Range"),"enable-filter":!0,"filter-placeholder":e(n)("Date Range"),"filter-no-items-text":e(n)("No results"),items:e(Y),show:ce.value,"onUpdate:show":Q[9]||(Q[9]=ue=>ce.value=ue),modelValue:e(c).transactionEditScope,"onUpdate:modelValue":Q[10]||(Q[10]=ue=>e(c).transactionEditScope=ue)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["header","title"]),e(Ze)?(a(),i(Ye,{key:0,class:"ebk-list-item-error-info",footer:e(n)(e(le)||"")},null,8,["footer"])):r("",!0)]),_:1})),e(p)?r("",!0):(a(),i(ht,{key:9,form:"",strong:"",inset:"",dividers:"",class:"margin-vertical"},{default:l(()=>[t(Ye,{class:"list-item-with-header-and-title list-item-no-item-after",link:"#",header:e(H),title:Oe.value,onClick:Q[14]||(Q[14]=ue=>ae.value=!0)},{default:l(()=>[t(yt,{"value-type":"item","key-field":"languageTag","value-field":"languageTag","title-field":"nativeDisplayName","after-field":"displayName",title:e(H),"enable-filter":!0,"filter-placeholder":e(n)("Language"),"filter-no-items-text":e(n)("No results"),items:He.value,show:ae.value,"onUpdate:show":Q[12]||(Q[12]=ue=>ae.value=ue),modelValue:e(c).language,"onUpdate:modelValue":Q[13]||(Q[13]=ue=>e(c).language=ue)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["header","title"]),t(Ye,{class:"list-item-with-header-and-title list-item-no-item-after",link:"#",header:e(n)("Default Currency"),onClick:Q[17]||(Q[17]=ue=>oe.value=!0)},{title:l(()=>[t(Ot,{class:"no-padding no-margin"},{default:l(()=>[s("span",null,u(e(k)(e(c).defaultCurrency))+"",1),s("small",Ly,u(e(c).defaultCurrency),1)]),_:1})]),default:l(()=>[t(yt,{"value-type":"item","key-field":"currencyCode","value-field":"currencyCode","title-field":"displayName","after-field":"currencyCode",title:e(n)("Default Currency"),"enable-filter":!0,"filter-placeholder":e(n)("Currency"),"filter-no-items-text":e(n)("No results"),items:De.value,show:oe.value,"onUpdate:show":Q[15]||(Q[15]=ue=>oe.value=ue),modelValue:e(c).defaultCurrency,"onUpdate:modelValue":Q[16]||(Q[16]=ue=>e(c).defaultCurrency=ue)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["header"]),t(Ye,{link:"#",class:"list-item-with-header-and-title list-item-no-item-after",header:e(n)("First Day of Week"),title:at.value,onClick:Q[20]||(Q[20]=ue=>Pe.value=!0)},{default:l(()=>[t(yt,{"value-type":"item","key-field":"type","value-field":"type","title-field":"displayName",title:e(n)("First Day of Week"),"enable-filter":!0,"filter-placeholder":e(n)("Date"),"filter-no-items-text":e(n)("No results"),items:e(M),show:Pe.value,"onUpdate:show":Q[18]||(Q[18]=ue=>Pe.value=ue),modelValue:e(c).firstDayOfWeek,"onUpdate:modelValue":Q[19]||(Q[19]=ue=>e(c).firstDayOfWeek=ue)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["header","title"]),t(Ye,{link:"#","no-chevron":"",class:"list-item-with-header-and-title list-item-no-item-after",header:e(n)("Fiscal Year Start Date"),title:e(A)(e(c).fiscalYearStart,e(ul).valueOf(e(c).numeralSystem)??e(ul).Default),onClick:Q[23]||(Q[23]=ue=>ve.value=!0)},{default:l(()=>[t(_e,{"numeral-system":e(c).numeralSystem,show:ve.value,"onUpdate:show":Q[21]||(Q[21]=ue=>ve.value=ue),modelValue:e(c).fiscalYearStart,"onUpdate:modelValue":Q[22]||(Q[22]=ue=>e(c).fiscalYearStart=ue)},null,8,["numeral-system","show","modelValue"])]),_:1},8,["header","title"])]),_:1})),e(p)?r("",!0):(a(),i(ht,{key:10,form:"",strong:"",inset:"",dividers:"",class:"margin-vertical"},{default:l(()=>[t(Ye,{link:"#",class:"list-item-with-header-and-title list-item-no-item-after",header:e(n)("Calendar Display Type"),title:e(kt)(e(w),e(c).calendarDisplayType),onClick:Q[26]||(Q[26]=ue=>Je.value=!0)},{default:l(()=>[t(yt,{"value-type":"item","key-field":"type","value-field":"type","title-field":"displayName",title:e(n)("Calendar Display Type"),"enable-filter":!0,"filter-placeholder":e(n)("Calendar Display Type"),"filter-no-items-text":e(n)("No results"),items:e(w),show:Je.value,"onUpdate:show":Q[24]||(Q[24]=ue=>Je.value=ue),modelValue:e(c).calendarDisplayType,"onUpdate:modelValue":Q[25]||(Q[25]=ue=>e(c).calendarDisplayType=ue)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["header","title"]),t(Ye,{link:"#",class:"list-item-with-header-and-title list-item-no-item-after",header:e(n)("Date Display Type"),title:e(kt)(e(U),e(c).dateDisplayType),onClick:Q[29]||(Q[29]=ue=>ft.value=!0)},{default:l(()=>[t(yt,{"value-type":"item","key-field":"type","value-field":"type","title-field":"displayName",title:e(n)("Date Display Type"),"enable-filter":!0,"filter-placeholder":e(n)("Date Display Type"),"filter-no-items-text":e(n)("No results"),items:e(U),show:ft.value,"onUpdate:show":Q[27]||(Q[27]=ue=>ft.value=ue),modelValue:e(c).dateDisplayType,"onUpdate:modelValue":Q[28]||(Q[28]=ue=>e(c).dateDisplayType=ue)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["header","title"]),t(Ye,{link:"#",class:"list-item-with-header-and-title list-item-no-item-after",header:e(n)("Long Date Format"),title:e(kt)(e(I),e(c).longDateFormat),onClick:Q[32]||(Q[32]=ue=>xt.value=!0)},{default:l(()=>[t(yt,{"value-type":"item","key-field":"type","value-field":"type","title-field":"displayName",title:e(n)("Long Date Format"),"enable-filter":!0,"filter-placeholder":e(n)("Long Date Format"),"filter-no-items-text":e(n)("No results"),items:e(I),show:xt.value,"onUpdate:show":Q[30]||(Q[30]=ue=>xt.value=ue),modelValue:e(c).longDateFormat,"onUpdate:modelValue":Q[31]||(Q[31]=ue=>e(c).longDateFormat=ue)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["header","title"]),t(Ye,{link:"#",class:"list-item-with-header-and-title list-item-no-item-after",header:e(n)("Short Date Format"),title:e(kt)(e(B),e(c).shortDateFormat),onClick:Q[35]||(Q[35]=ue=>mt.value=!0)},{default:l(()=>[t(yt,{"value-type":"item","key-field":"type","value-field":"type","title-field":"displayName",title:e(n)("Short Date Format"),"enable-filter":!0,"filter-placeholder":e(n)("Short Date Format"),"filter-no-items-text":e(n)("No results"),items:e(B),show:mt.value,"onUpdate:show":Q[33]||(Q[33]=ue=>mt.value=ue),modelValue:e(c).shortDateFormat,"onUpdate:modelValue":Q[34]||(Q[34]=ue=>e(c).shortDateFormat=ue)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["header","title"]),t(Ye,{link:"#",class:"list-item-with-header-and-title list-item-no-item-after",header:e(n)("Long Time Format"),title:e(kt)(e(L),e(c).longTimeFormat),onClick:Q[38]||(Q[38]=ue=>Vt.value=!0)},{default:l(()=>[t(yt,{"value-type":"item","key-field":"type","value-field":"type","title-field":"displayName",title:e(n)("Long Time Format"),"enable-filter":!0,"filter-placeholder":e(n)("Long Time Format"),"filter-no-items-text":e(n)("No results"),items:e(L),show:Vt.value,"onUpdate:show":Q[36]||(Q[36]=ue=>Vt.value=ue),modelValue:e(c).longTimeFormat,"onUpdate:modelValue":Q[37]||(Q[37]=ue=>e(c).longTimeFormat=ue)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["header","title"]),t(Ye,{link:"#",class:"list-item-with-header-and-title list-item-no-item-after",header:e(n)("Short Time Format"),title:e(kt)(e(v),e(c).shortTimeFormat),onClick:Q[41]||(Q[41]=ue=>At.value=!0)},{default:l(()=>[t(yt,{"value-type":"item","key-field":"type","value-field":"type","title-field":"displayName",title:e(n)("Short Time Format"),"enable-filter":!0,"filter-placeholder":e(n)("Short Time Format"),"filter-no-items-text":e(n)("No results"),items:e(v),show:At.value,"onUpdate:show":Q[39]||(Q[39]=ue=>At.value=ue),modelValue:e(c).shortTimeFormat,"onUpdate:modelValue":Q[40]||(Q[40]=ue=>e(c).shortTimeFormat=ue)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["header","title"]),t(Ye,{link:"#",class:"list-item-with-header-and-title list-item-no-item-after",header:e(n)("Fiscal Year Format"),title:e(kt)(e(N),e(c).fiscalYearFormat),onClick:Q[44]||(Q[44]=ue=>Pt.value=!0)},{default:l(()=>[t(yt,{"value-type":"item","key-field":"type","value-field":"type","title-field":"displayName",title:e(n)("Fiscal Year Format"),"enable-filter":!0,"filter-placeholder":e(n)("Fiscal Year Format"),"filter-no-items-text":e(n)("No results"),items:e(N),show:Pt.value,"onUpdate:show":Q[42]||(Q[42]=ue=>Pt.value=ue),modelValue:e(c).fiscalYearFormat,"onUpdate:modelValue":Q[43]||(Q[43]=ue=>e(c).fiscalYearFormat=ue)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["header","title"])]),_:1})),e(p)?r("",!0):(a(),i(ht,{key:11,form:"",strong:"",inset:"",dividers:"",class:"margin-vertical"},{default:l(()=>[t(Ye,{link:"#",class:"list-item-with-header-and-title list-item-no-item-after",header:e(n)("Currency Display Mode"),title:e(kt)(e(z),e(c).currencyDisplayType),onClick:Q[47]||(Q[47]=ue=>gt.value=!0)},{default:l(()=>[t(yt,{"value-type":"item","key-field":"type","value-field":"type","title-field":"displayName",title:e(n)("Currency Display Mode"),"enable-filter":!0,"filter-placeholder":e(n)("Currency Display Mode"),"filter-no-items-text":e(n)("No results"),items:e(z),show:gt.value,"onUpdate:show":Q[45]||(Q[45]=ue=>gt.value=ue),modelValue:e(c).currencyDisplayType,"onUpdate:modelValue":Q[46]||(Q[46]=ue=>e(c).currencyDisplayType=ue)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["header","title"]),t(Ye,{link:"#",class:"list-item-with-header-and-title list-item-no-item-after",header:e(n)("Numeral System"),title:e(kt)(e(K),e(c).numeralSystem),onClick:Q[50]||(Q[50]=ue=>$t.value=!0)},{default:l(()=>[t(yt,{"value-type":"item","key-field":"type","value-field":"type","title-field":"displayName",title:e(n)("Numeral System"),"enable-filter":!0,"filter-placeholder":e(n)("Numeral System"),"filter-no-items-text":e(n)("No results"),items:e(K),show:$t.value,"onUpdate:show":Q[48]||(Q[48]=ue=>$t.value=ue),modelValue:e(c).numeralSystem,"onUpdate:modelValue":Q[49]||(Q[49]=ue=>e(c).numeralSystem=ue)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["header","title"]),t(Ye,{link:"#",class:"list-item-with-header-and-title list-item-no-item-after",header:e(n)("Digit Grouping"),title:e(kt)(e(g),e(c).digitGrouping),onClick:Q[53]||(Q[53]=ue=>Ct.value=!0)},{default:l(()=>[t(yt,{"value-type":"item","key-field":"type","value-field":"type","title-field":"displayName",title:e(n)("Digit Grouping"),"enable-filter":!0,"filter-placeholder":e(n)("Digit Grouping"),"filter-no-items-text":e(n)("No results"),items:e(g),show:Ct.value,"onUpdate:show":Q[51]||(Q[51]=ue=>Ct.value=ue),modelValue:e(c).digitGrouping,"onUpdate:modelValue":Q[52]||(Q[52]=ue=>e(c).digitGrouping=ue)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["header","title"]),t(Ye,{link:"#",class:"list-item-with-header-and-title list-item-no-item-after",disabled:!e(fe),header:e(n)("Digit Grouping Symbol"),title:e(kt)(e(q),e(c).digitGroupingSymbol),onClick:Q[56]||(Q[56]=ue=>It.value=!0)},{default:l(()=>[t(yt,{"value-type":"item","key-field":"type","value-field":"type","title-field":"displayName",title:e(n)("Digit Grouping Symbol"),"enable-filter":!0,"filter-placeholder":e(n)("Digit Grouping Symbol"),"filter-no-items-text":e(n)("No results"),items:e(q),show:It.value,"onUpdate:show":Q[54]||(Q[54]=ue=>It.value=ue),modelValue:e(c).digitGroupingSymbol,"onUpdate:modelValue":Q[55]||(Q[55]=ue=>e(c).digitGroupingSymbol=ue)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["disabled","header","title"]),t(Ye,{link:"#",class:"list-item-with-header-and-title list-item-no-item-after",header:e(n)("Decimal Separator"),title:e(kt)(e(W),e(c).decimalSeparator),onClick:Q[59]||(Q[59]=ue=>it.value=!0)},{default:l(()=>[t(yt,{"value-type":"item","key-field":"type","value-field":"type","title-field":"displayName",title:e(n)("Decimal Separator"),"enable-filter":!0,"filter-placeholder":e(n)("Decimal Separator"),"filter-no-items-text":e(n)("No results"),items:e(W),show:it.value,"onUpdate:show":Q[57]||(Q[57]=ue=>it.value=ue),modelValue:e(c).decimalSeparator,"onUpdate:modelValue":Q[58]||(Q[58]=ue=>e(c).decimalSeparator=ue)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["header","title"])]),_:1})),e(p)?r("",!0):(a(),i(ht,{key:12,form:"",strong:"",inset:"",dividers:"",class:"margin-vertical"},{default:l(()=>[t(Ye,{link:"#",class:"list-item-with-header-and-title list-item-no-item-after",header:e(n)("Geographic Location Format"),title:e(kt)(e(J),e(c).coordinateDisplayType),onClick:Q[62]||(Q[62]=ue=>Le.value=!0)},{default:l(()=>[t(yt,{"value-type":"item","key-field":"type","value-field":"type","title-field":"displayName",title:e(n)("Geographic Location Format"),"enable-filter":!0,"filter-placeholder":e(n)("Geographic Location Format"),"filter-no-items-text":e(n)("No results"),items:e(J),show:Le.value,"onUpdate:show":Q[60]||(Q[60]=ue=>Le.value=ue),modelValue:e(c).coordinateDisplayType,"onUpdate:modelValue":Q[61]||(Q[61]=ue=>e(c).coordinateDisplayType=ue)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["header","title"])]),_:1})),e(p)?r("",!0):(a(),i(ht,{key:13,form:"",strong:"",inset:"",dividers:"",class:"margin-vertical"},{default:l(()=>[t(Ye,{link:"#",class:"list-item-with-header-and-title list-item-no-item-after",header:e(n)("Expense Amount Color"),title:e(kt)(e(te),e(c).expenseAmountColor),onClick:Q[65]||(Q[65]=ue=>xe.value=!0)},{default:l(()=>[t(yt,{"value-type":"item","key-field":"type","value-field":"type","title-field":"displayName",title:e(n)("Expense Amount Color"),"enable-filter":!0,"filter-placeholder":e(n)("Color"),"filter-no-items-text":e(n)("No results"),items:e(te),show:xe.value,"onUpdate:show":Q[63]||(Q[63]=ue=>xe.value=ue),modelValue:e(c).expenseAmountColor,"onUpdate:modelValue":Q[64]||(Q[64]=ue=>e(c).expenseAmountColor=ue)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["header","title"]),t(Ye,{link:"#",class:"list-item-with-header-and-title list-item-no-item-after",header:e(n)("Income Amount Color"),title:e(kt)(e(Z),e(c).incomeAmountColor),onClick:Q[68]||(Q[68]=ue=>lt.value=!0)},{default:l(()=>[t(yt,{"value-type":"item","key-field":"type","value-field":"type","title-field":"displayName",title:e(n)("Income Amount Color"),"enable-filter":!0,"filter-placeholder":e(n)("Color"),"filter-no-items-text":e(n)("No results"),items:e(Z),show:lt.value,"onUpdate:show":Q[66]||(Q[66]=ue=>lt.value=ue),modelValue:e(c).incomeAmountColor,"onUpdate:modelValue":Q[67]||(Q[67]=ue=>e(c).incomeAmountColor=ue)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["header","title"]),e(se)?(a(),i(Ye,{key:0,class:"ebk-list-item-error-info",footer:e(n)(e(O)||"")},null,8,["footer"])):r("",!0)]),_:1})),t(Vl,{"close-by-outside-click":"","close-on-escape":"",opened:ie.value,"onActions:closed":Q[69]||(Q[69]=ue=>ie.value=!1)},{default:l(()=>[t(il,null,{default:l(()=>[e(Hn)()&&!e(p)&&!e(b)?(a(),i(zt,{key:0,class:R({disabled:e(p)||e(d)}),onClick:Ie},{default:l(()=>[ne(u(e(n)("Resend Validation Email")),1)]),_:1},8,["class"])):r("",!0)]),_:1}),t(il,null,{default:l(()=>[t(zt,{bold:"",close:""},{default:l(()=>[ne(u(e(n)("Cancel")),1)]),_:1})]),_:1})]),_:1},8,["opened"]),t(fl,{title:e(n)("Modify Password"),hint:e(n)("Please enter your current password when modifying your password"),"confirm-disabled":e(x),"cancel-disabled":e(x),show:be.value,"onUpdate:show":Q[70]||(Q[70]=ue=>be.value=ue),modelValue:Ce.value,"onUpdate:modelValue":Q[71]||(Q[71]=ue=>Ce.value=ue),"onPassword:confirm":Q[72]||(Q[72]=ue=>Ae(!0))},null,8,["title","hint","confirm-disabled","cancel-disabled","show","modelValue"])]),_:1})}}}),Oy={class:"display-flex padding justify-content-space-between align-items-center"},zy={class:"ebk-sheet-title"},Yy={class:"padding-bottom padding-horizontal"},Hy={class:"padding-horizontal padding-bottom"},qy={class:"no-margin-top margin-bottom-half"},Wy={class:"margin-top text-align-center"},Gy=Re({__name:"DataManagementPage",props:{f7router:{}},setup(f){const _=f,{tt:n}=ze(),{showToast:h,routeBackOnError:F}=nt(),{dataStatistics:V,displayDataStatistics:k,getExportFileName:A}=mi(),C=El(),P=el(),m=S(!0),c=S(null),b=S("csv"),p=S(!1),d=S(null),x=S(""),E=S(!1),D=S(!1),T=S(!1),M=S(!1),w=re(()=>A(b.value));function U(){m.value=!0,P.getUserDataStatistics().then(N=>{V.value=N,m.value=!1}).catch(N=>{N.processed?m.value=!1:(c.value=N,h(N.message||N))})}function I(){je(),p.value=!0,P.getExportedUserData(b.value).then(N=>{d.value=URL.createObjectURL(N),p.value=!1,Se()}).catch(N=>{d.value=null,p.value=!1,Se(),N.processed||h(N.message||N)})}function B(N){if(!N){x.value="",T.value=!0;return}E.value=!0,je(()=>E.value),C.clearAllUserTransactions({password:N}).then(()=>{E.value=!1,x.value="",Se(),T.value=!1,h("All transactions has been cleared"),U()}).catch(z=>{E.value=!1,Se(),z.processed||h(z.message||z)})}function L(N){if(!N){x.value="",M.value=!0;return}E.value=!0,je(()=>E.value),C.clearAllUserData({password:N}).then(()=>{E.value=!1,x.value="",Se(),M.value=!1,h("All user data has been cleared"),U()}).catch(z=>{E.value=!1,Se(),z.processed||h(z.message||z)})}function v(){F(_.f7router,c)}return U(),(N,z)=>{const K=o("f7-navbar"),W=o("f7-list-item"),q=o("f7-list"),g=o("f7-list-button"),J=o("f7-button"),te=o("f7-link"),Z=o("f7-page-content"),Y=o("f7-sheet"),H=o("password-input-sheet"),fe=o("f7-page");return a(),i(fe,{"onPage:afterin":v},{default:l(()=>[t(K,{title:e(n)("Data Management"),"back-link":e(n)("Back")},null,8,["title","back-link"]),m.value?(a(),i(q,{key:0,strong:"",inset:"",dividers:"",class:"margin-vertical skeleton-text"},{default:l(()=>[t(W,{title:"Transactions",after:"Count"}),t(W,{title:"Accounts",after:"Count"}),t(W,{title:"Transaction Categories",after:"Count"}),t(W,{title:"Transaction Tags",after:"Count"}),t(W,{title:"Transaction Pictures",after:"Count"}),t(W,{title:"Transaction Templates",after:"Count"}),t(W,{title:"Scheduled Transactions",after:"Count"})]),_:1})):m.value?r("",!0):(a(),i(q,{key:1,strong:"",inset:"",dividers:"",class:"margin-vertical"},{default:l(()=>[t(W,{title:e(n)("Transactions"),after:e(k)?e(k).totalTransactionCount:"-"},null,8,["title","after"]),t(W,{title:e(n)("Accounts"),after:e(k)?e(k).totalAccountCount:"-"},null,8,["title","after"]),t(W,{title:e(n)("Transaction Categories"),after:e(k)?e(k).totalTransactionCategoryCount:"-"},null,8,["title","after"]),t(W,{title:e(n)("Transaction Tags"),after:e(k)?e(k).totalTransactionTagCount:"-"},null,8,["title","after"]),t(W,{title:e(n)("Transaction Pictures"),after:e(k)?e(k).totalTransactionPictureCount:"-"},null,8,["title","after"]),t(W,{title:e(n)("Transaction Templates"),after:e(k)?e(k).totalTransactionTemplateCount:"-"},null,8,["title","after"]),t(W,{title:e(n)("Scheduled Transactions"),after:e(k)?e(k).totalScheduledTransactionCount:"-"},null,8,["title","after"])]),_:1})),t(q,{strong:"",inset:"",dividers:"",class:R(["margin-vertical",{disabled:m.value}])},{default:l(()=>[e(vi)()?(a(),i(g,{key:0,class:R({disabled:!e(V)||!e(V).totalTransactionCount||e(V).totalTransactionCount==="0"}),onClick:z[0]||(z[0]=ee=>{d.value=null,D.value=!0})},{default:l(()=>[ne(u(e(n)("Export Data")),1)]),_:1},8,["class"])):r("",!0)]),_:1},8,["class"]),t(q,{strong:"",inset:"",dividers:"",class:R(["margin-vertical",{disabled:m.value}])},{default:l(()=>[t(g,{color:"red",onClick:z[1]||(z[1]=ee=>B(null))},{default:l(()=>[ne(u(e(n)("Clear All Transactions")),1)]),_:1}),t(g,{color:"red",onClick:z[2]||(z[2]=ee=>L(null))},{default:l(()=>[ne(u(e(n)("Clear All Data")),1)]),_:1})]),_:1},8,["class"]),t(Y,{"swipe-handler":".swipe-handler",style:{height:"auto"},"swipe-to-close":!p.value,"close-on-escape":!p.value,"close-by-backdrop-click":!p.value,"close-by-outside-click":!p.value,opened:D.value,"onSheet:closed":z[6]||(z[6]=ee=>{D.value=!1,d.value=null})},{default:l(()=>[z[11]||(z[11]=s("div",{class:"swipe-handler",style:{"z-index":"10"}},null,-1)),t(Z,{class:"margin-top no-padding-top"},{default:l(()=>[s("div",Oy,[s("div",zy,[s("b",null,u(e(n)("Are you sure you want to export all transaction data to file?")),1)])]),s("div",Yy,[t(q,{class:"export-file-type-list no-margin",dividers:""},{default:l(()=>[t(W,{radio:"","radio-icon":"start",class:R({disabled:p.value||d.value}),title:e(n)("CSV (Comma-separated values) File"),checked:b.value==="csv",onChange:z[3]||(z[3]=ee=>b.value="csv")},null,8,["class","title","checked"]),t(W,{radio:"","radio-icon":"start",class:R({disabled:p.value||d.value}),title:e(n)("TSV (Tab-separated values) File"),checked:b.value==="tsv",onChange:z[4]||(z[4]=ee=>b.value="tsv")},null,8,["class","title","checked"])]),_:1})]),s("div",Hy,[s("p",qy,u(e(n)("It may take a long time, please wait for a few minutes.")),1),d.value?r("",!0):(a(),i(J,{key:0,large:"",fill:"",class:R({disabled:p.value}),text:e(n)("Continue"),onClick:I},null,8,["class","text"])),d.value?(a(),i(J,{key:1,large:"",fill:"",external:"",text:e(n)("Save Data"),download:w.value,href:d.value,target:"_blank"},null,8,["text","download","href"])):r("",!0),s("div",Wy,[t(te,{class:R({disabled:p.value}),onClick:z[5]||(z[5]=ee=>D.value=!1),text:e(n)("Cancel")},null,8,["class","text"])])])]),_:1})]),_:1},8,["swipe-to-close","close-on-escape","close-by-backdrop-click","close-by-outside-click","opened"]),t(H,{title:e(n)("Are you sure you want to clear all transactions?"),hint:e(n)("You CANNOT undo this action. This will clear your transactions data. Please enter your current password to confirm."),"confirm-disabled":E.value,"cancel-disabled":E.value,color:"red",show:T.value,"onUpdate:show":z[7]||(z[7]=ee=>T.value=ee),modelValue:x.value,"onUpdate:modelValue":z[8]||(z[8]=ee=>x.value=ee),"onPassword:confirm":B},null,8,["title","hint","confirm-disabled","cancel-disabled","show","modelValue"]),t(H,{title:e(n)("Are you sure you want to clear all data?"),hint:e(n)("You CANNOT undo this action. This will clear your accounts, categories, tags and transactions data. Please enter your current password to confirm."),"confirm-disabled":E.value,"cancel-disabled":E.value,color:"red",show:M.value,"onUpdate:show":z[9]||(z[9]=ee=>M.value=ee),modelValue:x.value,"onUpdate:modelValue":z[10]||(z[10]=ee=>x.value=ee),"onPassword:confirm":L},null,8,["title","hint","confirm-disabled","cancel-disabled","show","modelValue"])]),_:1})}}}),jy={class:"text-align-center"},Ky=["src"],Zy=Re({__name:"TwoFactorAuthPage",props:{f7router:{}},setup(f){const _=f,{tt:n}=ze(),{showToast:h,routeBackOnError:F}=nt(),V=gi(),k=S(null),A=S(!0),C=S(null),P=S(""),m=S(""),c=S(""),b=S(""),p=S(""),d=S(""),x=S(!1),E=S(!1),D=S(!1),T=S(!1),M=S(!1),w=S(!1),U=S(!1),I=S(!1);function B(){A.value=!0,V.get2FAStatus().then(q=>{k.value=q.enable,A.value=!1}).catch(q=>{q.processed?A.value=!1:(C.value=q,h(q.message||q))})}function L(){m.value="",P.value="",x.value=!0,je(()=>x.value),V.enable2FA().then(q=>{x.value=!1,Se(),m.value=q.qrcode,P.value=q.secret,M.value=!0}).catch(q=>{x.value=!1,Se(),q.processed||h(q.message||q)})}function v(){E.value=!0,je(()=>E.value),V.confirmEnable2FA({secret:P.value,passcode:c.value}).then(q=>{E.value=!1,Se(),m.value="",P.value="",k.value=!0,M.value=!1,q.recoveryCodes&&q.recoveryCodes.length&&(d.value=q.recoveryCodes.join(`
`),I.value=!0)}).catch(q=>{E.value=!1,Se(),q.processed||h(q.message||q)})}function N(q){if(!q){b.value="",w.value=!0;return}D.value=!0,je(()=>D.value),V.disable2FA({password:q}).then(()=>{D.value=!1,Se(),k.value=!1,w.value=!1,h("Two-factor authentication has been disabled")}).catch(g=>{D.value=!1,Se(),g.processed||h(g.message||g)})}function z(q){if(!q){p.value="",U.value=!0;return}T.value=!0,je(()=>T.value),V.regenerate2FARecoveryCode({password:q}).then(g=>{T.value=!1,Se(),U.value=!1,d.value=g.recoveryCodes.join(`
`),I.value=!0}).catch(g=>{T.value=!1,Se(),g.processed||h(g.message||g)})}function K(){F(_.f7router,C)}function W(){h("Backup codes copied")}return B(),(q,g)=>{const J=o("f7-navbar"),te=o("f7-list-item"),Z=o("f7-list-button"),Y=o("f7-list"),H=o("passcode-input-sheet"),fe=o("password-input-sheet"),ee=o("information-sheet"),j=o("f7-page");return a(),i(j,{"onPage:afterin":K},{default:l(()=>[t(J,{title:e(n)("Two-Factor Authentication"),"back-link":e(n)("Back")},null,8,["title","back-link"]),A.value?(a(),i(Y,{key:0,strong:"",inset:"",dividers:"",class:"margin-top skeleton-text"},{default:l(()=>[t(te,{title:"Status",after:"Unknown"}),t(Z,{class:"disabled"},{default:l(()=>[...g[9]||(g[9]=[ne("Operate",-1)])]),_:1})]),_:1})):A.value?r("",!0):(a(),i(Y,{key:1,strong:"",inset:"",dividers:"",class:"margin-top"},{default:l(()=>[t(te,{title:e(n)("Status"),after:e(n)(k.value?"Enabled":"Disabled")},null,8,["title","after"]),k.value===!0?(a(),i(Z,{key:0,class:R({disabled:T.value}),onClick:g[0]||(g[0]=O=>z(null))},{default:l(()=>[ne(u(e(n)("Regenerate Backup Codes")),1)]),_:1},8,["class"])):r("",!0),k.value===!0?(a(),i(Z,{key:1,class:R({disabled:D.value}),onClick:g[1]||(g[1]=O=>N(null))},{default:l(()=>[ne(u(e(n)("Disable")),1)]),_:1},8,["class"])):r("",!0),k.value===!1?(a(),i(Z,{key:2,class:R({disabled:x.value}),onClick:L},{default:l(()=>[ne(u(e(n)("Enable")),1)]),_:1},8,["class"])):r("",!0)]),_:1})),t(H,{title:e(n)("Enable Two-Factor Authentication"),hint:e(n)("Please use a two-factor authentication app to scan the qrcode below and enter the current passcode."),"confirm-disabled":E.value,"cancel-disabled":E.value,show:M.value,"onUpdate:show":g[2]||(g[2]=O=>M.value=O),modelValue:c.value,"onUpdate:modelValue":g[3]||(g[3]=O=>c.value=O),"onPasscode:confirm":v},{default:l(()=>[s("div",jy,[s("img",{alt:"qrcode",class:"img-qrcode",src:m.value},null,8,Ky)])]),_:1},8,["title","hint","confirm-disabled","cancel-disabled","show","modelValue"]),t(fe,{title:e(n)("Disable Two-Factor Authentication"),hint:e(n)("Your current password is required to disable two-factor authentication."),"confirm-disabled":D.value,"cancel-disabled":D.value,show:w.value,"onUpdate:show":g[4]||(g[4]=O=>w.value=O),modelValue:b.value,"onUpdate:modelValue":g[5]||(g[5]=O=>b.value=O),"onPassword:confirm":N},null,8,["title","hint","confirm-disabled","cancel-disabled","show","modelValue"]),t(fe,{title:e(n)("Regenerate Backup Codes"),hint:e(n)("Your current password is required to regenerate backup codes for two-factor authentication. If you regenerate backup codes, the previous ones will become invalid."),"confirm-disabled":T.value,"cancel-disabled":T.value,show:U.value,"onUpdate:show":g[6]||(g[6]=O=>U.value=O),modelValue:p.value,"onUpdate:modelValue":g[7]||(g[7]=O=>p.value=O),"onPassword:confirm":z},null,8,["title","hint","confirm-disabled","cancel-disabled","show","modelValue"]),t(ee,{class:"backup-code-sheet",title:e(n)("Backup Code"),hint:e(n)("Please copy these backup codes to safe place, the following backup codes will be displayed only once. If these codes were lost, you can regenerate them at any time."),information:d.value,"row-count":10,"enable-copy":!0,show:I.value,"onUpdate:show":g[8]||(g[8]=O=>I.value=O),"onInfo:copied":W},null,8,["title","hint","information","show"])]),_:1})}}}),Xy=Re({__name:"SessionListPage",props:{f7router:{}},setup(f){class _ extends yi{domId;icon;lastSeenDateTime;constructor(B){super(B.tokenId,B.isCurrent,B.deviceType,B.deviceInfo,B.deviceName,B.lastSeen),this.domId=E(B.tokenId),this.icon=x(B.deviceType),this.lastSeenDateTime=B.lastSeen?V(B.lastSeen):"-"}}const n=f,{tt:h,getCurrentLanguageTextDirection:F,formatUnixTimeToLongDateTime:V}=ze(),{showConfirm:k,showToast:A,routeBackOnError:C}=nt(),P=Ua(),m=S([]),c=S(!0),b=S(null),p=re(()=>F()),d=re(()=>{const I=[];if(!m.value)return I;for(const B of m.value){const L=hi(B);I.push(new _(L))}return I});function x(I){return I===Wl.Phone||I===Wl.Wearable?"device_phone_portrait":I===Wl.Tablet?"device_tablet_portrait":I===Wl.TV?"tv":I===Wl.Api?"chevron_left_slash_chevron_right":I===Wl.MCP?"sparkles":"device_desktop"}function E(I){return"token_"+I.replace(/:/g,"_")}function D(){c.value=!0,P.getAllTokens().then(I=>{m.value=I,c.value=!1}).catch(I=>{I.processed?c.value=!1:(b.value=I,A(I.message||I))})}function T(I){P.getAllTokens().then(B=>{I?.(),Ia(B,m.value)?A("Session list is up to date"):A("Session list has been updated"),m.value=B}).catch(B=>{I?.(),B.processed||A(B.message||B)})}function M(I){k("Are you sure you want to logout from this session?",()=>{je(),P.revokeToken({tokenId:I.tokenId}).then(()=>{Se(),Il(E(I.tokenId),()=>{for(const[B,L]of an(m.value))B.tokenId===I.tokenId&&m.value.splice(L,1)})}).catch(B=>{Se(),B.processed||A(B.message||B)})})}function w(){m.value.length<2||k("Are you sure you want to logout all other sessions?",()=>{je(),P.revokeAllTokens().then(()=>{Se();for(const[I,B]of _i(m.value))I.isCurrent||m.value.splice(B,1);A("You have logged out all other sessions")}).catch(I=>{Se(),I.processed||A(I.message||I)})})}function U(){C(n.f7router,b)}return D(),(I,B)=>{const L=o("f7-nav-left"),v=o("f7-nav-title"),N=o("f7-link"),z=o("f7-nav-right"),K=o("f7-navbar"),W=o("f7-icon"),q=o("f7-list-item"),g=o("f7-list"),J=o("f7-swipeout-button"),te=o("f7-swipeout-actions"),Z=o("f7-page");return a(),i(Z,{ptr:"","onPtr:refresh":T,"onPage:afterin":U},{default:l(()=>[t(K,null,{default:l(()=>[t(L,{"back-link":e(h)("Back")},null,8,["back-link"]),t(v,{title:e(h)("Device & Sessions")},null,8,["title"]),t(z,null,{default:l(()=>[t(N,{class:R({disabled:d.value.length<2}),text:e(h)("Logout All"),onClick:w},null,8,["class","text"])]),_:1})]),_:1}),c.value?(a(),i(g,{key:0,strong:"",inset:"",dividers:"","media-list":"",class:"margin-top skeleton-text"},{default:l(()=>[t(q,{class:"list-item-media-valign-middle",title:"Current",text:"Device Name (Browser xx.x.xxxx.xx)"},{media:l(()=>[t(W,{f7:"device_phone_portrait"})]),after:l(()=>[...B[0]||(B[0]=[s("small",null,"MM/DD/YYYY HH:mm:ss",-1)])]),_:1})]),_:1})):c.value?r("",!0):(a(),i(g,{key:1,strong:"",inset:"",dividers:"","media-list":"",class:"margin-top"},{default:l(()=>[(a(!0),$(ke,null,Te(d.value,Y=>(a(),i(q,{class:"list-item-media-valign-middle",swipeout:"",id:Y.domId,title:e(h)(Y.deviceName),text:Y.deviceInfo,key:Y.tokenId},{media:l(()=>[t(W,{f7:Y.icon},null,8,["f7"])]),after:l(()=>[s("small",null,u(Y.lastSeenDateTime),1)]),default:l(()=>[Y.isCurrent?r("",!0):(a(),i(te,{key:0,left:p.value===e(wt).RTL,right:p.value===e(wt).LTR},{default:l(()=>[t(J,{color:"red",text:e(h)("Log Out"),onClick:H=>M(Y)},null,8,["text","onClick"])]),_:2},1032,["left","right"]))]),_:2},1032,["id","title","text"]))),128))]),_:1}))]),_:1})}}}),Qy=Re({__name:"AllPage",props:{f7router:{}},setup(f){const _=f,{tt:n}=ze(),{showToast:h,routeBackOnError:F}=nt(),V=sl(),k=S(!0),A=S(null);function C(){F(_.f7router,A)}function P(m){const c=!!m;V.loadAllCategories({force:c}).then(()=>{m?.(),c&&h("Category list has been updated")}).catch(b=>{m?.(),b.processed||h(b.message||b)})}return V.loadAllCategories({force:!1}).then(()=>{k.value=!1}).catch(m=>{m.processed?k.value=!1:(A.value=m,h(m.message||m))}),(m,c)=>{const b=o("f7-navbar"),p=o("f7-list-item"),d=o("f7-list"),x=o("f7-page");return a(),i(x,{ptr:"","onPtr:refresh":P,"onPage:afterin":C},{default:l(()=>[t(b,{title:e(n)("Transaction Categories"),"back-link":e(n)("Back")},null,8,["title","back-link"]),k.value?(a(),i(d,{key:0,strong:"",inset:"",dividers:"",class:"margin-top skeleton-text"},{default:l(()=>[t(p,{title:"Expense",link:"#"}),t(p,{title:"Income",link:"#"}),t(p,{title:"Transfer",link:"#"})]),_:1})):k.value?r("",!0):(a(),i(d,{key:1,strong:"",inset:"",dividers:"",class:"margin-top"},{default:l(()=>[t(p,{title:e(n)("Expense"),link:"/category/list?type=2"},null,8,["title"]),t(p,{title:e(n)("Income"),link:"/category/list?type=1"},null,8,["title"]),t(p,{title:e(n)("Transfer"),link:"/category/list?type=3"},null,8,["title"])]),_:1}))]),_:1})}}}),Jy=Re({__name:"ListPage",props:{f7route:{},f7router:{}},setup(f){const _=f,{tt:n,getCurrentLanguageTextDirection:h}=ze(),{showAlert:F,showToast:V,routeBackOnError:k}=nt(),{loading:A,primaryCategoryId:C,currentPrimaryCategory:P}=ki(),m=sl(),c=S(!1),b=S(0),p=S(null),d=S(!1),x=S(!1),E=S(null),D=S(!1),T=S(!1),M=S(!1),w=S(!1),U=re(()=>h()),I=re(()=>!C.value||C.value===""||C.value==="0"?!m.allTransactionCategories||!m.allTransactionCategories[b.value]?[]:m.allTransactionCategories[b.value]??[]:C.value&&C.value!==""&&C.value!=="0"?!m.allTransactionCategoriesMap||!m.allTransactionCategoriesMap[C.value]?[]:m.allTransactionCategoriesMap[C.value]?.subCategories??[]:[]),B=re(()=>{let j="";switch(b.value){case Tt.Income:j="Income";break;case Tt.Expense:j="Expense";break;case Tt.Transfer:j="Transfer";break;default:j="Transaction";break}switch(c.value){case!0:j+=" Primary";break;case!1:j+=" Secondary";break}return j+" Categories"}),L=re(()=>bi(I.value,d.value)),v=re(()=>wi(I.value,d.value)),N=re(()=>Ti(I.value,d.value)),z=re(()=>I.value.length<1);function K(j){return"category_"+j.id}function W(j){return!j||j.indexOf("category_")!==0?null:j.substring(9)}function q(){const j=_.f7route.query;if(b.value=parseInt(j.type||"0"),b.value!==Tt.Income&&b.value!==Tt.Expense&&b.value!==Tt.Transfer){V("Parameter Invalid"),p.value="Parameter Invalid";return}j.id&&j.id!=="0"?(C.value=j.id,c.value=!1):(C.value="0",c.value=!0),A.value=!0,m.loadAllCategories({force:!1}).then(()=>{A.value=!1}).catch(O=>{O.processed?A.value=!1:(p.value=O,V(O.message||O))})}function g(j){if(x.value){j?.();return}const O=!!j;m.loadAllCategories({force:O}).then(()=>{j?.(),O&&V("Category list has been updated")}).catch(le=>{j?.(),le.processed||V(le.message||le)})}function J(j){_.f7router.navigate("/category/edit?id="+j.id)}function te(j,O){je(),m.hideCategory({category:j,hidden:O}).then(()=>{Se()}).catch(le=>{Se(),le.processed||V(le.message||le)})}function Z(j,O){if(!j){F("An error occurred");return}if(!O){E.value=j,T.value=!0;return}T.value=!1,E.value=null,je(),m.deleteCategory({category:j,beforeResolve:le=>{Il(K(j),le)}}).then(()=>{Se()}).catch(le=>{Se(),le.processed||V(le.message||le)})}function Y(){x.value||(d.value=!0,x.value=!0,M.value=!1)}function H(){if(!M.value){d.value=!1,x.value=!1;return}w.value=!0,je(),m.updateCategoryDisplayOrders({type:b.value,parentId:C.value}).then(()=>{w.value=!1,Se(),d.value=!1,x.value=!1,M.value=!1}).catch(j=>{w.value=!1,Se(),j.processed||V(j.message||j)})}function fe(j){if(!j||!j.el||!j.el.id){V("Unable to move category");return}const O=W(j.el.id);if(!O){V("Unable to move category");return}m.changeCategoryDisplayOrder({categoryId:O,from:j.from,to:j.to}).then(()=>{M.value=!0}).catch(le=>{V(le.message||le)})}function ee(){m.transactionCategoryListStateInvalid&&!A.value&&g(),k(_.f7router,p)}return q(),(j,O)=>{const le=o("f7-nav-left"),ge=o("f7-nav-title"),$e=o("f7-link"),se=o("f7-nav-right"),Ze=o("f7-navbar"),Me=o("f7-icon"),Ue=o("f7-list-item"),qe=o("f7-list"),he=o("f7-list-button"),X=o("f7-badge"),Ce=o("ItemIcon"),pe=o("f7-swipeout-button"),we=o("f7-swipeout-actions"),be=o("f7-actions-button"),Be=o("f7-actions-group"),ce=o("f7-actions"),ae=o("f7-actions-label"),oe=o("f7-page");return a(),i(oe,{ptr:!x.value,"onPtr:refresh":g,"onPage:afterin":ee},{default:l(()=>[t(Ze,null,{default:l(()=>[t(le,{"back-link":e(n)("Back")},null,8,["back-link"]),t(ge,{title:e(n)(B.value)},null,8,["title"]),t(se,{class:"navbar-compact-icons"},{default:l(()=>[x.value?r("",!0):(a(),i($e,{key:0,"icon-f7":"ellipsis",class:R({disabled:!I.value.length}),onClick:O[0]||(O[0]=Pe=>D.value=!0)},null,8,["class"])),x.value?x.value?(a(),i($e,{key:2,text:e(n)("Done"),class:R({disabled:w.value}),onClick:H},null,8,["text","class"])):r("",!0):(a(),i($e,{key:1,href:"/category/add?type="+b.value+"&parentId="+e(C)+(e(P)?`&color=${e(P).color}&icon=${e(P).icon}`:""),"icon-f7":"plus"},null,8,["href"]))]),_:1})]),_:1}),e(A)?(a(),i(qe,{key:0,strong:"",inset:"",dividers:"",class:"margin-top skeleton-text"},{default:l(()=>[(a(),$(ke,null,Te([1,2,3],Pe=>t(Ue,{title:"Category Name",link:c.value?"#":null,key:Pe},{media:l(()=>[t(Me,{f7:"app_fill"})]),_:1},8,["link"])),64))]),_:1})):r("",!0),!e(A)&&N.value?(a(),i(qe,{key:1,strong:"",inset:"",dividers:"",class:"margin-top"},{default:l(()=>[t(Ue,{title:e(n)("No available category")},null,8,["title"]),c.value&&z.value?(a(),i(he,{key:0,title:e(n)("Add Default Categories"),href:"/category/preset?type="+b.value},null,8,["title","href"])):r("",!0)]),_:1})):r("",!0),e(A)?r("",!0):(a(),i(qe,{key:2,strong:"",inset:"",dividers:"",sortable:"",class:"margin-top category-list","sortable-enabled":x.value,"onSortable:sort":fe},{default:l(()=>[(a(!0),$(ke,null,Te(I.value,Pe=>ut((a(),i(Ue,{swipeout:"",class:R({"actual-first-child":Pe.id===L.value,"actual-last-child":Pe.id===v.value}),id:K(Pe),title:Pe.name,footer:Pe.comment,link:c.value?"/category/list?type="+b.value+"&id="+Pe.id:null,key:Pe.id,onTaphold:O[1]||(O[1]=ve=>Y())},{media:l(()=>[t(Ce,{"icon-type":"category","icon-id":Pe.icon,color:Pe.color},{default:l(()=>[Pe.hidden?(a(),i(X,{key:0,color:"gray",class:"right-bottom-icon"},{default:l(()=>[t(Me,{f7:"eye_slash_fill"})]),_:1})):r("",!0)]),_:2},1032,["icon-id","color"])]),default:l(()=>[x.value?(a(),i(we,{key:0,left:U.value===e(wt).LTR,right:U.value===e(wt).RTL},{default:l(()=>[t(pe,{color:Pe.hidden?"blue":"gray",class:"padding-horizontal",overswipe:"",close:"",onClick:ve=>te(Pe,!Pe.hidden)},{default:l(()=>[t(Me,{f7:Pe.hidden?"eye":"eye_slash"},null,8,["f7"])]),_:2},1032,["color","onClick"])]),_:2},1032,["left","right"])):r("",!0),x.value?r("",!0):(a(),i(we,{key:1,left:U.value===e(wt).RTL,right:U.value===e(wt).LTR},{default:l(()=>[t(pe,{color:"orange",close:"",text:e(n)("Edit"),onClick:ve=>J(Pe)},null,8,["text","onClick"]),t(pe,{color:"red",class:"padding-horizontal",onClick:ve=>Z(Pe,!1)},{default:l(()=>[t(Me,{f7:"trash"})]),_:1},8,["onClick"])]),_:2},1032,["left","right"]))]),_:2},1032,["class","id","title","footer","link"])),[[vt,d.value||!Pe.hidden]])),128))]),_:1},8,["sortable-enabled"])),t(ce,{"close-by-outside-click":"","close-on-escape":"",opened:D.value,"onActions:closed":O[5]||(O[5]=Pe=>D.value=!1)},{default:l(()=>[t(Be,null,{default:l(()=>[t(be,{onClick:O[2]||(O[2]=Pe=>Y())},{default:l(()=>[ne(u(e(n)("Sort")),1)]),_:1}),d.value?r("",!0):(a(),i(be,{key:0,onClick:O[3]||(O[3]=Pe=>d.value=!0)},{default:l(()=>[ne(u(e(n)("Show Hidden Transaction Categories")),1)]),_:1})),d.value?(a(),i(be,{key:1,onClick:O[4]||(O[4]=Pe=>d.value=!1)},{default:l(()=>[ne(u(e(n)("Hide Hidden Transaction Categories")),1)]),_:1})):r("",!0)]),_:1}),t(Be,null,{default:l(()=>[t(be,{bold:"",close:""},{default:l(()=>[ne(u(e(n)("Cancel")),1)]),_:1})]),_:1})]),_:1},8,["opened"]),t(ce,{"close-by-outside-click":"","close-on-escape":"",opened:T.value,"onActions:closed":O[7]||(O[7]=Pe=>T.value=!1)},{default:l(()=>[t(Be,null,{default:l(()=>[t(ae,null,{default:l(()=>[ne(u(e(n)("Are you sure you want to delete this category?")),1)]),_:1}),t(be,{color:"red",onClick:O[6]||(O[6]=Pe=>Z(E.value,!0))},{default:l(()=>[ne(u(e(n)("Delete")),1)]),_:1})]),_:1}),t(Be,null,{default:l(()=>[t(be,{bold:"",close:""},{default:l(()=>[ne(u(e(n)("Cancel")),1)]),_:1})]),_:1})]),_:1},8,["opened"])]),_:1},8,["ptr"])}}}),eh={class:"grid grid-cols-2"},th={class:"list-item-subitem no-chevron"},lh={class:"item-link",href:"#"},nh={class:"item-content"},ah={class:"item-inner"},oh={class:"item-title"},sh={class:"list-item-custom-title no-padding"},ih={class:"list-item-subitem no-chevron"},rh={class:"item-link",href:"#"},uh={class:"item-content"},ch={class:"item-inner"},dh={class:"item-title"},fh={class:"list-item-custom-title no-padding"},ph={class:"grid grid-cols-2"},mh={class:"list-item-subitem no-chevron"},vh={class:"item-content"},gh={class:"item-inner"},yh={class:"item-header"},hh={class:"item-title"},_h={class:"list-item-custom-title no-padding"},kh={class:"list-item-subitem no-chevron"},bh={class:"item-content"},wh={class:"item-inner"},Th={class:"item-header"},Ch={class:"item-title"},Sh={class:"list-item-custom-title no-padding"},ya=Re({__name:"EditPage",props:{f7route:{},f7router:{}},setup(f){const _=f,n=_.f7route.query,{tt:h}=ze(),{showAlert:F,showToast:V,routeBackOnError:k}=nt(),{editCategoryId:A,clientSessionId:C,loading:P,submitting:m,category:c,allAvailableCategories:b,title:p,saveButtonTitle:d,inputEmptyProblemMessage:x,inputIsEmpty:E}=Ci(n.type?parseInt(n.type):void 0,n.parentId),D=sl(),T=S(null),M=S(!1),w=S(!1),U=S(!1);function I(N){return Si.findNameById(b.value,N)}function B(){if(!n.id&&!n.parentId){V("Parameter Invalid"),T.value="Parameter Invalid";return}if(n.id)P.value=!0,A.value=n.id,D.getCategory({categoryId:A.value}).then(N=>{c.value.fillFrom(N),P.value=!1}).catch(N=>{N.processed?P.value=!1:(T.value=N,V(N.message||N))});else if(n.parentId){const N=n.type?parseInt(n.type):void 0;if(N!==Tt.Income&&N!==Tt.Expense&&N!==Tt.Transfer){V("Parameter Invalid"),T.value="Parameter Invalid";return}n.color&&(c.value.color=n.color),n.icon&&(c.value.icon=n.icon),C.value=sn(),P.value=!1}}function L(){const N=_.f7router,z=x.value;if(z){F(z);return}m.value=!0,je(()=>m.value),D.saveCategory({category:c.value,isEdit:!!A.value,clientSessionId:C.value}).then(()=>{m.value=!1,Se(),A.value?V("You have saved this category"):V("You have added a new category"),N.back()}).catch(K=>{m.value=!1,Se(),K.processed||V(K.message||K)})}function v(){k(_.f7router,T)}return B(),(N,z)=>{const K=o("f7-nav-left"),W=o("f7-nav-title"),q=o("f7-link"),g=o("f7-nav-right"),J=o("f7-navbar"),te=o("f7-list-input"),Z=o("f7-list-item"),Y=o("f7-icon"),H=o("f7-list"),fe=o("list-item-selection-sheet"),ee=o("ItemIcon"),j=o("icon-selection-sheet"),O=o("color-selection-sheet"),le=o("f7-toggle"),ge=o("f7-page"),$e=jn("textarea-auto-size");return a(),i(ge,{"onPage:afterin":v},{default:l(()=>[t(J,null,{default:l(()=>[t(K,{"back-link":e(h)("Back")},null,8,["back-link"]),t(W,{title:e(h)(e(p))},null,8,["title"]),t(g,null,{default:l(()=>[t(q,{class:R({disabled:e(E)||e(m)}),text:e(h)(e(d)),onClick:L},null,8,["class","text"])]),_:1})]),_:1}),e(P)?(a(),i(H,{key:0,strong:"",inset:"",dividers:"",class:"margin-top skeleton-text"},{default:l(()=>[t(te,{label:"Category Name",placeholder:"Your category name"}),t(Z,{class:"list-item-with-header-and-title",header:"Primary Category",title:"Primary Category"}),t(Z,{class:"list-item-with-header-and-title list-item-with-multi-item"},{default:l(()=>[s("div",eh,[s("div",th,[s("a",lh,[s("div",nh,[s("div",ah,[z[12]||(z[12]=s("div",{class:"item-header"},[s("span",null,"Category Icon")],-1)),s("div",oh,[s("div",sh,[t(Y,{f7:"app_fill"})])])])])])]),s("div",ih,[s("a",rh,[s("div",uh,[s("div",ch,[z[13]||(z[13]=s("div",{class:"item-header"},[s("span",null,"Category Color")],-1)),s("div",dh,[s("div",fh,[t(Y,{f7:"app_fill"})])])])])])])])]),_:1}),t(Z,{class:"list-item-toggle",header:"Visible",after:"True"}),t(te,{label:"Description",type:"textarea",placeholder:"Your category description (optional)"})]),_:1})):e(P)?r("",!0):(a(),i(H,{key:1,form:"",strong:"",inset:"",dividers:"",class:"margin-top"},{default:l(()=>[t(te,{type:"text","clear-button":"",label:e(h)("Category Name"),placeholder:e(h)("Your category name"),value:e(c).name,"onUpdate:value":z[0]||(z[0]=se=>e(c).name=se)},null,8,["label","placeholder","value"]),e(A)&&e(c).parentId&&e(c).parentId!=="0"?(a(),i(Z,{key:0,link:"#","no-chevron":"",class:"list-item-with-header-and-title",header:e(h)("Primary Category"),title:I(e(c).parentId),onClick:z[3]||(z[3]=se=>M.value=!0)},{default:l(()=>[t(fe,{"value-type":"item","key-field":"id","value-field":"id","title-field":"name","icon-field":"icon","icon-type":"category","color-field":"color",items:e(b),show:M.value,"onUpdate:show":z[1]||(z[1]=se=>M.value=se),modelValue:e(c).parentId,"onUpdate:modelValue":z[2]||(z[2]=se=>e(c).parentId=se)},null,8,["items","show","modelValue"])]),_:1},8,["header","title"])):r("",!0),t(Z,{class:"list-item-with-header-and-title list-item-with-multi-item"},{default:l(()=>[s("div",ph,[s("div",mh,[s("a",{class:"item-link",href:"#",onClick:z[4]||(z[4]=se=>w.value=!0)},[s("div",vh,[s("div",gh,[s("div",yh,[s("span",null,u(e(h)("Category Icon")),1)]),s("div",hh,[s("div",_h,[t(ee,{"icon-type":"category","icon-id":e(c).icon,color:e(c).color},null,8,["icon-id","color"])])])])])]),t(j,{"all-icon-infos":e(xi),color:e(c).color,show:w.value,"onUpdate:show":z[5]||(z[5]=se=>w.value=se),modelValue:e(c).icon,"onUpdate:modelValue":z[6]||(z[6]=se=>e(c).icon=se)},null,8,["all-icon-infos","color","show","modelValue"])]),s("div",kh,[s("a",{class:"item-link",href:"#",onClick:z[7]||(z[7]=se=>U.value=!0)},[s("div",bh,[s("div",wh,[s("div",Th,[s("span",null,u(e(h)("Category Color")),1)]),s("div",Ch,[s("div",Sh,[t(ee,{"icon-type":"fixed-f7","icon-id":"app_fill",color:e(c).color},null,8,["color"])])])])])]),t(O,{"all-color-infos":e(Ai),show:U.value,"onUpdate:show":z[8]||(z[8]=se=>U.value=se),modelValue:e(c).color,"onUpdate:modelValue":z[9]||(z[9]=se=>e(c).color=se)},null,8,["all-color-infos","show","modelValue"])])])]),_:1}),e(A)?(a(),i(Z,{key:1,title:e(h)("Visible")},{default:l(()=>[t(le,{checked:e(c).visible,"onToggle:change":z[10]||(z[10]=se=>e(c).visible=se)},null,8,["checked"])]),_:1},8,["title"])):r("",!0),ut(t(te,{type:"textarea",style:{height:"auto"},label:e(h)("Description"),placeholder:e(h)("Your category description (optional)"),value:e(c).comment,"onUpdate:value":z[11]||(z[11]=se=>e(c).comment=se)},null,8,["label","placeholder","value"]),[[$e]])]),_:1}))]),_:1})}}}),xh=Re({__name:"PresetPage",props:{f7route:{},f7router:{}},setup(f){const _=f,{tt:n,getCurrentLanguageTag:h,getAllLanguageOptions:F,getAllTransactionDefaultCategories:V}=ze(),{showToast:k,routeBackOnError:A}=nt(),C=sl(),P=S(null),m=S(h()),c=S(0),b=S(!1),p=S(!1),d=S(!1),x=re(()=>F(!1)),E=re(()=>V(c.value,m.value)),D=re(()=>$i(E.value)>0);function T(I){switch(I){case Tt.Income:return n("Income Categories");case Tt.Expense:return n("Expense Categories");case Tt.Transfer:return n("Transfer Categories");default:return n("Transaction Categories")}}function M(){const I=_.f7router;b.value=!0,je(()=>b.value);const B=Sa(E.value),L=Di(B);C.addPresetCategories({categories:L}).then(()=>{b.value=!1,Se(),k("You have added preset categories"),I.back()}).catch(v=>{b.value=!1,Se(),v.processed||k(v.message||v)})}function w(){A(_.f7router,P)}const U=_.f7route.query;return c.value=parseInt(U.type||"0"),c.value!==0&&c.value!==Tt.Income&&c.value!==Tt.Expense&&c.value!==Tt.Transfer&&(k("Parameter Invalid"),P.value="Parameter Invalid"),(I,B)=>{const L=o("f7-nav-left"),v=o("f7-nav-title"),N=o("f7-link"),z=o("f7-nav-right"),K=o("f7-navbar"),W=o("f7-block-title"),q=o("ItemIcon"),g=o("f7-list-item"),J=o("f7-list"),te=o("f7-accordion-content"),Z=o("f7-block"),Y=o("f7-actions-button"),H=o("f7-actions-group"),fe=o("f7-actions"),ee=o("list-item-selection-sheet"),j=o("f7-page");return a(),i(j,{"onPage:afterin":w},{default:l(()=>[t(K,null,{default:l(()=>[t(L,{"back-link":e(n)("Back")},null,8,["back-link"]),t(v,{title:e(n)("Default Categories")},null,8,["title"]),t(z,null,{default:l(()=>[D.value?(a(),i(N,{key:0,"icon-f7":"ellipsis",onClick:B[0]||(B[0]=O=>p.value=!0)})):r("",!0),D.value?(a(),i(N,{key:1,text:e(n)("Save"),class:R({disabled:b.value}),onClick:M},null,8,["text","class"])):r("",!0)]),_:1})]),_:1}),(a(!0),$(ke,null,Te(E.value,(O,le)=>(a(),i(Z,{class:"no-padding no-margin",key:le},{default:l(()=>[t(W,{class:"margin-top margin-horizontal"},{default:l(()=>[ne(u(T(le)),1)]),_:2},1024),t(J,{strong:"",inset:"",dividers:"",class:"margin-top"},{default:l(()=>[(a(!0),$(ke,null,Te(O,(ge,$e)=>(a(),i(g,{title:ge.name,"accordion-item":!!ge.subCategories.length,key:$e},{media:l(()=>[t(q,{"icon-type":"category","icon-id":ge.icon,color:ge.color},null,8,["icon-id","color"])]),default:l(()=>[ge.subCategories.length?(a(),i(te,{key:0,class:"padding-inline-start"},{default:l(()=>[t(J,null,{default:l(()=>[(a(!0),$(ke,null,Te(ge.subCategories,(se,Ze)=>(a(),i(g,{title:se.name,key:Ze},{media:l(()=>[t(q,{"icon-type":"category","icon-id":se.icon,color:se.color},null,8,["icon-id","color"])]),_:2},1032,["title"]))),128))]),_:2},1024)]),_:2},1024)):r("",!0)]),_:2},1032,["title","accordion-item"]))),128))]),_:2},1024)]),_:2},1024))),128)),t(fe,{"close-by-outside-click":"","close-on-escape":"",opened:p.value,"onActions:closed":B[2]||(B[2]=O=>p.value=!1)},{default:l(()=>[t(H,null,{default:l(()=>[t(Y,{onClick:B[1]||(B[1]=O=>d.value=!0)},{default:l(()=>[ne(u(e(n)("Change Language")),1)]),_:1})]),_:1}),t(H,null,{default:l(()=>[t(Y,{bold:"",close:""},{default:l(()=>[ne(u(e(n)("Cancel")),1)]),_:1})]),_:1})]),_:1},8,["opened"]),t(ee,{"value-type":"item","key-field":"languageTag","value-field":"languageTag","title-field":"nativeDisplayName","after-field":"displayName",items:x.value,show:d.value,"onUpdate:show":B[3]||(B[3]=O=>d.value=O),modelValue:m.value,"onUpdate:modelValue":B[4]||(B[4]=O=>m.value=O)},null,8,["items","show","modelValue"])]),_:1})}}}),Ah={class:"display-flex"},$h={key:0,class:"transaction-tag-list-item-content list-item-valign-middle padding-inline-start-half"},Dh={class:"display-flex"},Ih=Re({__name:"ListPage",props:{f7router:{}},setup(f){const _=f,{tt:n,getCurrentLanguageTextDirection:h}=ze(),{showAlert:F,showToast:V,routeBackOnError:k}=nt(),A=on(),C=S(null),P=S(Yn.createNewTag()),m=S(!0),c=S(null),b=S(!1),p=S(!1),d=S(null),x=S(!1),E=S(!1),D=S(!1),T=S(!1),M=re(()=>h()),w=re(()=>A.allTransactionTags),U=re(()=>Ii(w.value,b.value)),I=re(()=>Vi(w.value,b.value)),B=re(()=>Fi(w.value,b.value)),L=re(()=>!!(C.value||P.value.id&&P.value.id!==""));function v(O){return O.id?P.value.name!==""&&P.value.name!==O.name:O.name!==""}function N(O){return"tag_"+O.id}function z(O){return!O||O.indexOf("tag_")!==0?null:O.substring(4)}function K(){m.value=!0,A.loadAllTags({force:!1}).then(()=>{m.value=!1}).catch(O=>{O.processed?m.value=!1:(c.value=O,V(O.message||O))})}function W(O){if(p.value||L.value){O?.();return}const le=!!O;A.loadAllTags({force:le}).then(()=>{O?.(),le&&V("Tag list has been updated")}).catch(ge=>{O?.(),ge.processed||V(ge.message||ge)})}function q(){C.value=Yn.createNewTag()}function g(O){P.value.id=O.id,P.value.name=O.name}function J(O){je(),A.saveTag({tag:O}).then(()=>{Se(),O.id?(P.value.id="",P.value.name=""):C.value=null}).catch(le=>{Se(),le.processed||V(le.message||le)})}function te(O){O.id?(P.value.id="",P.value.name=""):C.value=null}function Z(O,le){je(),A.hideTag({tag:O,hidden:le}).then(()=>{Se()}).catch(ge=>{Se(),ge.processed||V(ge.message||ge)})}function Y(O,le){if(!O){F("An error occurred");return}if(!le){d.value=O,E.value=!0;return}E.value=!1,d.value=null,je(),A.deleteTag({tag:O,beforeResolve:ge=>{Il(N(O),ge)}}).then(()=>{Se()}).catch(ge=>{Se(),ge.processed||V(ge.message||ge)})}function H(){p.value||L.value||(b.value=!0,p.value=!0,D.value=!1)}function fe(){if(!D.value){b.value=!1,p.value=!1;return}T.value=!0,je(),A.updateTagDisplayOrders().then(()=>{T.value=!1,Se(),b.value=!1,p.value=!1,D.value=!1}).catch(O=>{T.value=!1,Se(),O.processed||V(O.message||O)})}function ee(O){if(!O||!O.el||!O.el.id){V("Unable to move tag");return}const le=z(O.el.id);if(!le){V("Unable to move tag");return}A.changeTagDisplayOrder({tagId:le,from:O.from,to:O.to}).then(()=>{D.value=!0}).catch(ge=>{V(ge.message||ge)})}function j(){A.transactionTagListStateInvalid&&!m.value&&W(),k(_.f7router,c)}return K(),(O,le)=>{const ge=o("f7-nav-left"),$e=o("f7-nav-title"),se=o("f7-link"),Ze=o("f7-nav-right"),Me=o("f7-navbar"),Ue=o("f7-icon"),qe=o("f7-list-item"),he=o("f7-list"),X=o("f7-badge"),Ce=o("f7-input"),pe=o("f7-button"),we=o("f7-swipeout-button"),be=o("f7-swipeout-actions"),Be=o("f7-actions-button"),ce=o("f7-actions-group"),ae=o("f7-actions"),oe=o("f7-actions-label"),Pe=o("f7-page");return a(),i(Pe,{ptr:!p.value&&!L.value,"onPtr:refresh":W,"onPage:afterin":j},{default:l(()=>[t(Me,null,{default:l(()=>[t(ge,{"back-link":e(n)("Back")},null,8,["back-link"]),t($e,{title:e(n)("Transaction Tags")},null,8,["title"]),t(Ze,{class:"navbar-compact-icons"},{default:l(()=>[p.value?r("",!0):(a(),i(se,{key:0,class:R({disabled:L.value||!w.value.length}),"icon-f7":"ellipsis",onClick:le[0]||(le[0]=ve=>x.value=!0)},null,8,["class"])),p.value?p.value?(a(),i(se,{key:2,text:e(n)("Done"),class:R({disabled:T.value||L.value}),onClick:fe},null,8,["text","class"])):r("",!0):(a(),i(se,{key:1,class:R({disabled:L.value}),"icon-f7":"plus",onClick:q},null,8,["class"]))]),_:1})]),_:1}),m.value?(a(),i(he,{key:0,strong:"",inset:"",dividers:"",class:"tag-item-list margin-top skeleton-text"},{default:l(()=>[(a(),$(ke,null,Te([1,2,3],ve=>t(qe,{key:ve},{media:l(()=>[t(Ue,{class:"transaction-tag-icon",f7:"number"})]),title:l(()=>[...le[15]||(le[15]=[s("div",{class:"display-flex"},[s("div",{class:"transaction-tag-list-item-content list-item-valign-middle padding-inline-start-half"},"Tag Name")],-1)])]),_:1})),64))]),_:1})):r("",!0),!m.value&&B.value&&!C.value?(a(),i(he,{key:1,strong:"",inset:"",dividers:"",class:"tag-item-list margin-top"},{default:l(()=>[t(qe,{title:e(n)("No available tag")},null,8,["title"])]),_:1})):r("",!0),m.value?r("",!0):(a(),i(he,{key:2,strong:"",inset:"",dividers:"",sortable:"",class:"tag-item-list margin-top","sortable-enabled":p.value,"onSortable:sort":ee},{default:l(()=>[(a(!0),$(ke,null,Te(w.value,ve=>ut((a(),i(qe,{swipeout:"",class:R({"actual-first-child":ve.id===U.value,"actual-last-child":ve.id===I.value&&!C.value}),id:N(ve),key:ve.id,onTaphold:le[4]||(le[4]=Je=>H())},{media:l(()=>[t(Ue,{class:"transaction-tag-icon",f7:"number"},{default:l(()=>[ve.hidden?(a(),i(X,{key:0,color:"gray",class:"right-bottom-icon"},{default:l(()=>[t(Ue,{f7:"eye_slash_fill"})]),_:1})):r("",!0)]),_:2},1024)]),title:l(()=>[s("div",Ah,[P.value.id!==ve.id?(a(),$("div",$h,u(ve.name),1)):P.value.id===ve.id?(a(),i(Ce,{key:1,class:"list-title-input padding-inline-start-half",type:"text",placeholder:e(n)("Tag Title"),value:P.value.name,"onUpdate:value":le[1]||(le[1]=Je=>P.value.name=Je),onKeyup:hl(Je=>J(ve),["enter"])},null,8,["placeholder","value","onKeyup"])):r("",!0)])]),after:l(()=>[P.value.id===ve.id?(a(),i(pe,{key:0,class:R({"no-padding":!0,disabled:!v(ve)}),raised:"",fill:"","icon-f7":"checkmark_alt",color:"blue",onClick:le[2]||(le[2]=Je=>J(P.value))},null,8,["class"])):r("",!0),P.value.id===ve.id?(a(),i(pe,{key:1,class:"no-padding margin-inline-start-half",raised:"",fill:"","icon-f7":"xmark",color:"gray",onClick:le[3]||(le[3]=Je=>te(P.value))})):r("",!0)]),default:l(()=>[p.value&&P.value.id!==ve.id?(a(),i(be,{key:0,left:M.value===e(wt).LTR,right:M.value===e(wt).RTL},{default:l(()=>[t(we,{color:ve.hidden?"blue":"gray",class:"padding-horizontal",overswipe:"",close:"",onClick:Je=>Z(ve,!ve.hidden)},{default:l(()=>[t(Ue,{f7:ve.hidden?"eye":"eye_slash"},null,8,["f7"])]),_:2},1032,["color","onClick"])]),_:2},1032,["left","right"])):r("",!0),!p.value&&P.value.id!==ve.id?(a(),i(be,{key:1,left:M.value===e(wt).RTL,right:M.value===e(wt).LTR},{default:l(()=>[t(we,{color:"orange",close:"",text:e(n)("Edit"),onClick:Je=>g(ve)},null,8,["text","onClick"]),t(we,{color:"red",class:"padding-horizontal",onClick:Je=>Y(ve,!1)},{default:l(()=>[t(Ue,{f7:"trash"})]),_:1},8,["onClick"])]),_:2},1032,["left","right"])):r("",!0)]),_:2},1032,["class","id"])),[[vt,b.value||!ve.hidden]])),128)),C.value?(a(),i(qe,{key:0},{media:l(()=>[t(Ue,{class:"transaction-tag-icon",f7:"number"})]),title:l(()=>[s("div",Dh,[t(Ce,{class:"list-title-input padding-inline-start-half",type:"text",placeholder:e(n)("Tag Title"),value:C.value.name,"onUpdate:value":le[5]||(le[5]=ve=>C.value.name=ve),onKeyup:le[6]||(le[6]=hl(ve=>J(C.value),["enter"]))},null,8,["placeholder","value"])])]),after:l(()=>[t(pe,{class:R({"no-padding":!0,disabled:!v(C.value)}),raised:"",fill:"","icon-f7":"checkmark_alt",color:"blue",onClick:le[7]||(le[7]=ve=>J(C.value))},null,8,["class"]),t(pe,{class:"no-padding margin-inline-start-half",raised:"",fill:"","icon-f7":"xmark",color:"gray",onClick:le[8]||(le[8]=ve=>te(C.value))})]),_:1})):r("",!0)]),_:1},8,["sortable-enabled"])),t(ae,{"close-by-outside-click":"","close-on-escape":"",opened:x.value,"onActions:closed":le[12]||(le[12]=ve=>x.value=!1)},{default:l(()=>[t(ce,null,{default:l(()=>[t(Be,{onClick:le[9]||(le[9]=ve=>H())},{default:l(()=>[ne(u(e(n)("Sort")),1)]),_:1}),b.value?r("",!0):(a(),i(Be,{key:0,onClick:le[10]||(le[10]=ve=>b.value=!0)},{default:l(()=>[ne(u(e(n)("Show Hidden Transaction Tags")),1)]),_:1})),b.value?(a(),i(Be,{key:1,onClick:le[11]||(le[11]=ve=>b.value=!1)},{default:l(()=>[ne(u(e(n)("Hide Hidden Transaction Tags")),1)]),_:1})):r("",!0)]),_:1}),t(ce,null,{default:l(()=>[t(Be,{bold:"",close:""},{default:l(()=>[ne(u(e(n)("Cancel")),1)]),_:1})]),_:1})]),_:1},8,["opened"]),t(ae,{"close-by-outside-click":"","close-on-escape":"",opened:E.value,"onActions:closed":le[14]||(le[14]=ve=>E.value=!1)},{default:l(()=>[t(ce,null,{default:l(()=>[t(oe,null,{default:l(()=>[ne(u(e(n)("Are you sure you want to delete this tag?")),1)]),_:1}),t(Be,{color:"red",onClick:le[13]||(le[13]=ve=>Y(d.value,!0))},{default:l(()=>[ne(u(e(n)("Delete")),1)]),_:1})]),_:1}),t(ce,null,{default:l(()=>[t(Be,{bold:"",close:""},{default:l(()=>[ne(u(e(n)("Cancel")),1)]),_:1})]),_:1})]),_:1},8,["opened"])]),_:1},8,["ptr"])}}}),ha=Re({__name:"ListPage",props:{f7route:{},f7router:{}},setup(f){const _=f,{tt:n,getCurrentLanguageTextDirection:h}=ze(),{showAlert:F,showToast:V,routeBackOnError:k}=nt(),A=Zn(),C=S(Mt.Normal.type),P=S(!0),m=S(null),c=S(!1),b=S(!1),p=S(null),d=S(!1),x=S(!1),E=S(!1),D=S(!1),T=re(()=>h()),M=re(()=>A.allTransactionTemplates[C.value]||[]),w=re(()=>Pi(M.value,c.value)),U=re(()=>Ui(M.value,c.value)),I=re(()=>Bi(M.value,c.value));function B(Z){return"template_"+Z.id}function L(Z){return!Z||Z.indexOf("template_")!==0?null:Z.substring(9)}function v(){_.f7route.path==="/template/list"?C.value=Mt.Normal.type:_.f7route.path==="/schedule/list"&&(C.value=Mt.Schedule.type),P.value=!0,A.loadAllTemplates({templateType:C.value,force:!1}).then(()=>{P.value=!1}).catch(Z=>{Z.processed?P.value=!1:(m.value=Z,V(Z.message||Z))})}function N(Z){if(b.value){Z?.();return}const Y=!!Z;A.loadAllTemplates({templateType:C.value,force:Y}).then(()=>{Z?.(),Y&&V("Template list has been updated")}).catch(H=>{Z?.(),H.processed||V(H.message||H)})}function z(Z){_.f7router.navigate(`/template/edit?id=${Z.id}&templateType=${Z.templateType}`)}function K(Z,Y){je(),A.hideTemplate({template:Z,hidden:Y}).then(()=>{Se()}).catch(H=>{Se(),H.processed||V(H.message||H)})}function W(Z,Y){if(!Z){F("An error occurred");return}if(!Y){p.value=Z,x.value=!0;return}x.value=!1,p.value=null,je(),A.deleteTemplate({template:Z,beforeResolve:H=>{Il(B(Z),H)}}).then(()=>{Se()}).catch(H=>{Se(),H.processed||V(H.message||H)})}function q(){b.value||(c.value=!0,b.value=!0,E.value=!1)}function g(){if(!E.value){c.value=!1,b.value=!1;return}D.value=!0,je(),A.updateTemplateDisplayOrders({templateType:C.value}).then(()=>{D.value=!1,Se(),c.value=!1,b.value=!1,E.value=!1}).catch(Z=>{D.value=!1,Se(),Z.processed||V(Z.message||Z)})}function J(Z){if(!Z||!Z.el||!Z.el.id){V("Unable to move template");return}const Y=L(Z.el.id);if(!Y){V("Unable to move template");return}A.changeTemplateDisplayOrder({templateType:C.value,templateId:Y,from:Z.from,to:Z.to}).then(()=>{E.value=!0}).catch(H=>{V(H.message||H)})}function te(){(!Kl(A.transactionTemplateListStatesInvalid[C.value])||A.transactionTemplateListStatesInvalid[C.value])&&!P.value&&N(),k(_.f7router,m)}return v(),(Z,Y)=>{const H=o("f7-nav-left"),fe=o("f7-nav-title"),ee=o("f7-link"),j=o("f7-nav-right"),O=o("f7-navbar"),le=o("f7-icon"),ge=o("f7-list-item"),$e=o("f7-list"),se=o("f7-badge"),Ze=o("f7-swipeout-button"),Me=o("f7-swipeout-actions"),Ue=o("f7-actions-button"),qe=o("f7-actions-group"),he=o("f7-actions"),X=o("f7-actions-label"),Ce=o("f7-page");return a(),i(Ce,{ptr:!b.value,"onPtr:refresh":N,"onPage:afterin":te},{default:l(()=>[t(O,null,{default:l(()=>[t(H,{"back-link":e(n)("Back")},null,8,["back-link"]),t(fe,{title:C.value===e(Mt).Schedule.type?e(n)("Scheduled Transactions"):e(n)("Transaction Templates")},null,8,["title"]),t(j,{class:"navbar-compact-icons"},{default:l(()=>[b.value?r("",!0):(a(),i(ee,{key:0,"icon-f7":"ellipsis",class:R({disabled:!M.value.length}),onClick:Y[0]||(Y[0]=pe=>d.value=!0)},null,8,["class"])),b.value?b.value?(a(),i(ee,{key:2,text:e(n)("Done"),class:R({disabled:D.value}),onClick:g},null,8,["text","class"])):r("",!0):(a(),i(ee,{key:1,href:"/template/add?templateType="+C.value,"icon-f7":"plus"},null,8,["href"]))]),_:1})]),_:1}),P.value?(a(),i($e,{key:0,strong:"",inset:"",dividers:"",class:"margin-top skeleton-text"},{default:l(()=>[(a(),$(ke,null,Te([1,2,3],pe=>t(ge,{title:"Template Name",key:pe},{media:l(()=>[t(le,{f7:"app_fill"})]),_:1})),64))]),_:1})):r("",!0),!P.value&&I.value?(a(),i($e,{key:1,strong:"",inset:"",dividers:"",class:"margin-top"},{default:l(()=>[C.value===e(Mt).Normal.type?(a(),i(ge,{key:0,title:e(n)("No available template"),footer:e(n)("Once you add templates, you can long press the Add button on the home page to quickly add a new transaction")},null,8,["title","footer"])):C.value===e(Mt).Schedule.type?(a(),i(ge,{key:1,title:e(n)("No available scheduled transactions")},null,8,["title"])):(a(),i(ge,{key:2,title:e(n)("No available template")},null,8,["title"]))]),_:1})):r("",!0),P.value?r("",!0):(a(),i($e,{key:2,strong:"",inset:"",dividers:"",sortable:"",class:"margin-top template-list","sortable-enabled":b.value,"onSortable:sort":J},{default:l(()=>[(a(!0),$(ke,null,Te(M.value,pe=>ut((a(),i(ge,{swipeout:"",class:R({"actual-first-child":pe.id===w.value,"actual-last-child":pe.id===U.value}),id:B(pe),title:pe.name,key:pe.id,onTaphold:Y[1]||(Y[1]=we=>q())},{media:l(()=>[t(le,{f7:C.value===e(Mt).Schedule.type?"clock":"doc_plaintext"},{default:l(()=>[pe.hidden?(a(),i(se,{key:0,color:"gray",class:"right-bottom-icon"},{default:l(()=>[t(le,{f7:"eye_slash_fill"})]),_:1})):r("",!0)]),_:2},1032,["f7"])]),default:l(()=>[b.value?(a(),i(Me,{key:0,left:T.value===e(wt).LTR,right:T.value===e(wt).RTL},{default:l(()=>[t(Ze,{color:pe.hidden?"blue":"gray",class:"padding-horizontal",overswipe:"",close:"",onClick:we=>K(pe,!pe.hidden)},{default:l(()=>[t(le,{f7:pe.hidden?"eye":"eye_slash"},null,8,["f7"])]),_:2},1032,["color","onClick"])]),_:2},1032,["left","right"])):r("",!0),b.value?r("",!0):(a(),i(Me,{key:1,left:T.value===e(wt).RTL,right:T.value===e(wt).LTR},{default:l(()=>[t(Ze,{color:"orange",close:"",text:e(n)("Edit"),onClick:we=>z(pe)},null,8,["text","onClick"]),t(Ze,{color:"red",class:"padding-horizontal",onClick:we=>W(pe,!1)},{default:l(()=>[t(le,{f7:"trash"})]),_:1},8,["onClick"])]),_:2},1032,["left","right"]))]),_:2},1032,["class","id","title"])),[[vt,c.value||!pe.hidden]])),128))]),_:1},8,["sortable-enabled"])),t(he,{"close-by-outside-click":"","close-on-escape":"",opened:d.value,"onActions:closed":Y[5]||(Y[5]=pe=>d.value=!1)},{default:l(()=>[t(qe,null,{default:l(()=>[t(Ue,{onClick:Y[2]||(Y[2]=pe=>q())},{default:l(()=>[ne(u(e(n)("Sort")),1)]),_:1}),c.value?r("",!0):(a(),i(Ue,{key:0,onClick:Y[3]||(Y[3]=pe=>c.value=!0)},{default:l(()=>[ne(u(e(n)("Show Hidden Transaction Templates")),1)]),_:1})),c.value?(a(),i(Ue,{key:1,onClick:Y[4]||(Y[4]=pe=>c.value=!1)},{default:l(()=>[ne(u(e(n)("Hide Hidden Transaction Templates")),1)]),_:1})):r("",!0)]),_:1}),t(qe,null,{default:l(()=>[t(Ue,{bold:"",close:""},{default:l(()=>[ne(u(e(n)("Cancel")),1)]),_:1})]),_:1})]),_:1},8,["opened"]),t(he,{"close-by-outside-click":"","close-on-escape":"",opened:x.value,"onActions:closed":Y[7]||(Y[7]=pe=>x.value=!1)},{default:l(()=>[t(qe,null,{default:l(()=>[t(X,null,{default:l(()=>[ne(u(e(n)("Are you sure you want to delete this template?")),1)]),_:1}),t(Ue,{color:"red",onClick:Y[6]||(Y[6]=pe=>W(p.value,!0))},{default:l(()=>[ne(u(e(n)("Delete")),1)]),_:1})]),_:1}),t(qe,null,{default:l(()=>[t(Ue,{bold:"",close:""},{default:l(()=>[ne(u(e(n)("Cancel")),1)]),_:1})]),_:1})]),_:1},8,["opened"])]),_:1},8,["ptr"])}}});function tt(f){return function({resolve:_}){return _({component:f})}}function ot({router:f,resolve:_,reject:n}){if(!Nl()){n(),f.navigate("/login",{clearPreviousHistory:!0,browserHistory:!1});return}if(!rn()){n(),f.navigate("/unlock",{clearPreviousHistory:!0,browserHistory:!1});return}_()}function Vh({router:f,resolve:_,reject:n}){if(!Nl()){n(),f.navigate("/login",{clearPreviousHistory:!0,browserHistory:!1});return}if(rn()){n(),f.navigate("/",{clearPreviousHistory:!0,browserHistory:!1});return}_()}function _a({router:f,resolve:_,reject:n}){if(Nl()&&!rn()){n(),f.navigate("/unlock",{clearPreviousHistory:!0,browserHistory:!1});return}if(Nl()){n(),f.navigate("/",{clearPreviousHistory:!0,browserHistory:!1});return}_()}const Fh=[{path:"/",async:tt(Af),beforeEnter:[ot],options:{animate:!1}},{path:"/login",async:tt(Rf),beforeEnter:[_a],options:{animate:!1}},{path:"/signup",async:tt(zf),beforeEnter:[_a],options:{animate:!1}},{path:"/unlock",async:tt(Gf),beforeEnter:[Vh],options:{animate:!1}},{path:"/transaction/list",async:tt(Ap),beforeEnter:[ot]},{path:"/transaction/filter/amount",async:tt(Gp),beforeEnter:[ot]},{path:"/transaction/add",async:tt(tn),beforeEnter:[ot]},{path:"/transaction/edit",async:tt(tn),beforeEnter:[ot]},{path:"/transaction/detail",async:tt(tn),beforeEnter:[ot]},{path:"/account/list",async:tt(dm),beforeEnter:[ot]},{path:"/account/add",async:tt(ga),beforeEnter:[ot]},{path:"/account/edit",async:tt(ga),beforeEnter:[ot]},{path:"/account/reconciliation_statements",async:tt(tg),beforeEnter:[ot]},{path:"/account/move_all_transactions",async:tt(lg),beforeEnter:[ot]},{path:"/statistic/transaction",async:tt(Ig),beforeEnter:[ot]},{path:"/statistic/settings",async:tt(Vg),beforeEnter:[ot]},{path:"/settings/textsize",async:tt(ey),beforeEnter:[ot]},{path:"/settings/filter/account",async:tt(dy),beforeEnter:[ot]},{path:"/settings/filter/category",async:tt(vy),beforeEnter:[ot]},{path:"/settings/filter/tag",async:tt(gy),beforeEnter:[ot]},{path:"/settings/page",async:tt(ay),beforeEnter:[ot]},{path:"/settings/sync",async:tt(ry),beforeEnter:[ot]},{path:"/settings",async:tt(yy),beforeEnter:[ot]},{path:"/app_lock",async:tt(hy),beforeEnter:[ot]},{path:"/exchange_rates",async:tt(xy),beforeEnter:[ot]},{path:"/exchange_rates/update",async:tt(Vy),beforeEnter:[ot]},{path:"/about",async:tt(Ey),beforeEnter:[ot]},{path:"/user/profile",async:tt(Ry),beforeEnter:[ot]},{path:"/user/data/management",async:tt(Gy),beforeEnter:[ot]},{path:"/user/2fa",async:tt(Zy),beforeEnter:[ot]},{path:"/user/sessions",async:tt(Xy),beforeEnter:[ot]},{path:"/category/all",async:tt(Qy),beforeEnter:[ot]},{path:"/category/list",async:tt(Jy),beforeEnter:[ot]},{path:"/category/add",async:tt(ya),beforeEnter:[ot]},{path:"/category/edit",async:tt(ya),beforeEnter:[ot]},{path:"/category/preset",async:tt(xh),beforeEnter:[ot]},{path:"/tag/list",async:tt(Ih),beforeEnter:[ot]},{path:"/template/list",async:tt(ha),beforeEnter:[ot]},{path:"/schedule/list",async:tt(ha),beforeEnter:[ot]},{path:"/template/add",async:tt(tn),beforeEnter:[ot]},{path:"/template/edit",async:tt(tn),beforeEnter:[ot]},{path:"(.*)",redirect:"/"}],Ph=Re({__name:"MobileApp",setup(f){const{tt:_,getCurrentLanguageInfo:n,setLanguage:h,initLocale:F}=ze(),V=El(),k=Ll(),A=kl(),C=el(),P=Ua(),m=xn(),c=S({name:"ezBookkeeping",theme:"ios",colors:{primary:"#c67e48"},routes:Fh,darkMode:(()=>{let w="auto";return pa()===ma.Light?w=!1:pa()===ma.Dark&&(w=!0),w})(),touch:{disableContextMenu:!0,tapHold:!0},serviceWorker:{path:Ni()?"./sw.js":void 0,scope:"./"},actions:{animate:nl(),backdrop:!0,closeOnEscape:!0},dialog:{animate:nl(),backdrop:!0},popover:{animate:nl(),backdrop:!0,closeOnEscape:!0},popup:{animate:nl(),backdrop:!0,closeOnEscape:!0,swipeToClose:!0},sheet:{animate:nl(),backdrop:!0,closeOnEscape:!0},smartSelect:{routableModals:!1},view:{animate:nl(),browserHistory:!E(),browserHistoryInitialMatch:!0,browserHistoryAnimate:!1,iosSwipeBack:fa(),iosSwipeBackAnimateShadow:!1,mdSwipeBack:fa(),mdSwipeBackAnimateShadow:!1}}),b=S(null),p=S(void 0),d=S(void 0),x=re(()=>V.currentNotification);function E(){return!!(/iphone|ipod|ipad/gi.test(navigator.platform)&&/Safari/i.test(navigator.appVersion)&&window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches)}function D(w){if(p.value){document.querySelector("meta[name=theme-color]")?.setAttribute("content","#000");return}w?d.value?document.querySelector("meta[name=theme-color]")?.setAttribute("content","#0b0b0b"):document.querySelector("meta[name=theme-color]")?.setAttribute("content","#121212"):d.value?document.querySelector("meta[name=theme-color]")?.setAttribute("content","#949495"):document.querySelector("meta[name=theme-color]")?.setAttribute("content","#f6f6f8")}function T(w){w.push?p.value=w.opened:d.value=w.opened,D(A.framework7DarkMode)}ka(()=>{Ba(k.appSettings.fontSize),Jt(w=>{A.framework7DarkMode=w.darkMode,D(w.darkMode),w.on("actionsOpen",U=>T(U)),w.on("actionsClose",U=>T(U)),w.on("dialogOpen",U=>T(U)),w.on("dialogClose",U=>T(U)),w.on("popoverOpen",U=>T(U)),w.on("popoverClose",U=>T(U)),w.on("popupOpen",U=>T(U)),w.on("popupClose",U=>T(U)),w.on("sheetOpen",U=>T(U)),w.on("sheetClose",U=>T(U)),w.on("pageBeforeOut",()=>{Qn()&&(w.actions.close(".actions-modal.modal-in",!1),w.dialog.close(".dialog.modal-in",!1),w.popover.close(".popover.modal-in",!1),w.popup.close(".popup.modal-in",!1),w.sheet.close(".sheet-modal.modal-in",!1))}),w.on("darkModeChange",U=>{A.framework7DarkMode=U,D(U)})}),document.addEventListener("DOMContentLoaded",()=>{const w=n();Mi(w?.alternativeLanguageTag)})}),Dl(x,w=>{b.value&&(b.value.close(),b.value.destroy(),b.value=null),w&&Jt(U=>{b.value=U.notification.create({icon:`<img alt="logo" src="${Xn}" />`,title:_("global.app.title"),text:w,closeOnClick:!0,on:{close(){V.setNotificationContent(null)}}}).open()})});let M=F(C.currentUserLanguage,k.appSettings.timeZone);return k.updateLocalizedDefaultSettings(M),Wn(C.currentUserExpenseAmountColor,C.currentUserIncomeAmountColor),Nl()&&(!k.appSettings.applicationLock||rn())&&(P.refreshTokenAndRevokeOldToken().then(w=>{w.user&&(M=h(w.user.language),k.updateLocalizedDefaultSettings(M),Wn(w.user.expenseAmountColor,w.user.incomeAmountColor),w.notificationContent&&V.setNotificationContent(w.notificationContent))}),k.appSettings.autoUpdateExchangeRatesData&&m.getLatestExchangeRates({silent:!0,force:!1})),(w,U)=>{const I=o("f7-view"),B=o("f7-app");return a(),i(B,Ea(La(c.value)),{default:l(()=>[t(I,{id:"main-view",class:"safe-areas",main:"",url:"/"})]),_:1},16)}}});Ha.use([qa,Wa,Ga,ja,Ka,Za,Xa,Qa,Ja,eo,to,lo,no,ao,oo,so,io,ro,uo,co,fo,po,mo,vo,go,yo,ho,_o,ko,bo,wo,To,Co,So]);const st=Ra(Ph),Uh=Oa(),Bh=za(Ei());xo(st);st.use(Uh);st.use(Bh);st.component("VueDatePicker",Ya);st.component("PinCodeInput",Li);st.component("MapView",wa);st.component("DateTimePicker",Kn);st.component("MonthPicker",Ri);st.component("TransactionCalendar",Oi);st.component("ItemIcon",Yi);st.component("LanguageSelectButton",qi);st.component("PieChart",ur);st.component("TrendsBarChart",Sr);st.component("PinCodeInputSheet",Vr);st.component("PasswordInputSheet",Mr);st.component("PasscodeInputSheet",Yr);st.component("DateTimeSelectionSheet",pu);st.component("DateSelectionSheet",yu);st.component("FiscalYearStartSelectionSheet",bu);st.component("DateRangeSelectionSheet",$u);st.component("MonthSelectionSheet",Uu);st.component("MonthRangeSelectionSheet",Ou);st.component("ListNumberInput",zu);st.component("ListItemSelectionSheet",Hu);st.component("ListItemSelectionPopup",Wu);st.component("TwoColumnListItemSelectionSheet",Zu);st.component("TreeViewSelectionSheet",Qu);st.component("IconSelectionSheet",ec);st.component("ColorSelectionSheet",lc);st.component("InformationSheet",uc);st.component("NumberPadSheet",xc);st.component("MapSheet",Nc);st.component("TransactionTagSelectionSheet",zc);st.component("ScheduleFrequencySheet",jc);st.component("AccountBalanceTrendsBarChart",Jc);st.component("AIImageRecognitionSheet",rd);st.directive("TextareaAutoSize",ud);st.mount("#app");
