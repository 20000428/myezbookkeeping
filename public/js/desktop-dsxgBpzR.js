import"./modulepreload-polyfill-B5Qt9EMX.js";import{f as Pe,r as L,w as Ft,s as p,o as l,x as a,z as j,y as i,V as t,t as e,g as xe,c as B,A as Ie,h as b,n as be,i as s,l as r,a2 as ka,a8 as Pa,as as Wt,a3 as vt,ab as Ba,F as ue,q as $e,k as Gl,W as Ct,ag as Dn,a1 as xs,aj as Vi,m as _l,at as jn,aq as $i,ar as Di,au as Fi,av as Ni,aw as Mi,ax as Ei,v as Ui}from"./vendor-common-DLL9SaRw.js";import{V as $o,a as H,u as tn,b as Ot,c as Pi,d as Oa,e as se,m as Bi,f as hl,g as Li,h as yt,i as Cs,j as Do,k as ws,l as As,n as Is,o as Ss,p as gn,q as Fo,r as Ri,s as an,t as pt,v as zi,w as Oi,x as ji,y as Za,z as ht,A as Ol,B as nt,C as ze,D as le,E as ot,F as No,G as Ke,H as qi,I as Vs,J as Hi,K as Yi,L as $s,M as je,N as Ae,O as R,P as Ee,Q as ve,R as zt,S as dt,T as Ds,U as Fs,W as ja,X as Pt,Y as Je,Z as Qa,_ as Vl,$ as $l,a0 as Dl,a1 as Fl,a2 as Mo,a3 as $a,a4 as Ye,a5 as Tt,a6 as Eo,a7 as Ns,a8 as Uo,a9 as to,aa as Jt,ab as ut,ac as Gt,ad as ca,ae as wa,af as Wi,ag as Ki,ah as Ms,ai as Gi,aj as Es,ak as qn,al as Us,am as sa,an as Xa,ao as qt,ap as la,aq as oa,ar as La,as as Ji,at as Zi,au as Qi,av as ln,aw as wl,ax as Xi,ay as Po,az as Bo,aA as wn,aB as Tn,aC as el,aD as Jn,aE as er,aF as Ps,aG as ia,aH as sl,aI as il,aJ as Aa,aK as Fn,aL as Pl,aM as cn,aN as An,aO as za,aP as Hn,aQ as xn,aR as Tl,aS as tr,aT as ar,aU as lr,aV as nr,aW as ao,aX as nn,aY as on,aZ as sn,a_ as Nn,a$ as uo,b0 as Bs,b1 as or,b2 as Ls,b3 as sr,b4 as go,b5 as Lo,b6 as Rs,b7 as zs,b8 as ir,b9 as ho,ba as hn,bb as ts,bc as rr,bd as ur,be as rn,bf as dr,bg as cr,bh as mr,bi as pr,bj as vr,bk as fr,bl as yr,bm as Jl,bn as gr,bo as hr,bp as br,bq as Os,br as as,bs as kr,bt as js,bu as _r,bv as ls,bw as Tr,bx as xr,by as Cr,bz as wr,bA as Ar,bB as Ir,bC as Sr,bD as Vr,bE as $r,bF as Dr,bG as qs,bH as Fr,bI as Nr,bJ as Mr,bK as Er,bL as Ur,bM as Pr,bN as Br,bO as Ro,bP as ns,bQ as bo,bR as ko,bS as Hs,bT as Lr,bU as Rr,bV as zr,bW as Or,bX as jr,bY as qr,bZ as Hr,b_ as Yr,b$ as Wr,c0 as Kr,c1 as Gr,c2 as Jr,c3 as Zr,c4 as Qr,c5 as Xr,c6 as eu,c7 as tu,c8 as au,c9 as lu,ca as nu,cb as ou,cc as su,cd as iu,ce as ru,cf as uu,cg as du}from"./vendor-desktop-DKoUwvKQ.js";import{u as Oe,i as Cn,a as Ua,b as qa,c as Ha,d as ra,e as Ys,T as wt,g as zo,s as _o,A as rl,f as cu,h as Ws,j as Zl,K as Il,k as pl,l as Bl,m as mu,n as jl,o as pu,p as vu,q as Ks,r as vl,t as Oo,v as To,w as fu,x as os,y as yu,z as gu,B as hu,C as bu,D as ku,E as _u,F as Xt,G as Tu,H as jo,I as un,J as xu,L as Cu,M as ye,N as wu,O as _a,P as Ta,Q as Gs,R as Au,S as Iu,U as Rt,V as Su,W as In,X as ql,Y as Vu,Z as fl,_ as Nl,$ as qo,a0 as Ge,a1 as $u,a2 as It,a3 as xo,a4 as cl,a5 as ha,a6 as ml,a7 as Du,a8 as Ql,a9 as bl,aa as Mn,ab as co,ac as Zn,ad as Fu,ae as Nu,af as tt,ag as ba,ah as Ra,ai as Js,aj as Zs,ak as Ho,al as Mu,am as Dt,an as ss,ao as Da,ap as Eu,aq as Uu,ar as Ht,as as Ia,at as Pu,au as Ll,av as Yo,aw as Ml,ax as Co,ay as Qs,az as mn,aA as kl,aB as ga,aC as xl,aD as mo,aE as is,aF as Xs,aG as wo,aH as Ao,aI as rs,aJ as Bu,aK as Lu,aL as po,aM as Ru,aN as us,aO as Io,aP as zu,aQ as ei,aR as ds,aS as Ou,aT as ju,aU as qu,aV as Yn,aW as Hu,aX as Yu,aY as Wu,aZ as Ku,a_ as Gu,a$ as Ju,b0 as Zu,b1 as aa,b2 as Qu,b3 as Xu,b4 as ed,b5 as td,b6 as ad,b7 as ld,b8 as nd,b9 as od,ba as sd,bb as id,bc as rd,bd as ud,be as dd,bf as cd,bg as En,bh as da,bi as md,bj as cs,bk as Qn,bl as Ja,bm as pn,bn as pd,bo as ti,bp as vd,bq as ai,br as fd,bs as Va,bt as Wl,bu as Kl,bv as Xn,bw as yd,bx as Wn,by as gd,bz as ms,bA as ps,bB as So,bC as hd,bD as Ut,bE as vs,bF as li,bG as Hl,bH as bn,bI as Sl,bJ as vo,bK as bd,bL as fn,bM as kn,bN as kd,bO as He,bP as kt,bQ as fs,bR as Un,bS as fo,bT as _d,bU as Td,bV as xd,bW as Cd,bX as ol,bY as eo,bZ as wd,b_ as Ad,b$ as Id,c0 as Sd,c1 as Vd,c2 as $d,c3 as Dd,c4 as Fd,c5 as Nd,c6 as Md,c7 as Ed,c8 as Ud,c9 as Pd,ca as Bd,cb as ni,cc as Wo,cd as Kn,ce as Gn,cf as Ld,cg as Rl,ch as Rd,ci as zd,cj as Od,ck as jd,cl as qd,cm as Hd,cn as Yd,co as Wd,cp as Pn,cq as Kd,cr as Gd,cs as Jd,ct as Zd,cu as Qd,cv as Xd,cw as ec,cx as Ko,cy as ys,cz as gs,cA as tc,cB as Al,cC as ac,cD as lc,cE as nc,cF as oc,cG as sc,cH as Bn,cI as Ln,cJ as oi,cK as ic,cL as si,cM as rc,cN as hs,cO as Yl,cP as vn,cQ as Rn,cR as uc,cS as dc,cT as cc,cU as _n,cV as mc,cW as pc,cX as vc,cY as fc,cZ as ii,c_ as yc,c$ as gc,d0 as hc,d1 as bc,d2 as bs,d3 as kc,d4 as ks,d5 as _c,d6 as Tc,d7 as xc,d8 as Cc,d9 as wc,da as _s,db as Ac,dc as Et,dd as Ic,de as Sc,df as Vc,dg as $c,dh as Dc,di as Fc,dj as Nc,dk as Mc,dl as Ec,dm as Uc}from"./common-DXLIsG8X.js";import{_ as Sn}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./moment-BNeaYGUs.js";import"./locales-rb_tTC-x.js";const mt=Pe({__name:"SnackBar",emits:["update:show"],setup(f,{expose:T,emit:n}){const o=n,{tt:g,te:c}=Oe(),v=L(!1),y=L("");function k(d,u){v.value=!0,u?y.value=g(d,u):y.value=g(d)}function h(d){v.value=!0,Cn(d)&&"message"in d&&d.message?y.value=c(d.message):(Cn(d)&&"error"in d||Ua(d))&&(y.value=c(d))}return Ft(v,d=>{o("update:show",d)}),T({showMessage:k,showError:h}),(d,u)=>(l(),p($o,{modelValue:v.value,"onUpdate:modelValue":u[1]||(u[1]=C=>v.value=C)},{actions:a(()=>[t(H,{color:"primary",variant:"text",onClick:u[0]||(u[0]=C=>v.value=!1)},{default:a(()=>[j(i(e(g)("Close")),1)]),_:1})]),default:a(()=>[j(i(y.value)+" ",1)]),_:1},8,["modelValue"]))}}),Pc={class:"nav-header"},Bc={class:"d-flex"},Lc=["src"],Rc={class:"font-weight-medium text-xl"},zc={class:"nav-link home-link"},Oc={class:"nav-item-title"},jc={class:"nav-section-title"},qc={class:"title-wrapper"},Hc={class:"title-text"},Yc={class:"nav-link"},Wc={class:"nav-item-title d-inline-block"},Kc={class:"nav-link"},Gc={class:"nav-item-title"},Jc={class:"nav-section-title"},Zc={class:"title-wrapper"},Qc={class:"title-text"},Xc={class:"nav-link"},em={class:"nav-item-title"},tm={class:"nav-link"},am={class:"nav-item-title"},lm={class:"nav-link"},nm={class:"nav-item-title"},om={class:"nav-link"},sm={class:"nav-item-title"},im={key:0,class:"nav-link"},rm={class:"nav-item-title"},um={class:"nav-section-title"},dm={class:"title-wrapper"},cm={class:"title-text"},mm={class:"nav-link"},pm={class:"nav-item-title"},vm={class:"nav-link"},fm={class:"nav-item-title"},ym={class:"nav-link"},gm={class:"nav-item-title"},hm={class:"layout-content-wrapper"},bm={class:"layout-navbar navbar-blur"},km={class:"navbar-content-container"},_m={class:"d-flex h-100 align-center"},Tm={key:0,class:"app-logo d-flex align-center gap-x-3 app-title-wrapper"},xm={class:"d-flex"},Cm=["src"],wm={class:"font-weight-medium text-xl"},Am={class:"d-flex align-center justify-center fill-height bg-light-primary"},Im={class:"d-flex align-center justify-center fill-height bg-light-primary"},Sm={class:"layout-page-content"},Vm={class:"page-content-container"},$m=Pe({__name:"MainLayout",setup(f){const T=tn(),n=Ot(),o=Pi(),g=Oa(),{tt:c,initLocale:v}=Oe(),y=qa(),k=Ha(),h=ra(),d=Ys(),u=xe("snackbar"),C=L(!1),F=L(!1),w=L(!1),m=L(!1),x=L(!1),S=B(()=>T.mdAndDown.value),N=B(()=>o.path),A=B(()=>h.currentUserNickname||c("User")),$=B(()=>h.getUserAvatarUrl(h.currentUserBasicInfo,!0)),I=B({get:()=>k.appSettings.theme,set:O=>{O!==k.appSettings.theme&&(k.setTheme(O),O===wt.Light||O===wt.Dark?n.change(O):n.change(zo()))}}),z=B(()=>k.appSettings.showAddTransactionButtonInDesktopNavbar),M=B(()=>k.appSettings.applicationLock);function U(O){F.value=O.target.scrollTop>0}function X(){y.lock(),g.replace("/unlock")}function Z(){C.value=!0,m.value=!0,y.logout().then(()=>{C.value=!1,m.value=!1,k.clearAppSettings();const O=v(h.currentUserLanguage,k.appSettings.timeZone);k.updateLocalizedDefaultSettings(O),_o(h.currentUserExpenseAmountColor,h.currentUserIncomeAmountColor),g.replace("/login")}).catch(O=>{C.value=!1,m.value=!1,O.processed||u.value?.showError(O)})}function q(){d.setShowAddTransactionDialogInTransactionList()}return(O,V)=>{const _=Ie("router-link"),D=Ie("perfect-scrollbar"),P=Ie("router-view"),W=Ie("switch-to-mobile-dialog");return l(),b("div",{class:be(["layout-wrapper layout-nav-type-vertical layout-navbar-static layout-footer-static layout-content-width-fluid",{"layout-overlay-nav":S.value}])},[s("div",{class:be(["layout-vertical-nav",{visible:w.value,scrolled:F.value,"overlay-nav":S.value}])},[s("div",Pc,[t(_,{to:"/",class:"app-logo d-flex align-center gap-x-3 app-title-wrapper"},{default:a(()=>[s("div",Bc,[s("img",{alt:"logo",class:"main-logo",src:e(rl)},null,8,Lc)]),s("h1",Rc,i(e(c)("global.app.title")),1)]),_:1})]),t(D,{tag:"ul",class:"nav-items",options:{wheelPropagation:!1},onPsScrollY:U},{default:a(()=>[s("li",zc,[t(_,{to:"/"},{default:a(()=>[t(se,{class:"nav-item-icon",icon:e(Bi)},null,8,["icon"]),s("span",Oc,i(e(c)("Overview")),1)]),_:1})]),s("li",jc,[s("div",qc,[s("span",Hc,i(e(c)("Transaction Data")),1)])]),s("li",Yc,[t(_,{to:"/transaction/list?pageType=0&dateType=7"},{default:a(()=>[t(se,{class:"nav-item-icon",icon:e(hl)},null,8,["icon"]),s("span",Wc,i(e(c)("Transaction Details")),1),z.value?(l(),p(H,{key:0,density:"compact",color:"secondary",variant:"text",size:"22",class:"ms-1",icon:!0,onClick:q},{default:a(()=>[t(se,{icon:e(Li),size:"22"},null,8,["icon"]),t(yt,{activator:"parent"},{default:a(()=>[j(i(e(c)("Add Transaction")),1)]),_:1})]),_:1})):r("",!0)]),_:1})]),s("li",Kc,[t(_,{to:"/statistics/transaction"},{default:a(()=>[t(se,{class:"nav-item-icon",icon:e(Cs)},null,8,["icon"]),s("span",Gc,i(e(c)("Statistics & Analysis")),1)]),_:1})]),s("li",Jc,[s("div",Zc,[s("span",Qc,i(e(c)("Basis Data")),1)])]),s("li",Xc,[t(_,{to:"/account/list"},{default:a(()=>[t(se,{class:"nav-item-icon",icon:e(Do)},null,8,["icon"]),s("span",em,i(e(c)("Accounts")),1)]),_:1})]),s("li",tm,[t(_,{to:"/category/list"},{default:a(()=>[t(se,{class:"nav-item-icon",icon:e(ws)},null,8,["icon"]),s("span",am,i(e(c)("Transaction Categories")),1)]),_:1})]),s("li",lm,[t(_,{to:"/tag/list"},{default:a(()=>[t(se,{class:"nav-item-icon",icon:e(As)},null,8,["icon"]),s("span",nm,i(e(c)("Transaction Tags")),1)]),_:1})]),s("li",om,[t(_,{to:"/template/list"},{default:a(()=>[t(se,{class:"nav-item-icon",icon:e(Is)},null,8,["icon"]),s("span",sm,i(e(c)("Transaction Templates")),1)]),_:1})]),e(cu)()?(l(),b("li",im,[t(_,{to:"/schedule/list"},{default:a(()=>[t(se,{class:"nav-item-icon",icon:e(Ss)},null,8,["icon"]),s("span",rm,i(e(c)("Scheduled Transactions")),1)]),_:1})])):r("",!0),s("li",um,[s("div",dm,[s("span",cm,i(e(c)("Miscellaneous")),1)])]),s("li",mm,[t(_,{to:"/exchange_rates"},{default:a(()=>[t(se,{class:"nav-item-icon",icon:e(gn)},null,8,["icon"]),s("span",pm,i(e(c)("Exchange Rates Data")),1)]),_:1})]),s("li",vm,[s("a",{href:"javascript:void(0);",onClick:V[0]||(V[0]=ne=>x.value=!0)},[t(se,{class:"nav-item-icon",icon:e(Fo)},null,8,["icon"]),s("span",fm,i(e(c)("Use on Mobile Device")),1)])]),s("li",ym,[t(_,{to:"/about"},{default:a(()=>[t(se,{class:"nav-item-icon",icon:e(Ri)},null,8,["icon"]),s("span",gm,i(e(c)("About")),1)]),_:1})])]),_:1})],2),s("div",hm,[s("div",bm,[s("div",km,[s("div",_m,[t(H,{class:"ms-n3 me-2 d-lg-none",color:"default",variant:"text",icon:!0,onClick:V[1]||(V[1]=ne=>w.value=!0)},{default:a(()=>[t(se,{icon:e(an),size:"24"},null,8,["icon"])]),_:1}),S.value?(l(),b("div",Tm,[s("div",xm,[s("img",{alt:"logo",class:"main-logo",src:e(rl)},null,8,Cm)]),s("h1",wm,i(e(c)("global.app.title")),1)])):r("",!0),t(pt),t(H,{color:"primary",variant:"text",class:"me-2",icon:!0,onClick:V[2]||(V[2]=ne=>I.value==="light"?I.value="dark":I.value==="dark"?I.value="auto":I.value="light")},{default:a(()=>[t(se,{icon:I.value==="light"?e(zi):I.value==="dark"?e(Oi):e(ji),size:"24"},null,8,["icon"])]),_:1}),t(Za,{class:"cursor-pointer",variant:"tonal",color:$.value?"rgba(0,0,0,0)":"primary"},{default:a(()=>[$.value?(l(),p(ht,{key:0,src:$.value},{placeholder:a(()=>[s("div",Am,[t(se,{color:"primary",icon:e(Ol)},null,8,["icon"])])]),_:1},8,["src"])):$.value?r("",!0):(l(),p(se,{key:1,icon:e(Ol)},null,8,["icon"])),t(nt,{activator:"parent",width:"230",location:"bottom end",offset:"14px"},{default:a(()=>[t(ze,null,{default:a(()=>[t(le,null,{prepend:a(()=>[t(No,null,{default:a(()=>[t(Za,{variant:"tonal",color:$.value?"rgba(0,0,0,0)":"primary"},{default:a(()=>[$.value?(l(),p(ht,{key:0,src:$.value},{placeholder:a(()=>[s("div",Im,[t(se,{color:"primary",icon:e(Ol)},null,8,["icon"])])]),_:1},8,["src"])):$.value?r("",!0):(l(),p(se,{key:1,icon:e(Ol)},null,8,["icon"]))]),_:1},8,["color"])]),_:1})]),default:a(()=>[t(ot,{class:"ms-2 font-weight-semibold"},{default:a(()=>[j(i(A.value),1)]),_:1})]),_:1}),t(Ke,{class:"my-2"}),t(le,{"prepend-icon":e(qi),title:e(c)("User Settings"),to:"/user/settings"},null,8,["prepend-icon","title"]),t(le,{"prepend-icon":e(Vs),title:e(c)("Application Settings"),to:"/app/settings"},null,8,["prepend-icon","title"]),t(Ke,{class:"my-2"}),M.value?(l(),p(le,{key:0,"prepend-icon":e(Hi),title:e(c)("Lock Application"),onClick:X},null,8,["prepend-icon","title"])):r("",!0),t(le,{disabled:C.value,"prepend-icon":e(Yi),title:e(c)("Log Out"),onClick:Z},null,8,["disabled","prepend-icon","title"])]),_:1})]),_:1})]),_:1},8,["color"])])])]),s("div",Sm,[s("div",Vm,[(l(),p(P,{key:N.value}))])])]),t(W,{show:x.value,"onUpdate:show":V[3]||(V[3]=ne=>x.value=ne)},null,8,["show"]),s("div",{class:be(["layout-overlay",{visible:w.value}]),onClick:V[4]||(V[4]=ne=>w.value=!1)},null,2),t($s,{class:"justify-center align-center",persistent:!0,modelValue:m.value,"onUpdate:modelValue":V[5]||(V[5]=ne=>m.value=ne)},{default:a(()=>[t(je,{indeterminate:""})]),_:1},8,["modelValue"]),t(mt,{ref_key:"snackbar",ref:u},null,512)],2)}}}),Dm={class:"layout-wrapper"},Fm={class:"auth-logo d-flex align-start gap-x-3"},Nm=["src"],Mm={class:"font-weight-medium leading-normal text-2xl"},Em={key:0,class:"d-flex auth-img-footer"},Um={key:1,class:"d-flex auth-img-footer"},Pm={class:"d-flex align-center justify-center w-100 pt-10"},Bm={class:"d-flex align-center justify-center h-100"},Lm={class:"text-h4 mb-2"},Rm={key:0,class:"mb-0"},zm={key:1,class:"mt-1 mb-0"},Om={class:"d-flex align-center justify-space-between flex-wrap"},jm={class:"nav-item-title"},qm={class:"me-1"},Hm={class:"d-flex align-center justify-center"},Ym=Pe({__name:"LoginPage",setup(f){const T=Oa(),n=Ot(),{tt:o}=Oe(),g=qa(),{version:c,username:v,password:y,passcode:k,backupCode:h,tempToken:d,twoFAVerifyType:u,oauth2ClientSessionId:C,loggingInByPassword:F,loggingInByOAuth2:w,verifying:m,inputIsEmpty:x,twoFAInputIsEmpty:S,oauth2LoginUrl:N,oauth2LoginDisplayName:A,tips:$,doAfterLogin:I}=Ws("desktop"),z=xe("passwordInput"),M=xe("passcodeInput"),U=xe("snackbar"),X=L(!1),Z=L(!1),q=B(()=>n.global.name.value===wt.Dark);function O(){if(!v.value){U.value?.showMessage("Username cannot be blank");return}if(!y.value){U.value?.showMessage("Password cannot be blank");return}if(d.value){X.value=!0;return}F.value||(F.value=!0,g.authorize({loginName:v.value,password:y.value}).then(_=>{if(F.value=!1,_.need2FA){d.value=_.token,X.value=!0,ka(()=>{M.value&&(M.value.focus(),M.value.select())});return}I(_),T.replace("/")}).catch(_=>{if(F.value=!1,Zl()&&_.error&&_.error.errorCode===Il.UserEmailNotVerified&&_.error.context&&_.error.context.email){T.push(`/verify_email?email=${encodeURIComponent(_.error.context.email)}&emailSent=${_.error.context.hasValidEmailVerifyToken||!1}`);return}_.processed||U.value?.showError(_)}))}function V(){if(!(S.value||m.value)){if(u.value==="passcode"&&!k.value){U.value?.showMessage("Passcode cannot be blank");return}else if(u.value==="backupcode"&&!h.value){U.value?.showMessage("Backup code cannot be blank");return}m.value=!0,g.authorize2FA({token:d.value,passcode:u.value==="passcode"?k.value:null,recoveryCode:u.value==="backupcode"?h.value:null}).then(_=>{m.value=!1,I(_),T.replace("/")}).catch(_=>{m.value=!1,_.processed||U.value?.showError(_)})}}return C.value=pl(),(_,D)=>{const P=Ie("router-link"),W=Ie("language-select-button"),ne=Ie("switch-to-mobile-dialog");return l(),b("div",Dm,[t(P,{to:"/"},{default:a(()=>[s("div",Fm,[s("img",{alt:"logo",class:"login-page-logo",src:e(rl)},null,8,Nm),s("h1",Mm,i(e(o)("global.app.title")),1)])]),_:1}),t(Ae,{"no-gutters":"",class:"auth-wrapper"},{default:a(()=>[t(R,{cols:"12",md:"8",class:"auth-image-background d-none d-md-flex align-center justify-center position-relative"},{default:a(()=>[q.value?r("",!0):(l(),b("div",Em,[t(ht,{class:"img-with-direction",src:"img/desktop/background.svg"})])),q.value?(l(),b("div",Um,[t(ht,{class:"img-with-direction",src:"img/desktop/background-dark.svg"})])):r("",!0),s("div",Pm,[q.value?q.value?(l(),p(ht,{key:1,class:"img-with-direction","max-width":"600px",src:"img/desktop/people1-dark.svg"})):r("",!0):(l(),p(ht,{key:0,class:"img-with-direction","max-width":"600px",src:"img/desktop/people1.svg"}))])]),_:1}),t(R,{cols:"12",md:"4",class:"auth-card d-flex flex-column"},{default:a(()=>[s("div",Bm,[t(Ee,{variant:"flat",class:"w-100 mt-0 px-4 pt-12","max-width":"500"},{default:a(()=>[t(ve,null,{default:a(()=>[s("h4",Lm,i(e(o)("Welcome to ezBookkeeping")),1),e(Bl)()?(l(),b("p",Rm,i(e(o)("Please log in with your ezBookkeeping account")),1)):r("",!0),e($)?(l(),b("p",zm,i(e($)),1)):r("",!0)]),_:1}),t(ve,{class:"pb-0 mb-6"},{default:a(()=>[t(zt,null,{default:a(()=>[t(Ae,null,{default:a(()=>[e(Bl)()?(l(),p(R,{key:0,cols:"12"},{default:a(()=>[t(e(dt),{type:"text",autocomplete:"username",autofocus:!0,disabled:X.value||e(F)||e(w)||e(m),label:e(o)("Username"),placeholder:e(o)("Your username or email"),modelValue:e(v),"onUpdate:modelValue":D[0]||(D[0]=de=>vt(v)?v.value=de:null),onInput:D[1]||(D[1]=de=>d.value=""),onKeyup:D[2]||(D[2]=Wt(de=>z.value?.focus(),["enter"]))},null,8,["disabled","label","placeholder","modelValue"])]),_:1})):r("",!0),e(Bl)()?(l(),p(R,{key:1,cols:"12"},{default:a(()=>[t(e(dt),{autocomplete:"current-password",ref_key:"passwordInput",ref:z,type:"password",disabled:X.value||e(F)||e(w)||e(m),label:e(o)("Password"),placeholder:e(o)("Your password"),modelValue:e(y),"onUpdate:modelValue":D[3]||(D[3]=de=>vt(y)?y.value=de:null),onInput:D[4]||(D[4]=de=>d.value=""),onKeyup:Wt(O,["enter"])},null,8,["disabled","label","placeholder","modelValue"])]),_:1})):r("",!0),Pa(t(R,{cols:"12"},{default:a(()=>[e(u)==="passcode"?(l(),p(e(dt),{key:0,type:"number",autocomplete:"one-time-code",ref_key:"passcodeInput",ref:M,disabled:e(F)||e(w)||e(m),label:e(o)("Passcode"),placeholder:e(o)("Passcode"),"append-inner-icon":e(Ds),modelValue:e(k),"onUpdate:modelValue":D[5]||(D[5]=de=>vt(k)?k.value=de:null),"onClick:appendInner":D[6]||(D[6]=de=>u.value="backupcode"),onKeyup:Wt(V,["enter"])},null,8,["disabled","label","placeholder","append-inner-icon","modelValue"])):r("",!0),e(u)==="backupcode"?(l(),p(e(dt),{key:1,type:"text",disabled:e(F)||e(w)||e(m),label:e(o)("Backup Code"),placeholder:e(o)("Backup Code"),"append-inner-icon":e(Fs),modelValue:e(h),"onUpdate:modelValue":D[7]||(D[7]=de=>vt(h)?h.value=de:null),"onClick:appendInner":D[8]||(D[8]=de=>u.value="passcode"),onKeyup:Wt(V,["enter"])},null,8,["disabled","label","placeholder","append-inner-icon","modelValue"])):r("",!0)]),_:1},512),[[Ba,X.value]]),t(R,{cols:"12",class:"py-0 mt-1 mb-4"},{default:a(()=>[s("div",Om,[s("a",{href:"javascript:void(0);",class:be({disabled:e(F)||e(w)||e(m)}),onClick:D[9]||(D[9]=de=>Z.value=!0)},[s("span",jm,i(e(o)("Use on Mobile Device")),1)],2),t(pt),t(P,{class:be(["text-primary",{disabled:!e(mu)()||e(F)||e(w)||e(m)}]),to:"/forgetpassword"},{default:a(()=>[j(i(e(o)("Forget Password?")),1)]),_:1},8,["class"])])]),_:1}),t(R,{cols:"12"},{default:a(()=>[e(Bl)()&&!X.value?(l(),p(H,{key:0,block:"",disabled:e(x)||e(F)||e(w)||e(m),onClick:O},{default:a(()=>[j(i(e(o)("Log In"))+" ",1),e(F)?(l(),p(je,{key:0,indeterminate:"",size:"22",class:"ms-2"})):r("",!0)]),_:1},8,["disabled"])):r("",!0),e(Bl)()&&e(jl)()?(l(),p(R,{key:1,cols:"12",class:"d-flex align-center px-0"},{default:a(()=>[t(Ke,{class:"me-3"}),j(" "+i(e(o)("or"))+" ",1),t(Ke,{class:"ms-3"})]),_:1})):r("",!0),e(jl)()?(l(),p(H,{key:2,block:"",disabled:e(F)||e(w)||e(m),href:e(N),onClick:D[10]||(D[10]=de=>w.value=!0)},{default:a(()=>[j(i(e(A))+" ",1),e(w)?(l(),p(je,{key:0,indeterminate:"",size:"22",class:"ms-2"})):r("",!0)]),_:1},8,["disabled","href"])):X.value?(l(),p(H,{key:3,block:"",disabled:e(S)||e(F)||e(w)||e(m),onClick:V},{default:a(()=>[j(i(e(o)("Continue"))+" ",1),e(m)?(l(),p(je,{key:0,indeterminate:"",size:"22",class:"ms-2"})):r("",!0)]),_:1},8,["disabled"])):r("",!0)]),_:1}),e(Bl)()?(l(),p(R,{key:2,cols:"12",class:"text-center text-base"},{default:a(()=>[s("span",qm,i(e(o)("Don't have an account?")),1),t(P,{class:be(["text-primary",{disabled:!e(pu)()||e(F)||e(w)||e(m)}]),to:"/signup"},{default:a(()=>[j(i(e(o)("Create an account")),1)]),_:1},8,["class"])]),_:1})):r("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),t(pt),s("div",Hm,[t(Ee,{variant:"flat",class:"w-100 px-4 pb-4","max-width":"500"},{default:a(()=>[t(ve,{class:"pt-0"},{default:a(()=>[t(Ae,null,{default:a(()=>[t(R,{cols:"12",class:"text-center"},{default:a(()=>[t(W,{disabled:e(F)||e(w)||e(m)},null,8,["disabled"])]),_:1}),t(R,{cols:"12",class:"d-flex align-center pt-0"},{default:a(()=>[t(Ke)]),_:1}),t(R,{cols:"12",class:"text-center text-sm"},{default:a(()=>[D[12]||(D[12]=s("span",null,"Powered by ",-1)),D[13]||(D[13]=s("a",{href:"https://github.com/mayswind/ezbookkeeping",target:"_blank"},"ezBookkeeping",-1)),D[14]||(D[14]=j(" ",-1)),s("span",null,i(e(c)),1)]),_:1})]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1}),t(ne,{show:Z.value,"onUpdate:show":D[11]||(D[11]=de=>Z.value=de)},null,8,["show"]),t(mt,{ref_key:"snackbar",ref:U},null,512)])}}}),Wm={class:"layout-wrapper"},Km={class:"auth-logo d-flex align-start gap-x-3"},Gm=["src"],Jm={class:"font-weight-medium leading-normal text-2xl"},Zm={key:0,class:"d-flex auth-img-footer"},Qm={key:1,class:"d-flex auth-img-footer"},Xm={class:"d-flex align-center justify-center w-100 pt-10"},ep={class:"text-h4 mb-1"},tp={class:"text-sm mt-2 mb-5"},ap={class:"text-h4 mb-1"},lp={class:"text-sm mt-2 mb-2"},np={class:"mb-3"},op={class:"ms-3"},sp={class:"ms-3"},ip={class:"text-h4 mb-1"},rp={class:"my-5"},up={class:"d-flex justify-sm-space-between gap-4 flex-wrap justify-center mt-5"},dp=Pe({__name:"SignupPage",setup(f){const T=Oa(),n=Ot(),{tt:o,getAllWeekDays:g,getAllTransactionDefaultCategories:c}=Oe(),{user:v,submitting:y,languageTitle:k,currentLocale:h,inputEmptyProblemMessage:d,inputInvalidProblemMessage:u,getCategoryTypeName:C,doAfterSignupSuccess:F}=vu(),w=qa(),m=xe("snackbar"),x=L("basicSetting"),S=L(!1),N=L(null),A=L(!1),$=B(()=>g()),I=B(()=>c(0,h.value)),z=B(()=>n.global.name.value===wt.Dark),M=B(()=>{const _=[{name:"basicSetting",title:o("User Information"),subTitle:o("Basic Information")},{name:"presetCategories",title:o("Transaction Categories"),subTitle:o("Preset Categories")}];return N.value&&_.push({name:"finalResult",title:o("Complete"),subTitle:o("Registration Completed")}),_});function U(_){if(!(y.value||x.value==="finalResult"||A.value)){if(_==="basicSetting")x.value="basicSetting";else if(_==="presetCategories"){const D=d.value||u.value;if(D){m.value?.showMessage(D);return}x.value="presetCategories"}}}function X(){U("basicSetting")}function Z(){U("presetCategories")}function q(){const _=d.value||u.value;if(_){m.value?.showMessage(_);return}A.value=!1,y.value=!0;let D=[];S.value&&(D=Ks(I.value)),w.register({user:v.value,presetCategories:D}).then(P=>{if(!vl()){y.value=!1,S.value&&!P.presetCategoriesSaved?(N.value=o("You have been successfully registered, but there was an failure when adding preset categories. You can re-add preset categories in settings page anytime."),x.value="finalResult"):P.needVerifyEmail?(N.value=o("You have been successfully registered. An account activation link has been sent to your email address, please activate your account first."),x.value="finalResult"):(m.value?.showMessage("You have been successfully registered"),A.value=!0);return}F(P),y.value=!1,S.value&&!P.presetCategoriesSaved?m.value?.showMessage("You have been successfully registered, but there was an failure when adding preset categories. You can re-add preset categories in settings page anytime."):(m.value?.showMessage("You have been successfully registered"),T.replace("/")),A.value=!0}).catch(P=>{y.value=!1,P.processed||m.value?.showError(P)})}function O(){T.push("/")}function V(_){!_&&A.value&&T.replace("/")}return(_,D)=>{const P=Ie("router-link"),W=Ie("steps-bar"),ne=Ie("language-select"),de=Ie("currency-select"),J=Ie("language-select-button"),Y=Ie("ItemIcon");return l(),b("div",Wm,[t(P,{to:"/"},{default:a(()=>[s("div",Km,[s("img",{alt:"logo",class:"login-page-logo",src:e(rl)},null,8,Gm),s("h1",Jm,i(e(o)("global.app.title")),1)])]),_:1}),t(Ae,{"no-gutters":"",class:"auth-wrapper"},{default:a(()=>[t(R,{cols:"12",md:"4",class:"auth-image-background d-none d-md-flex align-center justify-center position-relative"},{default:a(()=>[z.value?r("",!0):(l(),b("div",Zm,[t(ht,{class:"img-with-direction",src:"img/desktop/background.svg"})])),z.value?(l(),b("div",Qm,[t(ht,{class:"img-with-direction",src:"img/desktop/background-dark.svg"})])):r("",!0),s("div",Xm,[z.value?z.value?(l(),p(ht,{key:1,class:"img-with-direction","max-width":"320px",src:"img/desktop/people2-dark.svg"})):r("",!0):(l(),p(ht,{key:0,class:"img-with-direction","max-width":"320px",src:"img/desktop/people2.svg"}))])]),_:1}),t(R,{cols:"12",md:"8",class:"auth-card d-flex align-center justify-center pa-10"},{default:a(()=>[t(Ee,{variant:"flat",class:"mt-12 mt-sm-0 pt-sm-12 pt-md-0"},{default:a(()=>[t(W,{"min-width":"700",steps:M.value,"current-step":x.value,"onStep:change":U},null,8,["steps","current-step"]),t(ja,{class:"mt-5 disable-tab-transition",style:{"max-width":"700px"},modelValue:x.value,"onUpdate:modelValue":D[10]||(D[10]=ie=>x.value=ie)},{default:a(()=>[t(zt,null,{default:a(()=>[t(Pt,{value:"basicSetting"},{default:a(()=>[s("h4",ep,i(e(o)("Basic Information")),1),s("p",tp,[s("span",null,i(e(o)("Already have an account?")),1),t(P,{class:"ms-1",to:"/login"},{default:a(()=>[j(i(e(o)("Click here to log in")),1)]),_:1})]),t(Ae,null,{default:a(()=>[t(R,{cols:"12",md:"6"},{default:a(()=>[t(dt,{type:"text",autocomplete:"username",disabled:e(y)||A.value,label:e(o)("Username"),placeholder:e(o)("Your username"),modelValue:e(v).username,"onUpdate:modelValue":D[0]||(D[0]=ie=>e(v).username=ie)},null,8,["disabled","label","placeholder","modelValue"])]),_:1}),t(R,{cols:"12",md:"6"},{default:a(()=>[t(dt,{type:"text",autocomplete:"nickname",disabled:e(y)||A.value,label:e(o)("Nickname"),placeholder:e(o)("Your nickname"),modelValue:e(v).nickname,"onUpdate:modelValue":D[1]||(D[1]=ie=>e(v).nickname=ie)},null,8,["disabled","label","placeholder","modelValue"])]),_:1})]),_:1}),t(Ae,null,{default:a(()=>[t(R,{cols:"12",md:"12"},{default:a(()=>[t(dt,{type:"email",autocomplete:"email",disabled:e(y)||A.value,label:e(o)("E-mail"),placeholder:e(o)("Your email address"),modelValue:e(v).email,"onUpdate:modelValue":D[2]||(D[2]=ie=>e(v).email=ie)},null,8,["disabled","label","placeholder","modelValue"])]),_:1})]),_:1}),t(Ae,null,{default:a(()=>[t(R,{cols:"12",md:"6"},{default:a(()=>[t(dt,{autocomplete:"new-password",type:"password",disabled:e(y)||A.value,label:e(o)("Password"),placeholder:e(o)("Your password, at least 6 characters"),modelValue:e(v).password,"onUpdate:modelValue":D[3]||(D[3]=ie=>e(v).password=ie)},null,8,["disabled","label","placeholder","modelValue"])]),_:1}),t(R,{cols:"12",md:"6"},{default:a(()=>[t(dt,{autocomplete:"new-password",type:"password",disabled:e(y)||A.value,label:e(o)("Confirm Password"),placeholder:e(o)("Re-enter the password"),modelValue:e(v).confirmPassword,"onUpdate:modelValue":D[4]||(D[4]=ie=>e(v).confirmPassword=ie)},null,8,["disabled","label","placeholder","modelValue"])]),_:1})]),_:1}),t(Ae,null,{default:a(()=>[t(R,{cols:"12",md:"12"},{default:a(()=>[t(ne,{disabled:e(y)||A.value,label:e(k),placeholder:e(k),"use-model-value":!0,modelValue:e(h),"onUpdate:modelValue":D[5]||(D[5]=ie=>vt(h)?h.value=ie:null)},null,8,["disabled","label","placeholder","modelValue"])]),_:1})]),_:1}),t(Ae,null,{default:a(()=>[t(R,{cols:"12",md:"6"},{default:a(()=>[t(de,{disabled:e(y)||A.value,label:e(o)("Default Currency"),placeholder:e(o)("Default Currency"),modelValue:e(v).defaultCurrency,"onUpdate:modelValue":D[6]||(D[6]=ie=>e(v).defaultCurrency=ie)},null,8,["disabled","label","placeholder","modelValue"])]),_:1}),t(R,{cols:"12",md:"6"},{default:a(()=>[t(Je,{"item-title":"displayName","item-value":"type",disabled:e(y)||A.value,label:e(o)("First Day of Week"),placeholder:e(o)("First Day of Week"),items:$.value,modelValue:e(v).firstDayOfWeek,"onUpdate:modelValue":D[7]||(D[7]=ie=>e(v).firstDayOfWeek=ie)},null,8,["disabled","label","placeholder","items","modelValue"])]),_:1})]),_:1})]),_:1}),t(Pt,{value:"presetCategories",class:"signup-preset-categories"},{default:a(()=>[s("h4",ap,i(e(o)("Preset Categories")),1),s("p",lp,i(e(o)("Set whether to use preset transaction categories")),1),t(Ae,null,{default:a(()=>[t(R,{cols:"12",sm:"6"},{default:a(()=>[t(Qa,{class:"mb-2",disabled:e(y)||A.value,label:e(o)("Use Preset Transaction Categories"),modelValue:S.value,"onUpdate:modelValue":D[8]||(D[8]=ie=>S.value=ie)},null,8,["disabled","label","modelValue"])]),_:1}),t(R,{cols:"12",sm:"6",class:"text-end-sm"},{default:a(()=>[t(J,{disabled:e(y)||A.value,"use-model-value":!0,modelValue:e(h),"onUpdate:modelValue":D[9]||(D[9]=ie=>vt(h)?h.value=ie:null)},null,8,["disabled","modelValue"])]),_:1})]),_:1}),s("div",{class:be(["overflow-y-auto px-3",{disabled:!S.value||e(y)||A.value}]),style:{"max-height":"323px"}},[(l(!0),b(ue,null,$e(I.value,(ie,fe)=>(l(),p(Ae,{key:fe},{default:a(()=>[t(R,{cols:"12",md:"12"},{default:a(()=>[s("h4",np,i(e(C)(fe)),1),t(Vl,{class:"border rounded",variant:"accordion",multiple:""},{default:a(()=>[(l(!0),b(ue,null,$e(ie,(te,K)=>(l(),p($l,{key:K},{default:a(()=>[t(Dl,{class:"py-0"},{default:a(()=>[t(Y,{"icon-type":"category","icon-id":te.icon,color:te.color},null,8,["icon-id","color"]),s("span",op,i(te.name),1)]),_:2},1024),te.subCategories.length?(l(),p(Fl,{key:0},{default:a(()=>[t(ze,{rounded:"",density:"comfortable",class:"pa-0"},{default:a(()=>[(l(!0),b(ue,null,$e(te.subCategories,(me,Ne)=>(l(),b(ue,{key:Ne},[t(le,null,{prepend:a(()=>[t(Y,{"icon-type":"category","icon-id":me.icon,color:me.color},null,8,["icon-id","color"])]),default:a(()=>[s("span",sp,i(me.name),1)]),_:2},1024),Ne!==te.subCategories.length-1?(l(),p(Ke,{key:0})):r("",!0)],64))),128))]),_:2},1024)]),_:2},1024)):r("",!0)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))],2)]),_:1}),N.value?(l(),p(Pt,{key:0,value:"finalResult"},{default:a(()=>[s("h4",ip,i(e(o)("Registration Completed")),1),s("p",rp,i(N.value),1)]),_:1})):r("",!0)]),_:1})]),_:1},8,["modelValue"]),s("div",up,[t(H,{class:"button-icon-with-direction",color:x.value==="basicSetting"||x.value==="finalResult"?"default":"primary",disabled:x.value==="basicSetting"||x.value==="finalResult"||e(y)||A.value,"prepend-icon":e(Mo),onClick:X},{default:a(()=>[j(i(e(o)("Previous")),1)]),_:1},8,["color","disabled","prepend-icon"]),x.value==="basicSetting"?(l(),p(H,{key:0,class:"button-icon-with-direction",color:"primary",disabled:e(y)||A.value,"append-icon":e($a),onClick:Z},{default:a(()=>[j(i(e(o)("Next")),1)]),_:1},8,["disabled","append-icon"])):r("",!0),x.value==="presetCategories"?(l(),p(H,{key:1,color:"teal",disabled:e(y)||A.value,"append-icon":e(y)?void 0:e(Ye),onClick:q},{default:a(()=>[j(i(e(o)("Submit"))+" ",1),e(y)?(l(),p(je,{key:0,indeterminate:"",size:"22",class:"ms-2"})):r("",!0)]),_:1},8,["disabled","append-icon"])):r("",!0),x.value==="finalResult"?(l(),p(H,{key:2,class:"button-icon-with-direction","append-icon":e($a),onClick:O},{default:a(()=>[j(i(e(o)("Continue")),1)]),_:1},8,["append-icon"])):r("",!0)])]),_:1})]),_:1})]),_:1}),t(mt,{ref_key:"snackbar",ref:m,"onUpdate:show":V},null,512)])}}}),pa=Pe({__name:"ConfirmDialog",props:{show:{type:Boolean},color:{},title:{},text:{}},emits:["update:show"],setup(f,{expose:T,emit:n}){const o=f,g=n,{tt:c}=Oe(),v=L(!1),y=L(o.title||c("global.app.title")),k=L(o.text||""),h=L(o.color||"primary");let d=null,u=null;function C(m,x,S){if(v.value=!0,!x||Cn(x))if(y.value=c("global.app.title"),!x)k.value=c(m);else{const N=x;k.value=c(m,N)}else Ua(x)&&(S?(y.value=c(m,S),k.value=c(x,S)):(y.value=c(m),k.value=c(x)));return x&&Cn(x)&&Ua(x.color)?h.value=x.color||"primary":S&&Ua(S.color)&&(h.value=S.color||"primary"),new Promise((N,A)=>{d=N,u=A})}function F(){d&&d(),v.value=!1,g("update:show",!1)}function w(){u&&u(),v.value=!1,g("update:show",!1)}return Ft(v,m=>{g("update:show",m)}),T({open:C}),(m,x)=>(l(),p(Tt,{persistent:"","min-width":"320",width:"auto",modelValue:v.value,"onUpdate:modelValue":x[0]||(x[0]=S=>v.value=S)},{default:a(()=>[t(Ee,null,{default:a(()=>[t(Eo,{color:h.value},{default:a(()=>[t(Ns,null,{default:a(()=>[j(i(y.value),1)]),_:1})]),_:1},8,["color"]),k.value?(l(),p(ve,{key:0,class:"pa-4 pb-6"},{default:a(()=>[j(i(k.value),1)]),_:1})):r("",!0),t(Uo,{class:"px-4 pb-4"},{default:a(()=>[t(pt),t(H,{color:"gray",onClick:w},{default:a(()=>[j(i(e(c)("Cancel")),1)]),_:1}),t(H,{color:h.value,onClick:F},{default:a(()=>[j(i(e(c)("OK")),1)]),_:1},8,["color"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),cp={class:"layout-wrapper"},mp={class:"auth-logo d-flex align-start gap-x-3"},pp=["src"],vp={class:"font-weight-medium leading-normal text-2xl"},fp={key:0,class:"d-flex auth-img-footer"},yp={key:1,class:"d-flex auth-img-footer"},gp={class:"d-flex align-center justify-center w-100 pt-10"},hp={class:"d-flex align-center justify-center h-100"},bp={class:"text-h4 mb-2"},kp={key:0,class:"mb-0"},_p={key:1,class:"mb-0"},Tp={key:2,class:"mb-0"},xp={key:3,class:"mb-0"},Cp={key:4,class:"mb-0"},wp={key:0},Ap={key:1},Ip={class:"d-flex align-center justify-center"},Sp=Pe({__name:"VerifyEmailPage",props:{email:{},token:{},hasValidEmailVerifyToken:{type:Boolean}},setup(f){const T=f,n=Oa(),o=Ot(),{tt:g,te:c}=Oe(),v=qa(),y=`${Oo()}`,k=xe("confirmDialog"),h=xe("snackbar"),d=L(""),u=L(!0),C=L(!1),F=L(!1),w=L(""),m=B(()=>o.global.name.value===wt.Dark);function x(){if(F.value=!1,u.value=!0,!T.token){u.value=!1;return}v.verifyEmail({token:T.token,requestNewToken:!vl()}).then(()=>{u.value=!1,F.value=!0,h.value?.showMessage("Email address is verified")}).catch(A=>{u.value=!1,F.value=!1,A.processed||(w.value=c(A.message||A),h.value?.showError(A))})}function S(){C.value=!0,v.resendVerifyEmailByUnloginUser({email:T.email,password:d.value}).then(()=>{C.value=!1,h.value?.showMessage("Validation email has been sent")}).catch(A=>{C.value=!1,A.processed||h.value?.showError(A)})}function N(A){!A&&F.value&&vl()&&n.replace("/")}return x(),(A,$)=>{const I=Ie("router-link"),z=Ie("language-select-button");return l(),b("div",cp,[t(I,{to:"/"},{default:a(()=>[s("div",mp,[s("img",{alt:"logo",class:"login-page-logo",src:e(rl)},null,8,pp),s("h1",vp,i(e(g)("global.app.title")),1)])]),_:1}),t(Ae,{"no-gutters":"",class:"auth-wrapper"},{default:a(()=>[t(R,{cols:"12",md:"8",class:"auth-image-background d-none d-md-flex align-center justify-center position-relative"},{default:a(()=>[m.value?r("",!0):(l(),b("div",fp,[t(ht,{class:"img-with-direction",src:"img/desktop/background.svg"})])),m.value?(l(),b("div",yp,[t(ht,{class:"img-with-direction",src:"img/desktop/background-dark.svg"})])):r("",!0),s("div",gp,[m.value?m.value?(l(),p(ht,{key:1,class:"img-with-direction","max-width":"320px",src:"img/desktop/people2-dark.svg"})):r("",!0):(l(),p(ht,{key:0,class:"img-with-direction","max-width":"320px",src:"img/desktop/people2.svg"}))])]),_:1}),t(R,{cols:"12",md:"4",class:"auth-card d-flex flex-column"},{default:a(()=>[s("div",hp,[t(Ee,{variant:"flat",class:"w-100 mt-0 px-4 pt-12","max-width":"500"},{default:a(()=>[t(ve,null,{default:a(()=>[s("h4",bp,i(e(g)("Verify your email")),1),f.token&&u.value?(l(),b("p",kp,i(e(g)("Verifying...")),1)):r("",!0),f.token&&F.value?(l(),b("p",_p,i(e(g)("Email address is verified")),1)):r("",!0),f.token&&!F.value&&w.value?(l(),b("p",Tp,i(w.value),1)):r("",!0),!f.token&&!f.email?(l(),b("p",xp,i(e(g)("Parameter Invalid")),1)):r("",!0),!f.token&&f.email?(l(),b("p",Cp,i(e(g)(f.hasValidEmailVerifyToken?"format.misc.accountActivationAndResendValidationEmailTip":"format.misc.resendValidationEmailTip",{email:f.email})),1)):r("",!0)]),_:1}),t(ve,{class:"pb-0 mb-6"},{default:a(()=>[t(zt,null,{default:a(()=>[t(Ae,null,{default:a(()=>[!u.value&&!f.token&&f.email&&e(Zl)()?(l(),p(R,{key:0,cols:"12"},{default:a(()=>[t(dt,{autocomplete:"password",type:"password",disabled:u.value||C.value,label:e(g)("Password"),placeholder:e(g)("Your password"),modelValue:d.value,"onUpdate:modelValue":$[0]||($[0]=M=>d.value=M),onKeyup:Wt(S,["enter"])},null,8,["disabled","label","placeholder","modelValue"])]),_:1})):r("",!0),!u.value&&!f.token&&f.email&&e(Zl)()?(l(),p(R,{key:1,cols:"12"},{default:a(()=>[t(H,{block:"",type:"submit",disabled:u.value||C.value||!d.value,onClick:S},{default:a(()=>[j(i(e(g)("Resend Validation Email"))+" ",1),C.value?(l(),p(je,{key:0,indeterminate:"",size:"22",class:"ms-2"})):r("",!0)]),_:1},8,["disabled"])]),_:1})):r("",!0),t(R,{cols:"12"},{default:a(()=>[t(I,{class:be(["d-flex align-center justify-center",{disabled:u.value||C.value}]),to:F.value?"/":"/login"},{default:a(()=>[t(se,{class:"icon-with-direction",icon:e(to)},null,8,["icon"]),F.value?F.value?(l(),b("span",Ap,i(e(g)("Back to home page")),1)):r("",!0):(l(),b("span",wp,i(e(g)("Back to login page")),1))]),_:1},8,["to","class"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),t(pt),s("div",Ip,[t(Ee,{variant:"flat",class:"w-100 px-4 pb-4","max-width":"500"},{default:a(()=>[t(ve,{class:"pt-0"},{default:a(()=>[t(Ae,null,{default:a(()=>[t(R,{cols:"12",class:"text-center"},{default:a(()=>[t(z,{disabled:C.value},null,8,["disabled"])]),_:1}),t(R,{cols:"12",class:"d-flex align-center pt-0"},{default:a(()=>[t(Ke)]),_:1}),t(R,{cols:"12",class:"text-center text-sm"},{default:a(()=>[$[1]||($[1]=s("span",null,"Powered by ",-1)),$[2]||($[2]=s("a",{href:"https://github.com/mayswind/ezbookkeeping",target:"_blank"},"ezBookkeeping",-1)),$[3]||($[3]=j(" ",-1)),s("span",null,i(y))]),_:1})]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1}),t(pa,{ref_key:"confirmDialog",ref:k},null,512),t(mt,{ref_key:"snackbar",ref:h,"onUpdate:show":N},null,512)])}}}),Vp={class:"layout-wrapper"},$p={class:"auth-logo d-flex align-start gap-x-3"},Dp=["src"],Fp={class:"font-weight-medium leading-normal text-2xl"},Np={key:0,class:"d-flex auth-img-footer"},Mp={key:1,class:"d-flex auth-img-footer"},Ep={class:"d-flex align-center justify-center w-100 pt-10"},Up={class:"d-flex align-center justify-center h-100"},Pp={class:"text-h4 mb-2"},Bp={class:"mb-0"},Lp={class:"d-flex align-center justify-center"},Rp=Pe({__name:"ForgetPasswordPage",setup(f){const T=Ot(),{tt:n}=Oe(),o=qa(),g=`${Oo()}`,c=xe("snackbar"),v=L(""),y=L(!1),k=B(()=>T.global.name.value===wt.Dark);function h(){if(!v.value){c.value?.showMessage("Email address cannot be blank");return}y.value=!0,o.requestResetPassword({email:v.value}).then(()=>{y.value=!1,c.value?.showMessage("Password reset email has been sent")}).catch(d=>{y.value=!1,d.processed||c.value?.showError(d)})}return(d,u)=>{const C=Ie("router-link"),F=Ie("language-select-button");return l(),b("div",Vp,[t(C,{to:"/"},{default:a(()=>[s("div",$p,[s("img",{alt:"logo",class:"login-page-logo",src:e(rl)},null,8,Dp),s("h1",Fp,i(e(n)("global.app.title")),1)])]),_:1}),t(Ae,{"no-gutters":"",class:"auth-wrapper"},{default:a(()=>[t(R,{cols:"12",md:"8",class:"auth-image-background d-none d-md-flex align-center justify-center position-relative"},{default:a(()=>[k.value?r("",!0):(l(),b("div",Np,[t(ht,{class:"img-with-direction",src:"img/desktop/background.svg"})])),k.value?(l(),b("div",Mp,[t(ht,{class:"img-with-direction",src:"img/desktop/background-dark.svg"})])):r("",!0),s("div",Ep,[k.value?k.value?(l(),p(ht,{key:1,class:"img-with-direction","max-width":"600px",src:"img/desktop/people4-dark.svg"})):r("",!0):(l(),p(ht,{key:0,class:"img-with-direction","max-width":"600px",src:"img/desktop/people4.svg"}))])]),_:1}),t(R,{cols:"12",md:"4",class:"auth-card d-flex flex-column"},{default:a(()=>[s("div",Up,[t(Ee,{variant:"flat",class:"w-100 mt-0 px-4 pt-12","max-width":"500"},{default:a(()=>[t(ve,null,{default:a(()=>[s("h4",Pp,i(e(n)("Forget Password?")),1),s("p",Bp,i(e(n)("Please enter your email address used for registration and we'll send you an email with a reset password link")),1)]),_:1}),t(ve,{class:"pb-0 mb-6"},{default:a(()=>[t(zt,null,{default:a(()=>[t(Ae,null,{default:a(()=>[t(R,{cols:"12"},{default:a(()=>[t(dt,{type:"email",autocomplete:"email",autofocus:!0,disabled:y.value,label:e(n)("E-mail"),placeholder:e(n)("Your email address"),modelValue:v.value,"onUpdate:modelValue":u[0]||(u[0]=w=>v.value=w),onKeyup:Wt(h,["enter"])},null,8,["disabled","label","placeholder","modelValue"])]),_:1}),t(R,{cols:"12"},{default:a(()=>[t(H,{block:"",type:"submit",disabled:!v.value||y.value,onClick:h},{default:a(()=>[j(i(e(n)("Send Reset Link"))+" ",1),y.value?(l(),p(je,{key:0,indeterminate:"",size:"22",class:"ms-2"})):r("",!0)]),_:1},8,["disabled"])]),_:1}),t(R,{cols:"12"},{default:a(()=>[t(C,{class:be(["d-flex align-center justify-center",{disabled:y.value}]),to:"/login"},{default:a(()=>[t(se,{class:"icon-with-direction",icon:e(to)},null,8,["icon"]),s("span",null,i(e(n)("Back to login page")),1)]),_:1},8,["class"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),t(pt),s("div",Lp,[t(Ee,{variant:"flat",class:"w-100 px-4 pb-4","max-width":"500"},{default:a(()=>[t(ve,{class:"pt-0"},{default:a(()=>[t(Ae,null,{default:a(()=>[t(R,{cols:"12",class:"text-center"},{default:a(()=>[t(F,{disabled:y.value},null,8,["disabled"])]),_:1}),t(R,{cols:"12",class:"d-flex align-center pt-0"},{default:a(()=>[t(Ke)]),_:1}),t(R,{cols:"12",class:"text-center text-sm"},{default:a(()=>[u[1]||(u[1]=s("span",null,"Powered by ",-1)),u[2]||(u[2]=s("a",{href:"https://github.com/mayswind/ezbookkeeping",target:"_blank"},"ezBookkeeping",-1)),u[3]||(u[3]=j(" ",-1)),s("span",null,i(g))]),_:1})]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1}),t(mt,{ref_key:"snackbar",ref:c},null,512)])}}}),zp={class:"layout-wrapper"},Op={class:"auth-logo d-flex align-start gap-x-3"},jp=["src"],qp={class:"font-weight-medium leading-normal text-2xl"},Hp={key:0,class:"d-flex auth-img-footer"},Yp={key:1,class:"d-flex auth-img-footer"},Wp={class:"d-flex align-center justify-center w-100 pt-10"},Kp={class:"d-flex align-center justify-center h-100"},Gp={class:"text-h4 mb-2"},Jp={class:"mb-0"},Zp={class:"d-flex align-center justify-center"},Qp=Pe({__name:"ResetPasswordPage",props:{token:{}},setup(f){const T=f,n=Oa(),o=Ot(),{tt:g}=Oe(),c=qa(),v=`${Oo()}`,y=xe("passwordInput"),k=xe("confirmPasswordInput"),h=xe("confirmDialog"),d=xe("snackbar"),u=L(""),C=L(""),F=L(""),w=L(!1),m=L(!1),x=B(()=>o.global.name.value===wt.Dark),S=B(()=>u.value?!C.value&&!F.value?"Nothing has been modified":!C.value&&F.value?"New password cannot be blank":C.value&&!F.value?"Password confirmation cannot be blank":C.value&&F.value&&C.value!==F.value?"Password and password confirmation do not match":null:"Email address cannot be blank");function N($){!$&&m.value&&n.replace("/login")}function A(){m.value=!1;const $=S.value;if($){d.value?.showMessage($);return}w.value=!0,c.resetPassword({token:T.token,email:u.value,password:C.value}).then(()=>{w.value=!1,m.value=!0,d.value?.showMessage("Password has been updated")}).catch(I=>{w.value=!1,m.value=!1,I.processed||d.value?.showError(I)})}return($,I)=>{const z=Ie("router-link"),M=Ie("language-select-button");return l(),b("div",zp,[t(z,{to:"/"},{default:a(()=>[s("div",Op,[s("img",{alt:"logo",class:"login-page-logo",src:e(rl)},null,8,jp),s("h1",qp,i(e(g)("global.app.title")),1)])]),_:1}),t(Ae,{"no-gutters":"",class:"auth-wrapper"},{default:a(()=>[t(R,{cols:"12",md:"8",class:"auth-image-background d-none d-md-flex align-center justify-center position-relative"},{default:a(()=>[x.value?r("",!0):(l(),b("div",Hp,[t(ht,{class:"img-with-direction",src:"img/desktop/background.svg"})])),x.value?(l(),b("div",Yp,[t(ht,{class:"img-with-direction",src:"img/desktop/background-dark.svg"})])):r("",!0),s("div",Wp,[x.value?x.value?(l(),p(ht,{key:1,class:"img-with-direction","max-width":"600px",src:"img/desktop/people4-dark.svg"})):r("",!0):(l(),p(ht,{key:0,class:"img-with-direction","max-width":"600px",src:"img/desktop/people4.svg"}))])]),_:1}),t(R,{cols:"12",md:"4",class:"auth-card d-flex flex-column"},{default:a(()=>[s("div",Kp,[t(Ee,{variant:"flat",class:"w-100 mt-0 px-4 pt-12","max-width":"500"},{default:a(()=>[t(ve,null,{default:a(()=>[s("h4",Gp,i(e(g)("Reset Password")),1),s("p",Jp,i(e(g)("Please re-enter your email address, and then enter a new password.")),1)]),_:1}),t(ve,{class:"pb-0 mb-6"},{default:a(()=>[t(zt,null,{default:a(()=>[t(Ae,null,{default:a(()=>[t(R,{cols:"12"},{default:a(()=>[t(e(dt),{type:"email",autocomplete:"email",autofocus:!0,disabled:w.value,label:e(g)("E-mail"),placeholder:e(g)("Your email address"),modelValue:u.value,"onUpdate:modelValue":I[0]||(I[0]=U=>u.value=U),onKeyup:I[1]||(I[1]=Wt(U=>y.value?.focus(),["enter"]))},null,8,["disabled","label","placeholder","modelValue"])]),_:1}),t(R,{cols:"12"},{default:a(()=>[t(e(dt),{autocomplete:"new-password",ref_key:"passwordInput",ref:y,type:"password",disabled:w.value,label:e(g)("Password"),placeholder:e(g)("Your password"),modelValue:C.value,"onUpdate:modelValue":I[2]||(I[2]=U=>C.value=U),onKeyup:I[3]||(I[3]=Wt(U=>k.value?.focus(),["enter"]))},null,8,["disabled","label","placeholder","modelValue"])]),_:1}),t(R,{cols:"12"},{default:a(()=>[t(e(dt),{ref_key:"confirmPasswordInput",ref:k,type:"password",disabled:w.value,label:e(g)("Confirm Password"),placeholder:e(g)("Re-enter the password"),modelValue:F.value,"onUpdate:modelValue":I[4]||(I[4]=U=>F.value=U),onKeyup:Wt(A,["enter"])},null,8,["disabled","label","placeholder","modelValue"])]),_:1}),t(R,{cols:"12"},{default:a(()=>[t(H,{block:"",disabled:!u.value||!C.value||!F.value||w.value,onClick:A},{default:a(()=>[j(i(e(g)("Update Password"))+" ",1),w.value?(l(),p(je,{key:0,indeterminate:"",size:"22",class:"ms-2"})):r("",!0)]),_:1},8,["disabled"])]),_:1}),t(R,{cols:"12"},{default:a(()=>[t(z,{class:be(["d-flex align-center justify-center",{disabled:w.value}]),to:"/login"},{default:a(()=>[t(se,{class:"icon-with-direction",icon:e(to)},null,8,["icon"]),s("span",null,i(e(g)("Back to login page")),1)]),_:1},8,["class"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),t(pt),s("div",Zp,[t(Ee,{variant:"flat",class:"w-100 px-4 pb-4","max-width":"500"},{default:a(()=>[t(ve,{class:"pt-0"},{default:a(()=>[t(Ae,null,{default:a(()=>[t(R,{cols:"12",class:"text-center"},{default:a(()=>[t(M,{disabled:w.value},null,8,["disabled"])]),_:1}),t(R,{cols:"12",class:"d-flex align-center pt-0"},{default:a(()=>[t(Ke)]),_:1}),t(R,{cols:"12",class:"text-center text-sm"},{default:a(()=>[I[5]||(I[5]=s("span",null,"Powered by ",-1)),I[6]||(I[6]=s("a",{href:"https://github.com/mayswind/ezbookkeeping",target:"_blank"},"ezBookkeeping",-1)),I[7]||(I[7]=j(" ",-1)),s("span",null,i(v))]),_:1})]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1}),t(pa,{ref_key:"confirmDialog",ref:h},null,512),t(mt,{ref_key:"snackbar",ref:d,"onUpdate:show":N},null,512)])}}}),Xp={class:"layout-wrapper"},ev={class:"auth-logo d-flex align-start gap-x-3"},tv=["src"],av={class:"font-weight-medium leading-normal text-2xl"},lv={key:0,class:"d-flex auth-img-footer"},nv={key:1,class:"d-flex auth-img-footer"},ov={class:"d-flex align-center justify-center w-100 pt-10"},sv={class:"d-flex align-center justify-center h-100"},iv={class:"text-h4 mb-2"},rv={key:0,class:"mb-0"},uv={key:1,class:"mb-0"},dv={key:2,class:"mb-0"},cv={key:3,class:"mb-0"},mv={key:4,class:"mb-0"},pv={class:"d-flex align-center justify-center"},vv=Pe({__name:"OAuth2CallbackPage",props:{token:{},provider:{},platform:{},userName:{},errorCode:{},errorMessage:{}},setup(f){const T=f,n=Oa(),o=Ot(),{tt:g,te:c,getLocalizedOAuth2ProviderName:v,getLocalizedOAuth2LoginText:y}=Oe(),k=qa(),{version:h,password:d,loggingInByOAuth2:u,doAfterLogin:C}=Ws("desktop"),F=xe("snackbar"),w=L(""),m=L(!1),x=B(()=>o.global.name.value===wt.Dark),S=B(()=>v(T.provider??"",To())),N=B(()=>y(T.provider??"",To())),A=B(()=>{if(T.errorCode&&T.errorMessage)return fu(parseInt(T.errorCode),T.errorMessage)}),$=B(()=>d.value?null:"Password cannot be blank");function I(){T.platform==="desktop"?os("desktop"):T.platform==="mobile"?os("mobile"):n.replace("/")}function z(){const M=$.value;if(M){F.value?.showMessage(M);return}u.value=!0,k.authorizeOAuth2({password:d.value,passcode:w.value,callbackToken:T.token||""}).then(U=>{u.value=!1,C(U),I()}).catch(U=>{if(u.value=!1,Zl()&&U.error&&U.error.errorCode===Il.UserEmailNotVerified&&U.error.context&&U.error.context.email){n.push(`/verify_email?email=${encodeURIComponent(U.error.context.email)}&emailSent=${U.error.context.hasValidEmailVerifyToken||!1}`);return}else if(U.error&&U.error.errorCode===Il.TwoFactorAuthorizationPasscodeEmpty){m.value=!0;return}U.processed||F.value?.showError(U)})}return!A.value&&T.platform&&T.token&&!T.userName&&(u.value=!0,k.authorizeOAuth2({callbackToken:T.token}).then(M=>{u.value=!1,C(M),I()}).catch(M=>{if(u.value=!1,Zl()&&M.error&&M.error.errorCode===Il.UserEmailNotVerified&&M.error.context&&M.error.context.email){n.push(`/verify_email?email=${encodeURIComponent(M.error.context.email)}&emailSent=${M.error.context.hasValidEmailVerifyToken||!1}`);return}M.processed||F.value?.showError(M)})),(M,U)=>{const X=Ie("router-link"),Z=Ie("language-select-button");return l(),b("div",Xp,[t(X,{to:"/"},{default:a(()=>[s("div",ev,[s("img",{alt:"logo",class:"login-page-logo",src:e(rl)},null,8,tv),s("h1",av,i(e(g)("global.app.title")),1)])]),_:1}),t(Ae,{"no-gutters":"",class:"auth-wrapper"},{default:a(()=>[t(R,{cols:"12",md:"8",class:"auth-image-background d-none d-md-flex align-center justify-center position-relative"},{default:a(()=>[x.value?r("",!0):(l(),b("div",lv,[t(ht,{class:"img-with-direction",src:"img/desktop/background.svg"})])),x.value?(l(),b("div",nv,[t(ht,{class:"img-with-direction",src:"img/desktop/background-dark.svg"})])):r("",!0),s("div",ov,[x.value?x.value?(l(),p(ht,{key:1,class:"img-with-direction","max-width":"300px",src:"img/desktop/people2-dark.svg"})):r("",!0):(l(),p(ht,{key:0,class:"img-with-direction","max-width":"300px",src:"img/desktop/people2.svg"}))])]),_:1}),t(R,{cols:"12",md:"4",class:"auth-card d-flex flex-column"},{default:a(()=>[s("div",sv,[t(Ee,{variant:"flat",class:"w-100 mt-0 px-4 pt-12","max-width":"500"},{default:a(()=>[t(ve,null,{default:a(()=>[s("h4",iv,i(N.value),1),!A.value&&!f.errorMessage&&f.platform&&f.token&&!f.userName?(l(),b("p",rv,i(e(g)("Logging in...")),1)):!A.value&&!f.errorMessage&&f.userName?(l(),b("p",uv,i(e(g)("format.misc.oauth2bindTip",{providerName:S.value,userName:f.userName})),1)):A.value?(l(),b("p",dv,i(e(c)({error:A.value})),1)):f.errorMessage?(l(),b("p",cv,i(f.errorMessage),1)):(l(),b("p",mv,i(e(g)("An error occurred")),1))]),_:1}),!A.value&&f.userName?(l(),p(ve,{key:0,class:"pb-0 mb-6"},{default:a(()=>[t(zt,null,{default:a(()=>[t(Ae,null,{default:a(()=>[t(R,{cols:"12"},{default:a(()=>[t(dt,{type:"password",autocomplete:"password",autofocus:!0,disabled:m.value||e(u),label:e(g)("Password"),placeholder:e(g)("Your password"),modelValue:e(d),"onUpdate:modelValue":U[0]||(U[0]=q=>vt(d)?d.value=q:null),onKeyup:Wt(z,["enter"])},null,8,["disabled","label","placeholder","modelValue"])]),_:1}),Pa(t(R,{cols:"12"},{default:a(()=>[t(dt,{type:"number",autocomplete:"one-time-code",ref:"passcodeInput",disabled:e(u),label:e(g)("Passcode"),placeholder:e(g)("Passcode"),modelValue:w.value,"onUpdate:modelValue":U[1]||(U[1]=q=>w.value=q),onKeyup:Wt(z,["enter"])},null,8,["disabled","label","placeholder","modelValue"])]),_:1},512),[[Ba,m.value]]),t(R,{cols:"12"},{default:a(()=>[t(H,{block:"",type:"submit",disabled:!e(d)||e(u),onClick:z},{default:a(()=>[j(i(e(g)("Continue"))+" ",1),e(u)?(l(),p(je,{key:0,indeterminate:"",size:"22",class:"ms-2"})):r("",!0)]),_:1},8,["disabled"])]),_:1}),t(R,{cols:"12"},{default:a(()=>[t(X,{class:be(["d-flex align-center justify-center",{disabled:e(u)}]),to:"/login"},{default:a(()=>[t(se,{class:"icon-with-direction",icon:e(to)},null,8,["icon"]),s("span",null,i(e(g)("Back to login page")),1)]),_:1},8,["class"])]),_:1})]),_:1})]),_:1})]),_:1})):r("",!0)]),_:1})]),t(pt),s("div",pv,[t(Ee,{variant:"flat",class:"w-100 px-4 pb-4","max-width":"500"},{default:a(()=>[t(ve,{class:"pt-0"},{default:a(()=>[t(Ae,null,{default:a(()=>[t(R,{cols:"12",class:"text-center"},{default:a(()=>[t(Z,{disabled:e(u)},null,8,["disabled"])]),_:1}),t(R,{cols:"12",class:"d-flex align-center pt-0"},{default:a(()=>[t(Ke)]),_:1}),t(R,{cols:"12",class:"text-center text-sm"},{default:a(()=>[U[2]||(U[2]=s("span",null,"Powered by ",-1)),U[3]||(U[3]=s("a",{href:"https://github.com/mayswind/ezbookkeeping",target:"_blank"},"ezBookkeeping",-1)),U[4]||(U[4]=j(" ",-1)),s("span",null,i(e(h)),1)]),_:1})]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1}),t(mt,{ref_key:"snackbar",ref:F},null,512)])}}}),fv={class:"layout-wrapper"},yv={class:"auth-logo d-flex align-start gap-x-3"},gv=["src"],hv={class:"font-weight-medium leading-normal text-2xl"},bv={key:0,class:"d-flex auth-img-footer"},kv={key:1,class:"d-flex auth-img-footer"},_v={class:"d-flex align-center justify-center w-100 pt-10"},Tv={class:"d-flex align-center justify-center h-100"},xv={class:"text-h4 mb-2"},Cv={key:0,class:"mb-0"},wv={key:1,class:"mb-0"},Av={class:"me-1"},Iv={class:"d-flex align-center justify-center"},Sv=Pe({__name:"UnlockPage",setup(f){const T=Oa(),n=Ot(),{tt:o}=Oe(),{version:g,pinCode:c,isWebAuthnAvailable:v,isPinCodeValid:y,doAfterUnlocked:k,doRelogin:h}=yu(),d=Ha(),u=ra(),C=xe("confirmDialog"),F=xe("snackbar"),w=L(!1),m=B(()=>n.global.name.value===wt.Dark);function x(){const A=gu();if(!u.currentUserBasicInfo||!A){F.value?.showMessage("An error occurred");return}if(!d.appSettings.applicationLockWebAuthn||!hu()){F.value?.showMessage("WebAuthn is not enabled");return}if(!bu()){F.value?.showMessage("WebAuth is not supported on this device");return}w.value=!0,ku(u.currentUserBasicInfo,A).then(({id:$,userName:I,userSecret:z})=>{w.value=!1,_u($,I,z),k(),T.replace("/")}).catch($=>{w.value=!1,Xt.error("failed to use webauthn to verify",$),$.notSupported?F.value?.showMessage("WebAuth is not supported on this device"):$.name==="NotAllowedError"?F.value?.showMessage("User has canceled authentication"):$.invalid?F.value?.showMessage("Failed to authenticate with WebAuthn"):F.value?.showMessage("User has canceled or this device does not support WebAuthn")})}function S(A){if(!y(A))return;const $=u.currentUserBasicInfo;if(!$||!$.username){F.value?.showMessage("An error occurred");return}try{Tu($.username,A),k(),T.replace("/")}catch(I){Xt.error("failed to unlock with pin code",I),F.value?.showMessage("Incorrect PIN code")}}function N(){C.value?.open("Are you sure you want to re-login?").then(()=>{h(),T.replace("/login")})}return(A,$)=>{const I=Ie("router-link"),z=Ie("pin-code-input"),M=Ie("language-select-button");return l(),b("div",fv,[t(I,{to:"/"},{default:a(()=>[s("div",yv,[s("img",{alt:"logo",class:"login-page-logo",src:e(rl)},null,8,gv),s("h1",hv,i(e(o)("global.app.title")),1)])]),_:1}),t(Ae,{"no-gutters":"",class:"auth-wrapper"},{default:a(()=>[t(R,{cols:"12",md:"8",class:"auth-image-background d-none d-md-flex align-center justify-center position-relative"},{default:a(()=>[m.value?r("",!0):(l(),b("div",bv,[t(ht,{class:"img-with-direction",src:"img/desktop/background.svg"})])),m.value?(l(),b("div",kv,[t(ht,{class:"img-with-direction",src:"img/desktop/background-dark.svg"})])):r("",!0),s("div",_v,[m.value?m.value?(l(),p(ht,{key:1,class:"img-with-direction","max-width":"600px",src:"img/desktop/people3-dark.svg"})):r("",!0):(l(),p(ht,{key:0,class:"img-with-direction","max-width":"600px",src:"img/desktop/people3.svg"}))])]),_:1}),t(R,{cols:"12",md:"4",class:"auth-card d-flex flex-column"},{default:a(()=>[s("div",Tv,[t(Ee,{variant:"flat",class:"w-100 mt-0 px-4 pt-12","max-width":"500"},{default:a(()=>[t(ve,null,{default:a(()=>[s("h4",xv,i(e(o)("Unlock Application")),1),e(v)?(l(),b("p",Cv,i(e(o)("Please enter your PIN code or use WebAuthn to unlock application")),1)):e(v)?r("",!0):(l(),b("p",wv,i(e(o)("Please enter your PIN code to unlock application")),1))]),_:1}),t(ve,{class:"pb-0 mb-6"},{default:a(()=>[t(zt,null,{default:a(()=>[t(Ae,null,{default:a(()=>[t(R,{cols:"12"},{default:a(()=>[t(z,{disabled:w.value,autofocus:!0,secure:!0,length:6,"auto-confirm":!0,modelValue:e(c),"onUpdate:modelValue":$[0]||($[0]=U=>vt(c)?c.value=U:null),"onPincode:confirm":S},null,8,["disabled","modelValue"])]),_:1}),t(R,{cols:"12"},{default:a(()=>[t(H,{block:"",disabled:!e(y)(e(c))||w.value,onClick:$[1]||($[1]=U=>S(e(c)))},{default:a(()=>[j(i(e(o)("Unlock with PIN Code")),1)]),_:1},8,["disabled"])]),_:1}),e(v)?(l(),p(R,{key:0,cols:"12"},{default:a(()=>[t(H,{block:"",variant:"tonal",disabled:w.value,onClick:x},{default:a(()=>[j(i(e(o)("Unlock with WebAuthn"))+" ",1),w.value?(l(),p(je,{key:0,indeterminate:"",size:"22",class:"ms-2"})):r("",!0)]),_:1},8,["disabled"])]),_:1})):r("",!0),t(R,{cols:"12",class:"text-center"},{default:a(()=>[s("span",Av,i(e(o)("Can't Unlock?")),1),s("a",{class:"text-primary",href:"javascript:void(0);",onClick:N},i(e(o)("Re-login")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),t(pt),s("div",Iv,[t(Ee,{variant:"flat",class:"w-100 px-4 pb-4","max-width":"500"},{default:a(()=>[t(ve,{class:"pt-0"},{default:a(()=>[t(Ae,null,{default:a(()=>[t(R,{cols:"12",class:"text-center"},{default:a(()=>[t(M,{disabled:w.value},null,8,["disabled"])]),_:1}),t(R,{cols:"12",class:"d-flex align-center pt-0"},{default:a(()=>[t(Ke)]),_:1}),t(R,{cols:"12",class:"text-center text-sm"},{default:a(()=>[$[2]||($[2]=s("span",null,"Powered by ",-1)),$[3]||($[3]=s("a",{href:"https://github.com/mayswind/ezbookkeeping",target:"_blank"},"ezBookkeeping",-1)),$[4]||($[4]=j(" ",-1)),s("span",null,i(e(g)),1)]),_:1})]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1}),t(pa,{ref_key:"confirmDialog",ref:C},null,512),t(mt,{ref_key:"snackbar",ref:F},null,512)])}}}),Vv={class:"font-weight-bold ms-3"},$v={key:0,class:"font-weight-semibold text-truncate text-h4 text-income me-2 mb-2"},Dv={key:2,class:"text-truncate text-h5 text-expense"},Fv={key:4,class:"text-truncate text-h5 mt-2 mb-7",style:{"padding-bottom":"2px"}},Nv={class:"text-caption"},zn=Pe({__name:"IncomeExpenseOverviewCard",props:{loading:{type:Boolean},disabled:{type:Boolean},icon:{},title:{},expenseAmount:{},incomeAmount:{},datetime:{}},setup(f){const{tt:T}=Oe();return(n,o)=>(l(),p(Ee,{class:be({disabled:f.disabled})},{default:a(()=>[t(ve,{class:"d-flex align-center"},{default:a(()=>[t(Za,{color:"grey",size:"38"},{default:a(()=>[t(se,{size:"24",icon:f.icon},null,8,["icon"])]),_:1}),s("span",Vv,i(f.title),1),t(pt),t(H,{density:"comfortable",color:"default",variant:"text",class:"ms-2",icon:!0},{default:a(()=>[t(se,{icon:e(Jt)},null,8,["icon"]),t(nt,{activator:"parent"},{default:a(()=>[t(ze,null,{default:a(()=>[Gl(n.$slots,"menus")]),_:3})]),_:3})]),_:3})]),_:3}),t(ve,{class:"mt-1 pb-1"},{default:a(()=>[!f.loading||f.incomeAmount?(l(),b("div",$v,i(f.incomeAmount),1)):f.loading&&!f.incomeAmount?(l(),p(ut,{key:1,class:"skeleton-no-margin mt-4 mb-8",type:"text",width:"120px",loading:!0})):r("",!0),!f.loading||f.expenseAmount?(l(),b("div",Dv,i(f.expenseAmount),1)):f.loading&&!f.expenseAmount?(l(),p(ut,{key:3,class:"skeleton-no-margin mb-1",style:{"padding-bottom":"2px"},type:"text",width:"120px",loading:!0})):r("",!0),!f.loading&&!f.incomeAmount&&!f.expenseAmount?(l(),b("div",Fv,i(e(T)("No data")),1)):r("",!0)]),_:1}),t(ve,{class:"mt-6"},{default:a(()=>[s("span",Nv,i(f.datetime),1)]),_:1})]),_:3},8,["class"]))}}),Mv={class:"overview-monthly-chart-skeleton-container h-100",style:{"margin-top":"-30px"}},Ev={class:"d-flex flex-column align-center justify-center w-100 h-100"},Uv={style:{"margin-top":"-40px"}},Pv=Pe({__name:"MonthlyIncomeAndExpenseCard",props:{loading:{type:Boolean},data:{},disabled:{type:Boolean},isDarkMode:{type:Boolean},enableClickItem:{type:Boolean}},emits:["click"],setup(f,{emit:T}){const n=f,o=T,{tt:g,getCurrentLanguageTextDirection:c,formatUnixTimeToGregorianLikeShortMonth:v,formatAmountToLocalizedNumeralsWithCurrency:y}=Oe(),k=Ha(),h=ra(),d=B(()=>c()),u=B(()=>k.appSettings.showAmountInHomePage),C=B(()=>h.currentUserDefaultCurrency),F=B(()=>{if(!n.data||!n.data.length||n.data.length<1)return!1;for(const $ of n.data)if($.incomeAmount>0||$.incomeAmount<0||$.expenseAmount>0||$.expenseAmount<0)return!0;return!1}),w=B(()=>{const $=[],I=[],z=[];let M=0,U=0;const X=jo(h.currentUserExpenseAmountColor,h.currentUserIncomeAmountColor,n.isDarkMode);if(n.data)for(const q of n.data){const O=v(q.monthStartTime);$.push(O),I.push(q.incomeAmount),z.push(-q.expenseAmount),q.incomeAmount>U&&(U=q.incomeAmount),-q.expenseAmount>U&&(U=-q.expenseAmount),q.incomeAmount<M&&(M=q.incomeAmount),-q.expenseAmount<M&&(M=-q.expenseAmount)}const Z=U-M;return{tooltip:{trigger:"axis",axisPointer:{type:"shadow",shadowStyle:{color:n.isDarkMode?"rgba(210, 210, 210, 0.05)":"rgba(120, 120, 120, 0.05)"}},backgroundColor:n.isDarkMode?"#333":"#fff",borderColor:n.isDarkMode?"#333":"#fff",textStyle:{color:n.isDarkMode?"#eee":"#333"},formatter:q=>{let O=null,V=null;for(const _ of q){const D=_.dataIndex,P=n.data[D];_.seriesId==="seriesIncome"?O=S(P):_.seriesId==="seriesExpense"&&(V=N(P))}return`<table><thead><tr><td colspan="2" class="text-start">${q[0]?.name}</td></tr></thead><tbody>`+(O!==null?`<tr><td><span class="overview-monthly-chart-tooltip-indicator bg-income me-1"></span><span class="me-4">${g("Income")}</span></td><td><strong>${O}</strong></td></tr>`:"")+(V!==null?`<tr><td><span class="overview-monthly-chart-tooltip-indicator bg-expense me-1"></span><span class="me-4">${g("Expense")}</span></td><td><strong>${V}</strong></td></tr>`:"")+"</tbody></table>"}},legend:{bottom:20,itemWidth:14,itemHeight:14,textStyle:{color:n.isDarkMode?"#eee":"#333"},icon:"circle",data:[g("Income"),g("Expense")]},grid:{left:"20px",right:"20px",top:"10px",bottom:"100px"},xAxis:[{type:"category",data:$,inverse:d.value===un.RTL,axisLine:{show:!1},axisTick:{show:!1},axisLabel:{padding:[20,0,0,0]}}],yAxis:[{type:"value",min:M-Z/20,max:U,splitNumber:10,axisLabel:{show:!1},splitLine:{show:!1}},{type:"value",min:M,max:U+Z/20,splitNumber:10,axisLabel:{show:!1},splitLine:{show:!1}}],series:[{type:"bar",id:"seriesIncome",name:g("Income"),yAxisIndex:0,stack:"Total",itemStyle:{color:X.incomeAmountColor,borderRadius:16},emphasis:{focus:"series",labelLine:{show:!1}},barMaxWidth:16,data:I},{type:"bar",id:"seriesExpense",name:g("Expense"),yAxisIndex:1,stack:"Total",itemStyle:{color:X.expenseAmountColor,borderRadius:16},emphasis:{focus:"series",labelLine:{show:!1}},barMaxWidth:16,data:z}]}});function m($,I){return y($,I)}function x($,I){return u.value?m($,C.value)+(I?Cu:""):m(xu,C.value)}function S($){return x($.incomeAmount,$.incompleteIncomeAmount)}function N($){return x($.expenseAmount,$.incompleteExpenseAmount)}function A($){if(!n.enableClickItem||!n.data||$.componentType!=="series")return;const I=n.data[$.dataIndex];I&&$.seriesId==="seriesIncome"?o("click",{transactionType:ye.Income,monthStartTime:I.monthStartTime}):I&&$.seriesId==="seriesExpense"&&o("click",{transactionType:ye.Expense,monthStartTime:I.monthStartTime})}return($,I)=>{const z=Ie("v-chart");return l(),p(Ee,{class:be({disabled:f.disabled})},{title:a(()=>[s("span",null,i(e(g)("Income and Expense Trends")),1)]),default:a(()=>[f.loading&&!F.value?(l(),p(ve,{key:0,class:"overview-monthly-chart-container overview-monthly-chart-overlay"},{default:a(()=>[s("div",Mv,[(l(),b(ue,null,$e([1,2,3,4,5,6,7,8,9,10,11,12],M=>s("div",{class:"d-flex w-100 h-100 align-center justify-center",key:M},[t(ut,{width:"16",height:"200",loading:!0})])),64))])]),_:1})):!f.loading&&!F.value?(l(),p(ve,{key:1,class:"overview-monthly-chart-container overview-monthly-chart-overlay"},{default:a(()=>[s("div",Ev,[s("h2",Uv,i(e(g)("No data")),1)])]),_:1})):r("",!0),t(z,{autoresize:"",class:be(["overview-monthly-chart-container",{readonly:!F.value}]),option:w.value,onClick:A},null,8,["class","option"])]),_:1},8,["class"])}}}),Bv={class:"d-flex align-center"},Lv={class:"d-flex align-baseline"},Rv={class:"text-2xl font-weight-bold"},zv={style:{"font-size":"1rem"}},Ov={class:"text-2xl font-weight-medium text-primary"},jv={key:0},qv={class:"mt-1 mb-3"},Hv={class:"me-2"},Yv={key:0},Wv={class:"mb-8"},Kv={key:0,class:"text-body-1"},Gv={class:"d-flex align-center"},Jv={class:"me-3"},Zv={class:"d-flex flex-column"},Qv={class:"text-caption"},Xv={key:0,class:"text-h5"},ef={class:"d-flex align-center"},tf={class:"me-3"},af={class:"d-flex flex-column"},lf={class:"text-caption"},nf={key:0,class:"text-h5"},of={class:"d-flex align-center"},sf={class:"me-3"},rf={class:"d-flex flex-column"},uf={class:"text-caption"},df={key:0,class:"text-h5"},cf=Pe({__name:"HomePage",setup(f){const T=Oa(),n=Ot(),{tt:o,getCurrentNumeralSystemType:g}=Oe(),{showAmountInHomePage:c,allAccounts:v,netAssets:y,totalAssets:k,totalLiabilities:h,displayDateRange:d,transactionOverview:u,getDisplayIncomeAmount:C,getDisplayExpenseAmount:F}=wu(),w=_a(),m=Ta(),x=Gs(),S=xe("snackbar"),N=L(!0),A=B(()=>n.global.name.value===wt.Dark),$=B(()=>g()),I=B(()=>v.value?$.value.formatNumber(v.value.length):$.value.digitZero);function z(X){const Z=X.monthStartTime,q=Au(Iu(Z,1,"months"),1,"seconds"),O=X.transactionType;T.push(`/transaction/list?${x.getTransactionListPageParams({type:O,dateType:Rt.Custom.type,minTime:Z,maxTime:q})}`)}const M=B(()=>{const X=[];return!u.value||!u.value.thisMonth||!u.value.thisMonth.valid||Su.forEach(Z=>{if(!Object.prototype.hasOwnProperty.call(u.value,Z))return;const q=x.transactionDataRange[Z];if(!q)return;const O=u.value[Z];X.push({monthStartTime:q.startTime,incomeAmount:O?.incomeAmount||0,expenseAmount:O?.expenseAmount||0,incompleteIncomeAmount:O?O.incompleteIncomeAmount:!0,incompleteExpenseAmount:O?O.incompleteExpenseAmount:!0})}),X});function U(X){N.value=!0;const Z=[w.loadAllAccounts({force:!1}),m.loadAllCategories({force:!1}),x.loadTransactionOverview({force:X,loadLast11Months:!0})];Promise.all(Z).then(()=>{N.value=!1,X&&S.value?.showMessage("Data has been updated")}).catch(q=>{N.value=!1,q.processed||S.value?.showError(q)})}return vl()&&In()&&U(!1),(X,Z)=>(l(),b(ue,null,[t(Ae,{class:"match-height"},{default:a(()=>[t(R,{cols:"12",lg:"4",md:"12"},{default:a(()=>[t(Ee,{class:be({disabled:N.value})},{title:a(()=>[s("div",Bv,[s("div",Lv,[s("span",Rv,i(e(d)?.thisMonth?.displayTime),1),Z[2]||(Z[2]=s("span",null,"·",-1)),s("span",zv,i(e(o)("Expense")),1)]),t(H,{density:"compact",color:"default",variant:"text",size:"24",class:"ms-2",icon:!0,loading:N.value,onClick:Z[0]||(Z[0]=q=>U(!0))},{loader:a(()=>[t(je,{indeterminate:"",size:"20"})]),default:a(()=>[t(se,{icon:e(wa),size:"24"},null,8,["icon"]),t(yt,{activator:"parent"},{default:a(()=>[j(i(e(o)("Refresh")),1)]),_:1})]),_:1},8,["loading"])])]),default:a(()=>[t(ve,null,{default:a(()=>[s("h4",Ov,[!N.value||e(u)&&e(u).thisMonth&&e(u).thisMonth.valid?(l(),b("span",jv,i(e(u)&&e(u).thisMonth?e(F)(e(u).thisMonth):"-"),1)):N.value&&(!e(u)||!e(u).thisMonth||!e(u).thisMonth.valid)?(l(),p(ut,{key:1,class:"d-inline-block skeleton-no-margin mt-3 pb-1",width:"120px",type:"text",loading:!0})):r("",!0),t(H,{class:"ms-1",density:"compact",color:"default",variant:"text",icon:!0,onClick:Z[1]||(Z[1]=q=>c.value=!e(c))},{default:a(()=>[t(se,{icon:e(c)?e(Gt):e(ca),size:"20"},null,8,["icon"])]),_:1})]),s("div",qv,[s("span",Hv,i(e(o)("Monthly income")),1),!N.value||e(u)&&e(u).thisMonth&&e(u).thisMonth.valid?(l(),b("span",Yv,i(e(u)&&e(u).thisMonth?e(C)(e(u).thisMonth):"-"),1)):N.value&&(!e(u)||!e(u).thisMonth||!e(u).thisMonth.valid)?(l(),p(ut,{key:1,class:"d-inline-block skeleton-no-margin mt-2",width:"120px",type:"text",loading:!0})):r("",!0)]),t(H,{size:"small",to:`/transaction/list?${e(x).getTransactionListPageParams({dateType:e(Rt).ThisMonth.type})}`},{default:a(()=>[j(i(e(o)("View Details")),1)]),_:1},8,["to"]),t(ht,{class:"overview-card-background img-with-direction",src:"img/desktop/card-background.png"}),t(ht,{class:"overview-card-background-image img-with-direction",width:"116px",src:"img/desktop/document.svg"})]),_:1})]),_:1},8,["class"])]),_:1}),t(R,{cols:"12",lg:"8",md:"12"},{default:a(()=>[t(Ee,{class:be({disabled:N.value})},{title:a(()=>[s("span",null,i(e(o)("Asset Summary")),1)]),default:a(()=>[t(ve,null,{default:a(()=>[s("div",Wv,[!N.value||e(v)&&e(v).length?(l(),b("span",Kv,i(e(o)("format.misc.youHaveAccounts",{count:I.value})),1)):N.value&&(!e(v)||!e(v).length)?(l(),p(ut,{key:1,class:"skeleton-no-margin mt-1 mb-2 pb-1",width:"200px",type:"text",loading:!0})):r("",!0)]),t(Ae,null,{default:a(()=>[t(R,{cols:"12",md:"4"},{default:a(()=>[s("div",Gv,[s("div",Jv,[t(Za,{rounded:"",color:"grey",size:"42",class:"elevation-1"},{default:a(()=>[t(se,{size:"24",icon:e(Wi)},null,8,["icon"])]),_:1})]),s("div",Zv,[s("span",Qv,i(e(o)("Total assets")),1),!N.value||e(v)&&e(v).length?(l(),b("span",Xv,i(e(k)),1)):N.value&&(!e(v)||!e(v).length)?(l(),p(ut,{key:1,class:"skeleton-no-margin mt-3 mb-2",width:"120px",type:"text",loading:!0})):r("",!0)])])]),_:1}),t(R,{cols:"12",md:"4"},{default:a(()=>[s("div",ef,[s("div",tf,[t(Za,{rounded:"",color:"expense",size:"42",class:"elevation-1"},{default:a(()=>[t(se,{size:"24",icon:e(Do)},null,8,["icon"])]),_:1})]),s("div",af,[s("span",lf,i(e(o)("Total liabilities")),1),!N.value||e(v)&&e(v).length?(l(),b("span",nf,i(e(h)),1)):N.value&&(!e(v)||!e(v).length)?(l(),p(ut,{key:1,class:"skeleton-no-margin mt-3 mb-2",width:"120px",type:"text",loading:!0})):r("",!0)])])]),_:1}),t(R,{cols:"12",md:"4"},{default:a(()=>[s("div",of,[s("div",sf,[t(Za,{rounded:"",color:"primary",size:"42",class:"elevation-1"},{default:a(()=>[t(se,{size:"24",icon:e(Ki)},null,8,["icon"])]),_:1})]),s("div",rf,[s("span",uf,i(e(o)("Net assets")),1),!N.value||e(v)&&e(v).length?(l(),b("span",df,i(e(y)),1)):N.value&&(!e(v)||!e(v).length)?(l(),p(ut,{key:1,class:"skeleton-no-margin mt-3 mb-2",width:"120px",type:"text",loading:!0})):r("",!0)])])]),_:1})]),_:1})]),_:1})]),_:1},8,["class"])]),_:1}),t(R,{cols:"12",md:"6"},{default:a(()=>[t(Ae,null,{default:a(()=>[t(R,{cols:"12",md:"6"},{default:a(()=>[t(zn,{loading:N.value,disabled:N.value,icon:e(Ms),title:e(o)("Today"),"expense-amount":e(u).today&&e(u).today.valid?e(F)(e(u).today):"","income-amount":e(u).today&&e(u).today.valid?e(C)(e(u).today):"",datetime:e(d)?.today?.displayTime||""},{menus:a(()=>[t(le,{"prepend-icon":e(hl),to:`/transaction/list?${e(x).getTransactionListPageParams({dateType:e(Rt).Today.type})}`},{default:a(()=>[t(ot,null,{default:a(()=>[j(i(e(o)("View Details")),1)]),_:1})]),_:1},8,["prepend-icon","to"])]),_:1},8,["loading","disabled","icon","title","expense-amount","income-amount","datetime"])]),_:1}),t(R,{cols:"12",md:"6"},{default:a(()=>[t(zn,{loading:N.value,disabled:N.value,icon:e(Gi),title:e(o)("This Week"),"expense-amount":e(u).thisWeek&&e(u).thisWeek.valid?e(F)(e(u).thisWeek):"","income-amount":e(u).thisWeek&&e(u).thisWeek.valid?e(C)(e(u).thisWeek):"",datetime:e(d)?.thisWeek?.startTime+"-"+e(d)?.thisWeek?.endTime},{menus:a(()=>[t(le,{"prepend-icon":e(hl),to:`/transaction/list?${e(x).getTransactionListPageParams({dateType:e(Rt).ThisWeek.type})}`},{default:a(()=>[t(ot,null,{default:a(()=>[j(i(e(o)("View Details")),1)]),_:1})]),_:1},8,["prepend-icon","to"])]),_:1},8,["loading","disabled","icon","title","expense-amount","income-amount","datetime"])]),_:1}),t(R,{cols:"12",md:"6"},{default:a(()=>[t(zn,{loading:N.value,disabled:N.value,icon:e(Es),title:e(o)("This Month"),"expense-amount":e(u).thisMonth&&e(u).thisMonth.valid?e(F)(e(u).thisMonth):"","income-amount":e(u).thisMonth&&e(u).thisMonth.valid?e(C)(e(u).thisMonth):"",datetime:e(d)?.thisMonth?.startTime+"-"+e(d)?.thisMonth?.endTime},{menus:a(()=>[t(le,{"prepend-icon":e(hl),to:`/transaction/list?${e(x).getTransactionListPageParams({dateType:e(Rt).ThisMonth.type})}`},{default:a(()=>[t(ot,null,{default:a(()=>[j(i(e(o)("View Details")),1)]),_:1})]),_:1},8,["prepend-icon","to"])]),_:1},8,["loading","disabled","icon","title","expense-amount","income-amount","datetime"])]),_:1}),t(R,{cols:"12",md:"6"},{default:a(()=>[t(zn,{loading:N.value,disabled:N.value,icon:e(qn),title:e(o)("This Year"),"expense-amount":e(u).thisYear&&e(u).thisYear.valid?e(F)(e(u).thisYear):"","income-amount":e(u).thisYear&&e(u).thisYear.valid?e(C)(e(u).thisYear):"",datetime:e(d)?.thisYear?.displayTime||""},{menus:a(()=>[t(le,{"prepend-icon":e(hl),to:`/transaction/list?${e(x).getTransactionListPageParams({dateType:e(Rt).ThisYear.type})}`},{default:a(()=>[t(ot,null,{default:a(()=>[j(i(e(o)("View Details")),1)]),_:1})]),_:1},8,["prepend-icon","to"])]),_:1},8,["loading","disabled","icon","title","expense-amount","income-amount","datetime"])]),_:1})]),_:1})]),_:1}),t(R,{cols:"12",md:"6"},{default:a(()=>[t(Pv,{data:M.value,"is-dark-mode":A.value,loading:N.value,disabled:N.value,"enable-click-item":!0,onClick:z},null,8,["data","is-dark-mode","loading","disabled"])]),_:1})]),_:1}),t(mt,{ref_key:"snackbar",ref:S},null,512)],64))}}),lo=Pe({__name:"PaginationButtons",props:{density:{},disabled:{type:Boolean},totalPageCount:{},totalVisible:{},modelValue:{}},emits:["update:modelValue"],setup(f,{emit:T}){const n=f,o=T,{tt:g,getCurrentNumeralSystemType:c}=Oe(),v=L({}),y=B(()=>c());function k(u){return y.value.replaceWesternArabicDigitsToLocalizedDigits(u.toString())}const h=B(()=>{const u=[];for(let C=1;C<=n.totalPageCount;C++)u.push({value:C,name:k(C)});return u}),d=B({get:()=>n.modelValue,set:u=>{if(u&&u>=1&&u<=n.totalPageCount){o("update:modelValue",u);for(const C of ql(v.value))v.value[C]=!1}}});return(u,C)=>(l(),p(Us,{density:f.density,disabled:f.disabled,"total-visible":f.totalVisible??7,length:f.totalPageCount,modelValue:d.value,"onUpdate:modelValue":C[1]||(C[1]=F=>d.value=F)},{item:a(({key:F,page:w,isActive:m})=>[w!=="..."?(l(),p(H,{key:0,variant:"text",density:f.density,disabled:f.disabled,icon:!0,color:m?"primary":"default",onClick:x=>d.value=parseInt(w)},{default:a(()=>[s("span",null,i(k(w)),1)]),_:2},1032,["density","disabled","color","onClick"])):r("",!0),w==="..."?(l(),p(H,{key:1,variant:"text",color:"default",density:f.density,disabled:f.disabled,icon:!0},{default:a(()=>[s("span",null,i(w),1),t(nt,{activator:"parent",disabled:f.disabled,"close-on-content-click":!1,modelValue:v.value[F],"onUpdate:modelValue":x=>v.value[F]=x},{default:a(()=>[t(ze,null,{default:a(()=>[t(le,{class:"text-sm",density:f.density},{default:a(()=>[t(ot,{class:"cursor-pointer"},{default:a(()=>[t(sa,{width:"100","item-title":"name","item-value":"value","auto-select-first":"exact",density:f.density,items:h.value,"no-data-text":e(g)("No results"),modelValue:d.value,"onUpdate:modelValue":C[0]||(C[0]=x=>d.value=x)},null,8,["density","items","no-data-text","modelValue"])]),_:1})]),_:1},8,["density"])]),_:1})]),_:1},8,["disabled","modelValue","onUpdate:modelValue"])]),_:2},1032,["density","disabled"])):r("",!0)]),_:1},8,["density","disabled","total-visible","length","modelValue"]))}}),mf={class:"d-flex align-center justify-center"},pf={class:"d-flex w-100 align-center justify-center"},vf={class:"text-h4"},ff={class:"d-flex align-center"},yf={class:"mb-4"},gf={key:0,class:"text-truncate"},hf={key:0,class:"cursor-pointer"},bf={key:1,class:"cursor-pointer"},kf={class:"d-flex align-center"},_f={class:"d-flex align-center"},Tf={key:0,class:"text-subtitle-1"},xf={key:1,class:"text-subtitle-1"},Cf={class:"text-body-1"},wf={class:"d-flex align-center justify-center fill-height bg-light-primary"},Af={class:"d-flex align-center justify-center fill-height bg-light-primary"},If={class:"text-body-1"},Sf={class:"w-100 d-flex justify-center flex-wrap mt-2 mt-sm-4 mt-md-6 gap-4"},Vf=["accept"],Go=Pe({__name:"EditDialog",props:{type:{},persistent:{type:Boolean},show:{type:Boolean}},setup(f,{expose:T}){const n=f,{tt:o}=Oe(),{mode:g,isSupportGeoLocation:c,editId:v,addByTemplateId:y,duplicateFromId:k,clientSessionId:h,loading:d,submitting:u,uploadingPicture:C,geoLocationStatus:F,setGeoLocationByClickMap:w,transaction:m,defaultCurrency:x,defaultAccountId:S,coordinateDisplayType:N,allTimezones:A,allVisibleAccounts:$,allAccountsMap:I,allVisibleCategorizedAccounts:z,allCategories:M,allCategoriesMap:U,allTags:X,allTagsMap:Z,firstVisibleAccountId:q,hasAvailableExpenseCategories:O,hasAvailableIncomeCategories:V,hasAvailableTransferCategories:_,canAddTransactionPicture:D,title:P,saveButtonTitle:W,cancelButtonTitle:ne,sourceAmountName:de,sourceAmountTitle:J,sourceAccountTitle:Y,transferInAmountTitle:ie,sourceAccountName:fe,destinationAccountName:te,sourceAccountCurrency:K,destinationAccountCurrency:me,transactionDisplayTimezone:Ne,transactionTimezoneTimeDifference:et,geoLocationStatusInfo:Me,inputEmptyProblemMessage:Ve,inputIsEmpty:bt,createNewTransactionModel:Bt,swapTransactionData:at,getTransactionPictureUrl:Yt}=Vu(n.type),At=Ha(),Zt=ra(),Qe=_a(),pe=Ta(),ce=fl(),ke=Nl(),Be=qo(),ct=xe("map"),we=xe("confirmDialog"),st=xe("snackbar"),De=xe("pictureInput"),St=L(!1),_t=L("basicInfo"),We=L(!1),Le=L(!1),jt=L(!1),Ze=L(""),Te=L(""),Nt=L(void 0),xt=L(void 0),gt=L(void 0),xa=L(void 0);let Mt=null,Kt=null;const tl=B(()=>{if(m.value.type===ye.Expense)return"expense";if(m.value.type===ye.Income)return"income";if(m.value.type===ye.Transfer)return"primary"}),Ca=B(()=>{const Se=Ze.value.toLowerCase();let ge=0;for(const Q of X.value)if(!Se||Q.name.toLowerCase().indexOf(Se)>=0){if(!Q.hidden)return!1;ge++}return ge>0}),ul=B(()=>g.value===Ge.Add?ke.isTransactionDraftModified(m.value,Nt.value,xt.value,gt.value,xa.value,q.value):g.value===Ge.Edit);function ua(Se,ge,Q,re){$u(m.value,Se,M.value,U.value,$.value,I.value,Z.value,S.value,{time:ge.time,type:ge.type,categoryId:ge.categoryId,accountId:ge.accountId,destinationAccountId:ge.destinationAccountId,amount:ge.amount,destinationAmount:ge.destinationAmount,tagIds:ge.tagIds,comment:ge.comment},Q,re)}function Fa(Se){y.value=null,k.value=null,St.value=!0,_t.value="basicInfo",d.value=!0,u.value=!1,F.value=null,w.value=!1,We.value=!1,Le.value=Se.noTransactionDraft||!1,Nt.value=Se.amount,xt.value=Se.categoryId,gt.value=Se.accountId,xa.value=Se.tagIds;const ge=Bt(Se.type);ua(ge,Se,!0,!1);const Q=[Qe.loadAllAccounts({force:!1}),pe.loadAllCategories({force:!1}),ce.loadAllTags({force:!1})];if(n.type===It.Transaction)Se&&Se.id?(Se.currentTransaction&&ua(Se.currentTransaction,Se,!0,!0),g.value=Ge.View,v.value=Se.id,Q.push(ke.getTransaction({transactionId:v.value}))):(g.value=Ge.Add,v.value=null,Se.template?(ua(Se.template,Se,!1,!1),y.value=Se.template.id):!Se.noTransactionDraft&&(At.appSettings.autoSaveTransactionDraft==="enabled"||At.appSettings.autoSaveTransactionDraft==="confirmation")&&ke.transactionDraft&&ua(xo.ofDraft(ke.transactionDraft),Se,!1,!1),At.appSettings.autoGetCurrentGeoLocation&&!F.value&&!m.value.geoLocation&&Ka(!1));else if(n.type===It.Template){const re=cl.createNewTransactionTemplate(m.value);re.name="",Se&&Se.templateType&&(re.templateType=Se.templateType),re.templateType===ha.Schedule.type&&(re.scheduledFrequencyType=ml.Disabled.type,re.scheduledFrequency=""),m.value=re,Se&&Se.id?(Se.currentTemplate&&(ua(Se.currentTemplate,Se,!1,!1),m.value.fillFrom(Se.currentTemplate)),g.value=Ge.Edit,v.value=Se.id,m.value.id=Se.id,Q.push(Be.getTemplate({templateId:v.value}))):(g.value=Ge.Add,v.value=null,m.value.id="")}return Se.type&&Se.type>=ye.Income&&Se.type<=ye.Transfer&&(m.value.type=Se.type),g.value===Ge.Add&&(h.value=pl()),Promise.all(Q).then(function(re){if(v.value&&!re[3]){Kt&&(n.type===It.Transaction?Kt("Unable to retrieve transaction"):n.type===It.Template&&Kt("Unable to retrieve template"));return}if(n.type===It.Transaction&&Se&&Se.id&&re[3]&&re[3]instanceof xo){const Ue=re[3];ua(Ue,Se,!0,!0),We.value=Ue.editable}else if(n.type===It.Template&&Se&&Se.id&&re[3]&&re[3]instanceof cl){const Ue=re[3];ua(Ue,Se,!1,!1),m.value instanceof cl||(m.value=cl.createNewTransactionTemplate(m.value)),m.value.fillFrom(Ue)}else ua(null,Se,!0,!0);d.value=!1}).catch(re=>{Xt.error("failed to load essential data for editing transaction",re),d.value=!1,St.value=!1,re.processed||Kt&&Kt(re)}),new Promise((re,Ue)=>{Mt=re,Kt=Ue})}function ea(){const Se=Ve.value;if(Se){st.value?.showMessage(Se);return}if(n.type===It.Transaction&&(g.value===Ge.Add||g.value===Ge.Edit)){const ge=function(){u.value=!0,ke.saveTransaction({transaction:m.value,defaultCurrency:x.value,isEdit:g.value===Ge.Edit,clientSessionId:h.value}).then(()=>{u.value=!1,Mt&&(g.value===Ge.Add?Mt({message:"You have added a new transaction"}):g.value===Ge.Edit&&Mt({message:"You have saved this transaction"})),g.value===Ge.Add&&!Le.value&&!y.value&&!k.value&&ke.clearTransactionDraft(),St.value=!1}).catch(Q=>{u.value=!1,Q.error&&(Q.error.errorCode===Il.TransactionCannotCreateInThisTime||Q.error.errorCode===Il.TransactionCannotModifyInThisTime)?we.value?.open("You have set this time range to prevent editing transactions. Would you like to change the editable transaction range to All?").then(()=>{u.value=!0,Zt.updateUserTransactionEditScope({transactionEditScope:Du.All.type}).then(()=>{u.value=!1,st.value?.showMessage("Your editable transaction range has been set to All")}).catch(re=>{u.value=!1,re.processed||st.value?.showError(re)})}):Q.processed||st.value?.showError(Q)})};m.value.sourceAmount===0?we.value?.open("Are you sure you want to save this transaction with a zero amount?").then(()=>{ge()}):ge()}else n.type===It.Template&&(g.value===Ge.Add||g.value===Ge.Edit)&&(u.value=!0,Be.saveTemplateContent({template:m.value,isEdit:g.value===Ge.Edit,clientSessionId:h.value}).then(()=>{u.value=!1,Mt&&(g.value===Ge.Add?Mt({message:"You have added a new template"}):g.value===Ge.Edit&&Mt({message:"You have saved this template"})),St.value=!1}).catch(ge=>{u.value=!1,ge.processed||st.value?.showError(ge)}))}function va(Se,ge){n.type!==It.Transaction||g.value!==Ge.View||(v.value=null,k.value=m.value.id,h.value=pl(),_t.value="basicInfo",m.value.id="",Se||(m.value.time=Ql(),m.value.timeZone=At.appSettings.timeZone,m.value.utcOffset=bl(m.value.timeZone)),ge||m.value.removeGeoLocation(),m.value.clearPictures(),g.value=Ge.Add)}function Ya(){n.type!==It.Transaction||g.value!==Ge.View||(g.value=Ge.Edit)}function al(){n.type!==It.Transaction||g.value!==Ge.View||we.value?.open("Are you sure you want to delete this transaction?").then(()=>{u.value=!0,ke.deleteTransaction({transaction:m.value,defaultCurrency:x.value}).then(()=>{Mt&&Mt(),u.value=!1,St.value=!1}).catch(Se=>{u.value=!1,Se.processed||st.value?.showError(Se)})})}function Wa(){const Se=function(){Kt&&Kt(),St.value=!1};if(n.type!==It.Transaction||g.value!==Ge.Add||Le.value||y.value||k.value){Se();return}At.appSettings.autoSaveTransactionDraft==="confirmation"?ke.isTransactionDraftModified(m.value,Nt.value,xt.value,gt.value,xa.value,q.value)?we.value?.open("Do you want to save this transaction draft?").then(()=>{ke.saveTransactionDraft(m.value,Nt.value,xt.value,gt.value,xa.value,q.value),Se()}).catch(()=>{ke.clearTransactionDraft(),Se()}):(ke.clearTransactionDraft(),Se()):(At.appSettings.autoSaveTransactionDraft==="enabled"&&ke.saveTransactionDraft(m.value,Nt.value,xt.value,gt.value,xa.value,q.value),Se())}function Ka(Se){if(jt.value=!1,!c){Xt.warn("this browser does not support geo location"),Se&&st.value?.showMessage("Unable to retrieve current position");return}navigator.geolocation.getCurrentPosition(function(ge){if(!ge||!ge.coords){Xt.error("current position is null"),F.value=Mn.Error,Se&&st.value?.showMessage("Unable to retrieve current position");return}F.value=Mn.Success,m.value.setLatitudeAndLongitude(ge.coords.latitude,ge.coords.longitude)},function(ge){Xt.error("cannot retrieve current position",ge),F.value=Mn.Error,Se&&st.value?.showMessage("Unable to retrieve current position")}),F.value=Mn.Getting}function fa(Se){co()&&w.value&&(m.value.setLatitudeAndLongitude(Se.latitude,Se.longitude),ct.value?.setMarkerPosition(m.value.geoLocation))}function yl(){jt.value=!1,F.value=null,m.value.removeGeoLocation()}function Na(Se){u.value=!0,ce.saveTag({tag:Zn.createNewTag(Se)}).then(ge=>{u.value=!1,ge&&ge.id&&m.value.tagIds.push(ge.id)}).catch(ge=>{u.value=!1,ge.processed||st.value?.showError(ge)})}function Ma(){!D.value||u.value||De.value?.click()}function Ga(Se){if(!Se||!Se.target)return;const ge=Se.target;if(!ge.files||!ge.files.length||!ge.files[0])return;const Q=ge.files[0];ge.value="",C.value=!0,u.value=!0,ke.uploadTransactionPicture({pictureFile:Q}).then(re=>{m.value.addPicture(re),C.value=!1,u.value=!1}).catch(re=>{C.value=!1,u.value=!1,re.processed||st.value?.showError(re)})}function ll(Se){if(g.value!==Ge.Add&&g.value!==Ge.Edit){window.open(Yt(Se),"_blank");return}we.value?.open("Are you sure you want to remove this transaction picture?").then(()=>{Te.value=Se.pictureId,u.value=!0,ke.removeUnusedTransactionPicture({pictureInfo:Se}).then(ge=>{ge&&m.value.removePicture(Se),Te.value="",u.value=!1}).catch(ge=>{ge.error&&ge.error.errorCode===Il.TransactionPictureNotFound?m.value.removePicture(Se):ge.processed||st.value?.showError(ge),Te.value="",u.value=!1})})}function nl(Se){st.value?.showError(Se)}return Ft(_t,Se=>{Se==="map"&&ka(()=>{ct.value?.initMapView()})}),T({open:Fa}),(Se,ge)=>{const Q=Ie("amount-input"),re=Ie("two-column-select"),Ue=Ie("date-time-select"),Lt=Ie("schedule-frequency-select"),ya=Ie("date-select");return l(),b(ue,null,[t(Tt,{width:"1000",persistent:ul.value,modelValue:St.value,"onUpdate:modelValue":ge[34]||(ge[34]=Fe=>St.value=Fe)},{default:a(()=>[t(Ee,{class:"pa-2 pa-sm-4 pa-md-8"},{title:a(()=>[s("div",mf,[s("div",pf,[s("h4",vf,i(e(o)(e(P))),1),e(d)?(l(),p(je,{key:0,indeterminate:"",size:"22",class:"ms-2"})):r("",!0)]),e(g)!==e(Ge).View&&(_t.value==="basicInfo"||_t.value==="map"&&e(co)())?(l(),p(H,{key:0,density:"comfortable",color:"default",variant:"text",class:"ms-2",icon:!0,disabled:e(d)||e(u)},{default:a(()=>[t(se,{icon:e(Jt)},null,8,["icon"]),t(nt,{activator:"parent"},{default:a(()=>[_t.value==="basicInfo"?(l(),p(ze,{key:0},{default:a(()=>[e(m).type===e(ye).Transfer?(l(),p(le,{key:0,"prepend-icon":e(gn),title:e(o)("Swap Account"),onClick:ge[0]||(ge[0]=Fe=>e(at)(!0,!1))},null,8,["prepend-icon","title"])):r("",!0),e(m).type===e(ye).Transfer?(l(),p(le,{key:1,"prepend-icon":e(gn),title:e(o)("Swap Amount"),onClick:ge[1]||(ge[1]=Fe=>e(at)(!1,!0))},null,8,["prepend-icon","title"])):r("",!0),e(m).type===e(ye).Transfer?(l(),p(le,{key:2,"prepend-icon":e(gn),title:e(o)("Swap Account and Amount"),onClick:ge[2]||(ge[2]=Fe=>e(at)(!0,!0))},null,8,["prepend-icon","title"])):r("",!0),e(m).type===e(ye).Transfer?(l(),p(Ke,{key:3})):r("",!0),e(m).hideAmount?(l(),p(le,{key:4,"prepend-icon":e(ca),title:e(o)("Show Amount"),onClick:ge[3]||(ge[3]=Fe=>e(m).hideAmount=!1)},null,8,["prepend-icon","title"])):r("",!0),e(m).hideAmount?r("",!0):(l(),p(le,{key:5,"prepend-icon":e(Gt),title:e(o)("Hide Amount"),onClick:ge[4]||(ge[4]=Fe=>e(m).hideAmount=!0)},null,8,["prepend-icon","title"]))]),_:1})):r("",!0),_t.value==="map"?(l(),p(ze,{key:1},{default:a(()=>[e(co)()?(l(),p(le,{key:"setGeoLocationByClickMap",value:"setGeoLocationByClickMap","prepend-icon":e(Xi),disabled:!e(m).geoLocation},{default:a(()=>[t(ot,{class:"cursor-pointer",onClick:ge[5]||(ge[5]=Fe=>{w.value=!e(w),jt.value=!1})},{default:a(()=>[s("div",ff,[s("span",null,i(e(o)("Click on Map to Set Geographic Location")),1),t(pt),e(w)?(l(),p(se,{key:0,icon:e(Ye)},null,8,["icon"])):r("",!0)])]),_:1})]),_:1},8,["prepend-icon","disabled"])):r("",!0)]),_:1})):r("",!0)]),_:1})]),_:1},8,["disabled"])):r("",!0)])]),default:a(()=>[t(ve,{class:"d-flex flex-column flex-md-row mt-md-4 pt-0"},{default:a(()=>[s("div",yf,[t(Xa,{class:be(["v-tabs-pill",{readonly:f.type===e(It).Transaction&&e(g)!==e(Ge).Add}]),direction:"vertical",disabled:e(d)||e(u),modelValue:e(m).type,"onUpdate:modelValue":ge[6]||(ge[6]=Fe=>e(m).type=Fe)},{default:a(()=>[e(m).type!==e(ye).ModifyBalance?(l(),p(qt,{key:0,value:e(ye).Expense,disabled:f.type===e(It).Transaction&&e(g)!==e(Ge).Add&&e(m).type!==e(ye).Expense},{default:a(()=>[s("span",null,i(e(o)("Expense")),1)]),_:1},8,["value","disabled"])):r("",!0),e(m).type!==e(ye).ModifyBalance?(l(),p(qt,{key:1,value:e(ye).Income,disabled:f.type===e(It).Transaction&&e(g)!==e(Ge).Add&&e(m).type!==e(ye).Income},{default:a(()=>[s("span",null,i(e(o)("Income")),1)]),_:1},8,["value","disabled"])):r("",!0),e(m).type!==e(ye).ModifyBalance?(l(),p(qt,{key:2,value:e(ye).Transfer,disabled:f.type===e(It).Transaction&&e(g)!==e(Ge).Add&&e(m).type!==e(ye).Transfer},{default:a(()=>[s("span",null,i(e(o)("Transfer")),1)]),_:1},8,["value","disabled"])):r("",!0),f.type===e(It).Transaction&&e(m).type===e(ye).ModifyBalance?(l(),p(qt,{key:3,value:e(ye).ModifyBalance},{default:a(()=>[s("span",null,i(e(o)("Modify Balance")),1)]),_:1},8,["value"])):r("",!0)]),_:1},8,["class","disabled","modelValue"]),t(Ke,{class:"my-2"}),t(Xa,{direction:"vertical",disabled:e(d)||e(u),modelValue:_t.value,"onUpdate:modelValue":ge[7]||(ge[7]=Fe=>_t.value=Fe)},{default:a(()=>[t(qt,{value:"basicInfo"},{default:a(()=>[s("span",null,i(e(o)("Basic Information")),1)]),_:1}),f.type===e(It).Transaction&&e(Fu)()?(l(),p(qt,{key:0,value:"map",disabled:!e(m).geoLocation},{default:a(()=>[s("span",null,i(e(o)("Location on Map")),1)]),_:1},8,["disabled"])):r("",!0),f.type===e(It).Transaction&&e(Nu)()?(l(),p(qt,{key:1,value:"pictures",disabled:e(g)!==e(Ge).Add&&e(g)!==e(Ge).Edit&&(!e(m).pictures||!e(m).pictures.length)},{default:a(()=>[s("span",null,i(e(o)("Pictures")),1)]),_:1},8,["disabled"])):r("",!0)]),_:1},8,["disabled","modelValue"])]),t(ja,{class:"d-flex flex-grow-1 disable-tab-transition w-100-window-container ms-md-5",modelValue:_t.value,"onUpdate:modelValue":ge[29]||(ge[29]=Fe=>_t.value=Fe)},{default:a(()=>[t(Pt,{value:"basicInfo"},{default:a(()=>[t(zt,{class:"mt-2"},{default:a(()=>[t(Ae,null,{default:a(()=>[f.type===e(It).Template&&e(m)instanceof e(cl)?(l(),p(R,{key:0,cols:"12"},{default:a(()=>[t(dt,{type:"text","persistent-placeholder":"",disabled:e(d)||e(u),label:e(o)("Template Name"),placeholder:e(o)("Template Name"),modelValue:e(m).name,"onUpdate:modelValue":ge[8]||(ge[8]=Fe=>e(m).name=Fe)},null,8,["disabled","label","placeholder","modelValue"])]),_:1})):r("",!0),t(R,{cols:"12",md:e(m).type===e(ye).Transfer?6:12},{default:a(()=>[t(Q,{class:"transaction-edit-amount font-weight-bold",color:tl.value,currency:e(K),"show-currency":!0,readonly:e(g)===e(Ge).View,disabled:e(d)||e(u),"persistent-placeholder":!0,hide:e(m).hideAmount,label:e(J),placeholder:e(o)(e(de)),"enable-formula":e(g)!==e(Ge).View,modelValue:e(m).sourceAmount,"onUpdate:modelValue":ge[9]||(ge[9]=Fe=>e(m).sourceAmount=Fe)},null,8,["color","currency","readonly","disabled","hide","label","placeholder","enable-formula","modelValue"])]),_:1},8,["md"]),e(m).type===e(ye).Transfer?(l(),p(R,{key:1,cols:"12",md:6},{default:a(()=>[t(Q,{class:"transaction-edit-amount font-weight-bold",color:"primary",currency:e(me),"show-currency":!0,readonly:e(g)===e(Ge).View,disabled:e(d)||e(u),"persistent-placeholder":!0,hide:e(m).hideAmount,label:e(ie),placeholder:e(o)("Transfer In Amount"),"enable-formula":e(g)!==e(Ge).View,modelValue:e(m).destinationAmount,"onUpdate:modelValue":ge[10]||(ge[10]=Fe=>e(m).destinationAmount=Fe)},null,8,["currency","readonly","disabled","hide","label","placeholder","enable-formula","modelValue"])]),_:1})):r("",!0),e(m).type===e(ye).Expense?(l(),p(R,{key:2,cols:"12",md:"12"},{default:a(()=>[t(yt,{disabled:e(O),text:e(O)?"":e(o)("No secondary expense categories are available")},{activator:a(({props:Fe})=>[s("div",Ct(Fe,{class:"d-block"}),[t(re,{"primary-key-field":"id","primary-value-field":"id","primary-title-field":"name","primary-icon-field":"icon","primary-icon-type":"category","primary-color-field":"color","primary-hidden-field":"hidden","primary-sub-items-field":"subCategories","secondary-key-field":"id","secondary-value-field":"id","secondary-title-field":"name","secondary-icon-field":"icon","secondary-icon-type":"category","secondary-color-field":"color","secondary-hidden-field":"hidden",readonly:e(g)===e(Ge).View,disabled:e(d)||e(u)||!e(O),"enable-filter":!0,"filter-placeholder":e(o)("Find category"),"filter-no-items-text":e(o)("No available category"),"show-selection-primary-text":!0,"custom-selection-primary-text":e(Ra)(e(m).expenseCategoryId,e(M)[e(tt).Expense]),"custom-selection-secondary-text":e(ba)(e(m).expenseCategoryId,e(M)[e(tt).Expense]),label:e(o)("Category"),placeholder:e(o)("Category"),items:e(M)[e(tt).Expense]||[],modelValue:e(m).expenseCategoryId,"onUpdate:modelValue":ge[11]||(ge[11]=it=>e(m).expenseCategoryId=it)},null,8,["readonly","disabled","filter-placeholder","filter-no-items-text","custom-selection-primary-text","custom-selection-secondary-text","label","placeholder","items","modelValue"])],16)]),_:1},8,["disabled","text"])]),_:1})):r("",!0),e(m).type===e(ye).Income?(l(),p(R,{key:3,cols:"12",md:"12"},{default:a(()=>[t(yt,{disabled:e(V),text:e(V)?"":e(o)("No secondary income categories are available")},{activator:a(({props:Fe})=>[s("div",Ct(Fe,{class:"d-block"}),[t(re,{"primary-key-field":"id","primary-value-field":"id","primary-title-field":"name","primary-icon-field":"icon","primary-icon-type":"category","primary-color-field":"color","primary-hidden-field":"hidden","primary-sub-items-field":"subCategories","secondary-key-field":"id","secondary-value-field":"id","secondary-title-field":"name","secondary-icon-field":"icon","secondary-icon-type":"category","secondary-color-field":"color","secondary-hidden-field":"hidden",readonly:e(g)===e(Ge).View,disabled:e(d)||e(u)||!e(V),"enable-filter":!0,"filter-placeholder":e(o)("Find category"),"filter-no-items-text":e(o)("No available category"),"show-selection-primary-text":!0,"custom-selection-primary-text":e(Ra)(e(m).incomeCategoryId,e(M)[e(tt).Income]),"custom-selection-secondary-text":e(ba)(e(m).incomeCategoryId,e(M)[e(tt).Income]),label:e(o)("Category"),placeholder:e(o)("Category"),items:e(M)[e(tt).Income]||[],modelValue:e(m).incomeCategoryId,"onUpdate:modelValue":ge[12]||(ge[12]=it=>e(m).incomeCategoryId=it)},null,8,["readonly","disabled","filter-placeholder","filter-no-items-text","custom-selection-primary-text","custom-selection-secondary-text","label","placeholder","items","modelValue"])],16)]),_:1},8,["disabled","text"])]),_:1})):r("",!0),e(m).type===e(ye).Transfer?(l(),p(R,{key:4,cols:"12",md:"12"},{default:a(()=>[t(yt,{disabled:e(_),text:e(_)?"":e(o)("No secondary transfer categories are available")},{activator:a(({props:Fe})=>[s("div",Ct(Fe,{class:"d-block"}),[t(re,{"primary-key-field":"id","primary-value-field":"id","primary-title-field":"name","primary-icon-field":"icon","primary-icon-type":"category","primary-color-field":"color","primary-hidden-field":"hidden","primary-sub-items-field":"subCategories","secondary-key-field":"id","secondary-value-field":"id","secondary-title-field":"name","secondary-icon-field":"icon","secondary-icon-type":"category","secondary-color-field":"color","secondary-hidden-field":"hidden",readonly:e(g)===e(Ge).View,disabled:e(d)||e(u)||!e(_),"enable-filter":!0,"filter-placeholder":e(o)("Find category"),"filter-no-items-text":e(o)("No available category"),"show-selection-primary-text":!0,"custom-selection-primary-text":e(Ra)(e(m).transferCategoryId,e(M)[e(tt).Transfer]),"custom-selection-secondary-text":e(ba)(e(m).transferCategoryId,e(M)[e(tt).Transfer]),label:e(o)("Category"),placeholder:e(o)("Category"),items:e(M)[e(tt).Transfer]||[],modelValue:e(m).transferCategoryId,"onUpdate:modelValue":ge[13]||(ge[13]=it=>e(m).transferCategoryId=it)},null,8,["readonly","disabled","filter-placeholder","filter-no-items-text","custom-selection-primary-text","custom-selection-secondary-text","label","placeholder","items","modelValue"])],16)]),_:1},8,["disabled","text"])]),_:1})):r("",!0),t(R,{cols:"12",md:e(m).type===e(ye).Transfer?6:12},{default:a(()=>[t(yt,{disabled:!!e($).length,text:e($).length?"":e(o)("No available account")},{activator:a(({props:Fe})=>[s("div",Ct(Fe,{class:"d-block"}),[t(re,{"primary-key-field":"id","primary-value-field":"category","primary-title-field":"name","primary-footer-field":"displayBalance","primary-icon-field":"icon","primary-icon-type":"account","primary-sub-items-field":"accounts","primary-title-i18n":!0,"secondary-key-field":"id","secondary-value-field":"id","secondary-title-field":"name","secondary-footer-field":"displayBalance","secondary-icon-field":"icon","secondary-icon-type":"account","secondary-color-field":"color",readonly:e(g)===e(Ge).View,disabled:e(d)||e(u)||!e($).length||e(g)===e(Ge).Edit&&e(m).type===e(ye).ModifyBalance,"enable-filter":!0,"filter-placeholder":e(o)("Find account"),"filter-no-items-text":e(o)("No available account"),"custom-selection-primary-text":e(fe),label:e(o)(e(Y)),placeholder:e(o)(e(Y)),items:e(z),modelValue:e(m).sourceAccountId,"onUpdate:modelValue":ge[14]||(ge[14]=it=>e(m).sourceAccountId=it)},null,8,["readonly","disabled","filter-placeholder","filter-no-items-text","custom-selection-primary-text","label","placeholder","items","modelValue"])],16)]),_:1},8,["disabled","text"])]),_:1},8,["md"]),e(m).type===e(ye).Transfer?(l(),p(R,{key:5,cols:"12",md:"6"},{default:a(()=>[t(yt,{disabled:!!e($).length,text:e($).length?"":e(o)("No available account")},{activator:a(({props:Fe})=>[s("div",Ct(Fe,{class:"d-block"}),[t(re,{"primary-key-field":"id","primary-value-field":"category","primary-title-field":"name","primary-footer-field":"displayBalance","primary-icon-field":"icon","primary-icon-type":"account","primary-sub-items-field":"accounts","primary-title-i18n":!0,"secondary-key-field":"id","secondary-value-field":"id","secondary-title-field":"name","secondary-footer-field":"displayBalance","secondary-icon-field":"icon","secondary-icon-type":"account","secondary-color-field":"color",readonly:e(g)===e(Ge).View,disabled:e(d)||e(u)||!e($).length,"enable-filter":!0,"filter-placeholder":e(o)("Find account"),"filter-no-items-text":e(o)("No available account"),"custom-selection-primary-text":e(te),label:e(o)("Destination Account"),placeholder:e(o)("Destination Account"),items:e(z),modelValue:e(m).destinationAccountId,"onUpdate:modelValue":ge[15]||(ge[15]=it=>e(m).destinationAccountId=it)},null,8,["readonly","disabled","filter-placeholder","filter-no-items-text","custom-selection-primary-text","label","placeholder","items","modelValue"])],16)]),_:1},8,["disabled","text"])]),_:1})):r("",!0),f.type===e(It).Transaction?(l(),p(R,{key:6,cols:"12",md:"6"},{default:a(()=>[t(Ue,{readonly:e(g)===e(Ge).View,disabled:e(d)||e(u)||e(g)===e(Ge).Edit&&e(m).type===e(ye).ModifyBalance,label:e(o)("Transaction Time"),modelValue:e(m).time,"onUpdate:modelValue":ge[16]||(ge[16]=Fe=>e(m).time=Fe),onError:nl},null,8,["readonly","disabled","label","modelValue"])]),_:1})):r("",!0),f.type===e(It).Template&&e(m)instanceof e(cl)&&e(m).templateType===e(ha).Schedule.type?(l(),p(R,{key:7,cols:"12",md:"6"},{default:a(()=>[t(Lt,{readonly:e(g)===e(Ge).View,disabled:e(d)||e(u),label:e(o)("Scheduled Transaction Frequency"),type:e(m).scheduledFrequencyType,"onUpdate:type":ge[17]||(ge[17]=Fe=>e(m).scheduledFrequencyType=Fe),modelValue:e(m).scheduledFrequency,"onUpdate:modelValue":ge[18]||(ge[18]=Fe=>e(m).scheduledFrequency=Fe)},null,8,["readonly","disabled","label","type","modelValue"])]),_:1})):r("",!0),f.type===e(It).Transaction||f.type===e(It).Template&&e(m)instanceof e(cl)&&e(m).templateType===e(ha).Schedule.type?(l(),p(R,{key:8,cols:"12",md:"6"},{default:a(()=>[t(sa,{class:"transaction-edit-timezone","item-title":"displayNameWithUtcOffset","item-value":"name","auto-select-first":"","persistent-placeholder":"",readonly:e(g)===e(Ge).View,disabled:e(d)||e(u)||e(g)===e(Ge).Edit&&e(m).type===e(ye).ModifyBalance,label:e(o)("Transaction Timezone"),placeholder:!e(m).timeZone&&e(m).timeZone!==""?`(${e(Ne)}) ${e(et)}`:e(o)("Timezone"),items:e(A),"no-data-text":e(o)("No results"),modelValue:e(m).timeZone,"onUpdate:modelValue":ge[19]||(ge[19]=Fe=>e(m).timeZone=Fe)},{selection:a(({item:Fe})=>[e(m).timeZone||e(m).timeZone===""?(l(),b("span",gf,i(Fe.title),1)):r("",!0)]),_:1},8,["readonly","disabled","label","placeholder","items","no-data-text","modelValue"])]),_:1})):r("",!0),f.type===e(It).Template&&e(m)instanceof e(cl)&&e(m).templateType===e(ha).Schedule.type?(l(),p(R,{key:9,cols:"12",md:"6"},{default:a(()=>[t(ya,{readonly:e(g)===e(Ge).View,disabled:e(d)||e(u),clearable:!0,label:e(o)("Start Date"),"no-data-text":e(o)("No limit"),modelValue:e(m).scheduledStartDate,"onUpdate:modelValue":ge[20]||(ge[20]=Fe=>e(m).scheduledStartDate=Fe)},null,8,["readonly","disabled","label","no-data-text","modelValue"])]),_:1})):r("",!0),f.type===e(It).Template&&e(m)instanceof e(cl)&&e(m).templateType===e(ha).Schedule.type?(l(),p(R,{key:10,cols:"12",md:"6"},{default:a(()=>[t(ya,{readonly:e(g)===e(Ge).View,disabled:e(d)||e(u),clearable:!0,label:e(o)("End Date"),"no-data-text":e(o)("No limit"),modelValue:e(m).scheduledEndDate,"onUpdate:modelValue":ge[21]||(ge[21]=Fe=>e(m).scheduledEndDate=Fe)},null,8,["readonly","disabled","label","no-data-text","modelValue"])]),_:1})):r("",!0),f.type===e(It).Transaction?(l(),p(R,{key:11,cols:"12",md:"12"},{default:a(()=>[t(Je,{"persistent-placeholder":"",readonly:e(g)===e(Ge).View,disabled:e(d)||e(u),label:e(o)("Geographic Location"),modelValue:e(m),"onUpdate:modelValue":ge[23]||(ge[23]=Fe=>vt(m)?m.value=Fe:null),menu:jt.value,"onUpdate:menu":ge[24]||(ge[24]=Fe=>jt.value=Fe)},{selection:a(()=>[e(m).geoLocation?(l(),b("span",hf,i(`(${e(Js)(e(m).geoLocation,e(N))})`),1)):e(m).geoLocation?r("",!0):(l(),b("span",bf,i(e(Me)),1))]),"no-data":a(()=>[t(ze,{class:"py-0"},{default:a(()=>[e(g)!==e(Ge).View?(l(),p(le,{key:0,onClick:ge[22]||(ge[22]=Fe=>Ka(!0))},{default:a(()=>[j(i(e(o)("Update Geographic Location")),1)]),_:1})):r("",!0),e(g)!==e(Ge).View?(l(),p(le,{key:1,onClick:yl},{default:a(()=>[j(i(e(o)("Clear Geographic Location")),1)]),_:1})):r("",!0)]),_:1})]),_:1},8,["readonly","disabled","label","modelValue","menu"])]),_:1})):r("",!0),t(R,{cols:"12",md:"12"},{default:a(()=>[t(sa,{"item-title":"name","item-value":"id","auto-select-first":"","persistent-placeholder":"",multiple:"",chips:"","closable-chips":e(g)!==e(Ge).View,readonly:e(g)===e(Ge).View,disabled:e(d)||e(u),label:e(o)("Tags"),placeholder:e(o)("None"),items:e(X),modelValue:e(m).tagIds,"onUpdate:modelValue":ge[26]||(ge[26]=Fe=>e(m).tagIds=Fe),search:Ze.value,"onUpdate:search":ge[27]||(ge[27]=Fe=>Ze.value=Fe)},{chip:a(({props:Fe,item:it})=>[t(oa,Ct({"prepend-icon":e(la),text:it.title},Fe),null,16,["prepend-icon","text"])]),item:a(({props:Fe,item:it})=>[it.raw.hidden?r("",!0):(l(),p(le,Ct({key:0,value:it.value},Fe),{title:a(()=>[t(ot,null,{default:a(()=>[s("div",kf,[t(se,{size:"20",start:"",icon:e(la)},null,8,["icon"]),s("span",null,i(it.title),1)])]),_:2},1024)]),_:2},1040,["value"])),it.raw.hidden&&it.raw.name.toLowerCase().indexOf(Ze.value.toLowerCase())>=0&&Ca.value?(l(),p(le,Ct({key:1,disabled:!0},Fe),{title:a(()=>[t(ot,null,{default:a(()=>[s("div",_f,[t(se,{size:"20",start:"",icon:e(la)},null,8,["icon"]),s("span",null,i(it.title),1)])]),_:2},1024)]),_:2},1040)):r("",!0)]),"no-data":a(()=>[t(ze,{class:"py-0"},{default:a(()=>[Ze.value?(l(),p(le,{key:0,onClick:ge[25]||(ge[25]=Fe=>Na(Ze.value))},{default:a(()=>[j(i(e(o)("format.misc.addNewTag",{tag:Ze.value})),1)]),_:1})):Ze.value?r("",!0):(l(),p(le,{key:1},{default:a(()=>[j(i(e(o)("No available tag")),1)]),_:1}))]),_:1})]),_:1},8,["closable-chips","readonly","disabled","label","placeholder","items","modelValue","search"])]),_:1}),t(R,{cols:"12",md:"12"},{default:a(()=>[t(La,{type:"text","persistent-placeholder":"",rows:"3",readonly:e(g)===e(Ge).View,disabled:e(d)||e(u),label:e(o)("Description"),placeholder:e(o)("Your transaction description (optional)"),modelValue:e(m).comment,"onUpdate:modelValue":ge[28]||(ge[28]=Fe=>e(m).comment=Fe)},null,8,["readonly","disabled","label","placeholder","modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),t(Pt,{value:"map"},{default:a(()=>[t(Ae,null,{default:a(()=>[t(R,{cols:"12",md:"12"},{default:a(()=>[t(Zs,{ref_key:"map",ref:ct,"map-class":"transaction-edit-map-view","geo-location":e(m).geoLocation,onClick:fa},{"error-title":a(({mapSupported:Fe,mapDependencyLoaded:it})=>[Fe?it?r("",!0):(l(),b("span",xf,[s("b",null,i(e(o)("Cannot Initialize Map")),1)])):(l(),b("span",Tf,[s("b",null,i(e(o)("Unsupported Map Provider")),1)]))]),"error-content":a(()=>[s("p",Cf,i(e(o)("Please refresh the page and try again. If the error persists, ensure that the server's map settings are correctly configured.")),1)]),_:1},8,["geo-location"])]),_:1})]),_:1})]),_:1}),t(Pt,{value:"pictures"},{default:a(()=>[t(Ae,{class:be(["transaction-pictures align-content-start",{readonly:e(u)||e(C)||Te.value}])},{default:a(()=>[(l(!0),b(ue,null,$e(e(m).pictures,(Fe,it)=>(l(),p(R,{key:it,cols:"6",md:"3"},{default:a(()=>[t(Za,{rounded:"lg",variant:"tonal",size:"160",class:"cursor-pointer transaction-picture",color:"rgba(0,0,0,0)",onClick:dl=>ll(Fe)},{default:a(()=>[t(ht,{src:e(Yt)(Fe)},{placeholder:a(()=>[s("div",wf,[t(je,{color:"grey-500",indeterminate:"",size:"48"})])]),error:a(()=>[s("div",Af,[s("span",If,i(e(o)('Failed to load image, please check whether the config "domain" and "root_url" are set correctly.')),1)])]),_:1},8,["src"]),s("div",{class:be(["picture-control-icon",{"show-control-icon":Fe.pictureId===Te.value}])},[(e(g)===e(Ge).Add||e(g)===e(Ge).Edit)&&Fe.pictureId!==Te.value?(l(),p(se,{key:0,size:"64",icon:e(Ji)},null,8,["icon"])):r("",!0),(e(g)===e(Ge).Add||e(g)===e(Ge).Edit)&&Fe.pictureId===Te.value?(l(),p(je,{key:1,color:"grey-500",indeterminate:"",size:"48"})):r("",!0),e(g)!==e(Ge).Add&&e(g)!==e(Ge).Edit?(l(),p(se,{key:2,size:"64",icon:e(Zi)},null,8,["icon"])):r("",!0)],2)]),_:2},1032,["onClick"])]),_:2},1024))),128)),e(D)?(l(),p(R,{key:0,cols:"6",md:"3"},{default:a(()=>[t(Za,{rounded:"lg",variant:"tonal",size:"160",class:be(["transaction-picture transaction-picture-add",{enabled:!e(u),"cursor-pointer":!e(u)}]),color:"rgba(0,0,0,0)",onClick:Ma},{default:a(()=>[e(u)?r("",!0):(l(),p(yt,{key:0,activator:"parent"},{default:a(()=>[j(i(e(o)("Add Picture")),1)]),_:1})),e(C)?r("",!0):(l(),p(se,{key:1,class:"transaction-picture-add-icon",size:"56",icon:e(Qi)},null,8,["icon"])),e(C)?(l(),p(je,{key:2,color:"grey-500",indeterminate:"",size:"48"})):r("",!0)]),_:1},8,["class"])]),_:1})):r("",!0)]),_:1},8,["class"])]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(ve,{class:"overflow-y-visible"},{default:a(()=>[s("div",Sf,[t(yt,{disabled:!e(bt),text:e(Ve)?e(o)(e(Ve)):""},{activator:a(({props:Fe})=>[s("div",Ct(Fe,{class:"d-inline-block"}),[e(g)!==e(Ge).View?(l(),p(H,{key:0,disabled:e(bt)||e(d)||e(u),onClick:ea},{default:a(()=>[j(i(e(o)(e(W)))+" ",1),e(u)?(l(),p(je,{key:0,indeterminate:"",size:"22",class:"ms-2"})):r("",!0)]),_:1},8,["disabled"])):r("",!0)],16)]),_:1},8,["disabled","text"]),e(g)===e(Ge).View&&e(m).type!==e(ye).ModifyBalance?(l(),p(ln,{key:0,variant:"tonal",density:"comfortable"},{default:a(()=>[t(H,{disabled:e(d)||e(u),onClick:ge[30]||(ge[30]=Fe=>va(!1,!1))},{default:a(()=>[j(i(e(o)("Duplicate")),1)]),_:1},8,["disabled"]),t(H,{density:"compact",disabled:e(d)||e(u),icon:!0},{default:a(()=>[t(se,{icon:e(wl),size:"24"},null,8,["icon"]),t(nt,{activator:"parent"},{default:a(()=>[t(ze,null,{default:a(()=>[t(le,{title:e(o)("Duplicate (With Time)"),onClick:ge[31]||(ge[31]=Fe=>va(!0,!1))},null,8,["title"]),e(m).geoLocation?(l(),p(le,{key:0,title:e(o)("Duplicate (With Geographic Location)"),onClick:ge[32]||(ge[32]=Fe=>va(!1,!0))},null,8,["title"])):r("",!0),e(m).geoLocation?(l(),p(le,{key:1,title:e(o)("Duplicate (With Time and Geographic Location)"),onClick:ge[33]||(ge[33]=Fe=>va(!0,!0))},null,8,["title"])):r("",!0)]),_:1})]),_:1})]),_:1},8,["disabled"])]),_:1})):r("",!0),e(g)===e(Ge).View&&We.value?(l(),p(H,{key:1,color:"warning",variant:"tonal",disabled:e(d)||e(u),onClick:Ya},{default:a(()=>[j(i(e(o)("Edit")),1)]),_:1},8,["disabled"])):r("",!0),e(g)===e(Ge).View&&We.value?(l(),p(H,{key:2,color:"error",variant:"tonal",disabled:e(d)||e(u),onClick:al},{default:a(()=>[j(i(e(o)("Delete"))+" ",1),e(u)?(l(),p(je,{key:0,indeterminate:"",size:"22",class:"ms-2"})):r("",!0)]),_:1},8,["disabled"])):r("",!0),t(H,{color:"secondary",variant:"tonal",disabled:e(d)||e(u),onClick:Wa},{default:a(()=>[j(i(e(o)(e(ne))),1)]),_:1},8,["disabled"])])]),_:1})]),_:1})]),_:1},8,["persistent","modelValue"]),t(pa,{ref_key:"confirmDialog",ref:we},null,512),t(mt,{ref_key:"snackbar",ref:st},null,512),s("input",{ref_key:"pictureInput",ref:De,type:"file",style:{display:"none"},accept:e(Ho),onChange:ge[35]||(ge[35]=Fe=>Ga(Fe))},null,40,Vf)],64)}}}),$f={class:"d-flex align-center justify-center"},Df={class:"text-h4"},Ff={key:0,class:"d-inline-flex flex-column"},Nf={key:2,class:"pa-2"},Mf={ref:"buttonContainer",class:"w-100 d-flex justify-center gap-4"},Ef=["accept"],Uf=Pe({__name:"AIImageRecognitionDialog",setup(f,{expose:T}){const n=Ot(),{tt:o}=Oe(),g=Nl(),c=xe("snackbar"),v=xe("imageInput");let y=null,k=null;const h=L(!1),d=L(!1),u=L(!1),C=L(void 0),F=L(null),w=L(void 0),m=L(!1),x=B(()=>n.global.name.value===wt.Dark);function S(O){d.value=!0,F.value=null,w.value=void 0,Mu(O,1280,1280,.8).then(V=>{F.value=Dt.JPG.createFileFromBlob(V,"image"),w.value=URL.createObjectURL(V),d.value=!1}).catch(V=>{F.value=null,w.value=void 0,d.value=!1,Xt.error("failed to compress image",V),c.value?.showError("Unable to load image")})}function N(){return h.value=!0,d.value=!1,u.value=!1,C.value=void 0,F.value=null,w.value=void 0,new Promise((O,V)=>{y=O,k=V})}function A(){d.value||u.value||m.value||v.value?.click()}function $(O){if(!O||!O.target)return;const V=O.target;if(!V.files||!V.files.length||!V.files[0])return;const _=V.files[0];V.value="",S(_)}function I(){d.value||u.value||!F.value||(C.value=pl(),u.value=!0,g.recognizeReceiptImage({imageFile:F.value,cancelableUuid:C.value}).then(O=>{y?.(O),h.value=!1,u.value=!1,C.value=void 0}).catch(O=>{O.canceled||(u.value=!1,C.value=void 0,O.processed||c.value?.showError(O))}))}function z(){C.value&&(g.cancelRecognizeReceiptImage(C.value),u.value=!1,C.value=void 0,c.value?.showMessage("User Canceled"))}function M(){k?.(),h.value=!1,d.value=!1,u.value=!1,C.value=void 0,F.value=null,w.value=void 0}function U(){d.value||u.value||(m.value=!0)}function X(){m.value=!1}function Z(O){d.value||u.value||(m.value=!1,O.dataTransfer&&O.dataTransfer.files&&O.dataTransfer.files.length&&O.dataTransfer.files[0]&&S(O.dataTransfer.files[0]))}function q(O){if(!O.clipboardData){O.preventDefault();return}for(let V=0;V<O.clipboardData.items.length;V++){const _=O.clipboardData.items[V];if(_&&_.type.startsWith("image/")){const D=_.getAsFile();if(D){S(D),O.preventDefault();return}}}}return T({open:N}),(O,V)=>(l(),b(ue,null,[t(Tt,{width:"800",persistent:d.value||u.value||!!F.value,modelValue:h.value,"onUpdate:modelValue":V[1]||(V[1]=_=>h.value=_),onPaste:q},{default:a(()=>[t(Ee,{class:"pa-2 pa-sm-4 pa-md-4"},{title:a(()=>[s("div",$f,[s("h4",Df,i(e(o)("AI Image Recognition")),1)])]),default:a(()=>[t(ve,{class:"d-flex justify-center w-100 my-md-4 pt-0"},{default:a(()=>[s("div",{class:"w-100 border position-relative",onDragenter:Dn(U,["prevent"]),onDragover:V[0]||(V[0]=Dn(()=>{},["prevent"])),onDragleave:Dn(X,["prevent"]),onDrop:Dn(Z,["prevent"])},[s("div",{class:be(["d-flex w-100 fill-height justify-center align-center justify-content-center text-center px-4",{dropzone:!0,"dropzone-dragover":m.value}]),style:{height:"480px"}},[!d.value&&!F.value&&!m.value?(l(),b("div",Ff,[s("h3",{class:be({"pa-2":!0,"bg-grey-200":!x.value,"bg-grey-100":x.value})},i(e(o)("You can drag and drop, paste or click to select a receipt or transaction image")),3),s("span",{class:be({"pa-2":!0,"bg-grey-200":!x.value,"bg-grey-100":x.value})},i(e(o)("Uploaded image and personal data will be sent to the large language model, please be aware of potential privacy risks.")),3)])):!d.value&&m.value?(l(),b("h3",{key:1,class:be({"pa-2":!0,"bg-grey-200":!x.value,"bg-grey-100":x.value})},i(e(o)("Release to load image")),3)):d.value?(l(),b("h3",Nf,i(e(o)("Loading image...")),1)):u.value?(l(),b("h3",{key:3,class:be({"pa-2":!0,"bg-grey-200":!x.value,"bg-grey-100":x.value})},i(e(o)("AI can make mistakes. Check important info.")),3)):r("",!0)],2),t(ht,{height:"480px",class:be({"cursor-pointer":!d.value&&!u.value&&!m.value}),src:w.value,onClick:A},{placeholder:a(()=>[s("div",{class:be({"w-100 fill-height":!0,"bg-grey-200":!x.value,"bg-grey-100":x.value})},null,2)]),_:1},8,["class","src"])],32)]),_:1}),t(ve,{class:"overflow-y-visible"},{default:a(()=>[s("div",Mf,[t(H,{disabled:d.value||u.value||!F.value,onClick:I},{default:a(()=>[j(i(e(o)("Recognize"))+" ",1),u.value?(l(),p(je,{key:0,indeterminate:"",size:"22",class:"ms-2"})):r("",!0)]),_:1},8,["disabled"]),u.value&&C.value?(l(),p(H,{key:0,color:"secondary",variant:"tonal",disabled:d.value,onClick:z},{default:a(()=>[j(i(e(o)("Cancel Recognition")),1)]),_:1},8,["disabled"])):r("",!0),!u.value||!C.value?(l(),p(H,{key:1,color:"secondary",variant:"tonal",disabled:d.value||u.value,onClick:M},{default:a(()=>[j(i(e(o)("Cancel")),1)]),_:1},8,["disabled"])):r("",!0)],512)]),_:1})]),_:1})]),_:1},8,["persistent","modelValue"]),t(mt,{ref_key:"snackbar",ref:c},null,512),s("input",{ref_key:"imageInput",ref:v,type:"file",style:{display:"none"},accept:e(Ho),onChange:V[2]||(V[2]=_=>$(_))},null,40,Ef)],64))}}),Pf={key:0},Bf={key:1,class:"py-1"},Lf={key:0,class:"title-and-toolbar d-flex align-center text-no-wrap mt-2"},Rf={key:0,class:"ms-1"},zf={key:0,class:"ms-1"},Of={key:0,class:"ms-1"},jf={key:1,class:"ms-1"},qf={key:0,class:"ms-1"},Hf={key:0,class:"ms-1"},Yf={key:1,class:"ms-1"},Wf={key:0,class:"ms-1"},Kf={key:0,class:"ms-1"},Gf={key:1,class:"ms-1"},Jf={key:0,class:"ms-1"},Zf={key:0,class:"ms-1"},Qf=Pe({__name:"ImportTransactionDefineColumnTab",props:{parsedFileData:{},disabled:{type:Boolean}},setup(f,{expose:T}){const n=f,{tt:o,getCurrentNumeralSystemType:g,getAllImportTransactionColumnTypes:c}=Oe(),v=xe("snackbar"),y=L(1),k=L(10),h=L(ss.createEmpty()),d=B(()=>g()),u=B(()=>c()),C=B(()=>[{prependIcon:Po,title:o("Load Data Mapping File"),onClick:O},{prependIcon:Bo,title:o("Save Data Mapping File"),onClick:V}]),F=B(()=>[{name:o("Space"),value:" "},{name:o("Comma"),value:","},{name:o("Semicolon"),value:";"},{name:o("Tab"),value:"	"},{name:o("Vertical Bar"),value:"|"}]),w=B(()=>{if(!(k.value<=10||!x.value||x.value.length<=10))return 400}),m=B(()=>{let _=0;if(n.parsedFileData)for(const W of n.parsedFileData)W.length>_&&(_=W.length);const D=n.parsedFileData&&n.parsedFileData.length>0?n.parsedFileData[0]:[],P=[];P.push({key:"index",value:"index",title:"#",sortable:!0,nowrap:!0});for(let W=0;W<_;W++){let ne=`#${W+1}`;h.value.includeHeader&&D&&D[W]&&(ne=D[W]),P.push({key:W.toString(),value:`column${W+1}`,title:ne,sortable:!0,nowrap:!0})}return P}),x=B(()=>{if(!n.parsedFileData)return;const _=[],D=h.value.includeHeader?1:0;for(let P=D,W=1;P<n.parsedFileData.length;P++,W++){const ne={},de=n.parsedFileData[P];for(const[J,Y]of Da(de))ne.index=W.toString(),ne[`column${Y+1}`]=J;_.push(ne)}return _}),S=B(()=>U(x.value?.length)),N=B(()=>h.value.parseFileAllTransactionTypes(n.parsedFileData)),A=B(()=>h.value.parseFileValidMappedTransactionTypes(n.parsedFileData)),$=B(()=>h.value.parseFileAutoDetectedTimeFormat(n.parsedFileData)),I=B(()=>h.value.parseFileAutoDetectedTimezoneFormat(n.parsedFileData)),z=B(()=>h.value.parseFileAutoDetectedAmountFormat(n.parsedFileData));function M(_){return d.value.formatNumber(_)}function U(_){const D=[];if(!_||_<1)return D.push({value:-1,name:o("All")}),D;for(const P of[5,10,15,20,25,30,50]){if(_<P)break;D.push({value:P,name:M(P)})}return D.push({value:-1,name:o("All")}),D}function X(_){for(const[D,P]of Eu(h.value.dataColumnMapping))if(P===_)return Uu(u.value,parseInt(D))||o("Unspecified");return o("Unspecified")}function Z(){const _=h.value.dataColumnMapping,D=A.value,P=h.value.includeHeader,W=h.value.geoLocationSeparator,ne=h.value.geoLocationOrder,de=h.value.tagSeparator;let J=h.value.timeFormat,Y=h.value.timezoneFormat,ie=h.value.amountFormat,fe,te;if(!_||!Ht(_[Ia.TransactionTime.type])||!Ht(_[Ia.TransactionType.type])||!Ht(_[Ia.Amount.type])){v.value?.showError("Missing transaction time, transaction type, or amount column mapping");return}if(!D||Pu(D)){v.value?.showError("Transaction type mapping is not set");return}if(h.value.timeFormat||(J=$.value),h.value.timezoneFormat||(Y=I.value),h.value.amountFormat||(ie=z.value),ie){const K=Ll.valueOf(ie);K&&(fe=K.decimalSeparator.symbol,te=K.digitGroupingSymbol?.symbol)}if(!J){v.value?.showError("Transaction time format is not set");return}if(!fe){v.value?.showError("Transaction amount format is not set");return}return{includeHeader:P,columnMapping:_,transactionTypeMapping:D,timeFormat:J,timezoneFormat:Y,amountDecimalSeparator:fe,amountDigitGroupingSymbol:te,geoLocationSeparator:W,geoLocationOrder:ne,tagSeparator:de}}function q(){h.value.reset(),y.value=1,k.value=10}function O(){Yo({allowedExtensions:Dt.JSON.contentType}).then(_=>{const D=ss.parseFromJson(_);D?h.value=D:(Xt.error("Failed to parse data mapping file"),v.value?.showError("Data mapping file is invalid"))}).catch(_=>{Xt.error("Failed to open data mapping file",_),v.value?.showError("Data mapping file is invalid")})}function V(){const _=Dt.JSON.formatFileName(o("dataExport.defaultImportDataMappingFileName"));Ml(_,Dt.JSON.createBlob(h.value.toJson()))}return T({menus:C,generateResult:Z,reset:q,loadColumnMappingFile:O,saveColumnMappingFile:V}),(_,D)=>(l(),b(ue,null,[t(wn,{"fixed-header":"","fixed-footer":"",density:"compact","item-value":"index",class:be({"import-transaction-table":!0,disabled:!!f.disabled}),height:w.value,"disable-sort":!0,headers:m.value,items:x.value,"no-data-text":e(o)("No data to import"),"items-per-page":k.value,"onUpdate:itemsPerPage":D[7]||(D[7]=P=>k.value=P),page:y.value,"onUpdate:page":D[8]||(D[8]=P=>y.value=P)},{headers:a(({columns:P})=>[s("tr",null,[(l(!0),b(ue,null,$e(P,W=>(l(),b("th",{class:"text-no-wrap",key:W.key??void 0},[!W.key||W.key==="index"?(l(),b("span",Pf,i(W.title),1)):r("",!0),W.key&&W.key!=="index"?(l(),b("div",Bf,[s("span",null,i(X(parseInt(W.key))),1),D[9]||(D[9]=s("br",null,null,-1)),s("span",null,"("+i(W.title)+")",1),t(nt,{activator:"parent",location:"bottom","max-height":"500"},{default:a(()=>[t(ze,null,{default:a(()=>[(l(!0),b(ue,null,$e(u.value,ne=>(l(),p(le,{key:ne.type,"append-icon":h.value.dataColumnMapping[ne.type]===parseInt(W.key)?e(Ye):void 0,onClick:de=>h.value.toggleDataMappingColumn(parseInt(W.key),ne.type)},{default:a(()=>[t(ot,{class:"cursor-pointer"},{default:a(()=>[j(i(ne.displayName),1)]),_:2},1024)]),_:2},1032,["append-icon","onClick"]))),128))]),_:2},1024)]),_:2},1024)])):r("",!0)]))),128))])]),bottom:a(()=>[f.parsedFileData?(l(),b("div",Lf,[t(H,{color:"secondary",density:"compact",variant:"outlined","append-icon":h.value.includeHeader?e(Ye):e(Tn),onClick:D[0]||(D[0]=P=>h.value.toggleIncludeHeader())},{default:a(()=>[j(i(e(o)("Include Header Line")),1)]),_:1},8,["append-icon"]),t(H,{class:"ms-2",color:"secondary",density:"compact",variant:"outlined",disabled:!h.value||!h.value.isColumnMappingSet(e(Ia).TransactionType)||!N.value},{default:a(()=>[s("span",null,i(e(o)("Transaction Type Mapping")),1),h.value&&h.value.isColumnMappingSet(e(Ia).TransactionType)&&N.value?(l(),b("span",Rf,"("+i(e(Co)(A.value)||e(o)("None"))+")",1)):r("",!0),t(nt,{eager:"",activator:"parent",location:"bottom","max-height":"500","close-on-content-click":!1},{default:a(()=>[t(ze,{class:"pa-0"},{default:a(()=>[t(le,{class:"pa-0"},{default:a(()=>[t(el,{class:"transaction-types-popup-menu"},{default:a(()=>[s("tbody",null,[(l(!0),b(ue,null,$e(N.value,P=>(l(),b("tr",{key:P},[s("td",null,i(P),1),s("td",null,[t(Jn,{class:"transaction-types-toggle",density:"compact",variant:"outlined",mandatory:"force",divided:"",modelValue:h.value.transactionTypeMapping[P],"onUpdate:modelValue":W=>h.value.transactionTypeMapping[P]=W},{default:a(()=>[t(H,{value:void 0},{default:a(()=>[j(i(e(o)("None")),1)]),_:1}),t(H,{value:e(ye).ModifyBalance},{default:a(()=>[j(i(e(o)("Modify Balance")),1)]),_:1},8,["value"]),t(H,{value:e(ye).Income},{default:a(()=>[j(i(e(o)("Income")),1)]),_:1},8,["value"]),t(H,{value:e(ye).Expense},{default:a(()=>[j(i(e(o)("Expense")),1)]),_:1},8,["value"]),t(H,{value:e(ye).Transfer},{default:a(()=>[j(i(e(o)("Transfer")),1)]),_:1},8,["value"])]),_:1},8,["modelValue","onUpdate:modelValue"])])]))),128))])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["disabled"]),t(H,{class:"ms-2",color:"secondary",density:"compact",variant:"outlined",disabled:!h.value||!h.value.isColumnMappingSet(e(Ia).TransactionTime)},{default:a(()=>[s("span",null,i(e(o)("Time Format")),1),h.value&&h.value.isColumnMappingSet(e(Ia).TransactionTime)?(l(),b("span",zf,"("+i(h.value.timeFormat||$.value||e(o)("Unknown"))+")",1)):r("",!0),t(nt,{eager:"",activator:"parent",location:"bottom","max-height":"500"},{default:a(()=>[t(ze,null,{default:a(()=>[t(le,{key:"auto","append-icon":h.value.timeFormat===""?e(Ye):void 0,onClick:D[1]||(D[1]=P=>h.value.timeFormat="")},{default:a(()=>[t(ot,{class:"cursor-pointer"},{default:a(()=>[s("span",null,i(e(o)("Auto detect")),1),$.value?(l(),b("span",Of,"("+i($.value)+")",1)):r("",!0),$.value?r("",!0):(l(),b("span",jf,"("+i(e(o)("Unknown"))+")",1))]),_:1})]),_:1},8,["append-icon"]),(l(!0),b(ue,null,$e(e(Qs).values(),P=>(l(),p(le,{key:P.format,"append-icon":h.value.timeFormat===P.format?e(Ye):void 0,onClick:W=>h.value.timeFormat=P.format},{default:a(()=>[t(ot,{class:"cursor-pointer"},{default:a(()=>[j(i(P.format),1)]),_:2},1024)]),_:2},1032,["append-icon","onClick"]))),128))]),_:1})]),_:1})]),_:1},8,["disabled"]),h.value&&h.value.isColumnMappingSet(e(Ia).TransactionTimezone)?(l(),p(H,{key:0,class:"ms-2",color:"secondary",density:"compact",variant:"outlined"},{default:a(()=>[s("span",null,i(e(o)("Timezone Format")),1),h.value&&h.value.isColumnMappingSet(e(Ia).TransactionTimezone)?(l(),b("span",qf,"("+i(e(mn).valueOf(h.value.timezoneFormat||I.value||"")?.name||e(o)("Unknown"))+")",1)):r("",!0),t(nt,{eager:"",activator:"parent",location:"bottom","max-height":"500"},{default:a(()=>[t(ze,null,{default:a(()=>[t(le,{key:"auto","append-icon":h.value.timezoneFormat===""?e(Ye):void 0,onClick:D[2]||(D[2]=P=>h.value.timezoneFormat="")},{default:a(()=>[t(ot,{class:"cursor-pointer"},{default:a(()=>[s("span",null,i(e(o)("Auto detect")),1),I.value&&e(mn).valueOf(I.value||"")?(l(),b("span",Hf,"("+i(e(mn).valueOf(I.value||"")?.name)+")",1)):r("",!0),!I.value||!e(mn).valueOf(I.value||"")?(l(),b("span",Yf,"("+i(e(o)("Unknown"))+")",1)):r("",!0)]),_:1})]),_:1},8,["append-icon"]),(l(!0),b(ue,null,$e(e(mn).values(),P=>(l(),p(le,{key:P.value,"append-icon":h.value.timezoneFormat===P.value?e(Ye):void 0,onClick:W=>h.value.timezoneFormat=P.value},{default:a(()=>[t(ot,{class:"cursor-pointer"},{default:a(()=>[j(i(P.name),1)]),_:2},1024)]),_:2},1032,["append-icon","onClick"]))),128))]),_:1})]),_:1})]),_:1})):r("",!0),t(H,{class:"ms-2",color:"secondary",density:"compact",variant:"outlined",disabled:!h.value||!h.value.isColumnMappingSet(e(Ia).Amount)},{default:a(()=>[s("span",null,i(e(o)("Amount Format")),1),h.value&&h.value.isColumnMappingSet(e(Ia).Amount)?(l(),b("span",Wf,"("+i(e(Ll).valueOf(h.value.amountFormat||z.value||"")?.format||e(o)("Unknown"))+")",1)):r("",!0),t(nt,{eager:"",activator:"parent",location:"bottom","max-height":"500"},{default:a(()=>[t(ze,null,{default:a(()=>[t(le,{key:"auto","append-icon":h.value.amountFormat===""?e(Ye):void 0,onClick:D[3]||(D[3]=P=>h.value.amountFormat="")},{default:a(()=>[t(ot,{class:"cursor-pointer"},{default:a(()=>[s("span",null,i(e(o)("Auto detect")),1),z.value&&e(Ll).valueOf(z.value||"")?(l(),b("span",Kf,"("+i(e(Ll).valueOf(z.value||"")?.format)+")",1)):r("",!0),!z.value||!e(Ll).valueOf(z.value||"")?(l(),b("span",Gf,"("+i(e(o)("Unknown"))+")",1)):r("",!0)]),_:1})]),_:1},8,["append-icon"]),(l(!0),b(ue,null,$e(e(Ll).values(),P=>(l(),p(le,{key:P.type,"append-icon":h.value.amountFormat===P.type?e(Ye):void 0,onClick:W=>h.value.amountFormat=P.type},{default:a(()=>[t(ot,{class:"cursor-pointer"},{default:a(()=>[j(i(P.format),1)]),_:2},1024)]),_:2},1032,["append-icon","onClick"]))),128))]),_:1})]),_:1})]),_:1},8,["disabled"]),h.value&&h.value.isColumnMappingSet(e(Ia).GeographicLocation)?(l(),p(H,{key:1,class:"ms-2",color:"secondary",density:"compact",variant:"outlined"},{default:a(()=>[s("span",null,i(e(o)("Geographic Location Separator")),1),h.value.geoLocationOrder?(l(),b("span",Jf,"("+i(h.value.formatGeoLocation(e(o)("Latitude"),e(o)("Longitude")))+")",1)):r("",!0),t(nt,{eager:"",activator:"parent",location:"bottom","max-height":"500","close-on-content-click":!1},{default:a(()=>[t(ze,{class:"pa-0"},{default:a(()=>[t(le,{class:"pa-0"},{default:a(()=>[t(el,{class:"transaction-types-popup-menu"},{default:a(()=>[s("tbody",null,[(l(!0),b(ue,null,$e(F.value,P=>(l(),b("tr",{key:P.value},[s("td",null,i(P.name)+" ("+i(P.value)+")",1),s("td",null,[h.value.geoLocationSeparator===P.value?(l(),p(Jn,{key:0,class:"transaction-types-toggle",density:"compact",variant:"outlined",mandatory:"force",divided:"",modelValue:h.value.geoLocationOrder,"onUpdate:modelValue":D[4]||(D[4]=W=>h.value.geoLocationOrder=W)},{default:a(()=>[t(H,{value:"latlon"},{default:a(()=>[j(i(`${e(o)("Latitude")}${P.value}${e(o)("Longitude")}`),1)]),_:2},1024),t(H,{value:"lonlat"},{default:a(()=>[j(i(`${e(o)("Longitude")}${P.value}${e(o)("Latitude")}`),1)]),_:2},1024)]),_:2},1032,["modelValue"])):r("",!0),h.value.geoLocationSeparator!==P.value?(l(),p(ln,{key:1,class:"transaction-types-toggle",density:"compact",variant:"outlined",divided:""},{default:a(()=>[t(H,{onClick:W=>h.value.setGeoLocationFormat(P.value,"latlon")},{default:a(()=>[j(i(`${e(o)("Latitude")}${P.value}${e(o)("Longitude")}`),1)]),_:2},1032,["onClick"]),t(H,{onClick:W=>h.value.setGeoLocationFormat(P.value,"lonlat")},{default:a(()=>[j(i(`${e(o)("Longitude")}${P.value}${e(o)("Latitude")}`),1)]),_:2},1032,["onClick"])]),_:2},1024)):r("",!0)])]))),128))])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):r("",!0),h.value&&h.value.isColumnMappingSet(e(Ia).Tags)?(l(),p(H,{key:2,class:"ms-2",color:"secondary",density:"compact",variant:"outlined"},{default:a(()=>[s("span",null,i(e(o)("Transaction Tags Separator")),1),h.value.tagSeparator?(l(),b("span",Zf,"("+i(h.value.tagSeparator)+")",1)):r("",!0),t(nt,{eager:"",activator:"parent",location:"bottom","max-height":"500"},{default:a(()=>[t(ze,null,{default:a(()=>[(l(!0),b(ue,null,$e(F.value,P=>(l(),p(le,{key:P.value,"append-icon":h.value.tagSeparator===P.value?e(Ye):void 0,onClick:W=>h.value.tagSeparator=P.value},{default:a(()=>[t(ot,{class:"cursor-pointer"},{default:a(()=>[j(i(P.name)+" ("+i(P.value)+") ",1)]),_:2},1024)]),_:2},1032,["append-icon","onClick"]))),128))]),_:1})]),_:1})]),_:1})):r("",!0),t(pt),s("span",null,i(e(o)("Lines Per Page")),1),t(Je,{class:"ms-2",density:"compact","max-width":"100","item-title":"name","item-value":"value",disabled:!!f.disabled,items:S.value,modelValue:k.value,"onUpdate:modelValue":D[5]||(D[5]=P=>k.value=P)},null,8,["disabled","items","modelValue"]),t(lo,{density:"compact",disabled:!!f.disabled,totalPageCount:Math.ceil((x.value?x.value.length:0)/k.value),modelValue:y.value,"onUpdate:modelValue":D[6]||(D[6]=P=>y.value=P)},null,8,["disabled","totalPageCount","modelValue"])])):r("",!0)]),_:1},8,["class","height","headers","items","no-data-text","items-per-page","page"]),t(mt,{ref_key:"snackbar",ref:v},null,512)],64))}}),Xf={class:"d-flex w-100 mb-2"},ey={class:"d-flex w-100 mb-2"},ty={class:"w-100 code-container"},ay=Pe({__name:"ImportTransactionExecuteCustomScriptTab",props:{parsedFileData:{},disabled:{type:Boolean}},setup(f,{expose:T}){const n=f,{tt:o,getCurrentNumeralSystemType:g}=Oe(),c=xe("sandbox"),v=xe("snackbar"),y=L(!1),k=L(""),h=L(void 0),d=L(!1),u=L(""),C=L(10),F=B(()=>g()),w=B(()=>A(h.value?.length)),m=B(()=>`// ${o("sample.importTransactionCustomScript.headerComment")}
/**
 * ${o("sample.importTransactionCustomScript.functionDescription")}
 * @param {array} row - ${o("sample.importTransactionCustomScript.functionParamRowDescription")}
 * @param {number} index - ${o("sample.importTransactionCustomScript.functionParamIndexDescription")}
 * @returns {object|null} ${o("sample.importTransactionCustomScript.functionReturnDescription")}
 */
function parse(row, index) {
    if (index < 1) {
        return null;
    }

    return {
        time: row[0], // ${o("sample.importTransactionCustomScript.fieldTimeDescription")}
        utcOffset: '${kl()}', // ${o("sample.importTransactionCustomScript.fieldUtcOffsetDescription")}
        type: TransactionType.Expense, // ${o("sample.importTransactionCustomScript.fieldTypeDescription")}
        categoryName: row[4], // ${o("sample.importTransactionCustomScript.fieldCategoryNameDescription")}
        sourceAccountName: row[5], // ${o("sample.importTransactionCustomScript.fieldSourceAccountNameDescription")}
        destinationAccountName: row[8], // ${o("sample.importTransactionCustomScript.fieldDestinationAccountNameDescription")}
        sourceAmount: row[7], // ${o("sample.importTransactionCustomScript.fieldSourceAmountDescription")}
        destinationAmount: row[10], // ${o("sample.importTransactionCustomScript.fieldDestinationAmountDescription")}
        geoLocation: undefined, // ${o("sample.importTransactionCustomScript.fieldGeoLocationDescription")}
        tagNames: '', // ${o("sample.importTransactionCustomScript.fieldTagNamesDescription")}
        description: row[13] // ${o("sample.importTransactionCustomScript.fieldCommentDescription")}
    };
}`),x=B(()=>{if(d.value)return o("Executing Script...");if(u.value)return u.value;if(h.value){const q=h.value.slice(0,C.value);return JSON.stringify(q,null,2)}else return o("No Preview Result")}),S=B(()=>[{prependIcon:Po,title:o("Load Script File"),onClick:U},{prependIcon:Bo,title:o("Save Script File"),onClick:X}]);function N(q){return F.value.formatNumber(q)}function A(q){const O=[];if(!q||q<1)return O.push({value:-1,name:o("All")}),O;for(const V of[10,50,100]){if(q<V)break;O.push({value:V,name:N(V)})}return O.push({value:-1,name:o("All")}),O}function $(){y.value=!1,c.value&&(c.value.src="about:blank",c.value.srcdoc=`
            <script>
                window.TransactionType = {
                    Income: 'Income',
                    Expense: 'Expense',
                    Transfer: 'Transfer'
                };

                window.addEventListener('message', function (event) {
                    try {
                        const data = JSON.parse(event.data);
                        const parsedFileData = data.parsedFileData;
                        eval(data.code);

                        if (window.parse) {
                            const result = [];

                            for (let i = 0; i < parsedFileData.length; i++) {
                                try {
                                    const row = parsedFileData[i];
                                    const transaction = window.parse(row, i);

                                    if (transaction) {
                                        result.push(transaction);
                                    }
                                } catch (error) {
                                    window.parent.postMessage({ error: error.message }, '*');
                                    return;
                                }
                            }

                            window.parent.postMessage({ result: JSON.stringify(result) }, '*');
                        } else {
                            window.parent.postMessage({ knownError: 'No parse function defined' }, '*');
                        }
                    } catch (error) {
                        window.parent.postMessage({ error: error.message }, '*');
                    }
                });
            <\/script>
        `,c.value.onload=()=>{y.value=!0})}function I(){if(!c.value||n.disabled||d.value)return;d.value=!0;const q={parsedFileData:n.parsedFileData||[],code:k.value+`

;if (typeof parse !== 'undefined') { window.parse = parse; }`};c.value?.contentWindow?.postMessage(JSON.stringify(q),"*")}function z(){if(!h.value){v.value?.showError("Please execute the custom script first");return}const q={transactions:h.value};return JSON.stringify(q)}function M(){k.value=m.value,h.value=void 0,u.value="",d.value=!1,C.value=10}function U(){Yo({allowedExtensions:Dt.JS.contentType}).then(q=>{k.value=q}).catch(q=>{Xt.error("Failed to load script file",q),v.value?.showError("Cannot load script file")})}function X(){const q=Dt.JS.formatFileName(o("dataExport.defaultImportHandlingScript"));Ml(q,Dt.JS.createBlob(k.value))}function Z(q){if(q.source!==c.value?.contentWindow)return;d.value=!1;const O=q.data;if(O.knownError)v.value?.showError(O.knownError),h.value=void 0,u.value=o(O.knownError);else if(O.error)Xt.error("Failed to execute custom script: "+O.error),v.value?.showError("Failed to execute custom script"),h.value=void 0,u.value=O.error;else if(O.result){const V=JSON.parse(O.result),_=[];for(const D of V){const P={time:ga(D.time)?String(D.time):"",utcOffset:ga(D.utcOffset)?String(D.utcOffset):"",type:ga(D.type)?String(D.type):"",categoryName:ga(D.categoryName)&&D.categoryName!==""?String(D.categoryName):void 0,sourceAccountName:ga(D.sourceAccountName)&&D.sourceAccountName!==""?String(D.sourceAccountName):void 0,destinationAccountName:ga(D.destinationAccountName)&&D.destinationAccountName!==""?String(D.destinationAccountName):void 0,sourceAmount:ga(D.sourceAmount)?String(D.sourceAmount):"",destinationAmount:ga(D.destinationAmount)&&D.destinationAmount!==""?String(D.destinationAmount):void 0,geoLocation:ga(D.geoLocation)&&D.geoLocation?String(D.geoLocation):void 0,tagNames:ga(D.tagNames)&&D.tagNames?String(D.tagNames):void 0,comment:ga(D.description)&&D.description?String(D.description):void 0};_.push(P)}h.value=_,u.value=""}$()}return xs(()=>{k.value=m.value,$(),window.addEventListener("message",Z)}),Vi(()=>{window.removeEventListener("message",Z)}),T({menus:S,generateResult:z,reset:M}),(q,O)=>(l(),b(ue,null,[t(Ae,null,{default:a(()=>[t(R,{cols:"12",md:"6"},{default:a(()=>[s("div",Xf,[t(H,{density:"compact",variant:"tonal","prepend-icon":e(er),disabled:f.disabled||!y.value||d.value,loading:d.value,onClick:O[0]||(O[0]=V=>I())},{loader:a(()=>[t(je,{indeterminate:"",size:"18",class:"me-1"}),s("span",null,i(e(o)("Execute Custom Script")),1)]),default:a(()=>[s("span",null,i(e(o)("Execute Custom Script")),1)]),_:1},8,["prepend-icon","disabled","loading"])]),t(La,{class:"w-100",style:{height:"360px"},readonly:f.disabled,modelValue:k.value,"onUpdate:modelValue":O[1]||(O[1]=V=>k.value=V)},null,8,["readonly","modelValue"])]),_:1}),t(R,{cols:"12",md:"6"},{default:a(()=>[s("div",ey,[t(H,{density:"compact",color:"default",variant:"text",disabled:f.disabled||!y.value||d.value||!h.value},{default:a(()=>[s("span",null,i(e(o)("format.misc.previewCount",{count:C.value>0?N(C.value):e(o)("All")})),1),t(nt,{activator:"parent"},{default:a(()=>[t(ze,null,{default:a(()=>[(l(!0),b(ue,null,$e(w.value,V=>(l(),p(le,{key:V.value,title:V.name,onClick:_=>C.value=V.value},null,8,["title","onClick"]))),128))]),_:1})]),_:1})]),_:1},8,["disabled"])]),s("div",ty,[t(La,{class:"w-100 always-cursor-text",style:{height:"360px"},readonly:!0,color:u.value?"error":void 0,value:x.value},null,8,["color","value"])])]),_:1})]),_:1}),s("iframe",{id:"sandbox",ref_key:"sandbox",ref:c,sandbox:"allow-scripts",style:{display:"none"}},null,512),t(mt,{ref_key:"snackbar",ref:v},null,512)],64))}}),ly={class:"d-flex align-center justify-center"},ny={key:0,class:"text-h4"},oy={key:1,class:"text-h4"},sy={key:2,class:"text-h4"},iy={key:3,class:"text-h4"},ry={key:4,class:"text-h4"},uy={key:5,class:"text-h4"},dy={key:6,class:"text-h4"},cy={key:7,class:"text-h4"},my={key:8,class:"text-h4"},py={key:9,class:"text-h4"},vy={key:10,class:"text-h4"},fy={key:11,class:"text-h4"},yy={class:"d-flex align-center"},gy={class:"w-100 d-flex justify-center gap-4"},hy=Pe({__name:"BatchReplaceDialog",setup(f,{expose:T}){const{tt:n,getCategorizedAccountsWithDisplayBalance:o}=Oe(),g=Ha(),c=_a(),v=Ta(),y=fl(),k=xe("snackbar"),h=L(!1),d=L(!1),u=L(""),C=L(""),F=L([]),w=L([]),m=L(void 0),x=L(void 0),S=L(!1);let N=null,A=null;const $=B(()=>g.appSettings.showAccountBalance),I=B(()=>c.allPlainAccounts),z=B(()=>c.allVisiblePlainAccounts),M=B(()=>o(z.value,$.value)),U=B(()=>v.allTransactionCategories),X=B(()=>y.allTransactionTags),Z=B(()=>v.hasAvailableExpenseCategories),q=B(()=>v.hasAvailableIncomeCategories),O=B(()=>v.hasAvailableTransferCategories);function V(ne){return ne?xl.findAccountNameById(I.value,ne)||"":n("None")}function _(ne){return u.value=ne.mode,C.value=ne.type,m.value=void 0,u.value==="replaceInvalidItems"?F.value=ne.invalidItems:F.value=void 0,C.value==="tag"&&u.value==="batchReplace"?w.value=ne.allSourceTagItems:w.value=void 0,x.value=void 0,S.value=!1,h.value=!0,new Promise((de,J)=>{N=de,A=J})}function D(){C.value==="expenseCategory"||C.value==="incomeCategory"||C.value==="transferCategory"?(d.value=!0,v.loadAllCategories({force:!0}).then(()=>{d.value=!1}).catch(ne=>{d.value=!1,ne.processed||k.value?.showError(ne)})):C.value==="account"||C.value==="destinationAccount"?(d.value=!0,c.loadAllAccounts({force:!0}).then(()=>{d.value=!1}).catch(ne=>{d.value=!1,ne.processed||k.value?.showError(ne)})):C.value==="tag"&&(d.value=!0,y.loadAllTags({force:!0}).then(()=>{d.value=!1}).catch(ne=>{d.value=!1,ne.processed||k.value?.showError(ne)}))}function P(){let ne=x.value;C.value==="tag"&&S.value&&(ne=void 0),u.value==="batchReplace"&&C.value!=="tag"?N?.({targetItem:ne}):u.value==="batchReplace"&&C.value==="tag"?N?.({sourceItem:m.value,targetItem:ne}):u.value==="batchAdd"?N?.({targetItem:ne}):u.value==="replaceInvalidItems"&&N?.({sourceItem:m.value,targetItem:ne}),h.value=!1}function W(){A?.(),h.value=!1}return Ft(S,ne=>{ne&&(x.value=void 0)}),T({open:_}),(ne,de)=>{const J=Ie("two-column-select");return l(),b(ue,null,[t(Tt,{width:"600",persistent:d.value||u.value==="replaceInvalidItems"&&!!m.value||!!x.value,modelValue:h.value,"onUpdate:modelValue":de[10]||(de[10]=Y=>h.value=Y)},{default:a(()=>[t(Ee,{class:"pa-2 pa-sm-4 pa-md-4"},{title:a(()=>[s("div",ly,[u.value==="batchReplace"&&C.value==="expenseCategory"?(l(),b("h4",ny,i(e(n)("Batch Replace Selected Expense Categories")),1)):r("",!0),u.value==="batchReplace"&&C.value==="incomeCategory"?(l(),b("h4",oy,i(e(n)("Batch Replace Selected Income Categories")),1)):r("",!0),u.value==="batchReplace"&&C.value==="transferCategory"?(l(),b("h4",sy,i(e(n)("Batch Replace Selected Transfer Categories")),1)):r("",!0),u.value==="batchReplace"&&C.value==="account"?(l(),b("h4",iy,i(e(n)("Batch Replace Selected Accounts")),1)):r("",!0),u.value==="batchReplace"&&C.value==="destinationAccount"?(l(),b("h4",ry,i(e(n)("Batch Replace Selected Destination Accounts")),1)):r("",!0),u.value==="batchReplace"&&C.value==="tag"?(l(),b("h4",uy,i(e(n)("Batch Replace Selected Transaction Tags")),1)):r("",!0),u.value==="batchAdd"&&C.value==="tag"?(l(),b("h4",dy,i(e(n)("Batch Add Transaction Tags")),1)):r("",!0),u.value==="replaceInvalidItems"&&C.value==="expenseCategory"?(l(),b("h4",cy,i(e(n)("Replace Invalid Expense Categories")),1)):r("",!0),u.value==="replaceInvalidItems"&&C.value==="incomeCategory"?(l(),b("h4",my,i(e(n)("Replace Invalid Income Categories")),1)):r("",!0),u.value==="replaceInvalidItems"&&C.value==="transferCategory"?(l(),b("h4",py,i(e(n)("Replace Invalid Transfer Categories")),1)):r("",!0),u.value==="replaceInvalidItems"&&C.value==="account"?(l(),b("h4",vy,i(e(n)("Replace Invalid Accounts")),1)):r("",!0),u.value==="replaceInvalidItems"&&C.value==="tag"?(l(),b("h4",fy,i(e(n)("Replace Invalid Transaction Tags")),1)):r("",!0),t(H,{density:"compact",color:"default",variant:"text",size:"24",class:"ms-2",icon:!0,disabled:d.value,loading:d.value,onClick:D},{loader:a(()=>[t(je,{indeterminate:"",size:"20"})]),default:a(()=>[t(se,{icon:e(wa),size:"24"},null,8,["icon"]),t(yt,{activator:"parent"},{default:a(()=>[j(i(e(n)("Refresh")),1)]),_:1})]),_:1},8,["disabled","loading"])])]),default:a(()=>[C.value==="expenseCategory"||C.value==="incomeCategory"||C.value==="transferCategory"?(l(),p(ve,{key:0,class:"my-md-4 w-100 d-flex justify-center"},{default:a(()=>[t(Ae,null,{default:a(()=>[u.value==="replaceInvalidItems"?(l(),p(R,{key:0,cols:"12"},{default:a(()=>[t(sa,{"item-title":"name","item-value":"value","persistent-placeholder":"",disabled:d.value,label:e(n)("Invalid Category"),placeholder:e(n)("Invalid Category"),items:F.value,"no-data-text":e(n)("No available category"),modelValue:m.value,"onUpdate:modelValue":de[0]||(de[0]=Y=>m.value=Y)},null,8,["disabled","label","placeholder","items","no-data-text","modelValue"])]),_:1})):r("",!0),t(R,{cols:"12"},{default:a(()=>[C.value==="expenseCategory"?(l(),p(J,{key:0,"primary-key-field":"id","primary-value-field":"id","primary-title-field":"name","primary-icon-field":"icon","primary-icon-type":"category","primary-color-field":"color","primary-hidden-field":"hidden","primary-sub-items-field":"subCategories","secondary-key-field":"id","secondary-value-field":"id","secondary-title-field":"name","secondary-icon-field":"icon","secondary-icon-type":"category","secondary-color-field":"color","secondary-hidden-field":"hidden",disabled:d.value||!Z.value,"enable-filter":!0,"filter-placeholder":e(n)("Find category"),"filter-no-items-text":e(n)("No available category"),"show-selection-primary-text":!0,"custom-selection-primary-text":e(Ra)(x.value,U.value[e(tt).Expense]),"custom-selection-secondary-text":e(ba)(x.value,U.value[e(tt).Expense]),label:e(n)("Target Category"),placeholder:e(n)("Target Category"),items:U.value[e(tt).Expense],modelValue:x.value,"onUpdate:modelValue":de[1]||(de[1]=Y=>x.value=Y)},null,8,["disabled","filter-placeholder","filter-no-items-text","custom-selection-primary-text","custom-selection-secondary-text","label","placeholder","items","modelValue"])):r("",!0),C.value==="incomeCategory"?(l(),p(J,{key:1,"primary-key-field":"id","primary-value-field":"id","primary-title-field":"name","primary-icon-field":"icon","primary-icon-type":"category","primary-color-field":"color","primary-hidden-field":"hidden","primary-sub-items-field":"subCategories","secondary-key-field":"id","secondary-value-field":"id","secondary-title-field":"name","secondary-icon-field":"icon","secondary-icon-type":"category","secondary-color-field":"color","secondary-hidden-field":"hidden",disabled:d.value||!q.value,"enable-filter":!0,"filter-placeholder":e(n)("Find category"),"filter-no-items-text":e(n)("No available category"),"show-selection-primary-text":!0,"custom-selection-primary-text":e(Ra)(x.value,U.value[e(tt).Income]),"custom-selection-secondary-text":e(ba)(x.value,U.value[e(tt).Income]),label:e(n)("Target Category"),placeholder:e(n)("Target Category"),items:U.value[e(tt).Income],modelValue:x.value,"onUpdate:modelValue":de[2]||(de[2]=Y=>x.value=Y)},null,8,["disabled","filter-placeholder","filter-no-items-text","custom-selection-primary-text","custom-selection-secondary-text","label","placeholder","items","modelValue"])):r("",!0),C.value==="transferCategory"?(l(),p(J,{key:2,"primary-key-field":"id","primary-value-field":"id","primary-title-field":"name","primary-icon-field":"icon","primary-icon-type":"category","primary-color-field":"color","primary-hidden-field":"hidden","primary-sub-items-field":"subCategories","secondary-key-field":"id","secondary-value-field":"id","secondary-title-field":"name","secondary-icon-field":"icon","secondary-icon-type":"category","secondary-color-field":"color","secondary-hidden-field":"hidden",disabled:d.value||!O.value,"enable-filter":!0,"filter-placeholder":e(n)("Find category"),"filter-no-items-text":e(n)("No available category"),"show-selection-primary-text":!0,"custom-selection-primary-text":e(Ra)(x.value,U.value[e(tt).Transfer]),"custom-selection-secondary-text":e(ba)(x.value,U.value[e(tt).Transfer]),label:e(n)("Target Category"),placeholder:e(n)("Target Category"),items:U.value[e(tt).Transfer],modelValue:x.value,"onUpdate:modelValue":de[3]||(de[3]=Y=>x.value=Y)},null,8,["disabled","filter-placeholder","filter-no-items-text","custom-selection-primary-text","custom-selection-secondary-text","label","placeholder","items","modelValue"])):r("",!0)]),_:1})]),_:1})]),_:1})):r("",!0),C.value==="account"||C.value==="destinationAccount"?(l(),p(ve,{key:1,class:"my-md-4 w-100 d-flex justify-center"},{default:a(()=>[t(Ae,null,{default:a(()=>[u.value==="replaceInvalidItems"?(l(),p(R,{key:0,cols:"12"},{default:a(()=>[t(sa,{"item-title":"name","item-value":"value","persistent-placeholder":"",disabled:d.value,label:e(n)("Invalid Account"),placeholder:e(n)("Invalid Account"),items:F.value,"no-data-text":e(n)("No available account"),modelValue:m.value,"onUpdate:modelValue":de[4]||(de[4]=Y=>m.value=Y)},null,8,["disabled","label","placeholder","items","no-data-text","modelValue"])]),_:1})):r("",!0),t(R,{cols:"12"},{default:a(()=>[t(J,{"primary-key-field":"id","primary-value-field":"category","primary-title-field":"name","primary-footer-field":"displayBalance","primary-icon-field":"icon","primary-icon-type":"account","primary-sub-items-field":"accounts","primary-title-i18n":!0,"secondary-key-field":"id","secondary-value-field":"id","secondary-title-field":"name","secondary-footer-field":"displayBalance","secondary-icon-field":"icon","secondary-icon-type":"account","secondary-color-field":"color",disabled:d.value||!z.value.length,"enable-filter":!0,"filter-placeholder":e(n)("Find account"),"filter-no-items-text":e(n)("No available account"),"custom-selection-primary-text":V(x.value),label:e(n)("Target Account"),placeholder:e(n)("Target Account"),items:M.value,modelValue:x.value,"onUpdate:modelValue":de[5]||(de[5]=Y=>x.value=Y)},null,8,["disabled","filter-placeholder","filter-no-items-text","custom-selection-primary-text","label","placeholder","items","modelValue"])]),_:1})]),_:1})]),_:1})):r("",!0),C.value==="tag"?(l(),p(ve,{key:2,class:"my-md-4 w-100 d-flex justify-center"},{default:a(()=>[t(Ae,null,{default:a(()=>[u.value==="batchReplace"?(l(),p(R,{key:0,cols:"12"},{default:a(()=>[t(sa,{"item-title":"name","item-value":"value","persistent-placeholder":"",disabled:d.value,label:e(n)("Source Value"),placeholder:e(n)("Source Value"),items:w.value,"no-data-text":e(n)("No available tag"),modelValue:m.value,"onUpdate:modelValue":de[6]||(de[6]=Y=>m.value=Y)},null,8,["disabled","label","placeholder","items","no-data-text","modelValue"])]),_:1})):r("",!0),u.value==="replaceInvalidItems"?(l(),p(R,{key:1,cols:"12"},{default:a(()=>[t(sa,{"item-title":"name","item-value":"value","persistent-placeholder":"",disabled:d.value,label:e(n)("Invalid Tag"),placeholder:e(n)("Invalid Tag"),items:F.value,"no-data-text":e(n)("No available tag"),modelValue:m.value,"onUpdate:modelValue":de[7]||(de[7]=Y=>m.value=Y)},null,8,["disabled","label","placeholder","items","no-data-text","modelValue"])]),_:1})):r("",!0),t(R,{cols:"12"},{default:a(()=>[t(sa,{"item-title":"name","item-value":"id","persistent-placeholder":"",chips:"",disabled:d.value||S.value,label:e(n)("Target Tag"),placeholder:e(n)("Target Tag"),items:X.value,"no-data-text":e(n)("No available tag"),modelValue:x.value,"onUpdate:modelValue":de[8]||(de[8]=Y=>x.value=Y)},{chip:a(({props:Y,item:ie})=>[t(oa,Ct({"prepend-icon":e(la),text:ie.title},Y),null,16,["prepend-icon","text"])]),item:a(({props:Y,item:ie})=>[ie.raw.hidden?r("",!0):(l(),p(le,Ct({key:0,value:ie.value},Y),{title:a(()=>[t(ot,null,{default:a(()=>[s("div",yy,[t(se,{size:"20",start:"",icon:e(la)},null,8,["icon"]),s("span",null,i(ie.title),1)])]),_:2},1024)]),_:2},1040,["value"]))]),_:1},8,["disabled","label","placeholder","items","no-data-text","modelValue"])]),_:1}),u.value==="batchReplace"||u.value==="replaceInvalidItems"?(l(),p(R,{key:2,cols:"12",class:"pt-0"},{default:a(()=>[t(Qa,{disabled:d.value,label:e(n)("Remove Tag"),modelValue:S.value,"onUpdate:modelValue":de[9]||(de[9]=Y=>S.value=Y)},null,8,["disabled","label","modelValue"])]),_:1})):r("",!0)]),_:1})]),_:1})):r("",!0),t(ve,{class:"overflow-y-visible"},{default:a(()=>[s("div",gy,[t(H,{disabled:d.value||(u.value==="replaceInvalidItems"||u.value==="batchReplace"&&C.value==="tag")&&!m.value&&m.value!==""||!x.value&&x.value!==""&&!S.value,onClick:P},{default:a(()=>[j(i(e(n)("OK")),1)]),_:1},8,["disabled"]),t(H,{color:"secondary",variant:"tonal",disabled:d.value,onClick:W},{default:a(()=>[j(i(e(n)("Cancel")),1)]),_:1},8,["disabled"])])]),_:1})]),_:1})]),_:1},8,["persistent","modelValue"]),t(mt,{ref_key:"snackbar",ref:k},null,512)],64)}}}),by={class:"d-flex align-center justify-center"},ky={class:"d-flex w-100 align-center justify-center"},_y={class:"text-h4"},Ty={class:"text-left"},xy={class:"text-left"},Cy={class:"text-left"},wy={class:"text-right"},Ay={class:"text-left"},Iy={class:"text-left"},Sy={class:"text-left"},Vy={class:"text-right"},$y={style:{"background-color":"rgb(var(--v-theme-surface))"}},Dy={class:"d-flex align-center"},Fy={class:"text-right"},Ny={class:"w-100 d-flex justify-center gap-4"},My=Pe({__name:"BatchReplaceAllTypesDialog",setup(f,{expose:T}){const{tt:n,getCategorizedAccountsWithDisplayBalance:o}=Oe(),g=Ha(),c=_a(),v=Ta(),y=fl(),k=xe("snackbar"),h=L(!1),d=L(!1),u=L([]),C=L(mo.of("expenseCategory","","")),F=L([]),w=L([]),m=L([]),x=L([]),S=L([]);let N=null,A=null;const $=B(()=>g.appSettings.showAccountBalance),I=B(()=>c.allPlainAccounts),z=B(()=>c.allVisiblePlainAccounts),M=B(()=>o(z.value,$.value)),U=B(()=>v.allTransactionCategories),X=B(()=>y.allTransactionTags),Z=B(()=>v.hasAvailableExpenseCategories),q=B(()=>v.hasAvailableIncomeCategories),O=B(()=>v.hasAvailableTransferCategories),V=B(()=>{switch(C.value.dataType){case"expenseCategory":return F.value;case"incomeCategory":return w.value;case"transferCategory":return m.value;case"account":return x.value;case"tag":return S.value;default:return[]}}),_=B(()=>{switch(C.value.dataType){case"expenseCategory":return n("No available category");case"incomeCategory":return n("No available category");case"transferCategory":return n("No available category");case"account":return n("No available account");case"tag":return n("No available tag");default:return""}});function D(me){switch(me.dataType){case"expenseCategory":return n("Expense Category");case"incomeCategory":return n("Income Category");case"transferCategory":return n("Transfer Category");case"account":return n("Account");case"tag":return n("Transaction Tag");default:return""}}function P(me){switch(me.dataType){case"expenseCategory":return ba(me.targetId,U.value[tt.Expense])||"";case"incomeCategory":return ba(me.targetId,U.value[tt.Income])||"";case"transferCategory":return ba(me.targetId,U.value[tt.Transfer])||"";case"account":return W(me.targetId);case"tag":for(const Ne of X.value)if(Ne.id===me.targetId)return Ne.name;return"";default:return""}}function W(me){return me?xl.findAccountNameById(I.value,me)||"":n("None")}function ne(me){return u.value=[],C.value=mo.of("expenseCategory","",""),F.value=me.expenseCategoryNames,w.value=me.incomeCategoryNames,m.value=me.transferCategoryNames,x.value=me.accountNames,S.value=me.tagNames,h.value=!0,new Promise((Ne,et)=>{N=Ne,A=et})}function de(){d.value=!0,Promise.all([c.loadAllAccounts({force:!0}),v.loadAllCategories({force:!0}),y.loadAllTags({force:!0})]).then(()=>{d.value=!1}).catch(me=>{d.value=!1,me.processed||k.value?.showError(me)})}function J(){Yo({allowedExtensions:Dt.JSON.contentType}).then(me=>{const Ne=is.parseFromJson(me);Ne?u.value=Ne.getRules():(Xt.error("Failed to parse replace rule file"),k.value?.showError("Replace rule file is invalid"))}).catch(me=>{Xt.error("Failed to open replace rule file",me),k.value?.showError("Replace rule file is invalid")})}function Y(){const me=Dt.JSON.formatFileName(n("dataExport.defaultImportReplaceRuleFileName"));Ml(me,Dt.JSON.createBlob(is.of(u.value).toJson()))}function ie(me){u.value.splice(me,1)}function fe(){!C.value.dataType||!C.value.targetId||(u.value.push(C.value),C.value=mo.of("expenseCategory","",""))}function te(){N?.({rules:u.value}),h.value=!1}function K(){A?.(),h.value=!1}return T({open:ne}),(me,Ne)=>{const et=Ie("two-column-select");return l(),b(ue,null,[t(Tt,{width:"1000",persistent:d.value||!!u.value.length||!!C.value.targetId,modelValue:h.value,"onUpdate:modelValue":Ne[11]||(Ne[11]=Me=>h.value=Me)},{default:a(()=>[t(Ee,{class:"pa-2 pa-sm-4 pa-md-4"},{title:a(()=>[s("div",by,[s("div",ky,[s("h4",_y,i(e(n)("Batch Replace Categories / Accounts / Tags")),1),t(H,{density:"compact",color:"default",variant:"text",size:"24",class:"ms-2",icon:!0,disabled:d.value,loading:d.value,onClick:de},{loader:a(()=>[t(je,{indeterminate:"",size:"20"})]),default:a(()=>[t(se,{icon:e(wa),size:"24"},null,8,["icon"]),t(yt,{activator:"parent"},{default:a(()=>[j(i(e(n)("Refresh")),1)]),_:1})]),_:1},8,["disabled","loading"])]),t(H,{density:"comfortable",color:"default",variant:"text",class:"ms-2",icon:!0,disabled:d.value},{default:a(()=>[t(se,{icon:e(Jt)},null,8,["icon"]),t(nt,{activator:"parent","max-height":"500"},{default:a(()=>[t(ze,null,{default:a(()=>[t(le,{"prepend-icon":e(Po),title:e(n)("Load Replace Rule File"),onClick:Ne[0]||(Ne[0]=Me=>J())},null,8,["prepend-icon","title"]),t(le,{"prepend-icon":e(Bo),title:e(n)("Save Replace Rule File"),onClick:Ne[1]||(Ne[1]=Me=>Y())},null,8,["prepend-icon","title"])]),_:1})]),_:1})]),_:1},8,["disabled"])])]),default:a(()=>[t(ve,{class:"my-md-4 w-100 d-flex justify-center"},{default:a(()=>[t(Ae,null,{default:a(()=>[t(R,{cols:"12"},{default:a(()=>[t(el,{"fixed-header":"","fixed-footer":"",height:"400",striped:"even"},{default:a(()=>[s("thead",null,[s("tr",null,[s("th",Ty,i(e(n)("Type")),1),s("th",xy,i(e(n)("Source Value")),1),s("th",Cy,i(e(n)("Target Value")),1),s("th",wy,i(e(n)("Operation")),1)])]),s("tbody",null,[(l(!0),b(ue,null,$e(u.value,(Me,Ve)=>(l(),b("tr",{key:Ve},[s("td",Ay,i(D(Me)),1),s("td",Iy,i(Me.sourceValue||e(n)("(Empty)")),1),s("td",Sy,i(P(Me)),1),s("td",Vy,[t(H,{density:"comfortable",variant:"tonal",color:"error",disabled:d.value,onClick:bt=>ie(Ve)},{default:a(()=>[j(i(e(n)("Delete")),1)]),_:1},8,["disabled","onClick"])])]))),128))]),s("tfoot",null,[s("tr",$y,[s("td",null,[t(Je,{class:"w-100",density:"compact",variant:"outlined","item-title":"name","item-value":"value",disabled:d.value,items:[{value:"expenseCategory",name:e(n)("Expense Category")},{value:"incomeCategory",name:e(n)("Income Category")},{value:"transferCategory",name:e(n)("Transfer Category")},{value:"account",name:e(n)("Account")},{value:"tag",name:e(n)("Transaction Tag")}],modelValue:C.value.dataType,"onUpdate:modelValue":[Ne[2]||(Ne[2]=Me=>C.value.dataType=Me),Ne[3]||(Ne[3]=Me=>{C.value.sourceValue="",C.value.targetId=""})]},null,8,["disabled","items","modelValue"])]),s("td",null,[t(sa,{class:"w-100",density:"compact",variant:"outlined","item-title":"name","item-value":"value","persistent-placeholder":"",disabled:d.value,items:V.value,"no-data-text":_.value,modelValue:C.value.sourceValue,"onUpdate:modelValue":Ne[4]||(Ne[4]=Me=>C.value.sourceValue=Me)},null,8,["disabled","items","no-data-text","modelValue"])]),s("td",null,[C.value.dataType==="expenseCategory"?(l(),p(et,{key:0,density:"compact",variant:"outlined","primary-key-field":"id","primary-value-field":"id","primary-title-field":"name","primary-icon-field":"icon","primary-icon-type":"category","primary-color-field":"color","primary-hidden-field":"hidden","primary-sub-items-field":"subCategories","secondary-key-field":"id","secondary-value-field":"id","secondary-title-field":"name","secondary-icon-field":"icon","secondary-icon-type":"category","secondary-color-field":"color","secondary-hidden-field":"hidden",disabled:d.value||!Z.value,"enable-filter":!0,"filter-placeholder":e(n)("Find category"),"filter-no-items-text":e(n)("No available category"),"show-selection-primary-text":!0,"custom-selection-primary-text":e(Ra)(C.value.targetId,U.value[e(tt).Expense]),"custom-selection-secondary-text":e(ba)(C.value.targetId,U.value[e(tt).Expense]),items:U.value[e(tt).Expense],modelValue:C.value.targetId,"onUpdate:modelValue":Ne[5]||(Ne[5]=Me=>C.value.targetId=Me)},null,8,["disabled","filter-placeholder","filter-no-items-text","custom-selection-primary-text","custom-selection-secondary-text","items","modelValue"])):r("",!0),C.value.dataType==="incomeCategory"?(l(),p(et,{key:1,density:"compact",variant:"outlined","primary-key-field":"id","primary-value-field":"id","primary-title-field":"name","primary-icon-field":"icon","primary-icon-type":"category","primary-color-field":"color","primary-hidden-field":"hidden","primary-sub-items-field":"subCategories","secondary-key-field":"id","secondary-value-field":"id","secondary-title-field":"name","secondary-icon-field":"icon","secondary-icon-type":"category","secondary-color-field":"color","secondary-hidden-field":"hidden",disabled:d.value||!q.value,"enable-filter":!0,"filter-placeholder":e(n)("Find category"),"filter-no-items-text":e(n)("No available category"),"show-selection-primary-text":!0,"custom-selection-primary-text":e(Ra)(C.value.targetId,U.value[e(tt).Income]),"custom-selection-secondary-text":e(ba)(C.value.targetId,U.value[e(tt).Income]),items:U.value[e(tt).Income],modelValue:C.value.targetId,"onUpdate:modelValue":Ne[6]||(Ne[6]=Me=>C.value.targetId=Me)},null,8,["disabled","filter-placeholder","filter-no-items-text","custom-selection-primary-text","custom-selection-secondary-text","items","modelValue"])):r("",!0),C.value.dataType==="transferCategory"?(l(),p(et,{key:2,density:"compact",variant:"outlined","primary-key-field":"id","primary-value-field":"id","primary-title-field":"name","primary-icon-field":"icon","primary-icon-type":"category","primary-color-field":"color","primary-hidden-field":"hidden","primary-sub-items-field":"subCategories","secondary-key-field":"id","secondary-value-field":"id","secondary-title-field":"name","secondary-icon-field":"icon","secondary-icon-type":"category","secondary-color-field":"color","secondary-hidden-field":"hidden",disabled:d.value||!O.value,"enable-filter":!0,"filter-placeholder":e(n)("Find category"),"filter-no-items-text":e(n)("No available category"),"show-selection-primary-text":!0,"custom-selection-primary-text":e(Ra)(C.value.targetId,U.value[e(tt).Transfer]),"custom-selection-secondary-text":e(ba)(C.value.targetId,U.value[e(tt).Transfer]),items:U.value[e(tt).Transfer],modelValue:C.value.targetId,"onUpdate:modelValue":Ne[7]||(Ne[7]=Me=>C.value.targetId=Me)},null,8,["disabled","filter-placeholder","filter-no-items-text","custom-selection-primary-text","custom-selection-secondary-text","items","modelValue"])):r("",!0),C.value.dataType==="account"?(l(),p(et,{key:3,density:"compact",variant:"outlined","primary-key-field":"id","primary-value-field":"category","primary-title-field":"name","primary-footer-field":"displayBalance","primary-icon-field":"icon","primary-icon-type":"account","primary-sub-items-field":"accounts","primary-title-i18n":!0,"secondary-key-field":"id","secondary-value-field":"id","secondary-title-field":"name","secondary-footer-field":"displayBalance","secondary-icon-field":"icon","secondary-icon-type":"account","secondary-color-field":"color",disabled:d.value||!z.value.length,"enable-filter":!0,"filter-placeholder":e(n)("Find account"),"filter-no-items-text":e(n)("No available account"),"custom-selection-primary-text":W(C.value.targetId),items:M.value,modelValue:C.value.targetId,"onUpdate:modelValue":Ne[8]||(Ne[8]=Me=>C.value.targetId=Me)},null,8,["disabled","filter-placeholder","filter-no-items-text","custom-selection-primary-text","items","modelValue"])):r("",!0),C.value.dataType=="tag"?(l(),p(sa,{key:4,density:"compact",variant:"outlined","item-title":"name","item-value":"id","persistent-placeholder":"",chips:"",disabled:d.value,items:X.value,"no-data-text":e(n)("No available tag"),modelValue:C.value.targetId,"onUpdate:modelValue":Ne[9]||(Ne[9]=Me=>C.value.targetId=Me)},{chip:a(({props:Me,item:Ve})=>[C.value.targetId?(l(),p(oa,Ct({key:0,"prepend-icon":e(la),text:Ve.title},Me),null,16,["prepend-icon","text"])):r("",!0)]),item:a(({props:Me,item:Ve})=>[Ve.raw.hidden?r("",!0):(l(),p(le,Ct({key:0,value:Ve.value},Me),{title:a(()=>[t(ot,null,{default:a(()=>[s("div",Dy,[t(se,{size:"20",start:"",icon:e(la)},null,8,["icon"]),s("span",null,i(Ve.title),1)])]),_:2},1024)]),_:2},1040,["value"]))]),_:1},8,["disabled","items","no-data-text","modelValue"])):r("",!0)]),s("td",Fy,[t(H,{density:"comfortable",variant:"tonal",color:"primary",disabled:d.value||!C.value.dataType||!C.value.targetId,onClick:Ne[10]||(Ne[10]=Me=>fe())},{default:a(()=>[j(i(e(n)("Add Rule")),1)]),_:1},8,["disabled"])])])])]),_:1})]),_:1})]),_:1})]),_:1}),t(ve,{class:"overflow-y-visible"},{default:a(()=>[s("div",Ny,[t(H,{disabled:d.value,onClick:te},{default:a(()=>[j(i(e(n)("OK")),1)]),_:1},8,["disabled"]),t(H,{color:"secondary",variant:"tonal",disabled:d.value,onClick:K},{default:a(()=>[j(i(e(n)("Cancel")),1)]),_:1},8,["disabled"])])]),_:1})]),_:1})]),_:1},8,["persistent","modelValue"]),t(mt,{ref_key:"snackbar",ref:k},null,512)],64)}}}),Ey={class:"d-flex align-center justify-center"},Uy={class:"d-flex w-100 align-center justify-center"},Py={key:0,class:"text-h4"},By={key:1,class:"text-h4"},Ly={key:2,class:"text-h4"},Ry={key:3,class:"text-h4"},zy={class:"w-100 d-flex justify-center gap-4"},Oy=Pe({__name:"BatchCreateDialog",setup(f,{expose:T}){const{tt:n}=Oe(),o=Ta(),g=fl(),c=xe("snackbar"),v=L(!1),y=L(!1),k=L(""),h=L([]),d=L([]);let u=null,C=null;function F(z,M){const U=[];for(const X of d.value)(X!==z||M)&&U.push(X);M&&U.push(z),d.value=U}function w(z){const M={},U={};for(const Z of h.value||[])M[Z.name]=Z.value;for(const Z of Xs(z))for(const q of Z)if(!(!q.subCategories||q.subCategories.length<1))for(const O of q.subCategories){const V=M[O.name];ga(V)&&(U[V]=O.id)}return{sourceTargetMap:U}}function m(z){const M={},U={};for(const Z of h.value||[])M[Z.name]=Z.value;for(const Z of z){const q=M[Z.name];ga(q)&&(U[q]=Z.id)}return{sourceTargetMap:U}}function x(z){return k.value=z.type,h.value=z.invalidItems,d.value=[],v.value=!0,new Promise((M,U)=>{u=M,C=U})}function S(){d.value=(h.value||[]).map(z=>z.name)}function N(){d.value=[]}function A(){const z=wo(d.value,!0);d.value=[];for(const M of h.value||[])z[M.name]||d.value.push(M.name)}function $(){if(k.value==="expenseCategory"||k.value==="incomeCategory"||k.value==="transferCategory"){y.value=!0;let z=tt.Expense,M="";k.value==="expenseCategory"?(z=tt.Expense,M=n("Default Expense Category")):k.value==="incomeCategory"?(z=tt.Income,M=n("Default Income Category")):k.value==="transferCategory"&&(z=tt.Transfer,M=n("Default Transfer Category"));const U=[];for(const Z of d.value){const q=Ao.createNewCategory(z);q.name=Z,q.icon=rs,U.push(q.toCreateRequest(""))}const X=[{name:M,type:z,icon:rs,color:Bu,subCategories:U}];o.addCategories({categories:X}).then(Z=>{o.loadAllCategories({force:!1}).then(()=>{y.value=!1,v.value=!1,u?.(w(Z))}).catch(q=>{y.value=!1,q.processed||c.value?.showError(q)})}).catch(Z=>{y.value=!1,Z.processed||c.value?.showError(Z)})}else if(k.value==="tag"){y.value=!0;const z=[];for(const M of d.value){const U=Zn.createNewTag(M);z.push(U.toCreateRequest())}g.addTags({tags:z,skipExists:!0}).then(M=>{g.loadAllTags({force:!1}).then(()=>{y.value=!1,v.value=!1,u?.(m(M))}).catch(U=>{y.value=!1,U.processed||c.value?.showError(U)})}).catch(M=>{y.value=!1,M.processed||c.value?.showError(M)})}}function I(){C?.(),v.value=!1}return T({open:x}),(z,M)=>(l(),b(ue,null,[t(Tt,{width:"600",persistent:y.value||!!d.value.length,modelValue:v.value,"onUpdate:modelValue":M[1]||(M[1]=U=>v.value=U)},{default:a(()=>[t(Ee,{class:"pa-2 pa-sm-4 pa-md-4"},{title:a(()=>[s("div",Ey,[s("div",Uy,[k.value==="expenseCategory"?(l(),b("h4",Py,i(e(n)("Create Nonexistent Expense Categories")),1)):r("",!0),k.value==="incomeCategory"?(l(),b("h4",By,i(e(n)("Create Nonexistent Income Categories")),1)):r("",!0),k.value==="transferCategory"?(l(),b("h4",Ly,i(e(n)("Create Nonexistent Transfer Categories")),1)):r("",!0),k.value==="tag"?(l(),b("h4",Ry,i(e(n)("Create Nonexistent Transaction Tags")),1)):r("",!0)]),t(H,{density:"comfortable",color:"default",variant:"text",class:"ms-2",disabled:y.value||!h.value||!h.value.length,icon:!0},{default:a(()=>[t(se,{icon:e(Jt)},null,8,["icon"]),t(nt,{activator:"parent"},{default:a(()=>[t(ze,null,{default:a(()=>[t(le,{"prepend-icon":e(ia),title:e(n)("Select All"),disabled:!h.value||!h.value.length,onClick:S},null,8,["prepend-icon","title","disabled"]),t(le,{"prepend-icon":e(sl),title:e(n)("Select None"),disabled:!h.value||!h.value.length,onClick:N},null,8,["prepend-icon","title","disabled"]),t(le,{"prepend-icon":e(il),title:e(n)("Invert Selection"),disabled:!h.value||!h.value.length,onClick:A},null,8,["prepend-icon","title","disabled"])]),_:1})]),_:1})]),_:1},8,["disabled"])])]),default:a(()=>[t(ve,{class:"my-md-4 w-100 d-flex justify-center"},{default:a(()=>[t(Ae,null,{default:a(()=>[t(R,{cols:"12"},{default:a(()=>[t(ze,{class:"py-0",density:"compact","select-strategy":"classic",disabled:y.value,selected:d.value,"onUpdate:selected":M[0]||(M[0]=U=>d.value=U)},{default:a(()=>[(l(!0),b(ue,null,$e(h.value,U=>(l(),p(le,{class:"py-0",key:U.value,value:U.name,title:U.name},{prepend:a(({isActive:X})=>[t(No,{start:""},{default:a(()=>[t(Ps,{"model-value":X,"onUpdate:modelValue":Z=>F(U.name,Z)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1032,["value","title"]))),128))]),_:1},8,["disabled","selected"])]),_:1})]),_:1})]),_:1}),t(ve,{class:"overflow-y-visible"},{default:a(()=>[s("div",zy,[t(H,{disabled:y.value||!d.value||!d.value.length,onClick:$},{default:a(()=>[j(i(e(n)("OK"))+" ",1),y.value?(l(),p(je,{key:0,indeterminate:"",size:"22",class:"ms-2"})):r("",!0)]),_:1},8,["disabled"]),t(H,{color:"secondary",variant:"tonal",disabled:y.value,onClick:I},{default:a(()=>[j(i(e(n)("Cancel")),1)]),_:1},8,["disabled"])])]),_:1})]),_:1})]),_:1},8,["persistent","modelValue"]),t(mt,{ref_key:"snackbar",ref:c},null,512)],64))}}),jy={key:0,class:"d-flex align-center"},qy={key:0},Hy={key:2,class:"ms-2"},Yy={key:3,class:"text-error font-italic"},Wy={key:1,style:{width:"260px"}},Ky={key:2,style:{width:"260px"}},Gy={key:3,style:{width:"260px"}},Jy={key:0,class:"d-flex align-center"},Zy={key:1},Qy={key:0,class:"d-flex align-center"},Xy={key:0},eg={key:1,class:"text-error font-italic"},tg={key:3},ag={key:4,class:"text-error font-italic"},lg={key:0},ng={key:1},og={key:0},sg={key:1,style:{width:"200px"}},ig={class:"d-flex align-center"},rg={key:0},ug={key:1},dg={key:0,class:"title-and-toolbar d-flex align-center text-no-wrap mt-2"},cg={key:1},mg={class:"d-flex align-center justify-center"},pg={class:"text-h4"},vg={class:"w-100 d-flex justify-center gap-4"},fg=Pe({__name:"ImportTransactionCheckDataTab",props:{importTransactions:{},disabled:{type:Boolean}},setup(f,{expose:T}){const n=f,{tt:o,getCurrentNumeralSystemType:g,formatUnixTimeToLongDateTime:c,formatAmountToLocalizedNumeralsWithCurrency:v,getCategorizedAccountsWithDisplayBalance:y}=Oe(),k=Ha(),h=ra(),d=_a(),u=Ta(),C=fl(),F=xe("snackbar"),w=xe("batchReplaceDialog"),m=xe("batchReplaceAllTypesDialog"),x=xe("batchCreateDialog"),S=L(null),N=L([]),A=L({minDatetime:null,maxDatetime:null,transactionType:null,category:null,account:null,tag:null,description:null}),$=L(1),I=L(10),z=L(!1),M=L(!1),U=L(null),X=B(()=>g()),Z=B(()=>k.appSettings.showAccountBalance),q=B(()=>bl(k.appSettings.timeZone)),O=B(()=>h.currentUserDefaultCurrency),V=B(()=>h.currentUserCoordinateDisplayType),_=B(()=>d.allPlainAccounts),D=B(()=>d.allVisiblePlainAccounts),P=B(()=>y(D.value,Z.value)),W=B(()=>d.allAccountsMap),ne=B(()=>Lu(d.allAccounts)),de=B(()=>u.allTransactionCategories),J=B(()=>u.allTransactionCategoriesMap),Y=B(()=>C.allTransactionTags),ie=B(()=>C.allTransactionTagsMap),fe=B(()=>u.hasAvailableExpenseCategories),te=B(()=>u.hasAvailableIncomeCategories),K=B(()=>u.hasAvailableTransferCategories),me=B(()=>!!S.value),Ne=B(()=>At.value>0&&ce.value<1),et=B(()=>[{title:o("Date Range"),items:[{title:o("All"),appendIcon:A.value.minDatetime===null||A.value.maxDatetime===null?Ye:void 0,onClick:()=>{A.value.minDatetime=null,A.value.maxDatetime=null}},{title:o("Custom"),subTitle:Ze.value,appendIcon:A.value.minDatetime!==null&&A.value.maxDatetime!==null?Ye:void 0,onClick:()=>z.value=!0}]},{title:o("Type"),items:[{title:o("All"),appendIcon:A.value.transactionType===null?Ye:void 0,onClick:()=>A.value.transactionType=null},{title:o("Income"),appendIcon:A.value.transactionType===ye.Income?Ye:void 0,onClick:()=>A.value.transactionType=ye.Income},{title:o("Expense"),appendIcon:A.value.transactionType===ye.Expense?Ye:void 0,onClick:()=>A.value.transactionType=ye.Expense},{title:o("Transfer"),appendIcon:A.value.transactionType===ye.Transfer?Ye:void 0,onClick:()=>A.value.transactionType=ye.Transfer}]},{title:o("Category"),items:[{title:o("All"),appendIcon:A.value.category===null?Ye:void 0,onClick:()=>A.value.category=null},{title:o("Invalid Category"),appendIcon:A.value.category===void 0?Ye:void 0,onClick:()=>A.value.category=void 0},{title:o("None"),appendIcon:A.value.category===""?Ye:void 0,onClick:()=>A.value.category=""},...ct.value.map(E=>({title:E,appendIcon:A.value.category===E?Ye:void 0,onClick:()=>A.value.category=E}))]},{title:o("Account"),items:[{title:o("All"),appendIcon:A.value.account===null?Ye:void 0,onClick:()=>A.value.account=null},{title:o("Invalid Account"),appendIcon:A.value.account===void 0?Ye:void 0,onClick:()=>A.value.account=void 0},{title:o("None"),appendIcon:A.value.account===""?Ye:void 0,onClick:()=>A.value.account=""},...we.value.map(E=>({title:E,appendIcon:A.value.account===E?Ye:void 0,onClick:()=>A.value.account=E}))]},{title:o("Tags"),items:[{title:o("All"),appendIcon:A.value.tag===null?Ye:void 0,onClick:()=>A.value.tag=null},{title:o("Invalid Tag"),appendIcon:A.value.tag===void 0?Ye:void 0,onClick:()=>A.value.tag=void 0},{title:o("None"),appendIcon:A.value.tag===""?Ye:void 0,onClick:()=>A.value.tag=""},...st.value.map(E=>({title:E,appendIcon:A.value.tag===E?Ye:void 0,onClick:()=>A.value.tag=E}))]},{title:o("Description"),items:[{title:o("All"),appendIcon:A.value.description===null?Ye:void 0,onClick:()=>A.value.description=null},{title:o("None"),appendIcon:A.value.description===""?Ye:void 0,onClick:()=>A.value.description=""},{title:o("Custom"),subTitle:A.value.description!==null?A.value.description:void 0,appendIcon:A.value.description!==null&&A.value.description!==""?Ye:void 0,onClick:()=>{U.value=A.value.description||"",M.value=!0}}]}]),Me=B(()=>[{prependIcon:Aa,title:o("Batch Replace Selected Expense Categories"),disabled:me.value||Zt.value<1,onClick:()=>Q("expenseCategory")},{prependIcon:Aa,title:o("Batch Replace Selected Income Categories"),disabled:me.value||Qe.value<1,onClick:()=>Q("incomeCategory")},{prependIcon:Aa,title:o("Batch Replace Selected Transfer Categories"),disabled:me.value||pe.value<1,onClick:()=>Q("transferCategory")},{prependIcon:Aa,title:o("Batch Replace Selected Accounts"),disabled:me.value||At.value<1,onClick:()=>Q("account")},{prependIcon:Aa,title:o("Batch Replace Selected Destination Accounts"),disabled:me.value||pe.value<1,onClick:()=>Q("destinationAccount")},{prependIcon:Aa,title:o("Batch Replace Selected Transaction Tags"),disabled:me.value||At.value<1,onClick:()=>Q("tag",jt.value)},{prependIcon:Aa,title:o("Batch Add Transaction Tags"),disabled:me.value||At.value<1,onClick:()=>re("tag")},{prependIcon:Aa,title:o("Replace Invalid Expense Categories"),disabled:me.value||!De.value||De.value.length<1,divider:!0,onClick:()=>Ue("expenseCategory",De.value)},{prependIcon:Aa,title:o("Replace Invalid Income Categories"),disabled:me.value||!St.value||St.value.length<1,onClick:()=>Ue("incomeCategory",St.value)},{prependIcon:Aa,title:o("Replace Invalid Transfer Categories"),disabled:me.value||!_t.value||_t.value.length<1,onClick:()=>Ue("transferCategory",_t.value)},{prependIcon:Aa,title:o("Replace Invalid Accounts"),disabled:me.value||!We.value||We.value.length<1,onClick:()=>Ue("account",We.value)},{prependIcon:Aa,title:o("Replace Invalid Transaction Tags"),disabled:me.value||!Le.value||Le.value.length<1,onClick:()=>Ue("tag",Le.value)},{prependIcon:Aa,title:o("Batch Replace Categories / Accounts / Tags"),disabled:me.value,divider:!0,onClick:Lt},{prependIcon:Fn,title:o("Create Nonexistent Expense Categories"),disabled:me.value||!De.value||De.value.length<1,divider:!0,onClick:()=>ya("expenseCategory",De.value)},{prependIcon:Fn,title:o("Create Nonexistent Income Categories"),disabled:me.value||!St.value||St.value.length<1,onClick:()=>ya("incomeCategory",St.value)},{prependIcon:Fn,title:o("Create Nonexistent Transfer Categories"),disabled:me.value||!_t.value||_t.value.length<1,onClick:()=>ya("transferCategory",_t.value)},{prependIcon:Fn,title:o("Create Nonexistent Transaction Tags"),disabled:me.value||!Le.value||Le.value.length<1,onClick:()=>ya("tag",Le.value)},{prependIcon:Pl,title:o("Batch Convert Expense Transaction to Income Transaction"),disabled:me.value||Zt.value<1,divider:!0,onClick:()=>Fe(ye.Expense,ye.Income)},{prependIcon:Pl,title:o("Batch Convert Expense Transaction to Transfer Transaction"),disabled:me.value||Zt.value<1,onClick:()=>Fe(ye.Expense,ye.Transfer)},{prependIcon:Pl,title:o("Batch Convert Income Transaction to Expense Transaction"),disabled:me.value||Qe.value<1,onClick:()=>Fe(ye.Income,ye.Expense)},{prependIcon:Pl,title:o("Batch Convert Income Transaction to Transfer Transaction"),disabled:me.value||Qe.value<1,onClick:()=>Fe(ye.Income,ye.Transfer)},{prependIcon:Pl,title:o("Batch Convert Transfer Transaction to Expense Transaction"),disabled:me.value||pe.value<1,onClick:()=>Fe(ye.Transfer,ye.Expense)},{prependIcon:Pl,title:o("Batch Convert Transfer Transaction to Income Transaction"),disabled:me.value||pe.value<1,onClick:()=>Fe(ye.Transfer,ye.Income)}]),Ve=B(()=>{if(!(I.value<=10||!n.importTransactions||n.importTransactions.length<=10))return 400}),bt=B(()=>[{value:"valid",sortable:!0,nowrap:!0,width:35},{value:"time",title:o("Transaction Time"),sortable:!0,nowrap:!0,maxWidth:280},{value:"type",title:o("Type"),sortable:!0,nowrap:!0,maxWidth:140},{value:"actualCategoryName",title:o("Category"),sortable:!0,nowrap:!0},{value:"sourceAmount",title:o("Amount"),sortable:!0,nowrap:!0},{value:"actualSourceAccountName",title:o("Account"),sortable:!0,nowrap:!0},{value:"geoLocation",title:o("Geographic Location"),sortable:!0,nowrap:!0},{value:"tagIds",title:o("Tags"),sortable:!0,nowrap:!0},{value:"comment",title:o("Description"),sortable:!0,nowrap:!0}]),Bt=B(()=>Nt(n.importTransactions?.length)),at=B(()=>{if(!n.importTransactions||n.importTransactions.length<1)return 1;let E=0;for(const he of n.importTransactions)xt(he)&&E++;return Math.ceil(E/I.value)}),Yt=B(()=>{const E=[];if(!n.importTransactions||n.importTransactions.length<1)return E;const he=Math.max(0,($.value-1)*I.value);let _e=0;for(const qe of n.importTransactions){if(E.length>=I.value)break;xt(qe)&&(_e>=he&&E.push(qe),_e++)}return E}),At=B(()=>{let E=0;if(!n.importTransactions||n.importTransactions.length<1)return E;for(const he of n.importTransactions)he.selected&&E++;return E}),Zt=B(()=>{let E=0;if(!n.importTransactions||n.importTransactions.length<1)return E;for(const he of n.importTransactions)he.selected&&he.type===ye.Expense&&E++;return E}),Qe=B(()=>{let E=0;if(!n.importTransactions||n.importTransactions.length<1)return E;for(const he of n.importTransactions)he.selected&&he.type===ye.Income&&E++;return E}),pe=B(()=>{let E=0;if(!n.importTransactions||n.importTransactions.length<1)return E;for(const he of n.importTransactions)he.selected&&he.type===ye.Transfer&&E++;return E}),ce=B(()=>{let E=0;if(!n.importTransactions||n.importTransactions.length<1)return E;for(const he of n.importTransactions)!he.valid&&he.selected&&E++;return E}),ke=B(()=>!!n.importTransactions&&At.value>0&&At.value!==n.importTransactions.length),Be=B(()=>!!n.importTransactions&&At.value===n.importTransactions.length),ct=B(()=>{if(!n.importTransactions||n.importTransactions.length<1)return[];const E={};for(const he of n.importTransactions)he.actualCategoryName&&he.actualCategoryName!==""&&(E[he.actualCategoryName]=!0);return po(E)}),we=B(()=>{if(!n.importTransactions||n.importTransactions.length<1)return[];const E={};for(const he of n.importTransactions)he.actualSourceAccountName&&he.actualSourceAccountName!==""&&(E[he.actualSourceAccountName]=!0),he.actualDestinationAccountName&&he.actualDestinationAccountName!==""&&(E[he.actualDestinationAccountName]=!0);return po(E)}),st=B(()=>{if(!n.importTransactions||n.importTransactions.length<1)return[];const E={};for(const he of n.importTransactions)if(!(!he.tagIds||!he.originalTagNames))for(const[_e,qe]of Da(he.tagIds)){const Ce=he.originalTagNames[qe];_e&&_e!=="0"&&ie.value[_e]&&ie.value[_e].name?E[ie.value[_e].name]=!0:Ce&&(E[Ce]=!0)}return po(E)}),De=B(()=>ea(ye.Expense)),St=B(()=>ea(ye.Income)),_t=B(()=>ea(ye.Transfer)),We=B(()=>va()),Le=B(()=>Ya()),jt=B(()=>al()),Ze=B(()=>{if(A.value.minDatetime===null||A.value.maxDatetime===null)return"";const E=c(A.value.minDatetime),he=c(A.value.maxDatetime);return`${E} - ${he}`});function Te(E){return X.value.formatNumber(E)}function Nt(E){const he=[];if(!E||E<1)return he.push({value:-1,name:o("All")}),he;for(const _e of[5,10,15,20,25,30,50]){if(E<_e)break;he.push({value:_e,name:Te(_e)})}return he.push({value:-1,name:o("All")}),he}function xt(E){if(Ht(A.value.minDatetime)&&Ht(A.value.maxDatetime)&&(E.time<A.value.minDatetime||E.time>A.value.maxDatetime)||Ht(A.value.transactionType)&&E.type!==A.value.transactionType)return!1;if(Ua(A.value.category)){if(A.value.category===""&&E.actualCategoryName!=="")return!1;if(A.value.category!==""&&E.actualCategoryName!==A.value.category)return!1}else if(A.value.category===void 0&&E.type!==ye.ModifyBalance&&E.categoryId&&E.categoryId!=="0")return!1;if(Ua(A.value.account)){if(A.value.account===""&&(E.actualSourceAccountName!==""||E.actualDestinationAccountName!==""))return!1;if(A.value.account!==""&&E.actualSourceAccountName!==A.value.account&&E.actualDestinationAccountName!==A.value.account)return!1}else if(A.value.account===void 0){if(E.type!==ye.Transfer&&E.sourceAccountId&&E.sourceAccountId!=="0")return!1;if(E.type===ye.Transfer&&E.sourceAccountId&&E.sourceAccountId!=="0"&&E.destinationAccountId&&E.destinationAccountId!=="0")return!1}if(Ua(A.value.tag)){if(A.value.tag===""&&E.tagIds&&E.tagIds.length)return!1;if(A.value.tag!==""){let he=!1;if(E.tagIds&&E.tagIds.length)for(const[_e,qe]of Da(E.tagIds)){let Ce=E.originalTagNames?E.originalTagNames[qe]??"":"";if(_e&&_e!=="0"&&ie.value[_e]&&ie.value[_e].name&&(Ce=ie.value[_e].name),Ce===A.value.tag){he=!0;break}}if(!he)return!1}}else if(A.value.tag===void 0)if(E.tagIds&&E.tagIds.length){let he=!1;for(const _e of E.tagIds)if(!_e||_e==="0"){he=!0;break}if(!he)return!1}else return!1;if(Ua(A.value.description)){if(A.value.description===""&&E.comment!=="")return!1;if(A.value.description!==""&&E.comment.indexOf(A.value.description)<0)return!1}return!0}function gt(E,he){if(!E||!E[he]||E[he]==="0")return!1;const _e=E[he];return!!ie.value[_e]}function xa(E){return c(E.time,E.utcOffset,q.value)}function Mt(E){return`UTC${Ru(E.utcOffset)}`}function Kt(E,he){return v(E,he)}function tl(E){let he=E.originalSourceAccountCurrency||O.value;return E.sourceAccountId&&E.sourceAccountId!=="0"&&W.value[E.sourceAccountId]&&(he=W.value[E.sourceAccountId].currency),Kt(E.sourceAmount,he)}function Ca(E){if(E.type!==ye.Transfer)return"-";let he=E.originalDestinationAccountCurrency||O.value;return E.destinationAccountId&&E.destinationAccountId!=="0"&&W.value[E.destinationAccountId]&&(he=W.value[E.destinationAccountId].currency),Kt(E.destinationAmount,he)}function ul(E){return E.type===ye.Expense||E.type===ye.Income?o("Account"):E.type===ye.Transfer?o("Source Account"):o("Account")}function ua(E){return E.sourceAccountId?xl.findAccountNameById(_.value,E.sourceAccountId)||"":o("None")}function Fa(E){return E.destinationAccountId?xl.findAccountNameById(_.value,E.destinationAccountId)||"":o("None")}function ea(E){const he={},_e=[];if(!n.importTransactions||n.importTransactions.length<1)return _e;for(const qe of n.importTransactions){const Ce=qe.categoryId;qe.type===E&&(!Ce||Ce==="0"||!J.value[Ce])&&(he[qe.originalCategoryName]=!0)}for(const qe of ql(he))_e.push({name:qe||o("(Empty)"),value:qe});return _e}function va(){const E={},he=[];if(!n.importTransactions||n.importTransactions.length<1)return he;for(const _e of n.importTransactions){const qe=_e.sourceAccountId,Ce=_e.destinationAccountId;(!qe||qe==="0"||!W.value[qe])&&(E[_e.originalSourceAccountName]=!0),_e.type===ye.Transfer&&Ua(_e.originalDestinationAccountName)&&(!Ce||Ce==="0"||!W.value[Ce])&&(E[_e.originalDestinationAccountName]=!0)}for(const _e of ql(E))he.push({name:_e||o("(Empty)"),value:_e});return he}function Ya(){const E={},he=[];if(!n.importTransactions||n.importTransactions.length<1)return he;for(const _e of n.importTransactions)if(!(!_e.tagIds||!_e.originalTagNames))for(const[qe,Ce]of Da(_e.tagIds)){const rt=_e.originalTagNames[Ce];rt&&(!qe||qe==="0"||!ie.value[qe])&&(E[rt]=!0)}for(const _e of ql(E))he.push({name:_e||o("(Empty)"),value:_e});return he}function al(){const E={},he=[];if(!n.importTransactions||n.importTransactions.length<1)return he;for(const _e of n.importTransactions)if(_e.originalTagNames)for(const qe of _e.originalTagNames)E[qe]=!0;for(const _e of ql(E))he.push({name:_e||o("(Empty)"),value:_e});return he}function Wa(E,he,_e){return!_e||!_e.raw?!1:xt(_e.raw)}function Ka(){if(!(!n.importTransactions||n.importTransactions.length<1))for(const E of n.importTransactions)E.valid&&xt(E)&&(E.selected=!0)}function fa(){if(!(!n.importTransactions||n.importTransactions.length<1))for(const E of n.importTransactions)!E.valid&&xt(E)&&(E.selected=!0)}function yl(){if(!(!n.importTransactions||n.importTransactions.length<1))for(const E of n.importTransactions)xt(E)&&(E.selected=!0)}function Na(){if(!(!n.importTransactions||n.importTransactions.length<1))for(const E of n.importTransactions)xt(E)&&(E.selected=!1)}function Ma(){if(!(!n.importTransactions||n.importTransactions.length<1))for(const E of n.importTransactions)xt(E)&&(E.selected=!E.selected)}function Ga(){for(const E of Yt.value)E.selected=!0}function ll(){for(const E of Yt.value)E.selected=!1}function nl(){for(const E of Yt.value)E.selected=!E.selected}function Se(E){S.value&&(S.value.tagIds=N.value,ge(S.value)),S.value===E?(N.value=[],S.value=null):(S.value=E,N.value=S.value.tagIds)}function ge(E){E.valid=E.isTransactionValid(),E.categoryId&&J.value[E.categoryId]&&(E.actualCategoryName=J.value[E.categoryId].name),E.sourceAccountId&&W.value[E.sourceAccountId]&&(E.actualSourceAccountName=W.value[E.sourceAccountId].name),E.destinationAccountId&&W.value[E.destinationAccountId]&&(E.actualDestinationAccountName=W.value[E.destinationAccountId].name)}function Q(E,he){me.value||w.value?.open({mode:"batchReplace",type:E,allSourceTagItems:he}).then(_e=>{if(!_e||E!=="tag"&&!_e.targetItem)return;let qe=0;if(n.importTransactions)for(const Ce of n.importTransactions){if(!Ce.selected)continue;let rt=!1;if(E==="expenseCategory")Ce.type===ye.Expense&&(Ce.categoryId=_e.targetItem,rt=!0);else if(E==="incomeCategory")Ce.type===ye.Income&&(Ce.categoryId=_e.targetItem,rt=!0);else if(E==="transferCategory")Ce.type===ye.Transfer&&(Ce.categoryId=_e.targetItem,rt=!0);else if(E==="account")Ce.sourceAccountId=_e.targetItem,rt=!0;else if(E==="destinationAccount")Ce.type===ye.Transfer&&(Ce.destinationAccountId=_e.targetItem,rt=!0);else if(E==="tag"){const oe=[];for(let Re=0;Re<Ce.originalTagNames.length;Re++)(Ce.originalTagNames?Ce.originalTagNames[Re]??"":"")===_e.sourceItem&&(_e.targetItem?(Ce.tagIds[Re]=_e.targetItem,Ce.originalTagNames[Re]=ie.value[_e.targetItem]?.name||""):oe.push(Re),rt=!0);for(const Re of us(oe))Ce.tagIds.splice(Re,1),Ce.originalTagNames.splice(Re,1)}rt&&(qe++,ge(Ce))}qe>0&&F.value?.showMessage("format.misc.youHaveUpdatedTransactions",{count:Te(qe)})})}function re(E){me.value||w.value?.open({mode:"batchAdd",type:E}).then(he=>{if(!he||!he.targetItem)return;let _e=0;if(n.importTransactions)for(const qe of n.importTransactions){if(!qe.selected)continue;let Ce=!1;if(E==="tag"){let rt=!1;for(const oe of qe.originalTagNames)if(oe===he.targetItem){rt=!0;break}rt||(qe.tagIds||(qe.tagIds=[]),qe.originalTagNames||(qe.originalTagNames=[]),qe.tagIds.push(he.targetItem),qe.originalTagNames.push(ie.value[he.targetItem]?.name??""),Ce=!0)}Ce&&(_e++,ge(qe))}_e>0&&F.value?.showMessage("format.misc.youHaveUpdatedTransactions",{count:Te(_e)})})}function Ue(E,he){me.value||w.value?.open({mode:"replaceInvalidItems",type:E,invalidItems:he}).then(_e=>{if(!_e||!_e.sourceItem&&_e.sourceItem!==""||E!=="tag"&&!_e.targetItem)return;let qe=0;if(n.importTransactions)for(const Ce of n.importTransactions){if(Ce.valid)continue;let rt=!1;if(E==="expenseCategory"||E==="incomeCategory"||E==="transferCategory"){const oe=Ce.categoryId,Re=Ce.originalCategoryName;Ce.type!==ye.ModifyBalance&&Re===_e.sourceItem&&(!oe||oe==="0"||!J.value[oe])&&(E==="expenseCategory"&&Ce.type===ye.Expense||E==="incomeCategory"&&Ce.type===ye.Income||E==="transferCategory"&&Ce.type===ye.Transfer)&&(Ce.categoryId=_e.targetItem,rt=!0)}else if(E==="account"){const oe=Ce.sourceAccountId,Re=Ce.originalSourceAccountName,Vt=Ce.destinationAccountId,Ea=Ce.originalDestinationAccountName;Re===_e.sourceItem&&(!oe||oe==="0"||!W.value[oe])&&(Ce.sourceAccountId=_e.targetItem,rt=!0),Ce.type===ye.Transfer&&Ea===_e.sourceItem&&(!Vt||Vt==="0"||!W.value[Vt])&&(Ce.destinationAccountId=_e.targetItem,rt=!0)}else if(E==="tag"&&Ce.tagIds){const oe=[];for(let Re=0;Re<Ce.tagIds.length;Re++){const Vt=Ce.tagIds[Re];(Ce.originalTagNames?Ce.originalTagNames[Re]??"":"")===_e.sourceItem&&(!Vt||Vt==="0"||!ie.value[Vt])&&(_e.targetItem?(Ce.tagIds[Re]=_e.targetItem,Ce.originalTagNames[Re]=ie.value[_e.targetItem]?.name||""):oe.push(Re),rt=!0)}for(const Re of us(oe))Ce.tagIds.splice(Re,1),Ce.originalTagNames.splice(Re,1)}rt&&(qe++,ge(Ce))}qe>0&&F.value?.showMessage("format.misc.youHaveUpdatedTransactions",{count:Te(qe)})})}function Lt(){me.value||m.value?.open({expenseCategoryNames:De.value,incomeCategoryNames:St.value,transferCategoryNames:_t.value,accountNames:We.value,tagNames:Le.value}).then(E=>{if(!E||!E.rules)return;let he=0;if(n.importTransactions)for(const _e of n.importTransactions){let qe=!1;for(const Ce of E.rules)if(!(!Ce||!Ce.dataType||!Ce.targetId)){if(Ce.dataType==="expenseCategory"||Ce.dataType==="incomeCategory"||Ce.dataType==="transferCategory")_e.type!==ye.ModifyBalance&&_e.originalCategoryName===Ce.sourceValue&&(Ce.dataType==="expenseCategory"&&_e.type===ye.Expense||Ce.dataType==="incomeCategory"&&_e.type===ye.Income||Ce.dataType==="transferCategory"&&_e.type===ye.Transfer)&&(_e.categoryId=Ce.targetId,qe=!0);else if(Ce.dataType==="account")_e.originalSourceAccountName===Ce.sourceValue&&(_e.sourceAccountId=Ce.targetId,qe=!0),_e.type===ye.Transfer&&_e.originalDestinationAccountName===Ce.sourceValue&&(_e.destinationAccountId=Ce.targetId,qe=!0);else if(Ce.dataType==="tag"&&_e.tagIds)for(let rt=0;rt<_e.tagIds.length;rt++)(_e.originalTagNames?_e.originalTagNames[rt]??"":"")===Ce.sourceValue&&(_e.tagIds[rt]=Ce.targetId,qe=!0)}qe&&(he++,ge(_e))}he>0&&F.value?.showMessage("format.misc.youHaveUpdatedTransactions",{count:Te(he)})})}function ya(E,he){me.value||x.value?.open({type:E,invalidItems:he}).then(_e=>{if(!_e||!_e.sourceTargetMap)return;let qe=0;if(n.importTransactions){const Ce=_e.sourceTargetMap;for(const rt of n.importTransactions){if(rt.valid)continue;let oe=!1;if(E==="expenseCategory"||E==="incomeCategory"||E==="transferCategory"){const Re=rt.categoryId,Vt=rt.originalCategoryName,Ea=Ce[Vt];rt.type!==ye.ModifyBalance&&Ea&&(!Re||Re==="0"||!J.value[Re])&&(E==="expenseCategory"&&rt.type===ye.Expense||E==="incomeCategory"&&rt.type===ye.Income||E==="transferCategory"&&rt.type===ye.Transfer)&&(rt.categoryId=Ea,oe=!0)}else if(E==="tag"&&rt.tagIds)for(let Re=0;Re<rt.tagIds.length;Re++){const Vt=rt.tagIds[Re],Ea=rt.originalTagNames?rt.originalTagNames[Re]??"":"",ta=Ce[Ea];ta&&(!Vt||Vt==="0"||!ie.value[Vt])&&(rt.tagIds[Re]=ta,oe=!0)}oe&&(qe++,ge(rt))}}qe>0&&F.value?.showMessage("format.misc.youHaveUpdatedTransactions",{count:Te(qe)})})}function Fe(E,he){if(!n.importTransactions||n.importTransactions.length<1)return;const _e=Io(he);if(!_e)return;const qe=zu(de.value[_e]);for(const Ce of n.importTransactions)!Ce.selected||Ce.type!==E||(Ce.type=he,Ce.categoryId=qe[Ce.originalCategoryName]?.id||"0",Ce.type===ye.Transfer?(Ce.destinationAccountId=ne.value[Ce.originalDestinationAccountName||""]?.id||"0",Ce.destinationAmount=Ce.sourceAmount):(E===ye.Transfer&&he===ye.Income&&(Ce.sourceAccountId=Ce.destinationAccountId,Ce.sourceAmount=Ce.destinationAmount),Ce.destinationAccountId="0",Ce.destinationAmount=0),ge(Ce))}function it(E,he){A.value.minDatetime=E,A.value.maxDatetime=he,z.value=!1}function dl(E){F.value?.showError(E)}function El(){S.value=null,N.value=[],A.value.minDatetime=null,A.value.maxDatetime=null,A.value.transactionType=null,A.value.category=null,A.value.account=null,A.value.tag=null,A.value.description=null,$.value=1,I.value=10}function Ul(E){I.value=E}return T({filterMenus:et,toolMenus:Me,isEditing:me,canImport:Ne,reset:El,setCountPerPage:Ul}),(E,he)=>{const _e=Ie("ItemIcon"),qe=Ie("two-column-select"),Ce=Ie("amount-input"),rt=Ie("date-range-selection-dialog");return l(),b(ue,null,[t(wn,{"fixed-header":"","fixed-footer":"","show-select":"","multi-sort":"",density:"compact","item-value":"index",class:be({"import-transaction-table":!0,disabled:!!f.disabled}),height:Ve.value,headers:bt.value,items:f.importTransactions,search:JSON.stringify(A.value),"custom-filter":Wa,"no-data-text":e(o)("No data to import"),"items-per-page":I.value,"onUpdate:itemsPerPage":he[4]||(he[4]=oe=>I.value=oe),page:$.value,"onUpdate:page":he[5]||(he[5]=oe=>$.value=oe)},{"header.data-table-select":a(()=>[t(za,{readonly:"",class:"always-cursor-pointer",density:"compact",width:"28",disabled:!!f.disabled,indeterminate:ke.value,modelValue:Be.value,"onUpdate:modelValue":he[0]||(he[0]=oe=>Be.value=oe)},{default:a(()=>[t(nt,{activator:"parent",location:"bottom"},{default:a(()=>[t(ze,null,{default:a(()=>[t(le,{"prepend-icon":e(ia),title:e(o)("Select All Valid Items"),disabled:!!f.disabled,onClick:Ka},null,8,["prepend-icon","title","disabled"]),t(le,{"prepend-icon":e(ia),title:e(o)("Select All Invalid Items"),disabled:!!f.disabled,onClick:fa},null,8,["prepend-icon","title","disabled"]),t(Ke,{class:"my-2"}),t(le,{"prepend-icon":e(ia),title:e(o)("Select All"),disabled:!!f.disabled,onClick:yl},null,8,["prepend-icon","title","disabled"]),t(le,{"prepend-icon":e(sl),title:e(o)("Select None"),disabled:!!f.disabled,onClick:Na},null,8,["prepend-icon","title","disabled"]),t(le,{"prepend-icon":e(il),title:e(o)("Invert Selection"),disabled:!!f.disabled,onClick:Ma},null,8,["prepend-icon","title","disabled"]),t(Ke,{class:"my-2"}),t(le,{"prepend-icon":e(ia),title:e(o)("Select All in This Page"),disabled:!!f.disabled,onClick:Ga},null,8,["prepend-icon","title","disabled"]),t(le,{"prepend-icon":e(sl),title:e(o)("Select None in This Page"),disabled:!!f.disabled,onClick:ll},null,8,["prepend-icon","title","disabled"]),t(le,{"prepend-icon":e(il),title:e(o)("Invert Selection in This Page"),disabled:!!f.disabled,onClick:nl},null,8,["prepend-icon","title","disabled"])]),_:1})]),_:1})]),_:1},8,["disabled","indeterminate","modelValue"])]),"item.data-table-select":a(({item:oe})=>[t(za,{density:"compact",color:oe.valid?"primary":"error",disabled:!!f.disabled,modelValue:oe.selected,"onUpdate:modelValue":Re=>oe.selected=Re},null,8,["color","disabled","modelValue","onUpdate:modelValue"])]),"item.valid":a(({item:oe})=>[t(se,{size:"small",class:be({"text-error":!oe.valid}),disabled:!!f.disabled,icon:S.value===oe?e(Ye):e(An),onClick:Re=>Se(oe)},null,8,["class","disabled","icon","onClick"]),f.disabled?r("",!0):(l(),p(yt,{key:0,activator:"parent"},{default:a(()=>[j(i(e(o)("Edit")),1)]),_:1}))]),"item.time":a(({item:oe})=>[s("span",null,i(xa(oe)),1),oe.utcOffset!==q.value?(l(),p(oa,{key:0,class:"ms-1",variant:"flat",color:"grey",size:"x-small"},{default:a(()=>[j(i(Mt(oe)),1)]),_:2},1024)):r("",!0)]),"item.type":a(({value:oe})=>[oe===e(ye).ModifyBalance?(l(),p(oa,{key:0,label:"",color:"secondary",variant:"outlined",size:"x-small"},{default:a(()=>[j(i(e(o)("Modify Balance")),1)]),_:1})):oe===e(ye).Income?(l(),p(oa,{key:1,label:"",class:"text-income",variant:"outlined",size:"x-small"},{default:a(()=>[j(i(e(o)("Income")),1)]),_:1})):oe===e(ye).Expense?(l(),p(oa,{key:2,label:"",class:"text-expense",variant:"outlined",size:"x-small"},{default:a(()=>[j(i(e(o)("Expense")),1)]),_:1})):oe===e(ye).Transfer?(l(),p(oa,{key:3,label:"",color:"primary",variant:"outlined",size:"x-small"},{default:a(()=>[j(i(e(o)("Transfer")),1)]),_:1})):(l(),p(oa,{key:4,label:"",color:"default",variant:"outlined",size:"x-small"},{default:a(()=>[j(i(e(o)("Unknown")),1)]),_:1}))]),"item.actualCategoryName":a(({item:oe})=>[S.value!==oe||oe.type===e(ye).ModifyBalance?(l(),b("div",jy,[oe.type===e(ye).ModifyBalance?(l(),b("span",qy,"-")):r("",!0),oe.type!==e(ye).ModifyBalance&&oe.categoryId&&oe.categoryId!=="0"&&J.value[oe.categoryId]?(l(),p(_e,{key:1,size:"24px","icon-type":"category","icon-id":J.value[oe.categoryId]?.icon??"",color:J.value[oe.categoryId]?.color??""},null,8,["icon-id","color"])):r("",!0),oe.type!==e(ye).ModifyBalance&&oe.categoryId&&oe.categoryId!=="0"&&J.value[oe.categoryId]?(l(),b("span",Hy,i(J.value[oe.categoryId]?.name),1)):oe.type!==e(ye).ModifyBalance&&(!oe.categoryId||oe.categoryId==="0"||!J.value[oe.categoryId])?(l(),b("div",Yy,[t(se,{class:"me-1",icon:e(cn)},null,8,["icon"]),s("span",null,i(oe.originalCategoryName),1)])):r("",!0)])):r("",!0),S.value===oe&&oe.type===e(ye).Expense?(l(),b("div",Wy,[t(qe,{density:"compact",variant:"plain","primary-key-field":"id","primary-value-field":"id","primary-title-field":"name","primary-icon-field":"icon","primary-icon-type":"category","primary-color-field":"color","primary-hidden-field":"hidden","primary-sub-items-field":"subCategories","secondary-key-field":"id","secondary-value-field":"id","secondary-title-field":"name","secondary-icon-field":"icon","secondary-icon-type":"category","secondary-color-field":"color","secondary-hidden-field":"hidden",disabled:!!f.disabled||!fe.value,"enable-filter":!0,"filter-placeholder":e(o)("Find category"),"filter-no-items-text":e(o)("No available category"),"show-selection-primary-text":!0,"custom-selection-primary-text":e(Ra)(oe.categoryId,de.value[e(tt).Expense]),"custom-selection-secondary-text":e(ba)(oe.categoryId,de.value[e(tt).Expense]),placeholder:e(o)("Category"),items:de.value[e(tt).Expense],modelValue:oe.categoryId,"onUpdate:modelValue":Re=>oe.categoryId=Re},null,8,["disabled","filter-placeholder","filter-no-items-text","custom-selection-primary-text","custom-selection-secondary-text","placeholder","items","modelValue","onUpdate:modelValue"])])):r("",!0),S.value===oe&&oe.type===e(ye).Income?(l(),b("div",Ky,[t(qe,{density:"compact",variant:"plain","primary-key-field":"id","primary-value-field":"id","primary-title-field":"name","primary-icon-field":"icon","primary-icon-type":"category","primary-color-field":"color","primary-hidden-field":"hidden","primary-sub-items-field":"subCategories","secondary-key-field":"id","secondary-value-field":"id","secondary-title-field":"name","secondary-icon-field":"icon","secondary-icon-type":"category","secondary-color-field":"color","secondary-hidden-field":"hidden",disabled:!!f.disabled||!te.value,"enable-filter":!0,"filter-placeholder":e(o)("Find category"),"filter-no-items-text":e(o)("No available category"),"show-selection-primary-text":!0,"custom-selection-primary-text":e(Ra)(oe.categoryId,de.value[e(tt).Income]),"custom-selection-secondary-text":e(ba)(oe.categoryId,de.value[e(tt).Income]),placeholder:e(o)("Category"),items:de.value[e(tt).Income],modelValue:oe.categoryId,"onUpdate:modelValue":Re=>oe.categoryId=Re},null,8,["disabled","filter-placeholder","filter-no-items-text","custom-selection-primary-text","custom-selection-secondary-text","placeholder","items","modelValue","onUpdate:modelValue"])])):r("",!0),S.value===oe&&oe.type===e(ye).Transfer?(l(),b("div",Gy,[t(qe,{density:"compact",variant:"plain","primary-key-field":"id","primary-value-field":"id","primary-title-field":"name","primary-icon-field":"icon","primary-icon-type":"category","primary-color-field":"color","primary-hidden-field":"hidden","primary-sub-items-field":"subCategories","secondary-key-field":"id","secondary-value-field":"id","secondary-title-field":"name","secondary-icon-field":"icon","secondary-icon-type":"category","secondary-color-field":"color","secondary-hidden-field":"hidden",disabled:!!f.disabled||!K.value,"enable-filter":!0,"filter-placeholder":e(o)("Find category"),"filter-no-items-text":e(o)("No available category"),"show-selection-primary-text":!0,"custom-selection-primary-text":e(Ra)(oe.categoryId,de.value[e(tt).Transfer]),"custom-selection-secondary-text":e(ba)(oe.categoryId,de.value[e(tt).Transfer]),placeholder:e(o)("Category"),items:de.value[e(tt).Transfer],modelValue:oe.categoryId,"onUpdate:modelValue":Re=>oe.categoryId=Re},null,8,["disabled","filter-placeholder","filter-no-items-text","custom-selection-primary-text","custom-selection-secondary-text","placeholder","items","modelValue","onUpdate:modelValue"])])):r("",!0)]),"item.sourceAmount":a(({item:oe})=>[S.value!==oe?(l(),b("div",Jy,[s("span",null,i(tl(oe)),1),oe.type===e(ye).Transfer&&oe.sourceAccountId!==oe.destinationAccountId?(l(),p(se,{key:0,class:"icon-with-direction mx-1",size:"13",icon:e($a)},null,8,["icon"])):r("",!0),oe.type===e(ye).Transfer&&oe.sourceAccountId!==oe.destinationAccountId?(l(),b("span",Zy,i(Ca(oe)),1)):r("",!0)])):r("",!0),S.value===oe?(l(),b("div",{key:1,class:"d-flex align-center",style:_l(`width: ${oe.type===e(ye).Transfer&&oe.sourceAccountId!==oe.destinationAccountId?250:100}px`)},[t(Ce,{density:"compact",variant:"plain","persistent-placeholder":"",currency:oe.originalSourceAccountCurrency||O.value,"show-currency":!0,disabled:!!f.disabled,placeholder:e(o)("Amount"),modelValue:oe.sourceAmount,"onUpdate:modelValue":Re=>oe.sourceAmount=Re},null,8,["currency","disabled","placeholder","modelValue","onUpdate:modelValue"]),oe.type===e(ye).Transfer&&oe.sourceAccountId!==oe.destinationAccountId?(l(),p(se,{key:0,class:"icon-with-direction mx-1",size:"13",icon:e($a)},null,8,["icon"])):r("",!0),oe.type===e(ye).Transfer&&oe.sourceAccountId!==oe.destinationAccountId?(l(),p(Ce,{key:1,density:"compact",variant:"plain","persistent-placeholder":"",currency:oe.originalDestinationAccountCurrency||O.value,"show-currency":!0,disabled:!!f.disabled,placeholder:e(o)("Transfer In Amount"),modelValue:oe.destinationAmount,"onUpdate:modelValue":Re=>oe.destinationAmount=Re},null,8,["currency","disabled","placeholder","modelValue","onUpdate:modelValue"])):r("",!0)],4)):r("",!0)]),"item.actualSourceAccountName":a(({item:oe})=>[S.value!==oe?(l(),b("div",Qy,[oe.sourceAccountId&&oe.sourceAccountId!=="0"&&W.value[oe.sourceAccountId]?(l(),b("span",Xy,i(W.value[oe.sourceAccountId]?.name),1)):(l(),b("div",eg,[t(se,{class:"me-1",icon:e(cn)},null,8,["icon"]),s("span",null,i(oe.originalSourceAccountName),1)])),oe.type===e(ye).Transfer?(l(),p(se,{key:2,class:"icon-with-direction mx-1",size:"13",icon:e($a)},null,8,["icon"])):r("",!0),oe.type===e(ye).Transfer&&oe.destinationAccountId&&oe.destinationAccountId!=="0"&&W.value[oe.destinationAccountId]?(l(),b("span",tg,i(W.value[oe.destinationAccountId]?.name),1)):oe.type===e(ye).Transfer&&(!oe.destinationAccountId||oe.destinationAccountId==="0"||!W.value[oe.destinationAccountId])?(l(),b("div",ag,[t(se,{class:"me-1",icon:e(cn)},null,8,["icon"]),s("span",null,i(oe.originalDestinationAccountName),1)])):r("",!0)])):r("",!0),S.value===oe?(l(),b("div",{key:1,class:"d-flex align-center",style:_l(`width: ${oe.type===e(ye).Transfer?450:200}px`)},[t(qe,{density:"compact",variant:"plain","primary-key-field":"id","primary-value-field":"category","primary-title-field":"name","primary-footer-field":"displayBalance","primary-icon-field":"icon","primary-icon-type":"account","primary-sub-items-field":"accounts","primary-title-i18n":!0,"secondary-key-field":"id","secondary-value-field":"id","secondary-title-field":"name","secondary-footer-field":"displayBalance","secondary-icon-field":"icon","secondary-icon-type":"account","secondary-color-field":"color",disabled:!!f.disabled||!D.value.length,"enable-filter":!0,"filter-placeholder":e(o)("Find account"),"filter-no-items-text":e(o)("No available account"),"custom-selection-primary-text":ua(oe),placeholder:ul(oe),items:P.value,modelValue:oe.sourceAccountId,"onUpdate:modelValue":Re=>oe.sourceAccountId=Re},null,8,["disabled","filter-placeholder","filter-no-items-text","custom-selection-primary-text","placeholder","items","modelValue","onUpdate:modelValue"]),oe.type===e(ye).Transfer?(l(),p(se,{key:0,class:"icon-with-direction mx-1",size:"13",icon:e($a)},null,8,["icon"])):r("",!0),oe.type===e(ye).Transfer?(l(),p(qe,{key:1,density:"compact",variant:"plain","primary-key-field":"id","primary-value-field":"category","primary-title-field":"name","primary-footer-field":"displayBalance","primary-icon-field":"icon","primary-icon-type":"account","primary-sub-items-field":"accounts","primary-title-i18n":!0,"secondary-key-field":"id","secondary-value-field":"id","secondary-title-field":"name","secondary-footer-field":"displayBalance","secondary-icon-field":"icon","secondary-icon-type":"account","secondary-color-field":"color",disabled:!!f.disabled||!D.value.length,"enable-filter":!0,"filter-placeholder":e(o)("Find account"),"filter-no-items-text":e(o)("No available account"),"custom-selection-primary-text":Fa(oe),placeholder:e(o)("Destination Account"),items:P.value,modelValue:oe.destinationAccountId,"onUpdate:modelValue":Re=>oe.destinationAccountId=Re},null,8,["disabled","filter-placeholder","filter-no-items-text","custom-selection-primary-text","placeholder","items","modelValue","onUpdate:modelValue"])):r("",!0)],4)):r("",!0)]),"item.geoLocation":a(({item:oe})=>[oe.geoLocation?(l(),b("span",lg,i(`(${e(Js)(oe.geoLocation,V.value)})`),1)):oe.geoLocation?r("",!0):(l(),b("span",ng,i(e(o)("None")),1))]),"item.tagIds":a(({item:oe})=>[S.value!==oe?(l(),b("div",og,[(l(!0),b(ue,null,$e(oe.tagIds,(Re,Vt)=>(l(),p(oa,{class:be(["transaction-tag",{"font-italic":!Re||Re==="0"||!ie.value[Re]}]),size:"small","prepend-icon":Re&&Re!=="0"&&ie.value[Re]?e(la):e(cn),color:Re&&Re!=="0"&&ie.value[Re]?"default":"error",text:Re&&Re!=="0"&&ie.value[Re]?ie.value[Re].name:oe.originalTagNames[Vt],key:Re},null,8,["class","prepend-icon","color","text"]))),128)),!oe.tagIds||!oe.tagIds.length?(l(),p(oa,{key:0,class:"transaction-tag",size:"small",text:e(o)("None")},null,8,["text"])):r("",!0)])):r("",!0),S.value===oe?(l(),b("div",sg,[t(sa,{"item-title":"name","item-value":"id","auto-select-first":"","persistent-placeholder":"",multiple:"",chips:"","closable-chips":"",density:"compact",variant:"plain",disabled:!!f.disabled,placeholder:e(o)("None"),items:Y.value,"no-data-text":e(o)("No available tag"),modelValue:N.value,"onUpdate:modelValue":he[1]||(he[1]=Re=>N.value=Re)},{chip:a(({props:Re,index:Vt})=>[t(oa,Ct({class:{"font-italic":!gt(N.value,Vt)},"prepend-icon":gt(N.value,Vt)?e(la):e(cn),color:gt(N.value,Vt)?"default":"error",text:gt(N.value,Vt)?ie.value[N.value[Vt]]?.name:oe.originalTagNames[Vt]},Re),null,16,["class","prepend-icon","color","text"])]),item:a(({props:Re,item:Vt})=>[Vt.raw.hidden?r("",!0):(l(),p(le,Ct({key:0,value:Vt.value},Re),{title:a(()=>[t(ot,null,{default:a(()=>[s("div",ig,[t(se,{size:"20",start:"",icon:e(la)},null,8,["icon"]),s("span",null,i(Vt.title),1)])]),_:2},1024)]),_:2},1040,["value"]))]),_:2},1032,["disabled","placeholder","items","no-data-text","modelValue"])])):r("",!0)]),"item.comment":a(({item:oe})=>[S.value!==oe?(l(),b("span",rg,i(oe.comment||""),1)):r("",!0),S.value===oe?(l(),b("div",ug,[t(dt,{style:{width:"200px"},type:"text",density:"compact",variant:"plain","persistent-placeholder":"",placeholder:e(o)("Description"),disabled:!!f.disabled,modelValue:oe.comment,"onUpdate:modelValue":Re=>oe.comment=Re},null,8,["placeholder","disabled","modelValue","onUpdate:modelValue"])])):r("",!0)]),bottom:a(()=>[f.importTransactions?(l(),b("div",dg,[s("span",{class:be({"text-error":ce.value>0})},i(e(o)("format.misc.selectedCount",{count:Te(At.value),totalCount:Te(f.importTransactions.length)})),3),f.importTransactions.length>10?(l(),p(pt,{key:0})):r("",!0),f.importTransactions.length>10?(l(),b("span",cg,i(e(o)("Transactions Per Page")),1)):r("",!0),f.importTransactions.length>10?(l(),p(Je,{key:2,class:"ms-2",density:"compact","max-width":"100","item-title":"name","item-value":"value",disabled:!!f.disabled,items:Bt.value,modelValue:I.value,"onUpdate:modelValue":he[2]||(he[2]=oe=>I.value=oe)},null,8,["disabled","items","modelValue"])):r("",!0),f.importTransactions.length>10?(l(),p(lo,{key:3,density:"compact",disabled:!!f.disabled,totalPageCount:at.value,modelValue:$.value,"onUpdate:modelValue":he[3]||(he[3]=oe=>$.value=oe)},null,8,["disabled","totalPageCount","modelValue"])):r("",!0)])):r("",!0)]),_:1},8,["class","height","headers","items","search","no-data-text","items-per-page","page"]),t(Tt,{width:"640",modelValue:M.value,"onUpdate:modelValue":he[9]||(he[9]=oe=>M.value=oe)},{default:a(()=>[t(Ee,{class:"pa-2 pa-sm-4 pa-md-4"},{title:a(()=>[s("div",mg,[s("h4",pg,i(e(o)("Filter Description")),1)])]),default:a(()=>[t(ve,{class:"mb-md-4 w-100 d-flex justify-center"},{default:a(()=>[t(dt,{type:"text","persistent-placeholder":"",label:e(o)("Description"),placeholder:e(o)("Description"),modelValue:U.value,"onUpdate:modelValue":he[6]||(he[6]=oe=>U.value=oe)},null,8,["label","placeholder","modelValue"])]),_:1}),t(ve,{class:"overflow-y-visible"},{default:a(()=>[s("div",vg,[t(H,{disabled:!U.value,onClick:he[7]||(he[7]=oe=>{M.value=!1,A.value.description=U.value})},{default:a(()=>[j(i(e(o)("OK")),1)]),_:1},8,["disabled"]),t(H,{color:"secondary",variant:"tonal",onClick:he[8]||(he[8]=oe=>{M.value=!1,U.value=""})},{default:a(()=>[j(i(e(o)("Cancel")),1)]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(rt,{title:e(o)("Custom Date Range"),"min-time":A.value.minDatetime,"max-time":A.value.maxDatetime,show:z.value,"onUpdate:show":he[10]||(he[10]=oe=>z.value=oe),"onDateRange:change":it,onError:dl},null,8,["title","min-time","max-time","show"]),t(hy,{ref_key:"batchReplaceDialog",ref:w},null,512),t(My,{ref_key:"batchReplaceAllTypesDialog",ref:m},null,512),t(Oy,{ref_key:"batchCreateDialog",ref:x},null,512),t(mt,{ref_key:"snackbar",ref:F},null,512)],64)}}}),yg={class:"d-flex align-center justify-center"},gg={class:"d-flex w-100 align-center justify-center"},hg={class:"text-h4"},bg={class:"mt-4 cursor-default"},kg=["href"],_g={key:0,class:"ms-1"},Tg={key:1,class:"ms-1"},xg={key:2,class:"ms-1"},Cg={class:"text-h4 mb-1"},wg={class:"my-5"},Ag={class:"d-flex justify-sm-space-between gap-4 flex-wrap justify-center mt-10"},Ig=["accept"];const Sg=Pe({__name:"ImportDialog",props:{persistent:{type:Boolean}},setup(f,{expose:T}){const{tt:n,getCurrentNumeralSystemType:o,getAllSupportedImportFileCagtegoryAndTypes:g,formatNumberToLocalizedNumerals:c}=Oe(),v=_a(),y=Ta(),k=fl(),h=Nl(),d=Gs(),u=ei(),C=xe("confirmDialog"),F=xe("snackbar"),w=xe("importTransactionDefineColumnTab"),m=xe("importTransactionExecuteCustomScriptTab"),x=xe("importTransactionCheckDataTab"),S=xe("fileInput"),N=L(!1),A=L(""),$=L("uploadFile"),I=L(0),z=L("ezbookkeeping"),M=L("ezbookkeeping_csv"),U=L("utf-8"),X=L(0),Z=L(null),q=L(""),O=L(void 0),V=L(void 0),_=L(null),D=L(!0),P=L(!1);let W=null,ne=null;const de=B(()=>o()),J=B(()=>g()),Y=B(()=>K.value[z.value]?.subTypes),ie=B(()=>K.value[z.value]?.supportedEncodings),fe=B(()=>K.value[z.value]?.dataFromTextbox??!1),te=B(()=>{const Qe=[{name:"uploadFile",title:n("Upload File"),subTitle:n("Upload Transaction Data File")}];return(z.value==="dsv"||z.value==="dsv_data")&&(X.value===1?Qe.push({name:"executeCustomScript",title:n("Execute Custom Script"),subTitle:n("Execute Custom Script to Parse Data")}):Qe.push({name:"defineColumn",title:n("Define Column"),subTitle:n("Define and Check Column Mapping")})),Qe.push({name:"checkData",title:n("Check & Modify"),subTitle:n("Check and Modify Your Data")},{name:"finalResult",title:n("Complete"),subTitle:n("Data Import Completed")}),Qe}),K=B(()=>{const Qe={};for(const pe of J.value)for(const ce of pe.fileTypes)Qe[ce.type]=ce;return Qe}),me=B(()=>{if(Y.value&&Y.value.length){const Qe=ds(Y.value,M.value);if(Qe)return Qe}return K.value[z.value]?.extensions}),Ne=B(()=>{const Qe=K.value[z.value]?.document;if(!Qe)return;const pe=Qe.language?Qe.language+"/":"",ce=Qe.anchor?"#"+Qe.anchor:"";return`https://ezbookkeeping.mayswind.net/${pe}export_and_import${ce}`}),et=B(()=>K.value[z.value]?.document?.displayLanguageName),Me=B(()=>Z.value?.name||"");function Ve(Qe){return de.value.formatNumber(Qe)}function bt(){z.value="ezbookkeeping",M.value="ezbookkeeping_csv",U.value="utf-8",X.value=0,$.value="uploadFile",I.value=0,Z.value=null,q.value="",O.value=void 0,w.value?.reset(),m.value?.reset(),V.value=void 0,x.value?.reset(),N.value=!0,A.value=pl();const Qe=[v.loadAllAccounts({force:!1}),y.loadAllCategories({force:!1}),k.loadAllTags({force:!1})];return Promise.all(Qe).then(()=>{D.value=!1}).catch(pe=>{Xt.error("failed to load essential data for importing transaction",pe),D.value=!1,N.value=!1,pe.processed||ne&&ne(pe)}),new Promise((pe,ce)=>{W=pe,ne=ce})}function Bt(){P.value||S.value?.click()}function at(Qe){if(!Qe||!Qe.target)return;const pe=Qe.target;!pe.files||!pe.files.length||!pe.files[0]||(Z.value=pe.files[0],pe.value="")}function Yt(){let Qe,pe=z.value,ce;if(Y.value&&(pe=M.value),ie.value&&(ce=U.value),fe.value)if(fe.value){if(!q.value){F.value?.showError("No data to import");return}if(pe==="custom_csv")Qe=Dt.CSV.createFile(q.value,"import");else if(pe==="custom_tsv")Qe=Dt.TSV.createFile(q.value,"import");else{F.value?.showError("Parameter Invalid");return}ce="utf-8"}else{F.value?.showMessage("An error occurred");return}else{if(!Z.value){F.value?.showError("Please select a file to import");return}Qe=Z.value}const ke=z.value==="dsv"||z.value==="dsv_data";if(ke&&$.value==="uploadFile")P.value=!0,h.parseImportDsvFile({fileType:pe,fileEncoding:ce,importFile:Qe}).then(Be=>{Be&&Be.length?X.value===1?(m.value?.reset(),O.value=Be,$.value="executeCustomScript"):(w.value?.reset(),O.value=Be,$.value="defineColumn"):(O.value=void 0,F.value?.showError("No data to import")),P.value=!1}).catch(Be=>{P.value=!1,Be.processed||F.value?.showError(Be)});else{let Be,ct,we,st,De,St,_t,We,Le,jt;if(ke&&X.value===0){const Ze=w.value?.generateResult();if(!Ze)return;Be=Ze.columnMapping,ct=Ze.transactionTypeMapping,we=Ze.includeHeader,st=Ze.timeFormat,De=Ze.timezoneFormat,St=Ze.amountDecimalSeparator,_t=Ze.amountDigitGroupingSymbol,We=Ze.geoLocationSeparator,Le=Ze.geoLocationOrder,jt=Ze.tagSeparator}else if(ke&&X.value===1){const Ze=m.value?.generateResult();if(!Ze)return;pe="ezbookkeeping_json",ce=void 0,Qe=Dt.JSON.createFile(Ze,"import")}P.value=!0,h.parseImportTransaction({fileType:pe,fileEncoding:ce,importFile:Qe,columnMapping:Be,transactionTypeMapping:ct,hasHeaderLine:we,timeFormat:st,timezoneFormat:De,amountDecimalSeparator:St,amountDigitGroupingSymbol:_t,geoSeparator:We,geoOrder:Le,tagSeparator:jt}).then(Ze=>{const Te=[];if(Ze.items)for(const[Nt,xt]of Da(Ze.items)){const gt=Ou.of(Nt,xt);Te.push(gt)}x.value?.reset(),Te&&Te.length>=0&&Te.length<10?x.value?.setCountPerPage(-1):x.value?.setCountPerPage(10),V.value=Te,$.value="checkData",P.value=!1}).catch(Ze=>{P.value=!1,Ze.processed||F.value?.showError(Ze)})}}function At(){if(x.value?.isEditing)return;const Qe=[];if(V.value){for(const pe of V.value)if(pe.valid&&pe.selected)Qe.push(pe);else if(!pe.valid&&pe.selected){F.value?.showError("Cannot import invalid transactions");return}}if(Qe.length<1){F.value?.showError("No data to import");return}C.value?.open("format.misc.confirmImportTransactions",{count:Ve(Qe.length)}).then(()=>{P.value=!0;let pe;Qe.length>100&&setTimeout(()=>{if(!P.value){Xt.warn("transaction import is not submitting");return}pe=setInterval(()=>{P.value&&h.getImportTransactionsProcess({clientSessionId:A.value}).then(ce=>{Ht(ce)&&0<=ce&&ce<100?I.value=ce:(I.value=0,clearInterval(pe),pe=void 0)}).catch(()=>{I.value=0,clearInterval(pe),pe=void 0})},2e3)},2e3),h.importTransactions({transactions:Qe,clientSessionId:A.value}).then(ce=>{pe&&(I.value=0,clearInterval(pe),pe=void 0),_.value=ce,$.value="finalResult",v.updateAccountListInvalidState(!0),h.updateTransactionListInvalidState(!0),d.updateTransactionOverviewInvalidState(!0),u.updateTransactionStatisticsInvalidState(!0),P.value=!1}).catch(ce=>{pe&&(I.value=0,clearInterval(pe),pe=void 0),P.value=!1,ce.processed||F.value?.showError(ce)})})}function Zt(Qe){Qe?W&&W():ne&&ne(),N.value=!1}return Ft(z,()=>{Y.value&&Y.value.length&&(M.value=Y.value[0].type),Z.value=null,O.value=void 0,V.value=void 0}),Ft(M,Qe=>{let pe=ds(Y.value,Qe);pe||(pe=K.value[z.value]?.extensions),Z.value&&Z.value.name&&!ju(Z.value.name,pe||"")&&(Z.value=null)}),T({open:bt}),(Qe,pe)=>{const ce=Ie("steps-bar"),ke=Ie("two-column-select");return l(),b(ue,null,[t(Tt,{persistent:!!f.persistent,modelValue:N.value,"onUpdate:modelValue":pe[9]||(pe[9]=Be=>N.value=Be)},{default:a(()=>[t(Ee,{class:"pa-6 pa-sm-10 pa-md-12"},{title:a(()=>[s("div",yg,[s("div",gg,[s("h4",hg,i(e(n)("Import Transactions")),1),D.value?(l(),p(je,{key:0,indeterminate:"",size:"22",class:"ms-2"})):r("",!0)]),$.value==="defineColumn"&&w.value?.menus?(l(),p(H,{key:0,density:"comfortable",color:"default",variant:"text",class:"ms-2",icon:!0,disabled:D.value||P.value},{default:a(()=>[t(se,{icon:e(Jt)},null,8,["icon"]),t(nt,{activator:"parent","max-height":"500"},{default:a(()=>[t(ze,null,{default:a(()=>[(l(!0),b(ue,null,$e(w.value.menus,(Be,ct)=>(l(),p(le,{key:ct,"prepend-icon":Be.prependIcon,title:Be.title,disabled:Be.disabled,onClick:we=>Be.onClick()},null,8,["prepend-icon","title","disabled","onClick"]))),128))]),_:1})]),_:1})]),_:1},8,["disabled"])):r("",!0),$.value==="executeCustomScript"&&m.value?.menus?(l(),p(H,{key:1,density:"comfortable",color:"default",variant:"text",class:"ms-2",icon:!0,disabled:D.value||P.value},{default:a(()=>[t(se,{icon:e(Jt)},null,8,["icon"]),t(nt,{activator:"parent","max-height":"500"},{default:a(()=>[t(ze,null,{default:a(()=>[(l(!0),b(ue,null,$e(m.value.menus,(Be,ct)=>(l(),p(le,{key:ct,"prepend-icon":Be.prependIcon,title:Be.title,disabled:Be.disabled,onClick:we=>Be.onClick()},null,8,["prepend-icon","title","disabled","onClick"]))),128))]),_:1})]),_:1})]),_:1},8,["disabled"])):r("",!0),$.value==="checkData"&&x.value?.filterMenus?(l(),p(H,{key:2,density:"comfortable",color:"default",variant:"text",class:"ms-2",icon:!0,disabled:D.value||P.value},{default:a(()=>[t(se,{icon:e(Hn)},null,8,["icon"]),t(nt,{activator:"parent","max-height":"500"},{default:a(()=>[t(ze,null,{default:a(()=>[(l(!0),b(ue,null,$e(x.value.filterMenus,(Be,ct)=>(l(),b(ue,{key:ct},[t(xn,{title:Be.title},null,8,["title"]),ct>0?(l(),p(Ke,{key:0,class:"my-2"})):r("",!0),(l(!0),b(ue,null,$e(Be.items,(we,st)=>(l(),p(le,{key:`menu_${ct}_${st}`,"prepend-icon":we.prependIcon,title:we.title,subtitle:we.subTitle,"append-icon":we.appendIcon,disabled:we.disabled,onClick:De=>we.onClick()},null,8,["prepend-icon","title","subtitle","append-icon","disabled","onClick"]))),128))],64))),128))]),_:1})]),_:1})]),_:1},8,["disabled"])):r("",!0),$.value==="checkData"&&x.value?.toolMenus?(l(),p(H,{key:3,density:"comfortable",color:"default",variant:"text",class:"ms-2",icon:!0,disabled:D.value||P.value},{default:a(()=>[t(se,{icon:e(Jt)},null,8,["icon"]),t(nt,{activator:"parent","max-height":"500"},{default:a(()=>[t(ze,null,{default:a(()=>[(l(!0),b(ue,null,$e(x.value.toolMenus,(Be,ct)=>(l(),b(ue,{key:ct},[Be.divider?(l(),p(Ke,{key:0,class:"my-2"})):r("",!0),t(le,{"prepend-icon":Be.prependIcon,title:Be.title,subtitle:Be.subTitle,"append-icon":Be.appendIcon,disabled:Be.disabled,onClick:we=>Be.onClick()},null,8,["prepend-icon","title","subtitle","append-icon","disabled","onClick"])],64))),128))]),_:1})]),_:1})]),_:1},8,["disabled"])):r("",!0)])]),default:a(()=>[s("div",bg,[t(ce,{"min-width":"700",clickable:!1,steps:te.value,"current-step":$.value},null,8,["steps","current-step"])]),t(ja,{class:"disable-tab-transition",modelValue:$.value,"onUpdate:modelValue":pe[6]||(pe[6]=Be=>$.value=Be)},{default:a(()=>[t(Pt,{value:"uploadFile"},{default:a(()=>[t(Ae,null,{default:a(()=>[t(R,{cols:"12",md:"12"},{default:a(()=>[t(ke,{"primary-key-field":"displayCategoryName","primary-value-field":"displayCategoryName","primary-title-field":"displayCategoryName","primary-sub-items-field":"fileTypes","secondary-key-field":"type","secondary-value-field":"type","secondary-title-field":"displayName",disabled:P.value,"enable-filter":!0,"filter-placeholder":e(n)("Find file type"),"filter-no-items-text":e(n)("No available file type"),label:e(n)("File Type"),placeholder:e(n)("File Type"),items:J.value,"auto-update-menu-position":!0,modelValue:z.value,"onUpdate:modelValue":pe[0]||(pe[0]=Be=>z.value=Be)},null,8,["disabled","filter-placeholder","filter-no-items-text","label","placeholder","items","modelValue"])]),_:1}),Y.value?(l(),p(R,{key:0,cols:"12",md:"12"},{default:a(()=>[t(Je,{"item-title":"displayName","item-value":"type",disabled:P.value,label:e(n)("Format"),placeholder:e(n)("Format"),items:Y.value,modelValue:M.value,"onUpdate:modelValue":pe[1]||(pe[1]=Be=>M.value=Be)},null,8,["disabled","label","placeholder","items","modelValue"])]),_:1})):r("",!0),!fe.value&&ie.value?(l(),p(R,{key:1,cols:"12",md:"12"},{default:a(()=>[t(Je,{"item-title":"displayName","item-value":"encoding",disabled:P.value,label:e(n)("File Encoding"),placeholder:e(n)("File Encoding"),items:ie.value,modelValue:U.value,"onUpdate:modelValue":pe[2]||(pe[2]=Be=>U.value=Be)},null,8,["disabled","label","placeholder","items","modelValue"])]),_:1})):r("",!0),z.value==="dsv"||z.value==="dsv_data"?(l(),p(R,{key:2,cols:"12",md:"12"},{default:a(()=>[t(Je,{"item-title":"displayName","item-value":"type",disabled:P.value,label:e(n)("Handling Method"),placeholder:e(n)("Handling Method"),items:[{displayName:e(n)("Column Mapping"),type:0},{displayName:e(n)("Custom Script"),type:1}],modelValue:X.value,"onUpdate:modelValue":pe[3]||(pe[3]=Be=>X.value=Be)},null,8,["disabled","label","placeholder","items","modelValue"])]),_:1})):r("",!0),fe.value?r("",!0):(l(),p(R,{key:3,cols:"12",md:"12"},{default:a(()=>[t(dt,{readonly:"","persistent-placeholder":"",type:"text",class:"always-cursor-pointer",disabled:P.value,label:e(n)("Data File"),placeholder:e(n)("format.misc.clickToSelectedFile",{extensions:me.value}),modelValue:Me.value,"onUpdate:modelValue":pe[4]||(pe[4]=Be=>Me.value=Be),onClick:Bt},null,8,["disabled","label","placeholder","modelValue"])]),_:1})),fe.value?(l(),p(R,{key:4,cols:"12",md:"12"},{default:a(()=>[t(La,{type:"text","persistent-placeholder":"",rows:"5",disabled:P.value,placeholder:e(n)("Data to import"),modelValue:q.value,"onUpdate:modelValue":pe[5]||(pe[5]=Be=>q.value=Be)},null,8,["disabled","placeholder","modelValue"])]),_:1})):r("",!0),Ne.value?(l(),p(R,{key:5,cols:"12",md:"12",class:"mb-0 pb-0"},{default:a(()=>[s("a",{href:Ne.value,class:be({disabled:P.value}),target:"_blank"},[t(se,{icon:e(Ds),size:"16"},null,8,["icon"]),z.value==="dsv"||z.value==="dsv_data"?(l(),b("span",_g,i(e(n)("How to import this file?")),1)):r("",!0),z.value!=="dsv"&&z.value!=="dsv_data"?(l(),b("span",Tg,i(e(n)("How to export this file?")),1)):r("",!0),et.value?(l(),b("span",xg,"["+i(et.value)+"]",1)):r("",!0)],10,kg)]),_:1})):r("",!0)]),_:1})]),_:1}),t(Pt,{value:"defineColumn"},{default:a(()=>[t(Qf,{ref_key:"importTransactionDefineColumnTab",ref:w,"parsed-file-data":O.value,disabled:D.value||P.value},null,8,["parsed-file-data","disabled"])]),_:1}),t(Pt,{value:"executeCustomScript"},{default:a(()=>[t(ay,{ref_key:"importTransactionExecuteCustomScriptTab",ref:m,"parsed-file-data":O.value,disabled:D.value||P.value},null,8,["parsed-file-data","disabled"])]),_:1}),t(Pt,{value:"checkData"},{default:a(()=>[t(fg,{ref_key:"importTransactionCheckDataTab",ref:x,"import-transactions":V.value,disabled:D.value||P.value},null,8,["import-transactions","disabled"])]),_:1}),t(Pt,{value:"finalResult"},{default:a(()=>[s("h4",Cg,i(e(n)("Data Import Completed")),1),s("p",wg,i(e(n)("format.misc.importTransactionResult",{count:Ve(_.value||0)})),1)]),_:1})]),_:1},8,["modelValue"]),s("div",Ag,[$.value!=="finalResult"?(l(),p(H,{key:0,color:"secondary",variant:"tonal",disabled:D.value||P.value,"prepend-icon":e(Tn),onClick:pe[7]||(pe[7]=Be=>Zt(!1))},{default:a(()=>[j(i(e(n)("Cancel")),1)]),_:1},8,["disabled","prepend-icon"])):r("",!0),$.value==="defineColumn"||$.value==="executeCustomScript"||$.value==="uploadFile"?(l(),p(H,{key:1,class:"button-icon-with-direction",color:"primary",disabled:D.value||P.value||!fe.value&&!Z.value||fe.value&&!q.value,"append-icon":P.value?void 0:e($a),onClick:Yt},{default:a(()=>[j(i(e(n)("Next"))+" ",1),P.value?(l(),p(je,{key:0,indeterminate:"",size:"22",class:"ms-2"})):r("",!0)]),_:1},8,["disabled","append-icon"])):r("",!0),$.value==="checkData"?(l(),p(H,{key:2,class:"button-icon-with-direction",color:"teal",disabled:P.value||x.value?.isEditing||!x.value?.canImport,"append-icon":P.value?void 0:e($a),onClick:At},{default:a(()=>[j(i(P.value&&I.value>0?e(n)("format.misc.importingTransactions",{process:e(c)(I.value,2)}):e(n)("Import"))+" ",1),P.value?(l(),p(je,{key:0,indeterminate:"",size:"22",class:"ms-2"})):r("",!0)]),_:1},8,["disabled","append-icon"])):r("",!0),$.value==="finalResult"?(l(),p(H,{key:3,color:"secondary",variant:"tonal","append-icon":e(Ye),onClick:pe[8]||(pe[8]=Be=>Zt(!0))},{default:a(()=>[j(i(e(n)("Close")),1)]),_:1},8,["append-icon"])):r("",!0)])]),_:1})]),_:1},8,["persistent","modelValue"]),t(pa,{ref_key:"confirmDialog",ref:C},null,512),t(mt,{ref_key:"snackbar",ref:F},null,512),s("input",{ref_key:"fileInput",ref:S,type:"file",style:{display:"none"},accept:me.value,onChange:pe[10]||(pe[10]=Be=>at(Be))},null,40,Ig)],64)}}}),Vg={key:0,class:"d-flex align-center justify-center"},$g={class:"w-100 text-center"},Dg={class:"text-h4"},Fg={key:1,class:"d-flex align-center"},Ng={key:0},Mg={class:"text-body-1"},Eg={class:"ms-3"},Ug={class:"ms-3"},Pg={class:"ms-3"},Bg={class:"w-100 d-flex justify-center mt-2 mt-sm-4 mt-md-6 gap-4"},Xl=Pe({__name:"AccountFilterSettingsCard",props:{type:{},dialogMode:{type:Boolean},autoSave:{type:Boolean}},emits:["settings:change"],setup(f,{emit:T}){const n=f,o=T,{tt:g}=Oe(),{loading:c,showHidden:v,filterAccountIds:y,title:k,applyText:h,allowHiddenAccount:d,allCategorizedAccounts:u,hasAnyAvailableAccount:C,hasAnyVisibleAccount:F,isAccountChecked:w,loadFilterAccountIds:m,saveFilterAccountIds:x}=qu(n.type),S=_a(),N=xe("snackbar"),A=L(Yn.values().map(V=>V.type));function $(){S.loadAllAccounts({force:!1}).then(()=>{c.value=!1,m()||N.value?.showError("Parameter Invalid")}).catch(V=>{c.value=!1,V.processed||N.value?.showError(V)})}function I(V,_){Hu(y.value,V,!_),n.autoSave&&q()}function z(V,_){y.value[V.id]=!_,n.autoSave&&q()}function M(){Yu(y.value,S.allAccountsMap,!d.value),n.autoSave&&q()}function U(){Wu(y.value,S.allAccountsMap,!d.value),n.autoSave&&q()}function X(){Ku(y.value,S.allAccountsMap,!d.value),n.autoSave&&q()}function Z(){Gu(y.value,S.allAccountsMap),n.autoSave&&q()}function q(){const V=x();o("settings:change",V)}function O(){o("settings:change",!1)}return $(),(V,_)=>{const D=Ie("ItemIcon");return l(),b(ue,null,[t(Ee,{class:be({"pa-2 pa-sm-4 pa-md-8":f.dialogMode})},{title:a(()=>[f.dialogMode?(l(),b("div",Vg,[s("div",$g,[s("h4",Dg,i(e(g)(e(k))),1)]),t(H,{density:"comfortable",color:"default",variant:"text",class:"ms-2",disabled:e(c)||!e(C),icon:!0},{default:a(()=>[t(se,{icon:e(Jt)},null,8,["icon"]),t(nt,{activator:"parent"},{default:a(()=>[t(ze,null,{default:a(()=>[t(le,{"prepend-icon":e(ia),title:e(g)("Select All"),disabled:!e(F),onClick:M},null,8,["prepend-icon","title","disabled"]),t(le,{"prepend-icon":e(sl),title:e(g)("Select None"),disabled:!e(F),onClick:U},null,8,["prepend-icon","title","disabled"]),t(le,{"prepend-icon":e(il),title:e(g)("Invert Selection"),disabled:!e(F),onClick:X},null,8,["prepend-icon","title","disabled"]),e(d)?(l(),p(Ke,{key:0,class:"my-2"})):r("",!0),e(d)?(l(),p(le,{key:1,"prepend-icon":e(ia),title:e(g)("Select All Visible"),disabled:!e(F),onClick:Z},null,8,["prepend-icon","title","disabled"])):r("",!0),e(d)?(l(),p(Ke,{key:2,class:"my-2"})):r("",!0),e(d)&&!e(v)?(l(),p(le,{key:3,"prepend-icon":e(ca),title:e(g)("Show Hidden Accounts"),onClick:_[0]||(_[0]=P=>v.value=!0)},null,8,["prepend-icon","title"])):r("",!0),e(d)&&e(v)?(l(),p(le,{key:4,"prepend-icon":e(Gt),title:e(g)("Hide Hidden Accounts"),onClick:_[1]||(_[1]=P=>v.value=!1)},null,8,["prepend-icon","title"])):r("",!0)]),_:1})]),_:1})]),_:1},8,["disabled"])])):f.dialogMode?r("",!0):(l(),b("div",Fg,[s("span",null,i(e(g)(e(k))),1),t(pt),t(H,{density:"comfortable",color:"default",variant:"text",class:"ms-2",disabled:e(c),icon:!0},{default:a(()=>[t(se,{icon:e(Jt)},null,8,["icon"]),t(nt,{activator:"parent"},{default:a(()=>[t(ze,null,{default:a(()=>[t(le,{"prepend-icon":e(ia),title:e(g)("Select All"),disabled:!e(F),onClick:M},null,8,["prepend-icon","title","disabled"]),t(le,{"prepend-icon":e(sl),title:e(g)("Select None"),disabled:!e(F),onClick:U},null,8,["prepend-icon","title","disabled"]),t(le,{"prepend-icon":e(il),title:e(g)("Invert Selection"),disabled:!e(F),onClick:X},null,8,["prepend-icon","title","disabled"]),e(d)?(l(),p(Ke,{key:0,class:"my-2"})):r("",!0),e(d)?(l(),p(le,{key:1,"prepend-icon":e(ia),title:e(g)("Select All Visible"),disabled:!e(F),onClick:Z},null,8,["prepend-icon","title","disabled"])):r("",!0),e(d)?(l(),p(Ke,{key:2,class:"my-2"})):r("",!0),e(d)&&!e(v)?(l(),p(le,{key:3,"prepend-icon":e(ca),title:e(g)("Show Hidden Accounts"),onClick:_[2]||(_[2]=P=>v.value=!0)},null,8,["prepend-icon","title"])):r("",!0),e(d)&&e(v)?(l(),p(le,{key:4,"prepend-icon":e(Gt),title:e(g)("Hide Hidden Accounts"),onClick:_[3]||(_[3]=P=>v.value=!1)},null,8,["prepend-icon","title"])):r("",!0)]),_:1})]),_:1})]),_:1},8,["disabled"])]))]),default:a(()=>[e(c)?(l(),b("div",Ng,[(l(),b(ue,null,$e([1,2,3],P=>t(ut,{type:"paragraph",loading:e(c),key:P},null,8,["loading"])),64))])):r("",!0),!e(c)&&!e(F)?(l(),p(ve,{key:1,class:be({"mt-0 mt-sm-2 mt-md-4":f.dialogMode})},{default:a(()=>[s("span",Mg,i(e(g)("No available account")),1)]),_:1},8,["class"])):!e(c)&&e(F)?(l(),p(ve,{key:2,class:be({"mt-0 mt-sm-2 mt-md-4":f.dialogMode})},{default:a(()=>[t(Vl,{class:"account-categories",multiple:"",modelValue:A.value,"onUpdate:modelValue":_[4]||(_[4]=P=>A.value=P)},{default:a(()=>[(l(!0),b(ue,null,$e(e(u),P=>Pa((l(),p($l,{key:P.category,value:P.category,class:"border"},{default:a(()=>[t(Dl,{class:"expand-panel-title-with-bg py-0"},{default:a(()=>[s("span",Eg,i(e(g)(P.name)),1)]),_:2},1024),t(Fl,null,{default:a(()=>[t(ze,{rounded:"",density:"comfortable",class:"pa-0"},{default:a(()=>[(l(!0),b(ue,null,$e(P.allAccounts,(W,ne)=>(l(),b(ue,{key:W.id},[(e(v)?ne>0:!W.hidden&&ne>P.firstVisibleAccountIndex)?(l(),p(Ke,{key:0})):r("",!0),e(v)||!W.hidden?(l(),p(le,{key:1},{prepend:a(()=>[t(za,{"model-value":e(Zu)(W,e(y)),indeterminate:e(Ju)(W,e(y)),"onUpdate:modelValue":de=>I(W,de)},{label:a(()=>[t(D,{class:"d-flex","icon-type":"account","icon-id":W.icon,color:W.color,"hidden-status":W.hidden},null,8,["icon-id","color","hidden-status"]),s("span",Ug,i(W.name),1)]),_:2},1032,["model-value","indeterminate","onUpdate:modelValue"])]),_:2},1024)):r("",!0),(e(v)||!W.hidden)&&W.type===e(aa).MultiSubAccounts.type&&(e(v)&&P.allSubAccounts[W.id]||P.allVisibleSubAccountCounts[W.id])?(l(),p(Ke,{key:2})):r("",!0),(e(v)||!W.hidden)&&W.type===e(aa).MultiSubAccounts.type&&(e(v)&&P.allSubAccounts[W.id]||P.allVisibleSubAccountCounts[W.id])?(l(),p(ze,{key:3,rounded:"",density:"comfortable",class:"pa-0 ms-4"},{default:a(()=>[(l(!0),b(ue,null,$e(P.allSubAccounts[W.id],(de,J)=>(l(),b(ue,{key:de.id},[(e(v)?J>0:!de.hidden&&J>P.allFirstVisibleSubAccountIndexes[W.id])?(l(),p(Ke,{key:0})):r("",!0),e(v)||!de.hidden?(l(),p(le,{key:1},{prepend:a(()=>[t(za,{"model-value":e(w)(de,e(y)),"onUpdate:modelValue":Y=>z(de,Y)},{label:a(()=>[t(D,{class:"d-flex","icon-type":"account","icon-id":de.icon,color:de.color,"hidden-status":de.hidden},null,8,["icon-id","color","hidden-status"]),s("span",Pg,i(de.name),1)]),_:2},1032,["model-value","onUpdate:modelValue"])]),_:2},1024)):r("",!0)],64))),128))]),_:2},1024)):r("",!0)],64))),128))]),_:2},1024)]),_:2},1024)]),_:2},1032,["value"])),[[Ba,e(v)||P.allVisibleAccountCount>0]])),128))]),_:1},8,["modelValue"])]),_:1},8,["class"])):r("",!0),f.dialogMode?(l(),p(ve,{key:3,class:"overflow-y-visible"},{default:a(()=>[s("div",Bg,[t(H,{disabled:!e(F),onClick:q},{default:a(()=>[j(i(e(g)(e(h))),1)]),_:1},8,["disabled"]),t(H,{color:"secondary",variant:"tonal",onClick:O},{default:a(()=>[j(i(e(g)("Cancel")),1)]),_:1})])]),_:1})):r("",!0)]),_:1},8,["class"]),t(mt,{ref_key:"snackbar",ref:N},null,512)],64)}}}),Lg={key:0,class:"d-flex align-center justify-center"},Rg={class:"w-100 text-center"},zg={class:"text-h4"},Og={key:1,class:"d-flex align-center"},jg={key:0},qg={class:"ms-3"},Hg={key:0,class:"ms-5 py-3"},Yg={class:"ms-3"},Wg={class:"ms-3"},Kg={class:"w-100 d-flex justify-center mt-2 mt-sm-4 mt-md-6 gap-4"},no=Pe({__name:"CategoryFilterSettingsCard",props:{type:{},dialogMode:{type:Boolean},autoSave:{type:Boolean},categoryTypes:{}},emits:["settings:change"],setup(f,{emit:T}){const n=f,o=T,{tt:g}=Oe(),{loading:c,showHidden:v,filterCategoryIds:y,title:k,applyText:h,allTransactionCategories:d,hasAnyAvailableCategory:u,hasAnyVisibleCategory:C,hasAvailableCategory:F,isCategoryChecked:w,getCategoryTypeName:m,loadFilterCategoryIds:x,saveFilterCategoryIds:S}=Qu(n.type,n.categoryTypes),N=Ta(),A=xe("snackbar"),$=L([tt.Income,tt.Expense,tt.Transfer]);function I(){N.loadAllCategories({force:!1}).then(()=>{c.value=!1,x()||A.value?.showError("Parameter Invalid")}).catch(_=>{c.value=!1,_.processed||A.value?.showError(_)})}function z(_,D){_&&(y.value[_.id]=!D,n.autoSave&&O())}function M(_,D){Xu(y.value,!D,_),n.autoSave&&O()}function U(){ed(y.value,N.allTransactionCategoriesMap),n.autoSave&&O()}function X(){td(y.value,N.allTransactionCategoriesMap),n.autoSave&&O()}function Z(){ad(y.value,N.allTransactionCategoriesMap),n.autoSave&&O()}function q(){ld(y.value,N.allTransactionCategoriesMap),n.autoSave&&O()}function O(){const _=S();o("settings:change",_)}function V(){o("settings:change",!1)}return I(),(_,D)=>{const P=Ie("ItemIcon");return l(),b(ue,null,[t(Ee,{class:be({"pa-2 pa-sm-4 pa-md-8":f.dialogMode})},{title:a(()=>[f.dialogMode?(l(),b("div",Lg,[s("div",Rg,[s("h4",zg,i(e(g)(e(k))),1)]),t(H,{density:"comfortable",color:"default",variant:"text",class:"ms-2",disabled:e(c)||!e(u),icon:!0},{default:a(()=>[t(se,{icon:e(Jt)},null,8,["icon"]),t(nt,{activator:"parent"},{default:a(()=>[t(ze,null,{default:a(()=>[t(le,{"prepend-icon":e(ia),title:e(g)("Select All"),disabled:!e(C),onClick:U},null,8,["prepend-icon","title","disabled"]),t(le,{"prepend-icon":e(sl),title:e(g)("Select None"),disabled:!e(C),onClick:X},null,8,["prepend-icon","title","disabled"]),t(le,{"prepend-icon":e(il),title:e(g)("Invert Selection"),disabled:!e(C),onClick:Z},null,8,["prepend-icon","title","disabled"]),t(Ke,{class:"my-2"}),t(le,{"prepend-icon":e(ia),title:e(g)("Select All Visible"),disabled:!e(C),onClick:q},null,8,["prepend-icon","title","disabled"]),t(Ke,{class:"my-2"}),e(v)?r("",!0):(l(),p(le,{key:0,"prepend-icon":e(ca),title:e(g)("Show Hidden Transaction Categories"),onClick:D[0]||(D[0]=W=>v.value=!0)},null,8,["prepend-icon","title"])),e(v)?(l(),p(le,{key:1,"prepend-icon":e(Gt),title:e(g)("Hide Hidden Transaction Categories"),onClick:D[1]||(D[1]=W=>v.value=!1)},null,8,["prepend-icon","title"])):r("",!0)]),_:1})]),_:1})]),_:1},8,["disabled"])])):f.dialogMode?r("",!0):(l(),b("div",Og,[s("span",null,i(e(g)(e(k))),1),t(pt),t(H,{density:"comfortable",color:"default",variant:"text",class:"ms-2",disabled:e(c),icon:!0},{default:a(()=>[t(se,{icon:e(Jt)},null,8,["icon"]),t(nt,{activator:"parent"},{default:a(()=>[t(ze,null,{default:a(()=>[t(le,{"prepend-icon":e(ia),title:e(g)("Select All"),disabled:!e(C),onClick:U},null,8,["prepend-icon","title","disabled"]),t(le,{"prepend-icon":e(sl),title:e(g)("Select None"),disabled:!e(C),onClick:X},null,8,["prepend-icon","title","disabled"]),t(le,{"prepend-icon":e(il),title:e(g)("Invert Selection"),disabled:!e(C),onClick:Z},null,8,["prepend-icon","title","disabled"]),t(Ke,{class:"my-2"}),t(le,{"prepend-icon":e(ia),title:e(g)("Select All Visible"),disabled:!e(C),onClick:q},null,8,["prepend-icon","title","disabled"]),t(Ke,{class:"my-2"}),e(v)?r("",!0):(l(),p(le,{key:0,"prepend-icon":e(ca),title:e(g)("Show Hidden Transaction Categories"),onClick:D[2]||(D[2]=W=>v.value=!0)},null,8,["prepend-icon","title"])),e(v)?(l(),p(le,{key:1,"prepend-icon":e(Gt),title:e(g)("Hide Hidden Transaction Categories"),onClick:D[3]||(D[3]=W=>v.value=!1)},null,8,["prepend-icon","title"])):r("",!0)]),_:1})]),_:1})]),_:1},8,["disabled"])]))]),default:a(()=>[e(c)?(l(),b("div",jg,[(l(),b(ue,null,$e([1,2,3],W=>t(ut,{type:"paragraph",loading:e(c),key:W},null,8,["loading"])),64))])):e(c)?r("",!0):(l(),p(ve,{key:1,class:be({"mt-0 mt-sm-2 mt-md-4":f.dialogMode})},{default:a(()=>[t(Vl,{class:"category-types",multiple:"",modelValue:$.value,"onUpdate:modelValue":D[4]||(D[4]=W=>$.value=W)},{default:a(()=>[(l(!0),b(ue,null,$e(e(d),W=>(l(),p($l,{key:W.type,value:W.type,class:"border"},{default:a(()=>[t(Dl,{class:"expand-panel-title-with-bg py-0"},{default:a(()=>[s("span",qg,i(e(m)(W.type)),1)]),_:2},1024),t(Fl,null,{default:a(()=>[t(ze,{rounded:"",density:"comfortable",class:"pa-0"},{default:a(()=>[e(F)[W.type]?r("",!0):(l(),b("div",Hg,i(e(g)("No available category")),1)),(l(!0),b(ue,null,$e(W.allCategories,(ne,de)=>(l(),b(ue,{key:ne.id},[(e(v)?de>0:!ne.hidden&&de>W.firstVisibleCategoryIndex)?(l(),p(Ke,{key:0})):r("",!0),e(v)||!ne.hidden?(l(),p(le,{key:1},{prepend:a(()=>[t(za,{"model-value":e(od)(ne,e(y)),indeterminate:e(nd)(ne,e(y)),"onUpdate:modelValue":J=>M(ne,J)},{label:a(()=>[t(P,{class:"d-flex","icon-type":"category","icon-id":ne.icon,color:ne.color,"hidden-status":ne.hidden},null,8,["icon-id","color","hidden-status"]),s("span",Yg,i(ne.name),1)]),_:2},1032,["model-value","indeterminate","onUpdate:modelValue"])]),_:2},1024)):r("",!0),(e(v)||!ne.hidden)&&(e(v)&&W.allSubCategories[ne.id]||W.allVisibleSubCategoryCounts[ne.id])?(l(),p(Ke,{key:2})):r("",!0),(e(v)||!ne.hidden)&&(e(v)&&W.allSubCategories[ne.id]||W.allVisibleSubCategoryCounts[ne.id])?(l(),p(ze,{key:3,rounded:"",density:"comfortable",class:"pa-0 ms-4"},{default:a(()=>[(l(!0),b(ue,null,$e(W.allSubCategories[ne.id],(J,Y)=>(l(),b(ue,{key:J.id},[(e(v)?Y>0:!J.hidden&&Y>W.allFirstVisibleSubCategoryIndexes[ne.id])?(l(),p(Ke,{key:0})):r("",!0),e(v)||!J.hidden?(l(),p(le,{key:1},{prepend:a(()=>[t(za,{"model-value":e(w)(J,e(y)),"onUpdate:modelValue":ie=>z(J,ie)},{label:a(()=>[t(P,{class:"d-flex","icon-type":"category","icon-id":J.icon,color:J.color,"hidden-status":J.hidden},null,8,["icon-id","color","hidden-status"]),s("span",Wg,i(J.name),1)]),_:2},1032,["model-value","onUpdate:modelValue"])]),_:2},1024)):r("",!0)],64))),128))]),_:2},1024)):r("",!0)],64))),128))]),_:2},1024)]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["class"])),f.dialogMode?(l(),p(ve,{key:2,class:"overflow-y-visible"},{default:a(()=>[s("div",Kg,[t(H,{disabled:!e(C),onClick:O},{default:a(()=>[j(i(e(g)(e(h))),1)]),_:1},8,["disabled"]),t(H,{color:"secondary",variant:"tonal",onClick:V},{default:a(()=>[j(i(e(g)("Cancel")),1)]),_:1})])]),_:1})):r("",!0)]),_:1},8,["class"]),t(mt,{ref_key:"snackbar",ref:A},null,512)],64)}}}),Gg={key:0,class:"d-flex align-center justify-center"},Jg={class:"w-100 text-center"},Zg={class:"text-h4"},Qg={key:1,class:"d-flex align-center"},Xg={key:0},e1={class:"text-body-1"},t1={key:0,class:"tag-filter-types d-flex flex-column mb-4"},a1={class:"ms-3"},l1={class:"ms-3"},n1={class:"w-100 d-flex justify-center mt-2 mt-sm-4 mt-md-6 gap-4"},ri=Pe({__name:"TransactionTagFilterSettingsCard",props:{type:{},dialogMode:{type:Boolean},autoSave:{type:Boolean}},emits:["settings:change"],setup(f,{emit:T}){const n=f,o=T,{tt:g}=Oe(),{loading:c,showHidden:v,filterTagIds:y,tagFilterType:k,title:h,applyText:d,allTags:u,allTagFilterTypes:C,hasAnyAvailableTag:F,hasAnyVisibleTag:w,loadFilterTagIds:m,saveFilterTagIds:x}=sd(n.type),S=fl(),N=xe("snackbar"),A=L(["default"]);function $(){S.loadAllTags({force:!1}).then(()=>{c.value=!1,m()||N.value?.showError("Parameter Invalid")}).catch(O=>{c.value=!1,O.processed||N.value?.showError(O)})}function I(O,V){y.value[O.id]=!V,n.autoSave&&Z()}function z(){id(y.value,S.allTransactionTagsMap),n.autoSave&&Z()}function M(){rd(y.value,S.allTransactionTagsMap),n.autoSave&&Z()}function U(){ud(y.value,S.allTransactionTagsMap),n.autoSave&&Z()}function X(){dd(y.value,S.allTransactionTagsMap),n.autoSave&&Z()}function Z(){const O=x();o("settings:change",O)}function q(){o("settings:change",!1)}return $(),(O,V)=>(l(),b(ue,null,[t(Ee,{class:be({"pa-2 pa-sm-4 pa-md-8":f.dialogMode})},{title:a(()=>[f.dialogMode?(l(),b("div",Gg,[s("div",Jg,[s("h4",Zg,i(e(g)(e(h))),1)]),t(H,{density:"comfortable",color:"default",variant:"text",class:"ms-2",disabled:e(c)||!e(F),icon:!0},{default:a(()=>[t(se,{icon:e(Jt)},null,8,["icon"]),t(nt,{activator:"parent"},{default:a(()=>[t(ze,null,{default:a(()=>[t(le,{"prepend-icon":e(ia),title:e(g)("Select All"),disabled:!e(w),onClick:z},null,8,["prepend-icon","title","disabled"]),t(le,{"prepend-icon":e(sl),title:e(g)("Select None"),disabled:!e(w),onClick:M},null,8,["prepend-icon","title","disabled"]),t(le,{"prepend-icon":e(il),title:e(g)("Invert Selection"),disabled:!e(w),onClick:U},null,8,["prepend-icon","title","disabled"]),t(Ke,{class:"my-2"}),t(le,{"prepend-icon":e(ia),title:e(g)("Select All Visible"),disabled:!e(w),onClick:X},null,8,["prepend-icon","title","disabled"]),t(Ke,{class:"my-2"}),e(v)?r("",!0):(l(),p(le,{key:0,"prepend-icon":e(ca),title:e(g)("Show Hidden Transaction Tags"),onClick:V[0]||(V[0]=_=>v.value=!0)},null,8,["prepend-icon","title"])),e(v)?(l(),p(le,{key:1,"prepend-icon":e(Gt),title:e(g)("Hide Hidden Transaction Tags"),onClick:V[1]||(V[1]=_=>v.value=!1)},null,8,["prepend-icon","title"])):r("",!0)]),_:1})]),_:1})]),_:1},8,["disabled"])])):f.dialogMode?r("",!0):(l(),b("div",Qg,[s("span",null,i(e(g)(e(h))),1),t(pt),t(H,{density:"comfortable",color:"default",variant:"text",class:"ms-2",disabled:e(c),icon:!0},{default:a(()=>[t(se,{icon:e(Jt)},null,8,["icon"]),t(nt,{activator:"parent"},{default:a(()=>[t(ze,null,{default:a(()=>[t(le,{"prepend-icon":e(ia),title:e(g)("Select All"),disabled:!e(w),onClick:z},null,8,["prepend-icon","title","disabled"]),t(le,{"prepend-icon":e(sl),title:e(g)("Select None"),disabled:!e(w),onClick:M},null,8,["prepend-icon","title","disabled"]),t(le,{"prepend-icon":e(il),title:e(g)("Invert Selection"),disabled:!e(w),onClick:U},null,8,["prepend-icon","title","disabled"]),t(Ke,{class:"my-2"}),t(le,{"prepend-icon":e(ia),title:e(g)("Select All Visible"),disabled:!e(w),onClick:X},null,8,["prepend-icon","title","disabled"]),t(Ke,{class:"my-2"}),e(v)?r("",!0):(l(),p(le,{key:0,"prepend-icon":e(ca),title:e(g)("Show Hidden Transaction Tags"),onClick:V[2]||(V[2]=_=>v.value=!0)},null,8,["prepend-icon","title"])),e(v)?(l(),p(le,{key:1,"prepend-icon":e(Gt),title:e(g)("Hide Hidden Transaction Tags"),onClick:V[3]||(V[3]=_=>v.value=!1)},null,8,["prepend-icon","title"])):r("",!0)]),_:1})]),_:1})]),_:1},8,["disabled"])]))]),default:a(()=>[e(c)?(l(),b("div",Xg,[(l(),b(ue,null,$e([1,2,3],_=>t(ut,{type:"paragraph",loading:e(c),key:_},null,8,["loading"])),64))])):r("",!0),!e(c)&&!e(w)?(l(),p(ve,{key:1,class:be({"mt-0 mt-sm-2 mt-md-4":f.dialogMode})},{default:a(()=>[s("span",e1,i(e(g)("No available tag")),1)]),_:1},8,["class"])):!e(c)&&e(w)?(l(),p(ve,{key:2,class:be({"mt-0 mt-sm-2 mt-md-4":f.dialogMode})},{default:a(()=>[f.type==="statisticsCurrent"?(l(),b("div",t1,[(l(!0),b(ue,null,$e(e(C),_=>(l(),p(H,{border:"",class:"justify-start",key:_.type,color:e(k)===_.type?"primary":"default",variant:e(k)===_.type?"tonal":"outlined","append-icon":e(k)===_.type?e(Ye):void 0,onClick:D=>k.value=_.type},{default:a(()=>[j(i(_.displayName),1)]),_:2},1032,["color","variant","append-icon","onClick"]))),128))])):r("",!0),t(Vl,{class:"tag-categories",multiple:"",modelValue:A.value,"onUpdate:modelValue":V[4]||(V[4]=_=>A.value=_)},{default:a(()=>[t($l,{class:"border",key:"default",value:"default"},{default:a(()=>[t(Dl,{class:"expand-panel-title-with-bg py-0"},{default:a(()=>[s("span",a1,i(e(g)("Tags")),1)]),_:1}),t(Fl,null,{default:a(()=>[t(ze,{rounded:"",density:"comfortable",class:"pa-0"},{default:a(()=>[(l(!0),b(ue,null,$e(e(u),_=>(l(),b(ue,{key:_.id},[e(v)||!_.hidden?(l(),p(le,{key:0},{prepend:a(()=>[t(za,{"model-value":!e(y)[_.id],"onUpdate:modelValue":D=>I(_,D)},{label:a(()=>[_.hidden?(l(),p(Tl,{key:0,class:"right-bottom-icon",color:"secondary",location:"bottom right","offset-x":"2","offset-y":"2",icon:e(Gt)},{default:a(()=>[t(se,{size:"24",icon:e(la)},null,8,["icon"])]),_:1},8,["icon"])):_.hidden?r("",!0):(l(),p(se,{key:1,size:"24",icon:e(la)},null,8,["icon"])),s("span",l1,i(_.name),1)]),_:2},1032,["model-value","onUpdate:modelValue"])]),_:2},1024)):r("",!0)],64))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["class"])):r("",!0),f.dialogMode?(l(),p(ve,{key:3,class:"overflow-y-visible"},{default:a(()=>[s("div",n1,[t(H,{disabled:!e(w),onClick:Z},{default:a(()=>[j(i(e(g)(e(d))),1)]),_:1},8,["disabled"]),t(H,{color:"secondary",variant:"tonal",onClick:q},{default:a(()=>[j(i(e(g)("Cancel")),1)]),_:1})])]),_:1})):r("",!0)]),_:1},8,["class"]),t(mt,{ref_key:"snackbar",ref:N},null,512)],64))}});function Vo(f){if(!f)return 0;const T=window.getComputedStyle(f);return["height","padding-top","padding-bottom","margin-top","margin-bottom"].map(n=>parseInt(T.getPropertyValue(n),10)).reduce((n,o)=>n+o)}function o1(f){if(!f)return 0;const T=f.querySelectorAll(".v-navigation-drawer__content");if(!T||!T[0])return 0;const n=T[0].children;if(!n||n.length<1)return 0;let o=0;for(let g=0;g<n.length;g++)o+=Vo(n[g]);return o}function On(f,T){return f?window.getComputedStyle(f).getPropertyValue(T):"0"}function zl(f,T){if(!f)return;const n=f.querySelector(T);if(!n||!n)return;const o=n;o.focus(),o.select()}function en(f,T,n){if(!f)return;let o=f;if(T){const h=f.querySelectorAll(T);if(!h.length||!h[0])return;o=h[0]}const g=o.querySelectorAll(n);if(!g.length||!g[0])return;const c=g[0],v=Vo(o),y=Vo(c);let k=c.offsetTop-o.offsetTop-parseInt(On(o,"padding-top"),10)-(v-y)/2;if(g.length>1){const h=g[0],d=g[g.length-1],u=h.offsetTop-o.offsetTop-parseInt(On(o,"padding-top"),10),C=d.offsetTop-o.offsetTop-parseInt(On(o,"padding-top"),10),F=d.offsetTop-o.offsetTop-parseInt(On(o,"padding-top"),10)-(v-y);k=(u+F)/2,C-u>v&&(k=u)}k<=0||(o.scrollTop=k)}const s1={class:"mx-6 my-4"},i1={class:"mx-6 mt-4"},r1={class:"text-subtitle-2"},u1={key:0,class:"mx-6 mt-4"},d1={class:"text-subtitle-2"},c1={class:"text-truncate"},m1={class:"title-and-toolbar d-flex align-center text-no-wrap"},p1={class:"transaction-keyword-filter ms-2"},v1={class:"transaction-list-datetime-range d-flex align-center"},f1={class:"text-body-1"},y1={key:0,class:"text-body-1 transaction-list-datetime-range-text ms-2"},g1={class:"text-sm"},h1={key:1,class:"text-body-1 transaction-list-datetime-range-text ms-2"},b1={class:"text-sm"},k1={key:2,class:"skeleton-no-margin d-flex align-center"},_1={class:"ms-2 text-subtitle-1"},T1={key:0,class:"text-income ms-2"},x1={key:1,class:"text-income ms-2"},C1={class:"text-subtitle-1 ms-3"},w1={key:2,class:"text-expense ms-2"},A1={key:3,class:"text-expense ms-2"},I1={class:"transaction-table-column-time text-no-wrap"},S1={class:"d-flex align-center"},V1={class:"text-sm ms-3"},$1={key:0,class:"transaction-list-custom-datetime-range ms-3 smaller"},D1={class:"transaction-table-column-category text-no-wrap"},F1={class:"d-flex align-center"},N1={class:"text-sm ms-3"},M1={class:"d-flex align-center"},E1={class:"text-sm ms-3"},U1={class:"text-sm"},P1={class:"d-flex align-center"},B1={class:"text-sm ms-3"},L1={class:"d-flex align-center"},R1={class:"text-sm ms-3"},z1={class:"d-flex align-center"},O1={class:"text-sm ms-3"},j1={class:"transaction-table-column-amount text-no-wrap"},q1={class:"d-flex align-center"},H1={class:"text-sm ms-3"},Y1={class:"d-flex align-center"},W1={class:"text-sm ms-3"},K1={key:0,class:"text-sm ms-4"},G1={key:2,class:"ms-2 me-2"},J1={class:"transaction-table-column-account text-no-wrap"},Z1={class:"d-flex align-center"},Q1={class:"text-sm ms-3"},X1={class:"d-flex align-center"},eh={class:"text-sm ms-3"},th={class:"d-flex align-center"},ah={class:"text-sm ms-3"},lh={key:0,class:"transaction-table-column-tags text-no-wrap"},nh={class:"d-flex align-center"},oh={class:"text-sm ms-3"},sh={class:"d-flex align-center"},ih={class:"text-sm ms-3"},rh={class:"d-flex align-center"},uh={class:"text-sm ms-3"},dh={class:"d-flex align-center"},ch={class:"text-sm ms-3"},mh={class:"d-flex align-center"},ph={class:"text-sm ms-3"},vh={class:"transaction-table-column-description text-no-wrap"},fh={key:0},yh=["colspan"],gh={key:1},hh=["colspan"],bh={key:0,class:"transaction-list-row-date no-hover text-sm"},kh=["colspan"],_h={class:"d-flex align-center"},Th=["onClick"],xh={class:"transaction-table-column-time"},Ch={class:"d-flex flex-column"},wh={key:0,class:"text-caption"},Ah={class:"transaction-table-column-category"},Ih={class:"d-flex align-center"},Sh={key:2,class:"ms-2"},Vh={key:3,class:"ms-2"},$h={key:4,class:"ms-2"},Dh={key:0},Fh={class:"transaction-table-column-account"},Nh={class:"d-flex align-center"},Mh={key:0},Eh={key:2},Uh={key:0,class:"transaction-table-column-tags"},Ph={class:"transaction-table-column-description text-truncate"},Bh={key:1,class:"mt-2 mb-4"},Lh=Pe({__name:"ListPage",props:{initPageType:{},initDateType:{},initMaxTime:{},initMinTime:{},initType:{},initCategoryIds:{},initAccountIds:{},initTagIds:{},initTagFilterType:{},initAmountFilter:{},initKeyword:{}},setup(f){const T=f,n=Oa(),o=tn(),g=Ot(),{tt:c,getAllRecentMonthDateRanges:v,getAllTransactionTagFilterTypes:y,getWeekdayLongName:k,getCurrentNumeralSystemType:h}=Oe(),{pageType:d,loading:u,customMinDatetime:C,customMaxDatetime:F,currentCalendarDate:w,currentTimezoneOffsetMinutes:m,firstDayOfWeek:x,fiscalYearStart:S,defaultCurrency:N,showTotalAmountInTransactionListPage:A,showTagInTransactionListPage:$,allDateRanges:I,allAccounts:z,allAccountsMap:M,allAvailableAccountsCount:U,allCategories:X,allPrimaryCategories:Z,allAvailableCategoriesCount:q,allTransactionTags:O,allAvailableTagsCount:V,query:_,queryMinTime:D,queryMaxTime:P,queryMonthlyData:W,queryMonth:ne,queryAllFilterCategoryIds:de,queryAllFilterAccountIds:J,queryAllFilterTagIds:Y,queryAllFilterCategoryIdsCount:ie,queryAllFilterAccountIdsCount:fe,queryAllFilterTagIdsCount:te,queryAccountName:K,queryCategoryName:me,queryTagName:Ne,queryAmount:et,transactionCalendarMinDate:Me,transactionCalendarMaxDate:Ve,currentMonthTransactionData:bt,canAddTransaction:Bt,getDisplayTime:at,getDisplayLongDate:Yt,getDisplayTimezone:At,getDisplayTimeInDefaultTimezone:Zt,getDisplayAmount:Qe,getDisplayMonthTotalAmount:pe,getTransactionTypeName:ce}=cd(),ke=Ha(),Be=ra(),ct=_a(),we=Ta(),st=fl(),De=Nl(),St=qo(),_t=Ys(),We={[En.HasAny.type]:nr,[En.HasAll.type]:lr,[En.NotHasAny.type]:ar,[En.NotHasAll.type]:tr},Le=xe("timeFilterMenu"),jt=xe("categoryFilterMenu"),Ze=xe("amountFilterMenu"),Te=xe("accountFilterMenu"),Nt=xe("tagFilterMenu"),xt=xe("confirmDialog"),gt=xe("snackbar"),xa=xe("editDialog"),Mt=xe("aiImageRecognitionDialog"),Kt=xe("importDialog"),tl=L("transactionPage"),Ca=L(1),ul=L(null),ua=L(1),Fa=L(""),ea=L(""),va=L(0),Ya=L(0),al=L([]),Wa=L(!1),Ka=L(!1),fa=L(!1),yl=L(o.mdAndUp.value),Na=L(o.mdAndUp.value),Ma=L(!1),Ga=L(!1),ll=L(!1),nl=L(!1),Se=L(!1),ge=B(()=>g.global.name.value===wt.Dark),Q=B(()=>h()),re=B(()=>{const G=[],ae=[5,10,15,20,25,30,50];for(const lt of ae)G.push({value:lt,name:Q.value.replaceWesternArabicDigitsToLocalizedDigits(lt.toString())});return G}),Ue=B(()=>v(d.value===da.List.type,!0)),Lt=B(()=>St.allVisibleTemplates[ha.Normal.type]||[]),ya=B(()=>{const G=y(),ae=[];for(const lt of G)ae.push({type:lt.type,displayName:lt.displayName,icon:We[lt.type]??""});return ae}),Fe=B(()=>ye.Income<=_.value.type&&_.value.type<=ye.Transfer?Io(_.value.type)?.toString()??"":""),it=B(()=>{if(d.value===da.List.type)if(W.value){const G=bt.value;if(!G||!G.items)return[];const ae=(Ca.value-1)*qe.value,lt=Ca.value*qe.value;return G.items.slice(ae,lt)}else return al.value;else if(d.value===da.Calendar.type)if(W.value){const G=bt.value;if(!G||!G.items)return[];const ae=[];for(const lt of G.items)lt.gregorianCalendarYearDashMonthDashDay===w.value&&ae.push(lt);return ae}else return[];else return[]}),dl=B({get:()=>md(Ue.value,_.value.dateType,_.value.minTime,_.value.maxTime,x.value,S.value),set:G=>{(G<0||G>=Ue.value.length)&&(G=0),so(Ue.value[G])}}),El=B({get:()=>d.value,set:G=>ci(G)}),Ul=B({get:()=>_.value.type,set:G=>vi(G)}),E=B(()=>ie.value===0?"":ie.value===1?_.value.categoryIds:"multiple"),he=B(()=>fe.value===0?"":fe.value===1?_.value.accountIds:"multiple"),_e=B(()=>te.value===0?"":te.value===1?_.value.tagIds:"multiple"),qe=B({get:()=>ul.value?ul.value:ke.appSettings.itemsCountInTransactionListPage,set:G=>{const ae=Math.ceil(ua.value/G);Ca.value>ae&&(Ca.value=ae),ul.value=G,W.value||gl(!1,!1)}}),Ce=B(()=>Math.ceil(ua.value/qe.value)),rt=B({get:()=>Ca.value,set:G=>{Ca.value=G,W.value||gl(!1,!1)}}),oe=B(()=>{const G=[],ae=d.value===da.List.type?qe.value:3;for(let lt=0;lt<ae;lt++)G.push(lt);return G}),Re=B(()=>{if(W.value){const G=bt.value;return G?{income:pe(G.totalAmount.income,N.value,"",G.totalAmount.incompleteIncome),expense:pe(G.totalAmount.expense,N.value,"",G.totalAmount.incompleteExpense)}:null}else return null});function Vt(G,ae){if(ae&&ae[G.id])return{"list-item-selected":!0,"has-children-item-selected":!0};if(G.subCategories){for(const lt of G.subCategories)if(ae&&ae[lt.id])return{"list-item-selected":!0,"has-children-item-selected":!0}}return{}}function Ea(G){const ae=cs.valueOf(G);return ae?ae.paramCount:0}function ta(G){G&&(u.value=!0,al.value=[],De.clearTransactions(),n.push(`/transaction/list?${De.getTransactionListPageParams(d.value)}`))}function oo(G){let ae=Qn(G.initDateType?parseInt(G.initDateType):void 0,x.value,S.value);if(!ae&&G.initDateType&&G.initMaxTime&&G.initMinTime&&(Rt.isBillingCycle(parseInt(G.initDateType))||G.initDateType===Rt.Custom.type.toString())&&parseInt(G.initMaxTime)>0&&parseInt(G.initMinTime)>0&&(ae={dateType:parseInt(G.initDateType),maxTime:parseInt(G.initMaxTime),minTime:parseInt(G.initMinTime)}),De.initTransactionListFilter({dateType:ae?ae.dateType:void 0,maxTime:ae?ae.maxTime:void 0,minTime:ae?ae.minTime:void 0,type:G.initType&&parseInt(G.initType)>0?parseInt(G.initType):void 0,categoryIds:G.initCategoryIds,accountIds:G.initAccountIds,tagIds:G.initTagIds,tagFilterType:G.initTagFilterType&&parseInt(G.initTagFilterType)>=0?parseInt(G.initTagFilterType):void 0,amountFilter:G.initAmountFilter||"",keyword:G.initKeyword||""}),G.initPageType){const lt=da.valueOf(parseInt(G.initPageType));if(lt&&(d.value=lt.type,w.value=Ja(_.value.minTime,w.value),d.value===da.Calendar.type)){const Xe=pn(_.value.minTime,_.value.maxTime,x.value,S.value);if(Xe){const $t=De.updateTransactionListFilter({dateType:Xe.dateType,maxTime:Xe.maxTime,minTime:Xe.minTime});if($t){w.value=Ja(_.value.minTime,w.value),ta($t);return}}}}Fa.value=G.initKeyword||"",ea.value="",Ca.value=1,gl(!1,!0),St.loadAllTemplates({templateType:ha.Normal.type,force:!1})}function gl(G,ae){u.value=!0;const lt=Ca.value;Promise.all([ct.loadAllAccounts({force:!1}),we.loadAllCategories({force:!1}),st.loadAllTags({force:!1})]).then(()=>{if(ae&&_t.showAddTransactionDialogInTransactionList&&(_t.resetShowAddTransactionDialogInTransactionList(),Vn()),W.value){const Xe=pd(_.value.minTime),$t=Xe.getGregorianCalendarYear(),Cl=Xe.getGregorianCalendarMonth();return De.loadMonthlyAllTransactions({year:$t,month:Cl,autoExpand:!0,defaultCurrency:N.value})}else return De.loadTransactions({reload:!0,count:qe.value,page:lt,withCount:lt<=1,autoExpand:!0,defaultCurrency:N.value})}).then(Xe=>{u.value=!1,al.value=Xe&&Xe.items&&Xe.items.length?Xe.items:[],lt<=1&&(ua.value=Xe&&Xe.totalCount?Xe.totalCount:1),G&&gt.value?.showMessage("Data has been updated")}).catch(Xe=>{u.value=!1,al.value=[],ua.value=1,Xe.processed||gt.value?.showError(Xe)})}function ci(G){if(d.value=G,w.value=Ja(_.value.minTime,w.value),d.value===da.Calendar.type){const ae=pn(_.value.minTime,_.value.maxTime,x.value,S.value);ae&&(De.updateTransactionListFilter({dateType:ae.dateType,maxTime:ae.maxTime,minTime:ae.minTime}),w.value=Ja(_.value.minTime,w.value))}ta(!0)}function so(G){if(G===Rt.Custom.type||Cn(G)&&G.dateType===Rt.Custom.type&&!G.minTime&&!G.maxTime){!_.value.minTime||!_.value.maxTime?(F.value=ti(Ql(),m.value,kl()),C.value=vd(F.value)):(F.value=_.value.maxTime,C.value=_.value.minTime),d.value===da.Calendar.type?Ga.value=!0:Ma.value=!0;return}if(Ht(G)&&(Rt.isBillingCycle(G)?G=ai(G,x.value,S.value,ct.getAccountStatementDate(_.value.accountIds)):G=Qn(G,x.value,S.value)),!G)return;if(d.value===da.Calendar.type){w.value=Ja(G.minTime,w.value);const lt=pn(G.minTime,G.maxTime,x.value,S.value);lt&&(G=lt,w.value=Ja(G.minTime,w.value))}if(_.value.dateType===G.dateType&&_.value.maxTime===G.maxTime&&_.value.minTime===G.minTime)return;const ae=De.updateTransactionListFilter({dateType:G.dateType,maxTime:G.maxTime,minTime:G.minTime});ta(ae)}function mi(G,ae){if(!G||!ae)return;let lt=fd(G,ae,x.value,S.value,Va.Normal,ct.getAccountStatementDate(_.value.accountIds));if(lt||(lt=Wl(G,ae,x.value,S.value,Va.Normal)),d.value===da.Calendar.type){w.value=Ja(G,w.value);const $t=pn(G,ae,x.value,S.value);$t&&(G=$t.minTime,ae=$t.maxTime,lt=$t.dateType,w.value=Ja(G,w.value))}if(_.value.dateType===lt&&_.value.maxTime===ae&&_.value.minTime===G){Ma.value=!1;return}const Xe=De.updateTransactionListFilter({dateType:lt,maxTime:ae,minTime:G});Ma.value=!1,ta(Xe)}function pi(G){if(!G)return;const ae=Kl(G),lt=Xn(G),Xe=Wl(ae,lt,x.value,S.value,Va.Normal);if(d.value===da.Calendar.type&&(w.value=Ja(ae,w.value)),_.value.dateType===Xe&&_.value.maxTime===lt&&_.value.minTime===ae){Ga.value=!1;return}const $t=De.updateTransactionListFilter({dateType:Xe,maxTime:lt,minTime:ae});Ga.value=!1,ta($t)}function Jo(G,ae,lt){if(Ue.value[dl.value]?.dateType===Rt.All.type)return;let Xe=null;if((Rt.isBillingCycle(_.value.dateType)||_.value.dateType===Rt.Custom.type)&&(Xe=yd(G,ae,lt,x.value,S.value,Va.Normal,ct.getAccountStatementDate(_.value.accountIds))),Xe||(Xe=Wn(G,ae,lt,x.value,S.value,Va.Normal)),d.value===da.Calendar.type){w.value=Ja(Xe.minTime,w.value);const Cl=pn(Xe.minTime,Xe.maxTime,x.value,S.value);Cl&&(Xe=Cl,w.value=Ja(Xe.minTime,w.value))}const $t=De.updateTransactionListFilter({dateType:Xe.dateType,maxTime:Xe.maxTime,minTime:Xe.minTime});ta($t)}function vi(G){let ae;if(G&&_.value.categoryIds){ae="";for(const Xe of ql(de.value)){const $t=X.value[Xe];$t&&$t.type===Io(G)&&(ae.length>0&&(ae+=","),ae+=Xe)}}const lt=De.updateTransactionListFilter({type:G,categoryIds:ae});ta(lt)}function io(G){if(Wa.value=!1,_.value.categoryIds===G)return;const ae=De.updateTransactionListFilter({categoryIds:G});ta(ae)}function fi(G){Wa.value=!1,nl.value=!1,ta(G)}function Zo(G){if(_.value.accountIds===G)return;const ae=De.updateTransactionListFilter({accountIds:G});ta(ae)}function yi(G){ll.value=!1,ta(G)}function ro(G){if(_.value.tagIds===G)return;const ae=De.updateTransactionListFilter({tagIds:G});ta(ae)}function gi(G){Se.value=!1,ta(G)}function hi(G){if(_.value.tagFilterType===G)return;const ae=De.updateTransactionListFilter({tagFilterType:G});ta(ae)}function Qo(G){if(_.value.keyword===G)return;const ae=De.updateTransactionListFilter({keyword:G});ta(ae)}function Xo(G){if(ea.value="",Ka.value=!1,_.value.amountFilter===G)return;let ae=G;if(G){const Xe=Ea(G);if(!Xe)return;if(Xe===1)ae+=":"+va.value;else if(Xe===2){if(Ya.value<va.value){gt.value?.showMessage("Incorrect amount range");return}ae+=":"+va.value+":"+Ya.value}else return}if(_.value.amountFilter===ae)return;const lt=De.updateTransactionListFilter({amountFilter:ae});ta(lt)}function Vn(G){const ae=Ql();let lt;_.value.maxTime&&_.value.minTime&&(_.value.maxTime<ae?lt=_.value.maxTime:ae<_.value.minTime&&(lt=_.value.minTime)),xa.value?.open({time:lt,type:_.value.type,categoryId:ie.value===1?_.value.categoryIds:"",accountId:fe.value===1?_.value.accountIds:"",tagIds:_.value.tagIds||"",template:G}).then(Xe=>{Xe&&Xe.message&&gt.value?.showMessage(Xe.message),gl(!1,!1)}).catch(Xe=>{Xe&&gt.value?.showError(Xe)})}function bi(){Mt.value?.open().then(G=>{xa.value?.open({time:G.time,type:G.type,categoryId:G.categoryId,accountId:G.sourceAccountId,destinationAccountId:G.destinationAccountId,amount:G.sourceAmount,destinationAmount:G.destinationAmount,tagIds:G.tagIds?G.tagIds.join(","):void 0,comment:G.comment,noTransactionDraft:!0}).then(ae=>{ae&&ae.message&&gt.value?.showMessage(ae.message),gl(!1,!1)}).catch(ae=>{ae&&gt.value?.showError(ae)})})}function ki(){Kt.value?.open().then(()=>{gl(!1,!1)}).catch(G=>{G&&gt.value?.showError(G)})}function $n(G){if(fa.value)return;const ae=Be.currentUserNickname;let lt="";ae?lt=c("dataExport.exportFilename",{nickname:ae})+"."+G:lt=c("dataExport.defaultExportFilename")+"."+G;const Xe=De.getExportTransactionDataRequestByTransactionFilter();fa.value=!0,Be.getExportedUserData(G,Xe).then($t=>{Ml(lt,$t),fa.value=!1}).catch($t=>{fa.value=!1,$t.processed||gt.value?.showError($t)})}function _i(G){xa.value?.open({id:G.id,currentTransaction:G}).then(ae=>{ae&&ae.message&&gt.value?.showMessage(ae.message),gl(!1,!1)}).catch(ae=>{ae&&gt.value?.showError(ae)})}function Ti(G){G&&dn(Le.value)}function xi(G){G&&dn(jt.value)}function Ci(G){if(G){ea.value="";let ae=0,lt=0;if(Ua(_.value.amountFilter))try{const Xe=_.value.amountFilter.split(":"),$t=Ea(Xe[0]);Xe.length===2&&$t===1?ae=parseInt(Xe[1]):Xe.length===3&&$t===2&&(ae=parseInt(Xe[1]),lt=parseInt(Xe[2]))}catch(Xe){Xt.warn("cannot parse amount from filter value, original value is "+_.value.amountFilter,Xe)}va.value=ae,Ya.value=lt,dn(Ze.value)}}function wi(G){G&&dn(Te.value)}function Ai(G){G&&dn(Nt.value)}function dn(G){ka(()=>{en(G?.contentEl,"div.v-list","div.v-list-item.list-item-selected")})}function es(G){gt.value?.showError(G)}return ao(G=>{G.query?oo({initDateType:G.query.dateType||void 0,initMinTime:G.query.minTime||void 0,initMaxTime:G.query.maxTime||void 0,initType:G.query.type||void 0,initCategoryIds:G.query.categoryIds||void 0,initAccountIds:G.query.accountIds||void 0,initTagIds:G.query.tagIds||void 0,initTagFilterType:G.query.tagFilterType||void 0,initAmountFilter:G.query.amountFilter||void 0,initKeyword:G.query.keyword||void 0}):oo({})}),Ft(()=>o.mdAndUp.value,G=>{yl.value=G,Na.value||(Na.value=G)}),Ft(()=>_t.showAddTransactionDialogInTransactionList,G=>{G&&(_t.resetShowAddTransactionDialogInTransactionList(),Vn())}),oo(T),(G,ae)=>{const lt=Ie("btn-vertical-group"),Xe=Ie("transaction-calendar"),$t=Ie("ItemIcon"),Cl=Ie("amount-input"),Ii=Ie("date-range-selection-dialog"),Si=Ie("month-selection-dialog");return l(),b(ue,null,[t(Ae,{class:"match-height"},{default:a(()=>[t(R,{cols:"12"},{default:a(()=>[t(Ee,null,{default:a(()=>[t(nn,null,{default:a(()=>[t(on,{permanent:yl.value,modelValue:Na.value,"onUpdate:modelValue":ae[4]||(ae[4]=ee=>Na.value=ee)},{default:a(()=>[s("div",s1,[t(lt,{disabled:e(u),buttons:e(da).values().map(ee=>({name:e(c)(ee.name),value:ee.type})),modelValue:El.value,"onUpdate:modelValue":ae[0]||(ae[0]=ee=>El.value=ee)},null,8,["disabled","buttons","modelValue"])]),t(Ke),s("div",i1,[s("span",r1,i(e(c)("Transaction Type")),1),t(Je,{"item-title":"displayName","item-value":"type",class:"mt-2",density:"compact",disabled:e(u),items:[{displayName:e(c)("All Types"),type:0},{displayName:e(c)("Modify Balance"),type:1},{displayName:e(c)("Income"),type:2},{displayName:e(c)("Expense"),type:3},{displayName:e(c)("Transfer"),type:4}],modelValue:Ul.value,"onUpdate:modelValue":ae[1]||(ae[1]=ee=>Ul.value=ee)},null,8,["disabled","items","modelValue"])]),e(d)===e(da).List.type?(l(),b("div",u1,[s("span",d1,i(e(c)("Transactions Per Page")),1),t(Je,{class:"mt-2",density:"compact","item-title":"name","item-value":"value",disabled:e(u),items:re.value,modelValue:qe.value,"onUpdate:modelValue":ae[2]||(ae[2]=ee=>qe.value=ee)},null,8,["disabled","items","modelValue"])])):r("",!0),t(Xa,{"show-arrows":"",class:"my-4",direction:"vertical",disabled:e(u),modelValue:dl.value,"onUpdate:modelValue":ae[3]||(ae[3]=ee=>dl.value=ee)},{default:a(()=>[(l(!0),b(ue,null,$e(Ue.value,(ee,Qt)=>(l(),p(qt,{class:"tab-text-truncate",key:Qt,value:Qt,onClick:na=>so(ee)},{default:a(()=>[s("span",c1,i(ee.displayName),1)]),_:2},1032,["value","onClick"]))),128))]),_:1},8,["disabled","modelValue"])]),_:1},8,["permanent","modelValue"]),t(sn,null,{default:a(()=>[t(ja,{class:"d-flex flex-grow-1 disable-tab-transition w-100-window-container",modelValue:tl.value,"onUpdate:modelValue":ae[31]||(ae[31]=ee=>tl.value=ee)},{default:a(()=>[t(Pt,{value:"transactionPage"},{default:a(()=>[t(Ee,{variant:"flat","min-height":"920"},{title:a(()=>[s("div",m1,[t(H,{class:"me-3 d-md-none",density:"compact",color:"default",variant:"plain",ripple:!1,icon:!0,onClick:ae[5]||(ae[5]=ee=>Na.value=!Na.value)},{default:a(()=>[t(se,{icon:e(an),size:"24"},null,8,["icon"])]),_:1}),s("span",null,i(e(c)("Transaction List")),1),t(H,{class:"ms-3",color:"default",variant:"outlined",disabled:e(u)||!e(Bt),onClick:ae[6]||(ae[6]=ee=>Vn())},{default:a(()=>[j(i(e(c)("Add"))+" ",1),e(ms)()||Lt.value&&Lt.value.length?(l(),p(e(nt),{key:0,activator:"parent","open-on-hover":!0},{default:a(()=>[t(ze,null,{default:a(()=>[e(ms)()?(l(),p(le,{key:"AIImageRecognition",title:e(c)("AI Image Recognition"),"prepend-icon":e(sr),onClick:bi},null,8,["title","prepend-icon"])):r("",!0),(l(!0),b(ue,null,$e(Lt.value,ee=>(l(),p(le,{key:ee.id,title:ee.name,"prepend-icon":e(go),onClick:Qt=>Vn(ee)},null,8,["title","prepend-icon","onClick"]))),128))]),_:1})]),_:1})):r("",!0)]),_:1},8,["disabled"]),e(ps)()?(l(),p(H,{key:0,class:"ms-3",color:"default",variant:"outlined",disabled:e(u),onClick:ki},{default:a(()=>[j(i(e(c)("Import"))+" ",1),e(So)()?(l(),p(e(nt),{key:0,activator:"parent","open-on-hover":!0},{default:a(()=>[t(ze,null,{default:a(()=>[t(le,{disabled:e(u)||fa.value||!it.value||!it.value.length||it.value.length<1,onClick:ae[7]||(ae[7]=ee=>$n("csv"))},{default:a(()=>[t(ot,null,{default:a(()=>[j(i(e(c)("Export to CSV (Comma-separated values) File")),1)]),_:1})]),_:1},8,["disabled"]),t(le,{disabled:e(u)||fa.value||!it.value||!it.value.length||it.value.length<1,onClick:ae[8]||(ae[8]=ee=>$n("tsv"))},{default:a(()=>[t(ot,null,{default:a(()=>[j(i(e(c)("Export to TSV (Tab-separated values) File")),1)]),_:1})]),_:1},8,["disabled"])]),_:1})]),_:1})):r("",!0)]),_:1},8,["disabled"])):r("",!0),!e(ps)()&&e(So)()?(l(),p(H,{key:1,class:"ms-3",color:"default",variant:"outlined",disabled:e(u)||fa.value||!it.value||!it.value.length||it.value.length<1},{default:a(()=>[j(i(e(c)("Export"))+" ",1),t(e(nt),{activator:"parent"},{default:a(()=>[t(ze,null,{default:a(()=>[t(le,{disabled:e(u)||fa.value||!it.value||!it.value.length||it.value.length<1,onClick:ae[9]||(ae[9]=ee=>$n("csv"))},{default:a(()=>[t(ot,null,{default:a(()=>[j(i(e(c)("Export to CSV (Comma-separated values) File")),1)]),_:1})]),_:1},8,["disabled"]),t(le,{disabled:e(u)||fa.value||!it.value||!it.value.length||it.value.length<1,onClick:ae[10]||(ae[10]=ee=>$n("tsv"))},{default:a(()=>[t(ot,null,{default:a(()=>[j(i(e(c)("Export to TSV (Tab-separated values) File")),1)]),_:1})]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["disabled"])):r("",!0),t(H,{density:"compact",color:"default",variant:"text",size:"24",class:"ms-2",icon:!0,loading:e(u),onClick:ae[11]||(ae[11]=ee=>gl(!0,!1))},{loader:a(()=>[t(je,{indeterminate:"",size:"20"})]),default:a(()=>[t(se,{icon:e(wa),size:"24"},null,8,["icon"]),t(yt,{activator:"parent"},{default:a(()=>[j(i(e(c)("Refresh")),1)]),_:1})]),_:1},8,["loading"]),t(pt),s("div",p1,[t(dt,{density:"compact",disabled:e(u),"prepend-inner-icon":e(Lo),"append-inner-icon":Fa.value!==e(_).keyword?e(Ye):void 0,placeholder:e(c)("Search transaction description"),modelValue:Fa.value,"onUpdate:modelValue":ae[12]||(ae[12]=ee=>Fa.value=ee),"onClick:appendInner":ae[13]||(ae[13]=ee=>Qo(Fa.value)),onKeyup:ae[14]||(ae[14]=Wt(ee=>Qo(Fa.value),["enter"]))},null,8,["disabled","prepend-inner-icon","append-inner-icon","placeholder","modelValue"])])])]),default:a(()=>[t(ve,{class:"pt-0"},{default:a(()=>[s("div",v1,[s("span",f1,i(e(c)("Date Range")),1),!e(_).minTime&&!e(_).maxTime?(l(),b("span",y1,[s("span",g1,i(e(c)("All")),1)])):e(_).minTime||e(_).maxTime?(l(),b("span",h1,[t(H,{class:"button-icon-with-direction me-1",size:"x-small",density:"compact",color:"default",variant:"outlined",icon:e(Mo),disabled:e(u),onClick:ae[15]||(ae[15]=ee=>Jo(e(_).minTime,e(_).maxTime,-1))},null,8,["icon","disabled"]),s("span",b1,i(`${e(D)} - ${e(P)}`),1),t(H,{class:"button-icon-with-direction ms-1",size:"x-small",density:"compact",color:"default",variant:"outlined",icon:e($a),disabled:e(u),onClick:ae[16]||(ae[16]=ee=>Jo(e(_).minTime,e(_).maxTime,1))},null,8,["icon","disabled"])])):r("",!0),t(pt),e(A)&&Re.value?(l(),b("div",k1,[s("span",_1,i(e(fe)?e(c)("Total Inflows"):e(c)("Total Income")),1),e(u)?(l(),b("span",T1,[t(ut,{type:"text",style:{width:"60px"},loading:!0})])):e(u)?r("",!0):(l(),b("span",x1,i(Re.value.income),1)),s("span",C1,i(e(fe)?e(c)("Total Outflows"):e(c)("Total Expense")),1),e(u)?(l(),b("span",w1,[t(ut,{type:"text",style:{width:"60px"},loading:!0})])):e(u)?r("",!0):(l(),b("span",A1,i(Re.value.expense),1))])):r("",!0)])]),_:1}),e(d)===e(da).Calendar.type?(l(),p(ve,{key:0,class:"transaction-calendar-container pt-0"},{default:a(()=>[t(Xe,{"day-has-transaction-class":"font-weight-bold",readonly:e(u),"is-dark-mode":ge.value,"default-currency":e(N),"min-date":e(Me),"max-date":e(Ve),dailyTotalAmounts:e(bt)?.dailyTotalAmounts,modelValue:e(w),"onUpdate:modelValue":ae[17]||(ae[17]=ee=>vt(w)?w.value=ee:null)},null,8,["readonly","is-dark-mode","default-currency","min-date","max-date","dailyTotalAmounts","modelValue"])]),_:1})):r("",!0),t(el,{class:"transaction-table",hover:!e(u)},{default:a(()=>[s("thead",null,[s("tr",null,[s("th",I1,[t(e(nt),{ref_key:"timeFilterMenu",ref:Le,class:"transaction-time-menu",eager:"",location:"bottom","max-height":"500","onUpdate:modelValue":Ti},{activator:a(({props:ee})=>[s("div",Ct({class:["d-flex align-center cursor-pointer",{readonly:e(u),"text-primary":e(_).dateType!==e(Rt).ThisMonth.type}]},ee),[s("span",null,i(e(c)("Time")),1),t(se,{icon:e(wl)},null,8,["icon"])],16)]),default:a(()=>[t(ze,{selected:[e(_).dateType]},{default:a(()=>[(l(!0),b(ue,null,$e(e(I),ee=>(l(),p(le,{class:be(["text-sm",{"list-item-selected":e(_).dateType===ee.type}]),density:"compact",key:ee.type,value:ee.type,"append-icon":e(_).dateType===ee.type?e(Ye):void 0},{default:a(()=>[t(ot,{class:"cursor-pointer",onClick:Qt=>so(ee.type)},{default:a(()=>[s("div",S1,[s("span",V1,i(ee.displayName),1)]),ee.isUserCustomRange&&e(_).dateType===ee.type&&e(_).minTime&&e(_).maxTime?(l(),b("div",$1,[s("span",null,i(e(D)),1),ae[37]||(ae[37]=s("span",null," - ",-1)),ae[38]||(ae[38]=s("br",null,null,-1)),s("span",null,i(e(P)),1)])):r("",!0)]),_:2},1032,["onClick"])]),_:2},1032,["value","class","append-icon"]))),128))]),_:1},8,["selected"])]),_:1},512)]),s("th",D1,[t(e(nt),{ref_key:"categoryFilterMenu",ref:jt,class:"transaction-category-menu",eager:"",location:"bottom","max-height":"500",disabled:e(_).type===1,"close-on-content-click":!1,modelValue:Wa.value,"onUpdate:modelValue":[ae[20]||(ae[20]=ee=>Wa.value=ee),xi]},{activator:a(({props:ee})=>[s("div",Ct({class:["d-flex align-center",{readonly:e(u),"cursor-pointer":e(_).type!==1,"text-primary":e(_).categoryIds}]},ee),[s("span",null,i(e(me)),1),Pa(t(se,{icon:e(wl)},null,8,["icon"]),[[Ba,e(_).type!==1]])],16)]),default:a(()=>[t(ze,{selected:[E.value]},{default:a(()=>[t(le,{key:"",value:"",class:be(["text-sm",{"list-item-selected":!e(_).categoryIds}]),density:"compact","append-icon":e(_).categoryIds?void 0:e(Ye)},{default:a(()=>[t(ot,{class:"cursor-pointer",onClick:ae[18]||(ae[18]=ee=>io(""))},{default:a(()=>[s("div",F1,[t(se,{icon:e(Nn)},null,8,["icon"]),s("span",N1,i(e(c)("All")),1)])]),_:1})]),_:1},8,["class","append-icon"]),e(q)>0?(l(),p(le,{key:"multiple",value:"multiple",class:be(["text-sm",{"list-item-selected":e(_).categoryIds&&e(ie)>1}]),density:"compact","append-icon":e(_).categoryIds&&e(ie)>1?e(Ye):void 0},{default:a(()=>[t(ot,{class:"cursor-pointer",onClick:ae[19]||(ae[19]=ee=>nl.value=!0)},{default:a(()=>[s("div",M1,[t(se,{icon:e(uo)},null,8,["icon"]),s("span",E1,i(e(c)("Multiple Categories")),1)])]),_:1})]),_:1},8,["class","append-icon"])):r("",!0),(l(!0),b(ue,null,$e(e(Z),(ee,Qt)=>(l(),b(ue,{key:Qt},[Pa(t(le,{density:"compact"},{default:a(()=>[t(ot,null,{default:a(()=>[s("span",U1,i(e(ce)(e(gd)(parseInt(Qt)),"Type")),1)]),_:2},1024)]),_:2},1536),[[Ba,ee&&ee.length]]),(l(!0),b(ue,null,$e(ee,na=>(l(),p(Bs,{key:na.id},jn({default:a(()=>[t(Ke),t(le,{class:be(["text-sm",{"item-in-multiple-selection":e(ie)>1&&e(de)[na.id]}]),density:"compact",value:na.id,"append-icon":e(_).categoryIds===na.id?e(Ye):void 0},{default:a(()=>[t(ot,{class:"cursor-pointer",onClick:ma=>io(na.id)},{default:a(()=>[s("div",L1,[t(se,{icon:e(Nn)},null,8,["icon"]),s("span",R1,i(e(c)("All")),1)])]),_:1},8,["onClick"])]),_:2},1032,["class","value","append-icon"]),(l(!0),b(ue,null,$e(na.subCategories,ma=>(l(),b(ue,{key:ma.id},[!ma.hidden||e(_).categoryIds===ma.id?(l(),p(Ke,{key:0})):r("",!0),!ma.hidden||e(_).categoryIds===ma.id?(l(),p(le,{key:1,class:be(["text-sm",{"list-item-selected":e(_).categoryIds===ma.id,"item-in-multiple-selection":e(ie)>1&&e(de)[ma.id]}]),density:"compact",value:ma.id,"append-icon":e(_).categoryIds===ma.id?e(Ye):void 0},{default:a(()=>[t(ot,{class:"cursor-pointer",onClick:T2=>io(ma.id)},{default:a(()=>[s("div",z1,[t($t,{"icon-type":"category",size:"24px","icon-id":ma.icon,color:ma.color},null,8,["icon-id","color"]),s("span",O1,i(ma.name),1)])]),_:2},1032,["onClick"])]),_:2},1032,["value","class","append-icon"])):r("",!0)],64))),128))]),_:2},[!na.hidden||e(_).categoryIds===na.id||e(X)[e(_).categoryIds]&&e(X)[e(_).categoryIds].parentId===na.id?{name:"activator",fn:a(({props:ma})=>[t(Ke),t(le,Ct({class:["text-sm",Vt(na,e(de))],density:"compact"},{ref_for:!0},ma),{default:a(()=>[t(ot,null,{default:a(()=>[s("div",P1,[t($t,{"icon-type":"category",size:"24px","icon-id":na.icon,color:na.color},null,8,["icon-id","color"]),s("span",B1,i(na.name),1)])]),_:2},1024)]),_:2},1040,["class"])]),key:"0"}:void 0]),1024))),128))],64))),128))]),_:1},8,["selected"])]),_:1},8,["disabled","modelValue"])]),s("th",j1,[t(e(nt),{ref_key:"amountFilterMenu",ref:Ze,class:"transaction-amount-menu",eager:"",location:"bottom","max-height":"500","close-on-content-click":!1,modelValue:Ka.value,"onUpdate:modelValue":[ae[24]||(ae[24]=ee=>Ka.value=ee),Ci]},{activator:a(({props:ee})=>[s("div",Ct({class:["d-flex align-center cursor-pointer",{readonly:e(u),"text-primary":e(_).amountFilter}]},ee),[s("span",null,i(e(c)("Amount")),1),t(se,{icon:e(wl)},null,8,["icon"])],16)]),default:a(()=>[t(ze,{selected:[e(_).amountFilter.split(":")[0]]},{default:a(()=>[t(le,{key:"",value:"",class:be(["text-sm",{"list-item-selected":!e(_).amountFilter}]),density:"compact","append-icon":!e(_).amountFilter&&!ea.value?e(Ye):void 0},{default:a(()=>[t(ot,{class:"cursor-pointer",onClick:ae[21]||(ae[21]=ee=>Xo(""))},{default:a(()=>[s("div",q1,[s("span",H1,i(e(c)("All")),1)])]),_:1})]),_:1},8,["class","append-icon"]),(l(!0),b(ue,null,$e(e(cs).values(),ee=>(l(),p(le,{key:ee.type,class:be(["text-sm",{"list-item-selected":e(_).amountFilter&&e(_).amountFilter.startsWith(`${ee.type}:`)}]),density:"compact",value:ee.type,"append-icon":e(_).amountFilter&&e(_).amountFilter.startsWith(`${ee.type}:`)&&ea.value!==ee.type?e(Ye):void 0},{default:a(()=>[t(ot,{class:"cursor-pointer",onClick:Qt=>ea.value=ee.type},{default:a(()=>[s("div",Y1,[s("span",W1,i(e(c)(ee.name)),1),e(_).amountFilter&&e(_).amountFilter.startsWith(`${ee.type}:`)&&ea.value!==ee.type?(l(),b("span",K1,i(e(et)),1)):r("",!0),ea.value===ee.type?(l(),p(Cl,{key:1,class:"transaction-amount-filter-value ms-4",density:"compact",currency:e(N),modelValue:va.value,"onUpdate:modelValue":ae[22]||(ae[22]=Qt=>va.value=Qt)},null,8,["currency","modelValue"])):r("",!0),ea.value===ee.type&&ee.paramCount===2?(l(),b("span",G1,"~")):r("",!0),ea.value===ee.type&&ee.paramCount===2?(l(),p(Cl,{key:3,class:"transaction-amount-filter-value",density:"compact",currency:e(N),modelValue:Ya.value,"onUpdate:modelValue":ae[23]||(ae[23]=Qt=>Ya.value=Qt)},null,8,["currency","modelValue"])):r("",!0),ea.value===ee.type?(l(),p(H,{key:4,class:"ms-2",density:"compact",color:"primary",variant:"tonal",onClick:Qt=>Xo(ee.type)},{default:a(()=>[j(i(e(c)("Apply")),1)]),_:1},8,["onClick"])):r("",!0)])]),_:2},1032,["onClick"])]),_:2},1032,["value","class","append-icon"]))),128))]),_:1},8,["selected"])]),_:1},8,["modelValue"])]),s("th",J1,[t(e(nt),{ref_key:"accountFilterMenu",ref:Te,class:"transaction-account-menu",eager:"",location:"bottom","max-height":"500","onUpdate:modelValue":wi},{activator:a(({props:ee})=>[s("div",Ct({class:["d-flex align-center cursor-pointer",{readonly:e(u),"text-primary":e(_).accountIds}]},ee),[s("span",null,i(e(K)),1),t(se,{icon:e(wl)},null,8,["icon"])],16)]),default:a(()=>[t(ze,{selected:[he.value]},{default:a(()=>[t(le,{key:"",value:"",class:be(["text-sm",{"list-item-selected":!e(_).accountIds}]),density:"compact","append-icon":e(_).accountIds?void 0:e(Ye)},{default:a(()=>[t(ot,{class:"cursor-pointer",onClick:ae[25]||(ae[25]=ee=>Zo(""))},{default:a(()=>[s("div",Z1,[t(se,{icon:e(Nn)},null,8,["icon"]),s("span",Q1,i(e(c)("All")),1)])]),_:1})]),_:1},8,["class","append-icon"]),e(U)>0?(l(),p(le,{key:"multiple",value:"multiple",class:be(["text-sm",{"list-item-selected":e(_).accountIds&&e(fe)>1}]),density:"compact","append-icon":e(_).accountIds&&e(fe)>1?e(Ye):void 0},{default:a(()=>[t(ot,{class:"cursor-pointer",onClick:ae[26]||(ae[26]=ee=>ll.value=!0)},{default:a(()=>[s("div",X1,[t(se,{icon:e(uo)},null,8,["icon"]),s("span",eh,i(e(c)("Multiple Accounts")),1)])]),_:1})]),_:1},8,["class","append-icon"])):r("",!0),(l(!0),b(ue,null,$e(e(z),ee=>(l(),b(ue,{key:ee.id},[!ee.hidden&&(!e(M)[ee.parentId]||!e(M)[ee.parentId].hidden)||e(_).accountIds===ee.id?(l(),p(Ke,{key:0})):r("",!0),!ee.hidden&&(!e(M)[ee.parentId]||!e(M)[ee.parentId].hidden)||e(_).accountIds===ee.id?(l(),p(le,{key:1,class:be(["text-sm",{"list-item-selected":e(_).accountIds===ee.id,"item-in-multiple-selection":e(fe)>1&&e(J)[ee.id]}]),density:"compact",value:ee.id,"append-icon":e(_).accountIds===ee.id?e(Ye):void 0},{default:a(()=>[t(ot,{class:"cursor-pointer",onClick:Qt=>Zo(ee.id)},{default:a(()=>[s("div",th,[t($t,{"icon-type":"account",size:"24px","icon-id":ee.icon,color:ee.color},null,8,["icon-id","color"]),s("span",ah,i(ee.name),1)])]),_:2},1032,["onClick"])]),_:2},1032,["value","class","append-icon"])):r("",!0)],64))),128))]),_:1},8,["selected"])]),_:1},512)]),e($)?(l(),b("th",lh,[t(e(nt),{ref_key:"tagFilterMenu",ref:Nt,class:"transaction-tag-menu",eager:"",location:"bottom","max-height":"500","onUpdate:modelValue":Ai},{activator:a(({props:ee})=>[s("div",Ct({class:["d-flex align-center cursor-pointer",{readonly:e(u),"text-primary":e(_).tagIds}]},ee),[s("span",null,i(e(Ne)),1),t(se,{icon:e(wl)},null,8,["icon"])],16)]),default:a(()=>[t(ze,{selected:[_e.value]},{default:a(()=>[t(le,{key:"",value:"",class:be(["text-sm",{"list-item-selected":!e(_).tagIds}]),density:"compact","append-icon":e(_).tagIds?void 0:e(Ye)},{default:a(()=>[t(ot,{class:"cursor-pointer",onClick:ae[27]||(ae[27]=ee=>ro(""))},{default:a(()=>[s("div",nh,[t(se,{icon:e(Nn)},null,8,["icon"]),s("span",oh,i(e(c)("All")),1)])]),_:1})]),_:1},8,["class","append-icon"]),t(le,{key:"none",value:"none",class:be(["text-sm",{"list-item-selected":e(_).tagIds==="none"}]),density:"compact","append-icon":e(_).tagIds==="none"?e(Ye):void 0},{default:a(()=>[t(ot,{class:"cursor-pointer",onClick:ae[28]||(ae[28]=ee=>ro("none"))},{default:a(()=>[s("div",sh,[t(se,{icon:e(or)},null,8,["icon"]),s("span",ih,i(e(c)("Without Tags")),1)])]),_:1})]),_:1},8,["class","append-icon"]),e(V)>0?(l(),p(le,{key:"multiple",value:"multiple",class:be(["text-sm",{"list-item-selected":e(_).tagIds&&e(te)>1}]),density:"compact","append-icon":e(_).tagIds&&e(te)>1?e(Ye):void 0},{default:a(()=>[t(ot,{class:"cursor-pointer",onClick:ae[29]||(ae[29]=ee=>Se.value=!0)},{default:a(()=>[s("div",rh,[t(se,{icon:e(uo)},null,8,["icon"]),s("span",uh,i(e(c)("Multiple Tags")),1)])]),_:1})]),_:1},8,["class","append-icon"])):r("",!0),e(_).tagIds&&e(_).tagIds!=="none"?(l(),p(Ke,{key:1})):r("",!0),e(_).tagIds&&e(_).tagIds!=="none"?(l(!0),b(ue,{key:2},$e(ya.value,ee=>(l(),p(le,{class:"text-sm",density:"compact",key:ee.type,value:ee.type,"append-icon":e(_).tagFilterType===ee.type?e(Ye):void 0},{default:a(()=>[t(ot,{class:"cursor-pointer",onClick:Qt=>hi(ee.type)},{default:a(()=>[s("div",dh,[t(se,{size:"24",icon:ee.icon},null,8,["icon"]),s("span",ch,i(ee.displayName),1)])]),_:2},1032,["onClick"])]),_:2},1032,["value","append-icon"]))),128)):r("",!0),(l(!0),b(ue,null,$e(e(O),ee=>(l(),b(ue,{key:ee.id},[!ee.hidden||e(_).tagIds===ee.id?(l(),p(Ke,{key:0})):r("",!0),!ee.hidden||e(_).tagIds===ee.id?(l(),p(le,{key:1,class:be(["text-sm",{"list-item-selected":e(_).tagIds===ee.id,"item-in-multiple-selection":e(te)>1&&e(Y)[ee.id]}]),density:"compact",value:ee.id,"append-icon":e(_).tagIds===ee.id?e(Ye):void 0},{default:a(()=>[t(ot,{class:"cursor-pointer",onClick:Qt=>ro(ee.id)},{default:a(()=>[s("div",mh,[t(se,{size:"24",icon:e(la)},null,8,["icon"]),s("span",ph,i(ee.name),1)])]),_:2},1032,["onClick"])]),_:2},1032,["value","class","append-icon"])):r("",!0)],64))),128))]),_:1},8,["selected"])]),_:1},512)])):r("",!0),s("th",vh,i(e(c)("Description")),1)])]),e(u)&&(!it.value||!it.value.length||it.value.length<1)?(l(),b("tbody",fh,[(l(!0),b(ue,null,$e(oe.value,ee=>(l(),b("tr",{key:ee},[s("td",{class:"px-0",colspan:e($)?6:5},[t(ut,{type:"text",loading:!0})],8,yh)]))),128))])):r("",!0),!e(u)&&(!it.value||!it.value.length||it.value.length<1)?(l(),b("tbody",gh,[s("tr",null,[s("td",{colspan:e($)?6:5},i(e(c)("No transaction data")),9,hh)])])):r("",!0),(l(!0),b(ue,null,$e(it.value,(ee,Qt)=>(l(),b("tbody",{key:ee.id,class:be({disabled:e(u),"has-bottom-border":Qt<it.value.length-1})},[e(d)===e(da).List.type&&(Qt===0||Qt>0&&ee.gregorianCalendarYearDashMonthDashDay!==it.value[Qt-1].gregorianCalendarYearDashMonthDashDay)?(l(),b("tr",bh,[s("td",{colspan:e($)?6:5,class:"font-weight-bold"},[s("div",_h,[s("span",null,i(e(Yt)(ee)),1),ee.displayDayOfWeek?(l(),p(oa,{key:0,class:"ms-1",color:"default",size:"x-small"},{default:a(()=>[j(i(e(k)(ee.displayDayOfWeek)),1)]),_:2},1024)):r("",!0)])],8,kh)])):r("",!0),s("tr",{class:"transaction-table-row-data text-sm cursor-pointer",onClick:na=>_i(ee)},[s("td",xh,[s("div",Ch,[s("span",null,i(e(at)(ee)),1),ee.utcOffset!==e(m)?(l(),b("span",wh,i(e(At)(ee)),1)):r("",!0),ee.utcOffset!==e(m)?(l(),p(yt,{key:1,activator:"parent"},{default:a(()=>[j(i(e(Zt)(ee)),1)]),_:2},1024)):r("",!0)])]),s("td",Ah,[s("div",Ih,[ee.category&&ee.category.color?(l(),p($t,{key:0,size:"24px","icon-type":"category","icon-id":ee.category.icon,color:ee.category.color},null,8,["icon-id","color"])):!ee.category||!ee.category.color?(l(),p(se,{key:1,size:"24",icon:e(Ls)},null,8,["icon"])):r("",!0),ee.type===e(ye).ModifyBalance?(l(),b("span",Sh,i(e(c)("Modify Balance")),1)):ee.type!==e(ye).ModifyBalance&&ee.category?(l(),b("span",Vh,i(ee.category.name),1)):ee.type!==e(ye).ModifyBalance&&!ee.category?(l(),b("span",$h,i(e(ce)(ee.type,"Transaction")),1)):r("",!0)])]),s("td",{class:be(["transaction-table-column-amount",{"text-expense":ee.type===e(ye).Expense,"text-income":ee.type===e(ye).Income}])},[ee.sourceAccount?(l(),b("div",Dh,[s("span",null,i(e(Qe)(ee)),1)])):r("",!0)],2),s("td",Fh,[s("div",Nh,[ee.sourceAccount?(l(),b("span",Mh,i(ee.sourceAccount.name),1)):r("",!0),ee.sourceAccount&&ee.type===e(ye).Transfer&&ee.destinationAccount&&ee.sourceAccount.id!==ee.destinationAccount.id?(l(),p(se,{key:1,class:"icon-with-direction mx-1",size:"13",icon:e($a)},null,8,["icon"])):r("",!0),ee.sourceAccount&&ee.type===e(ye).Transfer&&ee.destinationAccount&&ee.sourceAccount.id!==ee.destinationAccount.id?(l(),b("span",Eh,i(ee.destinationAccount.name),1)):r("",!0)])]),e($)?(l(),b("td",Uh,[(l(!0),b(ue,null,$e(ee.tagIds,na=>(l(),p(oa,{class:"transaction-tag",size:"small","prepend-icon":e(la),text:e(O)[na]?.name,key:na},null,8,["prepend-icon","text"]))),128)),!ee.tagIds||!ee.tagIds.length?(l(),p(oa,{key:0,class:"transaction-tag",size:"small",text:e(c)("None")},null,8,["text"])):r("",!0)])):r("",!0),s("td",Ph,i(ee.comment),1)],8,Th)],2))),128))]),_:1},8,["hover"]),e(d)===e(da).List.type?(l(),b("div",Bh,[t(lo,{totalPageCount:Ce.value,modelValue:rt.value,"onUpdate:modelValue":ae[30]||(ae[30]=ee=>rt.value=ee)},null,8,["totalPageCount","modelValue"])])):r("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(Ii,{title:e(c)("Custom Date Range"),"min-time":e(C),"max-time":e(F),show:Ma.value,"onUpdate:show":ae[32]||(ae[32]=ee=>Ma.value=ee),"onDateRange:change":mi,onError:es},null,8,["title","min-time","max-time","show"]),t(Si,{title:e(c)("Select Month"),"model-value":e(ne),show:Ga.value,"onUpdate:show":ae[33]||(ae[33]=ee=>Ga.value=ee),"onUpdate:modelValue":pi,onError:es},null,8,["title","model-value","show"]),t(Go,{ref_key:"editDialog",ref:xa,type:e(It).Transaction},null,8,["type"]),t(Uf,{ref_key:"aiImageRecognitionDialog",ref:Mt},null,512),t(Sg,{ref_key:"importDialog",ref:Kt,persistent:!0},null,512),t(Tt,{width:"800",modelValue:ll.value,"onUpdate:modelValue":ae[34]||(ae[34]=ee=>ll.value=ee)},{default:a(()=>[t(Xl,{type:"transactionListCurrent","dialog-mode":!0,"onSettings:change":yi})]),_:1},8,["modelValue"]),t(Tt,{width:"800",modelValue:nl.value,"onUpdate:modelValue":ae[35]||(ae[35]=ee=>nl.value=ee)},{default:a(()=>[t(no,{type:"transactionListCurrent","dialog-mode":!0,"category-types":Fe.value,"onSettings:change":fi},null,8,["category-types"])]),_:1},8,["modelValue"]),t(Tt,{width:"800",modelValue:Se.value,"onUpdate:modelValue":ae[36]||(ae[36]=ee=>Se.value=ee)},{default:a(()=>[t(ri,{type:"transactionListCurrent","dialog-mode":!0,"onSettings:change":gi})]),_:1},8,["modelValue"]),t(pa,{ref_key:"confirmDialog",ref:xt},null,512),t(mt,{ref_key:"snackbar",ref:gt},null,512)],64)}}}),Rh=Pe({__name:"TrendsChart",props:{skeleton:{type:Boolean},type:{},showValue:{type:Boolean},showTotalAmountInTooltip:{type:Boolean},chartMode:{},items:{},stacked:{type:Boolean},startTime:{},endTime:{},startYearMonth:{},endYearMonth:{},fiscalYearStart:{},sortingType:{},dataAggregationType:{},dateAggregationType:{},idField:{},nameField:{},valueField:{},colorField:{},hiddenField:{},displayOrdersField:{},translateName:{type:Boolean},defaultCurrency:{},enableClickItem:{type:Boolean}},emits:["click"],setup(f,{expose:T,emit:n}){const o=f,g=n,c=Ot(),{tt:v,getCurrentLanguageTextDirection:y,formatUnixTimeToShortDate:k,formatUnixTimeToGregorianLikeShortYear:h,formatUnixTimeToGregorianLikeShortYearMonth:d,formatYearQuarterToGregorianLikeYearQuarter:u,formatUnixTimeToGregorianLikeFiscalYear:C,formatAmountToWesternArabicNumeralsWithoutDigitGrouping:F,formatAmountToLocalizedNumeralsWithCurrency:w}=Oe(),{allDateRanges:m,getItemName:x}=hd(o),S=ra(),N=L({}),A=B(()=>y()),$=B(()=>c.global.name.value===wt.Dark),I=B(()=>{const V={};for(const _ of o.items){let D="";o.idField&&_[o.idField]?D=_[o.idField]:D=x(_[o.nameField]);const P={[o.nameField]:_[o.nameField]};o.idField&&(P[o.idField]=_[o.idField]),o.hiddenField&&(P[o.hiddenField]=_[o.hiddenField]),o.displayOrdersField&&(P[o.displayOrdersField]=_[o.displayOrdersField]),V[D]=P}return V}),z=B(()=>{const V=[];for(const _ of m.value)o.dateAggregationType===Ut.Year.type?V.push(h(_.minUnixTime)):o.dateAggregationType===Ut.FiscalYear.type&&"year"in _?V.push(C(_.minUnixTime)):o.dateAggregationType===Ut.Quarter.type&&"quarter"in _?V.push(u(_.year,_.quarter)):o.dateAggregationType===Ut.Month.type?V.push(d(_.minUnixTime)):o.dateAggregationType===Ut.Day.type&&o.chartMode==="daily"&&V.push(k(_.minUnixTime));return V}),M=B(()=>{const V=[];let _=0;for(const[D,P]of Da(o.items)){if(o.hiddenField&&D[o.hiddenField])continue;const W=[],ne={};for(const J of D.items){let Y="";o.chartMode==="daily"&&"month"in J?o.dateAggregationType===Ut.Year.type?Y=J.year.toString():o.dateAggregationType===Ut.FiscalYear.type?Y=vs(Kl({year:J.year,month1base:J.month}),o.fiscalYearStart).toString():o.dateAggregationType===Ut.Quarter.type?Y=`${J.year}-${Math.floor((J.month-1)/3)+1}`:o.dateAggregationType===Ut.Month.type?Y=`${J.year}-${J.month}`:Y=`${J.year}-${J.month}-${J.day}`:o.chartMode==="monthly"&&"month1base"in J&&(o.dateAggregationType===Ut.Year.type?Y=J.year.toString():o.dateAggregationType===Ut.FiscalYear.type?Y=vs(Kl({year:J.year,month1base:J.month1base}),o.fiscalYearStart).toString():o.dateAggregationType===Ut.Quarter.type?Y=`${J.year}-${Math.floor((J.month1base-1)/3)+1}`:Y=`${J.year}-${J.month1base}`);const ie=ne[Y]||[];ie.push(J),ne[Y]=ie}for(const J of m.value){let Y="";o.dateAggregationType===Ut.Year.type||o.dateAggregationType===Ut.FiscalYear.type&&"year"in J?Y=J.year.toString():o.dateAggregationType===Ut.Quarter.type&&"quarter"in J?Y=`${J.year}-${J.quarter}`:o.dateAggregationType===Ut.Month.type&&"month0base"in J?Y=`${J.year}-${J.month0base+1}`:o.dateAggregationType===Ut.Day.type&&"day"in J&&o.chartMode==="daily"&&(Y=`${J.year}-${J.month}-${J.day}`);let ie=0;const fe=ne[Y];if(li(fe))for(const te of fe){const K=te[o.valueField];Ht(K)&&(o.dataAggregationType===Hl.Sum?ie+=K:o.dataAggregationType===Hl.Last&&(ie=K))}ie>_&&(_=ie),W.push(ie)}const de={id:o.idField&&D[o.idField]?D[o.idField]:x(D[o.nameField]),name:o.idField&&D[o.idField]?D[o.idField]:x(D[o.nameField]),itemStyle:{color:bn(o.colorField&&D[o.colorField]?D[o.colorField]:Sl[P%Sl.length])},selected:!0,type:"line",animation:!o.skeleton,data:W};o.stacked?de.stack="a":o.idField&&D[o.idField]&&(de.stack=D[o.idField]),o.type===vo.Area.type?de.areaStyle={}:o.type===vo.Column.type?de.type="bar":o.type===vo.Bubble.type&&(de.type="scatter",de.symbolSize=J=>Math.sqrt(J)/Math.sqrt(_)*80+5),V.push(de)}return V}),U=B(()=>{let V=Number.MIN_SAFE_INTEGER,_=Number.MAX_SAFE_INTEGER,D=90;if(!M.value||!M.value.length)return D;for(const Y of M.value)for(const ie of Y.data)ie>V&&(V=ie),ie<_&&(_=ie);const P=w(V,o.defaultCurrency),W=w(_,o.defaultCurrency),ne=P.length>W.length?P:W,J=document.createElement("canvas").getContext("2d");if(J){J.font="12px Arial";const Y=J.measureText(ne),ie=Math.round(Y.width)+20;ie>=200&&(D=200),ie>90&&(D=ie)}return D}),X=B(()=>({tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:$.value?"#333":"#fff",color:$.value?"#eee":"#333"}},backgroundColor:$.value?"#333":"#fff",borderColor:$.value?"#333":"#fff",textStyle:{color:$.value?"#eee":"#333"},formatter:V=>{let _="",D=0,P=0;const W=[];for(const ne of V){const de=ne.seriesId,J=I.value[de]&&o.nameField&&I.value[de][o.nameField]?x(I.value[de][o.nameField]):de,Y=ne.color,ie=I.value[de]&&o.displayOrdersField&&I.value[de][o.displayOrdersField]?I.value[de][o.displayOrdersField]:[0],fe=ne.data;W.push({name:J,color:Y,displayOrders:ie,totalAmount:fe}),D+=fe}bd(W,o.sortingType);for(const ne of W)if(W.length===1||ne.totalAmount!==0){const de=w(ne.totalAmount,o.defaultCurrency);_+='<div><span class="chart-pointer" style="background-color: '+ne.color+'"></span>',_+=`<span>${ne.name}</span><span class="ms-5" style="float: inline-end">${de}</span><br/>`,_+="</div>",P++}if(o.showTotalAmountInTooltip){const ne=w(D,o.defaultCurrency);_=(P>0?'<div style="border-bottom: '+($.value?"#eee":"#333")+' dashed 1px">':"<div></div>")+'<span class="chart-pointer" style="background-color: '+($.value?"#eee":"#333")+`"></span><span>${v("Total Amount")}</span><span class="ms-5" style="float: inline-end">${ne}</span><br/></div>`+_}return V.length&&V[0]&&V[0].name&&(_=`${V[0].name}<br/>`+_),_}},legend:{orient:"horizontal",type:"scroll",top:0,data:M.value.map(V=>V.name),selected:N.value,textStyle:{color:$.value?"#eee":"#333"},formatter:V=>I.value[V]&&o.nameField&&I.value[V][o.nameField]?x(I.value[V][o.nameField]):V},grid:{left:U.value,right:20,bottom:40},xAxis:[{type:"category",data:z.value,inverse:A.value===un.RTL,axisLabel:{color:$.value?"#888":"#666"}}],yAxis:[{type:"value",axisLabel:{color:$.value?"#888":"#666",formatter:V=>w(parseInt(V),o.defaultCurrency)},axisPointer:{label:{formatter:V=>w(Math.trunc(V.value),o.defaultCurrency)}},splitLine:{lineStyle:{color:$.value?"#4f4f4f":"#e1e6f2"}}}],series:M.value}));function Z(V){if(!o.enableClickItem||V.componentType!=="series")return;const _=V.seriesId,D=I.value[_],P=o.idField?D[o.idField]:"",W=m.value[V.dataIndex];if(!W)return;let ne=W.minUnixTime,de=W.maxUnixTime;if(o.chartMode==="daily")o.startTime&&o.startTime>ne&&(ne=o.startTime),o.endTime&&o.endTime<de&&(de=o.endTime);else if(o.chartMode==="monthly"){if(o.startYearMonth){const Y=Kl(o.startYearMonth);Y>ne&&(ne=Y)}if(o.endYearMonth){const Y=Xn(o.endYearMonth);Y<de&&(de=Y)}}const J=Wl(ne,de,S.currentUserFirstDayOfWeek,S.currentUserFiscalYearStart,Va.Normal);g("click",{itemId:P,dateRange:{minTime:ne,maxTime:de,dateType:J}})}function q(){const V=[],_=[];V.push(v("Date"));for(const D of M.value){const P=D.id,W=I.value[P]&&o.nameField&&I.value[P][o.nameField]?x(I.value[P][o.nameField]):P;V.push(W)}for(const[D,P]of Da(z.value)){const W=[];W.push(D),W.push(...M.value.map(ne=>F(ne.data[P]??0))),_.push(W)}return{headers:V,data:_}}function O(V){N.value=V.selected}return T({exportData:q}),(V,_)=>{const D=Ie("v-chart");return l(),p(D,{autoresize:"",class:be(["trends-chart-container",{"transition-in":f.skeleton}]),option:X.value,onClick:Z,onLegendselectchanged:O},null,8,["class","option"])}}}),yn=Sn(Rh,[["__scopeId","data-v-74ab8887"]]),zh={class:"d-flex align-center justify-center"},Oh={class:"d-flex w-100 align-center justify-center"},jh={class:"text-h4"},qh={key:1,class:"w-100 code-container"},Hh=Pe({__name:"ExportDialog",setup(f,{expose:T}){const{tt:n}=Oe(),o=ra(),g=xe("buttonContainer"),c=xe("snackbar"),v=L(!1),y=L([]),k=L([]),h=L(Dt.CSV.extension),d=L(!1),u=B(()=>{const A=o.currentUserNickname;return A?n("dataExport.exportStatisticsFileName",{nickname:A}):n("dataExport.defaultExportStatisticsFileName")}),C=B(()=>y.value.map((A,$)=>({key:$.toString(),value:`column${$}`,title:A,sortable:$>0,nowrap:!0}))),F=B(()=>k.value.map(A=>{const $={};return A.forEach((I,z)=>{$[`column${z}`]=I}),$})),w=B(()=>{let A="";if(h.value===Dt.CSV.extension||h.value===Dt.TSV.extension){let $=",";h.value===Dt.TSV.extension&&($="	"),y.value.length>0&&(A+=y.value.map(I=>fn(I,$," ")).join($));for(const I of k.value)A+=`
`,A+=I.map(z=>fn(z,$," ")).join($)}else if(h.value===Dt.MARKDOWN.extension){A+="| "+y.value.map($=>fn($,"|"," ")).join(" | ")+" |",A+=`
`,A+="| "+y.value.map(()=>"---").join(" | ")+" |";for(const $ of k.value)A+=`
`,A+="| "+$.map(I=>fn(I,"|"," ")).join(" | ")+" |"}return A});function m(A){y.value=A.headers||[],k.value=A.data||[],h.value=Dt.CSV.extension,d.value=!1,v.value=!0}function x(){kn(w.value,g.value),c.value?.showMessage("Data copied")}function S(){let A=Dt.parse(h.value);A||(A=Dt.CSV),Ml(A.formatFileName(u.value),A.createBlob(w.value))}function N(){v.value=!1}return T({open:m}),(A,$)=>(l(),b(ue,null,[t(Tt,{width:"1000",modelValue:v.value,"onUpdate:modelValue":$[6]||($[6]=I=>v.value=I)},{default:a(()=>[t(Ee,{class:"pa-2 pa-sm-4 pa-md-4"},{title:a(()=>[s("div",zh,[s("div",Oh,[s("h4",jh,i(e(n)("Export Results")),1)]),t(H,{density:"comfortable",color:"default",variant:"text",class:"ms-2",icon:!0},{default:a(()=>[t(se,{icon:e(Jt)},null,8,["icon"]),t(nt,{activator:"parent"},{default:a(()=>[t(ze,null,{default:a(()=>[t(xn,{title:e(n)("File Format")},null,8,["title"]),t(le,{"prepend-icon":e(Rs),"append-icon":h.value===e(Dt).CSV.extension?e(Ye):void 0,title:e(n)("CSV (Comma-separated values) File"),onClick:$[0]||($[0]=I=>h.value=e(Dt).CSV.extension)},null,8,["prepend-icon","append-icon","title"]),t(le,{"prepend-icon":e(zs),"append-icon":h.value===e(Dt).TSV.extension?e(Ye):void 0,title:e(n)("TSV (Tab-separated values) File"),onClick:$[1]||($[1]=I=>h.value=e(Dt).TSV.extension)},null,8,["prepend-icon","append-icon","title"]),t(le,{"prepend-icon":e(ir),"append-icon":h.value===e(Dt).MARKDOWN.extension?e(Ye):void 0,title:e(n)("Markdown File"),onClick:$[2]||($[2]=I=>h.value=e(Dt).MARKDOWN.extension)},null,8,["prepend-icon","append-icon","title"])]),_:1})]),_:1})]),_:1})])]),default:a(()=>[t(ve,{class:"py-0 w-100 d-flex justify-center"},{default:a(()=>[t(Qa,{class:"bidirectional-switch",color:"secondary",label:e(n)("Raw Data"),modelValue:d.value,"onUpdate:modelValue":$[3]||($[3]=I=>d.value=I),onClick:$[4]||($[4]=I=>d.value=!d.value)},{prepend:a(()=>[s("span",null,i(e(n)("Table")),1)]),_:1},8,["label","modelValue"])]),_:1}),t(ve,{class:"my-md-4 w-100 d-flex justify-center"},{default:a(()=>[d.value?r("",!0):(l(),p(wn,{key:0,"fixed-header":"","fixed-footer":"","multi-sort":"",density:"compact",height:"360",headers:C.value,items:F.value,hover:!0,"hide-default-footer":!0,"items-per-page":F.value.length,"no-data-text":e(n)("No data")},null,8,["headers","items","items-per-page","no-data-text"])),d.value?(l(),b("div",qh,[t(La,{class:"w-100 always-cursor-text",style:{height:"360px"},readonly:!0,value:w.value},null,8,["value"])])):r("",!0)]),_:1}),t(ve,{class:"overflow-y-visible"},{default:a(()=>[s("div",{ref_key:"buttonContainer",ref:g,class:"w-100 d-flex justify-center gap-4"},[t(ln,{variant:"tonal",density:"comfortable"},{default:a(()=>[t(H,{color:"primary",disabled:!w.value,onClick:x},{default:a(()=>[j(i(e(n)("Copy")),1)]),_:1},8,["disabled"]),t(H,{density:"compact",color:"primary",disabled:!w.value,icon:!0},{default:a(()=>[t(se,{icon:e(wl),size:"24"},null,8,["icon"]),t(nt,{activator:"parent"},{default:a(()=>[t(ze,null,{default:a(()=>[t(le,{title:e(n)("Save"),onClick:$[5]||($[5]=I=>S())},null,8,["title"])]),_:1})]),_:1})]),_:1},8,["disabled"])]),_:1}),t(H,{color:"secondary",variant:"tonal",onClick:N},{default:a(()=>[j(i(e(n)("Cancel")),1)]),_:1})],512)]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(mt,{ref_key:"snackbar",ref:c},null,512)],64))}}),Yh={class:"mx-6 my-4"},Wh={class:"mx-6 mt-4"},Kh={class:"text-subtitle-2"},Gh={class:"mx-6 mt-4"},Jh={class:"text-subtitle-2"},Zh={class:"text-truncate"},Qh={class:"title-and-toolbar d-flex align-center"},Xh={class:"d-flex align-center"},eb={key:0,class:"statistics-custom-datetime-range smaller"},tb={class:"transaction-keyword-filter ms-2"},ab={class:"statistics-subtitle"},lb={key:0,class:"statistics-overview-amount ms-3 text-income"},nb={class:"statistics-subtitle ms-3"},ob={key:2,class:"statistics-overview-amount ms-3 text-expense"},sb={class:"statistics-subtitle"},ib={class:"statistics-subtitle statistics-overview-empty-tip"},rb={class:"d-flex flex-column ms-2"},ub={class:"d-flex"},db={class:"d-flex flex-column ms-2"},cb={class:"d-flex"},mb={key:0,class:"statistics-percent"},pb={class:"statistics-amount"},vb=Pe({__name:"TransactionPage",props:{initAnalysisType:{},initChartDataType:{},initChartType:{},initChartDateType:{},initStartTime:{},initEndTime:{},initFilterAccountIds:{},initFilterCategoryIds:{},initTagIds:{},initTagFilterType:{},initKeyword:{},initSortingType:{},initTrendDateAggregationType:{},initAssetTrendsDateAggregationType:{}},setup(f){const T=f,n=Oa(),o=tn(),g=Ot(),{tt:c,getAllCategoricalChartTypes:v,getAllTrendChartTypes:y,formatAmountToWesternArabicNumeralsWithoutDigitGrouping:k,formatPercentToLocalizedNumerals:h}=Oe(),{loading:d,analysisType:u,trendDateAggregationType:C,assetTrendsDateAggregationType:F,defaultCurrency:w,firstDayOfWeek:m,fiscalYearStart:x,allDateRanges:S,allSortingTypes:N,allTrendAnalysisDateAggregationTypes:A,allAssetTrendsDateAggregationTypes:$,query:I,queryChartDataCategory:z,queryDateType:M,queryStartTime:U,queryEndTime:X,queryDateRangeName:Z,queryTrendDateAggregationTypeName:q,queryAssetTrendsDateAggregationTypeName:O,canChangeDateRange:V,canShiftDateRange:_,canUseCategoryFilter:D,canUseTagFilter:P,canUseKeywordFilter:W,showAmountInChart:ne,totalAmountName:de,showPercentInCategoricalChart:J,showTotalAmountInTrendsChart:Y,showStackedInTrendsChart:ie,translateNameInTrendsChart:fe,categoricalOverviewAnalysisData:te,categoricalAnalysisData:K,trendsAnalysisData:me,assetTrendsData:Ne,canShowCustomDateRange:et,getTransactionCategoricalAnalysisDataItemDisplayColor:Me,getDisplayAmount:Ve}=kd(),bt=_a(),Bt=Ta(),at=ei(),Yt=xe("snackbar"),At=xe("monthlyTrendsChart"),Zt=xe("dailyTrendsChart"),Qe=xe("exportDialog"),pe=L("statisticsPage"),ce=L(!0),ke=L(""),Be=L(o.mdAndUp.value),ct=L(o.mdAndUp.value),we=L(!1),st=L(!1),De=L(!1),St=L(!1),_t=L(!1),We=B(()=>g.global.name.value===wt.Dark),Le=B(()=>u.value===He.CategoricalAnalysis?!!K.value&&!!K.value.items&&K.value.items.length>0:u.value===He.TrendAnalysis?!!me.value&&!!me.value.items&&me.value.items.length>0&&!!At.value:u.value===He.AssetTrends?!!Ne.value&&!!Ne.value.items&&Ne.value.items.length>0&&!!Zt.value:!1),jt=B(()=>u.value===He.CategoricalAnalysis?v(!0):u.value===He.TrendAnalysis||u.value===He.AssetTrends?y():[]),Ze=B({get:()=>u.value,set:Q=>{ul(Q)}}),Te=B({get:()=>u.value===He.CategoricalAnalysis?I.value.categoricalChartType:u.value===He.TrendAnalysis?I.value.trendChartType:u.value===He.AssetTrends?I.value.assetTrendsChartType:void 0,set:Q=>{ua(Q)}}),Nt=B({get:()=>I.value.chartDataType,set:Q=>{Fa(Q)}}),xt=B({get:()=>I.value.sortingType,set:Q=>{ea(Q)}}),gt=B(()=>kt.valueOf(Nt.value)?.specialChart??!1),xa=B(()=>I.value.chartDataType===kt.OutflowsByAccount.type||I.value.chartDataType===kt.ExpenseByAccount.type||I.value.chartDataType===kt.ExpenseByPrimaryCategory.type||I.value.chartDataType===kt.ExpenseBySecondaryCategory.type?"text-expense":I.value.chartDataType===kt.InflowsByAccount.type||I.value.chartDataType===kt.IncomeByAccount.type||I.value.chartDataType===kt.IncomeByPrimaryCategory.type||I.value.chartDataType===kt.IncomeBySecondaryCategory.type?"text-income":"text-default");function Mt(){return`/statistics/transaction?${at.getTransactionStatisticsPageParams(u.value,C.value,F.value)}`}function Kt(Q,re){return`/transaction/list?${at.getTransactionListPageParams(u.value,Q,re)}`}function tl(Q){let re=!ga(Q.initAnalysisType);const Ue={chartDataType:Q.initChartDataType?parseInt(Q.initChartDataType):void 0,filterAccountIds:Q.initFilterAccountIds?wo(Q.initFilterAccountIds.split(","),!0):{},filterCategoryIds:Q.initFilterCategoryIds?wo(Q.initFilterCategoryIds.split(","),!0):{},tagIds:Q.initTagIds,tagFilterType:Q.initTagFilterType&&parseInt(Q.initTagFilterType)>=0?parseInt(Q.initTagFilterType):void 0,keyword:Q.initKeyword,sortingType:Q.initSortingType?parseInt(Q.initSortingType):void 0};if(ke.value=Ue.keyword||"",Q.initAnalysisType===He.CategoricalAnalysis.toString()?(Ue.categoricalChartType=Q.initChartType?parseInt(Q.initChartType):void 0,Ue.categoricalChartDateType=Q.initChartDateType?parseInt(Q.initChartDateType):void 0,Ue.categoricalChartStartTime=Q.initStartTime?parseInt(Q.initStartTime):void 0,Ue.categoricalChartEndTime=Q.initEndTime?parseInt(Q.initEndTime):void 0,(Ue.categoricalChartDateType!==I.value.categoricalChartDateType||Ue.categoricalChartDateType===Rt.Custom.type&&(Ue.categoricalChartStartTime!==I.value.categoricalChartStartTime||Ue.categoricalChartEndTime!==I.value.categoricalChartEndTime))&&(re=!0),Q.initAnalysisType!==u.value.toString()&&(u.value=He.CategoricalAnalysis,re=!0)):Q.initAnalysisType===He.TrendAnalysis.toString()?(Ue.trendChartType=Q.initChartType?parseInt(Q.initChartType):void 0,Ue.trendChartDateType=Q.initChartDateType?parseInt(Q.initChartDateType):void 0,Ue.trendChartStartYearMonth=Q.initStartTime,Ue.trendChartEndYearMonth=Q.initEndTime,(Ue.trendChartDateType!==I.value.trendChartDateType||Ue.trendChartDateType===Rt.Custom.type&&(Ue.trendChartStartYearMonth!==I.value.trendChartStartYearMonth||Ue.trendChartEndYearMonth!==I.value.trendChartEndYearMonth))&&(re=!0),Q.initAnalysisType!==u.value.toString()&&(u.value=He.TrendAnalysis,re=!0),Q.initTrendDateAggregationType&&(C.value=parseInt(Q.initTrendDateAggregationType))):Q.initAnalysisType===He.AssetTrends.toString()&&(Ue.assetTrendsChartType=Q.initChartType?parseInt(Q.initChartType):void 0,Ue.assetTrendsChartDateType=Q.initChartDateType?parseInt(Q.initChartDateType):void 0,Ue.assetTrendsChartStartTime=Q.initStartTime?parseInt(Q.initStartTime):void 0,Ue.assetTrendsChartEndTime=Q.initEndTime?parseInt(Q.initEndTime):void 0,(Ue.assetTrendsChartDateType!==I.value.assetTrendsChartDateType||Ue.assetTrendsChartDateType===Rt.Custom.type&&(Ue.assetTrendsChartStartTime!==I.value.assetTrendsChartStartTime||Ue.assetTrendsChartEndTime!==I.value.assetTrendsChartEndTime))&&(re=!0),Q.initAnalysisType!==u.value.toString()&&(u.value=He.AssetTrends,re=!0),Q.initAssetTrendsDateAggregationType&&(F.value=parseInt(Q.initAssetTrendsDateAggregationType))),ga(Q.initAnalysisType)?at.initTransactionStatisticsFilter(u.value,Ue):(u.value=He.CategoricalAnalysis,at.initTransactionStatisticsFilter(u.value)),!re&&!at.transactionStatisticsStateInvalid){d.value=!1,ce.value=!1;return}Promise.all([bt.loadAllAccounts({force:!1}),Bt.loadAllCategories({force:!1})]).then(()=>u.value===He.CategoricalAnalysis?at.loadCategoricalAnalysis({force:!1}):u.value===He.TrendAnalysis?at.loadTrendAnalysis({force:!1}):u.value===He.AssetTrends?at.loadAssetTrends({force:!1}):Promise.reject("An error occurred")).then(()=>{d.value=!1,ce.value=!1}).catch(Lt=>{d.value=!1,ce.value=!1,Lt.processed||Yt.value?.showError(Lt)})}function Ca(Q){let re=null;return d.value=!0,I.value.chartDataType===kt.Overview.type||I.value.chartDataType===kt.OutflowsByAccount.type||I.value.chartDataType===kt.ExpenseByAccount.type||I.value.chartDataType===kt.ExpenseByPrimaryCategory.type||I.value.chartDataType===kt.ExpenseBySecondaryCategory.type||I.value.chartDataType===kt.InflowsByAccount.type||I.value.chartDataType===kt.IncomeByAccount.type||I.value.chartDataType===kt.IncomeByPrimaryCategory.type||I.value.chartDataType===kt.IncomeBySecondaryCategory.type||I.value.chartDataType===kt.TotalOutflows.type||I.value.chartDataType===kt.TotalExpense.type||I.value.chartDataType===kt.TotalInflows.type||I.value.chartDataType===kt.TotalIncome.type||I.value.chartDataType===kt.NetCashFlow.type||I.value.chartDataType===kt.NetIncome.type||I.value.chartDataType===kt.NetWorth.type?u.value===He.CategoricalAnalysis?re=at.loadCategoricalAnalysis({force:Q}):u.value===He.TrendAnalysis?re=at.loadTrendAnalysis({force:Q}):u.value===He.AssetTrends&&(re=at.loadAssetTrends({force:Q})):(I.value.chartDataType===kt.AccountTotalAssets.type||I.value.chartDataType===kt.AccountTotalLiabilities.type)&&(u.value===He.CategoricalAnalysis?re=bt.loadAllAccounts({force:Q}):u.value===He.AssetTrends&&(re=at.loadAssetTrends({force:Q}))),re&&re.then(()=>{d.value=!1,Q&&Yt.value?.showMessage("Data has been updated")}).catch(Ue=>{d.value=!1,Ue.processed||Yt.value?.showError(Ue)}),re}function ul(Q){if(u.value!==Q){if(!kt.isAvailableForAnalysisType(I.value.chartDataType,Q)){let re=kt.Default;Q===He.AssetTrends&&(re=kt.DefaultForAssetTrends),at.updateTransactionStatisticsFilter({chartDataType:re.type})}u.value!==He.TrendAnalysis&&Q===He.TrendAnalysis?C.value=Ut.Default.type:u.value!==He.AssetTrends&&Q===He.AssetTrends&&(F.value=Ut.Default.type),u.value=Q,d.value=!0,at.updateTransactionStatisticsInvalidState(!0),n.push(Mt())}}function ua(Q){let re=!1;u.value===He.CategoricalAnalysis?re=at.updateTransactionStatisticsFilter({categoricalChartType:Q}):u.value===He.TrendAnalysis?re=at.updateTransactionStatisticsFilter({trendChartType:Q}):u.value===He.AssetTrends&&(re=at.updateTransactionStatisticsFilter({assetTrendsChartType:Q})),re&&n.push(Mt())}function Fa(Q){at.updateTransactionStatisticsFilter({chartDataType:Q})&&n.push(Mt())}function ea(Q){if(Q<fs.Amount.type||Q>fs.Name.type)return;at.updateTransactionStatisticsFilter({sortingType:Q})&&n.push(Mt())}function va(Q){const re=C.value!==Q;C.value=Q,re&&n.push(Mt())}function Ya(Q){const re=F.value!==Q;F.value=Q,re&&n.push(Mt())}function al(Q){if(u.value===He.CategoricalAnalysis){if(Q===Rt.Custom.type){we.value=!0;return}else if(I.value.categoricalChartDateType===Q)return}else if(u.value===He.TrendAnalysis){if(Q===Rt.Custom.type){st.value=!0;return}else if(I.value.trendChartDateType===Q)return}else if(u.value===He.AssetTrends){if(Q===Rt.Custom.type){we.value=!0;return}else if(I.value.assetTrendsChartDateType===Q)return}const re=Qn(Q,m.value,x.value);if(!re)return;let Ue=!1;u.value===He.CategoricalAnalysis?Ue=at.updateTransactionStatisticsFilter({categoricalChartDateType:re.dateType,categoricalChartStartTime:re.minTime,categoricalChartEndTime:re.maxTime}):u.value===He.TrendAnalysis?Ue=at.updateTransactionStatisticsFilter({trendChartDateType:re.dateType,trendChartStartYearMonth:Un(re.minTime),trendChartEndYearMonth:Un(re.maxTime)}):u.value===He.AssetTrends&&(Ue=at.updateTransactionStatisticsFilter({assetTrendsChartDateType:re.dateType,assetTrendsChartStartTime:re.minTime,assetTrendsChartEndTime:re.maxTime})),Ue&&(d.value=!0,at.updateTransactionStatisticsInvalidState(!0),n.push(Mt()))}function Wa(Q,re){if(!Q||!re)return;let Ue=!1;if(u.value===He.CategoricalAnalysis&&Ht(Q)&&Ht(re)){const Lt=Wl(Q,re,m.value,x.value,Va.Normal);Ue=at.updateTransactionStatisticsFilter({categoricalChartDateType:Lt,categoricalChartStartTime:Q,categoricalChartEndTime:re}),we.value=!1}else if(u.value===He.TrendAnalysis&&Ua(Q)&&Ua(re)){const Lt=Wl(Kl(Q),Xn(re),m.value,x.value,Va.TrendAnalysis);Ue=at.updateTransactionStatisticsFilter({trendChartDateType:Lt,trendChartStartYearMonth:Q,trendChartEndYearMonth:re}),st.value=!1}else if(u.value===He.AssetTrends&&Ht(Q)&&Ht(re)){const Lt=Wl(Q,re,m.value,x.value,Va.AssetTrends);Ue=at.updateTransactionStatisticsFilter({assetTrendsChartDateType:Lt,assetTrendsChartStartTime:Q,assetTrendsChartEndTime:re}),we.value=!1}Ue&&(d.value=!0,at.updateTransactionStatisticsInvalidState(!0),n.push(Mt()))}function Ka(Q){let re=!1;if(u.value===He.CategoricalAnalysis){if(I.value.categoricalChartDateType===Rt.All.type)return;const Ue=Wn(I.value.categoricalChartStartTime,I.value.categoricalChartEndTime,Q,m.value,x.value,Va.Normal);re=at.updateTransactionStatisticsFilter({categoricalChartDateType:Ue.dateType,categoricalChartStartTime:Ue.minTime,categoricalChartEndTime:Ue.maxTime})}else if(u.value===He.TrendAnalysis){const Ue=Wn(Kl(I.value.trendChartStartYearMonth),Xn(I.value.trendChartEndYearMonth),Q,m.value,x.value,Va.TrendAnalysis);re=at.updateTransactionStatisticsFilter({trendChartDateType:Ue.dateType,trendChartStartYearMonth:Un(Ue.minTime),trendChartEndYearMonth:Un(Ue.maxTime)})}else if(u.value===He.AssetTrends){if(I.value.assetTrendsChartDateType===Rt.All.type)return;const Ue=Wn(I.value.assetTrendsChartStartTime,I.value.assetTrendsChartEndTime,Q,m.value,x.value,Va.AssetTrends);re=at.updateTransactionStatisticsFilter({assetTrendsChartDateType:Ue.dateType,assetTrendsChartStartTime:Ue.minTime,assetTrendsChartEndTime:Ue.maxTime})}re&&(d.value=!0,at.updateTransactionStatisticsInvalidState(!0),n.push(Mt()))}function fa(Q){De.value=!1,Q&&(d.value=!0,at.updateTransactionStatisticsInvalidState(!0),n.push(Mt()))}function yl(Q){St.value=!1,Q&&(d.value=!0,at.updateTransactionStatisticsInvalidState(!0),n.push(Mt()))}function Na(Q){_t.value=!1,Q&&(d.value=!0,at.updateTransactionStatisticsInvalidState(!0),n.push(Mt()))}function Ma(Q){if(u.value===He.AssetTrends||I.value.keyword===Q)return;let re=!1;u.value===He.CategoricalAnalysis?re=at.updateTransactionStatisticsFilter({keyword:Q}):u.value===He.TrendAnalysis&&(re=at.updateTransactionStatisticsFilter({keyword:Q})),re&&(d.value=!0,at.updateTransactionStatisticsInvalidState(!0),n.push(Mt()))}function Ga(){if(u.value===He.CategoricalAnalysis&&K.value&&K.value.items)Qe.value?.open({headers:[c("Name"),c("Amount")+` (${w.value})`,c("Proportion (%)")],data:K.value.items.filter(Q=>!Q.hidden).map(Q=>[Q.name,k(Q.totalAmount),Q.percent.toFixed(4)])});else if(u.value===He.TrendAnalysis&&me.value&&me.value.items&&At.value){const Q=At.value.exportData();Qe.value?.open({headers:Q.headers||[],data:Q.data||[]})}else if(u.value===He.AssetTrends&&Ne.value&&Ne.value.items&&Zt.value){const Q=Zt.value.exportData();Qe.value?.open({headers:Q.headers||[],data:Q.data||[]})}}function ll(Q,re,Ue,Lt){if(Q==="category"&&Ue==="category"&&re&&Lt){const ya=Bt.allTransactionCategoriesMap[re],Fe=Bt.allTransactionCategoriesMap[Lt];if(ya?.parentId===Fe?.id){n.push(Kt(`${Q}:${re}`));return}else if(Fe?.parentId===ya?.id){n.push(Kt(`${Ue}:${Lt}`));return}}n.push(Kt(`${Q}:${re}`+(Ue&&Lt?`-${Ue}:${Lt}`:"")))}function nl(Q){n.push(Kt(Q.id))}function Se(Q){n.push(Kt(Q.itemId,Q.dateRange))}function ge(Q){Yt.value?.showError(Q)}return ao(Q=>{Q.query?tl({initAnalysisType:Q.query.analysisType||void 0,initChartDataType:Q.query.chartDataType||void 0,initChartType:Q.query.chartType||void 0,initChartDateType:Q.query.chartDateType||void 0,initStartTime:Q.query.startTime||void 0,initEndTime:Q.query.endTime||void 0,initFilterAccountIds:Q.query.filterAccountIds||void 0,initFilterCategoryIds:Q.query.filterCategoryIds||void 0,initTagIds:Q.query.tagIds||void 0,initTagFilterType:Q.query.tagFilterType||void 0,initKeyword:Q.query.keyword||void 0,initSortingType:Q.query.sortingType||void 0,initTrendDateAggregationType:Q.query.trendDateAggregationType||void 0,initAssetTrendsDateAggregationType:Q.query.assetTrendsDateAggregationType||void 0}):tl({})}),Ft(()=>o.mdAndUp.value,Q=>{Be.value=Q,ct.value||(ct.value=Q)}),tl(T),(Q,re)=>{const Ue=Ie("btn-vertical-group"),Lt=Ie("account-and-category-sankey-chart"),ya=Ie("pie-chart"),Fe=Ie("ItemIcon"),it=Ie("router-link"),dl=Ie("radar-chart"),El=Ie("date-range-selection-dialog"),Ul=Ie("month-range-selection-dialog");return l(),b(ue,null,[t(Ae,{class:"match-height"},{default:a(()=>[t(R,{cols:"12"},{default:a(()=>[t(Ee,null,{default:a(()=>[t(nn,null,{default:a(()=>[t(on,{permanent:Be.value,modelValue:ct.value,"onUpdate:modelValue":re[4]||(re[4]=E=>ct.value=E)},{default:a(()=>[s("div",Yh,[t(Ue,{disabled:e(d),buttons:[{name:e(c)("Categorical Analysis"),value:e(He).CategoricalAnalysis},{name:e(c)("Trend Analysis"),value:e(He).TrendAnalysis},{name:e(c)("Asset Trends"),value:e(He).AssetTrends}],modelValue:Ze.value,"onUpdate:modelValue":re[0]||(re[0]=E=>Ze.value=E)},null,8,["disabled","buttons","modelValue"])]),t(Ke),s("div",Wh,[s("span",Kh,i(e(c)("Chart Type")),1),Pa(t(Je,{"item-title":"displayName","item-value":"type",class:"mt-2",density:"compact",disabled:e(d),items:jt.value,modelValue:Te.value,"onUpdate:modelValue":re[1]||(re[1]=E=>Te.value=E)},null,8,["disabled","items","modelValue"]),[[Ba,!gt.value]]),Pa(t(Je,{"item-title":"displayName","item-value":"type",class:"mt-2",density:"compact",disabled:!0,items:[{displayName:e(c)("Sankey Chart"),type:0}],"model-value":0},null,8,["items"]),[[Ba,gt.value&&Nt.value===e(kt).Overview.type]])]),s("div",Gh,[s("span",Jh,i(e(c)("Sort Order")),1),t(Je,{"item-title":"displayName","item-value":"type",class:"mt-2",density:"compact",disabled:e(d),items:e(N),modelValue:xt.value,"onUpdate:modelValue":re[2]||(re[2]=E=>xt.value=E)},null,8,["disabled","items","modelValue"])]),t(Xa,{"show-arrows":"",class:"my-4",direction:"vertical",disabled:e(d),modelValue:Nt.value,"onUpdate:modelValue":re[3]||(re[3]=E=>Nt.value=E)},{default:a(()=>[(l(!0),b(ue,null,$e(e(kt).values(void 0,!0),E=>Pa((l(),p(qt,{class:"tab-text-truncate",key:E.type,value:E.type},{default:a(()=>[s("span",Zh,i(e(c)(E.name)),1),t(yt,{activator:"parent",location:"right"},{default:a(()=>[j(i(e(c)(E.name)),1)]),_:2},1024)]),_:2},1032,["value"])),[[Ba,E.isAvailableAnalysisType(Ze.value)]])),128))]),_:1},8,["disabled","modelValue"])]),_:1},8,["permanent","modelValue"]),t(sn,null,{default:a(()=>[t(ja,{class:"d-flex flex-grow-1 disable-tab-transition w-100-window-container",modelValue:pe.value,"onUpdate:modelValue":re[15]||(re[15]=E=>pe.value=E)},{default:a(()=>[t(Pt,{value:"statisticsPage"},{default:a(()=>[t(Ee,{variant:"flat","min-height":Ze.value===e(He).TrendAnalysis||Ze.value===e(He).AssetTrends?"900":"800"},{title:a(()=>[s("div",Qh,[t(H,{class:"me-3 d-md-none",density:"compact",color:"default",variant:"plain",ripple:!1,icon:!0,onClick:re[5]||(re[5]=E=>ct.value=!ct.value)},{default:a(()=>[t(se,{icon:e(an),size:"24"},null,8,["icon"])]),_:1}),s("span",null,i(e(c)("Statistics & Analysis")),1),t(ln,{class:"ms-4",color:"default",density:"comfortable",variant:"outlined",divided:""},{default:a(()=>[t(H,{class:"button-icon-with-direction",icon:e(Mo),disabled:e(d)||!e(_),onClick:re[6]||(re[6]=E=>Ka(-1))},null,8,["icon","disabled"]),t(nt,{location:"bottom"},{activator:a(({props:E})=>[t(H,Ct({disabled:e(d)||!e(V)},E),{default:a(()=>[j(i(e(Z)),1)]),_:1},16,["disabled"])]),default:a(()=>[t(ze,{selected:[e(M)]},{default:a(()=>[(l(!0),b(ue,null,$e(e(S),E=>(l(),p(le,{key:E.type,value:E.type,"append-icon":e(M)===E.type?e(Ye):void 0},{default:a(()=>[t(ot,{class:"cursor-pointer",onClick:he=>al(E.type)},{default:a(()=>[s("div",Xh,[s("span",null,i(E.displayName),1)]),E.isUserCustomRange&&e(et)(E.type)?(l(),b("div",eb,[s("span",null,i(e(U)),1),re[21]||(re[21]=s("span",null," - ",-1)),re[22]||(re[22]=s("br",null,null,-1)),s("span",null,i(e(X)),1)])):r("",!0)]),_:2},1032,["onClick"])]),_:2},1032,["value","append-icon"]))),128))]),_:1},8,["selected"])]),_:1}),t(H,{class:"button-icon-with-direction",icon:e($a),disabled:e(d)||!e(_),onClick:re[7]||(re[7]=E=>Ka(1))},null,8,["icon","disabled"])]),_:1}),Ze.value===e(He).TrendAnalysis?(l(),p(nt,{key:0,location:"bottom"},{activator:a(({props:E})=>[t(H,Ct({class:"ms-3",color:"default",variant:"outlined","prepend-icon":e(ts),disabled:e(d)},E),{default:a(()=>[j(i(e(q)),1)]),_:1},16,["prepend-icon","disabled"])]),default:a(()=>[t(ze,null,{default:a(()=>[(l(!0),b(ue,null,$e(e(A),E=>(l(),p(le,{class:"cursor-pointer",key:E.type,value:E.type,"append-icon":e(C)===E.type?e(Ye):void 0,title:E.displayName,onClick:he=>va(E.type)},null,8,["value","append-icon","title","onClick"]))),128))]),_:1})]),_:1})):r("",!0),Ze.value===e(He).AssetTrends?(l(),p(nt,{key:1,location:"bottom"},{activator:a(({props:E})=>[t(H,Ct({class:"ms-3",color:"default",variant:"outlined","prepend-icon":e(ts),disabled:e(d)},E),{default:a(()=>[j(i(e(O)),1)]),_:1},16,["prepend-icon","disabled"])]),default:a(()=>[t(ze,null,{default:a(()=>[(l(!0),b(ue,null,$e(e($),E=>(l(),p(le,{class:"cursor-pointer",key:E.type,value:E.type,"append-icon":e(F)===E.type?e(Ye):void 0,title:E.displayName,onClick:he=>Ya(E.type)},null,8,["value","append-icon","title","onClick"]))),128))]),_:1})]),_:1})):r("",!0),t(H,{density:"compact",color:"default",variant:"text",size:"24",class:"ms-2",icon:!0,loading:e(d),onClick:re[8]||(re[8]=E=>Ca(!0))},{loader:a(()=>[t(je,{indeterminate:"",size:"20"})]),default:a(()=>[t(se,{icon:e(wa),size:"24"},null,8,["icon"]),t(yt,{activator:"parent"},{default:a(()=>[j(i(e(c)("Refresh")),1)]),_:1})]),_:1},8,["loading"]),t(pt),s("div",tb,[e(W)?(l(),p(dt,{key:0,density:"compact",disabled:e(d),"prepend-inner-icon":e(Lo),"append-inner-icon":ke.value!==e(I).keyword?e(Ye):void 0,placeholder:e(c)("Filter transaction description"),modelValue:ke.value,"onUpdate:modelValue":re[9]||(re[9]=E=>ke.value=E),"onClick:appendInner":re[10]||(re[10]=E=>Ma(ke.value)),onKeyup:re[11]||(re[11]=Wt(E=>Ma(ke.value),["enter"]))},null,8,["disabled","prepend-inner-icon","append-inner-icon","placeholder","modelValue"])):r("",!0)]),t(H,{density:"comfortable",color:"default",variant:"text",class:"ms-2",disabled:e(d),icon:!0},{default:a(()=>[t(se,{icon:e(Jt)},null,8,["icon"]),t(nt,{activator:"parent"},{default:a(()=>[t(ze,null,{default:a(()=>[t(le,{disabled:e(d),"prepend-icon":e(Hn),title:e(c)("Filter Accounts"),onClick:re[12]||(re[12]=E=>De.value=!0)},null,8,["disabled","prepend-icon","title"]),e(D)?(l(),p(le,{key:0,disabled:e(d),"prepend-icon":e(Hn),title:e(c)("Filter Transaction Categories"),onClick:re[13]||(re[13]=E=>St.value=!0)},null,8,["disabled","prepend-icon","title"])):r("",!0),e(P)?(l(),p(le,{key:1,disabled:e(d),"prepend-icon":e(Hn),title:e(c)("Filter Transaction Tags"),onClick:re[14]||(re[14]=E=>_t.value=!0)},null,8,["disabled","prepend-icon","title"])):r("",!0),gt.value?r("",!0):(l(),p(Ke,{key:2,class:"my-2"})),gt.value?r("",!0):(l(),p(le,{key:3,"prepend-icon":e(rr),title:e(c)("Export Results"),disabled:!Le.value,onClick:Ga},null,8,["prepend-icon","title","disabled"])),t(Ke,{class:"my-2"}),t(le,{to:"/app/settings?tab=statisticsSetting","prepend-icon":e(ur),title:e(c)("Settings")},null,8,["prepend-icon","title"])]),_:1})]),_:1})]),_:1},8,["disabled"])])]),default:a(()=>[Ze.value===e(He).CategoricalAnalysis&&gt.value&&Nt.value===e(kt).Overview.type&&(ce.value||e(te)&&e(te).items&&e(te).items.length)?(l(),p(ve,{key:0,class:be(["statistics-overview-title pt-0",{disabled:e(d)}])},{default:a(()=>[s("span",ab,i(e(c)("Total Income")),1),!ce.value&&e(te)&&e(te).items&&e(te).items.length?(l(),b("span",lb,i(e(Ve)(e(te).totalIncome,e(w))),1)):ce.value?(l(),p(ut,{key:1,class:"skeleton-no-margin ms-3 mb-2",width:"120px",type:"text",loading:!0})):r("",!0),s("span",nb,i(e(c)("Total Expense")),1),!ce.value&&e(te)&&e(te).items&&e(te).items.length?(l(),b("span",ob,i(e(Ve)(e(te).totalExpense,e(w))),1)):ce.value?(l(),p(ut,{key:3,class:"skeleton-no-margin ms-3 mb-2",width:"120px",type:"text",loading:!0})):r("",!0)]),_:1},8,["class"])):Ze.value===e(He).CategoricalAnalysis&&!gt.value&&(ce.value||e(K)&&e(K).items&&e(K).items.length)?(l(),p(ve,{key:1,class:be(["statistics-overview-title pt-0",{disabled:e(d)}])},{default:a(()=>[s("span",sb,i(e(de)),1),!ce.value&&e(K)&&e(K).items&&e(K).items.length?(l(),b("span",{key:0,class:be(["statistics-overview-amount ms-3",xa.value])},i(e(Ve)(e(K).totalAmount,e(w))),3)):ce.value?(l(),p(ut,{key:1,class:"skeleton-no-margin ms-3 mb-2",width:"120px",type:"text",loading:!0})):r("",!0)]),_:1},8,["class"])):!e(d)&&(Ze.value===e(He).CategoricalAnalysis&&gt.value&&Nt.value===e(kt).Overview.type&&(!e(te)||!e(te).items||!e(te).items.length)||Ze.value===e(He).CategoricalAnalysis&&!gt.value&&(!e(K)||!e(K).items||!e(K).items.length)||Ze.value===e(He).TrendAnalysis&&(!e(me)||!e(me).items||!e(me).items.length)||Ze.value===e(He).AssetTrends&&(!e(Ne)||!e(Ne).items||!e(Ne).items.length))?(l(),p(ve,{key:2,class:"statistics-overview-title pt-0"},{default:a(()=>[s("span",ib,i(e(c)("No transaction data")),1)]),_:1})):r("",!0),Ze.value===e(He).CategoricalAnalysis&&Nt.value===e(kt).Overview.type?(l(),p(ve,{key:3,class:be({readonly:e(d)})},{default:a(()=>[ce.value?(l(),p(Lt,{key:0,items:[],"sorting-type":xt.value,skeleton:!0},null,8,["sorting-type"])):ce.value?r("",!0):(l(),p(Lt,{key:1,items:e(te)&&e(te).items&&e(te).items.length?e(te).items:[],"enable-click-item":!0,"default-currency":e(w),onClick:ll},null,8,["items","default-currency"]))]),_:1},8,["class"])):r("",!0),Ze.value===e(He).CategoricalAnalysis&&!gt.value&&e(I).categoricalChartType===e(fo).Pie.type?(l(),p(ve,{key:4,class:be({readonly:e(d)})},{default:a(()=>[ce.value?(l(),p(ya,{key:0,items:[{id:"1",name:"---",value:60,color:"7c7c7f"},{id:"2",name:"---",value:20,color:"a5a5aa"},{id:"3",name:"---",value:20,color:"c5c5c9"}],skeleton:!0,"id-field":"id","name-field":"name","value-field":"value","color-field":"color"})):ce.value?r("",!0):(l(),p(ya,{key:1,items:e(K)&&e(K).items&&e(K).items.length?e(K).items:[],"min-valid-percent":1e-4,"show-value":e(ne),"show-percent":e(J),"enable-click-item":!0,"default-currency":e(w),"id-field":"id","name-field":"name","value-field":"totalAmount","percent-field":"percent","hidden-field":"hidden",onClick:nl},null,8,["items","show-value","show-percent","default-currency"]))]),_:1},8,["class"])):r("",!0),Ze.value===e(He).CategoricalAnalysis&&!gt.value&&e(I).categoricalChartType===e(fo).Bar.type?(l(),p(ve,{key:5,class:be({readonly:e(d)})},{default:a(()=>[ce.value?(l(),p(ze,{key:0,rounded:"",lines:"two"},{default:a(()=>[(l(),b(ue,null,$e([1,2,3],E=>(l(),b(ue,{key:E},[t(le,{class:"ps-0"},{prepend:a(()=>[s("div",null,[t(se,{class:"disabled me-0",size:"34",icon:e(hn)},null,8,["icon"])])]),default:a(()=>[s("div",rb,[s("div",ub,[t(ut,{class:"skeleton-no-margin my-2",width:"120px",type:"text",loading:!0})]),s("div",null,[t(ho,{"model-value":0,height:4})])])]),_:1}),E<3?(l(),p(Ke,{key:0})):r("",!0)],64))),64))]),_:1})):!ce.value&&e(K)&&e(K).items&&e(K).items.length?(l(),p(ze,{key:1,class:"py-0",rounded:"",lines:"two"},{default:a(()=>[(l(!0),b(ue,null,$e(e(K).items,(E,he)=>(l(),b(ue,{key:he},[E.hidden?r("",!0):(l(),p(le,{key:0,class:"ps-0"},{prepend:a(()=>[t(it,{class:"statistics-list-item",to:Kt(E.id)},{default:a(()=>[t(Fe,{"icon-type":e(z),size:"34px","icon-id":E.icon,color:E.color},null,8,["icon-type","icon-id","color"])]),_:2},1032,["to"])]),default:a(()=>[t(it,{class:"statistics-list-item",to:Kt(E.id)},{default:a(()=>[s("div",db,[s("div",cb,[s("span",null,i(E.name),1),e(J)&&E.percent>=0?(l(),b("small",mb,i(e(h)(E.percent,2,"<0.01")),1)):r("",!0),t(pt),s("span",pb,i(e(Ve)(E.totalAmount,e(w))),1)]),s("div",null,[t(ho,{color:E.color?e(Me)(E):"primary","bg-color":We.value?"#444444":"#f8f8f8","bg-opacity":1,"model-value":E.percent>=0?E.percent:0,height:4},null,8,["color","bg-color","model-value"])])])]),_:2},1032,["to"])]),_:2},1024)),!E.hidden&&he!==e(K).items.length-1?(l(),p(Ke,{key:1})):r("",!0)],64))),128))]),_:1})):r("",!0)]),_:1},8,["class"])):r("",!0),Ze.value===e(He).CategoricalAnalysis&&!gt.value&&e(I).categoricalChartType===e(fo).Radar.type?(l(),p(ve,{key:6,class:be({readonly:e(d)})},{default:a(()=>[ce.value?(l(),p(dl,{key:0,items:[{name:"---",value:10},{name:"---",value:10},{name:"---",value:10},{name:"---",value:10},{name:"---",value:10},{name:"---",value:10}],skeleton:!0,"name-field":"name","value-field":"value"})):ce.value?r("",!0):(l(),p(dl,{key:1,items:e(K)&&e(K).items&&e(K).items.length?e(K).items:[],"min-valid-percent":1e-4,"show-value":e(ne),"show-percent":e(J),"default-currency":e(w),"name-field":"name","value-field":"totalAmount","percent-field":"percent","hidden-field":"hidden"},null,8,["items","show-value","show-percent","default-currency"]))]),_:1},8,["class"])):r("",!0),Ze.value===e(He).TrendAnalysis?(l(),p(ve,{key:7,class:be({readonly:e(d)})},{default:a(()=>[ce.value?(l(),p(yn,{key:0,"chart-mode":"monthly",type:Te.value,"start-time":void 0,"end-time":void 0,"start-year-month":e(I).trendChartStartYearMonth,"end-year-month":e(I).trendChartEndYearMonth,"sorting-type":xt.value,"data-aggregation-type":e(Hl).Sum,"date-aggregation-type":e(C),"fiscal-year-start":e(x),items:[],skeleton:!0,"id-field":"id","name-field":"name","value-field":"value","color-field":"color"},null,8,["type","start-year-month","end-year-month","sorting-type","data-aggregation-type","date-aggregation-type","fiscal-year-start"])):!ce.value&&e(me)&&e(me).items&&e(me).items.length?(l(),p(yn,{key:1,"chart-mode":"monthly",type:Te.value,"start-time":void 0,"end-time":void 0,"start-year-month":e(I).trendChartStartYearMonth,"end-year-month":e(I).trendChartEndYearMonth,"sorting-type":xt.value,"data-aggregation-type":e(Hl).Sum,"date-aggregation-type":e(C),"fiscal-year-start":e(x),items:e(me)&&e(me).items&&e(me).items.length?e(me).items:[],"translate-name":e(fe),"show-value":e(ne),"enable-click-item":!0,"default-currency":e(w),stacked:e(ie),"show-total-amount-in-tooltip":e(Y),ref_key:"monthlyTrendsChart",ref:At,"id-field":"id","name-field":"name","value-field":"totalAmount","hidden-field":"hidden","display-orders-field":"displayOrders",onClick:Se},null,8,["type","start-year-month","end-year-month","sorting-type","data-aggregation-type","date-aggregation-type","fiscal-year-start","items","translate-name","show-value","default-currency","stacked","show-total-amount-in-tooltip"])):r("",!0)]),_:1},8,["class"])):r("",!0),Ze.value===e(He).AssetTrends?(l(),p(ve,{key:8,class:be({readonly:e(d)})},{default:a(()=>[ce.value?(l(),p(yn,{key:0,"chart-mode":"daily",type:Te.value,"start-time":e(I).assetTrendsChartStartTime,"end-time":e(I).assetTrendsChartEndTime,"start-year-month":void 0,"end-year-month":void 0,"sorting-type":xt.value,"data-aggregation-type":e(Hl).Last,"date-aggregation-type":e(F),"fiscal-year-start":e(x),items:[],skeleton:!0,"id-field":"id","name-field":"name","value-field":"value","color-field":"color"},null,8,["type","start-time","end-time","sorting-type","data-aggregation-type","date-aggregation-type","fiscal-year-start"])):!ce.value&&e(Ne)&&e(Ne).items&&e(Ne).items.length?(l(),p(yn,{key:1,"chart-mode":"daily",type:Te.value,"start-time":e(I).assetTrendsChartStartTime,"end-time":e(I).assetTrendsChartEndTime,"start-year-month":void 0,"end-year-month":void 0,"sorting-type":xt.value,"data-aggregation-type":e(Hl).Last,"date-aggregation-type":e(F),"fiscal-year-start":e(x),items:e(Ne)&&e(Ne).items&&e(Ne).items.length?e(Ne).items:[],"translate-name":e(fe),"show-value":e(ne),"enable-click-item":!0,"default-currency":e(w),stacked:e(ie),"show-total-amount-in-tooltip":e(Y),ref_key:"dailyTrendsChart",ref:Zt,"id-field":"id","name-field":"name","value-field":"totalAmount","hidden-field":"hidden","display-orders-field":"displayOrders",onClick:Se},null,8,["type","start-time","end-time","sorting-type","data-aggregation-type","date-aggregation-type","fiscal-year-start","items","translate-name","show-value","default-currency","stacked","show-total-amount-in-tooltip"])):r("",!0)]),_:1},8,["class"])):r("",!0)]),_:1},8,["min-height"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(El,{title:e(c)("Custom Date Range"),"min-time":e(I).categoricalChartStartTime,"max-time":e(I).categoricalChartEndTime,show:we.value,"onUpdate:show":re[16]||(re[16]=E=>we.value=E),"onDateRange:change":Wa,onError:ge},null,8,["title","min-time","max-time","show"]),t(Ul,{title:e(c)("Custom Date Range"),"min-time":e(I).trendChartStartYearMonth,"max-time":e(I).trendChartEndYearMonth,show:st.value,"onUpdate:show":re[17]||(re[17]=E=>st.value=E),"onDateRange:change":Wa,onError:ge},null,8,["title","min-time","max-time","show"]),t(Tt,{width:"800",modelValue:De.value,"onUpdate:modelValue":re[18]||(re[18]=E=>De.value=E)},{default:a(()=>[t(Xl,{type:"statisticsCurrent","dialog-mode":!0,"onSettings:change":fa})]),_:1},8,["modelValue"]),t(Tt,{width:"800",modelValue:St.value,"onUpdate:modelValue":re[19]||(re[19]=E=>St.value=E)},{default:a(()=>[t(no,{type:"statisticsCurrent","dialog-mode":!0,"onSettings:change":yl})]),_:1},8,["modelValue"]),t(Tt,{width:"800",modelValue:_t.value,"onUpdate:modelValue":re[20]||(re[20]=E=>_t.value=E)},{default:a(()=>[t(ri,{type:"statisticsCurrent","dialog-mode":!0,"onSettings:change":Na})]),_:1},8,["modelValue"]),t(Hh,{ref_key:"exportDialog",ref:Qe},null,512),t(mt,{ref_key:"snackbar",ref:Yt},null,512)],64)}}}),fb={class:"d-flex align-center justify-center"},yb={class:"d-flex w-100 align-center justify-center"},gb={class:"text-h4"},hb={key:0,class:"mb-4"},bb={class:"d-flex align-center"},kb={class:"ms-2"},_b={class:"w-100 d-flex justify-center mt-2 mt-sm-4 mt-md-6 gap-4"},Tb=Pe({__name:"EditDialog",setup(f,{expose:T}){const{tt:n}=Oe(),{editAccountId:o,clientSessionId:g,loading:c,submitting:v,account:y,subAccounts:k,title:h,saveButtonTitle:d,inputEmptyProblemMessage:u,inputIsEmpty:C,allAccountCategories:F,allAccountTypes:w,allAvailableMonthDays:m,isAccountSupportCreditCardStatementDate:x,isNewAccount:S,addSubAccount:N,setAccount:A}=_d(),$=ra(),I=_a(),z=xe("confirmDialog"),M=xe("snackbar"),U=L(!1),X=L("account"),Z=L(-1),q=B(()=>Z.value<0?y.value:k.value[Z.value]),O=B(()=>Z.value<0?y.value.isLiability?n("Account Outstanding Balance"):n("Account Balance"):y.value.isLiability?n("Sub-account Outstanding Balance"):n("Sub-account Balance")),V=B(()=>o.value?!0:!y.value.equals(xl.createNewAccount($.currentUserDefaultCurrency,y.value.balanceTime??Ql())));let _=null,D=null;function P(Y){U.value=!0,c.value=!0,v.value=!1;const ie=xl.createNewAccount($.currentUserDefaultCurrency,Ql());return y.value.fillFrom(ie),k.value=[],Z.value=-1,g.value=pl(),Y&&Y.id?(Y.currentAccount&&A(Y.currentAccount),o.value=Y.id,I.getAccount({accountId:o.value}).then(fe=>{A(fe),c.value=!1}).catch(fe=>{c.value=!1,U.value=!1,fe.processed||D&&D(fe)})):(Y&&Ht(Y.category)&&(y.value.category=Y.category,y.value.setSuitableIcon(1,Y.category)),o.value=null,c.value=!1),new Promise((fe,te)=>{_=fe,D=te})}function W(){const Y=u.value;if(Y){M.value?.showMessage(Y);return}v.value=!0,I.saveAccount({account:y.value,subAccounts:k.value,isEdit:!!o.value,clientSessionId:g.value}).then(()=>{v.value=!1;let ie="You have saved this account";o.value||(ie="You have added a new account"),_?.({message:ie}),U.value=!1}).catch(ie=>{v.value=!1,ie.processed||M.value?.showError(ie)})}function ne(Y){z.value?.open("Are you sure you want to remove this sub-account?").then(()=>{for(const[ie,fe]of Da(k.value))ie===Y&&(k.value.splice(fe,1),Z.value>=k.value.length&&(Z.value=k.value.length-1))})}function de(){D?.(),U.value=!1}function J(Y){M.value?.showError(Y)}return Ft(()=>y.value.type,()=>{k.value.length<1&&N()}),T({open:P}),(Y,ie)=>{const fe=Ie("ItemIcon"),te=Ie("icon-select"),K=Ie("color-select"),me=Ie("currency-select"),Ne=Ie("amount-input"),et=Ie("date-time-select");return l(),b(ue,null,[t(Tt,{width:e(y).type===e(aa).MultiSubAccounts.type?1e3:800,persistent:V.value,modelValue:U.value,"onUpdate:modelValue":ie[13]||(ie[13]=Me=>U.value=Me)},{default:a(()=>[t(Ee,{class:"pa-2 pa-sm-4 pa-md-8"},{title:a(()=>[s("div",fb,[s("div",yb,[s("h4",gb,i(e(n)(e(h))),1),e(c)?(l(),p(je,{key:0,indeterminate:"",size:"22",class:"ms-2"})):r("",!0)]),t(H,{density:"comfortable",color:"default",variant:"text",class:"ms-2",icon:!0,disabled:e(c)||e(v)||e(y).type!==e(aa).MultiSubAccounts.type},{default:a(()=>[t(se,{icon:e(Jt)},null,8,["icon"]),t(nt,{activator:"parent"},{default:a(()=>[t(ze,null,{default:a(()=>[t(le,{"prepend-icon":e(dr),title:e(n)("Add Sub-account"),onClick:e(N)},null,8,["prepend-icon","title","onClick"])]),_:1})]),_:1})]),_:1},8,["disabled"])])]),default:a(()=>[t(ve,{class:"d-flex flex-column flex-md-row mt-md-4 pt-0"},{default:a(()=>[e(y).type===e(aa).MultiSubAccounts.type?(l(),b("div",hb,[t(Xa,{direction:"vertical",disabled:e(c)||e(v),modelValue:Z.value,"onUpdate:modelValue":ie[0]||(ie[0]=Me=>Z.value=Me)},{default:a(()=>[t(qt,{value:-1},{default:a(()=>[s("span",null,i(e(n)("Main Account")),1)]),_:1}),e(y).type===e(aa).MultiSubAccounts.type?(l(!0),b(ue,{key:0},$e(e(k),(Me,Ve)=>(l(),p(qt,{key:Ve,value:Ve},{default:a(()=>[s("span",null,i(e(n)("Sub Account")+" #"+(Ve+1)),1),t(H,{class:"ms-2",color:"error",size:"24",variant:"text",icon:e(rn),onClick:bt=>ne(Me)},null,8,["icon","onClick"])]),_:2},1032,["value"]))),128)):r("",!0)]),_:1},8,["disabled","modelValue"])])):r("",!0),t(ja,{class:be(["d-flex flex-grow-1 disable-tab-transition w-100-window-container",{"ms-md-5":e(y).type===e(aa).MultiSubAccounts.type}]),modelValue:X.value,"onUpdate:modelValue":ie[12]||(ie[12]=Me=>X.value=Me)},{default:a(()=>[t(Pt,{value:"account"},{default:a(()=>[t(zt,{class:"mt-2"},{default:a(()=>[t(Ae,null,{default:a(()=>[e(y).type===e(aa).SingleAccount.type||Z.value<0?(l(),p(R,{key:0,cols:"12",md:"12"},{default:a(()=>[t(Je,{"item-title":"displayName","item-value":"type","persistent-placeholder":"",disabled:e(c)||e(v),label:e(n)("Account Category"),placeholder:e(n)("Account Category"),items:e(F),"no-data-text":e(n)("No results"),modelValue:q.value.category,"onUpdate:modelValue":ie[1]||(ie[1]=Me=>q.value.category=Me)},{item:a(({props:Me,item:Ve})=>[t(le,Ct({value:Ve.value},Me),{title:a(()=>[t(ot,null,{default:a(()=>[s("div",bb,[Ve.raw?(l(),p(fe,{key:0,"icon-type":"account","icon-id":Ve.raw.defaultAccountIconId},null,8,["icon-id"])):r("",!0),s("span",kb,i(Ve.title),1)])]),_:2},1024)]),_:2},1040,["value"])]),_:1},8,["disabled","label","placeholder","items","no-data-text","modelValue"])]),_:1})):r("",!0),e(y).type===e(aa).SingleAccount.type||Z.value<0?(l(),p(R,{key:1,cols:"12",md:"12"},{default:a(()=>[t(Je,{"item-title":"displayName","item-value":"type","persistent-placeholder":"",disabled:e(c)||e(v)||!!e(o),label:e(n)("Account Type"),placeholder:e(n)("Account Type"),items:e(w),"no-data-text":e(n)("No results"),modelValue:q.value.type,"onUpdate:modelValue":ie[2]||(ie[2]=Me=>q.value.type=Me)},null,8,["disabled","label","placeholder","items","no-data-text","modelValue"])]),_:1})):r("",!0),t(R,{cols:"12",md:"12"},{default:a(()=>[t(dt,{type:"text","persistent-placeholder":"",disabled:e(c)||e(v),label:Z.value<0?e(n)("Account Name"):e(n)("Sub-account Name"),placeholder:Z.value<0?e(n)("Your account name"):e(n)("Your sub-account name"),modelValue:q.value.name,"onUpdate:modelValue":ie[3]||(ie[3]=Me=>q.value.name=Me)},null,8,["disabled","label","placeholder","modelValue"])]),_:1}),t(R,{cols:"12",md:"6"},{default:a(()=>[t(te,{"icon-type":"account","all-icon-infos":e(Td),label:Z.value<0?e(n)("Account Icon"):e(n)("Sub-account Icon"),color:q.value.color,disabled:e(c)||e(v),modelValue:q.value.icon,"onUpdate:modelValue":ie[4]||(ie[4]=Me=>q.value.icon=Me)},null,8,["all-icon-infos","label","color","disabled","modelValue"])]),_:1}),t(R,{cols:"12",md:"6"},{default:a(()=>[t(K,{"all-color-infos":e(xd),label:Z.value<0?e(n)("Account Color"):e(n)("Sub-account Color"),disabled:e(c)||e(v),modelValue:q.value.color,"onUpdate:modelValue":ie[5]||(ie[5]=Me=>q.value.color=Me)},null,8,["all-color-infos","label","disabled","modelValue"])]),_:1}),e(y).type===e(aa).SingleAccount.type||Z.value>=0?(l(),p(R,{key:2,cols:"12",md:Z.value<0&&e(x)?6:12},{default:a(()=>[t(me,{disabled:e(c)||e(v)||!!e(o)&&!e(S)(q.value),label:e(n)("Currency"),placeholder:e(n)("Currency"),modelValue:q.value.currency,"onUpdate:modelValue":ie[6]||(ie[6]=Me=>q.value.currency=Me)},null,8,["disabled","label","placeholder","modelValue"])]),_:1},8,["md"])):r("",!0),Z.value<0&&e(x)?(l(),p(R,{key:3,cols:"12",md:e(y).type===e(aa).SingleAccount.type||Z.value>=0?6:12},{default:a(()=>[t(sa,{"item-title":"displayName","item-value":"day","auto-select-first":"","persistent-placeholder":"",disabled:e(c)||e(v),label:e(n)("Statement Date"),placeholder:e(n)("Statement Date"),items:e(m),"no-data-text":e(n)("No results"),modelValue:e(y).creditCardStatementDate,"onUpdate:modelValue":ie[7]||(ie[7]=Me=>e(y).creditCardStatementDate=Me)},null,8,["disabled","label","placeholder","items","no-data-text","modelValue"])]),_:1},8,["md"])):r("",!0),e(y).type===e(aa).SingleAccount.type||Z.value>=0?(l(),p(R,{key:4,cols:"12",md:(!e(o)||e(S)(q.value))&&q.value.balance?6:12},{default:a(()=>[t(Ne,{disabled:e(c)||e(v)||!!e(o)&&!e(S)(q.value),"persistent-placeholder":!0,currency:q.value.currency,"show-currency":!0,"flip-negative":e(y).isLiability,label:O.value,placeholder:O.value,modelValue:q.value.balance,"onUpdate:modelValue":ie[8]||(ie[8]=Me=>q.value.balance=Me)},null,8,["disabled","currency","flip-negative","label","placeholder","modelValue"])]),_:1},8,["md"])):r("",!0),(!e(o)||e(S)(q.value))&&(e(y).type===e(aa).SingleAccount.type||Z.value>=0)?Pa((l(),p(R,{key:5,cols:"12",md:"6"},{default:a(()=>[t(et,{disabled:e(c)||e(v),label:e(n)("Balance Time"),modelValue:q.value.balanceTime,"onUpdate:modelValue":ie[9]||(ie[9]=Me=>q.value.balanceTime=Me),onError:J},null,8,["disabled","label","modelValue"])]),_:1},512)),[[Ba,q.value.balance]]):r("",!0),t(R,{cols:"12",md:"12"},{default:a(()=>[t(La,{type:"text","persistent-placeholder":"",rows:"3",disabled:e(c)||e(v),label:e(n)("Description"),placeholder:Z.value<0?e(n)("Your account description (optional)"):e(n)("Your sub-account description (optional)"),modelValue:q.value.comment,"onUpdate:modelValue":ie[10]||(ie[10]=Me=>q.value.comment=Me)},null,8,["disabled","label","placeholder","modelValue"])]),_:1}),e(o)&&!e(S)(q.value)?(l(),p(R,{key:6,class:"py-0",cols:"12",md:"12"},{default:a(()=>[t(Qa,{disabled:e(c)||e(v),label:e(n)("Visible"),modelValue:q.value.visible,"onUpdate:modelValue":ie[11]||(ie[11]=Me=>q.value.visible=Me)},null,8,["disabled","label","modelValue"])]),_:1})):r("",!0)]),_:1})]),_:1})]),_:1})]),_:1},8,["class","modelValue"])]),_:1}),t(ve,{class:"overflow-y-visible"},{default:a(()=>[s("div",_b,[t(yt,{disabled:!e(C),text:e(u)?e(n)(e(u)):""},{activator:a(({props:Me})=>[s("div",Ct(Me,{class:"d-inline-block"}),[t(H,{disabled:e(C)||e(c)||e(v),onClick:W},{default:a(()=>[j(i(e(n)(e(d)))+" ",1),e(v)?(l(),p(je,{key:0,indeterminate:"",size:"22",class:"ms-2"})):r("",!0)]),_:1},8,["disabled"])],16)]),_:1},8,["disabled","text"]),t(H,{color:"secondary",variant:"tonal",disabled:e(c)||e(v),onClick:de},{default:a(()=>[j(i(e(n)("Cancel")),1)]),_:1},8,["disabled"])])]),_:1})]),_:1})]),_:1},8,["width","persistent","modelValue"]),t(pa,{ref_key:"confirmDialog",ref:z},null,512),t(mt,{ref_key:"snackbar",ref:M},null,512)],64)}}}),ui=Pe({__name:"AmountInputDialog",emits:["update:show"],setup(f,{expose:T,emit:n}){const o=n,{tt:g}=Oe(),c=L(!1),v=L(void 0),y=L(0);let k=null,h=null;const d=B(()=>v.value?.title?g(v.value.title):g("global.app.title")),u=B(()=>v.value?.text?g(v.value.text,v.value.textI18nOptions??{}):""),C=B(()=>v.value?.inputLabel?g(v.value.inputLabel):void 0),F=B(()=>v.value?.inputPlaceholder?g(v.value.inputPlaceholder):void 0),w=B(()=>v.value?.color||"primary");function m(N){return c.value=!0,v.value=N,y.value=N.initAmount??0,new Promise((A,$)=>{k=A,h=$})}function x(){k&&k(y.value),c.value=!1,o("update:show",!1)}function S(){h&&h(),c.value=!1,o("update:show",!1)}return Ft(c,N=>{o("update:show",N)}),T({open:m}),(N,A)=>{const $=Ie("amount-input");return l(),p(Tt,{persistent:"","min-width":"320",width:"auto",modelValue:c.value,"onUpdate:modelValue":A[1]||(A[1]=I=>c.value=I)},{default:a(()=>[t(Ee,null,{default:a(()=>[t(Eo,{color:w.value},{default:a(()=>[t(Ns,null,{default:a(()=>[j(i(d.value),1)]),_:1})]),_:1},8,["color"]),u.value?(l(),p(ve,{key:0,class:"pa-4 pb-6"},{default:a(()=>[j(i(u.value),1)]),_:1})):r("",!0),t(ve,null,{default:a(()=>[t(zt,null,{default:a(()=>[t(Ae,null,{default:a(()=>[t(R,{cols:"12"},{default:a(()=>[t($,{"persistent-placeholder":!0,currency:v.value?.currency,"show-currency":!!v.value?.currency,label:C.value,placeholder:F.value,modelValue:y.value,"onUpdate:modelValue":A[0]||(A[0]=I=>y.value=I)},null,8,["currency","show-currency","label","placeholder","modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),t(Uo,{class:"px-4 pb-4"},{default:a(()=>[t(pt),t(H,{color:"gray",onClick:S},{default:a(()=>[j(i(e(g)("Cancel")),1)]),_:1}),t(H,{color:w.value,onClick:x},{default:a(()=>[j(i(e(g)("OK")),1)]),_:1},8,["color"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),xb={class:"d-flex align-center justify-center"},Cb={class:"d-flex w-100 align-center justify-center"},wb={class:"text-h4"},Ab={key:0,class:"text-body-1 text-center text-wrap mt-2"},Ib={key:1,class:"text-body-1 text-center text-wrap mt-2"},Sb={class:"d-flex align-center mb-4"},Vb={class:"d-flex align-center text-body-1"},$b={class:"ms-2"},Db={key:0,class:"text-primary"},Fb={key:1,class:"text-primary ms-2"},Nb={class:"ms-3"},Mb={key:2,class:"text-primary"},Eb={key:3,class:"text-primary ms-2"},Ub={class:"d-flex align-center text-body-1"},Pb={class:"ms-2"},Bb={key:0,class:"text-income"},Lb={key:1,class:"text-income ms-2"},Rb={class:"ms-3"},zb={key:2,class:"text-expense"},Ob={key:3,class:"text-expense ms-2"},jb={class:"ms-3"},qb={key:4,class:"text-primary"},Hb={key:5,class:"text-primary ms-2"},Yb={class:"d-flex align-center"},Wb={key:2,class:"ms-2"},Kb={key:3,class:"ms-2"},Gb={key:1},Jb={class:"d-flex align-center"},Zb={key:0},Qb={key:2},Xb={key:0,class:"title-and-toolbar d-flex align-center text-no-wrap mt-2"},ek={class:"ms-2"},tk={key:0},ak={key:1,class:"ms-2"},lk={key:2},nk={class:"w-100 d-flex justify-center mt-2 mt-sm-4 mt-md-6 gap-4"},ok=Pe({__name:"ReconciliationStatementDialog",emits:["error"],setup(f,{expose:T,emit:n}){const o=n,{tt:g,getCurrentNumeralSystemType:c,formatNumberToLocalizedNumerals:v}=Oe(),{accountId:y,startTime:k,endTime:h,reconciliationStatements:d,currentTimezoneOffsetMinutes:u,fiscalYearStart:C,allChartTypes:F,allDateAggregationTypes:w,currentAccount:m,currentAccountCurrency:x,isCurrentLiabilityAccount:S,allAccountsMap:N,allCategoriesMap:A,exportFileName:$,displayStartDateTime:I,displayEndDateTime:z,displayTotalInflows:M,displayTotalOutflows:U,displayTotalBalance:X,displayOpeningBalance:Z,displayClosingBalance:q,getDisplayTransactionType:O,getDisplayDateTime:V,getDisplayTimezone:_,getDisplaySourceAmount:D,getDisplayDestinationAmount:P,getDisplayAccountBalance:W,getExportedData:ne}=Cd(),de=_a(),J=Ta(),Y=Nl(),ie={[ol.Column.type]:pr,[ol.Area.type]:mr,[ol.Candlestick.type]:cr},fe={[Ut.Day.type]:Ms,[Ut.Month.type]:Es,[Ut.Quarter.type]:qn,[Ut.Year.type]:qn,[Ut.FiscalYear.type]:qn},te=xe("amountInputDialog"),K=xe("snackbar"),me=xe("editDialog"),Ne=L(!1),et=L(!1),Me=L(1),Ve=L(10),bt=L(!1),Bt=L(ol.Default.type),at=L(Ut.Day.type);let Yt=null;const At=B(()=>c()),Zt=B(()=>ce(d.value?.transactions.length)),Qe=B(()=>{if(!d.value||!d.value.transactions||d.value.transactions.length<1)return 1;const We=d.value.transactions.length;return Math.ceil(We/Ve.value)}),pe=B(()=>{const We=[],Le=S.value?"Account Outstanding Balance":"Account Balance";return We.push({key:"time",value:"time",title:g("Transaction Time"),sortable:!0,nowrap:!0}),We.push({key:"type",value:"type",title:g("Type"),sortable:!0,nowrap:!0}),We.push({key:"categoryId",value:"categoryId",title:g("Category"),sortable:!0,nowrap:!0}),We.push({key:"sourceAmount",value:"sourceAmount",title:g("Amount"),sortable:!0,nowrap:!0}),We.push({key:"sourceAccountId",value:"sourceAccountId",title:g("Account"),sortable:!0,nowrap:!0}),We.push({key:"accountBalance",value:"accountBalance",title:g(Le),sortable:!0,nowrap:!0}),We.push({key:"comment",value:"comment",title:g("Description"),sortable:!0,nowrap:!0}),We.push({key:"operation",title:g("Operation"),sortable:!1,nowrap:!0,align:"end"}),We});function ce(We){const Le=[];if(!We||We<1)return Le.push({value:-1,name:g("All")}),Le;const jt=[5,10,15,20,25,30,50];for(const Ze of jt){if(We<Ze)break;Le.push({value:Ze,name:At.value.formatNumber(Ze)})}return Le.push({value:-1,name:g("All")}),Le}function ke(We){return We.type===ye.ModifyBalance?"secondary":We.type===ye.Income||We.type===ye.Expense?void 0:We.type===ye.Transfer?"primary":"default"}function Be(We){return y.value=We.accountId,k.value=We.startTime,h.value=We.endTime,d.value=void 0,Me.value=1,Ve.value=10,bt.value=!1,Bt.value=ol.Default.type,at.value=Ut.Day.type,Ne.value=!0,et.value=!0,Promise.all([de.loadAllAccounts({force:!1}),J.loadAllCategories({force:!1})]).then(()=>Y.getReconciliationStatements({accountId:We.accountId,startTime:We.startTime,endTime:We.endTime})).then(Le=>{d.value=Le,et.value=!1}).catch(Le=>{et.value=!1,Le.processed||(o("error",Le),Ne.value=!1)}),new Promise((Le,jt)=>{Yt=jt})}function ct(We){et.value=!0,Y.getReconciliationStatements({accountId:y.value,startTime:k.value,endTime:h.value}).then(Le=>{We&&(eo(d.value,Le)?K.value?.showMessage("Data is up to date"):K.value?.showMessage("Data has been updated")),d.value=Le,et.value=!1}).catch(Le=>{et.value=!1,Le.processed||K.value?.showError(Le)})}function we(){me.value?.open({accountId:y.value}).then(We=>{We&&We.message&&K.value?.showMessage(We.message),ct(!1)}).catch(We=>{We&&K.value?.showError(We)})}function st(){let We=d.value?.closingBalance??0;S.value&&(We=-We),te.value?.open({text:"Please enter the new closing balance for the account",inputLabel:"Closing Balance",inputPlaceholder:"Closing Balance",currency:x.value,initAmount:We}).then(Le=>{if(!Le)return;const jt=Ql();let Ze;h.value>0&&h.value<jt?Ze=h.value:jt<k.value&&(Ze=k.value);let Te=S.value?ye.Expense:ye.Income,Nt=Le-We;Nt<0&&(Te=S.value?ye.Income:ye.Expense,Nt=-Nt),me.value?.open({time:Ze,type:Te,amount:Nt,accountId:y.value,noTransactionDraft:!0}).then(xt=>{xt&&xt.message&&K.value?.showMessage(xt.message),ct(!1)}).catch(xt=>{xt&&K.value?.showError(xt)})})}function De(We){if(!d.value||!d.value.transactions||d.value.transactions.length<1)return;const Le=ne(We);Ml(We.formatFileName($.value),We.createBlob(Le))}function St(We){We.type!==ye.ModifyBalance&&me.value?.open({id:We.id,currentTransaction:xo.of(We)}).then(Le=>{Le&&Le.message&&K.value?.showMessage(Le.message),ct(!1)}).catch(Le=>{Le&&K.value?.showError(Le)})}function _t(){Yt?.(),Ne.value=!1}return T({open:Be}),(We,Le)=>{const jt=Ie("ItemIcon"),Ze=Ie("account-balance-trends-chart");return l(),b(ue,null,[t(Tt,{"min-height":400,persistent:et.value,modelValue:Ne.value,"onUpdate:modelValue":Le[11]||(Le[11]=Te=>Ne.value=Te)},{default:a(()=>[t(Ee,{class:"pa-6 pa-sm-10 pa-md-12"},{title:a(()=>[s("div",xb,[s("div",Cb,[s("h4",wb,i(e(g)("Reconciliation Statement")),1),t(H,{density:"compact",color:"default",variant:"text",size:"24",class:"ms-2",icon:!0,loading:et.value,onClick:Le[0]||(Le[0]=Te=>ct(!0))},{loader:a(()=>[t(je,{indeterminate:"",size:"20"})]),default:a(()=>[t(se,{icon:e(wa),size:"24"},null,8,["icon"]),t(yt,{activator:"parent"},{default:a(()=>[j(i(e(g)("Refresh")),1)]),_:1})]),_:1},8,["loading"])]),bt.value?(l(),p(H,{key:0,density:"comfortable",color:"default",variant:"text",class:"ms-2",icon:!0,disabled:et.value},{default:a(()=>[t(se,{icon:e(vr)},null,8,["icon"]),t(nt,{activator:"parent"},{default:a(()=>[t(ze,null,{default:a(()=>[t(xn,{title:e(g)("Chart Type")},null,8,["title"]),(l(!0),b(ue,null,$e(e(F),Te=>(l(),p(le,{key:Te.type,"prepend-icon":ie[Te.type],"append-icon":Bt.value===Te.type?e(Ye):void 0,title:Te.displayName,onClick:Nt=>Bt.value=Te.type},null,8,["prepend-icon","append-icon","title","onClick"]))),128)),t(Ke,{class:"my-2"}),t(xn,{title:e(g)("Time Granularity")},null,8,["title"]),(l(!0),b(ue,null,$e(e(w),Te=>(l(),p(le,{key:Te.type,"prepend-icon":fe[Te.type],"append-icon":at.value===Te.type?e(Ye):void 0,title:Te.displayName,onClick:Nt=>at.value=Te.type},null,8,["prepend-icon","append-icon","title","onClick"]))),128))]),_:1})]),_:1})]),_:1},8,["disabled"])):r("",!0),t(H,{density:"comfortable",color:"default",variant:"text",class:"ms-2",icon:!0,disabled:et.value},{default:a(()=>[t(se,{icon:e(Jt)},null,8,["icon"]),t(nt,{activator:"parent"},{default:a(()=>[t(ze,null,{default:a(()=>[t(le,{"prepend-icon":e(fr),title:e(g)("Add Transaction"),onClick:Le[1]||(Le[1]=Te=>we())},null,8,["prepend-icon","title"]),t(le,{"prepend-icon":e(yr),title:e(g)("Update Closing Balance"),onClick:Le[2]||(Le[2]=Te=>st())},null,8,["prepend-icon","title"]),t(Ke,{class:"my-2"}),t(le,{"prepend-icon":e(Rs),disabled:!e(d)||!e(d).transactions||e(d).transactions.length<1,onClick:Le[3]||(Le[3]=Te=>De(e(Dt).CSV))},{default:a(()=>[t(ot,null,{default:a(()=>[j(i(e(g)("Export to CSV (Comma-separated values) File")),1)]),_:1})]),_:1},8,["prepend-icon","disabled"]),t(le,{"prepend-icon":e(zs),disabled:!e(d)||!e(d).transactions||e(d).transactions.length<1,onClick:Le[4]||(Le[4]=Te=>De(e(Dt).TSV))},{default:a(()=>[t(ot,null,{default:a(()=>[j(i(e(g)("Export to TSV (Tab-separated values) File")),1)]),_:1})]),_:1},8,["prepend-icon","disabled"])]),_:1})]),_:1})]),_:1},8,["disabled"])])]),subtitle:a(()=>[!e(k)&&!e(h)?(l(),b("div",Ab,[s("span",null,i(e(g)("All")),1)])):r("",!0),e(k)||e(h)?(l(),b("div",Ib,[s("span",null,i(e(I)),1),Le[12]||(Le[12]=s("span",null," - ",-1)),s("span",null,i(e(z)),1)])):r("",!0)]),default:a(()=>[t(ve,{class:"py-0 w-100 d-flex justify-center mt-n4"},{default:a(()=>[t(Qa,{class:"bidirectional-switch",color:"secondary",label:e(g)("Account Balance Trends"),modelValue:bt.value,"onUpdate:modelValue":Le[5]||(Le[5]=Te=>bt.value=Te),onClick:Le[6]||(Le[6]=Te=>bt.value=!bt.value)},{prepend:a(()=>[s("span",null,i(e(g)("Transaction List")),1)]),_:1},8,["label","modelValue"])]),_:1}),s("div",Sb,[s("div",Vb,[s("span",$b,i(e(g)("Opening Balance")),1),et.value?(l(),b("span",Db,[t(ut,{class:"skeleton-no-margin ms-3",type:"text",style:{width:"80px"},loading:!0})])):et.value?r("",!0):(l(),b("span",Fb,i(e(Z)),1)),s("span",Nb,i(e(g)("Closing Balance")),1),et.value?(l(),b("span",Mb,[t(ut,{class:"skeleton-no-margin ms-3",type:"text",style:{width:"80px"},loading:!0})])):et.value?r("",!0):(l(),b("span",Eb,i(e(q)),1))]),t(pt),s("div",Ub,[s("span",Pb,i(e(g)("Total Inflows")),1),et.value?(l(),b("span",Bb,[t(ut,{class:"skeleton-no-margin ms-3",type:"text",style:{width:"80px"},loading:!0})])):et.value?r("",!0):(l(),b("span",Lb,i(e(M)),1)),s("span",Rb,i(e(g)("Total Outflows")),1),et.value?(l(),b("span",zb,[t(ut,{class:"skeleton-no-margin ms-3",type:"text",style:{width:"80px"},loading:!0})])):et.value?r("",!0):(l(),b("span",Ob,i(e(U)),1)),s("span",jb,i(e(g)("Net Cash Flow")),1),et.value?(l(),b("span",qb,[t(ut,{class:"skeleton-no-margin ms-3",type:"text",style:{width:"80px"},loading:!0})])):et.value?r("",!0):(l(),b("span",Hb,i(e(X)),1))])]),bt.value?r("",!0):(l(),p(wn,{key:0,"fixed-header":"","fixed-footer":"","multi-sort":"",density:"compact","item-value":"index",class:be({disabled:et.value}),headers:pe.value,items:e(d)?.transactions??[],"no-data-text":et.value?"":e(g)("No transaction data"),"items-per-page":Ve.value,"onUpdate:itemsPerPage":Le[9]||(Le[9]=Te=>Ve.value=Te),page:Me.value,"onUpdate:page":Le[10]||(Le[10]=Te=>Me.value=Te)},{"item.time":a(({item:Te})=>[s("span",null,i(e(V)(Te)),1),Te.utcOffset!==e(u)?(l(),p(oa,{key:0,class:"ms-1",variant:"flat",color:"secondary",size:"x-small"},{default:a(()=>[j(i(e(_)(Te)),1)]),_:2},1024)):r("",!0)]),"item.type":a(({item:Te})=>[t(oa,{label:"",variant:"outlined",size:"x-small",class:be({"text-income":Te.type===e(ye).Income,"text-expense":Te.type===e(ye).Expense}),color:ke(Te)},{default:a(()=>[j(i(e(O)(Te)),1)]),_:2},1032,["class","color"])]),"item.categoryId":a(({item:Te})=>[s("div",Yb,[e(A)[Te.categoryId]&&e(A)[Te.categoryId]?.color?(l(),p(jt,{key:0,size:"24px","icon-type":"category","icon-id":e(A)[Te.categoryId]?.icon??"",color:e(A)[Te.categoryId]?.color??""},null,8,["icon-id","color"])):!e(A)[Te.categoryId]||!e(A)[Te.categoryId]?.color?(l(),p(se,{key:1,size:"24",icon:e(Ls)},null,8,["icon"])):r("",!0),Te.type===e(ye).ModifyBalance?(l(),b("span",Wb,i(e(g)("Modify Balance")),1)):Te.type!==e(ye).ModifyBalance&&e(A)[Te.categoryId]?(l(),b("span",Kb,i(e(A)[Te.categoryId]?.name),1)):r("",!0)])]),"item.sourceAmount":a(({item:Te})=>[s("span",{class:be({"text-expense":Te.type===e(ye).Expense,"text-income":Te.type===e(ye).Income})},i(e(D)(Te)),3),Te.type===e(ye).Transfer&&Te.sourceAccountId!==Te.destinationAccountId&&e(D)(Te)!==e(P)(Te)?(l(),p(se,{key:0,class:"icon-with-direction mx-1",size:"13",icon:e($a)},null,8,["icon"])):r("",!0),Te.type===e(ye).Transfer&&Te.sourceAccountId!==Te.destinationAccountId&&e(D)(Te)!==e(P)(Te)?(l(),b("span",Gb,i(e(P)(Te)),1)):r("",!0)]),"item.sourceAccountId":a(({item:Te})=>[s("div",Jb,[Te.sourceAccountId&&e(N)[Te.sourceAccountId]?(l(),b("span",Zb,i(e(N)[Te.sourceAccountId]?.name),1)):r("",!0),Te.type===e(ye).Transfer?(l(),p(se,{key:1,class:"icon-with-direction mx-1",size:"13",icon:e($a)},null,8,["icon"])):r("",!0),Te.type===e(ye).Transfer&&Te.destinationAccountId&&e(N)[Te.destinationAccountId]?(l(),b("span",Qb,i(e(N)[Te.destinationAccountId]?.name),1)):r("",!0)])]),"item.accountBalance":a(({item:Te})=>[s("span",null,i(e(W)(Te)),1)]),"item.operation":a(({item:Te})=>[t(H,{density:"compact",variant:"text",color:"default",disabled:et.value||Te.type===e(ye).ModifyBalance,onClick:Nt=>St(Te)},{default:a(()=>[j(i(e(g)("View")),1)]),_:1},8,["disabled","onClick"])]),bottom:a(()=>[et.value||e(d)&&e(d).transactions&&e(d).transactions.length?(l(),b("div",Xb,[s("span",ek,i(e(g)("Total Transactions")),1),et.value?(l(),b("span",tk,[t(ut,{class:"skeleton-no-margin ms-3",type:"text",style:{width:"80px"},loading:!0})])):et.value?r("",!0):(l(),b("span",ak,i(e(v)(e(d)?.transactions.length??0)),1)),t(pt),e(d)&&e(d).transactions&&e(d).transactions.length>10?(l(),b("span",lk,i(e(g)("Transactions Per Page")),1)):r("",!0),e(d)&&e(d).transactions&&e(d).transactions.length>10?(l(),p(Je,{key:3,class:"ms-2",density:"compact","max-width":"100","item-title":"name","item-value":"value",disabled:et.value,items:Zt.value,modelValue:Ve.value,"onUpdate:modelValue":Le[7]||(Le[7]=Te=>Ve.value=Te)},null,8,["disabled","items","modelValue"])):r("",!0),e(d)&&e(d).transactions&&e(d).transactions.length>10?(l(),p(lo,{key:4,density:"compact",disabled:et.value,totalPageCount:Qe.value,modelValue:Me.value,"onUpdate:modelValue":Le[8]||(Le[8]=Te=>Me.value=Te)},null,8,["disabled","totalPageCount","modelValue"])):r("",!0)])):r("",!0)]),_:1},8,["class","headers","items","no-data-text","items-per-page","page"])),bt.value&&et.value?(l(),p(Ze,{key:1,type:Bt.value,"date-aggregation-type":at.value,"fiscal-year-start":e(C),items:[],"legend-name":e(S)?e(g)("Account Outstanding Balance"):e(g)("Account Balance"),account:e(m),skeleton:!0},null,8,["type","date-aggregation-type","fiscal-year-start","legend-name","account"])):r("",!0),bt.value&&!et.value?(l(),p(Ze,{key:2,type:Bt.value,"date-aggregation-type":at.value,"fiscal-year-start":e(C),items:e(d)?.transactions,"legend-name":e(S)?e(g)("Account Outstanding Balance"):e(g)("Account Balance"),account:e(m)},null,8,["type","date-aggregation-type","fiscal-year-start","items","legend-name","account"])):r("",!0),t(ve,{class:"overflow-y-visible"},{default:a(()=>[s("div",nk,[t(H,{color:"secondary",variant:"tonal",disabled:et.value,onClick:_t},{default:a(()=>[j(i(e(g)("Close")),1)]),_:1},8,["disabled"])])]),_:1})]),_:1})]),_:1},8,["persistent","modelValue"]),t(ui,{ref_key:"amountInputDialog",ref:te},null,512),t(Go,{ref_key:"editDialog",ref:me,type:e(It).Transaction},null,8,["type"]),t(mt,{ref_key:"snackbar",ref:K},null,512)],64)}}}),sk={class:"d-flex align-center justify-center"},ik={class:"text-h4 text-wrap"},rk={class:"w-100 d-flex justify-center gap-4"},uk=Pe({__name:"MoveAllTransactionsDialog",setup(f,{expose:T}){const{tt:n}=Oe(),{moving:o,fromAccount:g,toAccountId:c,toAccountName:v,allAccounts:y,allVisibleAccounts:k,allVisibleCategorizedAccounts:h,displayToAccountName:d,isToAccountNameValid:u}=wd(),C=_a(),F=Nl();let w=null,m=null;const x=xe("snackbar"),S=L(!1),N=L(!1);function A(){C.loadAllAccounts({force:!1}).then(()=>{N.value=!1}).catch(M=>{N.value=!1,M.processed||x.value?.showError(M)})}function $(M){return S.value=!0,o.value=!1,g.value=M,c.value="",v.value="",new Promise((U,X)=>{w=U,m=X})}function I(){!g.value||!c.value||g.value?.id===c.value||!v.value||!u.value||(o.value=!0,F.moveAllTransactionsBetweenAccounts({fromAccountId:g.value.id,toAccountId:c.value}).then(()=>{o.value=!1,w?.(),S.value=!1}).catch(M=>{o.value=!1,M.processed||x.value?.showError(M)}))}function z(){m?.(),S.value=!1}return T({open:$}),A(),(M,U)=>{const X=Ie("two-column-select");return l(),b(ue,null,[t(Tt,{width:"640",persistent:!0,modelValue:S.value,"onUpdate:modelValue":U[2]||(U[2]=Z=>S.value=Z)},{default:a(()=>[t(Ee,{class:"pa-2 pa-sm-4 pa-md-4"},{title:a(()=>[s("div",sk,[s("h4",ik,i(e(n)("Are you sure you want to move all transactions?")),1)])]),default:a(()=>[t(ve,null,{default:a(()=>[j(i(e(n)("format.misc.moveTransactionsInAccountTip",{fromAccount:e(g)?.name,toAccount:e(d)})),1)]),_:1}),t(ve,{class:"mb-md-4 w-100 d-flex justify-center"},{default:a(()=>[t(Ae,null,{default:a(()=>[t(R,{cols:"12",md:"12"},{default:a(()=>[t(X,{"primary-key-field":"id","primary-value-field":"category","primary-title-field":"name","primary-footer-field":"displayBalance","primary-icon-field":"icon","primary-icon-type":"account","primary-sub-items-field":"accounts","primary-title-i18n":!0,"secondary-key-field":"id","secondary-value-field":"id","secondary-title-field":"name","secondary-footer-field":"displayBalance","secondary-icon-field":"icon","secondary-icon-type":"account","secondary-color-field":"color",disabled:N.value||e(o)||!e(k).length,"enable-filter":!0,"filter-placeholder":e(n)("Find account"),"filter-no-items-text":e(n)("No available account"),label:e(n)("Target Account"),placeholder:e(n)("Target Account"),items:e(h),"no-item-text":e(xl).findAccountNameById(e(y),e(c),e(n)("Unspecified")),modelValue:e(c),"onUpdate:modelValue":U[0]||(U[0]=Z=>vt(c)?c.value=Z:null)},null,8,["disabled","filter-placeholder","filter-no-items-text","label","placeholder","items","no-item-text","modelValue"])]),_:1}),t(R,{cols:"12",md:"12"},{default:a(()=>[t(dt,{type:"text","persistent-placeholder":"",disabled:e(o),label:e(n)("Confirm Target Account Name"),placeholder:e(n)("Please re-enter the target account name to confirm"),modelValue:e(v),"onUpdate:modelValue":U[1]||(U[1]=Z=>vt(v)?v.value=Z:null)},null,8,["disabled","label","placeholder","modelValue"])]),_:1})]),_:1})]),_:1}),t(ve,{class:"overflow-y-visible"},{default:a(()=>[s("div",rk,[t(H,{disabled:!e(g)||!e(c)||e(g)?.id===e(c)||!e(v)||!e(u)||e(o),onClick:I},{default:a(()=>[j(i(e(n)("Confirm"))+" ",1),e(o)?(l(),p(je,{key:0,indeterminate:"",size:"22",class:"ms-2"})):r("",!0)]),_:1},8,["disabled"]),t(H,{color:"secondary",variant:"tonal",disabled:e(o),onClick:z},{default:a(()=>[j(i(e(n)("Cancel")),1)]),_:1},8,["disabled"])])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(mt,{ref_key:"snackbar",ref:x},null,512)],64)}}}),dk={class:"d-flex align-center justify-center"},ck={class:"text-h4 text-error text-wrap"},mk={class:"w-100"},pk={class:"w-100 d-flex justify-center gap-4"},vk=Pe({__name:"ClearAllTransactionsDialog",setup(f,{expose:T}){const{tt:n}=Oe(),o=qa();let g=null,c=null;const v=xe("snackbar"),y=L(!1),k=L(!1),h=L(""),d=L(void 0);function u(w){return y.value=!0,k.value=!1,h.value="",d.value=w,new Promise((m,x)=>{g=m,c=x})}function C(){!d.value||!h.value||(k.value=!0,o.clearAllUserTransactionsOfAccount({accountId:d.value.id,password:h.value}).then(()=>{k.value=!1,g?.(),y.value=!1}).catch(w=>{k.value=!1,w.processed||v.value?.showError(w)}))}function F(){c?.(),y.value=!1}return T({open:u}),(w,m)=>(l(),b(ue,null,[t(Tt,{width:"640",persistent:!0,modelValue:y.value,"onUpdate:modelValue":m[1]||(m[1]=x=>y.value=x)},{default:a(()=>[t(Ee,{class:"pa-2 pa-sm-4 pa-md-4"},{title:a(()=>[s("div",dk,[s("h4",ck,i(e(n)("Are you sure you want to clear all transactions?")),1)])]),default:a(()=>[t(ve,{class:"pb-2 text-error"},{default:a(()=>[j(i(e(n)("format.misc.clearTransactionsInAccountTip",{account:d.value?.name})),1)]),_:1}),t(ve,{class:"mb-md-4 w-100 d-flex justify-center"},{default:a(()=>[s("div",mk,[t(dt,{autocomplete:"current-password",type:"password",variant:"underlined",color:"error",disabled:k.value,placeholder:e(n)("Current Password"),modelValue:h.value,"onUpdate:modelValue":m[0]||(m[0]=x=>h.value=x)},null,8,["disabled","placeholder","modelValue"])])]),_:1}),t(ve,{class:"overflow-y-visible"},{default:a(()=>[s("div",pk,[t(H,{color:"error",disabled:!h.value||k.value,onClick:C},{default:a(()=>[j(i(e(n)("Confirm"))+" ",1),k.value?(l(),p(je,{key:0,indeterminate:"",size:"22",class:"ms-2"})):r("",!0)]),_:1},8,["disabled"]),t(H,{color:"secondary",variant:"tonal",disabled:k.value,onClick:F},{default:a(()=>[j(i(e(n)("Cancel")),1)]),_:1},8,["disabled"])])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(mt,{ref_key:"snackbar",ref:v},null,512)],64))}}),fk={class:"mx-6 my-4"},yk={class:"text-subtitle-2"},gk={class:"account-statistic-item-value text-income text-truncate mt-1 mb-3"},hk={key:0},bk={key:1},kk={class:"text-subtitle-2"},_k={class:"account-statistic-item-value text-expense text-truncate mt-1 mb-3"},Tk={key:0},xk={key:1},Ck={class:"text-subtitle-2"},wk={class:"account-statistic-item-value mt-1"},Ak={key:0},Ik={key:1},Sk={class:"d-flex flex-column text-truncate ms-2"},Vk={key:0,class:"text-truncate text-start smaller"},$k={key:1,class:"text-truncate text-start smaller my-1"},Dk={class:"text-truncate text-start"},Fk={class:"title-and-toolbar d-flex align-center"},Nk={class:"accounts-overview-subtitle"},Mk={key:1,class:"accounts-overview-amount ms-3"},Ek={class:"account-title d-flex align-center"},Uk={class:"account-name text-truncate ms-2"},Pk={class:"align-self-center"},Bk={class:"d-flex account-toolbar align-center"},Lk={class:"account-balance ms-2"},Rk={class:"list-group-item"},zk={class:"account-title d-flex align-baseline"},Ok={class:"account-name text-truncate ms-2"},jk={class:"account-currency text-truncate ms-2"},qk={class:"align-self-center"},Hk={key:0,class:"mt-4"},Yk={class:"ms-2"},Wk={class:"d-flex account-toolbar align-center"},Kk={class:"d-flex align-center"},Gk={class:"text-sm ms-3"},Jk={class:"account-balance ms-2"},Zk=Pe({__name:"ListPage",setup(f){const T=tn(),{tt:n,getAllDateRanges:o,getCurrencyName:g,joinMultiText:c}=Oe(),{loading:v,showHidden:y,displayOrderModified:k,showAccountBalance:h,firstDayOfWeek:d,fiscalYearStart:u,allAccounts:C,allCategorizedAccountsMap:F,allAccountCount:w,netAssets:m,totalAssets:x,totalLiabilities:S,accountCategoryTotalBalance:N,accountBalance:A}=Ad(),$=_a(),I=xe("confirmDialog"),z=xe("snackbar"),M=xe("editDialog"),U=xe("reconciliationStatementDialog"),X=xe("moveAllTransactionsDialog"),Z=xe("clearAllTransactionsDialog"),q=L(Yn.Default.type),O=L("accountPage"),V=L({}),_=L(null),D=L(T.mdAndUp.value),P=L(T.mdAndUp.value),W=L(!1),ne=L(!1),de=B(()=>$.allVisibleAccountsCount>0),J=B(()=>Yn.valueOf(q.value)),Y=B(()=>N(J.value)),ie=B(()=>{if(!J.value)return 0;const pe=F.value[J.value.type];if(!pe||!pe.accounts||!pe.accounts.length)return 0;if(y.value)return pe.accounts.length;let ce=0;for(const ke of pe.accounts)ke.hidden||ce++;return ce});function fe(pe){v.value=!0,$.loadAllAccounts({force:pe}).then(()=>{if(v.value=!1,k.value=!1,C.value)for(const ce of C.value)ce.type===aa.MultiSubAccounts.type&&!V.value[ce.id]&&(V.value[ce.id]="");pe&&z.value?.showMessage("Account list has been updated")}).catch(ce=>{v.value=!1,ce&&ce.isUpToDate&&(k.value=!1),ce.processed||z.value?.showError(ce)})}function te(pe){return $.hasAccount(pe,!y.value)}function K(pe){if(pe.type===aa.SingleAccount.type)return g(pe.currency);if(pe.type===aa.MultiSubAccounts.type){const ce=pe.getSubAccountCurrencies(y.value,V.value[pe.id]).map(ke=>g(ke));return c(ce)}else return null}function me(pe){return o(Va.Normal,!0,!!$.getAccountStatementDate(pe.id))}function Ne(){M.value?.open({category:q.value}).then(pe=>{pe&&pe.message&&z.value?.showMessage(pe.message)}).catch(pe=>{pe&&z.value?.showError(pe)})}function et(pe){M.value?.open({id:pe.id,currentAccount:pe}).then(ce=>{ce&&ce.message&&z.value?.showMessage(ce.message),$.accountListStateInvalid&&!v.value&&fe(!1)}).catch(ce=>{ce&&z.value?.showError(ce)})}function Me(pe,ce){if(!Ht(ce)||ce===Rt.Custom.type){_.value=pe,ne.value=!0;return}let ke=null;Rt.isBillingCycle(ce)?ke=ai(ce,d.value,u.value,$.getAccountStatementDate(pe.id)):ke=Qn(ce,d.value,u.value),ke&&U.value?.open({accountId:pe.id,startTime:ke.minTime,endTime:ke.maxTime})}function Ve(pe){X.value?.open(pe).then(()=>{z.value?.showMessage("All transactions in this account has been moved."),$.accountListStateInvalid&&!v.value&&fe(!1)})}function bt(pe){Z.value?.open(pe).then(()=>{z.value?.showMessage("All transactions in this account has been cleared"),$.accountListStateInvalid&&!v.value&&fe(!1)})}function Bt(pe,ce,ke){v.value=!0,$.hideAccount({account:ce,hidden:ke}).then(()=>{ke&&!y.value&&V.value[pe.id]&&(V.value[pe.id]=""),v.value=!1}).catch(Be=>{v.value=!1,Be.processed||z.value?.showError(Be)})}function at(pe){if(V.value[pe.id]){const ce=pe.getSubAccount(V.value[pe.id]);if(!ce){z.value?.showMessage("Unable to delete this sub-account");return}I.value?.open("Are you sure you want to delete this sub-account?").then(()=>{v.value=!0,$.deleteSubAccount({subAccount:ce}).then(()=>{V.value[pe.id]="",v.value=!1}).catch(ke=>{v.value=!1,ke.processed||z.value?.showError(ke)})})}else I.value?.open("Are you sure you want to delete this account?").then(()=>{v.value=!0,$.deleteAccount({account:pe}).then(()=>{v.value=!1}).catch(ce=>{v.value=!1,ce.processed||z.value?.showError(ce)})})}function Yt(){k.value&&(v.value=!0,$.updateAccountDisplayOrders().then(()=>{v.value=!1,k.value=!1}).catch(pe=>{v.value=!1,pe.processed||z.value?.showError(pe)}))}function At(pe){if(!pe||!pe.moved)return;const ce=pe.moved;if(!ce.element||!ce.element.id){z.value?.showMessage("Unable to move account");return}$.changeAccountDisplayOrder({accountId:ce.element.id,from:ce.oldIndex,to:ce.newIndex,updateListOrder:!1,updateGlobalListOrder:!0}).then(()=>{k.value=!0}).catch(ke=>{z.value?.showError(ke)})}function Zt(pe,ce){if(!_.value){z.value?.showMessage("An error occurred");return}ne.value=!1,U.value?.open({accountId:_.value.id,startTime:pe,endTime:ce}),_.value=null}function Qe(pe){z.value?.showError(pe)}return Ft(()=>T.mdAndUp.value,pe=>{D.value=pe,P.value||(P.value=pe)}),fe(!1),(pe,ce)=>{const ke=Ie("ItemIcon"),Be=Ie("draggable-list"),ct=Ie("date-range-selection-dialog");return l(),b(ue,null,[t(Ae,{class:"match-height"},{default:a(()=>[t(R,{cols:"12"},{default:a(()=>[t(Ee,null,{default:a(()=>[t(nn,null,{default:a(()=>[t(on,{permanent:D.value,modelValue:P.value,"onUpdate:modelValue":ce[1]||(ce[1]=we=>P.value=we)},{default:a(()=>[s("div",fk,[s("span",yk,i(e(n)("Net assets")),1),s("p",gk,[!e(v)||e(w)>0?(l(),b("span",hk,i(e(m)),1)):e(v)&&e(w)<=0?(l(),b("span",bk,[t(ut,{class:"skeleton-no-margin pt-2 pb-1",type:"text",loading:!0})])):r("",!0)]),s("span",kk,i(e(n)("Total liabilities")),1),s("p",_k,[!e(v)||e(w)>0?(l(),b("span",Tk,i(e(S)),1)):e(v)&&e(w)<=0?(l(),b("span",xk,[t(ut,{class:"skeleton-no-margin pt-2 pb-1",type:"text",loading:!0})])):r("",!0)]),s("span",Ck,i(e(n)("Total assets")),1),s("p",wk,[!e(v)||e(w)>0?(l(),b("span",Ak,i(e(x)),1)):e(v)&&e(w)<=0?(l(),b("span",Ik,[t(ut,{class:"skeleton-no-margin pt-2 pb-1",type:"text",loading:!0})])):r("",!0)])]),t(Ke),t(Xa,{"show-arrows":"",class:"account-category-tabs my-4",direction:"vertical",disabled:e(v),modelValue:q.value,"onUpdate:modelValue":ce[0]||(ce[0]=we=>q.value=we)},{default:a(()=>[(l(!0),b(ue,null,$e(e(Yn).values(),we=>(l(),p(qt,{class:"tab-text-truncate",key:we.type,value:we.type},{default:a(()=>[t(ke,{"icon-type":"account","icon-id":we.defaultAccountIconId},null,8,["icon-id"]),s("div",Sk,[!e(v)||e(w)>0?(l(),b("small",Vk,i(e(N)(we)),1)):e(v)&&e(w)<=0?(l(),b("small",$k,[t(ut,{class:"skeleton-no-margin",width:"100px",height:"16",type:"text",loading:!0})])):r("",!0),s("span",Dk,i(e(n)(we.name)),1)])]),_:2},1032,["value"]))),128))]),_:1},8,["disabled","modelValue"])]),_:1},8,["permanent","modelValue"]),t(sn,null,{default:a(()=>[t(ja,{class:"d-flex flex-grow-1 disable-tab-transition w-100-window-container",modelValue:O.value,"onUpdate:modelValue":ce[8]||(ce[8]=we=>O.value=we)},{default:a(()=>[t(Pt,{value:"accountPage"},{default:a(()=>[t(Ee,{variant:"flat","min-height":"780"},{title:a(()=>[s("div",Fk,[t(H,{class:"me-3 d-md-none",density:"compact",color:"default",variant:"plain",ripple:!1,icon:!0,onClick:ce[2]||(ce[2]=we=>P.value=!P.value)},{default:a(()=>[t(se,{icon:e(an),size:"24"},null,8,["icon"])]),_:1}),s("span",null,i(e(n)("Account List")),1),t(H,{class:"ms-3",color:"default",variant:"outlined",disabled:e(v),onClick:Ne},{default:a(()=>[j(i(e(n)("Add")),1)]),_:1},8,["disabled"]),e(k)?(l(),p(H,{key:0,class:"ms-3",color:"primary",variant:"tonal",disabled:e(v),onClick:Yt},{default:a(()=>[j(i(e(n)("Save Display Order")),1)]),_:1},8,["disabled"])):r("",!0),t(H,{density:"compact",color:"default",variant:"text",size:"24",class:"ms-2",icon:!0,loading:e(v),onClick:ce[3]||(ce[3]=we=>fe(!0))},{loader:a(()=>[t(je,{indeterminate:"",size:"20"})]),default:a(()=>[t(se,{icon:e(wa),size:"24"},null,8,["icon"]),t(yt,{activator:"parent"},{default:a(()=>[j(i(e(n)("Refresh")),1)]),_:1})]),_:1},8,["loading"]),t(pt),t(H,{density:"comfortable",color:"default",variant:"text",class:"ms-2",disabled:e(v),icon:!0},{default:a(()=>[t(se,{icon:e(Jt)},null,8,["icon"]),t(nt,{activator:"parent"},{default:a(()=>[t(ze,null,{default:a(()=>[e(y)?r("",!0):(l(),p(le,{key:0,"prepend-icon":e(ca),title:e(n)("Show Hidden Accounts"),onClick:ce[4]||(ce[4]=we=>y.value=!0)},null,8,["prepend-icon","title"])),e(y)?(l(),p(le,{key:1,"prepend-icon":e(Gt),title:e(n)("Hide Hidden Accounts"),onClick:ce[5]||(ce[5]=we=>y.value=!1)},null,8,["prepend-icon","title"])):r("",!0),de.value?(l(),p(Ke,{key:2,class:"my-2"})):r("",!0),de.value?(l(),p(le,{key:3,"prepend-icon":e(Os),title:e(n)("Set Accounts Included in Total"),onClick:ce[6]||(ce[6]=we=>W.value=!0)},null,8,["prepend-icon","title"])):r("",!0)]),_:1})]),_:1})]),_:1},8,["disabled"])])]),default:a(()=>[t(ve,{class:"accounts-overview-title text-truncate pt-0"},{default:a(()=>[s("span",Nk,i(J.value?.isLiability?e(n)("Outstanding Balance"):e(n)("Balance")),1),e(v)&&J.value&&!te(J.value)?(l(),p(ut,{key:0,class:"skeleton-no-margin ms-3 mb-2",width:"120px",type:"text",loading:!0})):!e(v)||!J.value||te(J.value)?(l(),b("span",Mk,i(Y.value),1)):r("",!0),t(H,{class:"ms-2",density:"compact",color:"default",variant:"text",icon:!0,disabled:e(v),onClick:ce[7]||(ce[7]=we=>h.value=!e(h))},{default:a(()=>[t(se,{icon:e(h)?e(Gt):e(ca),size:"20"},null,8,["icon"]),t(yt,{activator:"parent"},{default:a(()=>[j(i(e(h)?e(n)("Hide Account Balance"):e(n)("Show Account Balance")),1)]),_:1})]),_:1},8,["disabled"])]),_:1}),e(v)&&J.value&&!te(J.value)?(l(),p(Ae,{key:0,class:"ps-6 pe-6 pe-md-8"},{default:a(()=>[t(R,{cols:"12"},{default:a(()=>[t(Ee,{border:"",class:"card-title-with-bg account-card mb-8 h-auto"},{title:a(()=>[s("div",Ek,[t(se,{class:"disabled me-0",size:"28px",icon:e(hn)},null,8,["icon"]),s("span",Uk,[t(ut,{class:"skeleton-no-margin my-1",width:"120px",type:"text",loading:!0})]),t(pt),s("span",Pk,[t(se,{class:"disabled",icon:e(Jl)},null,8,["icon"])])])]),default:a(()=>[t(Ke),t(ve,null,{default:a(()=>[s("div",Bk,[t(H,{class:"px-2",density:"comfortable",color:"default",variant:"text",disabled:!0,"prepend-icon":e(hl)},{default:a(()=>[j(i(e(n)("Transaction List")),1)]),_:1},8,["prepend-icon"]),t(pt),s("span",Lk,[t(ut,{class:"skeleton-no-margin",width:"100px",type:"text",loading:!0})])])]),_:1})]),_:1})]),_:1})]),_:1})):r("",!0),!e(v)&&J.value&&!te(J.value)?(l(),p(Ae,{key:1,class:"ps-5 pe-2 pe-md-4"},{default:a(()=>[t(R,{cols:"12"},{default:a(()=>[j(i(e(n)("No available account")),1)]),_:1})]),_:1})):r("",!0),t(Ae,{class:"ps-6 pe-6 pe-md-8"},{default:a(()=>[t(R,{cols:"12"},{default:a(()=>[J.value&&e(F)[J.value.type]&&e(F)[J.value.type].accounts&&e(F)[J.value.type].accounts.length?(l(),p(Be,{key:0,class:"list-group","item-key":"id",handle:".drag-handle","ghost-class":"dragging-item",disabled:ie.value<=1,list:e(F)[J.value.type].accounts,onChange:At},{item:a(({element:we})=>[s("div",Rk,[e(y)||!we.hidden?(l(),p(Ee,{key:0,border:"",class:"card-title-with-bg account-card mb-8 h-auto"},{title:a(()=>[s("div",zk,[t(ke,{size:"1.5rem","icon-type":"account","icon-id":we.icon,color:we.color,"hidden-status":we.hidden},null,8,["icon-id","color","hidden-status"]),s("span",Ok,i(we.name),1),s("small",jk,i(K(we)),1),t(pt),s("span",qk,[t(se,{class:be(!e(v)&&ie.value>1?"drag-handle":"disabled"),icon:e(Jl)},null,8,["class","icon"]),!e(v)&&ie.value>1?(l(),p(yt,{key:0,activator:"parent"},{default:a(()=>[j(i(e(n)("Drag to Reorder")),1)]),_:1})):r("",!0)])]),we.type===e(aa).MultiSubAccounts.type?(l(),b("div",Hk,[t(Jn,{class:"account-subaccounts",variant:"outlined",color:"primary",density:"compact",mandatory:"force",divided:"",rounded:"xl",disabled:e(v),modelValue:V.value[we.id],"onUpdate:modelValue":st=>V.value[we.id]=st},{default:a(()=>[t(H,{value:""},{default:a(()=>[s("span",null,i(e(n)("All")),1)]),_:1}),(l(!0),b(ue,null,$e(we.subAccounts,st=>Pa((l(),p(H,{key:st.id,value:st.id},{default:a(()=>[t(ke,{size:"1.5rem","icon-type":"account","icon-id":st.icon,color:st.color,"hidden-status":st.hidden},null,8,["icon-id","color","hidden-status"]),s("span",Yk,i(st.name),1)]),_:2},1032,["value"])),[[Ba,e(y)||!st.hidden]])),128))]),_:2},1032,["disabled","modelValue","onUpdate:modelValue"])])):r("",!0)]),default:a(()=>[t(Ke),we.getAccountOrSubAccountComment(V.value[we.id])?(l(),p(ve,{key:0},{default:a(()=>[j(i(we.getAccountOrSubAccountComment(V.value[we.id])),1)]),_:2},1024)):r("",!0),t(ve,null,{default:a(()=>[s("div",Wk,[t(H,{class:"px-2",density:"comfortable",color:"default",variant:"text",disabled:e(v),"prepend-icon":e(hl),to:`/transaction/list?accountIds=${we.getAccountOrSubAccountId(V.value[we.id])}`},{default:a(()=>[j(i(e(n)("Transaction List")),1)]),_:1},8,["disabled","prepend-icon","to"]),we.type===e(aa).SingleAccount.type||we.getSubAccount(V.value[we.id])?(l(),p(H,{key:0,class:"px-2 ms-1",density:"comfortable",color:"default",variant:"text",disabled:e(v),"prepend-icon":e(gr),onClick:st=>Me(we.getAccountOrSubAccount(V.value[we.id]))},{default:a(()=>[j(i(e(n)("Reconciliation Statement"))+" ",1),t(nt,{activator:"parent","open-on-hover":!0},{default:a(()=>[t(ze,null,{default:a(()=>[(l(!0),b(ue,null,$e(me(we.getAccountOrSubAccount(V.value[we.id])),st=>(l(),p(le,{key:st.type,class:"text-sm",density:"compact",value:st.type},{default:a(()=>[t(ot,{class:"cursor-pointer",onClick:De=>Me(we.getAccountOrSubAccount(V.value[we.id]),st.type)},{default:a(()=>[s("div",Kk,[s("span",Gk,i(st.displayName),1)])]),_:2},1032,["onClick"])]),_:2},1032,["value"]))),128))]),_:2},1024)]),_:2},1024)]),_:2},1032,["disabled","prepend-icon","onClick"])):r("",!0),!V.value[we.id]||we.getSubAccount(V.value[we.id])?(l(),p(H,{key:1,class:be(["px-2 ms-1",{"d-none":e(v),"hover-display":!e(v)}]),density:"comfortable",color:"default",variant:"text",disabled:e(v),"prepend-icon":we.isAccountOrSubAccountHidden(V.value[we.id])?e(ca):e(Gt),onClick:st=>Bt(we,we.getAccountOrSubAccount(V.value[we.id]),!we.isAccountOrSubAccountHidden(V.value[we.id]))},{default:a(()=>[j(i(we.isAccountOrSubAccountHidden(V.value[we.id])?e(n)("Show"):e(n)("Hide")),1)]),_:2},1032,["class","disabled","prepend-icon","onClick"])):r("",!0),!V.value[we.id]||we.getSubAccount(V.value[we.id])?(l(),p(H,{key:2,class:be(["px-2 ms-1",{"d-none":e(v),"hover-display":!e(v)}]),density:"comfortable",color:"default",variant:"text",disabled:e(v),"prepend-icon":e(An),onClick:st=>et(we)},{default:a(()=>[j(i(e(n)("Edit")),1)]),_:1},8,["class","disabled","prepend-icon","onClick"])):r("",!0),we.type===e(aa).SingleAccount.type||we.getSubAccount(V.value[we.id])?(l(),p(H,{key:3,class:be(["px-2 ms-1",{"d-none":e(v),"hover-display":!e(v)}]),density:"comfortable",color:"default",variant:"text",disabled:e(v),"prepend-icon":e(hr)},{default:a(()=>[j(i(e(n)("More"))+" ",1),t(nt,{activator:"parent","open-on-hover":!0},{default:a(()=>[t(ze,null,{default:a(()=>[t(le,{class:"text-sm",density:"compact",title:e(n)("Move All Transactions"),"prepend-icon":e(gn),onClick:st=>Ve(we.getAccountOrSubAccount(V.value[we.id]))},null,8,["title","prepend-icon","onClick"]),t(le,{class:"text-sm",density:"compact",title:e(n)("Clear All Transactions"),"prepend-icon":e(br),onClick:st=>bt(we.getAccountOrSubAccount(V.value[we.id]))},null,8,["title","prepend-icon","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["class","disabled","prepend-icon"])):r("",!0),!V.value[we.id]||we.getSubAccount(V.value[we.id])?(l(),p(H,{key:4,class:be(["px-2 ms-1",{"d-none":e(v),"hover-display":!e(v)}]),density:"comfortable",color:"default",variant:"text",disabled:e(v),"prepend-icon":e(rn),onClick:st=>at(we)},{default:a(()=>[j(i(e(n)("Delete")),1)]),_:1},8,["class","disabled","prepend-icon","onClick"])):r("",!0),t(pt),s("span",Jk,i(e(A)(we,V.value[we.id])),1)])]),_:2},1024)]),_:2},1024)):r("",!0)])]),_:1},8,["disabled","list"])):r("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(Tt,{width:"800",modelValue:W.value,"onUpdate:modelValue":ce[10]||(ce[10]=we=>W.value=we)},{default:a(()=>[t(Xl,{type:"accountListTotalAmount","dialog-mode":!0,"onSettings:change":ce[9]||(ce[9]=we=>W.value=!1)})]),_:1},8,["modelValue"]),t(Tb,{ref_key:"editDialog",ref:M},null,512),t(ok,{ref_key:"reconciliationStatementDialog",ref:U,onError:Qe},null,512),t(uk,{ref_key:"moveAllTransactionsDialog",ref:X},null,512),t(vk,{ref_key:"clearAllTransactionsDialog",ref:Z},null,512),t(ct,{title:e(n)("Custom Date Range"),show:ne.value,"onUpdate:show":ce[11]||(ce[11]=we=>ne.value=we),"onDateRange:change":Zt,onError:Qe},null,8,["title","show"]),t(pa,{ref_key:"confirmDialog",ref:I},null,512),t(mt,{ref_key:"snackbar",ref:z},null,512)],64)}}}),Qk={class:"d-flex align-center justify-center"},Xk={class:"text-h4"},e_={class:"text-truncate"},t_={class:"w-100 d-flex justify-center mt-2 mt-sm-4 mt-md-6 gap-4"},a_=Pe({__name:"EditDialog",setup(f,{expose:T}){const{tt:n}=Oe(),{editCategoryId:o,clientSessionId:g,loading:c,submitting:v,category:y,allAvailableCategories:k,title:h,saveButtonTitle:d,inputEmptyProblemMessage:u,inputIsEmpty:C}=Id(),F=Ta(),w=xe("snackbar"),m=L(!1);let x=null,S=null;const N=B(()=>o.value?!0:!y.value.equals(Ao.createNewCategory(y.value.type,y.value.parentId)));function A(z){m.value=!0,c.value=!0,v.value=!1;const M=Ao.createNewCategory();if(y.value.fillFrom(M),z.id)z.currentCategory&&y.value.fillFrom(z.currentCategory),o.value=z.id,F.getCategory({categoryId:o.value}).then(U=>{y.value.fillFrom(U),c.value=!1}).catch(U=>{c.value=!1,m.value=!1,U.processed||S&&S(U)});else if(z.parentId){o.value=null;const U=z.type;if(U!==tt.Income&&U!==tt.Expense&&U!==tt.Transfer)return c.value=!1,m.value=!1,Promise.reject("Parameter Invalid");y.value.type=U,y.value.parentId=z.parentId,z.color&&(y.value.color=z.color),z.icon&&(y.value.icon=z.icon),g.value=pl(),c.value=!1}return new Promise((U,X)=>{x=U,S=X})}function $(){const z=u.value;if(z){w.value?.showMessage(z);return}v.value=!0,F.saveCategory({category:y.value,isEdit:!!o.value,clientSessionId:g.value}).then(()=>{v.value=!1;let M="You have saved this category";o.value||(M="You have added a new category"),x?.({message:M}),m.value=!1}).catch(M=>{v.value=!1,M.processed||w.value?.showError(M)})}function I(){S?.(),m.value=!1}return T({open:A}),(z,M)=>{const U=Ie("ItemIcon"),X=Ie("icon-select"),Z=Ie("color-select");return l(),b(ue,null,[t(Tt,{width:"800",persistent:N.value,modelValue:m.value,"onUpdate:modelValue":M[6]||(M[6]=q=>m.value=q)},{default:a(()=>[t(Ee,{class:"pa-2 pa-sm-4 pa-md-8"},{title:a(()=>[s("div",Qk,[s("h4",Xk,i(e(n)(e(h))),1),e(c)?(l(),p(je,{key:0,indeterminate:"",size:"22",class:"ms-2"})):r("",!0)])]),default:a(()=>[t(ve,{class:"pt-0"},{default:a(()=>[t(zt,{class:"mt-md-6"},{default:a(()=>[t(Ae,null,{default:a(()=>[t(R,{cols:"12",md:"12"},{default:a(()=>[t(dt,{type:"text","persistent-placeholder":"",disabled:e(c)||e(v),label:e(n)("Category Name"),placeholder:e(n)("Category Name"),modelValue:e(y).name,"onUpdate:modelValue":M[0]||(M[0]=q=>e(y).name=q)},null,8,["disabled","label","placeholder","modelValue"])]),_:1}),e(o)&&e(y).parentId&&e(y).parentId!=="0"?(l(),p(R,{key:0,cols:"12",md:"12"},{default:a(()=>[t(Je,{"item-title":"name","item-value":"id","persistent-placeholder":"",disabled:e(c)||e(v),label:e(n)("Primary Category"),placeholder:e(n)("Primary Category"),items:e(k),"no-data-text":e(n)("No available primary category"),modelValue:e(y).parentId,"onUpdate:modelValue":M[1]||(M[1]=q=>e(y).parentId=q)},{item:a(({props:q,item:O})=>[t(le,$i(Di(q)),{prepend:a(()=>[t(U,{class:"me-2","icon-type":"category","icon-id":O.raw.icon,color:O.raw.color},null,8,["icon-id","color"])]),title:a(()=>[s("div",e_,i(O.raw.name),1)]),_:2},1040)]),_:1},8,["disabled","label","placeholder","items","no-data-text","modelValue"])]),_:1})):r("",!0),t(R,{cols:"12",md:"6"},{default:a(()=>[t(X,{"icon-type":"category","all-icon-infos":e(Sd),label:e(n)("Category Icon"),color:e(y).color,disabled:e(c)||e(v),modelValue:e(y).icon,"onUpdate:modelValue":M[2]||(M[2]=q=>e(y).icon=q)},null,8,["all-icon-infos","label","color","disabled","modelValue"])]),_:1}),t(R,{cols:"12",md:"6"},{default:a(()=>[t(Z,{"all-color-infos":e(Vd),label:e(n)("Category Color"),disabled:e(c)||e(v),modelValue:e(y).color,"onUpdate:modelValue":M[3]||(M[3]=q=>e(y).color=q)},null,8,["all-color-infos","label","disabled","modelValue"])]),_:1}),t(R,{cols:"12",md:"12"},{default:a(()=>[t(La,{type:"text","persistent-placeholder":"",rows:"3",disabled:e(c)||e(v),label:e(n)("Description"),placeholder:e(n)("Your category description (optional)"),modelValue:e(y).comment,"onUpdate:modelValue":M[4]||(M[4]=q=>e(y).comment=q)},null,8,["disabled","label","placeholder","modelValue"])]),_:1}),e(o)?(l(),p(R,{key:1,class:"py-0",cols:"12",md:"12"},{default:a(()=>[t(Qa,{disabled:e(c)||e(v),label:e(n)("Visible"),modelValue:e(y).visible,"onUpdate:modelValue":M[5]||(M[5]=q=>e(y).visible=q)},null,8,["disabled","label","modelValue"])]),_:1})):r("",!0)]),_:1})]),_:1})]),_:1}),t(ve,{class:"overflow-y-visible"},{default:a(()=>[s("div",t_,[t(yt,{disabled:!e(C),text:e(u)?e(n)(e(u)):""},{activator:a(({props:q})=>[s("div",Ct(q,{class:"d-inline-block"}),[t(H,{disabled:e(C)||e(c)||e(v),onClick:$},{default:a(()=>[j(i(e(n)(e(d)))+" ",1),e(v)?(l(),p(je,{key:0,indeterminate:"",size:"22",class:"ms-2"})):r("",!0)]),_:1},8,["disabled"])],16)]),_:1},8,["disabled","text"]),t(H,{color:"secondary",variant:"tonal",disabled:e(c)||e(v),onClick:I},{default:a(()=>[j(i(e(n)("Cancel")),1)]),_:1},8,["disabled"])])]),_:1})]),_:1})]),_:1},8,["persistent","modelValue"]),t(mt,{ref_key:"snackbar",ref:w},null,512)],64)}}}),l_={class:"d-flex align-center justify-center"},n_={class:"text-h4"},o_={class:"d-flex align-center mb-1"},s_={class:"ms-3"},i_={class:"ms-3"},r_={class:"w-100 d-flex justify-center mt-2 mt-sm-4 mt-md-6 gap-4"},u_=Pe({__name:"PresetDialog",props:{categoryType:{},show:{type:Boolean}},emits:["update:show","category:saved"],setup(f,{emit:T}){const n=f,o=T,{tt:g,getCurrentLanguageTag:c,getAllTransactionDefaultCategories:v}=Oe(),y=Ta(),k=xe("snackbar"),h=L(c()),d=L(!1),u=B(()=>v(n.categoryType,h.value)),C=B({get:()=>n.show,set:m=>o("update:show",m)});function F(m){switch(m){case tt.Income:return g("Income Categories");case tt.Expense:return g("Expense Categories");case tt.Transfer:return g("Transfer Categories");default:return g("Transaction Categories")}}function w(){d.value=!0;const m=Ks(u.value),x=$d(m);y.addPresetCategories({categories:x}).then(()=>{d.value=!1,C.value=!1,o("category:saved",{message:"You have added preset categories"})}).catch(S=>{d.value=!1,S.processed||k.value?.showError(S)})}return(m,x)=>{const S=Ie("language-select-button"),N=Ie("ItemIcon");return l(),b(ue,null,[t(Tt,{width:"800",persistent:d.value,modelValue:C.value,"onUpdate:modelValue":x[2]||(x[2]=A=>C.value=A)},{default:a(()=>[t(Ee,{class:"pa-2 pa-sm-4 pa-md-8"},{title:a(()=>[s("div",l_,[s("h4",n_,i(e(g)("Default Categories")),1)])]),default:a(()=>[t(ve,{class:"preset-transaction-categories mt-sm-2 mt-md-4 pt-0"},{default:a(()=>[(l(!0),b(ue,null,$e(u.value,(A,$)=>(l(),b(ue,{key:$},[s("div",o_,[s("h4",null,i(F($)),1),t(pt),t(S,{disabled:d.value,"use-model-value":!0,modelValue:h.value,"onUpdate:modelValue":x[0]||(x[0]=I=>h.value=I)},null,8,["disabled","modelValue"])]),t(Vl,{class:"border rounded mb-2",variant:"accordion",multiple:"",disabled:d.value},{default:a(()=>[(l(!0),b(ue,null,$e(A,(I,z)=>(l(),p($l,{key:z},{default:a(()=>[t(Dl,{class:"py-0"},{default:a(()=>[t(N,{"icon-type":"category","icon-id":I.icon,color:I.color},null,8,["icon-id","color"]),s("span",s_,i(I.name),1)]),_:2},1024),I.subCategories.length?(l(),p(Fl,{key:0},{default:a(()=>[t(ze,{rounded:"",density:"comfortable",class:"pa-0"},{default:a(()=>[(l(!0),b(ue,null,$e(I.subCategories,(M,U)=>(l(),b(ue,{key:U},[t(le,null,{prepend:a(()=>[t(N,{"icon-type":"category","icon-id":M.icon,color:M.color},null,8,["icon-id","color"])]),default:a(()=>[s("span",i_,i(M.name),1)]),_:2},1024),U!==I.subCategories.length-1?(l(),p(Ke,{key:0})):r("",!0)],64))),128))]),_:2},1024)]),_:2},1024)):r("",!0)]),_:2},1024))),128))]),_:2},1032,["disabled"])],64))),128))]),_:1}),t(ve,{class:"overflow-y-visible"},{default:a(()=>[s("div",r_,[t(H,{disabled:d.value,onClick:w},{default:a(()=>[j(i(e(g)("Save"))+" ",1),d.value?(l(),p(je,{key:0,indeterminate:"",size:"22",class:"ms-2"})):r("",!0)]),_:1},8,["disabled"]),t(H,{color:"secondary",density:"default",variant:"tonal",disabled:d.value,onClick:x[1]||(x[1]=A=>C.value=!1)},{default:a(()=>[j(i(e(g)("Cancel")),1)]),_:1},8,["disabled"])])]),_:1})]),_:1})]),_:1},8,["persistent","modelValue"]),t(mt,{ref_key:"snackbar",ref:k},null,512)],64)}}}),d_={class:"mx-6 my-4"},c_={class:"text-truncate"},m_={class:"text-truncate"},p_={class:"title-and-toolbar d-flex align-center"},v_={class:"d-flex align-center"},f_={key:0},y_={class:"px-0"},g_={key:1},h_={class:"d-flex align-center"},b_={key:0,class:"transaction-category-table-row text-sm"},k_={class:"d-flex align-center"},__=["onClick"],T_={class:"d-flex flex-column py-2"},x_={class:"ms-2"},C_={class:"transaction-category-comment ms-2"},w_={class:"ms-2"},A_=Pe({__name:"ListPage",setup(f){const T=tn(),{tt:n}=Oe(),{loading:o,primaryCategoryId:g,currentPrimaryCategory:c}=Dd(),v=Ta(),y=xe("navbar"),k=xe("confirmDialog"),h=xe("snackbar"),d=xe("editDialog"),u=L(tt.Expense),C=L("categoryPage"),F=L(!1),w=L({}),m=L({}),x=L(!1),S=L(680),N=L(T.mdAndUp.value),A=L(T.mdAndUp.value),$=L(!1),I=L(!1),z=B(()=>!v.allTransactionCategories||!v.allTransactionCategories[u.value]?[]:v.allTransactionCategories[u.value]??[]),M=B(()=>!v.allTransactionCategoriesMap||!v.allTransactionCategoriesMap[g.value]?[]:v.allTransactionCategoriesMap[g.value]?.subCategories??[]),U=B(()=>!g.value||g.value===""||g.value==="0"),X=B(()=>U.value?z.value:M.value),Z=B(()=>Fd(X.value,$.value)),q=B(()=>X.value.length<1),O=B(()=>Nd(X.value,$.value));function V(){ka(()=>{if(y.value&&y.value.$el&&y.value.$el.nextElementSibling){const K=o1(y.value.$el.nextElementSibling);S.value=Math.max(K,680)}})}function _(K){return!K||K.hidden?!1:!K.parentId||K.parentId===""||K.parentId==="0"}function D(){g.value="0",V()}function P(K){!K||K.hidden||((!K.parentId||K.parentId===""||K.parentId==="0")&&(g.value=K.id),V())}function W(K){o.value=!0,v.loadAllCategories({force:K}).then(()=>{o.value=!1,x.value=!1,K&&h.value?.showMessage("Category list has been updated"),V()}).catch(me=>{o.value=!1,me&&me.isUpToDate&&(x.value=!1),me.processed||h.value?.showError(me)})}function ne(){d.value?.open({type:u.value,parentId:g.value,color:c.value?.color,icon:c.value?.icon}).then(K=>{K&&K.message&&h.value?.showMessage(K.message),V()}).catch(K=>{K&&h.value?.showError(K)})}function de(K){d.value?.open({id:K.id,currentCategory:K}).then(me=>{me&&me.message&&h.value?.showMessage(me.message),v.transactionCategoryListStateInvalid&&W(!0),V()}).catch(me=>{me&&h.value?.showError(me)})}function J(K,me){F.value=!0,w.value[K.id]=!0,v.hideCategory({category:K,hidden:me}).then(()=>{F.value=!1,w.value[K.id]=!1,V()}).catch(Ne=>{F.value=!1,w.value[K.id]=!1,Ne.processed||h.value?.showError(Ne)})}function Y(K){k.value?.open("Are you sure you want to delete this category?").then(()=>{F.value=!0,m.value[K.id]=!0,v.deleteCategory({category:K}).then(()=>{F.value=!1,m.value[K.id]=!1,V()}).catch(me=>{F.value=!1,m.value[K.id]=!1,me.processed||h.value?.showError(me)})})}function ie(){x.value&&(o.value=!0,v.updateCategoryDisplayOrders({type:u.value,parentId:g.value}).then(()=>{o.value=!1,x.value=!1}).catch(K=>{o.value=!1,K.processed||h.value?.showError(K)}))}function fe(K){if(!K||!K.moved)return;const me=K.moved;if(!me.element||!me.element.id){h.value?.showMessage("Unable to move category");return}v.changeCategoryDisplayOrder({categoryId:me.element.id,from:me.oldIndex,to:me.newIndex}).then(()=>{x.value=!0}).catch(Ne=>{h.value?.showError(Ne)})}function te(K){K&&K.message&&(h.value?.showMessage(K.message),W(!1))}return Ft(()=>T.mdAndUp.value,K=>{N.value=K,A.value||(A.value=K)}),W(!1),(K,me)=>{const Ne=Ie("btn-vertical-group"),et=Ie("ItemIcon"),Me=Ie("draggable-list");return l(),b(ue,null,[t(Ae,{class:"match-height"},{default:a(()=>[t(R,{cols:"12"},{default:a(()=>[t(Ee,null,{default:a(()=>[t(nn,null,{default:a(()=>[t(e(on),{ref_key:"navbar",ref:y,permanent:N.value,modelValue:A.value,"onUpdate:modelValue":me[2]||(me[2]=Ve=>A.value=Ve)},{default:a(()=>[s("div",d_,[t(Ne,{disabled:e(o),buttons:[{name:e(n)("Expense"),value:e(tt).Expense},{name:e(n)("Income"),value:e(tt).Income},{name:e(n)("Transfer"),value:e(tt).Transfer}],modelValue:u.value,"onUpdate:modelValue":[me[0]||(me[0]=Ve=>u.value=Ve),D]},null,8,["disabled","buttons","modelValue"])]),t(Ke),t(Xa,{"show-arrows":"",class:"my-4",direction:"vertical",disabled:e(o),modelValue:e(g),"onUpdate:modelValue":me[1]||(me[1]=Ve=>vt(g)?g.value=Ve:null)},{default:a(()=>[t(qt,{class:"tab-text-truncate",value:"0",onClick:D},{default:a(()=>[s("span",c_,i(e(n)("Primary Categories")),1)]),_:1}),(l(!0),b(ue,null,$e(z.value,Ve=>(l(),b(ue,{key:Ve.id},[Ve.hidden?r("",!0):(l(),p(qt,{key:0,class:"tab-text-truncate",value:Ve.id,onClick:bt=>P(Ve)},{default:a(()=>[s("span",m_,i(Ve.name),1)]),_:2},1032,["value","onClick"]))],64))),128)),e(o)&&(!z.value||z.value.length<1)?(l(),b(ue,{key:0},$e([1,2,3,4,5,6,7,8,9,10],Ve=>t(ut,{class:"skeleton-no-margin mx-5 mt-4 mb-3",type:"text",key:Ve,loading:!0})),64)):r("",!0)]),_:1},8,["disabled","modelValue"])]),_:1},8,["permanent","modelValue"]),t(sn,null,{default:a(()=>[t(ja,{class:"d-flex flex-grow-1 disable-tab-transition w-100-window-container",modelValue:C.value,"onUpdate:modelValue":me[9]||(me[9]=Ve=>C.value=Ve)},{default:a(()=>[t(Pt,{value:"categoryPage"},{default:a(()=>[t(Ee,{variant:"flat","min-height":S.value},{title:a(()=>[s("div",p_,[t(H,{class:"me-3 d-md-none",density:"compact",color:"default",variant:"plain",ripple:!1,icon:!0,onClick:me[3]||(me[3]=Ve=>A.value=!A.value)},{default:a(()=>[t(se,{icon:e(an),size:"24"},null,8,["icon"])]),_:1}),s("span",null,i(e(n)("Transaction Categories")),1),t(H,{class:"ms-3",color:"default",variant:"outlined",disabled:e(o)||F.value,onClick:ne},{default:a(()=>[j(i(e(n)("Add")),1)]),_:1},8,["disabled"]),x.value?(l(),p(H,{key:0,class:"ms-3",color:"primary",variant:"tonal",disabled:e(o)||F.value,onClick:ie},{default:a(()=>[j(i(e(n)("Save Display Order")),1)]),_:1},8,["disabled"])):r("",!0),t(H,{density:"compact",color:"default",variant:"text",size:"24",class:"ms-2",icon:!0,loading:e(o)||F.value,onClick:me[4]||(me[4]=Ve=>W(!0))},{loader:a(()=>[t(je,{indeterminate:"",size:"20"})]),default:a(()=>[t(se,{icon:e(wa),size:"24"},null,8,["icon"]),t(yt,{activator:"parent"},{default:a(()=>[j(i(e(n)("Refresh")),1)]),_:1})]),_:1},8,["loading"]),t(pt),t(H,{density:"comfortable",color:"default",variant:"text",class:"ms-2",disabled:e(o)||F.value,icon:!0},{default:a(()=>[t(se,{icon:e(Jt)},null,8,["icon"]),t(nt,{activator:"parent"},{default:a(()=>[t(ze,null,{default:a(()=>[$.value?r("",!0):(l(),p(le,{key:0,"prepend-icon":e(ca),title:e(n)("Show Hidden Transaction Categories"),onClick:me[5]||(me[5]=Ve=>$.value=!0)},null,8,["prepend-icon","title"])),$.value?(l(),p(le,{key:1,"prepend-icon":e(Gt),title:e(n)("Hide Hidden Transaction Categories"),onClick:me[6]||(me[6]=Ve=>$.value=!1)},null,8,["prepend-icon","title"])):r("",!0)]),_:1})]),_:1})]),_:1},8,["disabled"])])]),default:a(()=>[t(el,{class:"transaction-category-table table-striped",hover:!e(o)},{default:a(()=>[s("thead",null,[s("tr",null,[s("th",null,[s("div",v_,[s("span",null,i(e(n)("Category Name")),1),t(pt),s("span",null,i(e(n)("Operation")),1)])])])]),e(o)&&Z.value?(l(),b("tbody",f_,[(l(),b(ue,null,$e([1,2,3,4,5,6,7,8,9,10],Ve=>s("tr",{key:Ve},[s("td",y_,[t(ut,{type:"text",loading:!0})])])),64))])):r("",!0),!e(o)&&Z.value?(l(),b("tbody",g_,[s("tr",null,[s("td",null,[s("div",h_,[s("span",null,i(e(n)("No available category")),1),U.value&&q.value?(l(),p(H,{key:0,class:"ms-3",color:"default",variant:"outlined",onClick:me[7]||(me[7]=Ve=>I.value=!0)},{default:a(()=>[j(i(e(n)("Add Default Categories")),1)]),_:1})):r("",!0)])])])])):r("",!0),t(Me,{tag:"tbody","item-key":"id",handle:".drag-handle","ghost-class":"dragging-item",disabled:Z.value,modelValue:X.value,"onUpdate:modelValue":me[8]||(me[8]=Ve=>X.value=Ve),onChange:fe},{item:a(({element:Ve})=>[$.value||!Ve.hidden?(l(),b("tr",b_,[s("td",null,[s("div",k_,[s("div",{class:be(["d-flex align-center",{"cursor-pointer":_(Ve)}]),onClick:bt=>P(Ve)},[t(et,{"icon-type":"category","icon-id":Ve.icon,color:Ve.color,"hidden-status":Ve.hidden},null,8,["icon-id","color","hidden-status"]),s("div",T_,[s("span",x_,i(Ve.name),1),s("span",C_,i(Ve.comment),1)])],10,__),t(pt),t(H,{class:be(["px-2 ms-2",{"d-none":e(o),"hover-display":!e(o)}]),color:"default",density:"comfortable",variant:"text","prepend-icon":Ve.hidden?e(ca):e(Gt),loading:w.value[Ve.id],disabled:e(o)||F.value,onClick:bt=>J(Ve,!Ve.hidden)},{loader:a(()=>[t(je,{indeterminate:"",size:"20",width:"2"})]),default:a(()=>[j(" "+i(Ve.hidden?e(n)("Show"):e(n)("Hide")),1)]),_:2},1032,["class","prepend-icon","loading","disabled","onClick"]),t(H,{class:be(["px-2",{"d-none":e(o),"hover-display":!e(o)}]),color:"default",density:"comfortable",variant:"text","prepend-icon":e(An),disabled:e(o)||F.value,onClick:bt=>de(Ve)},{default:a(()=>[j(i(e(n)("Edit")),1)]),_:1},8,["class","prepend-icon","disabled","onClick"]),t(H,{class:be(["px-2",{"d-none":e(o),"hover-display":!e(o)}]),color:"default",density:"comfortable",variant:"text","prepend-icon":e(rn),loading:m.value[Ve.id],disabled:e(o)||F.value,onClick:bt=>Y(Ve)},{loader:a(()=>[t(je,{indeterminate:"",size:"20",width:"2"})]),default:a(()=>[j(" "+i(e(n)("Delete")),1)]),_:1},8,["class","prepend-icon","loading","disabled","onClick"]),s("span",w_,[t(se,{class:be(!e(o)&&!F.value&&O.value>1?"drag-handle":"disabled"),icon:e(Jl)},null,8,["class","icon"]),!e(o)&&!F.value&&O.value>1?(l(),p(yt,{key:0,activator:"parent"},{default:a(()=>[j(i(e(n)("Drag to Reorder")),1)]),_:1})):r("",!0)])])])])):r("",!0)]),_:1},8,["disabled","modelValue"])]),_:1},8,["hover"])]),_:1},8,["min-height"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(a_,{ref_key:"editDialog",ref:d},null,512),t(u_,{"category-type":u.value,show:I.value,"onUpdate:show":me[10]||(me[10]=Ve=>I.value=Ve),"onCategory:saved":te},null,8,["category-type","show"]),t(pa,{ref_key:"confirmDialog",ref:k},null,512),t(mt,{ref_key:"snackbar",ref:h},null,512)],64)}}}),I_={class:"title-and-toolbar d-flex align-center"},S_={class:"d-flex align-center"},V_={key:0},$_={class:"px-0"},D_={key:1},F_={key:0,class:"transaction-tags-table-row-tag text-sm"},N_={class:"d-flex align-center"},M_={key:0,class:"d-flex align-center"},E_={class:"transaction-tag-name"},U_={class:"ms-2"},P_={key:2},B_={class:"d-flex align-center"},L_={class:"ms-2"},R_=Pe({__name:"ListPage",setup(f){const{tt:T}=Oe(),n=fl(),o=xe("confirmDialog"),g=xe("snackbar"),c=L(null),v=L(Zn.createNewTag()),y=L(!0),k=L(!1),h=L({}),d=L({}),u=L({}),C=L(!1),F=L(!1),w=B(()=>n.allTransactionTags),m=B(()=>Md(w.value,F.value)),x=B(()=>Ed(w.value,F.value)),S=B(()=>!!(c.value||v.value.id&&v.value.id!==""));function N(O){return O.id?v.value.name!==""&&v.value.name!==O.name:O.name!==""}function A(){S.value||(y.value=!0,n.loadAllTags({force:!0}).then(()=>{y.value=!1,C.value=!1,g.value?.showMessage("Tag list has been updated")}).catch(O=>{y.value=!1,O&&O.isUpToDate&&(C.value=!1),O.processed||g.value?.showError(O)}))}function $(){c.value=Zn.createNewTag()}function I(O){v.value.id=O.id,v.value.name=O.name}function z(O){k.value=!0,h.value[O.id||""]=!0,n.saveTag({tag:O}).then(()=>{k.value=!1,h.value[O.id||""]=!1,O.id?(v.value.id="",v.value.name=""):c.value=null}).catch(V=>{k.value=!1,h.value[O.id||""]=!1,V.processed||g.value?.showError(V)})}function M(O){O.id?(v.value.id="",v.value.name=""):c.value=null}function U(){C.value&&(y.value=!0,n.updateTagDisplayOrders().then(()=>{y.value=!1,C.value=!1}).catch(O=>{y.value=!1,O.processed||g.value?.showError(O)}))}function X(O,V){k.value=!0,d.value[O.id]=!0,n.hideTag({tag:O,hidden:V}).then(()=>{k.value=!1,d.value[O.id]=!1}).catch(_=>{k.value=!1,d.value[O.id]=!1,_.processed||g.value?.showError(_)})}function Z(O){o.value?.open("Are you sure you want to delete this tag?").then(()=>{k.value=!0,u.value[O.id]=!0,n.deleteTag({tag:O}).then(()=>{k.value=!1,u.value[O.id]=!1}).catch(V=>{k.value=!1,u.value[O.id]=!1,V.processed||g.value?.showError(V)})})}function q(O){if(!O||!O.moved)return;const V=O.moved;if(!V.element||!V.element.id){g.value?.showMessage("Unable to move tag");return}n.changeTagDisplayOrder({tagId:V.element.id,from:V.oldIndex,to:V.newIndex}).then(()=>{C.value=!0}).catch(_=>{g.value?.showError(_)})}return n.loadAllTags({force:!1}).then(()=>{y.value=!1}).catch(O=>{y.value=!1,O.processed||g.value?.showError(O)}),(O,V)=>{const _=Ie("draggable-list");return l(),b(ue,null,[t(Ae,{class:"match-height"},{default:a(()=>[t(R,{cols:"12"},{default:a(()=>[t(Ee,null,{title:a(()=>[s("div",I_,[s("span",null,i(e(T)("Transaction Tags")),1),t(H,{class:"ms-3",color:"default",variant:"outlined",disabled:y.value||k.value||S.value,onClick:$},{default:a(()=>[j(i(e(T)("Add")),1)]),_:1},8,["disabled"]),C.value?(l(),p(H,{key:0,class:"ms-3",color:"primary",variant:"tonal",disabled:y.value||k.value||S.value,onClick:U},{default:a(()=>[j(i(e(T)("Save Display Order")),1)]),_:1},8,["disabled"])):r("",!0),t(H,{density:"compact",color:"default",variant:"text",size:"24",class:"ms-2",icon:!0,disabled:y.value||k.value||S.value,loading:y.value,onClick:A},{loader:a(()=>[t(je,{indeterminate:"",size:"20"})]),default:a(()=>[t(se,{icon:e(wa),size:"24"},null,8,["icon"]),t(yt,{activator:"parent"},{default:a(()=>[j(i(e(T)("Refresh")),1)]),_:1})]),_:1},8,["disabled","loading"]),t(pt),t(H,{density:"comfortable",color:"default",variant:"text",class:"ms-2",disabled:y.value||k.value||S.value,icon:!0},{default:a(()=>[t(se,{icon:e(Jt)},null,8,["icon"]),t(nt,{activator:"parent"},{default:a(()=>[t(ze,null,{default:a(()=>[F.value?r("",!0):(l(),p(le,{key:0,"prepend-icon":e(ca),title:e(T)("Show Hidden Transaction Tags"),onClick:V[0]||(V[0]=D=>F.value=!0)},null,8,["prepend-icon","title"])),F.value?(l(),p(le,{key:1,"prepend-icon":e(Gt),title:e(T)("Hide Hidden Transaction Tags"),onClick:V[1]||(V[1]=D=>F.value=!1)},null,8,["prepend-icon","title"])):r("",!0)]),_:1})]),_:1})]),_:1},8,["disabled"])])]),default:a(()=>[t(el,{class:"transaction-tags-table table-striped",hover:!y.value},{default:a(()=>[s("thead",null,[s("tr",null,[s("th",null,[s("div",S_,[s("span",null,i(e(T)("Tag Title")),1),t(pt),s("span",null,i(e(T)("Operation")),1)])])])]),y.value&&m.value&&!c.value?(l(),b("tbody",V_,[(l(),b(ue,null,$e([1,2,3],D=>s("tr",{key:D},[s("td",$_,[t(ut,{type:"text",loading:!0})])])),64))])):r("",!0),!y.value&&m.value&&!c.value?(l(),b("tbody",D_,[s("tr",null,[s("td",null,i(e(T)("No available tag")),1)])])):r("",!0),t(_,{tag:"tbody","item-key":"id",handle:".drag-handle","ghost-class":"dragging-item",class:be({"has-bottom-border":c.value}),disabled:m.value,modelValue:w.value,"onUpdate:modelValue":V[6]||(V[6]=D=>w.value=D),onChange:q},{item:a(({element:D})=>[F.value||!D.hidden?(l(),b("tr",F_,[s("td",null,[s("div",N_,[v.value.id!==D.id?(l(),b("div",M_,[D.hidden?(l(),p(Tl,{key:0,class:"right-bottom-icon",color:"secondary",location:"bottom right","offset-x":"8",icon:e(Gt)},{default:a(()=>[t(se,{size:"20",start:"",icon:e(la)},null,8,["icon"])]),_:1},8,["icon"])):D.hidden?r("",!0):(l(),p(se,{key:1,size:"20",start:"",icon:e(la)},null,8,["icon"])),s("span",E_,i(D.name),1)])):v.value.id===D.id?(l(),p(dt,{key:1,class:"w-100 me-2",type:"text",density:"compact",variant:"underlined",disabled:y.value||k.value,placeholder:e(T)("Tag Title"),modelValue:v.value.name,"onUpdate:modelValue":V[2]||(V[2]=P=>v.value.name=P),onKeyup:V[3]||(V[3]=Wt(P=>z(v.value),["enter"]))},{prepend:a(()=>[D.hidden?(l(),p(Tl,{key:0,class:"right-bottom-icon",color:"secondary",location:"bottom right","offset-x":"8",icon:e(Gt)},{default:a(()=>[t(se,{size:"20",start:"",icon:e(la)},null,8,["icon"])]),_:1},8,["icon"])):D.hidden?r("",!0):(l(),p(se,{key:1,size:"20",start:"",icon:e(la)},null,8,["icon"]))]),_:2},1032,["disabled","placeholder","modelValue"])):r("",!0),t(pt),v.value.id!==D.id?(l(),p(H,{key:2,class:be(["px-2 ms-2",{"d-none":y.value,"hover-display":!y.value}]),color:"default",density:"comfortable",variant:"text","prepend-icon":D.hidden?e(ca):e(Gt),loading:d.value[D.id],disabled:y.value||k.value,onClick:P=>X(D,!D.hidden)},{loader:a(()=>[t(je,{indeterminate:"",size:"20",width:"2"})]),default:a(()=>[j(" "+i(D.hidden?e(T)("Show"):e(T)("Hide")),1)]),_:2},1032,["class","prepend-icon","loading","disabled","onClick"])):r("",!0),v.value.id!==D.id?(l(),p(H,{key:3,class:be(["px-2",{"d-none":y.value,"hover-display":!y.value}]),color:"default",density:"comfortable",variant:"text","prepend-icon":e(An),loading:h.value[D.id],disabled:y.value||k.value,onClick:P=>I(D)},{loader:a(()=>[t(je,{indeterminate:"",size:"20",width:"2"})]),default:a(()=>[j(" "+i(e(T)("Edit")),1)]),_:1},8,["class","prepend-icon","loading","disabled","onClick"])):r("",!0),v.value.id!==D.id?(l(),p(H,{key:4,class:be(["px-2",{"d-none":y.value,"hover-display":!y.value}]),color:"default",density:"comfortable",variant:"text","prepend-icon":e(rn),loading:u.value[D.id],disabled:y.value||k.value,onClick:P=>Z(D)},{loader:a(()=>[t(je,{indeterminate:"",size:"20",width:"2"})]),default:a(()=>[j(" "+i(e(T)("Delete")),1)]),_:1},8,["class","prepend-icon","loading","disabled","onClick"])):r("",!0),v.value.id===D.id?(l(),p(H,{key:5,class:"px-2",density:"comfortable",variant:"text","prepend-icon":e(Ye),loading:h.value[D.id],disabled:y.value||k.value||!N(D),onClick:V[4]||(V[4]=P=>z(v.value))},{loader:a(()=>[t(je,{indeterminate:"",size:"20",width:"2"})]),default:a(()=>[j(" "+i(e(T)("Save")),1)]),_:1},8,["prepend-icon","loading","disabled"])):r("",!0),v.value.id===D.id?(l(),p(H,{key:6,class:"px-2",color:"default",density:"comfortable",variant:"text","prepend-icon":e(Tn),disabled:y.value||k.value,onClick:V[5]||(V[5]=P=>M(v.value))},{default:a(()=>[j(i(e(T)("Cancel")),1)]),_:1},8,["prepend-icon","disabled"])):r("",!0),s("span",U_,[t(se,{class:be(!y.value&&!k.value&&!S.value&&x.value>1?"drag-handle":"disabled"),icon:e(Jl)},null,8,["class","icon"]),!y.value&&!k.value&&!S.value&&x.value>1?(l(),p(yt,{key:0,activator:"parent"},{default:a(()=>[j(i(e(T)("Drag to Reorder")),1)]),_:1})):r("",!0)])])])])):r("",!0)]),_:1},8,["class","disabled","modelValue"]),c.value?(l(),b("tbody",P_,[s("tr",{class:be(["text-sm",{"even-row":(x.value&1)===1}])},[s("td",null,[s("div",B_,[t(dt,{class:"w-100 me-2",type:"text",color:"primary",density:"compact",variant:"underlined",disabled:y.value||k.value,placeholder:e(T)("Tag Title"),modelValue:c.value.name,"onUpdate:modelValue":V[7]||(V[7]=D=>c.value.name=D),onKeyup:V[8]||(V[8]=Wt(D=>z(c.value),["enter"]))},{prepend:a(()=>[t(se,{size:"20",start:"",icon:e(la)},null,8,["icon"])]),_:1},8,["disabled","placeholder","modelValue"]),t(pt),t(H,{class:"px-2",density:"comfortable",variant:"text","prepend-icon":e(Ye),loading:h.value[""],disabled:y.value||k.value||!N(c.value),onClick:V[9]||(V[9]=D=>z(c.value))},{loader:a(()=>[t(je,{indeterminate:"",size:"20",width:"2"})]),default:a(()=>[j(" "+i(e(T)("Save")),1)]),_:1},8,["prepend-icon","loading","disabled"]),t(H,{class:"px-2",color:"default",density:"comfortable",variant:"text","prepend-icon":e(Tn),disabled:y.value||k.value,onClick:V[10]||(V[10]=D=>M(c.value))},{default:a(()=>[j(i(e(T)("Cancel")),1)]),_:1},8,["prepend-icon","disabled"]),s("span",L_,[t(se,{class:"disabled",icon:e(Jl)},null,8,["icon"])])])])],2)])):r("",!0)]),_:1},8,["hover"])]),_:1})]),_:1})]),_:1}),t(pa,{ref_key:"confirmDialog",ref:o},null,512),t(mt,{ref_key:"snackbar",ref:g},null,512)],64)}}}),z_={class:"title-and-toolbar d-flex align-center"},O_={class:"d-flex align-center"},j_={key:0},q_={class:"px-0"},H_={key:1},Y_={key:0},W_={key:1},K_={key:2},G_={key:0,class:"transaction-templates-table-row text-sm"},J_={class:"d-flex align-center"},Z_={class:"d-flex align-center"},Q_={class:"transaction-template-name"},X_={class:"ms-2"},Ts=Pe({__name:"ListPage",props:{initType:{}},setup(f){const T=f,{tt:n}=Oe(),o=qo(),g=xe("confirmDialog"),c=xe("snackbar"),v=xe("editDialog"),y=L(ha.Normal.type),k=L(!0),h=L(!1),d=L({}),u=L({}),C=L(!1),F=L(!1),w=B(()=>o.allTransactionTemplates[y.value]||[]),m=B(()=>Ud(w.value,F.value)),x=B(()=>Pd(w.value,F.value));function S(){y.value=T.initType,k.value=!0,o.loadAllTemplates({templateType:y.value,force:!1}).then(()=>{k.value=!1}).catch(X=>{k.value=!1,X.processed||c.value?.showError(X)})}function N(){k.value=!0,o.loadAllTemplates({templateType:y.value,force:!0}).then(()=>{k.value=!1,C.value=!1,c.value?.showMessage("Template list has been updated")}).catch(X=>{k.value=!1,X&&X.isUpToDate&&(C.value=!1),X.processed||c.value?.showError(X)})}function A(){v.value?.open({templateType:y.value}).then(X=>{X&&X.message&&c.value?.showMessage(X.message)}).catch(X=>{X&&c.value?.showError(X)})}function $(X){v.value?.open({id:X.id,currentTemplate:X}).then(Z=>{Z&&Z.message&&c.value?.showMessage(Z.message)}).catch(Z=>{Z&&c.value?.showError(Z)})}function I(X,Z){h.value=!0,d.value[X.id]=!0,o.hideTemplate({template:X,hidden:Z}).then(()=>{h.value=!1,d.value[X.id]=!1}).catch(q=>{h.value=!1,d.value[X.id]=!1,q.processed||c.value?.showError(q)})}function z(X){g.value?.open("Are you sure you want to delete this template?").then(()=>{h.value=!0,u.value[X.id]=!0,o.deleteTemplate({template:X}).then(()=>{h.value=!1,u.value[X.id]=!1}).catch(Z=>{h.value=!1,u.value[X.id]=!1,Z.processed||c.value?.showError(Z)})})}function M(){C.value&&(k.value=!0,o.updateTemplateDisplayOrders({templateType:y.value}).then(()=>{k.value=!1,C.value=!1}).catch(X=>{k.value=!1,X.processed||c.value?.showError(X)}))}function U(X){if(!X||!X.moved)return;const Z=X.moved;if(!Z.element||!Z.element.id){c.value?.showMessage("Unable to move template");return}o.changeTemplateDisplayOrder({templateType:y.value,templateId:Z.element.id,from:Z.oldIndex,to:Z.newIndex}).then(()=>{C.value=!0}).catch(q=>{c.value?.showError(q)})}return S(),(X,Z)=>{const q=Ie("draggable-list");return l(),b(ue,null,[t(Ae,{class:"match-height"},{default:a(()=>[t(R,{cols:"12"},{default:a(()=>[t(Ee,null,{title:a(()=>[s("div",z_,[s("span",null,i(y.value===e(ha).Schedule.type?e(n)("Scheduled Transactions"):e(n)("Transaction Templates")),1),t(H,{class:"ms-3",color:"default",variant:"outlined",disabled:k.value||h.value,onClick:A},{default:a(()=>[j(i(e(n)("Add")),1)]),_:1},8,["disabled"]),C.value?(l(),p(H,{key:0,class:"ms-3",color:"primary",variant:"tonal",disabled:k.value||h.value,onClick:M},{default:a(()=>[j(i(e(n)("Save Display Order")),1)]),_:1},8,["disabled"])):r("",!0),t(H,{density:"compact",color:"default",variant:"text",size:"24",class:"ms-2",icon:!0,disabled:k.value||h.value,loading:k.value,onClick:N},{loader:a(()=>[t(je,{indeterminate:"",size:"20"})]),default:a(()=>[t(se,{icon:e(wa),size:"24"},null,8,["icon"]),t(yt,{activator:"parent"},{default:a(()=>[j(i(e(n)("Refresh")),1)]),_:1})]),_:1},8,["disabled","loading"]),t(pt),t(H,{density:"comfortable",color:"default",variant:"text",class:"ms-2",disabled:k.value||h.value,icon:!0},{default:a(()=>[t(se,{icon:e(Jt)},null,8,["icon"]),t(nt,{activator:"parent"},{default:a(()=>[t(ze,null,{default:a(()=>[F.value?r("",!0):(l(),p(le,{key:0,"prepend-icon":e(ca),title:e(n)("Show Hidden Transaction Templates"),onClick:Z[0]||(Z[0]=O=>F.value=!0)},null,8,["prepend-icon","title"])),F.value?(l(),p(le,{key:1,"prepend-icon":e(Gt),title:e(n)("Hide Hidden Transaction Templates"),onClick:Z[1]||(Z[1]=O=>F.value=!1)},null,8,["prepend-icon","title"])):r("",!0)]),_:1})]),_:1})]),_:1},8,["disabled"])])]),default:a(()=>[t(el,{class:"transaction-templates-table table-striped",hover:!k.value},{default:a(()=>[s("thead",null,[s("tr",null,[s("th",null,[s("div",O_,[s("span",null,i(e(n)("Template Name")),1),t(pt),s("span",null,i(e(n)("Operation")),1)])])])]),k.value&&m.value?(l(),b("tbody",j_,[(l(),b(ue,null,$e([1,2,3],O=>s("tr",{key:O},[s("td",q_,[t(ut,{type:"text",loading:!0})])])),64))])):r("",!0),!k.value&&m.value?(l(),b("tbody",H_,[s("tr",null,[y.value===e(ha).Normal.type?(l(),b("td",Y_,i(e(n)("No available template. Once you add templates, you can quickly add a new transaction using the dropdown menu of the Add button on the transaction list page")),1)):y.value===e(ha).Schedule.type?(l(),b("td",W_,i(e(n)("No available scheduled transactions")),1)):(l(),b("td",K_,i(e(n)("No available template")),1))])])):r("",!0),t(q,{tag:"tbody","item-key":"id",handle:".drag-handle","ghost-class":"dragging-item",disabled:m.value,modelValue:w.value,"onUpdate:modelValue":Z[2]||(Z[2]=O=>w.value=O),onChange:U},{item:a(({element:O})=>[F.value||!O.hidden?(l(),b("tr",G_,[s("td",null,[s("div",J_,[s("div",Z_,[O.hidden?(l(),p(Tl,{key:0,class:"right-bottom-icon",color:"secondary",location:"bottom right","offset-x":"8",icon:e(Gt)},{default:a(()=>[t(se,{size:"20",start:"",icon:y.value===e(ha).Schedule.type?e(as):e(go)},null,8,["icon"])]),_:1},8,["icon"])):O.hidden?r("",!0):(l(),p(se,{key:1,size:"20",start:"",icon:y.value===e(ha).Schedule.type?e(as):e(go)},null,8,["icon"])),s("span",Q_,i(O.name),1)]),t(pt),t(H,{class:be(["px-2 ms-2",{"d-none":k.value,"hover-display":!k.value}]),color:"default",density:"comfortable",variant:"text","prepend-icon":O.hidden?e(ca):e(Gt),loading:d.value[O.id],disabled:k.value||h.value,onClick:V=>I(O,!O.hidden)},{loader:a(()=>[t(je,{indeterminate:"",size:"20",width:"2"})]),default:a(()=>[j(" "+i(O.hidden?e(n)("Show"):e(n)("Hide")),1)]),_:2},1032,["class","prepend-icon","loading","disabled","onClick"]),t(H,{class:be(["px-2",{"d-none":k.value,"hover-display":!k.value}]),color:"default",density:"comfortable",variant:"text","prepend-icon":e(An),disabled:k.value||h.value,onClick:V=>$(O)},{loader:a(()=>[t(je,{indeterminate:"",size:"20",width:"2"})]),default:a(()=>[j(" "+i(e(n)("Edit")),1)]),_:1},8,["class","prepend-icon","disabled","onClick"]),t(H,{class:be(["px-2",{"d-none":k.value,"hover-display":!k.value}]),color:"default",density:"comfortable",variant:"text","prepend-icon":e(rn),loading:u.value[O.id],disabled:k.value||h.value,onClick:V=>z(O)},{loader:a(()=>[t(je,{indeterminate:"",size:"20",width:"2"})]),default:a(()=>[j(" "+i(e(n)("Delete")),1)]),_:1},8,["class","prepend-icon","loading","disabled","onClick"]),s("span",X_,[t(se,{class:be(!k.value&&!h.value&&x.value>1?"drag-handle":"disabled"),icon:e(Jl)},null,8,["class","icon"]),!k.value&&!h.value&&x.value>1?(l(),p(yt,{key:0,activator:"parent"},{default:a(()=>[j(i(e(n)("Drag to Reorder")),1)]),_:1})):r("",!0)])])])])):r("",!0)]),_:1},8,["disabled","modelValue"])]),_:1},8,["hover"])]),_:1})]),_:1})]),_:1}),t(Go,{ref_key:"editDialog",ref:v,type:e(It).Template},null,8,["type"]),t(pa,{ref_key:"confirmDialog",ref:g},null,512),t(mt,{ref_key:"snackbar",ref:c},null,512)],64)}}}),eT={class:"d-flex align-center justify-center fill-height bg-light-primary"},tT={key:2,class:"avatar-edit-icon"},aT={class:"d-flex flex-column justify-center gap-3"},lT={class:"d-flex text-body-1"},nT={class:"me-1"},oT={key:1},sT={class:"d-flex text-body-1 align-center",style:{height:"40px"}},iT={key:0},rT={key:1},uT=["accept"],dT=Pe({__name:"UserBasicSettingTab",setup(f){const{tt:T}=Oe(),{newProfile:n,oldProfile:o,emailVerified:g,loading:c,resending:v,saving:y,allAccounts:k,allVisibleAccounts:h,allVisibleCategorizedAccounts:d,allWeekDays:u,allCalendarDisplayTypes:C,allDateDisplayTypes:F,allLongDateFormats:w,allShortDateFormats:m,allLongTimeFormats:x,allShortTimeFormats:S,allFiscalYearFormats:N,allCurrencyDisplayTypes:A,allNumeralSystemTypes:$,allDecimalSeparators:I,allDigitGroupingSymbols:z,allDigitGroupingTypes:M,allCoordinateDisplayTypes:U,allExpenseAmountColorTypes:X,allIncomeAmountColorTypes:Z,allTransactionEditScopeTypes:q,languageTitle:O,supportDigitGroupingSymbol:V,inputIsNotChangedProblemMessage:_,inputInvalidProblemMessage:D,langAndRegionInputInvalidProblemMessage:P,extendInputInvalidProblemMessage:W,inputIsNotChanged:ne,inputIsInvalid:de,setCurrentUserProfile:J,reset:Y,doAfterProfileUpdate:ie}=Bd(),fe=qa(),te=ra(),K=_a(),me=xe("confirmDialog"),Ne=xe("snackbar"),et=xe("avatarInput"),Me=L(""),Ve=L(""),bt=L(""),Bt=B(()=>te.getUserAvatarUrl(Me.value,bt.value));function at(){c.value=!0;const ce=[K.loadAllAccounts({force:!1}),te.getCurrentUserProfile()];Promise.all(ce).then(ke=>{const Be=ke[1];J(Be),Me.value=Be.avatar,Ve.value=Be.avatarProvider,c.value=!1}).catch(ke=>{o.value.nickname="",o.value.email="",n.value.nickname="",n.value.email="",c.value=!1,ke.processed||Ne.value?.showError(ke)})}function Yt(){const ce=_.value||D.value||W.value||P.value;if(ce){Ne.value?.showMessage(ce);return}y.value=!0,fe.updateUserProfile(n.value.toProfileUpdateRequest()).then(ke=>{y.value=!1,ie(ke.user),Ne.value?.showMessage("Your profile has been successfully updated")}).catch(ke=>{y.value=!1,ke.processed||Ne.value?.showError(ke)})}function At(ce){if(!ce||!ce.target)return;const ke=ce.target;if(!ke.files||!ke.files.length||!ke.files[0])return;const Be=ke.files[0];ke.value="",y.value=!0,te.updateUserAvatar({avatarFile:Be}).then(ct=>{y.value=!1,ct&&(Me.value=ct.avatar,Ve.value=ct.avatarProvider,bt.value=pl(),J(ct)),Ne.value?.showMessage("Your avatar has been successfully updated")}).catch(ct=>{y.value=!1,ct.processed||Ne.value?.showError(ct)})}function Zt(){me.value?.open("Are you sure you want to remove avatar?").then(()=>{y.value=!0,te.removeUserAvatar().then(ce=>{y.value=!1,ce&&(Me.value=ce.avatar,Ve.value=ce.avatarProvider,J(ce)),Ne.value?.showMessage("Your profile has been successfully updated")}).catch(ce=>{y.value=!1,ce.processed||Ne.value?.showError(ce)})})}function Qe(){v.value=!0,fe.resendVerifyEmailByLoginedUser().then(()=>{v.value=!1,Ne.value?.showMessage("Validation email has been sent")}).catch(ce=>{v.value=!1,ce.processed||Ne.value?.showError(ce)})}function pe(){et.value?.click()}return at(),(ce,ke)=>{const Be=Ie("two-column-select"),ct=Ie("language-select"),we=Ie("currency-select"),st=Ie("fiscal-year-start-select");return l(),b(ue,null,[t(Ae,null,{default:a(()=>[t(R,{cols:"12"},{default:a(()=>[t(Ee,{class:be({disabled:e(c)||e(y)})},{title:a(()=>[s("span",null,i(e(T)("Basic Settings")),1),e(c)?(l(),p(je,{key:0,indeterminate:"",size:"20",class:"ms-3"})):r("",!0)]),default:a(()=>[t(ve,{class:"d-flex"},{default:a(()=>[t(Za,{rounded:"lg",variant:"tonal",size:"100",class:be(["me-4 user-profile-avatar-icon",{"cursor-pointer":Ve.value==="internal","user-profile-avatar-icon-modifiable":Ve.value==="internal"}]),color:Bt.value?"rgba(0,0,0,0)":"primary"},{default:a(()=>[Bt.value?(l(),p(ht,{key:0,src:Bt.value},{placeholder:a(()=>[s("div",eT,[t(se,{color:"primary",size:"48",class:"user-profile-avatar-placeholder",icon:e(Ol)},null,8,["icon"])])]),_:1},8,["src"])):Bt.value?r("",!0):(l(),p(se,{key:1,size:"48",class:"user-profile-avatar-placeholder",icon:e(Ol)},null,8,["icon"])),Ve.value==="internal"?(l(),b("div",tT,[t(se,{size:"48",icon:e(kr)},null,8,["icon"])])):r("",!0),Ve.value==="internal"?(l(),p(nt,{key:3,activator:"parent",width:"200",location:"bottom",offset:"14px"},{default:a(()=>[t(ze,null,{default:a(()=>[t(le,{disabled:e(y),title:e(T)("Update Avatar"),onClick:pe},null,8,["disabled","title"]),t(le,{disabled:!Bt.value||e(y),title:e(T)("Remove Avatar"),onClick:Zt},null,8,["disabled","title"])]),_:1})]),_:1})):r("",!0)]),_:1},8,["class","color"]),s("div",aT,[s("div",lT,[s("span",nT,i(e(T)("Username:")),1),e(c)?(l(),p(ut,{key:0,class:"skeleton-no-margin",type:"text",style:{width:"100px"},loading:!0})):r("",!0),e(c)?r("",!0):(l(),b("span",oT,i(e(o).username),1))]),s("div",sT,[!e(c)&&e(g)?(l(),b("span",iT,i(e(T)("Email address is verified")),1)):r("",!0),!e(c)&&!e(g)?(l(),b("span",rT,i(e(T)("Email address is not verified")),1)):r("",!0),e(Zl)()&&!e(c)&&!e(g)?(l(),p(H,{key:2,class:"ms-2 px-2",size:"small",variant:"text",disabled:e(c)||e(v),onClick:Qe},{default:a(()=>[j(i(e(T)("Resend Validation Email"))+" ",1),e(v)?(l(),p(je,{key:0,indeterminate:"",size:"18",class:"ms-2"})):r("",!0)]),_:1},8,["disabled"])):r("",!0),e(c)?(l(),p(ut,{key:3,class:"skeleton-no-margin mt-2 mb-1",type:"text",style:{width:"160px"},loading:!0})):r("",!0)])])]),_:1}),t(Ke),t(zt,{class:"mt-6"},{default:a(()=>[t(ve,null,{default:a(()=>[t(Ae,null,{default:a(()=>[t(R,{cols:"12",md:"6"},{default:a(()=>[t(dt,{type:"text",autocomplete:"nickname","persistent-placeholder":"",disabled:e(c)||e(y),label:e(T)("Nickname"),placeholder:e(T)("Your nickname"),modelValue:e(n).nickname,"onUpdate:modelValue":ke[0]||(ke[0]=De=>e(n).nickname=De)},null,8,["disabled","label","placeholder","modelValue"])]),_:1}),t(R,{cols:"12",md:"6"},{default:a(()=>[t(dt,{type:"email",autocomplete:"email","persistent-placeholder":"",disabled:e(c)||e(y),label:e(T)("E-mail"),placeholder:e(T)("Your email address"),modelValue:e(n).email,"onUpdate:modelValue":ke[1]||(ke[1]=De=>e(n).email=De)},null,8,["disabled","label","placeholder","modelValue"])]),_:1}),t(R,{cols:"12",md:"6"},{default:a(()=>[t(Be,{"primary-key-field":"id","primary-value-field":"category","primary-title-field":"name","primary-icon-field":"icon","primary-icon-type":"account","primary-sub-items-field":"accounts","primary-title-i18n":!0,"secondary-key-field":"id","secondary-value-field":"id","secondary-title-field":"name","secondary-icon-field":"icon","secondary-icon-type":"account","secondary-color-field":"color",disabled:e(c)||e(y)||!e(h).length,"enable-filter":!0,"filter-placeholder":e(T)("Find account"),"filter-no-items-text":e(T)("No available account"),label:e(T)("Default Account"),placeholder:e(T)("Default Account"),items:e(d),"no-item-text":e(xl).findAccountNameById(e(k),e(n).defaultAccountId,e(T)("Unspecified")),modelValue:e(n).defaultAccountId,"onUpdate:modelValue":ke[2]||(ke[2]=De=>e(n).defaultAccountId=De)},null,8,["disabled","filter-placeholder","filter-no-items-text","label","placeholder","items","no-item-text","modelValue"])]),_:1}),t(R,{cols:"12",md:"6"},{default:a(()=>[t(Je,{"item-title":"displayName","item-value":"type","persistent-placeholder":"",disabled:e(c)||e(y),label:e(T)("Editable Transaction Range"),placeholder:e(T)("Editable Transaction Range"),items:e(q),modelValue:e(n).transactionEditScope,"onUpdate:modelValue":ke[3]||(ke[3]=De=>e(n).transactionEditScope=De)},null,8,["disabled","label","placeholder","items","modelValue"])]),_:1})]),_:1})]),_:1}),t(Ke),t(ve,null,{default:a(()=>[t(Ae,null,{default:a(()=>[t(R,{cols:"12",md:"6"},{default:a(()=>[t(ct,{disabled:e(c)||e(y),label:e(O),placeholder:e(O),"include-system-default":!0,"use-model-value":!0,modelValue:e(n).language,"onUpdate:modelValue":ke[4]||(ke[4]=De=>e(n).language=De)},null,8,["disabled","label","placeholder","modelValue"])]),_:1}),t(R,{cols:"12",md:"6"},{default:a(()=>[t(we,{disabled:e(c)||e(y),label:e(T)("Default Currency"),placeholder:e(T)("Default Currency"),modelValue:e(n).defaultCurrency,"onUpdate:modelValue":ke[5]||(ke[5]=De=>e(n).defaultCurrency=De)},null,8,["disabled","label","placeholder","modelValue"])]),_:1}),t(R,{cols:"12",md:"6"},{default:a(()=>[t(Je,{"item-title":"displayName","item-value":"type","persistent-placeholder":"",disabled:e(c)||e(y),label:e(T)("First Day of Week"),placeholder:e(T)("First Day of Week"),items:e(u),modelValue:e(n).firstDayOfWeek,"onUpdate:modelValue":ke[6]||(ke[6]=De=>e(n).firstDayOfWeek=De)},null,8,["disabled","label","placeholder","items","modelValue"])]),_:1}),t(R,{cols:"12",md:"6"},{default:a(()=>[t(st,{"persistent-placeholder":"",disabled:e(c)||e(y),label:e(T)("Fiscal Year Start Date"),placeholder:e(T)("Fiscal Year Start Date"),"numeral-system":e(n).numeralSystem,modelValue:e(n).fiscalYearStart,"onUpdate:modelValue":ke[7]||(ke[7]=De=>e(n).fiscalYearStart=De)},null,8,["disabled","label","placeholder","numeral-system","modelValue"])]),_:1})]),_:1})]),_:1}),t(Ke),t(ve,null,{default:a(()=>[t(Ae,null,{default:a(()=>[t(R,{cols:"12",md:"6"},{default:a(()=>[t(Je,{"item-title":"displayName","item-value":"type","persistent-placeholder":"",disabled:e(c)||e(y),label:e(T)("Calendar Display Type"),placeholder:e(T)("Calendar Display Type"),items:e(C),modelValue:e(n).calendarDisplayType,"onUpdate:modelValue":ke[8]||(ke[8]=De=>e(n).calendarDisplayType=De)},null,8,["disabled","label","placeholder","items","modelValue"])]),_:1}),t(R,{cols:"12",md:"6"},{default:a(()=>[t(Je,{"item-title":"displayName","item-value":"type","persistent-placeholder":"",disabled:e(c)||e(y),label:e(T)("Date Display Type"),placeholder:e(T)("Date Display Type"),items:e(F),modelValue:e(n).dateDisplayType,"onUpdate:modelValue":ke[9]||(ke[9]=De=>e(n).dateDisplayType=De)},null,8,["disabled","label","placeholder","items","modelValue"])]),_:1}),t(R,{cols:"12",md:"6"},{default:a(()=>[t(Je,{"item-title":"displayName","item-value":"type","persistent-placeholder":"",disabled:e(c)||e(y),label:e(T)("Long Date Format"),placeholder:e(T)("Long Date Format"),items:e(w),modelValue:e(n).longDateFormat,"onUpdate:modelValue":ke[10]||(ke[10]=De=>e(n).longDateFormat=De)},null,8,["disabled","label","placeholder","items","modelValue"])]),_:1}),t(R,{cols:"12",md:"6"},{default:a(()=>[t(Je,{"item-title":"displayName","item-value":"type","persistent-placeholder":"",disabled:e(c)||e(y),label:e(T)("Short Date Format"),placeholder:e(T)("Short Date Format"),items:e(m),modelValue:e(n).shortDateFormat,"onUpdate:modelValue":ke[11]||(ke[11]=De=>e(n).shortDateFormat=De)},null,8,["disabled","label","placeholder","items","modelValue"])]),_:1}),t(R,{cols:"12",md:"6"},{default:a(()=>[t(Je,{"item-title":"displayName","item-value":"type","persistent-placeholder":"",disabled:e(c)||e(y),label:e(T)("Long Time Format"),placeholder:e(T)("Long Time Format"),items:e(x),modelValue:e(n).longTimeFormat,"onUpdate:modelValue":ke[12]||(ke[12]=De=>e(n).longTimeFormat=De)},null,8,["disabled","label","placeholder","items","modelValue"])]),_:1}),t(R,{cols:"12",md:"6"},{default:a(()=>[t(Je,{"item-title":"displayName","item-value":"type","persistent-placeholder":"",disabled:e(c)||e(y),label:e(T)("Short Time Format"),placeholder:e(T)("Short Time Format"),items:e(S),modelValue:e(n).shortTimeFormat,"onUpdate:modelValue":ke[13]||(ke[13]=De=>e(n).shortTimeFormat=De)},null,8,["disabled","label","placeholder","items","modelValue"])]),_:1}),t(R,{cols:"12",md:"6"},{default:a(()=>[t(Je,{"item-title":"displayName","item-value":"type","persistent-placeholder":"",disabled:e(c)||e(y),label:e(T)("Fiscal Year Format"),placeholder:e(T)("Fiscal Year Format"),items:e(N),modelValue:e(n).fiscalYearFormat,"onUpdate:modelValue":ke[14]||(ke[14]=De=>e(n).fiscalYearFormat=De)},null,8,["disabled","label","placeholder","items","modelValue"])]),_:1})]),_:1})]),_:1}),t(Ke),t(ve,null,{default:a(()=>[t(Ae,null,{default:a(()=>[t(R,{cols:"12",md:"6"},{default:a(()=>[t(Je,{"item-title":"displayName","item-value":"type","persistent-placeholder":"",disabled:e(c)||e(y),label:e(T)("Currency Display Mode"),placeholder:e(T)("Currency Display Mode"),items:e(A),modelValue:e(n).currencyDisplayType,"onUpdate:modelValue":ke[15]||(ke[15]=De=>e(n).currencyDisplayType=De)},null,8,["disabled","label","placeholder","items","modelValue"])]),_:1}),t(R,{cols:"12",md:"6"},{default:a(()=>[t(Je,{"item-title":"displayName","item-value":"type","persistent-placeholder":"",disabled:e(c)||e(y),label:e(T)("Numeral System"),placeholder:e(T)("Numeral System"),items:e($),modelValue:e(n).numeralSystem,"onUpdate:modelValue":ke[16]||(ke[16]=De=>e(n).numeralSystem=De)},null,8,["disabled","label","placeholder","items","modelValue"])]),_:1}),t(R,{cols:"12",md:"6"},{default:a(()=>[t(Je,{"item-title":"displayName","item-value":"type","persistent-placeholder":"",disabled:e(c)||e(y),label:e(T)("Digit Grouping"),placeholder:e(T)("Digit Grouping"),items:e(M),modelValue:e(n).digitGrouping,"onUpdate:modelValue":ke[17]||(ke[17]=De=>e(n).digitGrouping=De)},null,8,["disabled","label","placeholder","items","modelValue"])]),_:1}),t(R,{cols:"12",md:"6"},{default:a(()=>[t(Je,{"item-title":"displayName","item-value":"type","persistent-placeholder":"",disabled:e(c)||e(y)||!e(V),label:e(T)("Digit Grouping Symbol"),placeholder:e(T)("Digit Grouping Symbol"),items:e(z),modelValue:e(n).digitGroupingSymbol,"onUpdate:modelValue":ke[18]||(ke[18]=De=>e(n).digitGroupingSymbol=De)},null,8,["disabled","label","placeholder","items","modelValue"])]),_:1}),t(R,{cols:"12",md:"6"},{default:a(()=>[t(Je,{"item-title":"displayName","item-value":"type","persistent-placeholder":"",disabled:e(c)||e(y),label:e(T)("Decimal Separator"),placeholder:e(T)("Decimal Separator"),items:e(I),modelValue:e(n).decimalSeparator,"onUpdate:modelValue":ke[19]||(ke[19]=De=>e(n).decimalSeparator=De)},null,8,["disabled","label","placeholder","items","modelValue"])]),_:1})]),_:1})]),_:1}),t(Ke),t(ve,null,{default:a(()=>[t(Ae,null,{default:a(()=>[t(R,{cols:"12",md:"6"},{default:a(()=>[t(Je,{"item-title":"displayName","item-value":"type","persistent-placeholder":"",disabled:e(c)||e(y),label:e(T)("Geographic Location Format"),placeholder:e(T)("Geographic Location Format"),items:e(U),modelValue:e(n).coordinateDisplayType,"onUpdate:modelValue":ke[20]||(ke[20]=De=>e(n).coordinateDisplayType=De)},null,8,["disabled","label","placeholder","items","modelValue"])]),_:1})]),_:1})]),_:1}),t(Ke),t(ve,null,{default:a(()=>[t(Ae,null,{default:a(()=>[t(R,{cols:"12",md:"6"},{default:a(()=>[t(Je,{"item-title":"displayName","item-value":"type","persistent-placeholder":"",disabled:e(c)||e(y),label:e(T)("Expense Amount Color"),placeholder:e(T)("Expense Amount Color"),items:e(X),modelValue:e(n).expenseAmountColor,"onUpdate:modelValue":ke[21]||(ke[21]=De=>e(n).expenseAmountColor=De)},null,8,["disabled","label","placeholder","items","modelValue"])]),_:1}),t(R,{cols:"12",md:"6"},{default:a(()=>[t(Je,{"item-title":"displayName","item-value":"type","persistent-placeholder":"",disabled:e(c)||e(y),label:e(T)("Income Amount Color"),placeholder:e(T)("Income Amount Color"),items:e(Z),modelValue:e(n).incomeAmountColor,"onUpdate:modelValue":ke[22]||(ke[22]=De=>e(n).incomeAmountColor=De)},null,8,["disabled","label","placeholder","items","modelValue"])]),_:1})]),_:1})]),_:1}),t(ve,{class:"d-flex flex-wrap gap-4"},{default:a(()=>[t(H,{disabled:e(ne)||e(de)||e(y),onClick:Yt},{default:a(()=>[j(i(e(T)("Save Changes"))+" ",1),e(y)?(l(),p(je,{key:0,indeterminate:"",size:"22",class:"ms-2"})):r("",!0)]),_:1},8,["disabled"]),t(H,{color:"default",variant:"tonal",onClick:e(Y)},{default:a(()=>[j(i(e(T)("Reset")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["class"])]),_:1})]),_:1}),t(pa,{ref_key:"confirmDialog",ref:me},null,512),t(mt,{ref_key:"snackbar",ref:Ne},null,512),s("input",{ref_key:"avatarInput",ref:et,type:"file",style:{display:"none"},accept:e(Ho),onChange:ke[23]||(ke[23]=De=>At(De))},null,40,uT)],64)}}}),cT={class:"d-flex align-center justify-center"},mT={class:"text-h4 text-error text-wrap"},pT={class:"w-100"},vT={class:"w-100 d-flex justify-center gap-4"},fT=Pe({__name:"UnlinkThirdPartyLoginDialog",setup(f,{expose:T}){const{tt:n}=Oe(),o=ni();let g=null,c=null;const v=xe("snackbar"),y=L(!1),k=L(!1),h=L(""),d=L(void 0);function u(w){return y.value=!0,k.value=!1,h.value="",d.value=w,new Promise((m,x)=>{g=m,c=x})}function C(){!d.value||!h.value||(k.value=!0,o.unlinkExternalAuth({externalAuthType:d.value,password:h.value}).then(()=>{k.value=!1,g?.(),y.value=!1}).catch(w=>{k.value=!1,w.processed||v.value?.showError(w)}))}function F(){c?.(),y.value=!1}return T({open:u}),(w,m)=>(l(),b(ue,null,[t(Tt,{width:"640",persistent:!0,modelValue:y.value,"onUpdate:modelValue":m[1]||(m[1]=x=>y.value=x)},{default:a(()=>[t(Ee,{class:"pa-2 pa-sm-4 pa-md-4"},{title:a(()=>[s("div",cT,[s("h4",mT,i(e(n)("Are you sure you want to unlink this login method?")),1)])]),default:a(()=>[t(ve,{class:"mb-md-4 w-100 d-flex justify-center"},{default:a(()=>[s("div",pT,[t(dt,{autocomplete:"current-password",type:"password",variant:"underlined",color:"error",disabled:k.value,placeholder:e(n)("Current Password"),modelValue:h.value,"onUpdate:modelValue":m[0]||(m[0]=x=>h.value=x)},null,8,["disabled","placeholder","modelValue"])])]),_:1}),t(ve,{class:"overflow-y-visible"},{default:a(()=>[s("div",vT,[t(H,{color:"error",disabled:!h.value||k.value,onClick:C},{default:a(()=>[j(i(e(n)("Confirm"))+" ",1),k.value?(l(),p(je,{key:0,indeterminate:"",size:"22",class:"ms-2"})):r("",!0)]),_:1},8,["disabled"]),t(H,{color:"secondary",variant:"tonal",disabled:k.value,onClick:F},{default:a(()=>[j(i(e(n)("Cancel")),1)]),_:1},8,["disabled"])])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(mt,{ref_key:"snackbar",ref:v},null,512)],64))}}),yT={class:"d-flex align-center justify-center"},gT={class:"text-h4"},hT={key:0,class:"w-100"},bT={key:1,class:"w-100 code-container"},kT={key:0},_T={key:1},TT=Pe({__name:"UserGenerateTokenDialog",setup(f,{expose:T}){const{tt:n}=Oe(),o=Wo(),g=xe("buttonContainer"),c=xe("snackbar");let v=null,y=null;const k=L(!1),h=L(Kn()?"api":Gn()?"mcp":"api"),d=L(86400),u=L(86400),C=L(""),F=L(!1),w=L(!1),m=L(!1),x=L(""),S=L(""),N=B(()=>{const Z=[];return Kn()&&Z.push({name:n("API Token"),value:"api"}),Gn()&&Z.push({name:n("MCP Token"),value:"mcp"}),Z}),A=B(()=>`curl -H 'Authorization: Bearer ${S.value}' '${x.value}/v1/users/profile/get.json'`),$=B(()=>`{
    "mcpServers": {
        "ezbookkeeping-mcp": {
            "type": "streamable-http",
            "url": "`+x.value+`",
            "headers": {
                "Authorization": "Bearer `+S.value+`"
            }
        }
    }
}`);function I(){return k.value=!0,C.value="",h.value=Kn()?"api":Gn()?"mcp":"api",d.value=86400,u.value=86400,F.value=!1,w.value=!1,m.value=!1,x.value="",S.value="",new Promise((Z,q)=>{v=Z,y=q})}function z(){F.value||!C.value||(F.value=!0,o.generateToken({type:h.value,expiresInSeconds:d.value>=0?d.value:u.value,password:C.value}).then(Z=>{F.value=!1,C.value="",h.value==="api"?x.value=Z.apiBaseUrl:h.value==="mcp"&&(x.value=Z.mcpUrl),S.value=Z.token}).catch(Z=>{F.value=!1,Z.processed||c.value?.showError(Z)}))}function M(){h.value==="api"&&w.value?kn(A.value,g.value):h.value==="mcp"&&m.value?kn($.value,g.value):kn(S.value,g.value),c.value?.showMessage("Data copied")}function U(){y?.(),k.value=!1}function X(){v?.(),k.value=!1}return T({open:I}),(Z,q)=>(l(),b(ue,null,[t(Tt,{width:"800",persistent:!0,modelValue:k.value,"onUpdate:modelValue":q[8]||(q[8]=O=>k.value=O)},{default:a(()=>[t(Ee,{class:"pa-2 pa-sm-4 pa-md-4"},{title:a(()=>[s("div",yT,[s("h4",gT,i(e(n)("Generate Token")),1)])]),default:a(()=>[h.value==="api"&&S.value&&x.value?(l(),p(ve,{key:0,class:"py-0 w-100 d-flex justify-center"},{default:a(()=>[t(Qa,{class:"bidirectional-switch",color:"secondary",label:e(n)("Example"),modelValue:w.value,"onUpdate:modelValue":q[0]||(q[0]=O=>w.value=O),onClick:q[1]||(q[1]=O=>w.value=!w.value)},{prepend:a(()=>[s("span",null,i(e(n)("Token")),1)]),_:1},8,["label","modelValue"])]),_:1})):r("",!0),h.value==="mcp"&&S.value&&x.value?(l(),p(ve,{key:1,class:"py-0 w-100 d-flex justify-center"},{default:a(()=>[t(Qa,{class:"bidirectional-switch",color:"secondary",label:e(n)("Configuration"),modelValue:m.value,"onUpdate:modelValue":q[2]||(q[2]=O=>m.value=O),onClick:q[3]||(q[3]=O=>m.value=!m.value)},{prepend:a(()=>[s("span",null,i(e(n)("Token")),1)]),_:1},8,["label","modelValue"])]),_:1})):r("",!0),t(ve,{class:"mt-md-4 w-100 d-flex justify-center"},{default:a(()=>[S.value?r("",!0):(l(),b("div",hT,[t(Ae,null,{default:a(()=>[t(R,{cols:"12",md:"12"},{default:a(()=>[t(Je,{"item-title":"name","item-value":"value",disabled:F.value,label:e(n)("Token Type"),placeholder:e(n)("Token Type"),items:N.value,modelValue:h.value,"onUpdate:modelValue":q[4]||(q[4]=O=>h.value=O)},null,8,["disabled","label","placeholder","items","modelValue"])]),_:1}),t(R,{cols:"12",md:d.value>=0?12:6},{default:a(()=>[t(Je,{"item-title":"displayName","item-value":"value",disabled:F.value,label:e(n)("Expiration Time (Seconds)"),placeholder:e(n)("Expiration Time (Seconds)"),items:[{displayName:e(n)("No Expiration"),value:0},{displayName:e(n)("format.misc.nHour",{n:1}),value:3600},{displayName:e(n)("format.misc.nDays",{n:1}),value:86400},{displayName:e(n)("format.misc.nDays",{n:7}),value:604800},{displayName:e(n)("format.misc.nDays",{n:30}),value:2592e3},{displayName:e(n)("format.misc.nDays",{n:90}),value:7776e3},{displayName:e(n)("format.misc.nDays",{n:180}),value:15552e3},{displayName:e(n)("format.misc.nDays",{n:365}),value:31536e3},{displayName:e(n)("Custom"),value:-1}],modelValue:d.value,"onUpdate:modelValue":q[5]||(q[5]=O=>d.value=O)},null,8,["disabled","label","placeholder","items","modelValue"])]),_:1},8,["md"]),d.value<0?(l(),p(R,{key:0,cols:"12",md:"6"},{default:a(()=>[t(dt,{type:"number","persistent-placeholder":"",disabled:F.value,label:e(n)("Custom Expiration Time (Seconds)"),placeholder:e(n)("Custom Expiration Time (Seconds)"),modelValue:u.value,"onUpdate:modelValue":q[6]||(q[6]=O=>u.value=O),modelModifiers:{number:!0}},null,8,["disabled","label","placeholder","modelValue"])]),_:1})):r("",!0),t(R,{cols:"12",md:"12"},{default:a(()=>[t(dt,{autocomplete:"current-password",type:"password","persistent-placeholder":"",autofocus:!0,disabled:F.value,label:e(n)("Current Password"),placeholder:e(n)("Current Password"),modelValue:C.value,"onUpdate:modelValue":q[7]||(q[7]=O=>C.value=O),onKeyup:Wt(z,["enter"])},null,8,["disabled","label","placeholder","modelValue"])]),_:1})]),_:1})])),S.value?(l(),b("div",bT,[h.value==="api"&&(!w.value||!x.value)||h.value==="mcp"&&(!m.value||!x.value)?(l(),p(La,{key:0,class:"w-100 always-cursor-text",readonly:!0,rows:4,value:S.value},null,8,["value"])):r("",!0),h.value==="api"&&w.value&&x.value?(l(),p(La,{key:1,class:"w-100 always-cursor-text",readonly:!0,rows:5,value:A.value},null,8,["value"])):r("",!0),h.value==="mcp"&&m.value&&x.value?(l(),p(La,{key:2,class:"w-100 always-cursor-text",readonly:!0,rows:15,value:$.value},null,8,["value"])):r("",!0)])):r("",!0)]),_:1}),d.value===0||d.value<0&&u.value===0||h.value==="mcp"?(l(),p(ve,{key:2,class:"w-100"},{default:a(()=>[t(js,{type:"warning",variant:"tonal"},{default:a(()=>[d.value===0||d.value<0&&u.value===0?(l(),b("span",kT,i(e(n)("Your token does not expire, please keep it secure.")),1)):r("",!0),h.value==="mcp"?(l(),b("span",_T,i(e(n)("When connecting to third-party apps, be aware that they and any large language models they use can access your private data.")),1)):r("",!0)]),_:1})]),_:1})):r("",!0),t(ve,{class:"overflow-y-visible"},{default:a(()=>[s("div",{ref_key:"buttonContainer",ref:g,class:"w-100 d-flex justify-center gap-4"},[S.value?r("",!0):(l(),p(H,{key:0,disabled:F.value||!C.value,onClick:z},{default:a(()=>[j(i(e(n)("Generate"))+" ",1),F.value?(l(),p(je,{key:0,indeterminate:"",size:"22",class:"ms-2"})):r("",!0)]),_:1},8,["disabled"])),S.value?r("",!0):(l(),p(H,{key:1,color:"secondary",variant:"tonal",disabled:F.value,onClick:U},{default:a(()=>[j(i(e(n)("Cancel")),1)]),_:1},8,["disabled"])),S.value?(l(),p(H,{key:2,variant:"tonal",onClick:M},{default:a(()=>[j(i(e(n)("Copy")),1)]),_:1})):r("",!0),S.value?(l(),p(H,{key:3,color:"secondary",variant:"tonal",onClick:X},{default:a(()=>[j(i(e(n)("Close")),1)]),_:1})):r("",!0)],512)]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(mt,{ref_key:"snackbar",ref:c},null,512)],64))}}),xT={class:"text-body-1"},CT={class:"d-flex align-center"},wT={class:"text-right"},AT={class:"px-0",colspan:"4"},IT={class:"text-sm"},ST={class:"text-sm"},VT={class:"text-sm"},$T={class:"text-sm text-right"},DT={class:"d-flex align-center"},FT={class:"text-right"},NT={class:"px-0",colspan:"4"},MT={class:"text-sm"},ET={class:"text-sm"},UT={class:"text-sm"},PT={class:"text-sm text-right"},BT=Pe({__name:"UserSecuritySettingTab",setup(f){class T{externalAuthType;icon;displayName;linked;externalUsername;createdAt;constructor(te){this.externalAuthType=te.externalAuthType,this.linked=te.linked,this.externalUsername=te.externalUsername?te.externalUsername:"-",this.createdAt=te.createdAt?g(te.createdAt):"-",te.externalAuthCategory==="oauth2"?(this.displayName=c(te.externalAuthType,To()),te.externalAuthType==="github"?this.icon=_r:this.icon=ls):(this.displayName=te.externalAuthType,this.icon=ls)}}class n extends Ld{icon;lastSeenDateTime;constructor(te){super(te.tokenId,te.isCurrent,te.deviceType,te.deviceInfo,te.deviceName,te.lastSeen),this.icon=this.getTokenIcon(te.deviceType),this.lastSeenDateTime=te.lastSeen?g(te.lastSeen):"-"}getTokenIcon(te){return te===Rl.Phone?Fo:te===Rl.Wearable?Tr:te===Rl.Tablet?xr:te===Rl.TV?Cr:te===Rl.Api?wr:te===Rl.MCP?Ar:Ir}}const{tt:o,formatUnixTimeToLongDateTime:g,getLocalizedOAuth2ProviderName:c,setLanguage:v}=Oe(),y=qa(),k=Ha(),h=ni(),d=Wo(),u=xe("newPasswordInput"),C=xe("confirmPasswordInput"),F=xe("unlinkThirdPartyLoginDialog"),w=xe("generateTokenDialog"),m=xe("confirmDialog"),x=xe("snackbar"),S=L([]),N=L([]),A=L(""),$=L(""),I=L(""),z=L(!1),M=L(!0),U=L(!0),X=L(!1),Z=L(pl()),q=B(()=>y.generateOAuth2LinkUrl("desktop",Z.value)),O=B(()=>{const fe=[];if(!S.value)return fe;for(const te of S.value)fe.push(new T(te));return fe}),V=B(()=>{const fe=[];if(!N.value)return fe;for(const te of N.value){const K=Rd(te);fe.push(new n(K))}return fe}),_=B(()=>!$.value&&!I.value?"Nothing has been modified":!$.value&&I.value?"New password cannot be blank":$.value&&!I.value?"Password confirmation cannot be blank":$.value&&I.value&&$.value!==I.value?"Password and password confirmation do not match":null);function D(){W(!0),J(!0)}function P(){const fe=_.value;if(fe){x.value?.showMessage(fe);return}z.value=!0,y.updateUserProfile({password:$.value,oldPassword:A.value}).then(te=>{if(z.value=!1,A.value="",$.value="",I.value="",te.user){const K=v(te.user.language);k.updateLocalizedDefaultSettings(K)}J(!0),x.value?.showMessage("Your profile has been successfully updated")}).catch(te=>{z.value=!1,A.value="",te.processed||x.value?.showError(te)})}function W(fe){jl()&&(M.value=!0,h.getExternalAuths().then(te=>{fe||(eo(S.value,te)?x.value?.showMessage("Third-party logins list is up to date"):x.value?.showMessage("Third-party logins list has been updated")),S.value=te,M.value=!1}).catch(te=>{M.value=!1,te.processed||x.value?.showError(te)}))}function ne(fe){jl()&&F.value?.open(fe.externalAuthType).then(()=>{W(!0)})}function de(){w.value?.open().then(()=>{J(!0)})}function J(fe){U.value=!0,d.getAllTokens().then(te=>{fe||(eo(N.value,te)?x.value?.showMessage("Session list is up to date"):x.value?.showMessage("Session list has been updated")),N.value=te,U.value=!1}).catch(te=>{U.value=!1,te.processed||x.value?.showError(te)})}function Y(fe){m.value?.open("Are you sure you want to logout from this session?").then(()=>{U.value=!0,d.revokeToken({tokenId:fe.tokenId}).then(()=>{U.value=!1;for(const[te,K]of Da(N.value))te.tokenId===fe.tokenId&&N.value.splice(K,1)}).catch(te=>{U.value=!1,te.processed||x.value?.showError(te)})})}function ie(){V.value.length<2||m.value?.open("Are you sure you want to logout all other sessions?").then(()=>{U.value=!0,d.revokeAllTokens().then(()=>{U.value=!1;for(const[fe,te]of zd(N.value))fe.isCurrent||N.value.splice(te,1);x.value?.showMessage("You have logged out all other sessions")}).catch(fe=>{U.value=!1,fe.processed||x.value?.showError(fe)})})}return D(),(fe,te)=>(l(),b(ue,null,[t(Ae,null,{default:a(()=>[t(R,{cols:"12"},{default:a(()=>[t(Ee,{class:be({disabled:z.value}),title:e(o)("Modify Password")},{default:a(()=>[t(zt,null,{default:a(()=>[t(ve,{class:"pt-0"},{default:a(()=>[s("span",xT,i(e(o)("After changing the password, other devices will be logged out. Please use the new password to log in on other devices.")),1)]),_:1}),t(ve,null,{default:a(()=>[t(Ae,null,{default:a(()=>[t(R,{cols:"12",md:"6"},{default:a(()=>[t(e(dt),{autocomplete:"current-password",ref:"currentPasswordInput",type:"password",disabled:z.value,label:e(o)("Current Password"),placeholder:e(o)("Current Password"),modelValue:A.value,"onUpdate:modelValue":te[0]||(te[0]=K=>A.value=K),onKeyup:te[1]||(te[1]=Wt(K=>u.value?.focus(),["enter"]))},null,8,["disabled","label","placeholder","modelValue"])]),_:1})]),_:1}),t(Ae,null,{default:a(()=>[t(R,{cols:"12",md:"6"},{default:a(()=>[t(e(dt),{autocomplete:"new-password",ref_key:"newPasswordInput",ref:u,type:"password",disabled:z.value,label:e(o)("New Password"),placeholder:e(o)("New Password"),modelValue:$.value,"onUpdate:modelValue":te[2]||(te[2]=K=>$.value=K),onKeyup:te[3]||(te[3]=Wt(K=>C.value?.focus(),["enter"]))},null,8,["disabled","label","placeholder","modelValue"])]),_:1})]),_:1}),t(Ae,null,{default:a(()=>[t(R,{cols:"12",md:"6"},{default:a(()=>[t(e(dt),{ref_key:"confirmPasswordInput",ref:C,type:"password",disabled:z.value,label:e(o)("Confirm Password"),placeholder:e(o)("Re-enter the password"),modelValue:I.value,"onUpdate:modelValue":te[4]||(te[4]=K=>I.value=K),onKeyup:Wt(P,["enter"])},null,8,["disabled","label","placeholder","modelValue"])]),_:1})]),_:1})]),_:1}),t(ve,{class:"d-flex flex-wrap gap-4"},{default:a(()=>[t(H,{disabled:!$.value||!I.value||z.value,onClick:P},{default:a(()=>[j(i(e(o)("Save Changes"))+" ",1),z.value?(l(),p(je,{key:0,indeterminate:"",size:"22",class:"ms-2"})):r("",!0)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["class","title"])]),_:1}),e(jl)()&&(M.value||O.value&&O.value.length)?(l(),p(R,{key:0,cols:"12"},{default:a(()=>[t(Ee,{class:be({disabled:M.value})},{title:a(()=>[s("div",CT,[s("span",null,i(e(o)("Third-Party Logins")),1),t(H,{density:"compact",color:"default",variant:"text",size:"24",class:"ms-2",icon:!0,loading:M.value,onClick:te[5]||(te[5]=K=>W(!1))},{loader:a(()=>[t(je,{indeterminate:"",size:"20"})]),default:a(()=>[t(se,{icon:e(wa),size:"24"},null,8,["icon"]),t(yt,{activator:"parent"},{default:a(()=>[j(i(e(o)("Refresh")),1)]),_:1})]),_:1},8,["loading"])])]),default:a(()=>[t(el,{class:"table-striped text-no-wrap",hover:!M.value},{default:a(()=>[s("thead",null,[s("tr",null,[s("th",null,i(e(o)("Type")),1),s("th",null,i(e(o)("Username")),1),s("th",null,i(e(o)("Linked Time")),1),s("th",wT,i(e(o)("Operation")),1)])]),s("tbody",null,[(l(!0),b(ue,null,$e(M.value&&(!S.value||S.value.length<1)?[1]:[],K=>(l(),b("tr",{key:K},[s("td",AT,[t(ut,{type:"text",loading:!0})])]))),128)),(l(!0),b(ue,null,$e(O.value,K=>(l(),b("tr",{key:K.externalAuthType},[s("td",IT,[t(se,{start:"",icon:K.icon},null,8,["icon"]),j(" "+i(K.displayName),1)]),s("td",ST,i(K.externalUsername),1),s("td",VT,i(K.createdAt),1),s("td",$T,[!K.linked&&e(jl)()&&e(Od)()===K.externalAuthType?(l(),p(H,{key:0,density:"comfortable",variant:"tonal",disabled:X.value,href:q.value,onClick:te[6]||(te[6]=me=>X.value=!0)},{default:a(()=>[j(i(e(o)("Link"))+" ",1),X.value?(l(),p(je,{key:0,indeterminate:"",size:"22",class:"ms-2"})):r("",!0)]),_:1},8,["disabled","href"])):r("",!0),K.linked?(l(),p(H,{key:1,density:"comfortable",color:"error",variant:"tonal",disabled:M.value,onClick:me=>ne(K)},{default:a(()=>[j(i(e(o)("Unlink")),1)]),_:1},8,["disabled","onClick"])):r("",!0)])]))),128))])]),_:1},8,["hover"])]),_:1},8,["class"])]),_:1})):r("",!0),t(R,{cols:"12"},{default:a(()=>[t(Ee,{class:be({disabled:U.value})},{title:a(()=>[s("div",DT,[s("span",null,i(e(o)("Device & Sessions")),1),e(Kn)()||e(Gn)()?(l(),p(H,{key:0,class:"ms-3",density:"compact",color:"default",variant:"outlined",onClick:de},{default:a(()=>[j(i(e(o)("Generate Token")),1)]),_:1})):r("",!0),t(H,{density:"compact",color:"default",variant:"text",size:"24",class:"ms-2",icon:!0,loading:U.value,onClick:te[7]||(te[7]=K=>J(!1))},{loader:a(()=>[t(je,{indeterminate:"",size:"20"})]),default:a(()=>[t(se,{icon:e(wa),size:"24"},null,8,["icon"]),t(yt,{activator:"parent"},{default:a(()=>[j(i(e(o)("Refresh")),1)]),_:1})]),_:1},8,["loading"])])]),default:a(()=>[t(el,{class:"table-striped text-no-wrap",hover:!U.value},{default:a(()=>[s("thead",null,[s("tr",null,[s("th",null,i(e(o)("Type")),1),s("th",null,i(e(o)("Device Info")),1),s("th",null,i(e(o)("Last Activity Time")),1),s("th",FT,[t(H,{density:"comfortable",color:"error",variant:"tonal",disabled:V.value.length<2||U.value,onClick:ie},{default:a(()=>[j(i(e(o)("Logout All")),1)]),_:1},8,["disabled"])])])]),s("tbody",null,[(l(!0),b(ue,null,$e(U.value&&(!V.value||V.value.length<1)?[1,2,3]:[],K=>(l(),b("tr",{key:K},[s("td",NT,[t(ut,{type:"text",loading:!0})])]))),128)),(l(!0),b(ue,null,$e(V.value,K=>(l(),b("tr",{key:K.tokenId},[s("td",MT,[t(se,{start:"",icon:K.icon},null,8,["icon"]),j(" "+i(e(o)(K.deviceName)),1)]),s("td",ET,i(K.deviceInfo),1),s("td",UT,i(K.lastSeenDateTime),1),s("td",PT,[t(H,{density:"comfortable",color:"error",variant:"tonal",disabled:K.isCurrent||U.value,onClick:me=>Y(K)},{default:a(()=>[j(i(e(o)("Log Out")),1)]),_:1},8,["disabled","onClick"])])]))),128))])]),_:1},8,["hover"])]),_:1},8,["class"])]),_:1})]),_:1}),t(fT,{ref_key:"unlinkThirdPartyLoginDialog",ref:F},null,512),t(TT,{ref_key:"generateTokenDialog",ref:w},null,512),t(pa,{ref_key:"confirmDialog",ref:m},null,512),t(mt,{ref_key:"snackbar",ref:x},null,512)],64))}}),LT={key:1,class:"text-body-1 font-weight-semibold"},RT={key:2,class:"text-body-1"},zT={key:3,class:"text-body-1"},OT={key:0,class:"text-body-1"},jT=Pe({__name:"UserTwoFactorAuthSettingTab",setup(f,{expose:T}){const{tt:n}=Oe(),o=jd(),g=xe("snackbar"),c=L(null),v=L(!0),y=L(""),k=L(""),h=L(""),d=L(""),u=L(""),C=L(!1),F=L(!1),w=L(!1),m=L(!1);function x(){v.value=!0,o.get2FAStatus().then(M=>{c.value=M.enable,v.value=!1}).catch(M=>{v.value=!1,M.processed||g.value?.showError(M)})}function S(){k.value="",y.value="",u.value="",C.value=!0,o.enable2FA().then(M=>{C.value=!1,k.value=M.qrcode,y.value=M.secret}).catch(M=>{C.value=!1,M.processed||g.value?.showError(M)})}function N(){if(!d.value){g.value?.showMessage("Passcode cannot be blank");return}if(F.value)return;const M=d.value;u.value="",d.value="",F.value=!0,o.confirmEnable2FA({secret:y.value,passcode:M}).then(U=>{F.value=!1,k.value="",y.value="",c.value=!0,U.recoveryCodes&&U.recoveryCodes.length&&(u.value=U.recoveryCodes.join(`
`))}).catch(U=>{F.value=!1,U.processed||g.value?.showError(U)})}function A(){if(!h.value){g.value?.showMessage("Current password cannot be blank");return}if(w.value)return;const M=h.value;u.value="",h.value="",w.value=!0,o.disable2FA({password:M}).then(()=>{w.value=!1,c.value=!1,g.value?.showMessage("Two-factor authentication has been disabled")}).catch(U=>{w.value=!1,U.processed||g.value?.showError(U)})}function $(){if(!h.value){g.value?.showMessage("Current password cannot be blank");return}if(m.value)return;const M=h.value;u.value="",h.value="",m.value=!0,o.regenerate2FARecoveryCode({password:M}).then(U=>{m.value=!1,u.value=U.recoveryCodes.join(`
`)}).catch(U=>{m.value=!1,U.processed||g.value?.showError(U)})}function I(){y.value="",k.value="",h.value="",d.value="",u.value="",C.value=!1,F.value=!1,w.value=!1,m.value=!1}function z(){kn(u.value),g.value?.showMessage("Backup codes copied")}return T({reset:I}),x(),(M,U)=>(l(),b(ue,null,[t(Ae,null,{default:a(()=>[t(R,{cols:"12"},{default:a(()=>[t(Ee,{class:be({disabled:v.value})},{title:a(()=>[s("span",null,i(e(n)("Two-Factor Authentication")),1),v.value?(l(),p(je,{key:0,indeterminate:"",size:"20",class:"ms-3"})):r("",!0)]),default:a(()=>[t(ve,{class:"pb-0"},{default:a(()=>[v.value?(l(),p(ut,{key:0,class:"skeleton-no-margin pt-2 pb-5",type:"text",style:{width:"150px"},loading:!0})):r("",!0),!v.value&&!k.value?(l(),b("p",LT,i(c.value===!0?e(n)("Two-factor authentication is already enabled."):e(n)("Two-factor authentication is not enabled yet.")),1)):r("",!0),!v.value&&k.value?(l(),b("p",RT,i(e(n)("Please use a two-factor authentication app to scan the qrcode below and enter the current passcode.")),1)):r("",!0),!v.value&&c.value===!0?(l(),b("p",zT,i(e(n)("Your current password is required to disable two-factor authentication or regenerate backup codes for two-factor authentication. If you regenerate backup codes, the previous ones will become invalid.")),1)):r("",!0)]),_:1}),c.value===!1&&k.value?(l(),p(ve,{key:0},{default:a(()=>[t(ht,{alt:"qrcode",class:"img-qrcode",src:k.value},null,8,["src"]),t(Ae,{class:"mb-3"},{default:a(()=>[t(R,{cols:"12",md:"3"},{default:a(()=>[t(dt,{type:"number",autocomplete:"one-time-code",variant:"underlined",disabled:v.value||C.value||F.value||w.value,placeholder:e(n)("Passcode"),modelValue:d.value,"onUpdate:modelValue":U[0]||(U[0]=X=>d.value=X),onKeyup:Wt(N,["enter"])},null,8,["disabled","placeholder","modelValue"])]),_:1})]),_:1})]),_:1})):r("",!0),c.value===!0?(l(),p(ve,{key:1,class:"pb-0"},{default:a(()=>[t(Ae,{class:"mb-3"},{default:a(()=>[t(R,{cols:"12",md:"6"},{default:a(()=>[t(dt,{autocomplete:"current-password",type:"password",variant:"underlined",disabled:v.value||C.value||F.value||w.value,placeholder:e(n)("Current Password"),modelValue:h.value,"onUpdate:modelValue":U[1]||(U[1]=X=>h.value=X)},null,8,["disabled","placeholder","modelValue"])]),_:1})]),_:1})]),_:1})):r("",!0),t(ve,null,{default:a(()=>[t(Ae,null,{default:a(()=>[t(R,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:a(()=>[c.value===!0?(l(),p(H,{key:0,disabled:!h.value||v.value||w.value,onClick:A},{default:a(()=>[j(i(e(n)("Disable Two-Factor Authentication"))+" ",1),w.value?(l(),p(je,{key:0,indeterminate:"",size:"22",class:"ms-2"})):r("",!0)]),_:1},8,["disabled"])):r("",!0),c.value===!0?(l(),p(H,{key:1,disabled:!h.value||v.value||m.value,onClick:U[2]||(U[2]=X=>$())},{default:a(()=>[j(i(e(n)("Regenerate Backup Codes"))+" ",1),m.value?(l(),p(je,{key:0,indeterminate:"",size:"22",class:"ms-2"})):r("",!0)]),_:1},8,["disabled"])):r("",!0),c.value===!1&&!k.value?(l(),p(H,{key:2,disabled:v.value||C.value,onClick:S},{default:a(()=>[j(i(e(n)("Enable Two-Factor Authentication"))+" ",1),C.value?(l(),p(je,{key:0,indeterminate:"",size:"22",class:"ms-2"})):r("",!0)]),_:1},8,["disabled"])):r("",!0),c.value===!1&&k.value?(l(),p(H,{key:3,disabled:!d.value||v.value||F.value,onClick:N},{default:a(()=>[j(i(e(n)("Continue"))+" ",1),F.value?(l(),p(je,{key:0,indeterminate:"",size:"22",class:"ms-2"})):r("",!0)]),_:1},8,["disabled"])):r("",!0)]),_:1})]),_:1})]),_:1})]),_:1},8,["class"])]),_:1}),t(R,{cols:"12"},{default:a(()=>[u.value?(l(),p(Ee,{key:0},{title:a(()=>[s("span",null,i(e(n)("Backup Code")),1),t(H,{density:"compact",color:"default",variant:"text",size:"24",class:"ms-2",icon:!0,onClick:z},{default:a(()=>[t(se,{icon:e(Sr),size:"20"},null,8,["icon"]),t(yt,{activator:"parent"},{default:a(()=>[j(i(e(n)("Copy")),1)]),_:1})]),_:1})]),default:a(()=>[t(ve,null,{default:a(()=>[c.value===!0?(l(),b("p",OT,i(e(n)("Please copy these backup codes to safe place, the following backup codes will be displayed only once. If these codes were lost, you can regenerate them at any time.")),1)):r("",!0),t(La,{class:"backup-code",readonly:!0,rows:10,value:u.value},null,8,["value"])]),_:1})]),_:1})):r("",!0)]),_:1})]),_:1}),t(mt,{ref_key:"snackbar",ref:g},null,512)],64))}}),qT={class:"d-flex align-center"},HT={class:"d-flex align-center"},YT={class:"me-3"},WT={class:"d-flex flex-column"},KT={class:"text-caption"},GT={key:1,class:"text-xl"},JT={class:"text-body-1"},ZT={class:"text-error"},QT={class:"text-body-1 text-error"},XT=Pe({__name:"UserDataManagementSettingTab",setup(f){const{tt:T}=Oe(),{dataStatistics:n,displayDataStatistics:o,getExportFileName:g}=qd(),c=qa(),v=ra(),y=xe("confirmDialog"),k=xe("snackbar"),h=L(!0),d=L(!1),u=L(""),C=L(!1);function F(S){h.value=!0,v.getUserDataStatistics().then(N=>{S&&(eo(n.value,N)?k.value?.showMessage("Data is up to date"):k.value?.showMessage("Data has been updated")),n.value=N,h.value=!1}).catch(N=>{h.value=!1,N.processed||k.value?.showError(N)})}function w(S){d.value||(d.value=!0,v.getExportedUserData(S).then(N=>{Ml(g(S),N),d.value=!1}).catch(N=>{d.value=!1,N.processed||k.value?.showError(N)}))}function m(){if(!u.value){k.value?.showMessage("Current password cannot be blank");return}C.value||y.value?.open("Are you sure you want to clear all transactions?",{color:"error"}).then(()=>{C.value=!0,c.clearAllUserTransactions({password:u.value}).then(()=>{C.value=!1,u.value="",k.value?.showMessage("All transactions has been cleared"),F(!1)}).catch(S=>{C.value=!1,S.processed||k.value?.showError(S)})})}function x(){if(!u.value){k.value?.showMessage("Current password cannot be blank");return}C.value||y.value?.open("Are you sure you want to clear all data?",{color:"error"}).then(()=>{C.value=!0,c.clearAllUserData({password:u.value}).then(()=>{C.value=!1,u.value="",k.value?.showMessage("All user data has been cleared"),F(!1)}).catch(S=>{C.value=!1,S.processed||k.value?.showError(S)})})}return F(!1),(S,N)=>(l(),b(ue,null,[t(Ae,null,{default:a(()=>[t(R,{cols:"12"},{default:a(()=>[t(Ee,{class:be({disabled:h.value})},{title:a(()=>[s("div",qT,[s("span",null,i(e(T)("Data Management")),1),t(H,{density:"compact",color:"default",variant:"text",size:"24",class:"ms-2",icon:!0,loading:h.value,onClick:N[0]||(N[0]=A=>F(!0))},{loader:a(()=>[t(je,{indeterminate:"",size:"20"})]),default:a(()=>[t(se,{icon:e(wa),size:"24"},null,8,["icon"]),t(yt,{activator:"parent"},{default:a(()=>[j(i(e(T)("Refresh")),1)]),_:1})]),_:1},8,["loading"])])]),default:a(()=>[t(ve,null,{default:a(()=>[t(Ae,null,{default:a(()=>[(l(!0),b(ue,null,$e([{title:"Transactions",count:e(o)?e(o).totalTransactionCount:"-",icon:e(hl),color:"info-darken-1"},{title:"Accounts",count:e(o)?e(o).totalAccountCount:"-",icon:e(Do),color:"primary"},{title:"Transaction Categories",count:e(o)?e(o).totalTransactionCategoryCount:"-",icon:e(ws),color:"teal"},{title:"Transaction Tags",count:e(o)?e(o).totalTransactionTagCount:"-",icon:e(As),color:"grey"},{title:"Transaction Pictures",count:e(o)?e(o).totalTransactionPictureCount:"-",icon:e(Vr),color:"error-darken-1"},{title:"Transaction Templates",count:e(o)?e(o).totalTransactionTemplateCount:"-",icon:e(Is),color:"secondary-darken-1"},{title:"Scheduled Transactions",count:e(o)?e(o).totalScheduledTransactionCount:"-",icon:e(Ss),color:"success-darken-1"}],(A,$)=>(l(),p(R,{cols:"6",sm:"3",key:$},{default:a(()=>[s("div",HT,[s("div",YT,[t(Za,{rounded:"",color:A.color,size:"42",class:"elevation-1"},{default:a(()=>[t(se,{size:"24",icon:A.icon},null,8,["icon"])]),_:2},1032,["color"])]),s("div",WT,[s("span",KT,i(e(T)(A.title)),1),h.value?(l(),p(ut,{key:0,class:"skeleton-no-margin pt-2 pb-2",type:"text",style:{width:"60px"},loading:!0})):r("",!0),h.value?r("",!0):(l(),b("span",GT,i(A.count),1))])])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1},8,["class"])]),_:1}),e(So)()?(l(),p(R,{key:0,cols:"12"},{default:a(()=>[t(Ee,{class:be({disabled:d.value}),title:e(T)("Export Data")},{default:a(()=>[t(ve,null,{default:a(()=>[s("span",JT,i(e(T)("Export all transaction data to file."))+" "+i(e(T)("It may take a long time, please wait for a few minutes.")),1)]),_:1}),t(ve,{class:"d-flex flex-wrap gap-4"},{default:a(()=>[t(ln,{variant:"elevated",density:"comfortable",color:"primary"},{default:a(()=>[t(H,{disabled:h.value||d.value||!e(n)||!e(n).totalTransactionCount||e(n).totalTransactionCount==="0"},{default:a(()=>[j(i(e(T)("Export Data"))+" ",1),d.value?(l(),p(je,{key:0,indeterminate:"",size:"22",class:"ms-2"})):r("",!0),t(nt,{activator:"parent"},{default:a(()=>[t(ze,{disabled:h.value||d.value||!e(n)||!e(n).totalTransactionCount||e(n).totalTransactionCount==="0"},{default:a(()=>[t(le,{onClick:N[1]||(N[1]=A=>w("csv"))},{default:a(()=>[t(ot,null,{default:a(()=>[j(i(e(T)("CSV (Comma-separated values) File")),1)]),_:1})]),_:1}),t(le,{onClick:N[2]||(N[2]=A=>w("tsv"))},{default:a(()=>[t(ot,null,{default:a(()=>[j(i(e(T)("TSV (Tab-separated values) File")),1)]),_:1})]),_:1})]),_:1},8,["disabled"])]),_:1})]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["class","title"])]),_:1})):r("",!0),t(R,{cols:"12"},{default:a(()=>[t(Ee,{class:be({disabled:C.value})},{title:a(()=>[s("span",ZT,i(e(T)("Danger Zone")),1)]),default:a(()=>[t(ve,{class:"py-0"},{default:a(()=>[s("span",QT,[t(se,{class:"mt-n1",icon:e($r)},null,8,["icon"]),j(" "+i(e(T)('You CANNOT undo this action. "Clear All Transactions" will clear all your transactions data, and "Clear All Data" will clear your accounts, categories, tags and transactions data. Please enter your current password to confirm.')),1)])]),_:1}),t(ve,{class:"pb-0"},{default:a(()=>[t(Ae,{class:"mb-3"},{default:a(()=>[t(R,{cols:"12",md:"6"},{default:a(()=>[t(dt,{autocomplete:"current-password",ref:"currentPasswordInput",type:"password",variant:"underlined",color:"error",disabled:h.value||C.value,placeholder:e(T)("Current Password"),modelValue:u.value,"onUpdate:modelValue":N[3]||(N[3]=A=>u.value=A)},null,8,["disabled","placeholder","modelValue"])]),_:1})]),_:1})]),_:1}),t(ve,{class:"d-flex flex-wrap gap-4"},{default:a(()=>[t(H,{color:"error",disabled:h.value||!u.value||C.value},{default:a(()=>[j(i(e(T)("Clear User Data"))+" ",1),C.value?(l(),p(je,{key:0,indeterminate:"",size:"22",class:"ms-2"})):r("",!0),t(nt,{activator:"parent"},{default:a(()=>[t(ze,{disabled:h.value||!u.value||C.value},{default:a(()=>[t(le,{onClick:m},{default:a(()=>[t(ot,null,{default:a(()=>[j(i(e(T)("Clear All Transactions")),1)]),_:1})]),_:1}),t(le,{onClick:x},{default:a(()=>[t(ot,null,{default:a(()=>[j(i(e(T)("Clear All Data")),1)]),_:1})]),_:1})]),_:1},8,["disabled"])]),_:1})]),_:1},8,["disabled"])]),_:1})]),_:1},8,["class"])]),_:1})]),_:1}),t(pa,{ref_key:"confirmDialog",ref:y},null,512),t(mt,{ref_key:"snackbar",ref:k},null,512)],64))}}),e0=Pe({__name:"UserSettingsPage",props:{initTab:{}},setup(f){const T=f,n=Oa(),{tt:o}=Oe(),g=["basicSetting","securitySetting","twoFactorSetting","dataManagementSetting"],c=xe("twoFactorSettingTab"),v=L((()=>{let k=T.initTab||"basicSetting";return g.indexOf(k)<0&&(k="basicSetting"),k})()),y=k=>{n.push(`/user/settings?tab=${k}`)};return ao(k=>{k.query&&k.query.tab&&g.indexOf(k.query.tab)>=0?v.value=k.query.tab:v.value="basicSetting"}),Ft(v,(k,h)=>{h==="twoFactorSetting"&&k!=="twoFactorSetting"&&c.value?.reset()}),(k,h)=>(l(),b("div",null,[t(Xa,{"show-arrows":"",modelValue:v.value,"onUpdate:modelValue":h[4]||(h[4]=d=>v.value=d)},{default:a(()=>[t(qt,{value:"basicSetting",onClick:h[0]||(h[0]=d=>y("basicSetting"))},{default:a(()=>[t(se,{size:"20",start:"",icon:e(Dr)},null,8,["icon"]),j(" "+i(e(o)("Basic")),1)]),_:1}),t(qt,{value:"securitySetting",onClick:h[1]||(h[1]=d=>y("securitySetting"))},{default:a(()=>[t(se,{size:"20",start:"",icon:e(qs)},null,8,["icon"]),j(" "+i(e(o)("Security")),1)]),_:1}),t(qt,{value:"twoFactorSetting",onClick:h[2]||(h[2]=d=>y("twoFactorSetting"))},{default:a(()=>[t(se,{size:"20",start:"",icon:e(Fs)},null,8,["icon"]),j(" "+i(e(o)("Two-Factor Authentication")),1)]),_:1}),t(qt,{value:"dataManagementSetting",onClick:h[3]||(h[3]=d=>y("dataManagementSetting"))},{default:a(()=>[t(se,{size:"20",start:"",icon:e(Fr)},null,8,["icon"]),j(" "+i(e(o)("Data Management")),1)]),_:1})]),_:1},8,["modelValue"]),t(ja,{class:"mt-4 disable-tab-transition",modelValue:v.value,"onUpdate:modelValue":h[5]||(h[5]=d=>v.value=d)},{default:a(()=>[t(Pt,{value:"basicSetting"},{default:a(()=>[t(dT)]),_:1}),t(Pt,{value:"securitySetting"},{default:a(()=>[t(BT)]),_:1}),t(Pt,{value:"twoFactorSetting"},{default:a(()=>[t(jT,{ref_key:"twoFactorSettingTab",ref:c},null,512)]),_:1}),t(Pt,{value:"dataManagementSetting"},{default:a(()=>[t(XT)]),_:1})]),_:1},8,["modelValue"])]))}}),t0=Pe({__name:"AppBasicSettingTab",setup(f){const T=Ot(),{tt:n,getAllEnableDisableOptions:o}=Oe(),{loadingAccounts:g,loadingTransactionCategories:c,allThemes:v,allTimezones:y,allTimezoneTypesUsedForStatistics:k,allCurrencySortingTypes:h,allAutoSaveTransactionDraftTypes:d,hasAnyAccount:u,hasAnyVisibleAccount:C,hasAnyTransactionCategory:F,timeZone:w,isAutoUpdateExchangeRatesData:m,showAccountBalance:x,showAmountInHomePage:S,itemsCountInTransactionListPage:N,timezoneUsedForStatisticsInHomePage:A,showTotalAmountInTransactionListPage:$,showTagInTransactionListPage:I,autoSaveTransactionDraft:z,isAutoGetCurrentGeoLocation:M,currencySortByInExchangeRatesPage:U,accountsIncludedInHomePageOverviewDisplayContent:X,accountsIncludedInTotalDisplayContent:Z,transactionCategoriesIncludedInHomePageOverviewDisplayContent:q}=Hd(),O=Ha(),V=_a(),_=Ta(),D=xe("snackbar"),P=L(!1),W=L(!1),ne=L(!1),de=B(()=>o()),J=B({get:()=>O.appSettings.theme,set:fe=>{fe!==O.appSettings.theme&&(O.setTheme(fe),fe===wt.Light||fe===wt.Dark?T.change(fe):T.change(zo()))}}),Y=B({get:()=>O.appSettings.showAddTransactionButtonInDesktopNavbar,set:fe=>O.setShowAddTransactionButtonInDesktopNavbar(fe)});function ie(){g.value=!0,V.loadAllAccounts({force:!1}).then(()=>{g.value=!1}).catch(fe=>{g.value=!1,fe.processed||D.value?.showError(fe)}),_.loadAllCategories({force:!1}).then(()=>{c.value=!1}).catch(fe=>{c.value=!1,fe.processed||D.value?.showError(fe)})}return ie(),(fe,te)=>(l(),b(ue,null,[t(Ae,null,{default:a(()=>[t(R,{cols:"12"},{default:a(()=>[t(Ee,{title:e(n)("Basic Settings")},{default:a(()=>[t(zt,null,{default:a(()=>[t(ve,null,{default:a(()=>[t(Ae,null,{default:a(()=>[t(R,{cols:"12",md:"6"},{default:a(()=>[t(Je,{"item-title":"name","item-value":"value","persistent-placeholder":"",label:e(n)("Theme"),placeholder:e(n)("Theme"),items:e(v),modelValue:J.value,"onUpdate:modelValue":te[0]||(te[0]=K=>J.value=K)},null,8,["label","placeholder","items","modelValue"])]),_:1}),t(R,{cols:"12",md:"6"},{default:a(()=>[t(sa,{"item-title":"displayNameWithUtcOffset","item-value":"name","auto-select-first":"","persistent-placeholder":"",label:e(n)("Timezone"),placeholder:e(n)("Timezone"),items:e(y),"no-data-text":e(n)("No results"),modelValue:e(w),"onUpdate:modelValue":te[1]||(te[1]=K=>vt(w)?w.value=K:null)},null,8,["label","placeholder","items","no-data-text","modelValue"])]),_:1}),t(R,{cols:"12",md:"6"},{default:a(()=>[t(Je,{"item-title":"displayName","item-value":"value","persistent-placeholder":"",label:e(n)("Auto-update Exchange Rates Data"),placeholder:e(n)("Auto-update Exchange Rates Data"),items:de.value,modelValue:e(m),"onUpdate:modelValue":te[2]||(te[2]=K=>vt(m)?m.value=K:null)},null,8,["label","placeholder","items","modelValue"])]),_:1}),t(R,{cols:"12",md:"6"},{default:a(()=>[t(Je,{"item-title":"displayName","item-value":"value","persistent-placeholder":"",label:e(n)("Show Account Balance"),placeholder:e(n)("Show Account Balance"),items:de.value,modelValue:e(x),"onUpdate:modelValue":te[3]||(te[3]=K=>vt(x)?x.value=K:null)},null,8,["label","placeholder","items","modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["title"])]),_:1}),t(R,{cols:"12"},{default:a(()=>[t(Ee,{title:e(n)("Navigation Bar")},{default:a(()=>[t(zt,null,{default:a(()=>[t(ve,null,{default:a(()=>[t(Ae,null,{default:a(()=>[t(R,{cols:"12",md:"6"},{default:a(()=>[t(Je,{"item-title":"displayName","item-value":"value","persistent-placeholder":"",label:e(n)("Show Add Transaction Button"),placeholder:e(n)("Show Add Transaction Button"),items:de.value,modelValue:Y.value,"onUpdate:modelValue":te[4]||(te[4]=K=>Y.value=K)},null,8,["label","placeholder","items","modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["title"])]),_:1}),t(R,{cols:"12"},{default:a(()=>[t(Ee,{title:e(n)("Overview Page")},{default:a(()=>[t(zt,null,{default:a(()=>[t(ve,null,{default:a(()=>[t(Ae,null,{default:a(()=>[t(R,{cols:"12",md:"6"},{default:a(()=>[t(Je,{"item-title":"displayName","item-value":"value","persistent-placeholder":"",label:e(n)("Show Amount"),placeholder:e(n)("Show Amount"),items:de.value,modelValue:e(S),"onUpdate:modelValue":te[5]||(te[5]=K=>vt(S)?S.value=K:null)},null,8,["label","placeholder","items","modelValue"])]),_:1}),t(R,{cols:"12",md:"6"},{default:a(()=>[t(Je,{"item-title":"displayName","item-value":"type","persistent-placeholder":"",label:e(n)("Timezone Used for Statistics"),placeholder:e(n)("Timezone Used for Statistics"),items:e(k),modelValue:e(A),"onUpdate:modelValue":te[6]||(te[6]=K=>vt(A)?A.value=K:null)},null,8,["label","placeholder","items","modelValue"])]),_:1}),t(R,{cols:"12",md:"6"},{default:a(()=>[t(dt,{class:"always-cursor-pointer","item-title":"displayName","item-value":"type","persistent-placeholder":"",loading:e(g),readonly:!0,disabled:!e(u),label:e(n)("Accounts Included in Overview Statistics"),placeholder:e(n)("Accounts Included in Overview Statistics"),"model-value":e(X),onClick:te[7]||(te[7]=K=>P.value=!0)},null,8,["loading","disabled","label","placeholder","model-value"])]),_:1}),t(R,{cols:"12",md:"6"},{default:a(()=>[t(dt,{class:"always-cursor-pointer","item-title":"displayName","item-value":"type","persistent-placeholder":"",loading:e(c),readonly:!0,disabled:!e(F),label:e(n)("Transaction Categories Included in Overview Statistics"),placeholder:e(n)("Transaction Categories Included in Overview Statistics"),"model-value":e(q),onClick:te[8]||(te[8]=K=>W.value=!0)},null,8,["loading","disabled","label","placeholder","model-value"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["title"])]),_:1}),t(R,{cols:"12"},{default:a(()=>[t(Ee,{title:e(n)("Transaction List Page")},{default:a(()=>[t(zt,null,{default:a(()=>[t(ve,null,{default:a(()=>[t(Ae,null,{default:a(()=>[t(R,{cols:"12",md:"6"},{default:a(()=>[t(Je,{"persistent-placeholder":"",label:e(n)("Transactions Per Page"),placeholder:e(n)("Transactions Per Page"),items:[5,10,15,20,25,30,50],modelValue:e(N),"onUpdate:modelValue":te[9]||(te[9]=K=>vt(N)?N.value=K:null)},null,8,["label","placeholder","modelValue"])]),_:1}),t(R,{cols:"12",md:"6"},{default:a(()=>[t(Je,{"item-title":"displayName","item-value":"value","persistent-placeholder":"",label:e(n)("Show Monthly Total Amount"),placeholder:e(n)("Show Monthly Total Amount"),items:de.value,modelValue:e($),"onUpdate:modelValue":te[10]||(te[10]=K=>vt($)?$.value=K:null)},null,8,["label","placeholder","items","modelValue"])]),_:1}),t(R,{cols:"12",md:"6"},{default:a(()=>[t(Je,{"item-title":"displayName","item-value":"value","persistent-placeholder":"",label:e(n)("Show Transaction Tag"),placeholder:e(n)("Show Transaction Tag"),items:de.value,modelValue:e(I),"onUpdate:modelValue":te[11]||(te[11]=K=>vt(I)?I.value=K:null)},null,8,["label","placeholder","items","modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["title"])]),_:1}),t(R,{cols:"12"},{default:a(()=>[t(Ee,{title:e(n)("Transaction Edit Page")},{default:a(()=>[t(zt,null,{default:a(()=>[t(ve,null,{default:a(()=>[t(Ae,null,{default:a(()=>[t(R,{cols:"12",md:"6"},{default:a(()=>[t(Je,{"item-title":"name","item-value":"value","persistent-placeholder":"",label:e(n)("Automatically Save Draft"),placeholder:e(n)("Automatically Save Draft"),items:e(d),modelValue:e(z),"onUpdate:modelValue":te[12]||(te[12]=K=>vt(z)?z.value=K:null)},null,8,["label","placeholder","items","modelValue"])]),_:1}),t(R,{cols:"12",md:"6"},{default:a(()=>[t(Je,{"item-title":"displayName","item-value":"value","persistent-placeholder":"",label:e(n)("Automatically Add Geolocation"),placeholder:e(n)("Automatically Add Geolocation"),items:de.value,modelValue:e(M),"onUpdate:modelValue":te[13]||(te[13]=K=>vt(M)?M.value=K:null)},null,8,["label","placeholder","items","modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["title"])]),_:1}),t(R,{cols:"12"},{default:a(()=>[t(Ee,{title:e(n)("Account List Page")},{default:a(()=>[t(zt,null,{default:a(()=>[t(ve,null,{default:a(()=>[t(Ae,null,{default:a(()=>[t(R,{cols:"12",md:"6"},{default:a(()=>[t(dt,{class:"always-cursor-pointer","item-title":"displayName","item-value":"type","persistent-placeholder":"",loading:e(g),readonly:!0,disabled:!e(C),label:e(n)("Accounts Included in Total"),placeholder:e(n)("Accounts Included in Total"),"model-value":e(Z),onClick:te[14]||(te[14]=K=>ne.value=!0)},null,8,["loading","disabled","label","placeholder","model-value"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["title"])]),_:1}),t(R,{cols:"12"},{default:a(()=>[t(Ee,{title:e(n)("Exchange Rates Data Page")},{default:a(()=>[t(zt,null,{default:a(()=>[t(ve,null,{default:a(()=>[t(Ae,null,{default:a(()=>[t(R,{cols:"12",md:"6"},{default:a(()=>[t(Je,{"item-title":"displayName","item-value":"type","persistent-placeholder":"",label:e(n)("Sort by"),placeholder:e(n)("Sort by"),items:e(h),modelValue:e(U),"onUpdate:modelValue":te[15]||(te[15]=K=>vt(U)?U.value=K:null)},null,8,["label","placeholder","items","modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["title"])]),_:1})]),_:1}),t(Tt,{width:"800",modelValue:P.value,"onUpdate:modelValue":te[17]||(te[17]=K=>P.value=K)},{default:a(()=>[t(Xl,{type:"homePageOverview","dialog-mode":!0,"onSettings:change":te[16]||(te[16]=K=>P.value=!1)})]),_:1},8,["modelValue"]),t(Tt,{width:"800",modelValue:W.value,"onUpdate:modelValue":te[19]||(te[19]=K=>W.value=K)},{default:a(()=>[t(no,{type:"homePageOverview","dialog-mode":!0,"category-types":`${e(tt).Income},${e(tt).Expense}`,"onSettings:change":te[18]||(te[18]=K=>W.value=!1)},null,8,["category-types"])]),_:1},8,["modelValue"]),t(Tt,{width:"800",modelValue:ne.value,"onUpdate:modelValue":te[21]||(te[21]=K=>ne.value=K)},{default:a(()=>[t(Xl,{type:"accountListTotalAmount","dialog-mode":!0,"onSettings:change":te[20]||(te[20]=K=>ne.value=!1)})]),_:1},8,["modelValue"]),t(mt,{ref_key:"snackbar",ref:D},null,512)],64))}}),a0={key:0,class:"text-body-1 font-weight-semibold"},l0={key:1,class:"text-body-1"},n0={key:0,class:"text-body-1 font-weight-semibold"},o0={key:1,class:"text-body-1 font-weight-semibold"},s0={style:{"max-width":"428px"}},i0=Pe({__name:"AppLockSettingTab",setup(f){const{tt:T}=Oe(),{isSupportedWebAuthn:n,isEnableApplicationLock:o,isEnableApplicationLockWebAuthn:g}=Yd(),c=Ha(),v=ra(),y=xe("snackbar"),k=L(""),h=L(!1),d=Nl(),u=B(()=>k.value?.length===6||!1);function C(){o.value?w():F()}function F(){if(c.appSettings.applicationLock){y.value?.showMessage("Application lock has been enabled");return}if(!k.value||k.value.length!==6){k.value="",y.value?.showMessage("Invalid PIN code");return}const m=v.currentUserBasicInfo;if(!m||!m.username){k.value="",y.value?.showMessage("An error occurred");return}Wd(m.username,k.value),c.setEnableApplicationLock(!0),d.saveTransactionDraft(),c.setEnableApplicationLockWebAuthn(!1),Pn(),k.value=""}function w(){if(!c.appSettings.applicationLock){y.value?.showMessage("Application lock is not enabled");return}if(!Kd(k.value)){k.value="",y.value?.showMessage("Incorrect PIN code");return}k.value="",Gd(),c.setEnableApplicationLock(!1),d.saveTransactionDraft(),c.setEnableApplicationLockWebAuthn(!1),Pn()}return Ft(g,m=>{const x=Jd();m&&x&&v.currentUserBasicInfo?(h.value=!0,Zd(x,v.currentUserBasicInfo).then(({id:S})=>{h.value=!1,Qd(S),c.setEnableApplicationLockWebAuthn(!0),y.value?.showMessage("You have enabled WebAuthn successfully")}).catch(S=>{Xt.error("failed to enable WebAuthn",S),h.value=!1,S.notSupported?y.value?.showMessage("WebAuth is not supported on this device"):S.name==="NotAllowedError"?y.value?.showMessage("User has canceled authentication"):S.invalid?y.value?.showMessage("Failed to enable WebAuthn"):y.value?.showMessage("User has canceled or this device does not support WebAuthn"),g.value=!1,c.setEnableApplicationLockWebAuthn(!1),Pn()})):(c.setEnableApplicationLockWebAuthn(!1),Pn())}),(m,x)=>{const S=Ie("pin-code-input");return l(),b(ue,null,[t(Ae,null,{default:a(()=>[t(R,{cols:"12"},{default:a(()=>[t(Ee,{title:e(T)("Application Lock")},{default:a(()=>[t(ve,{class:"pb-0"},{default:a(()=>[e(o)?r("",!0):(l(),b("p",a0,i(e(T)("Application lock is not enabled")),1)),e(o)?(l(),b("p",l0,i(e(T)("Application lock has been enabled")),1)):r("",!0)]),_:1}),e(o)?(l(),p(ve,{key:0},{default:a(()=>[t(Qa,{disabled:!0,label:e(T)("Unlock with PIN Code"),modelValue:e(o),"onUpdate:modelValue":x[0]||(x[0]=N=>vt(o)?o.value=N:null)},null,8,["label","modelValue"]),e(n)?(l(),p(Qa,{key:0,label:e(T)("Unlock with WebAuthn"),loading:h.value,modelValue:e(g),"onUpdate:modelValue":x[1]||(x[1]=N=>vt(g)?g.value=N:null)},null,8,["label","loading","modelValue"])):r("",!0)]),_:1})):r("",!0),t(ve,{class:"pb-0"},{default:a(()=>[e(o)?r("",!0):(l(),b("p",n0,i(e(T)("Please enter a new 6-digit PIN code. The PIN code would encrypt your local data, so you need to enter it every time you open this app. If this PIN code is lost, you will need to log in again.")),1)),e(o)?(l(),b("p",o0,i(e(T)("Your current PIN code is required to disable application lock.")),1)):r("",!0)]),_:1}),t(ve,{class:"pb-0"},{default:a(()=>[t(Ae,{class:"mb-3"},{default:a(()=>[t(R,{cols:"12",md:"12"},{default:a(()=>[s("div",s0,[t(S,{secure:!0,length:6,modelValue:k.value,"onUpdate:modelValue":x[2]||(x[2]=N=>k.value=N),"onPincode:confirm":C},null,8,["modelValue"])])]),_:1})]),_:1})]),_:1}),t(ve,null,{default:a(()=>[t(Ae,null,{default:a(()=>[t(R,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:a(()=>[e(o)?r("",!0):(l(),p(H,{key:0,disabled:!u.value,onClick:F},{default:a(()=>[j(i(e(T)("Enable Application Lock")),1)]),_:1},8,["disabled"])),e(o)?(l(),p(H,{key:1,disabled:!u.value,onClick:w},{default:a(()=>[j(i(e(T)("Disable Application Lock")),1)]),_:1},8,["disabled"])):r("",!0)]),_:1})]),_:1})]),_:1})]),_:1},8,["title"])]),_:1})]),_:1}),t(mt,{ref_key:"snackbar",ref:y},null,512)],64)}}}),r0=Pe({__name:"AppStatisticsSettingTab",setup(f){const{tt:T}=Oe(),{allChartDataTypes:n,allTimezoneTypesUsedForStatistics:o,allSortingTypes:g,allCategoricalChartTypes:c,allCategoricalChartDateRanges:v,allTrendChartTypes:y,allTrendChartDateRanges:k,allAssetTrendsChartDateRanges:h,defaultChartDataType:d,defaultTimezoneType:u,defaultSortingType:C,defaultCategoricalChartType:F,defaultCategoricalChartDateRange:w,defaultTrendChartType:m,defaultTrendChartDateRange:x,defaultAssetTrendsChartType:S,defaultAssetTrendsChartDateRange:N}=Xd();return(A,$)=>(l(),p(Ae,null,{default:a(()=>[t(R,{cols:"12"},{default:a(()=>[t(Ee,{title:e(T)("Statistics Settings")},{default:a(()=>[t(zt,null,{default:a(()=>[t(ve,null,{default:a(()=>[t(Ae,null,{default:a(()=>[t(R,{cols:"12",md:"6"},{default:a(()=>[t(Je,{"item-title":"displayName","item-value":"type","persistent-placeholder":"",label:e(T)("Default Chart Data Type"),placeholder:e(T)("Default Chart Data Type"),items:e(n),modelValue:e(d),"onUpdate:modelValue":$[0]||($[0]=I=>vt(d)?d.value=I:null)},null,8,["label","placeholder","items","modelValue"])]),_:1}),t(R,{cols:"12",md:"6"},{default:a(()=>[t(Je,{"item-title":"displayName","item-value":"type","persistent-placeholder":"",label:e(T)("Timezone Used for Date Range"),placeholder:e(T)("Timezone Used for Date Range"),items:e(o),modelValue:e(u),"onUpdate:modelValue":$[1]||($[1]=I=>vt(u)?u.value=I:null)},null,8,["label","placeholder","items","modelValue"])]),_:1}),t(R,{cols:"12",md:"6"},{default:a(()=>[t(Je,{"item-title":"displayName","item-value":"type","persistent-placeholder":"",label:e(T)("Default Sort Order"),placeholder:e(T)("Default Sort Order"),items:e(g),modelValue:e(C),"onUpdate:modelValue":$[2]||($[2]=I=>vt(C)?C.value=I:null)},null,8,["label","placeholder","items","modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["title"])]),_:1}),t(R,{cols:"12"},{default:a(()=>[t(Ee,{title:e(T)("Categorical Analysis Settings")},{default:a(()=>[t(zt,null,{default:a(()=>[t(ve,null,{default:a(()=>[t(Ae,null,{default:a(()=>[t(R,{cols:"12",md:"6"},{default:a(()=>[t(Je,{"item-title":"displayName","item-value":"type","persistent-placeholder":"",label:e(T)("Default Chart Type"),placeholder:e(T)("Default Chart Type"),items:e(c),modelValue:e(F),"onUpdate:modelValue":$[3]||($[3]=I=>vt(F)?F.value=I:null)},null,8,["label","placeholder","items","modelValue"])]),_:1}),t(R,{cols:"12",md:"6"},{default:a(()=>[t(Je,{"item-title":"displayName","item-value":"type","persistent-placeholder":"",label:e(T)("Default Date Range"),placeholder:e(T)("Default Date Range"),items:e(v),modelValue:e(w),"onUpdate:modelValue":$[4]||($[4]=I=>vt(w)?w.value=I:null)},null,8,["label","placeholder","items","modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["title"])]),_:1}),t(R,{cols:"12"},{default:a(()=>[t(Ee,{title:e(T)("Trend Analysis Settings")},{default:a(()=>[t(zt,null,{default:a(()=>[t(ve,null,{default:a(()=>[t(Ae,null,{default:a(()=>[t(R,{cols:"12",md:"6"},{default:a(()=>[t(Je,{"item-title":"displayName","item-value":"type","persistent-placeholder":"",label:e(T)("Default Chart Type"),placeholder:e(T)("Default Chart Type"),items:e(y),modelValue:e(m),"onUpdate:modelValue":$[5]||($[5]=I=>vt(m)?m.value=I:null)},null,8,["label","placeholder","items","modelValue"])]),_:1}),t(R,{cols:"12",md:"6"},{default:a(()=>[t(Je,{"item-title":"displayName","item-value":"type","persistent-placeholder":"",label:e(T)("Default Date Range"),placeholder:e(T)("Default Date Range"),items:e(k),modelValue:e(x),"onUpdate:modelValue":$[6]||($[6]=I=>vt(x)?x.value=I:null)},null,8,["label","placeholder","items","modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["title"])]),_:1}),t(R,{cols:"12"},{default:a(()=>[t(Ee,{title:e(T)("Asset Trends Settings")},{default:a(()=>[t(zt,null,{default:a(()=>[t(ve,null,{default:a(()=>[t(Ae,null,{default:a(()=>[t(R,{cols:"12",md:"6"},{default:a(()=>[t(Je,{"item-title":"displayName","item-value":"type","persistent-placeholder":"",label:e(T)("Default Chart Type"),placeholder:e(T)("Default Chart Type"),items:e(y),modelValue:e(S),"onUpdate:modelValue":$[7]||($[7]=I=>vt(S)?S.value=I:null)},null,8,["label","placeholder","items","modelValue"])]),_:1}),t(R,{cols:"12",md:"6"},{default:a(()=>[t(Je,{"item-title":"displayName","item-value":"type","persistent-placeholder":"",label:e(T)("Default Date Range"),placeholder:e(T)("Default Date Range"),items:e(h),modelValue:e(N),"onUpdate:modelValue":$[8]||($[8]=I=>vt(N)?N.value=I:null)},null,8,["label","placeholder","items","modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["title"])]),_:1}),t(R,{cols:"12"},{default:a(()=>[t(Xl,{type:"statisticsDefault","auto-save":!0})]),_:1}),t(R,{cols:"12"},{default:a(()=>[t(no,{type:"statisticsDefault","auto-save":!0})]),_:1})]),_:1}))}}),u0={key:1,class:"text-body-1"},d0={key:2,class:"text-body-1"},c0={class:"d-flex align-center justify-center w-100"},m0={class:"w-100"},p0={key:0,class:"mx-2"},v0={key:1},f0=Pe({__name:"AppCloudSyncSettingTab",setup(f){const{tt:T}=Oe(),{ALL_APPLICATION_CLOUD_SETTINGS:n,loading:o,enabling:g,disabling:c,enabledApplicationCloudSettings:v,isEnableCloudSync:y,hasEnabledApplicationCloudSettings:k,enabledApplicationCloudSettingKeys:h,isAllSettingsSelected:d,hasSettingSelectedButNotAllChecked:u,updateSettingsSelected:C,selectAllSettings:F,selectNoneSettings:w,selectInvertSettings:m,setUserApplicationCloudSettings:x}=ec(),S=ra(),N=xe("snackbar"),A=L(["synchronizedSettings"]);function $(){o.value=!0,S.getUserApplicationCloudSettings().then(M=>{x(M),o.value=!1}).catch(M=>{o.value=!1,M.processed||N.value?.showError(M)})}function I(M){g.value=!0,S.fullUpdateUserApplicationCloudSettings(h.value).then(()=>{g.value=!1,M?N.value?.showMessage("Synchronized settings have been updated"):N.value?.showMessage("Settings sync has been enabled")}).catch(U=>{g.value=!1,U.processed||N.value?.showError(U)})}function z(){c.value=!0,S.disableUserApplicationCloudSettings().then(()=>{v.value={},c.value=!1,N.value?.showMessage("Settings sync has been disabled")}).catch(M=>{c.value=!1,M.processed||N.value?.showError(M)})}return $(),(M,U)=>(l(),b(ue,null,[t(Ae,null,{default:a(()=>[t(R,{cols:"12"},{default:a(()=>[t(Ee,null,{title:a(()=>[s("span",null,i(e(T)("Settings Sync")),1),e(o)?(l(),p(je,{key:0,indeterminate:"",size:"20",class:"ms-3"})):r("",!0)]),default:a(()=>[t(ve,{class:"pb-0"},{default:a(()=>[e(o)?(l(),p(ut,{key:0,class:"skeleton-no-margin pt-2 pb-5",type:"text",style:{width:"150px"},loading:!0})):r("",!0),!e(o)&&!e(y)?(l(),b("p",u0,i(e(T)("Settings sync is not enabled")),1)):r("",!0),!e(o)&&e(y)?(l(),b("p",d0,i(e(T)("Settings sync has been enabled")),1)):r("",!0)]),_:1}),t(ve,null,{default:a(()=>[t(Vl,{class:"synchronized-settings",multiple:"",readonly:!0,"hide-actions":!0,disabled:e(o)||e(g)||e(c),modelValue:A.value,"onUpdate:modelValue":U[0]||(U[0]=X=>A.value=X)},{default:a(()=>[t($l,{class:"border",value:"synchronizedSettings"},{default:a(()=>[t(Dl,{class:"expand-panel-title-with-bg py-0"},{default:a(()=>[s("div",c0,[s("div",m0,[s("span",null,i(e(T)("Synchronized Settings")),1)]),t(H,{density:"comfortable",color:"default",variant:"text",class:"ms-2",disabled:e(o)||e(g)||e(c),icon:!0},{default:a(()=>[t(se,{icon:e(Jt)},null,8,["icon"]),t(nt,{activator:"parent"},{default:a(()=>[t(ze,null,{default:a(()=>[t(le,{disable:e(o)||e(g)||e(c),"prepend-icon":e(ia),title:e(T)("Select All"),onClick:e(F)},null,8,["disable","prepend-icon","title","onClick"]),t(le,{disable:e(o)||e(g)||e(c),"prepend-icon":e(sl),title:e(T)("Select None"),onClick:e(w)},null,8,["disable","prepend-icon","title","onClick"]),t(le,{disable:e(o)||e(g)||e(c),"prepend-icon":e(il),title:e(T)("Invert Selection"),onClick:e(m)},null,8,["disable","prepend-icon","title","onClick"])]),_:1})]),_:1})]),_:1},8,["disabled"])])]),_:1}),t(Fl,null,{default:a(()=>[t(ze,{rounded:"",density:"comfortable",class:"pa-0"},{default:a(()=>[(l(!0),b(ue,null,$e(e(n),(X,Z)=>(l(),b(ue,{key:X.categoryName},[Z>0?(l(),p(Ke,{key:0})):r("",!0),t(le,null,{prepend:a(()=>[t(za,{disabled:e(o)||e(g)||e(c),"model-value":e(d)(X),indeterminate:e(u)(X),"onUpdate:modelValue":q=>e(C)(X,!!q)},{label:a(()=>[s("span",null,i(e(T)(X.categoryName)),1),X.categorySubName?(l(),b("span",p0,"/")):r("",!0),X.categorySubName?(l(),b("span",v0,i(e(T)(X.categorySubName)),1)):r("",!0)]),_:2},1032,["disabled","model-value","indeterminate","onUpdate:modelValue"])]),_:2},1024),t(Ke),t(ze,{rounded:"",density:"comfortable",class:"pa-0 ms-4"},{default:a(()=>[(l(!0),b(ue,null,$e(X.items,(q,O)=>(l(),b(ue,{key:q.settingKey},[O>0?(l(),p(Ke,{key:0})):r("",!0),t(le,null,{prepend:a(()=>[t(za,{disabled:e(o)||e(g)||e(c),"model-value":e(v)[q.settingKey],"onUpdate:modelValue":V=>e(v)[q.settingKey]=!!V},{label:a(()=>[s("span",null,i(e(T)(q.settingName)),1),q.mobile?(l(),p(se,{key:0,class:"ms-2 me-0",start:"",size:"16",icon:e(Fo)},null,8,["icon"])):r("",!0),q.desktop?(l(),p(se,{key:1,class:"ms-2 me-0",start:"",size:"16",icon:e(Nr)},null,8,["icon"])):r("",!0)]),_:2},1032,["disabled","model-value","onUpdate:modelValue"])]),_:2},1024)],64))),128))]),_:2},1024)],64))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["disabled","modelValue"])]),_:1}),t(ve,null,{default:a(()=>[t(Ae,null,{default:a(()=>[t(R,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:a(()=>[e(y)?r("",!0):(l(),p(H,{key:0,disabled:e(o)||e(g)||e(c)||!e(k),onClick:U[1]||(U[1]=X=>I(!1))},{default:a(()=>[j(i(e(T)("Enable Settings Sync"))+" ",1),e(g)?(l(),p(je,{key:0,indeterminate:"",size:"22",class:"ms-2"})):r("",!0)]),_:1},8,["disabled"])),e(y)?(l(),p(H,{key:1,disabled:e(o)||e(g)||e(c)||!e(k),onClick:U[2]||(U[2]=X=>I(!0))},{default:a(()=>[j(i(e(T)("Update Synchronized Settings"))+" ",1),e(g)?(l(),p(je,{key:0,indeterminate:"",size:"22",class:"ms-2"})):r("",!0)]),_:1},8,["disabled"])):r("",!0),e(y)?(l(),p(H,{key:2,disabled:e(o)||e(g)||e(c),onClick:z},{default:a(()=>[j(i(e(T)("Disable Settings Sync"))+" ",1),e(c)?(l(),p(je,{key:0,indeterminate:"",size:"22",class:"ms-2"})):r("",!0)]),_:1},8,["disabled"])):r("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(mt,{ref_key:"snackbar",ref:N},null,512)],64))}}),y0=Pe({__name:"AppSettingsPage",props:{initTab:{}},setup(f){const T=f,n=Oa(),{tt:o}=Oe(),g=["basicSetting","applicationLockSetting","statisticsSetting","cloudSyncSetting"],c=L((()=>{let y=T.initTab||"basicSetting";return g.indexOf(y)<0&&(y="basicSetting"),y})()),v=y=>{n.push(`/app/settings?tab=${y}`)};return ao(y=>{y.query&&y.query.tab&&g.indexOf(y.query.tab)>=0?c.value=y.query.tab:c.value="basicSetting"}),(y,k)=>(l(),b("div",null,[t(Xa,{"show-arrows":"",modelValue:c.value,"onUpdate:modelValue":k[4]||(k[4]=h=>c.value=h)},{default:a(()=>[t(qt,{value:"basicSetting",onClick:k[0]||(k[0]=h=>v("basicSetting"))},{default:a(()=>[t(se,{size:"20",start:"",icon:e(Vs)},null,8,["icon"]),j(" "+i(e(o)("Basic")),1)]),_:1}),t(qt,{value:"applicationLockSetting",onClick:k[1]||(k[1]=h=>v("applicationLockSetting"))},{default:a(()=>[t(se,{size:"20",start:"",icon:e(qs)},null,8,["icon"]),j(" "+i(e(o)("Application Lock")),1)]),_:1}),t(qt,{value:"statisticsSetting",onClick:k[2]||(k[2]=h=>v("statisticsSetting"))},{default:a(()=>[t(se,{size:"20",start:"",icon:e(Cs)},null,8,["icon"]),j(" "+i(e(o)("Statistics")),1)]),_:1}),t(qt,{value:"cloudSyncSetting",onClick:k[3]||(k[3]=h=>v("cloudSyncSetting"))},{default:a(()=>[t(se,{size:"20",start:"",icon:e(Mr)},null,8,["icon"]),j(" "+i(e(o)("Settings Sync")),1)]),_:1})]),_:1},8,["modelValue"]),t(ja,{class:"mt-4 disable-tab-transition",modelValue:c.value,"onUpdate:modelValue":k[5]||(k[5]=h=>c.value=h)},{default:a(()=>[t(Pt,{value:"basicSetting"},{default:a(()=>[t(t0)]),_:1}),t(Pt,{value:"applicationLockSetting"},{default:a(()=>[t(i0)]),_:1}),t(Pt,{value:"statisticsSetting"},{default:a(()=>[t(r0)]),_:1}),t(Pt,{value:"cloudSyncSetting"},{default:a(()=>[t(f0)]),_:1})]),_:1},8,["modelValue"])]))}}),g0={class:"d-flex align-center justify-center"},h0={class:"d-flex w-100 align-center justify-center"},b0={class:"text-h4"},k0={class:"w-100 d-flex justify-center gap-4"},_0=Pe({__name:"UpdateDialog",props:{show:{type:Boolean}},setup(f,{expose:T}){const{tt:n}=Oe(),o=ra(),g=Ko(),c=L(!1),v=L(!1),y=L(o.currentUserDefaultCurrency),k=L(1),h=L(o.currentUserDefaultCurrency),d=L(1),u=xe("snackbar");let C=null,F=null;function w(){return c.value=!0,k.value=1,h.value=o.currentUserDefaultCurrency,d.value=1,new Promise((S,N)=>{C=S,F=N})}function m(){v.value=!0,g.updateUserCustomExchangeRate({currency:h.value,rate:d.value/k.value}).then(()=>{v.value=!1,C?.({message:"You have updated exchange rate"}),c.value=!1}).catch(S=>{v.value=!1,S.processed||u.value?.showError(S)})}function x(){F?.(),c.value=!1}return T({open:w}),(S,N)=>{const A=Ie("number-input"),$=Ie("currency-select");return l(),b(ue,null,[t(Tt,{width:"800",persistent:v.value||!!k.value&&k.value!==1||h.value!==y.value||!!d.value&&d.value!==1,modelValue:c.value,"onUpdate:modelValue":N[4]||(N[4]=I=>c.value=I)},{default:a(()=>[t(Ee,{class:"pa-2 pa-sm-4 pa-md-4"},{title:a(()=>[s("div",g0,[s("div",h0,[s("h4",b0,i(e(n)("Update User Custom Exchange Rate")),1)])])]),default:a(()=>[t(ve,{class:"my-md-4 w-100 d-flex justify-center"},{default:a(()=>[t(Ae,null,{default:a(()=>[t(R,{cols:"12",md:"6"},{default:a(()=>[t(A,{disabled:v.value,label:e(n)("Amount"),placeholder:e(n)("Amount"),"persistent-placeholder":!0,"min-value":e(gs),"max-value":e(ys),"max-decimal-count":4,modelValue:k.value,"onUpdate:modelValue":N[0]||(N[0]=I=>k.value=I)},null,8,["disabled","label","placeholder","min-value","max-value","modelValue"])]),_:1}),t(R,{cols:"12",md:"6"},{default:a(()=>[t($,{disabled:!0,label:e(n)("Currency"),placeholder:e(n)("Currency"),modelValue:y.value,"onUpdate:modelValue":N[1]||(N[1]=I=>y.value=I)},null,8,["label","placeholder","modelValue"])]),_:1}),t(R,{cols:"12",class:"text-center my-2"},{default:a(()=>[t(se,{icon:e(Er),size:"24"},null,8,["icon"])]),_:1}),t(R,{cols:"12",md:"6"},{default:a(()=>[t(A,{disabled:v.value,label:e(n)("Amount"),placeholder:e(n)("Amount"),"persistent-placeholder":!0,"min-value":e(gs),"max-value":e(ys),"max-decimal-count":4,modelValue:d.value,"onUpdate:modelValue":N[2]||(N[2]=I=>d.value=I)},null,8,["disabled","label","placeholder","min-value","max-value","modelValue"])]),_:1}),t(R,{cols:"12",md:"6"},{default:a(()=>[t($,{disabled:v.value,label:e(n)("Currency"),placeholder:e(n)("Currency"),modelValue:h.value,"onUpdate:modelValue":N[3]||(N[3]=I=>h.value=I)},null,8,["disabled","label","placeholder","modelValue"])]),_:1})]),_:1})]),_:1}),t(ve,{class:"overflow-y-visible"},{default:a(()=>[s("div",k0,[t(H,{disabled:v.value||!k.value||!h.value||!d.value,onClick:m},{default:a(()=>[j(i(e(n)("OK"))+" ",1),v.value?(l(),p(je,{key:0,indeterminate:"",size:"22",class:"ms-2"})):r("",!0)]),_:1},8,["disabled"]),t(H,{color:"secondary",variant:"tonal",disabled:v.value,onClick:x},{default:a(()=>[j(i(e(n)("Cancel")),1)]),_:1},8,["disabled"])])]),_:1})]),_:1})]),_:1},8,["persistent","modelValue"]),t(mt,{ref_key:"snackbar",ref:u},null,512)],64)}}}),T0={class:"mx-6 my-4"},x0={class:"text-subtitle-2"},C0={class:"text-body-1 mt-1 mb-3"},w0=["href"],A0={key:1},I0={key:2},S0={key:3},V0={key:4},$0={key:0,class:"text-subtitle-2"},D0={key:1,class:"text-body-1 mt-1"},F0={key:0},N0={key:1},M0={class:"mx-6 mt-4"},E0={class:"text-subtitle-2"},U0={class:"mx-6 mt-4"},P0={class:"text-subtitle-2"},B0={class:"d-flex w-100"},L0={class:"d-block text-truncate"},R0={class:"smaller ms-1"},z0={key:1,class:"mx-6 mt-2 mb-4"},O0={key:0},j0={key:1},q0={class:"title-and-toolbar d-flex align-center"},H0={class:"d-flex align-center"},Y0={class:"px-0"},W0={key:0},K0={class:"d-flex align-center"},G0={class:"text-sm"},J0={class:"text-caption ms-1"},Z0={class:"ms-3"},Q0=Pe({__name:"ListPage",setup(f){const{mdAndUp:T}=tn(),{tt:n,getCurrentNumeralSystemType:o,formatExchangeRateAmountToWesternArabicNumerals:g}=Oe(),{baseCurrency:c,baseAmount:v,defaultCurrency:y,exchangeRatesData:k,isUserCustomExchangeRates:h,exchangeRatesDataUpdateTime:d,availableExchangeRates:u,getConvertedAmount:C,setAsBaseline:F}=tc(),w=Ko(),m=xe("confirmDialog"),x=xe("snackbar"),S=xe("updateDialog"),N=L("exchangeRatesPage"),A=L(!0),$=L(!1),I=L({}),z=L(T.value),M=L(T.value),U=B(()=>o());function X(V){A.value=!0,w.getLatestExchangeRates({silent:!1,force:V}).then(()=>{if(A.value=!1,k.value&&k.value.exchangeRates){const _=k.value.exchangeRates;let D=!1;for(const P of _)if(P.currency===c.value){D=!0;break}V?x.value?.showMessage("Exchange rates data has been updated"):D||x.value?.showMessage("There is no exchange rates data for your default currency")}}).catch(_=>{A.value=!1,_.processed||x.value?.showError(_)})}function Z(){S.value?.open().then(V=>{V&&V.message&&x.value?.showMessage(V.message)}).catch(V=>{V&&x.value?.showError(V)})}function q(V){m.value?.open("Are you sure you want to delete this user custom exchange rate?").then(()=>{$.value=!0,I.value[V]=!0,w.deleteUserCustomExchangeRate({currency:V}).then(()=>{V===c.value&&(c.value=y.value),$.value=!1,I.value[V]=!1}).catch(_=>{$.value=!1,I.value[V]=!1,_.processed||x.value?.showError(_)})})}function O(V,_){if(!c.value)return _?U.value.digitZero:Al.WesternArabicNumerals.digitZero;const D=w.latestExchangeRateMap[c.value];let P=0;try{P=C(v.value/100,D,V)}catch(ne){P=0,Xt.warn("failed to convert amount by exchange rates, original base amount is "+v.value,ne)}if(!P)return _?U.value.digitZero:Al.WesternArabicNumerals.digitZero;let W=g(P);return _&&(W=U.value.replaceWesternArabicDigitsToLocalizedDigits(W)),W}return Ft(T,V=>{z.value=V,M.value||(M.value=V)}),X(!1),(V,_)=>{const D=Ie("amount-input");return l(),b(ue,null,[t(Ae,{class:"match-height"},{default:a(()=>[t(R,{cols:"12"},{default:a(()=>[t(Ee,null,{default:a(()=>[t(nn,null,{default:a(()=>[t(on,{permanent:z.value,modelValue:M.value,"onUpdate:modelValue":_[2]||(_[2]=P=>M.value=P)},{default:a(()=>[s("div",T0,[s("span",x0,i(e(n)("Data source")),1),s("p",C0,[!A.value&&e(k)&&!e(h)&&e(k).referenceUrl?(l(),b("a",{key:0,tabindex:"-1",target:"_blank",href:e(k).referenceUrl},i(e(k).dataSource),9,w0)):!A.value&&e(k)&&!e(h)&&!e(k).referenceUrl?(l(),b("span",A0,i(e(k).dataSource),1)):!A.value&&e(k)&&e(h)?(l(),b("span",I0,i(e(n)("User Custom")),1)):!A.value&&!e(k)?(l(),b("span",S0,i(e(n)("None")),1)):A.value?(l(),b("span",V0,[t(ut,{class:"skeleton-no-margin mt-3 mb-4",type:"text",loading:!0})])):r("",!0)]),e(d)||A.value?(l(),b("span",$0,i(e(n)("Last Updated")),1)):r("",!0),e(d)||A.value?(l(),b("p",D0,[A.value?r("",!0):(l(),b("span",F0,i(e(d)),1)),A.value?(l(),b("span",N0,[t(ut,{class:"skeleton-no-margin mt-3 mb-4",type:"text",loading:!0})])):r("",!0)])):r("",!0)]),t(Ke),s("div",M0,[s("span",E0,i(e(n)("Base Amount")),1),t(D,{class:"mt-2",density:"compact",currency:e(c),disabled:A.value||!e(k)||!e(k).exchangeRates||!e(k).exchangeRates.length,modelValue:e(v),"onUpdate:modelValue":_[0]||(_[0]=P=>vt(v)?v.value=P:null)},null,8,["currency","disabled","modelValue"])]),s("div",U0,[s("span",P0,i(e(n)("Base Currency")),1)]),e(k)&&e(k).exchangeRates&&e(k).exchangeRates.length?(l(),p(Xa,{key:0,"show-arrows":"",class:"mb-4",direction:"vertical",disabled:A.value,modelValue:e(c),"onUpdate:modelValue":_[1]||(_[1]=P=>vt(c)?c.value=P:null)},{default:a(()=>[(l(!0),b(ue,null,$e(e(u),P=>(l(),p(qt,{class:"tab-text-truncate",key:P.currencyCode,value:P.currencyCode},{default:a(()=>[s("div",B0,[s("span",L0,i(P.currencyDisplayName),1),s("small",R0,i(P.currencyCode),1)])]),_:2},1032,["value"]))),128))]),_:1},8,["disabled","modelValue"])):!e(k)||!e(k).exchangeRates||!e(k).exchangeRates.length?(l(),b("div",z0,[A.value?A.value?(l(),b("span",j0,[(l(),b(ue,null,$e([1,2,3,4,5,6,7,8,9,10],P=>t(ut,{class:"skeleton-no-margin pt-2 pb-5",type:"text",key:P,loading:A.value},null,8,["loading"])),64))])):r("",!0):(l(),b("span",O0,i(e(n)("None")),1))])):r("",!0)]),_:1},8,["permanent","modelValue"]),t(sn,null,{default:a(()=>[t(ja,{class:"d-flex flex-grow-1 disable-tab-transition w-100-window-container",modelValue:N.value,"onUpdate:modelValue":_[5]||(_[5]=P=>N.value=P)},{default:a(()=>[t(Pt,{value:"exchangeRatesPage"},{default:a(()=>[t(Ee,{variant:"flat","min-height":"680"},{title:a(()=>[s("div",q0,[t(H,{class:"me-3 d-md-none",density:"compact",color:"default",variant:"plain",ripple:!1,icon:!0,onClick:_[3]||(_[3]=P=>M.value=!M.value)},{default:a(()=>[t(se,{icon:e(an),size:"24"},null,8,["icon"])]),_:1}),s("span",null,i(e(n)("Exchange Rates Data")),1),e(h)?(l(),p(H,{key:0,class:"ms-3",color:"default",variant:"outlined",disabled:A.value,onClick:Z},{default:a(()=>[j(i(e(n)("Update")),1)]),_:1},8,["disabled"])):r("",!0),t(H,{density:"compact",color:"default",variant:"text",size:"24",class:"ms-2",icon:!0,loading:A.value,onClick:_[4]||(_[4]=P=>X(!0))},{loader:a(()=>[t(je,{indeterminate:"",size:"20"})]),default:a(()=>[t(se,{icon:e(wa),size:"24"},null,8,["icon"]),t(yt,{activator:"parent"},{default:a(()=>[j(i(e(n)("Refresh")),1)]),_:1})]),_:1},8,["loading"])])]),default:a(()=>[t(el,{class:"exchange-rates-table table-striped",hover:!A.value},{default:a(()=>[s("thead",null,[s("tr",null,[s("th",null,[s("div",H0,[s("span",null,i(e(n)("Currency")),1),t(pt),s("span",null,i(e(n)("Amount")),1)])])])]),s("tbody",null,[(l(!0),b(ue,null,$e(A.value&&(!e(k)||!e(k).exchangeRates||e(k).exchangeRates.length<1)?[1,2,3,4,5,6,7,8,9,10,11,12]:[],P=>(l(),b("tr",{key:P},[s("td",Y0,[t(ut,{type:"text",loading:!0})])]))),128)),!A.value&&(!e(k)||!e(k).exchangeRates||!e(k).exchangeRates.length)?(l(),b("tr",W0,[s("td",null,i(e(n)("No exchange rates data")),1)])):r("",!0),(l(!0),b(ue,null,$e(e(u),P=>(l(),b("tr",{class:"exchange-rates-table-row-data",key:P.currencyCode},[s("td",null,[s("div",K0,[s("span",G0,i(P.currencyDisplayName),1),s("span",J0,i(P.currencyCode),1),t(pt),P.currencyCode!==e(c)?(l(),p(H,{key:0,class:be(["px-2 ms-2",{"d-none":A.value,"hover-display":!A.value}]),color:"default",density:"comfortable",variant:"text",onClick:W=>e(F)(P.currencyCode,O(P,!1))},{default:a(()=>[j(i(e(n)("Set as Base")),1)]),_:1},8,["class","onClick"])):r("",!0),P.currencyCode!==e(y)&&e(h)?(l(),p(H,{key:1,class:be(["px-2",{"d-none":A.value,"hover-display":!A.value}]),color:"default",density:"comfortable",variant:"text","prepend-icon":e(rn),loading:I.value[P.currencyCode],disabled:A.value||$.value,onClick:W=>q(P.currencyCode)},{loader:a(()=>[t(je,{indeterminate:"",size:"20",width:"2"})]),default:a(()=>[j(" "+i(e(n)("Delete")),1)]),_:1},8,["class","prepend-icon","loading","disabled","onClick"])):r("",!0),s("span",Z0,i(O(P,!0)),1)])])]))),128))])]),_:1},8,["hover"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(_0,{ref_key:"updateDialog",ref:S},null,512),t(pa,{ref_key:"confirmDialog",ref:m},null,512),t(mt,{ref_key:"snackbar",ref:x},null,512)],64)}}}),X0={class:"d-flex align-center"},ex={class:"text-body-1"},tx={class:"text-body-1"},ax={class:"text-body-1"},lx={class:"text-body-1"},nx={class:"text-body-1"},ox={class:"text-body-1"},sx={class:"text-body-1"},ix={class:"text-body-1"},rx=["href"],ux={key:1,class:"text-body-1"},dx={class:"text-body-1"},cx=["href"],mx={key:1,class:"text-body-1"},px={key:0},vx={key:1},fx={key:2},yx=["href"],gx={key:4},hx={key:5,class:"work-break-all"},bx=["href"],kx=Pe({__name:"AboutPage",setup(f){const{tt:T}=Oe(),{clientVersion:n,clientVersionMatchServerVersion:o,clientBuildTime:g,exchangeRatesData:c,isUserCustomExchangeRates:v,mapProviderName:y,mapProviderWebsite:k,licenseLines:h,thirdPartyLicenses:d,refreshBrowserCache:u,init:C}=ac();return C(),(F,w)=>(l(),p(Ae,{class:"match-height"},{default:a(()=>[t(R,{cols:"12"},{default:a(()=>[t(Ee,null,{title:a(()=>[s("div",X0,[s("span",null,i(e(T)("global.app.title")),1),e(o)?r("",!0):(l(),p(H,{key:0,density:"compact",color:"default",variant:"text",size:"24",class:"ms-2",icon:!0,onClick:e(u)},{default:a(()=>[t(se,{icon:e(Ur),size:"24"},null,8,["icon"]),t(yt,{activator:"parent"},{default:a(()=>[j(i(e(T)("Refresh Browser Cache")),1)]),_:1})]),_:1},8,["onClick"]))])]),default:a(()=>[t(ve,null,{default:a(()=>[t(Ae,{"no-gutters":""},{default:a(()=>[t(R,{cols:"12",md:"2"},{default:a(()=>[s("span",ex,i(e(T)("Version")),1)]),_:1}),t(R,{cols:"12",md:"10",class:"mb-6"},{default:a(()=>[s("span",tx,i(e(n)),1)]),_:1})]),_:1}),e(g)?(l(),p(Ae,{key:0,"no-gutters":""},{default:a(()=>[t(R,{cols:"12",md:"2"},{default:a(()=>[s("span",ax,i(e(T)("Build Time")),1)]),_:1}),t(R,{cols:"12",md:"10",class:"mb-6"},{default:a(()=>[s("span",lx,i(e(g)),1)]),_:1})]),_:1})):r("",!0),t(Ae,{"no-gutters":""},{default:a(()=>[t(R,{cols:"12",md:"2"},{default:a(()=>[s("span",nx,i(e(T)("Official Website")),1)]),_:1}),t(R,{cols:"12",md:"10",class:"mb-6"},{default:a(()=>[...w[0]||(w[0]=[s("a",{class:"text-body-1",href:"https://github.com/mayswind/ezbookkeeping",target:"_blank"}," https://github.com/mayswind/ezbookkeeping ",-1)])]),_:1})]),_:1}),t(Ae,{"no-gutters":""},{default:a(()=>[t(R,{cols:"12",md:"2"},{default:a(()=>[s("span",ox,i(e(T)("Report Issue")),1)]),_:1}),t(R,{cols:"12",md:"10",class:"mb-6"},{default:a(()=>[...w[1]||(w[1]=[s("a",{class:"text-body-1",href:"https://github.com/mayswind/ezbookkeeping/issues",target:"_blank"}," https://github.com/mayswind/ezbookkeeping/issues ",-1)])]),_:1})]),_:1}),t(Ae,{"no-gutters":""},{default:a(()=>[t(R,{cols:"12",md:"2"},{default:a(()=>[s("span",sx,i(e(T)("Getting help")),1)]),_:1}),t(R,{cols:"12",md:"10"},{default:a(()=>[...w[2]||(w[2]=[s("a",{class:"text-body-1",href:"https://ezbookkeeping.mayswind.net",target:"_blank"}," https://ezbookkeeping.mayswind.net ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(c)&&!e(v)?(l(),p(R,{key:0,cols:"12"},{default:a(()=>[t(Ee,{title:e(T)("Exchange Rates Data")},{default:a(()=>[t(ve,null,{default:a(()=>[t(Ae,{"no-gutters":""},{default:a(()=>[t(R,{cols:"12",md:"2"},{default:a(()=>[s("span",ix,i(e(T)("Provider")),1)]),_:1}),t(R,{cols:"12",md:"10"},{default:a(()=>[e(c).referenceUrl?(l(),b("a",{key:0,class:"text-body-1",href:e(c).referenceUrl,target:"_blank"},i(e(c).dataSource),9,rx)):r("",!0),e(c).referenceUrl?r("",!0):(l(),b("span",ux,i(e(c).dataSource),1))]),_:1})]),_:1})]),_:1})]),_:1},8,["title"])]),_:1})):r("",!0),e(y)?(l(),p(R,{key:1,cols:"12"},{default:a(()=>[t(Ee,{title:e(T)("Map")},{default:a(()=>[t(ve,null,{default:a(()=>[t(Ae,{"no-gutters":""},{default:a(()=>[t(R,{cols:"12",md:"2"},{default:a(()=>[s("span",dx,i(e(T)("Provider")),1)]),_:1}),t(R,{cols:"12",md:"10"},{default:a(()=>[e(k)?(l(),b("a",{key:0,class:"text-body-1",href:e(k),target:"_blank"},i(e(y)),9,cx)):r("",!0),e(k)?r("",!0):(l(),b("span",mx,i(e(y)),1))]),_:1})]),_:1})]),_:1})]),_:1},8,["title"])]),_:1})):r("",!0),t(R,{cols:"12"},{default:a(()=>[t(Ee,{title:e(T)("License")},{default:a(()=>[t(ve,null,{default:a(()=>[t(Ae,{"no-gutters":""},{default:a(()=>[t(R,{cols:"12"},{default:a(()=>[s("p",null,[(l(!0),b(ue,null,$e(e(h),(m,x)=>(l(),b("span",{key:x,style:_l({display:m?"initial":"block",padding:m?"0":"0 0 1em 0"})},i(m),5))),128))]),t(Ke),w[3]||(w[3]=s("br",null,null,-1)),w[4]||(w[4]=s("p",null,[s("span",null,"ezBookkeeping also contains additional third party software and illustration."),s("br"),s("span",null,"All the third party software/illustration included or linked is redistributed under the terms and conditions of their original licenses.")],-1)),w[5]||(w[5]=s("p",null,null,-1)),(l(!0),b(ue,null,$e(e(d),m=>(l(),b("p",{key:m.name},[s("strong",null,i(m.name),1),m.copyright?(l(),b("br",px)):r("",!0),m.copyright?(l(),b("span",vx,i(m.copyright),1)):r("",!0),m.url?(l(),b("br",fx)):r("",!0),m.url?(l(),b("a",{key:3,class:"work-break-all",target:"_blank",href:m.url},i(m.url),9,yx)):r("",!0),m.licenseUrl?(l(),b("br",gx)):r("",!0),m.licenseUrl?(l(),b("span",hx,"License: ")):r("",!0),s("a",{target:"_blank",href:m.licenseUrl},i(m.licenseUrl),9,bx)]))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["title"])]),_:1})]),_:1}))}});function Sa(){return vl()?In()?!0:{path:"/unlock",replace:!0}:{path:"/login",replace:!0}}function _x(){return vl()?In()?{path:"/",replace:!0}:!0:{path:"/login",replace:!0}}function yo(){return vl()&&!In()?{path:"/unlock",replace:!0}:vl()?{path:"/",replace:!0}:!0}const Tx=Pr({history:Br(),routes:[{path:"/",component:$m,beforeEnter:Sa,children:[{path:"",component:cf,beforeEnter:Sa},{path:"/transaction/list",component:Lh,beforeEnter:Sa,props:f=>({initPageType:f.query.pageType,initDateType:f.query.dateType,initMaxTime:f.query.maxTime,initMinTime:f.query.minTime,initType:f.query.type,initCategoryIds:f.query.categoryIds,initAccountIds:f.query.accountIds,initTagIds:f.query.tagIds,initTagFilterType:f.query.tagFilterType,initAmountFilter:f.query.amountFilter,initKeyword:f.query.keyword})},{path:"/statistics/transaction",component:vb,beforeEnter:Sa,props:f=>({initAnalysisType:f.query.analysisType,initChartDataType:f.query.chartDataType,initChartType:f.query.chartType,initChartDateType:f.query.chartDateType,initStartTime:f.query.startTime,initEndTime:f.query.endTime,initFilterAccountIds:f.query.filterAccountIds,initFilterCategoryIds:f.query.filterCategoryIds,initTagIds:f.query.tagIds,initTagFilterType:f.query.tagFilterType,initKeyword:f.query.keyword,initSortingType:f.query.sortingType,initTrendDateAggregationType:f.query.trendDateAggregationType,initAssetTrendsDateAggregationType:f.query.assetTrendsDateAggregationType})},{path:"/account/list",component:Zk,beforeEnter:Sa},{path:"/category/list",component:A_,beforeEnter:Sa},{path:"/tag/list",component:R_,beforeEnter:Sa},{path:"/template/list",component:Ts,beforeEnter:Sa,props:{initType:ha.Normal.type}},{path:"/schedule/list",component:Ts,beforeEnter:Sa,props:{initType:ha.Schedule.type}},{path:"/exchange_rates",component:Q0,beforeEnter:Sa},{path:"/user/settings",component:e0,beforeEnter:Sa,props:f=>({initTab:f.query.tab})},{path:"/app/settings",component:y0,beforeEnter:Sa,props:f=>({initTab:f.query.tab})},{path:"/about",component:kx,beforeEnter:Sa}]},{path:"/login",component:Ym,beforeEnter:yo},{path:"/signup",component:dp,beforeEnter:yo},{path:"/verify_email",component:Sp,props:f=>({email:f.query.email,token:f.query.token,hasValidEmailVerifyToken:f.query.emailSent==="true"})},{path:"/forgetpassword",component:Rp,beforeEnter:yo},{path:"/resetpassword",component:Qp,props:f=>({token:f.query.token})},{path:"/oauth2_callback",component:vv,props:f=>({token:f.query.token,provider:f.query.provider,platform:f.query.platform,userName:f.query.userName,errorCode:f.query.errorCode,errorMessage:f.query.errorMessage})},{path:"/unlock",component:Sv,beforeEnter:_x}]}),xx=Pe({__name:"ItemIcon",props:{class:{},hiddenStatus:{type:Boolean},iconType:{},iconId:{},color:{},defaultColor:{},additionalColorAttr:{},size:{}},setup(f){const T=f,{getCurrentLanguageTextDirection:n}=Oe(),{style:o,getAccountIcon:g,getCategoryIcon:c}=lc(T),v=B(()=>n()),y=B(()=>{let k=T.class?T.class+" ":"";return T.iconType==="account"?k+=g(T.iconId):T.iconType==="category"?k+=c(T.iconId):T.iconType==="fixed"&&(k+=T.iconId),k});return(k,h)=>(l(),b(ue,null,[f.hiddenStatus?r("",!0):(l(),b("i",{key:0,class:be(["item-icon",y.value]),style:_l(e(o))},[Gl(k.$slots,"default")],6)),f.hiddenStatus?(l(),p(Tl,{key:1,class:"right-bottom-icon",color:"secondary","offset-y":"4",location:`bottom ${v.value===e(un).LTR?"right":"left"}`,icon:e(Gt)},{default:a(()=>[s("i",{class:be(["item-icon",y.value]),style:_l(e(o))},[Gl(k.$slots,"default")],6)]),_:3},8,["location","icon"])):r("",!0)],64))}}),Cx={class:"btn-vertical-group d-flex flex-column"},wx=Pe({__name:"BtnVerticalGroup",props:{modelValue:{},buttons:{},disabled:{type:Boolean}},emits:["update:modelValue"],setup(f,{emit:T}){const n=f,o=T,g=B({get:()=>n.modelValue,set:c=>{c!==n.modelValue&&o("update:modelValue",c)}});return(c,v)=>(l(),b("div",Cx,[(l(!0),b(ue,null,$e(f.buttons,(y,k)=>(l(),p(H,{border:"",key:k,color:g.value===y.value?"primary":"default",variant:g.value===y.value?"tonal":"outlined",disabled:f.disabled,onClick:h=>g.value=y.value},{default:a(()=>[j(i(y.name),1)]),_:2},1032,["color","variant","disabled","onClick"]))),128))]))}}),Ax=Pe({__name:"NumberInput",props:{class:{},density:{},persistentPlaceholder:{type:Boolean},minValue:{},maxValue:{},maxDecimalCount:{},label:{},placeholder:{},disabled:{type:Boolean},readonly:{type:Boolean},modelValue:{}},emits:["update:modelValue"],setup(f,{emit:T}){const n=f,o=T,{currentValue:g,onKeyUpDown:c,onPaste:v}=nc(n,o),y=B(()=>n.class||"");return(k,h)=>(l(),p(dt,{type:"text",class:be(y.value),density:f.density,readonly:!!f.readonly,disabled:!!f.disabled,label:f.label,placeholder:f.placeholder,"persistent-placeholder":!!f.persistentPlaceholder,modelValue:e(g),"onUpdate:modelValue":h[0]||(h[0]=d=>vt(g)?g.value=d:null),onKeydown:e(c),onKeyup:e(c),onPaste:e(v)},null,8,["class","density","readonly","disabled","label","placeholder","persistent-placeholder","modelValue","onKeydown","onKeyup","onPaste"]))}}),Ix={key:0,class:"text-no-wrap"},Sx={key:0,class:"text-no-wrap"},Vx={class:"text-no-wrap"},$x=Pe({__name:"AmountInput",props:{class:{},color:{},density:{},variant:{},currency:{},showCurrency:{type:Boolean},persistentPlaceholder:{type:Boolean},hide:{type:Boolean},enableRules:{type:Boolean},enableFormula:{type:Boolean},flipNegative:{type:Boolean},label:{},placeholder:{},disabled:{type:Boolean},readonly:{type:Boolean},modelValue:{}},emits:["update:modelValue"],setup(f,{emit:T}){const n=f,o=T,{tt:g,getCurrentNumeralSystemType:c,getCurrentDecimalSeparator:v,parseAmountFromLocalizedNumerals:y,formatAmountToLocalizedNumeralsWithoutDigitGrouping:k,getAmountPrependAndAppendText:h}=Oe(),{currentValue:d,onKeyUpDown:u,onPaste:C}=oc(n,sc,Z(n.modelValue,n.flipNegative),y,q,X),F=xe("snackbar"),w=[V=>{if(V==="")return g("Amount value is not number");try{const _=y(V);return Number.isNaN(_)||!Number.isFinite(_)?g("Amount value is not number"):_>=Bn&&_<=Ln||g("Amount value exceeds limitation")}catch(_){return Xt.warn("cannot parse amount in amount input, original value is "+V,_),g("Amount value is not number")}}],m=L(""),x=L(!1),S=B(()=>c()),N=B(()=>{if(!n.currency||!n.showCurrency)return"";const V=O();return V?V.prependText:""}),A=B(()=>{if(!n.currency||!n.showCurrency)return"";const V=O();return V?V.appendText:""}),$=B(()=>{let V=n.class||"";return n.color&&(V+=` text-${n.color}`),n.currency&&N.value&&(V+=" has-pretend-text"),V});function I(){n.enableFormula&&(m.value=d.value,x.value=!0)}function z(){const V=oi.Dot.symbol,_=v();let D=m.value;if(V!==_&&D.indexOf(V)>=0){F.value?.showMessage("Formula is invalid");return}else V!==_&&(D=fn(m.value,_,V));D=S.value.replaceLocalizedDigitsToWesternArabicDigits(D);try{const P=ic(D);if(Ht(P)){const W=q(P),ne=W.indexOf(_)>=0;d.value=X(P,W,ne),x.value=!1}else F.value?.showMessage("Formula is invalid")}catch(P){Xt.error("cannot evaluate formula in amount input, original formula is "+D,P),P instanceof Error&&F.value?.showMessage(P.message)}}function M(){x.value=!1,m.value=""}function U(V){if(!n.disabled&&!n.readonly&&n.modelValue===0&&V.target instanceof HTMLInputElement){const _=V.target;(!_?.selectionStart&&!_?.selectionEnd||_?.selectionStart===_?.selectionEnd)&&_?.select()}}function X(V,_,D){let P=Ln.toString().length;return V<0&&(P=Bn.toString().length),V<Bn?q(Bn):V>Ln?q(Ln):!D&&_.length>P?_.substring(0,P):D&&_.length>P+1?_.substring(0,P+1):_}function Z(V,_){return _&&(V=-V),q(V)}function q(V){return!Number.isNaN(V)&&Number.isFinite(V)?k(V,n.currency):S.value.digitZero}function O(){const V=y(d.value),_=V!==100&&V!==-100;return h(n.currency,_)}return Ft(()=>n.currency,()=>{const V=Z(n.modelValue,n.flipNegative);V===S.value.digitZero&&d.value===""||(d.value=V)}),Ft(()=>n.flipNegative,V=>{const _=Z(n.modelValue,V);_===S.value.digitZero&&d.value===""||(d.value=_)}),Ft(()=>n.modelValue,V=>{n.flipNegative&&(V=-V);const _=y(d.value);if(V!==_){const D=q(V);D===S.value.digitZero&&d.value===""||(d.value=D)}}),Ft(d,V=>{let _,D="";if(V){const P=v();if(V[0]==="-"||V[0]===P?_=Al.detect(V.charAt(1)):_=Al.detect(V.charAt(0)),_&&(_.type===Al.WesternArabicNumerals.type||_.type===S.value.type)){for(let W=0;W<V.length;W++){const ne=V.charAt(W);if(!Al.WesternArabicNumerals.isDigit(ne)&&!S.value.isDigit(ne)&&ne!=="-"&&ne!==P)break;D+=ne}D=S.value.replaceWesternArabicDigitsToLocalizedDigits(D)}else(V==="-"||V===P||V===`-${P}`)&&(D=V)}if(D!==V)d.value=D;else{let P=y(D);(Number.isNaN(P)||!Number.isFinite(P))&&(P=0),n.flipNegative&&(P=-P),o("update:modelValue",P)}}),(V,_)=>(l(),b(ue,null,[!f.hide&&!x.value?(l(),p(dt,{key:0,type:"text",class:be(["text-field-with-colored-label",$.value]),color:f.color,"base-color":f.color,density:f.density,variant:f.variant,readonly:!!f.readonly,disabled:!!f.disabled,label:f.label,placeholder:f.placeholder,"persistent-placeholder":!!f.persistentPlaceholder,rules:f.enableRules?w:[],modelValue:e(d),"onUpdate:modelValue":_[0]||(_[0]=D=>vt(d)?d.value=D:null),onKeydown:e(u),onKeyup:e(u),onPaste:e(C),onClick:U},jn({"append-inner":a(()=>[f.currency&&A.value?(l(),b("div",Ix,i(A.value),1)):r("",!0),t(yt,{text:e(g)("Enter formula mode")},{activator:a(({props:D})=>[f.enableFormula&&!x.value?(l(),p(se,Ct({key:0,class:"ms-2",icon:e(Os),onKeydown:[Wt(I,["enter"]),Wt(I,["space"])],onClick:I},D),null,16,["icon"])):r("",!0)]),_:1},8,["text"])]),_:2},[f.currency&&N.value?{name:"prepend-inner",fn:a(()=>[s("div",null,i(N.value),1)]),key:"0"}:void 0]),1032,["class","color","base-color","density","variant","readonly","disabled","label","placeholder","persistent-placeholder","rules","modelValue","onKeydown","onKeyup","onPaste"])):r("",!0),!f.hide&&x.value?(l(),p(dt,{key:1,type:"text",class:be(["text-field-with-colored-label",$.value]),color:f.color,"base-color":f.color,density:f.density,readonly:!!f.readonly,disabled:!!f.disabled,label:f.label,placeholder:f.placeholder,"persistent-placeholder":!!f.persistentPlaceholder,modelValue:m.value,"onUpdate:modelValue":_[1]||(_[1]=D=>m.value=D),onKeydown:Wt(z,["enter"]),onClick:U},jn({"append-inner":a(()=>[f.currency&&A.value?(l(),b("div",Sx,i(A.value),1)):r("",!0),t(yt,{text:e(g)("Calculate formula result")},{activator:a(({props:D})=>[x.value?(l(),p(se,Ct({key:0,class:"ms-2",color:"primary",icon:e(Ye),onClick:z},D),null,16,["icon"])):r("",!0)]),_:1},8,["text"]),t(yt,{text:e(g)("Exit formula mode")},{activator:a(({props:D})=>[x.value?(l(),p(se,Ct({key:0,class:"ms-2",color:"secondary",icon:e(Tn),onClick:M},D),null,16,["icon"])):r("",!0)]),_:1},8,["text"])]),_:2},[f.currency&&N.value?{name:"prepend-inner",fn:a(()=>[s("div",null,i(N.value),1)]),key:"0"}:void 0]),1032,["class","color","base-color","density","readonly","disabled","label","placeholder","persistent-placeholder","modelValue"])):r("",!0),f.hide?(l(),p(dt,{key:2,type:"password",class:be(["text-field-with-colored-label",$.value]),color:f.color,"base-color":f.color,density:f.density,readonly:!!f.readonly,disabled:!!f.disabled,label:f.label,placeholder:f.placeholder,"persistent-placeholder":!!f.persistentPlaceholder,rules:f.enableRules?w:[],modelValue:e(d),"onUpdate:modelValue":_[2]||(_[2]=D=>vt(d)?d.value=D:null),onKeydown:e(u),onKeyup:e(u),onPaste:e(C),onClick:U},jn({_:2},[f.currency&&N.value?{name:"prepend-inner",fn:a(()=>[s("div",null,i(N.value),1)]),key:"0"}:void 0,f.currency&&A.value?{name:"append-inner",fn:a(()=>[s("div",Vx,i(A.value),1)]),key:"1"}:void 0]),1032,["class","color","base-color","density","readonly","disabled","label","placeholder","persistent-placeholder","rules","modelValue","onKeydown","onKeyup","onPaste"])):r("",!0),t(mt,{ref_key:"snackbar",ref:F},null,512)],64))}}),Dx={class:"d-flex align-center"},Fx={key:1,class:"text-field-append-text"},Nx=Pe({__name:"LanguageSelect",props:{label:{},placeholder:{},disabled:{type:Boolean},includeSystemDefault:{type:Boolean},useModelValue:{type:Boolean},modelValue:{}},emits:["update:modelValue"],setup(f,{emit:T}){const n=f,o=T,{getCurrentLanguageTag:g}=Oe(),{allLanguages:c,updateLanguage:v,isLanguageSelected:y}=si(n,o),k=B({get:()=>n.useModelValue?n.modelValue??"":g(),set:h=>{v(h)}});return(h,d)=>(l(),p(Je,{"item-title":"nativeDisplayName","item-value":"languageTag","persistent-placeholder":"",disabled:f.disabled,label:f.label,placeholder:f.placeholder,items:e(c),modelValue:k.value,"onUpdate:modelValue":d[0]||(d[0]=u=>k.value=u)},{item:a(({props:u,item:C})=>[t(le,Ct({value:C.value},u),{title:a(()=>[t(ot,null,{default:a(()=>[s("div",Dx,[s("span",null,i(C.title),1),t(pt,{style:{"min-width":"40px"}}),e(y)(C.raw.languageTag)?(l(),p(se,{key:0,icon:e(Ye)},null,8,["icon"])):r("",!0),e(y)(C.raw.languageTag)?r("",!0):(l(),b("span",Fx,i(C.raw.displayName),1))])]),_:2},1024)]),_:2},1040,["value"])]),_:1},8,["disabled","label","placeholder","items","modelValue"]))}}),Mx={class:"d-flex align-center"},Ex={key:1,class:"text-field-append-text"},Ux=Pe({__name:"LanguageSelectButton",props:{disabled:{type:Boolean},includeSystemDefault:{type:Boolean},useModelValue:{type:Boolean},modelValue:{}},emits:["update:modelValue"],setup(f,{emit:T}){const n=f,o=T,{allLanguages:g,currentLanguageName:c,updateLanguage:v,isLanguageSelected:y}=si(n,o);return(k,h)=>(l(),p(nt,{location:"bottom","max-height":"500"},{activator:a(({props:d})=>[t(H,Ct({variant:"text",disabled:f.disabled},d),{default:a(()=>[j(i(e(c)),1)]),_:1},16,["disabled"])]),default:a(()=>[t(ze,null,{default:a(()=>[(l(!0),b(ue,null,$e(e(g),d=>(l(),p(le,{key:d.languageTag,value:d.languageTag},{default:a(()=>[t(ot,{class:"cursor-pointer",onClick:u=>e(v)(d.languageTag)},{default:a(()=>[s("div",Mx,[s("span",null,i(d.nativeDisplayName),1),t(pt,{style:{"min-width":"40px"}}),e(y)(d.languageTag)?(l(),p(se,{key:0,icon:e(Ye)},null,8,["icon"])):r("",!0),e(y)(d.languageTag)?r("",!0):(l(),b("span",Ex,i(d.displayName),1))])]),_:2},1032,["onClick"])]),_:2},1032,["value"]))),128))]),_:1})]),_:1}))}}),Px={class:"text-field-append-text smaller"},Bx={class:"d-flex align-center"},Lx={key:1,class:"text-field-append-text"},Rx=Pe({__name:"CurrencySelect",props:{disabled:{type:Boolean},label:{},placeholder:{},modelValue:{}},emits:["update:modelValue"],setup(f,{emit:T}){const n=f,o=T,{tt:g,getAllCurrencies:c}=Oe(),v=B(()=>c()),y=B({get:()=>n.modelValue,set:h=>{h===null?o("update:modelValue",""):o("update:modelValue",h)}});function k(h,d,u){if(!u)return!1;const C=d.toLowerCase()||"";return C?u.raw.displayName.toLowerCase().indexOf(C)>=0||u.raw.currencyCode.toLowerCase().indexOf(C)>=0:!0}return(h,d)=>(l(),p(sa,{"item-title":"displayName","item-value":"currencyCode","auto-select-first":"","persistent-placeholder":"",disabled:f.disabled,label:f.label,placeholder:f.placeholder,items:v.value,"no-data-text":e(g)("No results"),"custom-filter":k,modelValue:y.value,"onUpdate:modelValue":d[0]||(d[0]=u=>y.value=u)},{"append-inner":a(()=>[s("small",Px,i(y.value),1)]),item:a(({props:u,item:C})=>[t(le,Ct({value:C.value},u),{title:a(()=>[t(ot,null,{default:a(()=>[s("div",Bx,[s("span",null,i(C.title),1),t(pt,{style:{"min-width":"40px"}}),y.value===C.raw.currencyCode?(l(),p(se,{key:0,icon:e(Ye)},null,8,["icon"])):r("",!0),y.value!==C.raw.currencyCode?(l(),b("small",Lx,i(C.raw.currencyCode),1)):r("",!0)])]),_:2},1024)]),_:2},1040,["value"])]),_:1},8,["disabled","label","placeholder","items","no-data-text","modelValue"]))}}),zx={class:"text-truncate cursor-pointer"},Ox={class:"date-time-select-time-picker-container"},jx=Pe({__name:"DateTimeSelect",props:{modelValue:{},disabled:{type:Boolean},readonly:{type:Boolean},label:{}},emits:["update:modelValue","error"],setup(f,{emit:T}){const n=f,o=T,g=Ot(),{tt:c,getCurrentNumeralSystemType:v,parseDateTimeFromLongDateTime:y,parseDateTimeFromShortDateTime:k,formatUnixTimeToLongDateTime:h}=Oe(),{is24Hour:d,isHourTwoDigits:u,isMinuteTwoDigits:C,isSecondTwoDigits:F,isMeridiemIndicatorFirst:w,getDisplayTimeValue:m,generateAllHours:x,generateAllMinutesOrSeconds:S}=rc(),N=xe("hourInput"),A=xe("minuteInput"),$=xe("secondInput"),I=B(()=>g.global.name.value===wt.Dark),z=B(()=>v()),M=B({get:()=>Yl(n.modelValue),set:J=>{const Y=hs(J);if(Y<0){o("error","Date is too early");return}o("update:modelValue",Y)}}),U=B(()=>h(ti(hs(M.value),bl(),kl()))),X=B(()=>x(1,u.value)),Z=B(()=>S(1,C.value)),q=B(()=>S(1,F.value)),O=B({get:()=>uc(M.value.getHours()),set:J=>{J!==vn.AM.name&&J!==vn.PM.name||(M.value=Rn(M.value,z.value,V.value,_.value,D.value,J,d.value))}}),V=B({get:()=>m(d.value?M.value.getHours():dc(M.value.getHours()),u.value),set:J=>{const Y=z.value.parseInt(J);isNaN(Y)||Y<0||(d.value?Y>23:Y>12)||(M.value=Rn(M.value,z.value,J,_.value,D.value,O.value,d.value))}}),_=B({get:()=>m(M.value.getMinutes(),C.value),set:J=>{const Y=z.value.parseInt(J);isNaN(Y)||Y<0||Y>59||(M.value=Rn(M.value,z.value,V.value,J,D.value,O.value,d.value))}}),D=B({get:()=>m(M.value.getSeconds(),F.value),set:J=>{const Y=z.value.parseInt(J);isNaN(Y)||Y<0||Y>59||(M.value=Rn(M.value,z.value,V.value,_.value,J,O.value,d.value))}});function P(){O.value===vn.AM.name?O.value=vn.PM.name:O.value=vn.AM.name}function W(J){if(!J.clipboardData||n.readonly||n.disabled){J.preventDefault();return}let Y=J.clipboardData.getData("Text");if(!Y){J.preventDefault();return}Y=Y.trim();const ie=Qs.detect(Y);let fe;if(ie&&ie.length===1&&(fe=cc(Y,ie[0]),fe)){M.value=Yl(_n(fe.getUnixTime(),bl(),kl()));return}if(fe=y(Y),fe){M.value=Yl(_n(fe.getUnixTime(),bl(),kl()));return}if(fe=k(Y),fe){M.value=Yl(_n(fe.getUnixTime(),bl(),kl()));return}J.preventDefault()}function ne(J,Y){J&&Y&&ka(()=>{zl(J?.$el,"input")})}function de(J,Y){if(Y.altKey||Y.ctrlKey||Y.metaKey||Y.key.indexOf("F")===0&&(Y.key.length===2||Y.key.length===3)||Y.key==="ArrowLeft"||Y.key==="ArrowRight"||Y.key==="Home"||Y.key==="End"||Y.key==="Backspace"||Y.key==="Delete"||Y.key==="Del"||Y.key.length===1&&z.value.isDigit(Y.key))return;let ie="";if(Y.target instanceof HTMLInputElement&&(ie=Y.target.value),!!ie){if((Y.key==="Tab"||Y.key==="Enter")&&(J==="hour"?V.value=ie:J==="minute"?_.value=ie:J==="second"&&(D.value=ie)),Y.shiftKey&&Y.key==="Tab"){J==="minute"?ka(()=>{setTimeout(()=>{zl(N.value?.$el,"input")},50)}):J==="second"&&ka(()=>{setTimeout(()=>{zl(A.value?.$el,"input")},50)}),Y.preventDefault(),Y.stopPropagation();return}!Y.shiftKey&&(Y.key==="Tab"||Y.key==="Enter")&&(J==="hour"?ka(()=>{setTimeout(()=>{zl(A.value?.$el,"input")},50)}):J==="minute"&&ka(()=>{setTimeout(()=>{zl($.value?.$el,"input")},50)})),Y.preventDefault()}}return(J,Y)=>{const ie=Ie("date-time-picker");return l(),p(Je,{"persistent-placeholder":"",readonly:f.readonly,disabled:f.disabled,label:f.label,"menu-props":{contentClass:"date-time-select-menu"},modelValue:M.value,"onUpdate:modelValue":Y[13]||(Y[13]=fe=>M.value=fe),onPaste:W},{selection:a(()=>[s("span",zx,i(U.value),1)]),"no-data":a(()=>[t(ie,{"is-dark-mode":I.value,"enable-time-picker":!1,vertical:!0,"show-alternate-dates":!0,modelValue:M.value,"onUpdate:modelValue":Y[0]||(Y[0]=fe=>M.value=fe)},null,8,["is-dark-mode","modelValue"]),s("div",Ox,[!e(d)&&e(w)?(l(),p(H,{key:0,class:"px-3",color:"primary",variant:"flat",onClick:P},{default:a(()=>[j(i(e(c)(`datetime.${O.value}.content`)),1)]),_:1})):r("",!0),t(e(sa),{eager:"",ref_key:"hourInput",ref:N,density:"compact","max-width":"70px","item-title":"value","item-value":"value","auto-select-first":"exact",items:X.value,"hide-no-data":!0,modelValue:V.value,"onUpdate:modelValue":Y[1]||(Y[1]=fe=>V.value=fe),"onUpdate:focused":Y[2]||(Y[2]=fe=>ne(N.value,fe)),onClick:Y[3]||(Y[3]=fe=>ne(N.value,!0)),onKeydown:Y[4]||(Y[4]=fe=>de("hour",fe))},null,8,["items","modelValue"]),Y[14]||(Y[14]=s("span",null,":",-1)),t(e(sa),{eager:"",ref_key:"minuteInput",ref:A,density:"compact","max-width":"70px","item-title":"value","item-value":"value","auto-select-first":"exact",items:Z.value,"hide-no-data":!0,modelValue:_.value,"onUpdate:modelValue":Y[5]||(Y[5]=fe=>_.value=fe),"onUpdate:focused":Y[6]||(Y[6]=fe=>ne(A.value,fe)),onClick:Y[7]||(Y[7]=fe=>ne(A.value,!0)),onKeydown:Y[8]||(Y[8]=fe=>de("minute",fe))},null,8,["items","modelValue"]),Y[15]||(Y[15]=s("span",null,":",-1)),t(e(sa),{eager:"",ref_key:"secondInput",ref:$,density:"compact","max-width":"70px","item-title":"value","item-value":"value","auto-select-first":"exact",items:q.value,"hide-no-data":!0,modelValue:D.value,"onUpdate:modelValue":Y[9]||(Y[9]=fe=>D.value=fe),"onUpdate:focused":Y[10]||(Y[10]=fe=>ne($.value,fe)),onClick:Y[11]||(Y[11]=fe=>ne($.value,!0)),onKeydown:Y[12]||(Y[12]=fe=>de("second",fe))},null,8,["items","modelValue"]),!e(d)&&!e(w)?(l(),p(H,{key:1,class:"px-3",color:"primary",variant:"flat",onClick:P},{default:a(()=>[j(i(e(c)(`datetime.${O.value}.content`)),1)]),_:1})):r("",!0)])]),_:1},8,["readonly","disabled","label","modelValue"])}}}),qx={class:"text-truncate cursor-pointer"},Hx=Pe({__name:"DateSelect",props:{modelValue:{},disabled:{type:Boolean},readonly:{type:Boolean},clearable:{type:Boolean},label:{},noDataText:{}},emits:["update:modelValue"],setup(f,{emit:T}){const n=f,o=T,g=Ot(),{tt:c,formatGregorianTextualYearMonthDayToLongDate:v}=Oe(),y=B({get:()=>n.modelValue?pc(n.modelValue):null,set:d=>o("update:modelValue",d?mc(d):"")}),k=B(()=>g.global.name.value===wt.Dark),h=B({get:()=>n.modelValue?v(n.modelValue):n.noDataText?n.noDataText:c("Unspecified"),set:d=>{d||(y.value=null)}});return(d,u)=>{const C=Ie("date-time-picker");return l(),p(Je,{"persistent-placeholder":"",readonly:f.readonly,disabled:f.disabled,clearable:f.modelValue?f.clearable:!1,label:f.label,"menu-props":{contentClass:"date-select-menu"},modelValue:h.value,"onUpdate:modelValue":u[1]||(u[1]=F=>h.value=F)},{selection:a(()=>[s("span",qx,i(h.value),1)]),"no-data":a(()=>[t(C,{"is-dark-mode":k.value,"enable-time-picker":!1,clearable:!0,"show-alternate-dates":!0,modelValue:y.value,"onUpdate:modelValue":u[0]||(u[0]=F=>y.value=F)},null,8,["is-dark-mode","modelValue"])]),_:1},8,["readonly","disabled","clearable","label","modelValue"])}}}),Yx={class:"text-truncate cursor-pointer"},Wx=Pe({__name:"FiscalYearStartSelect",props:{modelValue:{},disabled:{type:Boolean},readonly:{type:Boolean},label:{},numeralSystem:{}},emits:["update:modelValue"],setup(f,{emit:T}){const n=f,o=T,g=Ot(),c=B(()=>g.global.name.value===wt.Dark),{disabledDates:v,selectedFiscalYearStart:y,selectedFiscalYearStartValue:k,displayFiscalYearStartDate:h,allowedMinDate:d,allowedMaxDate:u}=vc(n);return Ft(()=>n.modelValue,C=>{C&&(y.value=C)}),Ft(y,C=>{o("update:modelValue",C)}),(C,F)=>{const w=Ie("date-time-picker");return l(),p(Je,{"persistent-placeholder":"",readonly:f.readonly,disabled:f.disabled,label:f.label,"menu-props":{contentClass:"fiscal-year-start-select-menu"},modelValue:e(k),"onUpdate:modelValue":F[1]||(F[1]=m=>vt(k)?k.value=m:null)},{selection:a(()=>[s("span",Yx,i(e(h)),1)]),"no-data":a(()=>[t(w,{"is-dark-mode":c.value,"numeral-system":f.numeralSystem,vertical:!0,"enable-time-picker":!1,"disable-year-select":!0,"no-swipe-and-scroll":!0,"min-date":e(d),"max-date":e(u),"disabled-dates":e(v),modelValue:e(k),"onUpdate:modelValue":F[0]||(F[0]=m=>vt(k)?k.value=m:null)},null,8,["is-dark-mode","numeral-system","min-date","max-date","disabled-dates","modelValue"])]),_:1},8,["readonly","disabled","label","modelValue"])}}}),Kx=["onClick"],Gx=Pe({__name:"ColorSelect",props:{modelValue:{},disabled:{type:Boolean},label:{},columnCount:{},allColorInfos:{}},emits:["update:modelValue"],setup(f,{emit:T}){const n=f,o=T,{getCurrentLanguageTextDirection:g}=Oe(),c=xe("dropdownMenu"),v=L(n.columnCount||7),y=B(()=>g()),k=B(()=>fc(n.allColorInfos,v.value)),h=B({get:()=>n.modelValue,set:C=>o("update:modelValue",C)});function d(C){return ii(C,"id",n.modelValue)}function u(C){C&&ka(()=>{c.value&&c.value.parentElement&&en(c.value.parentElement,null,".row-has-selected-item")})}return(C,F)=>(l(),p(Je,{density:"comfortable","item-title":"icon","item-value":"id","persistent-placeholder":"",disabled:f.disabled,label:f.label,modelValue:h.value,"onUpdate:modelValue":F[0]||(F[0]=w=>h.value=w),"onUpdate:menu":u},{selection:a(({item:w})=>[t(Ro,{class:"cursor-pointer",style:{"padding-top":"3px"}},{default:a(()=>[t(se,{size:"28",icon:e(hn),color:e(bn)(w.raw)},null,8,["icon","color"])]),_:2},1024)]),"no-data":a(()=>[s("div",{class:"color-select-dropdown px-2",ref_key:"dropdownMenu",ref:c},[(l(!0),b(ue,null,$e(k.value,(w,m)=>(l(),b("div",{class:be(["color-item",{"row-has-selected-item":d(w)}]),style:_l(`grid-template-columns: repeat(${v.value}, minmax(0, 1fr));`),key:m},[(l(!0),b(ue,null,$e(w,x=>(l(),b("div",{class:"text-center",key:x.color},[s("div",{class:"cursor-pointer",onClick:S=>h.value=x.color},[!f.modelValue||f.modelValue!==x.color?(l(),p(se,{key:0,class:"ma-2",size:"28",icon:e(hn),color:e(bn)(x.color)},null,8,["icon","color"])):r("",!0),f.modelValue&&f.modelValue===x.color?(l(),p(Tl,{key:1,class:"right-bottom-icon",color:"primary","offset-x":"8","offset-y":"8",location:`bottom ${y.value===e(un).LTR?"right":"left"}`,icon:e(Ye)},{default:a(()=>[t(se,{class:"ma-2",size:"28",icon:e(hn),color:e(bn)(x.color)},null,8,["icon","color"])]),_:2},1032,["location","icon"])):r("",!0)],8,Kx)]))),128))],6))),128))],512)]),_:1},8,["disabled","label","modelValue"]))}}),Jx=["onClick"],Zx=Pe({__name:"IconSelect",props:{modelValue:{},disabled:{type:Boolean},label:{},iconType:{},color:{},columnCount:{},allIconInfos:{}},emits:["update:modelValue"],setup(f,{emit:T}){const n=f,o=T,{getCurrentLanguageTextDirection:g}=Oe(),c=xe("dropdownMenu"),v=L(n.columnCount||7),y=B(()=>g()),k=B(()=>yc(n.allIconInfos,v.value)),h=B({get:()=>n.modelValue,set:C=>o("update:modelValue",C)});function d(C){return ii(C,"id",n.modelValue)}function u(C){C&&ka(()=>{c.value&&c.value.parentElement&&en(c.value.parentElement,null,".row-has-selected-item")})}return(C,F)=>{const w=Ie("ItemIcon");return l(),p(Je,{density:"comfortable","item-title":"icon","item-value":"id","persistent-placeholder":"",disabled:f.disabled,label:f.label,modelValue:h.value,"onUpdate:modelValue":F[0]||(F[0]=m=>h.value=m),"onUpdate:menu":u},{selection:a(()=>[t(Ro,{class:"cursor-pointer"},{default:a(()=>[t(w,{"icon-type":f.iconType,"icon-id":h.value,color:f.color},null,8,["icon-type","icon-id","color"])]),_:1})]),"no-data":a(()=>[s("div",{class:"icon-select-dropdown px-2",ref_key:"dropdownMenu",ref:c},[(l(!0),b(ue,null,$e(k.value,(m,x)=>(l(),b("div",{class:be(["icon-item",{"row-has-selected-item":d(m)}]),style:_l(`grid-template-columns: repeat(${v.value}, minmax(0, 1fr));`),key:x},[(l(!0),b(ue,null,$e(m,S=>(l(),b("div",{class:"text-center",key:S.id},[s("div",{class:"cursor-pointer",onClick:N=>h.value=S.id},[!f.modelValue||f.modelValue!==S.id?(l(),p(w,{key:0,class:"ma-2","icon-type":"fixed","icon-id":S.icon,color:f.color},null,8,["icon-id","color"])):r("",!0),f.modelValue&&f.modelValue===S.id?(l(),p(Tl,{key:1,class:"right-bottom-icon",color:"primary","offset-x":"8","offset-y":"10",location:`bottom ${y.value===e(un).LTR?"right":"left"}`,icon:e(Ye)},{default:a(()=>[t(w,{class:"ma-2","icon-type":"fixed","icon-id":S.icon,color:f.color},null,8,["icon-id","color"])]),_:2},1032,["location","icon"])):r("",!0)],8,Jx)]))),128))],6))),128))],512)]),_:1},8,["disabled","label","modelValue"])}}}),Qx={class:"d-flex align-center text-truncate cursor-pointer"},Xx={key:0,class:"text-truncate"},eC={key:2,class:"text-truncate"},tC={key:3,class:"text-truncate"},aC={key:4,class:"text-truncate"},lC={key:7,class:"text-truncate"},nC={key:0,class:"mx-2 mt-2"},oC={class:"primary-list-container"},sC={key:0,class:"list-item-header text-truncate"},iC={class:"text-truncate"},rC={key:1,class:"list-item-footer text-truncate"},uC={class:"secondary-list-container"},dC={key:0,class:"list-item-header text-truncate"},cC={class:"text-truncate"},mC={key:1,class:"list-item-footer text-truncate"},pC=Pe({__name:"TwoColumnSelect",props:{density:{},variant:{},disabled:{type:Boolean},readonly:{type:Boolean},label:{},showSelectionPrimaryText:{type:Boolean},showSelectionSecondaryIcon:{type:Boolean},customSelectionPrimaryText:{},customSelectionSecondaryText:{},noItemText:{},autoUpdateMenuPosition:{type:Boolean},primaryValueField:{},primaryHeaderField:{},primaryHeaderI18n:{type:Boolean},primaryFooterField:{},primaryFooterI18n:{type:Boolean},secondaryHeaderField:{},secondaryHeaderI18n:{type:Boolean},secondaryFooterField:{},secondaryFooterI18n:{type:Boolean},modelValue:{},primaryKeyField:{},primaryTitleField:{},primaryTitleI18n:{type:Boolean},primaryIconField:{},primaryIconType:{},primaryColorField:{},primaryHiddenField:{},primarySubItemsField:{},secondaryKeyField:{},secondaryValueField:{},secondaryTitleField:{},secondaryTitleI18n:{type:Boolean},secondaryIconField:{},secondaryIconType:{},secondaryColorField:{},secondaryHiddenField:{},enableFilter:{type:Boolean},filterPlaceholder:{},filterNoItemsText:{},items:{}},emits:["update:modelValue"],setup(f,{emit:T}){const n=f,o=T,{tt:g,ti:c}=Oe(),{filterContent:v,filteredItems:y,getFilteredSubItems:k,getCurrentPrimaryValueBySecondaryValue:h,isSecondaryValueSelected:d,getSelectedPrimaryItem:u,getSelectedSecondaryItem:C,updateCurrentPrimaryValue:F,updateCurrentSecondaryValue:w}=gc(n),m=xe("twoColumnMainSelect"),x=xe("filterInput"),S=xe("dropdownMenu"),N=L(!1),A=B(()=>k(z.value)),$=B({get:()=>h(n.modelValue),set:W=>{const ne=hc(y.value,W,n.primaryValueField);if(!ne)return;const de=bc(k(ne),n.primaryHiddenField);de&&n.secondaryValueField&&o("update:modelValue",de[n.secondaryValueField])}}),I=B({get:()=>n.modelValue,set:W=>{N.value=!1,o("update:modelValue",W)}}),z=B(()=>u($.value)),M=B(()=>C(I.value,z.value)),U=B(()=>n.noItemText?n.noItemText:g("None")),X=B(()=>n.primaryValueField&&n.primaryTitleField?$.value?bs(n.items,$.value,n.primaryValueField,n.primaryTitleField,U.value):U.value:$.value),Z=B(()=>n.secondaryValueField&&n.secondaryTitleField?I.value&&z.value&&z.value[n.primarySubItemsField]?bs(z.value[n.primarySubItemsField],I.value,n.secondaryValueField,n.secondaryTitleField,U.value):U.value:I.value);function q(W){return d(I.value,W)}function O(){n.autoUpdateMenuPosition&&ka(()=>{const W=m.value?.$el.getBoundingClientRect(),ne=S.value?.parentElement?.parentElement,de=ne?.getBoundingClientRect();if(W&&ne&&de){const J=Math.round(W.top+W.height);J+de.height<document.documentElement.scrollHeight&&(ne.style.top=J+"px")}})}function V(W){F($,W),O()}function _(W){w(I,W)}function D(W){W&&ka(()=>{S.value&&S.value.parentElement&&(en(S.value.parentElement,".primary-list-container",".primary-list-item-selected"),en(S.value.parentElement,".secondary-list-container",".secondary-list-item-selected"))})}function P(W,ne){W&&ne&&ka(()=>{zl(W?.$el,"input"),O()})}return(W,ne)=>{const de=Ie("ItemIcon");return l(),p(e(Je),{ref_key:"twoColumnMainSelect",ref:m,"persistent-placeholder":"",density:f.density,variant:f.variant,readonly:f.readonly,disabled:f.disabled,label:f.label,"menu-props":{contentClass:"two-column-select-menu"},modelValue:I.value,"onUpdate:modelValue":ne[3]||(ne[3]=J=>I.value=J),menu:N.value,"onUpdate:menu":[ne[4]||(ne[4]=J=>N.value=J),D]},{selection:a(()=>[s("div",Qx,[f.customSelectionPrimaryText?(l(),b("span",Xx,i(f.customSelectionPrimaryText),1)):r("",!0),f.customSelectionPrimaryText&&f.customSelectionSecondaryText?(l(),p(se,{key:1,class:"icon-with-direction disabled",icon:e(ns),size:"23"},null,8,["icon"])):r("",!0),f.customSelectionPrimaryText&&f.customSelectionSecondaryText?(l(),b("span",eC,i(f.customSelectionSecondaryText),1)):r("",!0),!f.customSelectionPrimaryText&&!z.value&&!M.value?(l(),b("span",tC,i(U.value),1)):r("",!0),!f.customSelectionPrimaryText&&f.showSelectionPrimaryText&&z.value?(l(),b("span",aC,i(X.value),1)):r("",!0),!f.customSelectionPrimaryText&&f.showSelectionPrimaryText&&z.value&&M.value?(l(),p(se,{key:5,class:"icon-with-direction disabled",icon:e(ns),size:"23"},null,8,["icon"])):r("",!0),!f.customSelectionPrimaryText&&M.value&&f.showSelectionSecondaryIcon?(l(),p(de,{key:6,class:"me-2",size:"21.5px","icon-type":f.secondaryIconType,"icon-id":M.value&&f.secondaryIconField?M.value[f.secondaryIconField]:null,color:M.value&&f.secondaryColorField?M.value[f.secondaryColorField]:null},null,8,["icon-type","icon-id","color"])):r("",!0),!f.customSelectionPrimaryText&&M.value?(l(),b("span",lC,i(Z.value),1)):r("",!0)])]),"no-data":a(()=>[f.enableFilter?(l(),b("div",nC,[t(e(dt),{eager:"",ref_key:"filterInput",ref:x,density:"compact","prepend-inner-icon":e(Lo),placeholder:f.filterPlaceholder,modelValue:e(v),"onUpdate:modelValue":ne[0]||(ne[0]=J=>vt(v)?v.value=J:null),"onClick:control":ne[1]||(ne[1]=J=>P(x.value,!0)),"onUpdate:focused":ne[2]||(ne[2]=J=>P(x.value,J))},null,8,["prepend-inner-icon","placeholder","modelValue"])])):r("",!0),Pa(s("div",{class:"mx-4 my-3"},i(f.filterNoItemsText),513),[[Ba,!e(y)||!e(y).length]]),Pa(s("div",{ref_key:"dropdownMenu",ref:S,class:"two-column-list-container"},[s("div",oC,[t(ze,{class:be({"list-item-with-header":!!f.primaryHeaderField,"list-item-with-footer":!!f.primaryFooterField})},{default:a(()=>[(l(!0),b(ue,null,$e(e(y),J=>(l(),p(le,{class:be({"primary-list-item-selected v-list-item--active text-primary":J===z.value}),key:f.primaryKeyField?J[f.primaryKeyField]:JSON.stringify(J),onClick:Y=>V(J)},{prepend:a(()=>[f.primaryIconField?(l(),p(de,{key:0,class:"me-2","icon-type":f.primaryIconType,"icon-id":f.primaryIconField?J[f.primaryIconField]:void 0,color:f.primaryColorField?J[f.primaryColorField]:void 0},null,8,["icon-type","icon-id","color"])):r("",!0)]),title:a(()=>[f.primaryHeaderField?(l(),b("div",sC,i(f.primaryHeaderField?e(c)(J[f.primaryHeaderField],!!f.primaryHeaderI18n):""),1)):r("",!0),s("div",iC,i(f.primaryTitleField?e(c)(J[f.primaryTitleField],!!f.primaryTitleI18n):""),1),f.primaryFooterField?(l(),b("div",rC,i(f.primaryFooterField?e(c)(J[f.primaryFooterField],!!f.primaryFooterI18n):""),1)):r("",!0)]),_:2},1032,["class","onClick"]))),128))]),_:1},8,["class"])]),s("div",uC,[z.value&&f.primarySubItemsField&&z.value[f.primarySubItemsField]?(l(),p(ze,{key:0,class:be({"list-item-with-header":!!f.secondaryHeaderField,"list-item-with-footer":!!f.secondaryFooterField})},{default:a(()=>[(l(!0),b(ue,null,$e(A.value,J=>(l(),p(le,{class:be({"secondary-list-item-selected v-list-item--active text-primary":q(J)}),key:f.secondaryKeyField?J[f.secondaryKeyField]:JSON.stringify(J),onClick:Y=>_(J)},{prepend:a(()=>[f.secondaryIconField?(l(),p(de,{key:0,class:"me-2","icon-type":f.secondaryIconType,"icon-id":f.secondaryIconField?J[f.secondaryIconField]:void 0,color:f.secondaryColorField?J[f.secondaryColorField]:void 0},null,8,["icon-type","icon-id","color"])):r("",!0)]),title:a(()=>[f.secondaryHeaderField?(l(),b("div",dC,i(f.secondaryHeaderField?e(c)(J[f.secondaryHeaderField],!!f.secondaryHeaderI18n):""),1)):r("",!0),s("div",cC,i(e(c)(f.secondaryTitleField?J[f.secondaryTitleField]:"",!!f.secondaryTitleI18n)),1),f.secondaryFooterField?(l(),b("div",mC,i(f.secondaryFooterField?e(c)(J[f.secondaryFooterField],!!f.secondaryFooterI18n):""),1)):r("",!0)]),_:2},1032,["class","onClick"]))),128))]),_:1},8,["class"])):r("",!0)])],512),[[Ba,e(y)&&e(y).length]])]),_:1},8,["density","variant","readonly","disabled","label","modelValue","menu"])}}}),vC={class:"text-truncate cursor-pointer"},fC={class:"schedule-frequency-type-container"},yC={class:"schedule-frequency-value-container"},gC=Pe({__name:"ScheduleFrequencySelect",props:{type:{},modelValue:{},disabled:{type:Boolean},readonly:{type:Boolean},label:{}},emits:["update:type","update:modelValue"],setup(f,{emit:T}){const n=f,o=T,{tt:g,getMultiMonthdayShortNames:c,getMultiWeekdayLongNames:v}=Oe(),{allTransactionScheduledFrequencyTypes:y,allWeekDays:k,allAvailableMonthDays:h,getFrequencyValues:d}=kc(),u=ra(),C=xe("dropdownMenu"),F=L(!1),w=B(()=>u.currentUserFirstDayOfWeek),m=B({get:()=>n.type,set:I=>{n.type!==I&&(o("update:type",I),I===ml.Weekly.type?x.value=[w.value]:I===ml.Monthly.type?x.value=[1]:x.value=[])}}),x=B({get:()=>d(n.modelValue),set:I=>{o("update:modelValue",ks(I).join(","))}}),S=B(()=>m.value===ml.Disabled.type?g("Disabled"):m.value===ml.Weekly.type?x.value.length?g("format.misc.everyMultiDaysOfWeek",{days:v(x.value,w.value)}):g("Weekly"):m.value===ml.Monthly.type?x.value.length?g("format.misc.everyMultiDaysOfMonth",{days:c(x.value)}):g("Monthly"):"");function N(I,z){const M=x.value,U=[];for(const X of M)(X!==I||z)&&U.push(X);z&&U.push(I),x.value=ks(U)}function A(I){return x.value.indexOf(I)>=0}function $(I){I&&ka(()=>{C.value&&C.value.parentElement&&en(C.value.parentElement,".schedule-frequency-value-container",".frequency-value-selected")})}return(I,z)=>(l(),p(Je,{"persistent-placeholder":"",readonly:f.readonly,disabled:f.disabled,label:f.label,"menu-props":{contentClass:"schedule-frequency-select-menu"},modelValue:m.value,"onUpdate:modelValue":z[2]||(z[2]=M=>m.value=M),menu:F.value,"onUpdate:menu":[z[3]||(z[3]=M=>F.value=M),$]},{selection:a(()=>[s("span",vC,i(S.value),1)]),"no-data":a(()=>[s("div",{ref_key:"dropdownMenu",ref:C,class:"schedule-frequency-container"},[s("div",fC,[t(ze,null,{default:a(()=>[(l(!0),b(ue,null,$e(e(y),M=>(l(),p(le,{class:be({"v-list-item--active text-primary":M.type===m.value}),key:M.type,title:M.displayName,onClick:U=>m.value=M.type},null,8,["class","title","onClick"]))),128))]),_:1})]),s("div",yC,[m.value===e(ml).Disabled.type?(l(),p(ze,{key:0},{default:a(()=>[t(le,{title:e(g)("None")},null,8,["title"])]),_:1})):m.value===e(ml).Weekly.type?(l(),p(ze,{key:1,"select-strategy":"classic",selected:x.value,"onUpdate:selected":z[0]||(z[0]=M=>x.value=M)},{default:a(()=>[(l(!0),b(ue,null,$e(e(k),M=>(l(),p(le,{key:M.type,value:M.type,title:M.displayName,class:be({"frequency-value-selected v-list-item--active text-primary":A(M.type)})},{prepend:a(({isActive:U})=>[t(za,{density:"compact",class:"me-1","model-value":U,"onUpdate:modelValue":X=>N(M.type,X)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1032,["value","title","class"]))),128))]),_:1},8,["selected"])):m.value===e(ml).Monthly.type?(l(),p(ze,{key:2,"select-strategy":"classic",selected:x.value,"onUpdate:selected":z[1]||(z[1]=M=>x.value=M)},{default:a(()=>[(l(!0),b(ue,null,$e(e(h),M=>(l(),p(le,{key:M.day,value:M.day,title:M.displayName,class:be({"frequency-value-selected v-list-item--active text-primary":A(M.day)})},{prepend:a(({isActive:U})=>[t(za,{density:"compact",class:"me-1","model-value":U,"onUpdate:modelValue":X=>N(M.day,X)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1032,["value","title","class"]))),128))]),_:1},8,["selected"])):r("",!0)])],512)]),_:1},8,["readonly","disabled","label","modelValue","menu"]))}}),hC=["onClick"],bC={class:"d-flex align-center gap-x-2"},kC={class:"d-flex align-center gap-2"},_C={class:"text-h4 step-number"},TC={style:{"line-height":"0"}},xC={class:"text-sm font-weight-medium step-title"},CC={class:"text-xs step-subtitle"},wC={key:0,class:"slide-group-stepper-link-line"},AC=["onClick"],IC={class:"d-flex align-center gap-x-2"},SC={class:"d-flex align-center gap-2"},VC={class:"text-h4 step-number"},$C={style:{"line-height":"0"}},DC={class:"text-sm font-weight-medium step-title"},FC={class:"text-xs step-subtitle"},NC=Pe({__name:"StepsBar",props:{steps:{},currentStep:{},clickable:{type:[String,Boolean]},minWidth:{}},emits:["step:change"],setup(f,{emit:T}){const n=f,o=T,{getCurrentNumeralSystemType:g}=Oe(),c=B(()=>g()),v=B(()=>n.clickable!=="false"&&n.clickable!==!1);function y(u){return c.value.replaceWesternArabicDigitsToLocalizedDigits(u.toString().padStart(2,Al.WesternArabicNumerals.digitZero))}function k(u){v.value&&o("step:change",u.name)}function h(u){return n.currentStep===u.name}function d(u){for(const[C,F]of Da(n.steps))if(C.name===n.currentStep)return u<F;return!1}return(u,C)=>(l(),b(ue,null,[f.minWidth?(l(),b("div",{key:0,class:"d-flex",style:_l(`min-width: ${f.minWidth}px`)},null,4)):r("",!0),t(bo,{class:"slide-group-with-stepper mb-10 hidden-xs","show-arrows":""},{default:a(()=>[(l(!0),b(ue,null,$e(f.steps,(F,w)=>(l(),p(ko,{key:w},{default:a(()=>[s("div",{class:be(["mx-1",{"slide-group-step-active":h(F),"slide-group-step-completed":d(w),"cursor-pointer":v.value}]),onClick:m=>k(F)},[s("div",bC,[s("div",kC,[C[0]||(C[0]=s("div",{class:"d-flex align-center justify-center",style:{"block-size":"24px","inline-size":"24px"}},[s("div",{class:"slide-group-stepper-indicator"})],-1)),s("h4",_C,i(y(w+1)),1)]),s("div",TC,[s("h6",xC,i(F.title),1),s("span",CC,i(F.subTitle),1)]),w<f.steps.length-1?(l(),b("div",wC)):r("",!0)])],10,hC)]),_:2},1024))),128))]),_:1}),t(bo,{class:"slide-group-with-stepper mb-3 hidden-sm-and-up",direction:"vertical"},{default:a(()=>[(l(!0),b(ue,null,$e(f.steps,(F,w)=>(l(),p(ko,{key:w},{default:a(()=>[s("div",{class:be(["mx-1 mb-3",{"slide-group-step-active":h(F),"slide-group-step-completed":d(w),"cursor-pointer":v.value}]),onClick:m=>k(F)},[s("div",IC,[s("div",SC,[C[1]||(C[1]=s("div",{class:"d-flex align-center justify-center",style:{"block-size":"24px","inline-size":"24px"}},[s("div",{class:"slide-group-stepper-indicator"})],-1)),s("h4",VC,i(y(w+1)),1)]),s("div",$C,[s("h6",DC,i(F.title),1),s("span",FC,i(F.subTitle),1)])])],10,AC)]),_:2},1024))),128))]),_:1})],64))}}),MC=Pe({__name:"PieChart",props:{skeleton:{type:Boolean},items:{},idField:{},nameField:{},valueField:{},percentField:{},colorField:{},hiddenField:{},minValidPercent:{},defaultCurrency:{},showValue:{type:Boolean},showPercent:{type:Boolean},enableClickItem:{type:Boolean}},emits:["click"],setup(f,{emit:T}){const n=f,o=T,g=Ot(),{formatAmountToLocalizedNumeralsWithCurrency:c}=Oe(),{selectedIndex:v,validItems:y}=_c(n),k=L({}),h=B(()=>g.global.name.value===wt.Dark),d=B(()=>{const S={};for(const N of n.items){let A="";n.idField&&N[n.idField]?A=N[n.idField]:A=N[n.nameField],S[A]=N}return S}),u=B(()=>{const S=[];for(const N of y.value)S.push({...N,itemStyle:{color:N.color},selected:!0});return S}),C=B(()=>{for(const S of y.value)if(Co(k.value)&&!k.value[S.id])return!0;return!1}),F=B(()=>{let S=0,N=null,A=0;for(const[$,I]of Da(y.value))Co(k.value)&&!k.value[$.id]||(N===null&&(N=$.value),N!==null&&(I<v.value?A+=$.value:I===v.value&&(A+=$.value/2)),S+=$.value);return A&&S>0?A/S:0}),w=B(()=>({tooltip:{trigger:"item",backgroundColor:h.value?"#333":"#fff",borderColor:h.value?"#333":"#fff",textStyle:{color:h.value?"#eee":"#333"},formatter:S=>{const N=S.data,A=N?N.displayName:"",$=N?N.displayValue:c(S.value);let I=N?N.displayPercent:S.percent+"%";C.value&&(I=S.percent+"%");let z=`<div><span class="chart-pointer" style="background-color: ${S.color}"></span>`;return A&&(z+=`<div class="d-inline-flex">${A}</div><br/>`),n.showValue&&n.showPercent?z+=`<div class="d-inline-flex"><span>${$}</span><span class="ms-1">(${I})</span></div>`:n.showValue&&!n.showPercent?z+=`<div class="d-inline-flex">${$}</div>`:!n.showValue&&n.showPercent&&(z+=`<div class="d-inline-flex">${I}</div>`),z+="</div>",z}},legend:{orient:"horizontal",type:"scroll",top:0,data:y.value.map(S=>S.name),selected:k.value,textStyle:{color:h.value?"#eee":"#333"},formatter:S=>{const N=d.value[S];return N&&n.nameField&&N[n.nameField]?N[n.nameField]:S}},series:[{type:"pie",data:u.value,top:50,startAngle:-90+F.value*360,radius:[0,"75%"],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},label:{color:h.value?"#eee":"#333",formatter:S=>{const N=S.data;return N?N.displayName:""}},animation:!n.skeleton}],media:[{query:{minWidth:600},option:{legend:{orient:"vertical",left:"left"},series:[{type:"pie",top:0}]}}]}));function m(S){if(!n.enableClickItem||S.componentType!=="series"||S.seriesType!=="pie")return;if(S.event&&S.event.target&&S.event.target.currentStates&&S.event.target.currentStates[0]&&S.event.target.currentStates[0]==="emphasis"){v.value=S.dataIndex;return}if(!S.data)return;const N=S.data;"sourceItem"in N&&o("click",N.sourceItem)}function x(S){k.value=S.selected;const N=y.value[v.value];if(!N||!k.value[N.id]){let A=0;for(const[$,I]of Da(y.value))if(k.value[$.id]){A=I;break}v.value=A}}return(S,N)=>{const A=Ie("v-chart");return l(),p(A,{autoresize:"",class:be(["pie-chart-container",{"transition-in":f.skeleton}]),option:w.value,onClick:m,onLegendselectchanged:x},null,8,["class","option"])}}}),EC=Sn(MC,[["__scopeId","data-v-657136d6"]]),UC=Pe({__name:"RadarChart",props:{skeleton:{type:Boolean},items:{},nameField:{},valueField:{},percentField:{},colorField:{},hiddenField:{},minValidPercent:{},defaultCurrency:{},showValue:{type:Boolean},showPercent:{type:Boolean}},setup(f){const T=f,n=Ot(),{formatAmountToLocalizedNumeralsWithCurrency:o,formatPercentToLocalizedNumerals:g}=Oe(),c=B(()=>n.global.name.value===wt.Dark),v=B(()=>{let k=0,h=0;const d=[],u=[];let C="";if(T.items.length){for(const w of T.items){const m=w[T.valueField];Ht(m)&&m>0&&(!T.hiddenField||!w[T.hiddenField])&&(k+=m,m>h&&(h=m))}for(const w of T.items){const m=w[T.valueField],x=T.percentField?w[T.percentField]:-1;if(Ht(m)&&m>0&&(!T.hiddenField||!w[T.hiddenField])&&(!T.minValidPercent||m/k>T.minValidPercent)){const S=w[T.nameField],N=bn(T.colorField&&w[T.colorField]?w[T.colorField]:Sl[d.length%Sl.length]),A=Ht(x)&&x>=0?x:m/k*100,$=g(A,2,"&lt;0.01"),I=o(m,T.defaultCurrency);d.push({name:S,max:h,color:c.value?"#ccc":"#333"}),u.push(m),C+='<div><span class="chart-pointer" style="background-color: '+N+'"></span>',C+=`<span>${S}</span>`,T.showValue&&T.showPercent?C+=`<span class="ms-1" style="float: inline-end">(${$})</span><span class="ms-5" style="float: inline-end">${I}</span>`:T.showValue&&!T.showPercent?C+=`<span class="ms-5" style="float: inline-end">${I}</span>`:!T.showValue&&T.showPercent&&(C+=`<span class="ms-5" style="float: inline-end">${$}</span>`),C+="</div>"}}}else for(let w=0;w<6;w++)d.push({name:"",max:0,color:c.value?"#ccc":"#333"}),u.push(0);return{totalValidValue:k,maxValue:h,indicators:d,values:u,tooltip:C}}),y=B(()=>({tooltip:{trigger:"item",backgroundColor:c.value?"#333":"#fff",borderColor:c.value?"#333":"#fff",textStyle:{color:c.value?"#eee":"#333"},formatter:()=>v.value.tooltip},radar:{radius:"75%",splitNumber:!T.skeleton&&T.items.length?5:1,splitLine:{lineStyle:{color:!T.skeleton&&T.items.length?"#e8e8e7":"#d3d3d3"}},splitArea:{areaStyle:{color:!T.skeleton&&T.items.length?c.value?["#363534","#1a1a1a"]:["#faf8f4","#fff"]:["#d3d3d3","#d3d3d3"]}},indicator:v.value.indicators},series:!T.skeleton&&T.items.length?[{type:"radar",data:[{value:v.value.values,itemStyle:{color:"#c07d43"},lineStyle:{color:"#c07d43"},areaStyle:{color:c.value?"#c07d4380":"#c07d4340"}}],top:0,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},animation:!T.skeleton}]:[]}));return(k,h)=>{const d=Ie("v-chart");return l(),p(d,{autoresize:"",class:be(["radar-chart-container",{"transition-in":f.skeleton}]),option:y.value},null,8,["class","option"])}}}),PC=Sn(UC,[["__scopeId","data-v-927d0b1b"]]),BC={class:"d-flex align-center justify-center"},LC={class:"text-h4"},RC={class:"text-body-1 text-center text-wrap mt-6"},zC={key:0},OC={key:1},jC={class:"w-100 d-flex justify-center gap-4"},qC=Pe({__name:"DateRangeSelectionDialog",props:{persistent:{type:Boolean},minTime:{},maxTime:{},title:{},hint:{},show:{type:Boolean}},emits:["update:show","dateRange:change","error"],setup(f,{emit:T}){const n=f,o=T,g=Ot(),{tt:c}=Oe(),{dateRange:v,beginDateTime:y,endDateTime:k,presetRanges:h,getFinalDateRange:d}=Tc(n),u=B(()=>g.global.name.value===wt.Dark),C=B({get:()=>n.show||!1,set:m=>o("update:show",m)});function F(){try{const m=d();if(!m)return;o("dateRange:change",m.minUnixTime,m.maxUnixTime)}catch(m){m instanceof Error&&o("error",m.message)}}function w(){o("update:show",!1)}return Ft(()=>n.minTime,m=>{m&&(v.value[0]=Yl(_n(m,bl(),kl())))}),Ft(()=>n.maxTime,m=>{m&&(v.value[1]=Yl(_n(m,bl(),kl())))}),(m,x)=>{const S=Ie("date-time-picker");return l(),p(Tt,{class:"date-range-selection-dialog",width:"640",persistent:!!f.persistent,modelValue:C.value,"onUpdate:modelValue":x[1]||(x[1]=N=>C.value=N)},{default:a(()=>[t(Ee,{class:"pa-2 pa-sm-4 pa-md-4"},{title:a(()=>[s("div",BC,[s("h4",LC,i(f.title),1)])]),subtitle:a(()=>[s("div",RC,[f.hint?(l(),b("p",zC,i(f.hint),1)):r("",!0),e(y)&&e(k)?(l(),b("span",OC,[s("span",null,i(e(y)),1),x[2]||(x[2]=s("span",null," - ",-1)),s("span",null,i(e(k)),1)])):r("",!0),Gl(m.$slots,"default")])]),default:a(()=>[t(ve,{class:"mb-md-4 w-100 d-flex justify-center"},{default:a(()=>[t(S,{"is-dark-mode":u.value,"enable-time-picker":!0,vertical:!0,"preset-dates":e(h),"show-alternate-dates":!0,modelValue:e(v),"onUpdate:modelValue":x[0]||(x[0]=N=>vt(v)?v.value=N:null)},null,8,["is-dark-mode","preset-dates","modelValue"])]),_:1}),t(ve,{class:"overflow-y-visible"},{default:a(()=>[s("div",jC,[t(H,{disabled:!e(v)[0]||!e(v)[1],onClick:F},{default:a(()=>[j(i(e(c)("OK")),1)]),_:1},8,["disabled"]),t(H,{color:"secondary",variant:"tonal",onClick:w},{default:a(()=>[j(i(e(c)("Cancel")),1)]),_:1})])]),_:1})]),_:3})]),_:3},8,["persistent","modelValue"])}}}),HC={class:"d-flex align-center justify-center"},YC={class:"text-h4"},WC={class:"text-body-1 text-center text-wrap mt-6"},KC={key:0},GC={class:"w-100 d-flex justify-center gap-4"},JC=Pe({__name:"MonthSelectionDialog",props:{modelValue:{},title:{},hint:{},show:{type:Boolean},persistent:{type:Boolean}},emits:["update:modelValue","update:show","error"],setup(f,{emit:T}){const n=f,o=T,g=Ot(),{tt:c}=Oe(),v=L(xc(Cc())),y=B(()=>g.global.name.value===wt.Dark),k=B({get:()=>n.show||!1,set:u=>o("update:show",u)});function h(){if(v.value.year<=0||v.value.month0base<0){o("error","Date is too early");return}o("update:modelValue",v.value)}function d(){o("update:show",!1)}return Ft(()=>n.modelValue,u=>{u&&(v.value=u)}),Ft(()=>n.show,u=>{u&&n.modelValue&&(v.value=n.modelValue)}),(u,C)=>{const F=Ie("month-picker");return l(),p(Tt,{class:"month-selection-dialog",width:"640",persistent:!!f.persistent,modelValue:k.value,"onUpdate:modelValue":C[1]||(C[1]=w=>k.value=w)},{default:a(()=>[t(Ee,{class:"pa-2 pa-sm-4 pa-md-4"},{title:a(()=>[s("div",HC,[s("h4",YC,i(f.title),1)])]),subtitle:a(()=>[s("div",WC,[f.hint?(l(),b("p",KC,i(f.hint),1)):r("",!0),Gl(u.$slots,"default")])]),default:a(()=>[t(ve,{class:"mb-md-4 w-100 d-flex justify-center"},{default:a(()=>[t(Ae,{class:"match-height"},{default:a(()=>[t(R,null,{default:a(()=>[t(F,{"is-dark-mode":y.value,modelValue:v.value,"onUpdate:modelValue":C[0]||(C[0]=w=>v.value=w)},null,8,["is-dark-mode","modelValue"])]),_:1})]),_:1})]),_:1}),t(ve,{class:"overflow-y-visible"},{default:a(()=>[s("div",GC,[t(H,{disabled:!v.value,onClick:h},{default:a(()=>[j(i(e(c)("OK")),1)]),_:1},8,["disabled"]),t(H,{color:"secondary",variant:"tonal",onClick:d},{default:a(()=>[j(i(e(c)("Cancel")),1)]),_:1})])]),_:1})]),_:3})]),_:3},8,["persistent","modelValue"])}}}),ZC={class:"d-flex align-center justify-center"},QC={class:"text-h4"},XC={class:"text-body-1 text-center text-wrap mt-6"},e2={key:0},t2={key:1},a2={class:"w-100 d-flex justify-center gap-4"},l2=Pe({__name:"MonthRangeSelectionDialog",props:{persistent:{type:Boolean},minTime:{},maxTime:{},title:{},hint:{},show:{type:Boolean}},emits:["update:show","dateRange:change","error"],setup(f,{emit:T}){const n=f,o=T,g=Ot(),{tt:c}=Oe(),{dateRange:v,beginDateTime:y,endDateTime:k,getFinalMonthRange:h}=wc(n),d=B(()=>g.global.name.value===wt.Dark),u=B({get:()=>n.show||!1,set:w=>o("update:show",w)});function C(){try{const w=h();if(!w)return;o("dateRange:change",w.minYearMonth,w.maxYearMonth)}catch(w){w instanceof Error&&o("error",w.message)}}function F(){o("update:show",!1)}return Ft(()=>n.minTime,w=>{if(w){const m=_s(w);m&&(v.value[0]=m)}}),Ft(()=>n.maxTime,w=>{if(w){const m=_s(w);m&&(v.value[1]=m)}}),(w,m)=>{const x=Ie("month-picker");return l(),p(Tt,{class:"month-range-selection-dialog",width:"640",persistent:!!f.persistent,modelValue:u.value,"onUpdate:modelValue":m[2]||(m[2]=S=>u.value=S)},{default:a(()=>[t(Ee,{class:"pa-2 pa-sm-4 pa-md-4"},{title:a(()=>[s("div",ZC,[s("h4",QC,i(f.title),1)])]),subtitle:a(()=>[s("div",XC,[f.hint?(l(),b("p",e2,i(f.hint),1)):r("",!0),e(y)&&e(k)?(l(),b("span",t2,[s("span",null,i(e(y)),1),m[3]||(m[3]=s("span",null," - ",-1)),s("span",null,i(e(k)),1)])):r("",!0),Gl(w.$slots,"default")])]),default:a(()=>[t(ve,{class:"mb-md-4 w-100 d-flex justify-center"},{default:a(()=>[t(Ae,{class:"match-height"},{default:a(()=>[t(R,{cols:"12",md:"6"},{default:a(()=>[t(x,{"is-dark-mode":d.value,modelValue:e(v)[0],"onUpdate:modelValue":m[0]||(m[0]=S=>e(v)[0]=S)},null,8,["is-dark-mode","modelValue"])]),_:1}),t(R,{cols:"12",md:"6"},{default:a(()=>[t(x,{"is-dark-mode":d.value,modelValue:e(v)[1],"onUpdate:modelValue":m[1]||(m[1]=S=>e(v)[1]=S)},null,8,["is-dark-mode","modelValue"])]),_:1})]),_:1})]),_:1}),t(ve,{class:"overflow-y-visible"},{default:a(()=>[s("div",a2,[t(H,{disabled:!e(v)[0]||!e(v)[1],onClick:C},{default:a(()=>[j(i(e(c)("OK")),1)]),_:1},8,["disabled"]),t(H,{color:"secondary",variant:"tonal",onClick:F},{default:a(()=>[j(i(e(c)("Cancel")),1)]),_:1})])]),_:1})]),_:3})]),_:3},8,["persistent","modelValue"])}}}),n2=Pe({__name:"AccountBalanceTrendsChart",props:{legendName:{},skeleton:{type:Boolean},type:{},items:{},dateAggregationType:{},fiscalYearStart:{},account:{}},setup(f){const T=f,n=Ot(),{tt:o,getCurrentLanguageTextDirection:g,formatAmountToLocalizedNumeralsWithCurrency:c}=Oe(),{allDataItems:v,allDisplayDateRanges:y}=Ac(T),k=ra(),h=B(()=>g()),d=B(()=>n.global.name.value===wt.Dark),u=B(()=>{const w={id:"accountBalance",name:T.legendName,itemStyle:{color:`#${Sl[0]}`},selected:!0,type:"line",stack:"a",animation:!T.skeleton,data:[]};if(T.type===ol.Area.type)w.areaStyle={};else if(T.type===ol.Column.type)w.type="bar";else if(T.type===ol.Candlestick.type){const m=jo(k.currentUserExpenseAmountColor,k.currentUserIncomeAmountColor,d.value);w.type="candlestick",w.itemStyle.color=m.incomeAmountColor,w.itemStyle.color0=m.expenseAmountColor,w.itemStyle.borderColor=m.incomeAmountColor,w.itemStyle.borderColor0=m.expenseAmountColor}for(const m of v.value)T.type===ol.Candlestick.type?w.data.push([m.openingBalance,m.closingBalance,m.minimumBalance,m.maximumBalance]):w.data.push(m.closingBalance);return[w]}),C=B(()=>{let w=Number.MIN_SAFE_INTEGER,m=Number.MAX_SAFE_INTEGER,x=90;if(!u.value||!u.value.length)return x;for(const z of u.value)for(const M of z.data){let U;li(M)?U=M[1]:U=M,U>w&&(w=U),U<m&&(m=U)}const S=c(w,T.account.currency),N=c(m,T.account.currency),A=S.length>N.length?S:N,I=document.createElement("canvas").getContext("2d");if(I){I.font="12px Arial";const z=I.measureText(A),M=Math.round(z.width)+20;M>=200&&(x=200),M>90&&(x=M)}return x}),F=B(()=>({tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:d.value?"#333":"#fff",color:d.value?"#eee":"#333"}},backgroundColor:d.value?"#333":"#fff",borderColor:d.value?"#333":"#fff",textStyle:{color:d.value?"#eee":"#333"},formatter:w=>{if(T.type===ol.Candlestick.type){const m=w[0].dataIndex,x=v.value[m],S=[{name:o("Opening Balance"),value:c(x.openingBalance,T.account.currency)},{name:o("Closing Balance"),value:c(x.closingBalance,T.account.currency)},{name:o("Minimum Balance"),value:c(x.minimumBalance,T.account.currency)},{name:o("Maximum Balance"),value:c(x.maximumBalance,T.account.currency)},{name:o("Median Balance"),value:c(x.medianBalance,T.account.currency)},{name:o("Average Balance"),value:c(x.averageBalance,T.account.currency)}];let N=`${w[0].name} ${T.legendName}<br/>`;for(const[A,$]of Da(S))N+=`<div><span class="chart-pointer" style="background-color: #${Sl[$]}"></span><span>${A.name}</span><span class="ms-5" style="float: inline-end">${A.value}</span><br/></div>`;return N}else{const m=w[0].data,x=c(m,T.account.currency);return`${w[0].name}<br/><div><span class="chart-pointer" style="background-color: #`+Sl[0]+`"></span><span>${T.legendName}</span><span class="ms-5" style="float: inline-end">${x}</span><br/></div>`}}},grid:{left:C.value,right:20,top:0,bottom:20},xAxis:[{type:"category",data:y.value,inverse:h.value===un.RTL,axisLabel:{color:d.value?"#888":"#666"}}],yAxis:[{type:"value",axisLabel:{color:d.value?"#888":"#666",formatter:w=>c(parseInt(w),T.account.currency)},axisPointer:{label:{formatter:w=>c(Math.trunc(w.value),T.account.currency)}},splitLine:{lineStyle:{color:d.value?"#4f4f4f":"#e1e6f2"}}}],series:u.value}));return(w,m)=>{const x=Ie("v-chart");return l(),p(x,{autoresize:"",class:be(["account-balance-trends-chart-container",{"transition-in":f.skeleton}]),option:F.value},null,8,["class","option"])}}}),o2=Sn(n2,[["__scopeId","data-v-9fa3d102"]]);const s2=Pe({__name:"AccountAndCategorySankeyChart",props:{skeleton:{type:Boolean},items:{},defaultCurrency:{},enableClickItem:{type:Boolean}},emits:["click"],setup(f,{emit:T}){const n=f,o=T,g=Ot(),{tt:c,formatAmountToLocalizedNumeralsWithCurrency:v,formatPercentToLocalizedNumerals:y}=Oe(),k=ra(),h={[Et.IncomeByPrimaryCategory]:"category",[Et.IncomeBySecondaryCategory]:"category",[Et.IncomeByAccount]:"account",[Et.ExpenseByAccount]:"account",[Et.NetCashFlow]:"netCashFlow",[Et.ExpenseBySecondaryCategory]:"category",[Et.ExpenseByPrimaryCategory]:"category"},d={[Et.IncomeByPrimaryCategory]:0,[Et.IncomeBySecondaryCategory]:1,[Et.IncomeByAccount]:2,[Et.ExpenseByAccount]:3,[Et.NetCashFlow]:4,[Et.ExpenseBySecondaryCategory]:4,[Et.ExpenseByPrimaryCategory]:5},u=B(()=>g.global.name.value===wt.Dark),C=B(()=>{const m=[],x=[];for(const N of n.items){if(N.hidden)continue;const A=h[N.type],$=d[N.type];if(!A||A==="netCashFlow"||$===void 0||N.totalAmount===0&&N.outflows.length===0)continue;const I={dateItemType:N.type,itemType:A,itemId:N.id,name:`${N.type}:${N.id}`,displayName:N.name,totalAmount:N.totalAmount,percent:N.percent,depth:$};if(!Ht(I.percent)&&I.dateItemType===Et.IncomeByAccount&&(I.itemStyle={color:"#aaa",opacity:.5}),I.dateItemType===Et.ExpenseByAccount)for(const M of N.outflows)M.relatedItem.type===Et.NetCashFlow&&(I.accountNetCashFlow=(I.accountNetCashFlow??0)+M.amount);m.push(I);const z={};for(const M of N.outflows)if(M.relatedItem&&M.relatedItem){const X=`${N.type}:${N.id}-${M.relatedItem.type}:${M.relatedItem.id}`;let Z=z[X];Z||(Z={relatedItem:M.relatedItem,amount:0},z[X]=Z),Z.amount+=M.amount}for(const M of Xs(z)){const U=M.relatedItem,X=h[U.type];if(!X)continue;const Z={sourceItemType:A,sourceItemId:N.id,source:`${N.type}:${N.id}`,sourceDisplayName:N.name,targetItemType:X,targetItemId:U.id,target:`${U.type}:${U.id}`,targetDisplayName:U.name,value:M.amount};x.push(Z)}}return{nodes:m,links:x}}),F=B(()=>{const m=jo(k.currentUserExpenseAmountColor,k.currentUserIncomeAmountColor,u.value);return{tooltip:{trigger:"item",backgroundColor:u.value?"#333":"#fff",borderColor:u.value?"#333":"#fff",textStyle:{color:u.value?"#eee":"#333"},formatter:x=>{if(x.dataType==="node"){const S=x.data,N=S.totalAmount,A=v(N,n.defaultCurrency);let $="";S.dateItemType===Et.IncomeByPrimaryCategory?$=c("Income By Primary Category"):S.dateItemType===Et.IncomeBySecondaryCategory?$=c("Income By Secondary Category"):S.dateItemType===Et.IncomeByAccount?$=c("Income By Account"):S.dateItemType===Et.ExpenseByAccount?$=c("Expense By Account"):S.dateItemType===Et.NetCashFlow?$=c("Net Cash Flow"):S.dateItemType===Et.ExpenseBySecondaryCategory?$=c("Expense By Secondary Category"):S.dateItemType===Et.ExpenseByPrimaryCategory&&($=c("Expense By Primary Category"));let I=`<div><span>${S.displayName}</span>`;if($&&(S.dateItemType!==Et.IncomeByAccount||Ht(S.percent))?I=`<div class="mb-1">${$}</div>`+I:S.dateItemType===Et.IncomeByAccount&&(I=`<div class="mb-1">${c("Account Balance")}</div>`+I),Ht(S.percent)&&S.percent>0){const z=y(S.percent,2,"&lt;0.01");I+=`<span class="ms-1" style="float: inline-end">(${z})</span>`}if(I+=`<span class="ms-5" style="float: inline-end">${A}</span></div>`,Ht(S.accountNetCashFlow)&&S.accountNetCashFlow!==0){const z=v(S.accountNetCashFlow,n.defaultCurrency);I+=`<div class="mt-1"><span>${c("Net Cash Flow")}</span><span class="ms-5" style="float: inline-end">${z}</span></div>`}return I}else if(x.dataType==="edge"){const S=x.data,N=Ht(x.value)?x.value:0,A=v(N,n.defaultCurrency);return`<div><span>${S.sourceDisplayName} → ${S.targetDisplayName}</span><span class="ms-5" style="float: inline-end">${A}</span></div>`}else return""}},series:[{type:"sankey",left:10,top:0,bottom:10,roam:!0,layoutIterations:0,label:{formatter:x=>x.data.displayName},levels:[{depth:0,itemStyle:{color:m.incomeAmountColor,opacity:.6},lineStyle:{color:"source",opacity:.3}},{depth:1,itemStyle:{color:m.incomeAmountColor,opacity:.4},lineStyle:{color:"source",opacity:.2}},{depth:2,itemStyle:{color:"#c07d43",opacity:.5},lineStyle:{color:"source",opacity:.2}},{depth:3,itemStyle:{color:"#c07d43",opacity:.5},lineStyle:{color:"source",opacity:.2}},{depth:4,itemStyle:{color:m.expenseAmountColor,opacity:.4},lineStyle:{color:"source",opacity:.2}},{depth:5,itemStyle:{color:m.expenseAmountColor,opacity:.6},lineStyle:{color:"source",opacity:.3}}],emphasis:{focus:"adjacency"},data:C.value.nodes,links:C.value.links,animation:!n.skeleton}]}});function w(m){if(!(!n.enableClickItem||m.componentType!=="series"||m.seriesType!=="sankey")&&m.data){if(m.dataType==="node"){const x=m.data;if(x.itemType==="netCashFlow")return;o("click",x.itemType,x.itemId)}else if(m.dataType==="edge"){const x=m.data;if(x.sourceItemType==="netCashFlow")return;x.sourceItemType===x.targetItemType&&x.sourceItemId===x.targetItemId?o("click",x.sourceItemType,x.sourceItemId):x.targetItemType!=="netCashFlow"&&o("click",x.sourceItemType,x.sourceItemId,x.targetItemType,x.targetItemId)}}}return(m,x)=>{const S=Ie("v-chart");return l(),p(S,{autoresize:"",class:be(["account-category-sankey-chart-container",{"transition-in":f.skeleton}]),option:F.value,onClick:w},null,8,["class","option"])}}}),i2=Sn(s2,[["__scopeId","data-v-eb4e3008"]]),r2={class:"d-flex align-center justify-center"},u2={class:"text-h4"},d2={class:"text-body-1 text-center text-wrap mt-4"},c2={class:"w-100 d-flex justify-center"},m2=["src"],p2={class:"w-100 d-flex justify-center gap-4"},v2=Pe({__name:"SwitchToMobileDialog",props:{show:{type:Boolean}},emits:["update:show"],setup(f,{emit:T}){const n=f,o=T,{tt:g}=Oe(),c=Ic(),v=Sc(),y=B({get:()=>n.show,set:k=>{o("update:show",k)}});return(k,h)=>(l(),p(Tt,{width:"440",modelValue:y.value,"onUpdate:modelValue":h[1]||(h[1]=d=>y.value=d)},{default:a(()=>[t(Ee,{class:"pa-2 pa-sm-4 pa-md-4"},{title:a(()=>[s("div",r2,[s("h4",u2,i(e(g)("Use on Mobile Device")),1)])]),subtitle:a(()=>[s("div",d2,i(e(g)("You can scan the QR code below on your mobile device.")),1)]),default:a(()=>[t(ve,{class:"mb-md-4"},{default:a(()=>[t(Ae,null,{default:a(()=>[t(R,{cols:"12",md:"12"},{default:a(()=>[s("div",c2,[s("img",{alt:"qrcode",class:"img-url-qrcode",src:e(c)},null,8,m2)])]),_:1})]),_:1})]),_:1}),t(ve,{class:"overflow-y-visible"},{default:a(()=>[s("div",p2,[t(H,{href:e(v)},{default:a(()=>[j(i(e(g)("Switch to Mobile Version")),1)]),_:1},8,["href"]),t(H,{color:"secondary",variant:"tonal",onClick:h[0]||(h[0]=d=>y.value=!1)},{default:a(()=>[j(i(e(g)("Close")),1)]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),f2={class:"d-inline-flex"},y2=["src"],g2={class:"ms-2"},h2=Pe({__name:"DesktopApp",setup(f){const{tt:T,getCurrentLanguageInfo:n,setLanguage:o,initLocale:g}=Oe(),c=Ot(),v=qa(),y=Ha(),k=ra(),h=Wo(),d=Ko(),u=(()=>{if(!window.location.hash)return"/";const m=window.location.hash,x=m.indexOf("#/");if(x<0)return"/";const S=m.substring(x+1),N=S.indexOf("?");return N<0?S:S.substring(0,N)})(),C=L(!1),F=B(()=>v.currentNotification);xs(()=>{document.addEventListener("DOMContentLoaded",()=>{const m=n();Vc(m?.alternativeLanguageTag)})}),Ft(F,m=>{C.value=!!m}),y.appSettings.theme===wt.Light?c.change(wt.Light):y.appSettings.theme===wt.Dark?c.change(wt.Dark):c.change(zo()),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",function(m){y.appSettings.theme==="auto"&&(m.matches?c.change(wt.Dark):c.change(wt.Light))});let w=g(k.currentUserLanguage,y.appSettings.timeZone);return y.updateLocalizedDefaultSettings(w),_o(k.currentUserExpenseAmountColor,k.currentUserIncomeAmountColor),vl()&&u!=="/verify_email"&&u!=="/resetpassword"&&u!=="/oauth2_callback"&&(!y.appSettings.applicationLock||In())&&(h.refreshTokenAndRevokeOldToken().then(m=>{m.user&&(w=o(m.user.language),y.updateLocalizedDefaultSettings(w),_o(m.user.expenseAmountColor,m.user.incomeAmountColor),m.notificationContent&&v.setNotificationContent(m.notificationContent))}),y.appSettings.autoUpdateExchangeRatesData&&d.getLatestExchangeRates({silent:!0,force:!1})),$c()&&Fi("./sw.js",{registrationOptions:{scope:"./"}}),(m,x)=>{const S=Ie("router-view");return l(),b(ue,null,[t(Hs,null,{default:a(()=>[t(S)]),_:1}),t($o,{class:"cursor-pointer",color:"notification-background",location:"top","multi-line":!0,timeout:-1,"close-on-content-click":!0,modelValue:C.value,"onUpdate:modelValue":x[0]||(x[0]=N=>C.value=N)},{default:a(()=>[t(yt,{activator:"parent"},{default:a(()=>[j(i(e(T)("Click to close")),1)]),_:1}),s("div",f2,[s("img",{alt:"logo",class:"notification-logo",src:e(rl)},null,8,y2),s("span",g2,i(e(T)("global.app.title")),1)]),s("div",null,i(F.value),1)]),_:1},8,["modelValue"])],64)}}}),ft=Ni(h2),b2=Mi(),di=Ei(Dc()),k2=Lr({components:{VAlert:js,VApp:Hs,VAvatar:Za,VAutocomplete:sa,VBadge:Tl,VBtn:H,VBtnGroup:ln,VBtnToggle:Jn,VCard:Ee,VCardActions:Uo,VCardItem:Gr,VCardSubtitle:Kr,VCardText:ve,VCardTitle:Wr,VCheckbox:za,VCheckboxBtn:Ps,VChip:oa,VDataTable:wn,VDialog:Tt,VDivider:Ke,VExpansionPanel:$l,VExpansionPanelText:Fl,VExpansionPanelTitle:Dl,VExpansionPanels:Vl,VForm:zt,VContainer:Yr,VCol:R,VRow:Ae,VSpacer:pt,VIcon:se,VImg:ht,VInput:Hr,VLabel:Ro,VLayout:nn,VList:ze,VListGroup:Bs,VListImg:qr,VListItem:le,VListItemAction:No,VListItemMedia:jr,VListItemSubtitle:Or,VListItemTitle:ot,VListSubheader:xn,VMain:sn,VMenu:nt,VNavigationDrawer:on,VOverlay:$s,VPagination:Us,VProgressCircular:je,VProgressLinear:ho,VSelect:Je,VSkeletonLoader:ut,VSlideGroup:bo,VSlideGroupItem:ko,VSnackbar:$o,VSwitch:Qa,VTabs:Xa,VTab:qt,VTable:el,VTextarea:La,VTextField:dt,VToolbar:Eo,VTooltip:yt,VWindow:ja,VWindowItem:Pt},icons:{defaultSet:"mdi",aliases:zr,sets:{mdi:Rr}},defaults:{VAlert:{VBtn:{color:void 0}},VAutocomplete:{variant:"outlined",density:"comfortable",color:"primary",hideDetails:"auto"},VAvatar:{variant:"flat",VIcon:{size:24}},VBadge:{color:"primary"},VBtn:{color:"primary"},VCheckbox:{color:"primary",hideDetails:"auto"},VChip:{elevation:0},VList:{color:"primary"},VPagination:{density:"comfortable",activeColor:"primary"},VRadio:{density:"comfortable",color:"primary",hideDetails:"auto"},VSelect:{variant:"outlined",density:"comfortable",color:"primary",hideDetails:"auto"},VSlider:{color:"primary",hideDetails:"auto"},VSwitch:{inset:!0,color:"primary",hideDetails:"auto"},VProgressCircular:{size:40},VSnackbar:{timeout:3e3},VTable:{hover:!0},VTabs:{color:"primary",VSlideGroup:{showArrows:!0}},VTextarea:{variant:"outlined",density:"comfortable",color:"primary",hideDetails:"auto"},VTextField:{variant:"outlined",density:"comfortable",color:"primary",hideDetails:"auto"},VToolbar:{color:"primary"},VTooltip:{location:"top"},VWindow:{touch:!1}},theme:{defaultTheme:"light",themes:{light:{dark:!1,colors:{primary:"#c67e48","primary-darken-1":"#b67443","on-primary":"#ffffff",secondary:"#8c8c8c","secondary-darken-1":"#595754","on-secondary":"#ffffff",success:"#4cd964","success-darken-1":"#40b654","on-success":"#ffffff",info:"#2196f3","info-darken-1":"#1e85d7","on-info":"#ffffff",warning:"#ff9500","warning-darken-1":"#de8201","on-warning":"#ffffff",error:"#ff3b30","error-darken-1":"#e1342b","on-error":"#ffffff",teal:"#009688",background:"#faf8f4","on-background":"#413935",surface:"#fff","on-surface":"#413935","notification-background":"#ffffff","on-notification-background":"#000",grey:"#8c8c8c","grey-50":"#fafafa","grey-100":"#f0f2f8","grey-200":"#eeeeee","grey-300":"#e0e0e0","grey-400":"#bdbdbd","grey-500":"#9e9e9e","grey-600":"#757575","grey-700":"#616161","grey-800":"#424242","grey-900":"#212121","perfect-scrollbar-thumb":"#dedcda","skin-bordered-background":"#fff","skin-bordered-surface":"#fff","expansion-panel-text-custom-bg":"#fafafa"},variables:{"code-color":"#ff8000","overlay-scrim-background":"#413935","tooltip-background":"#212121","tooltip-color":"#ffffff","overlay-scrim-opacity":.5,"hover-opacity":.04,"focus-opacity":.1,"selected-opacity":.08,"activated-opacity":.16,"pressed-opacity":.14,"dragged-opacity":.1,"disabled-opacity":.4,"border-color":"#413f3b","border-opacity":.12,"table-header-color":"#fdfcf9","high-emphasis-opacity":.9,"medium-emphasis-opacity":.7,"shadow-key-umbra-color":"#413935","shadow-xs-opacity":"0.16","shadow-sm-opacity":"0.18","shadow-md-opacity":"0.20","shadow-lg-opacity":"0.22","shadow-xl-opacity":"0.24"}},dark:{dark:!0,colors:{primary:"#c67e48","primary-darken-1":"#b67443","on-primary":"#ffffff",secondary:"#9d9b99","secondary-darken-1":"#3e3d3c","on-secondary":"#fff",success:"#4cd964","success-darken-1":"#40b654","on-success":"#ffffff",info:"#2196f3","info-darken-1":"#1e85d7","on-info":"#ffffff",warning:"#ff9500","warning-darken-1":"#de8201","on-warning":"#ffffff",error:"#ff3b30","error-darken-1":"#e1342b","on-error":"#ffffff",teal:"#009688",background:"#060504","on-background":"#fcf0e3",surface:"#1a1a1a","on-surface":"#fcf0e3","notification-background":"#1e1e1e","on-notification-background":"#fff",grey:"#4d4c4b","grey-50":"#212121","grey-100":"#424242","grey-200":"#616161","grey-300":"#757575","grey-400":"#909090","grey-500":"#a2a2a2","grey-600":"#b4b4b4","grey-700":"#c6c6c6","grey-800":"#d8d8d8","grey-900":"#eaeaea","perfect-scrollbar-thumb":"#725b4a","skin-bordered-background":"#4b3b2d","skin-bordered-surface":"#4b3b2d","expansion-panel-text-custom-bg":"#503f33"},variables:{"code-color":"#ff8000","overlay-scrim-background":"#1a1a1a","tooltip-background":"#333333","tooltip-color":"#eeeeee","overlay-scrim-opacity":.6,"hover-opacity":.04,"focus-opacity":.1,"selected-opacity":.08,"activated-opacity":.16,"pressed-opacity":.14,"disabled-opacity":.4,"dragged-opacity":.1,"border-color":"#edece9","border-opacity":.12,"table-header-color":"#242322","high-emphasis-opacity":.9,"medium-emphasis-opacity":.7,"shadow-key-umbra-color":"#383736","shadow-xs-opacity":"0.20","shadow-sm-opacity":"0.22","shadow-md-opacity":"0.24","shadow-lg-opacity":"0.26","shadow-xl-opacity":"0.28"}}}},locale:{rtl:Fc(),adapter:(f=>{const T={name:"ezBookkeeping i18n",decimalSeparator:L(oi.Default.symbol),messages:f.messages,current:f.locale,fallback:f.locale,t:(n,...o)=>{if(!n)return"";if(!n.startsWith("$vuetify."))return n;n=n.substring(9);const g=_2[n];return g?o&&o.length>0?f.t(g,...o):f.t(g):n},n:n=>f.n(n),provide:()=>T};return T})(di.global)}}),_2={open:"Open",close:"Close"};Jr([Zr,Qr,Xr,eu,tu,au,lu,nu,ou,su,iu]);ft.use(b2);ft.use(di);ft.use(k2);ft.use(Tx);ft.component("VChart",ru);ft.component("PerfectScrollbar",uu);ft.component("VueDatePicker",Ui);ft.component("DraggableList",du);ft.component("PinCodeInput",Nc);ft.component("MapView",Zs);ft.component("DateTimePicker",Mc);ft.component("MonthPicker",Ec);ft.component("TransactionCalendar",Uc);ft.component("ItemIcon",xx);ft.component("BtnVerticalGroup",wx);ft.component("NumberInput",Ax);ft.component("AmountInput",$x);ft.component("AmountInputDialog",ui);ft.component("LanguageSelect",Nx);ft.component("LanguageSelectButton",Ux);ft.component("CurrencySelect",Rx);ft.component("DateTimeSelect",jx);ft.component("DateSelect",Hx);ft.component("FiscalYearStartSelect",Wx);ft.component("ColorSelect",Gx);ft.component("IconSelect",Zx);ft.component("TwoColumnSelect",pC);ft.component("ScheduleFrequencySelect",gC);ft.component("StepsBar",NC);ft.component("ConfirmDialog",pa);ft.component("SnackBar",mt);ft.component("PieChart",EC);ft.component("RadarChart",PC);ft.component("TrendsChart",yn);ft.component("DateRangeSelectionDialog",qC);ft.component("MonthSelectionDialog",JC);ft.component("MonthRangeSelectionDialog",l2);ft.component("AccountBalanceTrendsChart",o2);ft.component("AccountAndCategorySankeyChart",i2);ft.component("SwitchToMobileDialog",v2);ft.mount("#app");
