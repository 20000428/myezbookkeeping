const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./leaflet-BI9MOT7F.js","../css/leaflet-LtasXFgS.css"])))=>i.map(i=>d[i]);
import{C as sn,j as ul,a as le,d as Ht,r as q,c,u as dl,b as ml,e as fl,f as Jn,g as ro,h as Ha,o as Ta,F as Fi,i as on,k as qo,l as hn,n as In,m as Pi,w as Ma,p as gl,q as pl,s as lo,t as Yn,v as Bi,x as pa,y as Qt,z as Ga,A as yl}from"./vendor-common-DLL9SaRw.js";import{m as De}from"./moment-BNeaYGUs.js";import{D as pn,A as Vt,a as hl,b as Tl,c as vl,d as Al}from"./locales-rb_tTC-x.js";class Ut{static allInstances=[];static allInstancesByType={};static Normal=new Ut(1,"Normal");static Schedule=new Ut(2,"Schedule");type;name;constructor(t,a){this.type=t,this.name=a,Ut.allInstances.push(this),Ut.allInstancesByType[t]=this}static values(){return Ut.allInstances}static valueOf(t){return Ut.allInstancesByType[t]}}class Na{static allInstances=[];static allInstancesByType={};static Disabled=new Na(0,"Disabled");static Weekly=new Na(1,"Weekly");static Monthly=new Na(2,"Monthly");type;name;constructor(t,a){this.type=t,this.name=a,Na.allInstances.push(this),Na.allInstancesByType[t]=this}static values(){return Na.allInstances}static valueOf(t){return Na.allInstancesByType[t]}}function*Ze(e){for(let t=0;t<e.length;t++)yield[e[t],t]}function*Kn(e){for(let t=e.length-1;t>=0;t--)yield e[t]}function*Cd(e){for(let t=e.length-1;t>=0;t--)yield[e[t],t]}function*Wt(e){for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(yield[t,e[t]])}function*Mt(e){for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(yield t)}function*Ba(e,t){for(const a in e)Object.prototype.hasOwnProperty.call(e,a)&&e[a]===t&&(yield a)}function*Dt(e){for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(yield e[t])}function co(e){return typeof e=="function"}function yt(e){return e!==null&&typeof e<"u"}function Ke(e){return e!==null&&typeof e=="object"&&!xt(e)}function xt(e){return co(Array.isArray)?Array.isArray(e):Object.prototype.toString.call(e)==="[object Array]"}function Ye(e){return typeof e=="string"}function Ie(e){return typeof e=="number"}function ct(e){return Number.isInteger(e)}function Cn(e){return typeof e=="boolean"}function Qn(e){if(!Ye(e))return!1;const t=e.split("-");return t.length!==2?!1:!!parseInt(t[0])&&!!parseInt(t[1])}function ta(e,t){if(e===t)return!0;if(xt(e)&&xt(t)){const a=e,n=t;if(a.length!==n.length)return!1;for(let o=0;o<a.length;o++)if(!ta(a[o],n[o]))return!1;return!0}else if(Ke(e)&&Ke(t)){const a=Object.keys(e),n=Object.keys(t);if(a.length!==n.length)return!1;const o=new Map;for(let s=0;s<n.length;s++){const r=n[s];o.set(r,!0)}for(let s=0;s<a.length;s++){const r=a[s];if(!o.get(r)||!ta(e[r],t[r]))return!1}return!0}else return e===t}function Xo(e,t){const a=e.split("-"),n=t.split("-");return a.length!==2||n.length!==2?!1:!!parseInt(a[0])&&!!parseInt(a[1])&&parseInt(a[0])===parseInt(n[0])&&parseInt(a[1])===parseInt(n[1])}function bl(e,t){if(e.length>t.length)return!1;const a=new Map;for(let n=0;n<t.length;n++)a.set(t[n],!0);for(let n=0;n<e.length;n++)if(!a.get(e[n]))return!1;return!0}function nn(e){if(!e)return!0;for(const t of Mt(e))return!1;return!0}function Dd(e,t){return Ye(e)?parseInt(e,10):Ie(e)?e:t}function Il(e){return e.sort(function(t,a){return t-a})}function Cl(e){let t=0;if(!e||!Ke(e))return t;for(const a of Mt(e))t++;return t}function ka(e,t,a){const n=t.replace(/([.*+?^=!:${}()|\-/\\])/g,"\\$1");return e.replace(new RegExp(n,"g"),a)}function uo(e,t){return ka(e,t,"")}function Dl(e,t){let a=0;for(let n=0;n<e.length;n++){const o=e.charCodeAt(n);o>=1&&o<=126||65376<=o&&o<=65439?a++:a+=2}return a<=t||t<=3?e:e.substring(0,t-3)+"..."}function mo(e){return btoa(String.fromCharCode.apply(null,Array.from(new Uint8Array(e))))}function Ws(e){return e?atob(e):""}function Sl(e){return String.fromCharCode.apply(null,Array.from(new Uint8Array(e)))}function ms(e){return Uint8Array.from(e,t=>t.charCodeAt(0)).buffer}function Sd(e,t){if(xt(e)&&e.length>0){const a=e;for(const n of a)if(!(t&&n[t]))return n}else if(Ke(e)){const a=e;for(const n of Dt(a))if(!(t&&n[t]))return n}return null}function Ri(e,t,a){if(xt(e)){const n=e;for(const o of n)if(o[a]===t)return o}else if(Ke(e)){const n=e;for(const o of Dt(n))if(o[a]===t)return o}return null}function Md(e,t){for(const a of e)if(a.value===t)return a.name;return null}function Qo(e,t){for(const a of e)if(a.type===t)return a.name;return null}function jo(e,t){for(const a of e)if(a.type===t)return a.displayName;return null}function Ld(e,t,a,n,o){if(xt(e)){const s=e;if(a){for(const r of s)if(r[a]===t)return r[n]}else if(Ie(t)){const r=t;if(s[r])return s[r][n]}}else if(Ke(e)){const s=e;if(a){for(const r of Dt(s))if(r[a]===t)return r[n]}else if(Ye(t)){const r=t;if(s[r])return s[r][n]}}return o}function Nd(e,t,a){if(!a||!e||!e.length)return!1;for(const n of e)if(n[t]===a)return!0;return!1}function ei(e){const t=[];for(const a of Mt(e))t.push(a);return t}function ti(e,t){const a=[];for(const n of Ba(e,t))a.push(n);return a}function Hs(e,t){const a={};for(const n of e)a[n]=t;return a}function ks(e,t){const a={};if(!e)return a;const n=e.split(t);for(const o of n)o&&(a[o]=!0);return a}function Us(e,t){if(!e)return 0;const a=e.split(t);let n=0;for(const o of a)o&&n++;return n}function wd(e){const t=[];for(const a of Dt(e))for(const n of a)t.push(n);return t}function xd(e,t){for(const a of Mt(e)){const n=t[a];n&&(e[n.id]=!1)}}function Ed(e,t){for(const a of Mt(e)){const n=t[a];n&&(e[n.id]=!0)}}function kd(e,t){for(const a of Mt(e)){const n=t[a];n&&(e[n.id]=!e[n.id])}}function Ud(e,t){for(const a of Mt(e)){const n=t[a];n&&!n.hidden&&(e[n.id]=!1)}}function ai(e,t,a,n,o){const s=e[t];if(!s||s.length<1)return!1;for(const r of s)if(!(n&&r[n])){if(a&&r[a]===o)return!0;if(!a&&r===o)return!0}return!1}function Ml(e,t,a,n,o,s,r){if(t)if(xt(e)){const l=e;for(const i of l)if(!(n&&i[n])&&ai(i,t,o,s,r))return a?i[a]:i}else{const l=e;for(const i of Dt(l))if(!(n&&i[n])&&ai(i,t,o,s,r))return a?i[a]:i}return null}function Yi(e,t){if(t<=0||t>=e.length)return e;const a=[];for(let n=t;n<e.length;n++)a.push(e[n]);for(let n=0;n<t;n++)a.push(e[n]);return a}class fo{year;quarter;minUnixTime;maxUnixTime;constructor(t,a,n,o){this.year=t,this.quarter=a,this.minUnixTime=n,this.maxUnixTime=o}static of(t,a,n){return new fo(t.year,t.quarter,a,n)}}class go{year;month0base;minUnixTime;maxUnixTime;constructor(t,a,n,o){this.year=t,this.month0base=a,this.minUnixTime=n,this.maxUnixTime=o}static of(t,a,n){return new go(t.year,t.month0base,a,n)}}class po{year;month;day;minUnixTime;maxUnixTime;constructor(t,a,n,o,s){this.year=t,this.month=a,this.day=n,this.minUnixTime=o,this.maxUnixTime=s}static of(t,a,n){return new po(t.year,t.month,t.day,a,n)}}class zt{static allInstances=[];static January=new zt(1,"January");static February=new zt(2,"February");static March=new zt(3,"March");static April=new zt(4,"April");static May=new zt(5,"May");static June=new zt(6,"June");static July=new zt(7,"July");static August=new zt(8,"August");static September=new zt(9,"September");static October=new zt(10,"October");static November=new zt(11,"November");static December=new zt(12,"December");month;name;constructor(t,a){this.month=t,this.name=a,zt.allInstances.push(this)}static values(){return zt.allInstances}static valueOf(t){return zt.allInstances[t-1]}}class lt{static allInstances=[];static allInstancesByName={};static Sunday=new lt(0,"Sunday");static Monday=new lt(1,"Monday");static Tuesday=new lt(2,"Tuesday");static Wednesday=new lt(3,"Wednesday");static Thursday=new lt(4,"Thursday");static Friday=new lt(5,"Friday");static Saturday=new lt(6,"Saturday");static DefaultFirstDay=lt.Sunday;type;name;constructor(t,a){this.type=t,this.name=a,lt.allInstances.push(this),lt.allInstancesByName[a]=this}static values(){return lt.allInstances}static valueOf(t){return lt.allInstances[t]}static parse(t){return lt.allInstancesByName[t]}}class va{static allInstances=[];static AM=new va(0,"AM");static PM=new va(1,"PM");type;name;constructor(t,a){this.type=t,this.name=a,va.allInstances.push(this)}static values(){return va.allInstances}}class kt{static allInstances=[];static DefaultDateTime=new kt("YYYY-MM-DD HH:mm:ss",/^\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1]) ([0-1][0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9]$/);static DefaultDateTimeWithTimezone=new kt("YYYY-MM-DD HH:mm:ssZ",/^\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1]) ([0-1][0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9](Z|[+-](0[0-9]|1[0-4]):[0-5][0-9])$/);static DefaultDateTimeWithoutSecond=new kt("YYYY-MM-DD HH:mm",/^\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1]) ([0-1][0-9]|2[0-3]):[0-5][0-9]$/);static DefaultDate=new kt("YYYY-MM-DD",/^\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])$/);static RFC3339=new kt("YYYY-MM-DDTHH:mm:ssZ",/^\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])T([0-1][0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9](Z|[+-](0[0-9]|1[0-4]):[0-5][0-9])$/);static YYYYMMDDSlashWithTime=new kt("YYYY/MM/DD HH:mm:ss",/^\d{4}\/(0[1-9]|1[0-2])\/(0[1-9]|[1-2][0-9]|3[0-1]) ([0-1][0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9]$/);static MMDDYYSlashWithTime=new kt("MM/DD/YYYY HH:mm:ss",/^(0[1-9]|1[0-2])\/(0[1-9]|[1-2][0-9]|3[0-1])\/\d{4} ([0-1][0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9]$/);static DDMMYYSlashWithTime=new kt("DD/MM/YYYY HH:mm:ss",/^(0[1-9]|[1-2][0-9]|3[0-1])\/(0[1-9]|1[0-2])\/\d{4} ([0-1][0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9]$/);static YYYYMMDDSlash=new kt("YYYY/MM/DD",/^\d{4}\/(0[1-9]|1[0-2])\/(0[1-9]|[1-2][0-9]|3[0-1])$/);static MMDDYYSlash=new kt("MM/DD/YYYY",/^(0[1-9]|1[0-2])\/(0[1-9]|[1-2][0-9]|3[0-1])\/\d{4}$/);static DDMMYYSlash=new kt("DD/MM/YYYY",/^(0[1-9]|[1-2][0-9]|3[0-1])\/(0[1-9]|1[0-2])\/\d{4}$/);static YYYYMMDD=new kt("YYYYMMDD",/^\d{4}(0[1-9]|1[0-2])(0[1-9]|[1-2][0-9]|3[0-1])$/);format;regex;constructor(t,a){this.format=t,this.regex=a,kt.allInstances.push(this)}isValid(t){return this.regex.test(t)}static values(){return kt.allInstances}static detect(t){const a=[];for(const n of kt.allInstances)n.isValid(t)&&a.push(n);return a.length>0?a:void 0}static detectMulti(t){const a={};for(const o of t){const s=kt.detect(o);if(s)for(const r of s)a[r.format]=(a[r.format]||0)+1;else return}const n=[];for(const o of kt.allInstances)a[o.format]===t.length&&n.push(o);return n.length>0?n:void 0}}const fs=0;class je{static allInstances=[];static allInstancesByType={};static allInstancesByTypeName={};static YYYYMMDD=new je(1,"YYYYMMDD","yyyy_mm_dd",!0);static MMDDYYYY=new je(2,"MMDDYYYY","mm_dd_yyyy",!1);static DDMMYYYY=new je(3,"DDMMYYYY","dd_mm_yyyy",!1);static Default=je.YYYYMMDD;type;typeName;key;isMonthAfterYear;constructor(t,a,n,o){this.type=t,this.typeName=a,this.key=n,this.isMonthAfterYear=o,je.allInstances.push(this),je.allInstancesByType[t]=this,je.allInstancesByTypeName[a]=this}static values(){return je.allInstances}static all(){return je.allInstancesByTypeName}static valueOf(t){return je.allInstancesByType[t]}}class We{static allInstances=[];static allInstancesByType={};static allInstancesByTypeName={};static YYYYMMDD=new We(1,"YYYYMMDD","yyyy_mm_dd",!0);static MMDDYYYY=new We(2,"MMDDYYYY","mm_dd_yyyy",!1);static DDMMYYYY=new We(3,"DDMMYYYY","dd_mm_yyyy",!1);static Default=We.YYYYMMDD;type;typeName;key;isMonthAfterYear;constructor(t,a,n,o){this.type=t,this.typeName=a,this.key=n,this.isMonthAfterYear=o,We.allInstances.push(this),We.allInstancesByType[t]=this,We.allInstancesByTypeName[a]=this}static values(){return We.allInstances}static all(){return We.allInstancesByTypeName}static valueOf(t){return We.allInstancesByType[t]}}class gt{static allInstances=[];static allInstancesByType={};static allInstancesByTypeName={};static HHMMSS=new gt(1,"HHMMSS","hh_mm_ss",!0,null);static AHHMMSS=new gt(2,"AHHMMSS","a_hh_mm_ss",!1,!0);static HHMMSSA=new gt(3,"HHMMSSA","hh_mm_ss_a",!1,!1);static Default=gt.HHMMSS;type;typeName;key;is24HourFormat;isMeridiemIndicatorFirst;constructor(t,a,n,o,s){this.type=t,this.typeName=a,this.key=n,this.is24HourFormat=o,this.isMeridiemIndicatorFirst=s,gt.allInstances.push(this),gt.allInstancesByType[t]=this,gt.allInstancesByTypeName[a]=this}static values(){return gt.allInstances}static all(){return gt.allInstancesByTypeName}static valueOf(t){return gt.allInstancesByType[t]}}class pt{static allInstances=[];static allInstancesByType={};static allInstancesByTypeName={};static HHMM=new pt(1,"HHMM","hh_mm",!0,null);static AHHMM=new pt(2,"AHHMM","a_hh_mm",!1,!0);static HHMMA=new pt(3,"HHMMA","hh_mm_a",!1,!1);static Default=pt.HHMM;type;typeName;key;is24HourFormat;isMeridiemIndicatorFirst;constructor(t,a,n,o,s){this.type=t,this.typeName=a,this.key=n,this.is24HourFormat=o,this.isMeridiemIndicatorFirst=s,pt.allInstances.push(this),pt.allInstancesByType[t]=this,pt.allInstancesByTypeName[a]=this}static values(){return pt.allInstances}static all(){return pt.allInstancesByTypeName}static valueOf(t){return pt.allInstancesByType[t]}}var ua=(e=>(e[e.Normal=0]="Normal",e[e.TrendAnalysis=1]="TrendAnalysis",e[e.AssetTrends=2]="AssetTrends",e))(ua||{});class Q{static allInstances=[];static allInstancesByType={};static All=new Q(0,"All",!1,!1,0,1,2);static Today=new Q(1,"Today",!1,!1,0);static Yesterday=new Q(2,"Yesterday",!1,!1,0);static LastSevenDays=new Q(3,"Recent 7 days",!1,!1,0,2);static LastThirtyDays=new Q(4,"Recent 30 days",!1,!1,0,2);static ThisWeek=new Q(5,"This week",!1,!1,0,2);static LastWeek=new Q(6,"Last week",!1,!1,0,2);static ThisMonth=new Q(7,"This month",!1,!1,0,2);static LastMonth=new Q(8,"Last month",!1,!1,0,2);static ThisYear=new Q(9,"This year",!1,!1,0,1,2);static LastYear=new Q(10,"Last year",!1,!1,0,1,2);static ThisFiscalYear=new Q(11,"This fiscal year",!1,!0,0,1,2);static LastFiscalYear=new Q(12,"Last fiscal year",!1,!0,0,1,2);static CurrentBillingCycle=new Q(51,"Current Billing Cycle",!0,!0,0);static PreviousBillingCycle=new Q(52,"Previous Billing Cycle",!0,!0,0);static RecentTwelveMonths=new Q(101,"Recent 12 months",!1,!1,1,2);static RecentTwentyFourMonths=new Q(102,"Recent 24 months",!1,!1,1,2);static RecentThirtySixMonths=new Q(103,"Recent 36 months",!1,!1,1,2);static RecentTwoYears=new Q(104,"Recent 2 years",!1,!1,1,2);static RecentThreeYears=new Q(105,"Recent 3 years",!1,!1,1,2);static RecentFiveYears=new Q(106,"Recent 5 years",!1,!1,1,2);static Custom=new Q(255,"Custom Date",!1,!0,0,1,2);type;name;isBillingCycle;isUserCustomRange;availableScenes;constructor(t,a,n,o,...s){if(this.type=t,this.name=a,this.isBillingCycle=n,this.isUserCustomRange=o,this.availableScenes={},s)for(const r of s)this.availableScenes[r]=!0;Q.allInstances.push(this),Q.allInstancesByType[t]=this}isAvailableForScene(t){return this.availableScenes[t]||!1}static values(){return Q.allInstances}static valueOf(t){return Q.allInstancesByType[t]}static isAvailableForScene(t,a){return Q.allInstancesByType[t]?.isAvailableForScene(a)||!1}static isBillingCycle(t){return Q.allInstancesByType[t]?.isBillingCycle||!1}}class fa{static allInstances=[];static allInstancesByValue={};static HHColonMM=new fa("±HH:mm","Z",/^[+-]?([0-1][0-9]|2[0-3]):[0-5][0-9]$/);static HHMM=new fa("±HHmm","ZZ",/^[+-]?([0-1][0-9]|2[0-3])[0-5][0-9]$/);name;value;regex;constructor(t,a,n){this.name=t,this.value=a,this.regex=n,fa.allInstances.push(this),fa.allInstancesByValue[a]=this}isValid(t){return this.regex.test(t)}static values(){return fa.allInstances}static valueOf(t){return fa.allInstancesByValue[t]}static detect(t){const a=[];for(const n of fa.allInstances)n.isValid(t)&&a.push(n);return a.length>0?a:void 0}static detectMulti(t){const a={};for(const o of t){const s=fa.detect(o);if(s)for(const r of s)a[r.value]=(a[r.value]||0)+1;else return}const n=[];for(const o of fa.allInstances)a[o.value]===t.length&&n.push(o);return n.length>0?n:void 0}}class na{static ApplicationTimezone=new na(0,"Application Timezone");static TransactionTimezone=new na(1,"Transaction Timezone");static Default=na.ApplicationTimezone;type;name;constructor(t,a){this.type=t,this.name=a}}var En=(e=>(e[e.None=0]="None",e[e.Symbol=1]="Symbol",e[e.Code=2]="Code",e[e.Unit=3]="Unit",e[e.Name=4]="Name",e))(En||{}),Vs=(e=>(e[e.BeforeAmount=0]="BeforeAmount",e[e.AfterAmount=1]="AfterAmount",e))(Vs||{});class it{static allInstances=[];static allInstancesByType={};static allInstancesByTypeName={};static LanguageDefaultType=0;static None=new it(1,"None","None",2,0,void 0,"");static SymbolBeforeAmount=new it(2,"SymbolBeforeAmount","Currency Symbol",2,1,0," ");static SymbolAfterAmount=new it(3,"SymbolAfterAmount","Currency Symbol",2,1,1," ");static SymbolBeforeAmountWithoutSpace=new it(4,"SymbolBeforeAmountWithoutSpace","Currency Symbol",2,1,0,"");static SymbolAfterAmountWithoutSpace=new it(5,"SymbolAfterAmountWithoutSpace","Currency Symbol",2,1,1,"");static CodeBeforeAmount=new it(6,"CodeBeforeAmount","Currency Code",2,2,0," ");static CodeAfterAmount=new it(7,"CodeAfterAmount","Currency Code",2,2,1," ");static UnitBeforeAmount=new it(8,"UnitBeforeAmount","Currency Unit",2,3,0," ");static UnitAfterAmount=new it(9,"UnitAfterAmount","Currency Unit",2,3,1," ");static NameBeforeAmount=new it(10,"NameBeforeAmount","Currency Name",2,4,0," ");static NameAfterAmount=new it(11,"NameAfterAmount","Currency Name",2,4,1," ");static Default=it.SymbolBeforeAmount;type;typeName;name;fraction;symbol;location;separator;constructor(t,a,n,o,s,r,l){this.type=t,this.typeName=a,this.name=n,this.fraction=o,this.symbol=s,this.location=r,this.separator=l,it.allInstances.push(this),it.allInstancesByType[t]=this,it.allInstancesByTypeName[a]=this}static values(){return it.allInstances}static valueOf(t){return it.allInstancesByType[t]}static parse(t){return it.allInstancesByTypeName[t]}}class ca{static allInstances=[];static Name=new ca(0,"Currency Name");static CurrencyCode=new ca(1,"Currency Code");static ExchangeRate=new ca(2,"Exchange Rate");static Default=ca.Name;type;name;constructor(t,a){this.type=t,this.name=a,ca.allInstances.push(this)}static values(){return ca.allInstances}}var Ee=(e=>(e[e.CategoricalAnalysis=0]="CategoricalAnalysis",e[e.TrendAnalysis=1]="TrendAnalysis",e[e.AssetTrends=2]="AssetTrends",e))(Ee||{}),Ll=(e=>(e[e.Sum=0]="Sum",e[e.Last=1]="Last",e))(Ll||{});class Gt{static allInstancesForAll=[];static allInstancesForDesktop=[];static allInstancesByType={};static Pie=new Gt(0,"Pie Chart",!1);static Bar=new Gt(1,"Bar Chart",!1);static Radar=new Gt(2,"Radar Chart",!0);static Default=Gt.Pie;type;name;desktopOnly=!1;constructor(t,a,n){this.type=t,this.name=a,this.desktopOnly=n,n||Gt.allInstancesForAll.push(this),Gt.allInstancesForDesktop.push(this),Gt.allInstancesByType[t]=this}static isValidType(t){return!!Gt.allInstancesByType[t]}static values(t){return t?Gt.allInstancesForDesktop:Gt.allInstancesForAll}}class It{static allInstances=[];static allInstancesByType={};static Area=new It(0,"Area Chart");static Column=new It(1,"Column Chart");static Bubble=new It(2,"Bubble Chart");static Default=It.Column;type;name;constructor(t,a){this.type=t,this.name=a,It.allInstances.push(this),It.allInstancesByType[t]=this}static isValidType(t){return!!It.allInstancesByType[t]}static values(){return It.allInstances}}class tn{static allInstances=[];static Area=new tn(0,"Area Chart");static Column=new tn(1,"Column Chart");static Candlestick=new tn(2,"Candlestick Chart");static Default=It.Column;type;name;constructor(t,a){this.type=t,this.name=a,tn.allInstances.push(this)}static values(){return tn.allInstances}}class z{static allInstancesForAll=[];static allInstancesForDesktop=[];static allInstancesByType={};static Overview=new z(16,"Overview",!0,!0,0);static OutflowsByAccount=new z(11,"Outflows By Account",!1,!1,0,1);static ExpenseByAccount=new z(0,"Expense By Account",!1,!1,0,1);static ExpenseByPrimaryCategory=new z(1,"Expense By Primary Category",!1,!1,0,1);static ExpenseBySecondaryCategory=new z(2,"Expense By Secondary Category",!1,!1,0,1);static InflowsByAccount=new z(12,"Inflows By Account",!1,!1,0,1);static IncomeByAccount=new z(3,"Income By Account",!1,!1,0,1);static IncomeByPrimaryCategory=new z(4,"Income By Primary Category",!1,!1,0,1);static IncomeBySecondaryCategory=new z(5,"Income By Secondary Category",!1,!1,0,1);static AccountTotalAssets=new z(6,"Account Total Assets",!1,!1,0,2);static AccountTotalLiabilities=new z(7,"Account Total Liabilities",!1,!1,0,2);static TotalOutflows=new z(13,"Total Outflows",!1,!1,1);static TotalExpense=new z(8,"Total Expense",!1,!1,1);static TotalInflows=new z(14,"Total Inflows",!1,!1,1);static TotalIncome=new z(9,"Total Income",!1,!1,1);static NetCashFlow=new z(15,"Net Cash Flow",!1,!1,1);static NetIncome=new z(10,"Net Income",!1,!1,1);static NetWorth=new z(17,"Net Worth",!1,!1,2);static Default=z.ExpenseByPrimaryCategory;static DefaultForAssetTrends=z.NetWorth;type;name;desktopOnly=!1;specialChart=!1;availableAnalysisTypes;constructor(t,a,n,o,...s){if(this.type=t,this.name=a,this.desktopOnly=n,this.specialChart=o,this.availableAnalysisTypes={},s)for(const r of s)this.availableAnalysisTypes[r]=!0;n||z.allInstancesForAll.push(this),z.allInstancesForDesktop.push(this),z.allInstancesByType[t]=this}isAvailableAnalysisType(t){return this.availableAnalysisTypes[t]||!1}static values(t,a){const n=a?z.allInstancesForDesktop:z.allInstancesForAll;if(t===void 0)return n;const o=[];for(const s of n)s.isAvailableAnalysisType(t)&&o.push(s);return o}static valueOf(t){return z.allInstancesByType[t]}static isAvailableForAnalysisType(t,a){return z.allInstancesByType[t]?.isAvailableAnalysisType(a)||!1}}class Rt{static allInstances=[];static allInstancesByType={};static Amount=new Rt(0,"Amount","Sort by Amount");static DisplayOrder=new Rt(1,"Display Order","Sort by Display Order");static Name=new Rt(2,"Name","Sort by Name");static Default=Rt.Amount;type;name;fullName;constructor(t,a,n){this.type=t,this.name=a,this.fullName=n,Rt.allInstances.push(this),Rt.allInstancesByType[t]=this}static values(){return Rt.allInstances}static valueOf(t){return Rt.allInstancesByType[t]}}class Xe{static allInstances=[];static allInstancesByType={};static Day=new Xe(4,"Daily","Aggregate by Day",2);static Month=new Xe(0,"Monthly","Aggregate by Month",1,2);static Quarter=new Xe(1,"Quarterly","Aggregate by Quarter",1,2);static Year=new Xe(2,"Yearly","Aggregate by Year",1,2);static FiscalYear=new Xe(3,"FiscalYearly","Aggregate by Fiscal Year",1,2);static Default=Xe.Month;type;shortName;fullName;availableAnalysisTypes;constructor(t,a,n,...o){if(this.type=t,this.shortName=a,this.fullName=n,this.availableAnalysisTypes={},o)for(const s of o)this.availableAnalysisTypes[s]=!0;Xe.allInstances.push(this),Xe.allInstancesByType[t]=this}isAvailableAnalysisType(t){return this.availableAnalysisTypes[t]||!1}static values(t){const a=Xe.allInstances;if(t===void 0)return a;const n=[];for(const o of a)o.isAvailableAnalysisType(t)&&n.push(o);return n}static valueOf(t){return Xe.allInstancesByType[t]}}const as=Q.ThisMonth,ns=Q.ThisYear,ss=Q.ThisYear,Gn={AED:{code:"AED",fraction:2,symbol:{normal:"Dh",plural:"Dhs"},unit:"Dirham"},AFN:{code:"AFN",fraction:2,symbol:{normal:"Af.",plural:"Afs."},unit:"Afghani"},ALL:{code:"ALL",fraction:2,symbol:{normal:"L"},unit:"Lek"},AMD:{code:"AMD",fraction:2,symbol:{normal:"֏"},unit:"Dram"},ANG:{code:"ANG",fraction:2,symbol:{normal:"ƒ"},unit:"Guilder"},AOA:{code:"AOA",fraction:2,symbol:{normal:"Kz"},unit:"Kwanza"},ARS:{code:"ARS",fraction:2,symbol:{normal:"$"},unit:"Peso"},AUD:{code:"AUD",fraction:2,symbol:{normal:"$"},unit:"Dollar"},AWG:{code:"AWG",fraction:2,symbol:{normal:"Afl."},unit:"Florin"},AZN:{code:"AZN",fraction:2,symbol:{normal:"₼"},unit:"Manat"},BAM:{code:"BAM",fraction:2,symbol:{normal:"KM"},unit:"Mark"},BBD:{code:"BBD",fraction:2,symbol:{normal:"$"},unit:"Dollar"},BDT:{code:"BDT",fraction:2,symbol:{normal:"৳"},unit:"Taka"},BGN:{code:"BGN",fraction:2,symbol:{normal:"лв"},unit:"Lev"},BHD:{code:"BHD",fraction:3,symbol:{normal:"BD"},unit:"Dinar"},BIF:{code:"BIF",fraction:0,symbol:{normal:"FBu"},unit:"Franc"},BMD:{code:"BMD",fraction:2,symbol:{normal:"$"},unit:"Dollar"},BND:{code:"BND",fraction:2,symbol:{normal:"$"},unit:"Dollar"},BOB:{code:"BOB",fraction:2,symbol:{normal:"Bs"},unit:"Boliviano"},BRL:{code:"BRL",fraction:2,symbol:{normal:"R$"},unit:"Real"},BSD:{code:"BSD",fraction:2,symbol:{normal:"$"},unit:"Dollar"},BTN:{code:"BTN",fraction:2,symbol:{normal:"Nu."},unit:"Ngultrum"},BWP:{code:"BWP",fraction:2,symbol:{normal:"P"},unit:"Pula"},BYN:{code:"BYN",fraction:2,symbol:{normal:"Rbl",plural:"Rbls"},unit:"Ruble"},BZD:{code:"BZD",fraction:2,symbol:{normal:"$"},unit:"Dollar"},CAD:{code:"CAD",fraction:2,symbol:{normal:"$"},unit:"Dollar"},CDF:{code:"CDF",fraction:2,symbol:{normal:"FC"},unit:"Franc"},CHF:{code:"CHF",fraction:2,symbol:{normal:"CHF"},unit:"Franc"},CLP:{code:"CLP",fraction:0,symbol:{normal:"$"},unit:"Peso"},CNY:{code:"CNY",fraction:2,symbol:{normal:"¥"},unit:"Yuan"},COP:{code:"COP",fraction:2,symbol:{normal:"$"},unit:"Peso"},CRC:{code:"CRC",fraction:2,symbol:{normal:"₡"},unit:"Colon"},CUC:{code:"CUC",fraction:2,symbol:{normal:"$"},unit:"Peso"},CUP:{code:"CUP",fraction:2,symbol:{normal:"$"},unit:"Peso"},CVE:{code:"CVE",fraction:2,symbol:{normal:"$"},unit:"Escudo"},CZK:{code:"CZK",fraction:2,symbol:{normal:"Kč"},unit:"Koruna"},DJF:{code:"DJF",fraction:0,symbol:{normal:"Fdj"},unit:"Franc"},DKK:{code:"DKK",fraction:2,symbol:{normal:"kr."},unit:"Krone"},DOP:{code:"DOP",fraction:2,symbol:{normal:"$"},unit:"Peso"},DZD:{code:"DZD",fraction:2,symbol:{normal:"DA"},unit:"Dinar"},EGP:{code:"EGP",fraction:2,symbol:{normal:"£"},unit:"Pound"},ERN:{code:"ERN",fraction:2,symbol:{normal:"Nfk"},unit:"Nakfa"},ETB:{code:"ETB",fraction:2,symbol:{normal:"Br"},unit:"Birr"},EUR:{code:"EUR",fraction:2,symbol:{normal:"€"},unit:"Euro"},FJD:{code:"FJD",fraction:2,symbol:{normal:"$"},unit:"Dollar"},FKP:{code:"FKP",fraction:2,symbol:{normal:"£"},unit:"Pound"},GBP:{code:"GBP",fraction:2,symbol:{normal:"£"},unit:"Pound"},GEL:{code:"GEL",fraction:2,symbol:{normal:"ლ"},unit:"Lari"},GHS:{code:"GHS",fraction:2,symbol:{normal:"GH₵"},unit:"Cedi"},GIP:{code:"GIP",fraction:2,symbol:{normal:"£"},unit:"Pound"},GMD:{code:"GMD",fraction:2,symbol:{normal:"D"},unit:"Dalasi"},GNF:{code:"GNF",fraction:0,symbol:{normal:"FG"},unit:"Franc"},GTQ:{code:"GTQ",fraction:2,symbol:{normal:"Q"},unit:"Quetzal"},GYD:{code:"GYD",fraction:2,symbol:{normal:"$"},unit:"Dollar"},HKD:{code:"HKD",fraction:2,symbol:{normal:"HK$"},unit:"Dollar"},HNL:{code:"HNL",fraction:2,symbol:{normal:"L"},unit:"Lempira"},HTG:{code:"HTG",fraction:2,symbol:{normal:"G"},unit:"Gourde"},HUF:{code:"HUF",fraction:2,symbol:{normal:"Ft"},unit:"Forint"},IDR:{code:"IDR",fraction:2,symbol:{normal:"Rp"},unit:"Rupiah"},ILS:{code:"ILS",fraction:2,symbol:{normal:"₪"},unit:"Shekel"},INR:{code:"INR",fraction:2,symbol:{normal:"₹"},unit:"Rupee"},IQD:{code:"IQD",fraction:3,symbol:{normal:"ID"},unit:"Dinar"},IRR:{code:"IRR",fraction:2,symbol:{normal:"Rl",plural:"Rls"},unit:"Rial"},ISK:{code:"ISK",fraction:0,symbol:{normal:"kr"},unit:"Krona"},JMD:{code:"JMD",fraction:2,symbol:{normal:"$"},unit:"Dollar"},JOD:{code:"JOD",fraction:3,symbol:{normal:"د.أ"},unit:"Dinar"},JPY:{code:"JPY",fraction:0,symbol:{normal:"¥"},unit:"Yen"},KES:{code:"KES",fraction:2,symbol:{normal:"/="},unit:"Shilling"},KGS:{code:"KGS",fraction:2,symbol:{normal:"⃀"},unit:"Som"},KHR:{code:"KHR",fraction:2,symbol:{normal:"៛"},unit:"Riel"},KMF:{code:"KMF",fraction:0,symbol:{normal:"CF"},unit:"Franc"},KPW:{code:"KPW",fraction:2,symbol:{normal:"₩"},unit:"Won"},KRW:{code:"KRW",fraction:0,symbol:{normal:"₩"},unit:"Won"},KWD:{code:"KWD",fraction:3,symbol:{normal:"KD"},unit:"Dinar"},KYD:{code:"KYD",fraction:2,symbol:{normal:"$"},unit:"Dollar"},KZT:{code:"KZT",fraction:2,symbol:{normal:"₸"},unit:"Tenge"},LAK:{code:"LAK",fraction:2,symbol:{normal:"₭"},unit:"Kip"},LBP:{code:"LBP",fraction:2,symbol:{normal:"LL"},unit:"Pound"},LKR:{code:"LKR",fraction:2,symbol:{normal:"රු"},unit:"Rupee"},LRD:{code:"LRD",fraction:2,symbol:{normal:"$"},unit:"Dollar"},LSL:{code:"LSL",fraction:2,symbol:{normal:"L",plural:"M"},unit:"Loti"},LYD:{code:"LYD",fraction:3,symbol:{normal:"LD"},unit:"Dinar"},MAD:{code:"MAD",fraction:2,symbol:{normal:"DH"},unit:"Dirham"},MDL:{code:"MDL",fraction:2,symbol:{normal:"L"},unit:"Leu"},MGA:{code:"MGA",fraction:2,symbol:{normal:"Ar"},unit:"Ariary"},MKD:{code:"MKD",fraction:2,symbol:{normal:"DEN"},unit:"Denar"},MMK:{code:"MMK",fraction:2,symbol:{normal:"K",plural:"Ks."},unit:"Kyat"},MNT:{code:"MNT",fraction:2,symbol:{normal:"₮"},unit:"Tugrik"},MOP:{code:"MOP",fraction:2,symbol:{normal:"$"},unit:"Pataca"},MRU:{code:"MRU",fraction:2,symbol:{normal:"UM"},unit:"Ouguiya"},MUR:{code:"MUR",fraction:2,symbol:{normal:"Re.",plural:"Rs."},unit:"Rupee"},MVR:{code:"MVR",fraction:2,symbol:{normal:"Rf."},unit:"Rufiyaa"},MWK:{code:"MWK",fraction:2,symbol:{normal:"K"},unit:"Kwacha"},MXN:{code:"MXN",fraction:2,symbol:{normal:"$"},unit:"Peso"},MYR:{code:"MYR",fraction:2,symbol:{normal:"RM"},unit:"Ringgit"},MZN:{code:"MZN",fraction:2,symbol:{normal:"MT"},unit:"Metical"},NAD:{code:"NAD",fraction:2,symbol:{normal:"$"},unit:"Dollar"},NGN:{code:"NGN",fraction:2,symbol:{normal:"₦"},unit:"Naira"},NIO:{code:"NIO",fraction:2,symbol:{normal:"C$"},unit:"Cordoba"},NOK:{code:"NOK",fraction:2,symbol:{normal:"kr"},unit:"Krone"},NPR:{code:"NPR",fraction:2,symbol:{normal:"रु"},unit:"Rupee"},NZD:{code:"NZD",fraction:2,symbol:{normal:"$"},unit:"Dollar"},OMR:{code:"OMR",fraction:3,symbol:{normal:"R.O"},unit:"Rial"},PAB:{code:"PAB",fraction:2,symbol:{normal:"B/."},unit:"Balboa"},PEN:{code:"PEN",fraction:2,symbol:{normal:"S/"},unit:"Sol"},PGK:{code:"PGK",fraction:2,symbol:{normal:"K"},unit:"Kina"},PHP:{code:"PHP",fraction:2,symbol:{normal:"₱"},unit:"Peso"},PKR:{code:"PKR",fraction:2,symbol:{normal:"Re.",plural:"Rs."},unit:"Rupee"},PLN:{code:"PLN",fraction:2,symbol:{normal:"zł"},unit:"Zloty"},PYG:{code:"PYG",fraction:0,symbol:{normal:"₲"},unit:"Guarani"},QAR:{code:"QAR",fraction:2,symbol:{normal:"QR"},unit:"Rial"},RON:{code:"RON",fraction:2,symbol:{normal:"L"},unit:"Leu"},RSD:{code:"RSD",fraction:2,symbol:{normal:"din."},unit:"Dinar"},RUB:{code:"RUB",fraction:2,symbol:{normal:"₽"},unit:"Ruble"},RWF:{code:"RWF",fraction:0,symbol:{normal:"FRw"},unit:"Franc"},SAR:{code:"SAR",fraction:2,symbol:{normal:"SAR"},unit:"Riyal"},SBD:{code:"SBD",fraction:2,symbol:{normal:"$"},unit:"Dollar"},SCR:{code:"SCR",fraction:2,symbol:{normal:"Re.",plural:"Rs."},unit:"Rupee"},SDG:{code:"SDG",fraction:2,symbol:{normal:"LS"},unit:"Pound"},SEK:{code:"SEK",fraction:2,symbol:{normal:"kr"},unit:"Krona"},SGD:{code:"SGD",fraction:2,symbol:{normal:"$"},unit:"Dollar"},SHP:{code:"SHP",fraction:2,symbol:{normal:"£"},unit:"Pound"},SLE:{code:"SLE",fraction:2,symbol:{normal:"Le"},unit:"Leone"},SOS:{code:"SOS",fraction:2,symbol:{normal:"Sh.So."},unit:"Shilling"},SRD:{code:"SRD",fraction:2,symbol:{normal:"$"},unit:"Dollar"},SSP:{code:"SSP",fraction:2,symbol:{normal:"SS£"},unit:"Pound"},STN:{code:"STN",fraction:2,symbol:{normal:"Db"},unit:"Dobra"},SVC:{code:"SVC",fraction:2,symbol:{normal:"₡"},unit:"Colon"},SYP:{code:"SYP",fraction:2,symbol:{normal:"LS"},unit:"Pound"},SZL:{code:"SZL",fraction:2,symbol:{normal:"E"},unit:"Lilangeni"},THB:{code:"THB",fraction:2,symbol:{normal:"฿"},unit:"Baht"},TJS:{code:"TJS",fraction:2,symbol:{normal:"SM"},unit:"Somoni"},TMT:{code:"TMT",fraction:2,symbol:{normal:"m"},unit:"Manat"},TND:{code:"TND",fraction:3,symbol:{normal:"DT"},unit:"Dinar"},TOP:{code:"TOP",fraction:2,symbol:{normal:"T$"},unit:"Paanga"},TRY:{code:"TRY",fraction:2,symbol:{normal:"₺"},unit:"Lira"},TTD:{code:"TTD",fraction:2,symbol:{normal:"$"},unit:"Dollar"},TWD:{code:"TWD",fraction:2,symbol:{normal:"NT$"},unit:"Dollar"},TZS:{code:"TZS",fraction:2,symbol:{normal:"/="},unit:"Shilling"},UAH:{code:"UAH",fraction:2,symbol:{normal:"₴"},unit:"Hryvnia"},UGX:{code:"UGX",fraction:0,symbol:{normal:"/="},unit:"Shilling"},USD:{code:"USD",fraction:2,symbol:{normal:"$"},unit:"Dollar"},UYU:{code:"UYU",fraction:2,symbol:{normal:"$"},unit:"Peso"},UZS:{code:"UZS",fraction:2,unit:"Sum"},VED:{code:"VED",fraction:2,symbol:{normal:"Bs.D"},unit:"Bolivar"},VES:{code:"VES",fraction:2,symbol:{normal:"Bs.S"},unit:"Bolivar"},VND:{code:"VND",fraction:0,symbol:{normal:"₫"},unit:"Dong"},VUV:{code:"VUV",fraction:0,symbol:{normal:"VT"},unit:"Vatu"},WST:{code:"WST",fraction:2,symbol:{normal:"$"},unit:"Tala"},XAF:{code:"XAF",fraction:0,symbol:{normal:"F.CFA"},unit:"Franc"},XCD:{code:"XCD",fraction:2,symbol:{normal:"$"},unit:"Dollar"},XOF:{code:"XOF",fraction:0,symbol:{normal:"F.CFA"},unit:"Franc"},XPF:{code:"XPF",fraction:0,symbol:{normal:"F"},unit:"Franc"},XSU:{code:"XSU",symbol:{normal:"S/."},unit:"Sucre"},YER:{code:"YER",fraction:2,symbol:{normal:"YRl",plural:"YRls"},unit:"Rial"},ZAR:{code:"ZAR",fraction:2,symbol:{normal:"R"},unit:"Rand"},ZMW:{code:"ZMW",fraction:2,symbol:{normal:"K"},unit:"Kwacha"},ZWG:{code:"ZWG",fraction:2,symbol:{normal:"ZiG"},unit:"ZiG"},ZWL:{code:"ZWL",fraction:2,symbol:{normal:"$"},unit:"Dollar"}},Nl="¤",wl=Gn.USD.code,zi="---";var fn=(e=>(e.String="string",e.Number="number",e.Boolean="boolean",e.StringBooleanMap="string_boolean_map",e))(fn||{});const Os={showAccountBalance:"boolean",showAmountInHomePage:"boolean",timezoneUsedForStatisticsInHomePage:"number",overviewAccountFilterInHomePage:"string_boolean_map",overviewTransactionCategoryFilterInHomePage:"string_boolean_map",itemsCountInTransactionListPage:"number",showTotalAmountInTransactionListPage:"boolean",showTagInTransactionListPage:"boolean",autoSaveTransactionDraft:"string",autoGetCurrentGeoLocation:"boolean",alwaysShowTransactionPicturesInMobileTransactionEditPage:"boolean",totalAmountExcludeAccountIds:"string_boolean_map",currencySortByInExchangeRatesPage:"number","statistics.defaultChartDataType":"number","statistics.defaultTimezoneType":"number","statistics.defaultAccountFilter":"string_boolean_map","statistics.defaultTransactionCategoryFilter":"string_boolean_map","statistics.defaultSortingType":"number","statistics.defaultCategoricalChartType":"number","statistics.defaultCategoricalChartDataRangeType":"number","statistics.defaultTrendChartType":"number","statistics.defaultTrendChartDataRangeType":"number","statistics.defaultAssetTrendsChartType":"number","statistics.defaultAssetTrendsChartDataRangeType":"number"},Tn={debug:!1,theme:"auto",fontSize:1,timeZone:"",autoUpdateExchangeRatesData:!0,showAccountBalance:!0,swipeBack:!0,animate:!0,applicationLock:!1,applicationLockWebAuthn:!1,showAddTransactionButtonInDesktopNavbar:!0,showAmountInHomePage:!0,timezoneUsedForStatisticsInHomePage:na.Default.type,overviewAccountFilterInHomePage:{},overviewTransactionCategoryFilterInHomePage:{},itemsCountInTransactionListPage:15,showTotalAmountInTransactionListPage:!0,showTagInTransactionListPage:!0,autoSaveTransactionDraft:"disabled",autoGetCurrentGeoLocation:!1,alwaysShowTransactionPicturesInMobileTransactionEditPage:!1,totalAmountExcludeAccountIds:{},currencySortByInExchangeRatesPage:ca.Default.type,statistics:{defaultChartDataType:z.Default.type,defaultTimezoneType:na.Default.type,defaultAccountFilter:{},defaultTransactionCategoryFilter:{},defaultSortingType:Rt.Default.type,defaultCategoricalChartType:Gt.Default.type,defaultCategoricalChartDataRangeType:as.type,defaultTrendChartType:It.Default.type,defaultTrendChartDataRangeType:ns.type,defaultAssetTrendsChartType:It.Default.type,defaultAssetTrendsChartDataRangeType:ss.type}},xl={currency:wl,firstDayOfWeek:lt.DefaultFirstDay.type},yo="ebk_app_settings",Js="ebk_current_language";function El(){try{const e=localStorage.getItem(yo)||"{}";return JSON.parse(e)}catch(e){return console.warn("settings in local storage is invalid",e),{}}}function Ra(){const e=El();for(const t of Mt(e))typeof Tn[t]=="object"&&(e[t]=Object.assign({},Tn[t],e[t]));return Object.assign({},Tn,e)}function kl(){return Object.assign({},xl)}function Ki(e){const t=JSON.stringify(e);return localStorage.setItem(yo,t)}function vt(e,t){if(!Object.prototype.hasOwnProperty.call(Tn,e))return;const a=Ra();return a[e]=t,Ki(a)}function oa(e,t,a){if(!Object.prototype.hasOwnProperty.call(Tn,e)||!Object.prototype.hasOwnProperty.call(Tn[e],t))return;const n=Ra();let o=n[e];return o||(o={}),o[t]=a,n[e]=o,Ki(n)}function Ul(){return Ra().debug}function Od(){return Ra().theme}function _n(){return Ra().applicationLock}function Fd(){return Ra().swipeBack}function Pd(){return Ra().animate}function Ol(){localStorage.removeItem(yo)}function Fl(){return sessionStorage.getItem(Js)||""}function Pl(e){if(!e){sessionStorage.removeItem(Js);return}sessionStorage.setItem(Js,e)}function Bl(e,t){Ul()&&(t?console.debug("[ezBookkeeping Debug] "+e,t):console.debug("[ezBookkeeping Debug] "+e))}function Rl(e,t){t?console.info("[ezBookkeeping Info] "+e,t):console.info("[ezBookkeeping Info] "+e)}function Yl(e,t){t?console.warn("[ezBookkeeping Warn] "+e,t):console.warn("[ezBookkeeping Warn] "+e)}function zl(e,t){t?console.error("[ezBookkeeping Error] "+e,t):console.error("[ezBookkeeping Error] "+e)}const Z={debug:Bl,info:Rl,warn:Yl,error:zl},ho="EBK_LOCK_SECRET_",ba="ebk_user_token",bs="ebk_user_webauthn_config",To="ebk_user_info",vo="ebk_user_draft_transaction",Ia="ebk_user_session_token",Ya="ebk_user_session_encrypted_token",Za="ebk_user_app_lock_state";function Ao(e){return sn.SHA256(ho+e).toString().substring(0,24)}function bo(e,t){const a=sn.SHA256(`${ho}|${t.username}|${t.secret}`).toString();return sn.AES.encrypt(e,a).toString()}function Is(e,t){const a=sn.SHA256(`${ho}|${t.username}|${t.secret}`).toString();return sn.AES.decrypt(e,a).toString(sn.enc.Utf8)}function Kl(){return!!localStorage.getItem(ba)}function Bd(){return Kl()?_n()?!!sessionStorage.getItem(Za)&&!!sessionStorage.getItem(Ia):!0:!1}function os(){return!!Ua()}function Ua(){const e=sessionStorage.getItem(Za);if(!e)return null;const t=JSON.parse(e);return!t||!t.username||!t.secret?null:t}function Rd(e,t,a){const n=localStorage.getItem(bs);if(!n)throw new Error("WebAuthn credential is not set");if(JSON.parse(n).credentialId!==e)throw new Error("WebAuthn credential is invalid");const s=localStorage.getItem(ba);if(!s)throw new Error("No token in local storage");const r={username:t,secret:a},l=Is(s,r);sessionStorage.setItem(Za,JSON.stringify(r)),sessionStorage.setItem(Ya,s),sessionStorage.setItem(Ia,l)}function Yd(e,t){const a=localStorage.getItem(ba);if(!a)throw new Error("No token in local storage");const n={username:e,secret:Ao(t)},o=Is(a,n);sessionStorage.setItem(Za,JSON.stringify(n)),sessionStorage.setItem(Ya,a),sessionStorage.setItem(Ia,o)}function zd(e,t){const a=localStorage.getItem(ba);if(!a)throw new Error("No token in local storage");const n={username:e,secret:Ao(t)},o=bo(a,n);sessionStorage.setItem(Za,JSON.stringify(n)),sessionStorage.setItem(Ya,o),sessionStorage.setItem(Ia,a),localStorage.setItem(ba,o)}function Kd(){const e=sessionStorage.getItem(Ia);if(!e)throw new Error("No token in session storage");localStorage.setItem(ba,e),sessionStorage.removeItem(Ia),sessionStorage.removeItem(Ya),sessionStorage.removeItem(Za)}function Gd(e){const t=Ao(e),a=Ua();return a?a&&t===a.secret:!1}function ja(){if(_n()){const e=sessionStorage.getItem(Ya),t=localStorage.getItem(ba);if(!e||!t)return null;if(e===t)return sessionStorage.getItem(Ia);Z.warn("encrypted token in local storage does not equal to the one in session storage, need to re-decrypt");const a=Ua();if(!a)return null;const n=Is(t,a);return sessionStorage.setItem(Ya,t),sessionStorage.setItem(Ia,n),n}else return localStorage.getItem(ba)}function za(e){if(Ye(e))if(_n()&&os()){const t=Ua(),a=bo(e,t);sessionStorage.setItem(Ya,a),sessionStorage.setItem(Ia,e),localStorage.setItem(ba,a)}else localStorage.setItem(ba,e)}function Gl(){return!!$l()}function $l(){const e=localStorage.getItem(bs);return e?JSON.parse(e).credentialId:void 0}function $d(e){const t={credentialId:e};localStorage.setItem(bs,JSON.stringify(t))}function mn(){localStorage.removeItem(bs)}function Wl(){const e=localStorage.getItem(To);return e?JSON.parse(e):null}function Hl(e){Ke(e)&&localStorage.setItem(To,JSON.stringify(e))}function Gi(){localStorage.removeItem(To)}function ni(){let e=localStorage.getItem(vo);if(!e)return null;if(_n()){const t=Ua();if(!t)return null;e=Is(e,t)}return JSON.parse(e)}function Vl(e){if(!Ke(e))return;let t=JSON.stringify(e);if(_n()){const a=Ua();if(!a)return;t=bo(t,a)}localStorage.setItem(vo,t)}function $i(){localStorage.removeItem(vo)}function Jl(){sessionStorage.removeItem(Ia),sessionStorage.removeItem(Ya),sessionStorage.removeItem(Za)}function gn(e){e&&sessionStorage.removeItem(Za),sessionStorage.removeItem(Ia),sessionStorage.removeItem(Ya),localStorage.removeItem(ba),$i(),Gi()}var en=(e=>(e.LTR="ltr",e.RTL="rtl",e))(en||{}),bt=(e=>(e[e.Gregorian=0]="Gregorian",e[e.Buddhist=1]="Buddhist",e[e.Chinese=2]="Chinese",e[e.Persian=3]="Persian",e))(bt||{});class Ot{static allInstances=[];static allInstancesByType={};static allInstancesByTypeName={};static LanguageDefaultType=0;static Gregorian=new Ot(1,"Gregorian","Gregorian",0);static Buddhist=new Ot(2,"Buddhist","Buddhist",1);static GregorianWithChinese=new Ot(3,"GregorianWithChinese","Gregorian with Chinese Calendar",0,2);static GregorianWithPersian=new Ot(4,"GregorianWithPersian","Gregorian with Persian Calendar",0,3);static Default=Ot.Gregorian;type;typeName;name;primaryCalendarType;secondaryCalendarType;constructor(t,a,n,o,s){this.type=t,this.typeName=a,this.name=n,this.primaryCalendarType=o,this.secondaryCalendarType=s,Ot.allInstances.push(this),Ot.allInstancesByType[t]=this,Ot.allInstancesByTypeName[a]=this}static values(){return Ot.allInstances}static valueOf(t){return Ot.allInstancesByType[t]}static parse(t){return Ot.allInstancesByTypeName[t]}}class Ft{static allInstances=[];static allInstancesByType={};static allInstancesByTypeName={};static LanguageDefaultType=0;static Gregorian=new Ft(1,"Gregorian","Gregorian",0);static Buddhist=new Ft(2,"Buddhist","Buddhist",1);static Persian=new Ft(3,"Persian","Persian",3);static Default=Ft.Gregorian;type;typeName;name;calendarType;constructor(t,a,n,o){this.type=t,this.typeName=a,this.name=n,this.calendarType=o,Ft.allInstances.push(this),Ft.allInstancesByType[t]=this,Ft.allInstancesByTypeName[a]=this}static values(){return Ft.allInstances}static valueOf(t){return Ft.allInstancesByType[t]}static parse(t){return Ft.allInstancesByTypeName[t]}}class ve{static allInstances=[];static allInstancesByType={};static allInstancesByTypeName={};static allDigitsToWesternArabic={};static allDigitsToNumeralSystem={};static LanguageDefaultType=0;static WesternArabicNumerals=new ve(1,"WesternArabicNumerals","Western Arabic Numerals","0");static EasternArabicNumerals=new ve(2,"EasternArabicNumerals","Eastern Arabic Numerals","٠");static PersianDigits=new ve(3,"PersianDigits","Persian Digits","۰");static BurmeseNumerals=new ve(4,"BurmeseNumerals","Burmese Numerals","၀");static DevanagariNumerals=new ve(5,"DevanagariNumerals","Devanagari Numerals","०");static Default=ve.WesternArabicNumerals;type;typeName;name;digitZero;doubleDigitZero;textualAllDigits;allDigits;digitsToWesternArabic={};constructor(t,a,n,o){this.type=t,this.typeName=a,this.name=n,this.digitZero=o,this.doubleDigitZero=o+o,this.allDigits=[],this.digitsToWesternArabic={};for(let s=0;s<10;s++){const r=String.fromCharCode(this.digitZero.charCodeAt(0)+s);this.allDigits.push(r),this.digitsToWesternArabic[r]=s,ve.allDigitsToWesternArabic[r]=s,ve.allDigitsToNumeralSystem[r]=this}this.textualAllDigits=this.allDigits.join(""),ve.allInstances.push(this),ve.allInstancesByType[t]=this,ve.allInstancesByTypeName[a]=this}getAllDigits(){return this.allDigits.slice()}isDigit(t){return this.digitsToWesternArabic.hasOwnProperty(t)}getLocalizedDigit(t){return t<0||t>9?"":this.allDigits[t]}parseInt(t){if(!t)return Number.NaN;if(this.type===ve.WesternArabicNumerals.type)return parseInt(t,10);{const a=this.replaceLocalizedDigitsToWesternArabicDigits(t);return parseInt(a,10)}}formatNumber(t){return Number.isNaN(t)||!Number.isFinite(t)?t.toString():this.type===ve.WesternArabicNumerals.type?t.toString(10):t===0?this.digitZero:this.replaceWesternArabicDigitsToLocalizedDigits(t.toString(10))}replaceWesternArabicDigitsToLocalizedDigits(t){if(!t)return"";let a="";for(let n=0;n<t.length;n++){const o=t.charAt(n);if(ve.WesternArabicNumerals.isDigit(o)){const s=ve.WesternArabicNumerals.digitsToWesternArabic[o];a+=this.allDigits[s]}else a+=o}return a}replaceLocalizedDigitsToWesternArabicDigits(t){if(!t)return"";let a="";for(let n=0;n<t.length;n++){const o=t.charAt(n);if(this.isDigit(o)){const s=this.digitsToWesternArabic[o];a+=ve.WesternArabicNumerals.allDigits[s]}else a+=o}return a}static values(){return ve.allInstances}static valueOf(t){return ve.allInstancesByType[t]}static parse(t){return ve.allInstancesByTypeName[t]}static detect(t){return ve.allDigitsToNumeralSystem[t]}static toNumber(t){return ve.allDigitsToWesternArabic[t]}}class Je{static allInstances=[];static allInstancesByType={};static allInstancesByTypeName={};static LanguageDefaultType=0;static Dot=new Je(1,"Dot",".");static Comma=new Je(2,"Comma",",");static Default=Je.Dot;type;name;symbol;constructor(t,a,n){this.type=t,this.name=a,this.symbol=n,Je.allInstances.push(this),Je.allInstancesByType[t]=this,Je.allInstancesByTypeName[a]=this}static values(){return Je.allInstances}static valueOf(t){return Je.allInstancesByType[t]}static parse(t){return Je.allInstancesByTypeName[t]}}class et{static allInstances=[];static allInstancesByType={};static allInstancesByTypeName={};static LanguageDefaultType=0;static Dot=new et(1,"Dot",".");static Comma=new et(2,"Comma",",");static Space=new et(3,"Space"," ");static Apostrophe=new et(4,"Apostrophe","'");static Default=et.Comma;type;name;symbol;constructor(t,a,n){this.type=t,this.name=a,this.symbol=n,et.allInstances.push(this),et.allInstancesByType[t]=this,et.allInstancesByTypeName[a]=this}static values(){return et.allInstances}static valueOf(t){return et.allInstancesByType[t]}static parse(t){return et.allInstancesByTypeName[t]}}class Lt{static allInstances=[];static allInstancesByType={};static allInstancesByTypeName={};static LanguageDefaultType=0;static None=new Lt(1,"None","None",!1,t=>t.join(""));static ThousandsSeparator=new Lt(2,"ThousandsSeparator","Thousands Separator",!0,(t,a)=>{if(t.length<=3)return t.join("");let n="";for(let o=t.length-1,s=0;o>=0;o--,s++)s>0&&s%3===0&&(n=a+n),n=t[o]+n;return n});static IndianNumberGrouping=new Lt(3,"IndianNumberGrouping","Indian Number Grouping",!0,(t,a)=>{if(t.length<=3)return t.join("");let n="";const o=t.length;for(let s=o-1,r=0;s>=0;s--,r++)(r===3||r>3&&(r-3)%2===0)&&(n=a+n),n=t[s]+n;return n});static Default=Lt.ThousandsSeparator;type;typeName;name;enabled;format;constructor(t,a,n,o,s){this.type=t,this.typeName=a,this.name=n,this.enabled=o,this.format=s,Lt.allInstances.push(this),Lt.allInstancesByType[t]=this,Lt.allInstancesByTypeName[a]=this}static values(){return Lt.allInstances}static valueOf(t){return Lt.allInstancesByType[t]}static parse(t){return Lt.allInstancesByTypeName[t]}}class Kt{static allInstances=[];static allInstancesByType={};static DotDecimalSeparator=new Kt("1234.56",Je.Dot,void 0,/^-?[0-9]+(\.[0-9]+)?$/);static CommaDecimalSeparator=new Kt("1234,56",Je.Comma,void 0,/^-?[0-9]+(,[0-9]+)?$/);static DotDecimalSeparatorWithCommaGroupingSymbol=new Kt("1,234.56",Je.Dot,et.Comma,/^-?([0-9]+,)*[0-9]+(\.[0-9]+)?$/);static CommaDecimalSeparatorWithDotGroupingSymbol=new Kt("1.234,56",Je.Comma,et.Dot,/^-?([0-9]+\.)*[0-9]+(,[0-9]+)?$/);static DotDecimalSeparatorWithSpaceGroupingSymbol=new Kt("1 234.56",Je.Dot,et.Space,/^-?([0-9]+ )*[0-9]+(\.[0-9]+)?$/);static CommaDecimalSeparatorWithSpaceGroupingSymbol=new Kt("1 234,56",Je.Comma,et.Space,/^-?([0-9]+ )*[0-9]+(,[0-9]+)?$/);static DotDecimalSeparatorWithApostropheGroupingSymbol=new Kt("1'234.56",Je.Dot,et.Apostrophe,/^-?([0-9]+')*[0-9]+(\.[0-9]+)?$/);static CommaDecimalSeparatorWithApostropheGroupingSymbol=new Kt("1'234,56",Je.Comma,et.Apostrophe,/^-?([0-9]+')*[0-9]+(,[0-9]+)?$/);format;decimalSeparator;digitGroupingSymbol;type;regex;constructor(t,a,n,o){this.format=t,this.decimalSeparator=a,this.digitGroupingSymbol=n,this.type=this.decimalSeparator.type+"-"+(this.digitGroupingSymbol?this.digitGroupingSymbol.type:0).toString(),this.regex=o,Kt.allInstances.push(this),Kt.allInstancesByType[this.type]=this}isValid(t){return this.regex.test(t)}static values(){return Kt.allInstances}static valueOf(t){return Kt.allInstancesByType[t]}static detect(t){const a=[];for(const n of Kt.allInstances)n.isValid(t)&&a.push(n);return a.length>0?a:void 0}static detectMulti(t){const a={};for(const o of t){const s=Kt.detect(o);if(s)for(const r of s)a[r.type]=(a[r.type]||0)+1;else return}const n=[];for(const o of Kt.allInstances)a[o.type]===t.length&&n.push(o);return n.length>0?n:void 0}}class ma{static allInstances=[];static allInstancesByType={};static GreaterThan=new ma("gt","Greater than",1);static LessThan=new ma("lt","Less than",1);static EqualTo=new ma("eq","Equal to",1);static NotEqualTo=new ma("ne","Not equal to",1);static Between=new ma("bt","Between",2);static NotBetween=new ma("nb","Not between",2);type;name;paramCount;constructor(t,a,n){this.type=t,this.name=a,this.paramCount=n,ma.allInstances.push(this),ma.allInstancesByType[t]=this}static values(){return ma.allInstances}static valueOf(t){return ma.allInstancesByType[t]}}class _e{static JanuaryFirstDay=new _e(1,1);static Default=_e.JanuaryFirstDay;static MONTH_MAX_DAYS=[31,28,31,30,31,30,31,31,30,31,30,31];month;day;value;constructor(t,a){this.month=t,this.day=a,this.value=t<<8|a}static of(t,a){if(_e.isValidFiscalYearMonthDay(t,a))return new _e(t,a)}static valueOf(t){if(t<257||t>3103)return;const a=t>>8&255,n=t&255;return _e.of(a,n)}static parse(t){if(!t||!t.includes("-"))return;const a=t.split("-");if(a.length!==2)return;const n=parseInt(a[0],10),o=parseInt(a[1],10);return _e.of(n,o)}toMonthDashDayString(){return`${this.month.toString().padStart(2,"0")}-${this.day.toString().padStart(2,"0")}`}toMonthDay(){return{month:this.month,day:this.day}}static isValidFiscalYearMonthDay(t,a){return 1<=t&&t<=12&&1<=a&&a<=_e.MONTH_MAX_DAYS[t-1]}}const _l=0;class ft{static allInstances=[];static allInstancesByType={};static allInstancesByTypeName={};static StartYYYY_EndYYYY=new ft(1,"StartYYYY_EndYYYY");static StartYYYY_EndYY=new ft(2,"StartYYYY_EndYY");static StartYY_EndYY=new ft(3,"StartYY_EndYY");static EndYYYY=new ft(4,"EndYYYY");static EndYY=new ft(5,"EndYY");static Default=ft.EndYYYY;type;typeName;constructor(t,a){this.type=t,this.typeName=a,ft.allInstances.push(this),ft.allInstancesByType[t]=this,ft.allInstancesByTypeName[a]=this}static values(){return ft.allInstances}static valueOf(t){return ft.allInstancesByType[t]}static parse(t){return ft.allInstancesByTypeName[t]}}var _s=(e=>(e[e.LatitudeLongitude=0]="LatitudeLongitude",e[e.LongitudeLatitude=1]="LongitudeLatitude",e))(_s||{}),is=(e=>(e[e.DecimalDegrees=0]="DecimalDegrees",e[e.DecimalMinutes=1]="DecimalMinutes",e[e.DegreesMinutesSeconds=2]="DegreesMinutesSeconds",e))(is||{}),Zs=(e=>(e[e.Signed=0]="Signed",e[e.Directional=1]="Directional",e))(Zs||{});class Bt{static allInstances=[];static allInstancesByType={};static SystemDefaultType=0;static LatitudeLongitudeDecimalDegrees=new Bt(1,"Latitude Longitude D.D°",0,0,0);static LongitudeLatitudeDecimalDegrees=new Bt(2,"Longitude Latitude D.D°",1,0,0);static LatitudeLongitudeDecimalMinutes=new Bt(3,"Latitude Longitude D°M.M'",0,1,1);static LongitudeLatitudeDecimalMinutes=new Bt(4,"Longitude Latitude D°M.M'",1,1,1);static LatitudeLongitudeDegreesMinutesSeconds=new Bt(5,`Latitude Longitude D°M'S"`,0,2,1);static LongitudeLatitudeDegreesMinutesSeconds=new Bt(6,`Longitude Latitude D°M'S"`,1,2,1);static Default=Bt.LatitudeLongitudeDecimalDegrees;type;name;displayOrder;displayFormat;directionFormat;constructor(t,a,n,o,s){this.type=t,this.name=a,this.displayOrder=n,this.displayFormat=o,this.directionFormat=s,Bt.allInstances.push(this),Bt.allInstancesByType[t]=this}static values(){return Bt.allInstances}static valueOf(t){return Bt.allInstancesByType[t]}}function Wi(e){if(!e)return e;const t=Math.max(-90,Math.min(90,e.latitude)),a=((e.longitude+180)%360+360)%360-180;return{latitude:t,longitude:a}}class dt{static allInstances=[];static allInstancesByType={};static SystemDefaultType=0;static Green=new dt(1,"Green","#009688","#009688","expense-amount-color-green","income-amount-color-green");static Red=new dt(2,"Red","#d43f3f","#d43f3f","expense-amount-color-red","income-amount-color-red");static Yellow=new dt(3,"Yellow","#e2b60a","#e2b60a","expense-amount-color-yellow","income-amount-color-yellow");static BlackOrWhite=new dt(4,"Black or White","#413935","#fcf0e3","expense-amount-color-blackorwhite","income-amount-color-blackorwhite");static DefaultExpenseColor=dt.Green;static DefaultIncomeColor=dt.Red;type;name;lightThemeColor;darkThemeColor;expenseClassName;incomeClassName;constructor(t,a,n,o,s,r){this.type=t,this.name=a,this.lightThemeColor=n,this.darkThemeColor=o,this.expenseClassName=s,this.incomeClassName=r,dt.allInstances.push(this),dt.allInstancesByType[t]=this}static values(){return dt.allInstances}static valueOf(t){return dt.allInstancesByType[t]}}class Me{static allInstances=[];static SingleAccount=new Me(1,"Single Account");static MultiSubAccounts=new Me(2,"Multiple Sub-accounts");type;name;constructor(t,a){this.type=t,this.name=a,Me.allInstances.push(this)}static values(){return Me.allInstances}}class Ve{static allInstances=[];static allInstancesByType={};static Cash=new Ve(1,1,"Cash",!0,!1,"1");static CheckingAccount=new Ve(2,2,"Checking Account",!0,!1,"100");static SavingsAccount=new Ve(8,3,"Savings Account",!0,!1,"100");static CreditCard=new Ve(3,4,"Credit Card",!1,!0,"100");static VirtualAccount=new Ve(4,5,"Virtual Account",!0,!1,"500");static DebtAccount=new Ve(5,6,"Debt Account",!1,!0,"600");static Receivables=new Ve(6,7,"Receivables",!0,!1,"700");static CertificateOfDeposit=new Ve(9,8,"Certificate of Deposit",!0,!1,"110");static InvestmentAccount=new Ve(7,9,"Investment Account",!0,!1,"800");static Default=Ve.Cash;type;displayOrder;name;isAsset;isLiability;defaultAccountIconId;constructor(t,a,n,o,s,r){this.type=t,this.displayOrder=a,this.name=n,this.isAsset=o,this.isLiability=s,this.defaultAccountIconId=r,Ve.allInstances.push(this),Ve.allInstancesByType[t]=this}static values(){return Ve.allInstances}static valueOf(t){return Ve.allInstancesByType[t]}}var pe=(e=>(e[e.Income=1]="Income",e[e.Expense=2]="Expense",e[e.Transfer=3]="Transfer",e))(pe||{});const Zl=[1,2,3];var ue=(e=>(e[e.ModifyBalance=1]="ModifyBalance",e[e.Income=2]="Income",e[e.Expense=3]="Expense",e[e.Transfer=4]="Transfer",e))(ue||{}),kn=(e=>(e[e.TransferFrom=1]="TransferFrom",e[e.TransferTo=2]="TransferTo",e))(kn||{});class ra{static allInstances=[];static None=new ra(0,"None");static All=new ra(1,"All");static TodayOrLater=new ra(2,"Today or later");static Recent24HoursOrLater=new ra(3,"Recent 24 hours or later");static ThisWeekOrLater=new ra(4,"This week or later");static ThisMonthOrLater=new ra(5,"This month or later");static ThisYearOrLater=new ra(6,"This year or later");type;name;constructor(t,a){this.type=t,this.name=a,ra.allInstances.push(this)}static values(){return ra.allInstances}}class Zt{static allInstances=[];static HasAny=new Zt(0,"With Any Selected Tags");static HasAll=new Zt(1,"With All Selected Tags");static NotHasAny=new Zt(2,"Without Any Selected Tags");static NotHasAll=new Zt(3,"Without All Selected Tags");static Default=Zt.HasAny;type;name;constructor(t,a){this.type=t,this.name=a,Zt.allInstances.push(this)}static values(){return Zt.allInstances}}class rt{static allInstances=[];static TransactionTime=new rt(1,"Transaction Time");static TransactionTimezone=new rt(2,"Transaction Timezone");static TransactionType=new rt(3,"Transaction Type");static Category=new rt(4,"Category");static SubCategory=new rt(5,"Secondary Category");static AccountName=new rt(6,"Account Name");static AccountCurrency=new rt(7,"Currency");static Amount=new rt(8,"Amount");static RelatedAccountName=new rt(9,"Transfer In Account Name");static RelatedAccountCurrency=new rt(10,"Transfer In Currency");static RelatedAmount=new rt(11,"Transfer In Amount");static GeographicLocation=new rt(12,"Geographic Location");static Tags=new rt(13,"Tags");static Description=new rt(14,"Description");type;name;constructor(t,a){this.type=t,this.name=a,rt.allInstances.push(this)}static values(){return rt.allInstances}}class ut{static JSON_ROOT_FIELD="ezBookkeepingImportTransactionDataMapping";static DEFAULT_INCLUDE_HEADER=!0;static DEFAULT_TIME_FORMAT="";static DEFAULT_TIMEZONE_FORMAT="";static DEFAULT_AMOUNT_FORMAT="";static DEFAULT_GEO_LOCATION_SEPARATOR=" ";static DEFAULT_GEO_LOCATION_ORDER="lonlat";static DEFAULT_TAG_SEPARATOR=";";includeHeader;dataColumnMapping;transactionTypeMapping;timeFormat;timezoneFormat;amountFormat;geoLocationSeparator;geoLocationOrder;tagSeparator;constructor(t,a,n,o,s,r,l,i,u){this.includeHeader=t,this.dataColumnMapping=a,this.transactionTypeMapping=n,this.timeFormat=o,this.timezoneFormat=s,this.amountFormat=r,this.geoLocationSeparator=l,this.geoLocationOrder=i,this.tagSeparator=u}isColumnMappingSet(t){return this.dataColumnMapping.hasOwnProperty(t.type)&&typeof this.dataColumnMapping[t.type]=="number"}toggleIncludeHeader(){this.includeHeader=!this.includeHeader}toggleDataMappingColumn(t,a){this.dataColumnMapping[a]===t?delete this.dataColumnMapping[a]:this.dataColumnMapping[a]=t;for(const n of Mt(this.dataColumnMapping))n!==a.toString()&&this.dataColumnMapping[parseInt(n)]===t&&delete this.dataColumnMapping[parseInt(n)]}setGeoLocationFormat(t,a){this.geoLocationSeparator=t,this.geoLocationOrder=a}formatGeoLocation(t,a){return this.geoLocationOrder==="latlon"?`${t}${this.geoLocationSeparator}${a}`:`${a}${this.geoLocationSeparator}${t}`}parseFileAllTransactionTypes(t){if(!t||!t.length||!this.isColumnMappingSet(rt.TransactionType))return[];const a={},n=[],o=this.dataColumnMapping[rt.TransactionType.type],s=this.includeHeader?1:0;for(let r=s;r<t.length;r++){const l=t[r];if(!l||l.length<=o)continue;const i=l[o];i&&!a[i]&&(n.push(i),a[i]=!0)}return n}parseFileValidMappedTransactionTypes(t){if(!t||!t.length||!this.isColumnMappingSet(rt.TransactionType))return{};const a={};if(!this.transactionTypeMapping)return a;for(const[n,o]of Wt(this.transactionTypeMapping))ue.ModifyBalance<=o&&o<=ue.Transfer&&(a[n]=o);return a}parseFileAutoDetectedTimeFormat(t){if(!t||!t.length||!this.isColumnMappingSet(rt.TransactionTime))return;const a=[],n=this.dataColumnMapping[rt.TransactionTime.type],o=this.includeHeader?1:0;for(let r=o;r<t.length;r++){const l=t[r];if(!l||l.length<=n)continue;const i=l[n];i&&a.push(i)}const s=kt.detectMulti(a);if(!(!s||!s.length||s.length>1))return s[0].format}parseFileAutoDetectedTimezoneFormat(t){if(!t||!t.length||!this.isColumnMappingSet(rt.TransactionTimezone))return;const a=[],n=this.dataColumnMapping[rt.TransactionTimezone.type],o=this.includeHeader?1:0;for(let r=o;r<t.length;r++){const l=t[r];if(!l||l.length<=n)continue;const i=l[n];i&&a.push(i)}const s=fa.detectMulti(a);if(!(!s||!s.length||s.length>1))return s[0].value}parseFileAutoDetectedAmountFormat(t){if(!t||!t.length||!this.isColumnMappingSet(rt.Amount))return;const a=[],n=this.dataColumnMapping[rt.Amount.type],o=this.includeHeader?1:0;for(let r=o;r<t.length;r++){const l=t[r];if(!l||l.length<=n)continue;const i=l[n];i&&a.push(i)}const s=Kt.detectMulti(a);if(!(!s||!s.length))return s[0].type}reset(){this.includeHeader=ut.DEFAULT_INCLUDE_HEADER,this.dataColumnMapping={},this.transactionTypeMapping={},this.timeFormat=ut.DEFAULT_TIME_FORMAT,this.timezoneFormat=ut.DEFAULT_TIMEZONE_FORMAT,this.amountFormat=ut.DEFAULT_AMOUNT_FORMAT,this.geoLocationSeparator=ut.DEFAULT_GEO_LOCATION_SEPARATOR,this.geoLocationOrder=ut.DEFAULT_GEO_LOCATION_ORDER,this.tagSeparator=ut.DEFAULT_TAG_SEPARATOR}toJson(){return JSON.stringify({[ut.JSON_ROOT_FIELD]:{includeHeader:this.includeHeader,dataColumnMapping:this.dataColumnMapping,transactionTypeMapping:this.transactionTypeMapping,timeFormat:this.timeFormat,timezoneFormat:this.timezoneFormat,amountFormat:this.amountFormat,geoLocationSeparator:this.geoLocationSeparator,geoLocationOrder:this.geoLocationOrder,tagSeparator:this.tagSeparator}})}static createEmpty(){return new ut(ut.DEFAULT_INCLUDE_HEADER,{},{},ut.DEFAULT_TIME_FORMAT,ut.DEFAULT_TIMEZONE_FORMAT,ut.DEFAULT_AMOUNT_FORMAT,ut.DEFAULT_GEO_LOCATION_SEPARATOR,ut.DEFAULT_GEO_LOCATION_ORDER,ut.DEFAULT_TAG_SEPARATOR)}static parseFromJson(t){try{const n=JSON.parse(t)[ut.JSON_ROOT_FIELD];return n?new ut(n.includeHeader??ut.DEFAULT_INCLUDE_HEADER,n.dataColumnMapping??{},n.transactionTypeMapping??{},n.timeFormat??ut.DEFAULT_TIME_FORMAT,n.timezoneFormat??ut.DEFAULT_TIMEZONE_FORMAT,n.amountFormat??ut.DEFAULT_AMOUNT_FORMAT,n.geoLocationSeparator??ut.DEFAULT_GEO_LOCATION_SEPARATOR,n.geoLocationOrder??ut.DEFAULT_GEO_LOCATION_ORDER,n.tagSeparator??ut.DEFAULT_TAG_SEPARATOR):null}catch{return null}}}class gs{dataType;sourceValue;targetId;constructor(t,a,n){this.dataType=t,this.sourceValue=a,this.targetId=n}toJsonObject(){return{type:this.dataType,sourceValue:this.sourceValue,targetId:this.targetId}}static of(t,a,n){return new gs(t,a,n)}static parse(t){return!t||typeof t!="object"||!("type"in t)||!("sourceValue"in t)||!("targetId"in t)||typeof t.type!="string"||typeof t.sourceValue!="string"||typeof t.targetId!="string"||t.type!=="expenseCategory"&&t.type!=="incomeCategory"&&t.type!=="transferCategory"&&t.type!=="account"&&t.type!=="tag"?null:new gs(t.type,t.sourceValue,t.targetId)}}class Un{static JSON_ROOT_FIELD="ezBookkeepingImportTransactionReplaceRules";rules;constructor(t){this.rules=t}getRules(){return this.rules}toJson(){const t=[];for(const a of this.rules)t.push(a.toJsonObject());return JSON.stringify({[Un.JSON_ROOT_FIELD]:t})}static of(t){return new Un(t)}static parseFromJson(t){try{const n=JSON.parse(t)[Un.JSON_ROOT_FIELD];if(!n||!("length"in n))return null;const o=new Un([]);for(const s of n){const r=gs.parse(s);r&&o.rules.push(r)}return o}catch{return null}}}class $t{static allInstancesByExtension={};static JSON=new $t("json","application/json");static CSV=new $t("csv","text/csv");static TSV=new $t("tsv","text/tab-separated-values");static TXT=new $t("txt","text/text");static MARKDOWN=new $t("md","text/markdown");static JS=new $t("js","application/javascript");static JPG=new $t("jpg","image/jpeg");extension;contentType;constructor(t,a){this.extension=t,this.contentType=a,$t.allInstancesByExtension[t]=this}isSameType(t){return t?this.contentType===t||t.indexOf(this.contentType)===0:!1}formatFileName(t){return t.endsWith(`.${this.extension}`)?t:`${t}.${this.extension}`}createBlob(t){return new Blob([t],{type:this.contentType})}createFile(t,a){return new File([t],this.formatFileName(a),{type:this.contentType})}createFileFromBlob(t,a){return new File([t],this.formatFileName(a),{type:this.contentType})}static parse(t){return $t.allInstancesByExtension[t]}}const ql=2,Xl=2,Jt="***",xa="+",Hi={displayName:"Coordinated Universal Time",timezoneName:"Etc/GMT"},Ql=[{displayName:"International Date Line West",timezoneName:"Etc/GMT+12"},{displayName:"Coordinated Universal Time-11",timezoneName:"Etc/GMT+11"},{displayName:"Aleutian Islands",timezoneName:"America/Adak"},{displayName:"Hawaii",timezoneName:"Pacific/Honolulu"},{displayName:"Marquesas Islands",timezoneName:"Pacific/Marquesas"},{displayName:"Alaska",timezoneName:"America/Anchorage"},{displayName:"Coordinated Universal Time-09",timezoneName:"Etc/GMT+9"},{displayName:"Baja California",timezoneName:"America/Tijuana"},{displayName:"Coordinated Universal Time-08",timezoneName:"Etc/GMT+8"},{displayName:"Pacific Time (US & Canada)",timezoneName:"America/Los_Angeles"},{displayName:"Arizona",timezoneName:"America/Phoenix"},{displayName:"La Paz, Mazatlan",timezoneName:"America/Chihuahua"},{displayName:"Mountain Time (US & Canada)",timezoneName:"America/Denver"},{displayName:"Yukon",timezoneName:"America/Whitehorse"},{displayName:"Central America",timezoneName:"America/Guatemala"},{displayName:"Central Time (US & Canada)",timezoneName:"America/Chicago"},{displayName:"Easter Island",timezoneName:"Pacific/Easter"},{displayName:"Guadalajara, Mexico City, Monterrey",timezoneName:"America/Mexico_City"},{displayName:"Saskatchewan",timezoneName:"America/Regina"},{displayName:"Bogota, Lima, Quito, Rio Branco",timezoneName:"America/Bogota"},{displayName:"Chetumal",timezoneName:"America/Cancun"},{displayName:"Eastern Time (US & Canada)",timezoneName:"America/New_York"},{displayName:"Haiti",timezoneName:"America/Port-au-Prince"},{displayName:"Havana",timezoneName:"America/Havana"},{displayName:"Indiana (East)",timezoneName:"America/Indianapolis"},{displayName:"Turks and Caicos",timezoneName:"America/Grand_Turk"},{displayName:"Asuncion",timezoneName:"America/Asuncion"},{displayName:"Atlantic Time (Canada)",timezoneName:"America/Halifax"},{displayName:"Caracas",timezoneName:"America/Caracas"},{displayName:"Cuiaba",timezoneName:"America/Cuiaba"},{displayName:"Georgetown, La Paz, Manaus, San Juan",timezoneName:"America/La_Paz"},{displayName:"Santiago",timezoneName:"America/Santiago"},{displayName:"Newfoundland",timezoneName:"America/St_Johns"},{displayName:"Araguaina",timezoneName:"America/Araguaina"},{displayName:"Brasilia",timezoneName:"America/Sao_Paulo"},{displayName:"Cayenne, Fortaleza",timezoneName:"America/Cayenne"},{displayName:"City of Buenos Aires",timezoneName:"America/Buenos_Aires"},{displayName:"Montevideo",timezoneName:"America/Montevideo"},{displayName:"Punta Arenas",timezoneName:"America/Punta_Arenas"},{displayName:"Saint Pierre and Miquelon",timezoneName:"America/Miquelon"},{displayName:"Salvador",timezoneName:"America/Bahia"},{displayName:"Coordinated Universal Time-02",timezoneName:"Etc/GMT+2"},{displayName:"Greenland",timezoneName:"America/Godthab"},{displayName:"Azores",timezoneName:"Atlantic/Azores"},{displayName:"Cabo Verde Is",timezoneName:"Atlantic/Cape_Verde"},Hi,{displayName:"Dublin, Edinburgh, Lisbon, London",timezoneName:"Europe/London"},{displayName:"Monrovia, Reykjavik",timezoneName:"Atlantic/Reykjavik"},{displayName:"Sao Tome",timezoneName:"Africa/Sao_Tome"},{displayName:"Casablanca",timezoneName:"Africa/Casablanca"},{displayName:"Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna",timezoneName:"Europe/Berlin"},{displayName:"Belgrade, Bratislava, Budapest, Ljubljana, Prague",timezoneName:"Europe/Budapest"},{displayName:"Brussels, Copenhagen, Madrid, Paris",timezoneName:"Europe/Paris"},{displayName:"Sarajevo, Skopje, Warsaw, Zagreb",timezoneName:"Europe/Warsaw"},{displayName:"West Central Africa",timezoneName:"Africa/Lagos"},{displayName:"Athens, Bucharest",timezoneName:"Europe/Bucharest"},{displayName:"Beirut",timezoneName:"Asia/Beirut"},{displayName:"Cairo",timezoneName:"Africa/Cairo"},{displayName:"Chisinau",timezoneName:"Europe/Chisinau"},{displayName:"Gaza, Hebron",timezoneName:"Asia/Gaza"},{displayName:"Harare, Pretoria",timezoneName:"Africa/Johannesburg"},{displayName:"Helsinki, Kyiv, Riga, Sofia, Tallinn, Vilnius",timezoneName:"Europe/Kiev"},{displayName:"Jerusalem",timezoneName:"Asia/Jerusalem"},{displayName:"Juba",timezoneName:"Africa/Juba"},{displayName:"Kaliningrad",timezoneName:"Europe/Kaliningrad"},{displayName:"Khartoum",timezoneName:"Africa/Khartoum"},{displayName:"Tripoli",timezoneName:"Africa/Tripoli"},{displayName:"Windhoek",timezoneName:"Africa/Windhoek"},{displayName:"Amman",timezoneName:"Asia/Amman"},{displayName:"Baghdad",timezoneName:"Asia/Baghdad"},{displayName:"Damascus",timezoneName:"Asia/Damascus"},{displayName:"Istanbul",timezoneName:"Europe/Istanbul"},{displayName:"Kuwait, Riyadh",timezoneName:"Asia/Riyadh"},{displayName:"Minsk",timezoneName:"Europe/Minsk"},{displayName:"Moscow, St Petersburg",timezoneName:"Europe/Moscow"},{displayName:"Nairobi",timezoneName:"Africa/Nairobi"},{displayName:"Volgograd",timezoneName:"Europe/Volgograd"},{displayName:"Tehran",timezoneName:"Asia/Tehran"},{displayName:"Abu Dhabi, Muscat",timezoneName:"Asia/Dubai"},{displayName:"Astrakhan, Ulyanovsk",timezoneName:"Europe/Astrakhan"},{displayName:"Baku",timezoneName:"Asia/Baku"},{displayName:"Izhevsk, Samara",timezoneName:"Europe/Samara"},{displayName:"Port Louis",timezoneName:"Indian/Mauritius"},{displayName:"Saratov",timezoneName:"Europe/Saratov"},{displayName:"Tbilisi",timezoneName:"Asia/Tbilisi"},{displayName:"Yerevan",timezoneName:"Asia/Yerevan"},{displayName:"Kabul",timezoneName:"Asia/Kabul"},{displayName:"Ashgabat, Tashkent",timezoneName:"Asia/Tashkent"},{displayName:"Astana",timezoneName:"Asia/Qyzylorda"},{displayName:"Ekaterinburg",timezoneName:"Asia/Yekaterinburg"},{displayName:"Islamabad, Karachi",timezoneName:"Asia/Karachi"},{displayName:"Chennai, Kolkata, Mumbai, New Delhi",timezoneName:"Asia/Calcutta"},{displayName:"Sri Jayawardenepura",timezoneName:"Asia/Colombo"},{displayName:"Kathmandu",timezoneName:"Asia/Kathmandu"},{displayName:"Bishkek",timezoneName:"Asia/Bishkek"},{displayName:"Dhaka",timezoneName:"Asia/Dhaka"},{displayName:"Omsk",timezoneName:"Asia/Omsk"},{displayName:"Yangon (Rangoon)",timezoneName:"Asia/Rangoon"},{displayName:"Bangkok, Hanoi, Jakarta",timezoneName:"Asia/Bangkok"},{displayName:"Barnaul, Gorno-Altaysk",timezoneName:"Asia/Barnaul"},{displayName:"Hovd",timezoneName:"Asia/Hovd"},{displayName:"Krasnoyarsk",timezoneName:"Asia/Krasnoyarsk"},{displayName:"Novosibirsk",timezoneName:"Asia/Novosibirsk"},{displayName:"Tomsk",timezoneName:"Asia/Tomsk"},{displayName:"Beijing, Chongqing, Hong Kong SAR, Urumqi",timezoneName:"Asia/Shanghai"},{displayName:"Irkutsk",timezoneName:"Asia/Irkutsk"},{displayName:"Kuala Lumpur, Singapore",timezoneName:"Asia/Singapore"},{displayName:"Perth",timezoneName:"Australia/Perth"},{displayName:"Taipei",timezoneName:"Asia/Taipei"},{displayName:"Ulaanbaatar",timezoneName:"Asia/Ulaanbaatar"},{displayName:"Eucla",timezoneName:"Australia/Eucla"},{displayName:"Chita",timezoneName:"Asia/Chita"},{displayName:"Osaka, Sapporo, Tokyo",timezoneName:"Asia/Tokyo"},{displayName:"Pyongyang",timezoneName:"Asia/Pyongyang"},{displayName:"Seoul",timezoneName:"Asia/Seoul"},{displayName:"Yakutsk",timezoneName:"Asia/Yakutsk"},{displayName:"Adelaide",timezoneName:"Australia/Adelaide"},{displayName:"Darwin",timezoneName:"Australia/Darwin"},{displayName:"Brisbane",timezoneName:"Australia/Brisbane"},{displayName:"Canberra, Melbourne, Sydney",timezoneName:"Australia/Sydney"},{displayName:"Guam, Port Moresby",timezoneName:"Pacific/Port_Moresby"},{displayName:"Hobart",timezoneName:"Australia/Hobart"},{displayName:"Vladivostok",timezoneName:"Asia/Vladivostok"},{displayName:"Lord Howe Island",timezoneName:"Australia/Lord_Howe"},{displayName:"Bougainville Island",timezoneName:"Pacific/Bougainville"},{displayName:"Chokurdakh",timezoneName:"Asia/Srednekolymsk"},{displayName:"Magadan",timezoneName:"Asia/Magadan"},{displayName:"Norfolk Island",timezoneName:"Pacific/Norfolk"},{displayName:"Sakhalin",timezoneName:"Asia/Sakhalin"},{displayName:"Solomon Is, New Caledonia",timezoneName:"Pacific/Guadalcanal"},{displayName:"Anadyr, Petropavlovsk-Kamchatsky",timezoneName:"Asia/Kamchatka"},{displayName:"Auckland, Wellington",timezoneName:"Pacific/Auckland"},{displayName:"Coordinated Universal Time+12",timezoneName:"Etc/GMT-12"},{displayName:"Fiji",timezoneName:"Pacific/Fiji"},{displayName:"Chatham Islands",timezoneName:"Pacific/Chatham"},{displayName:"Coordinated Universal Time+13",timezoneName:"Etc/GMT-13"},{displayName:"Nukualofa",timezoneName:"Pacific/Tongatapu"},{displayName:"Samoa",timezoneName:"Pacific/Apia"},{displayName:"Kiritimati Island",timezoneName:"Pacific/Kiritimati"}],jl=[{name:"Food & Drink",categoryIconId:"1",color:"ff6b22",subCategories:[{name:"Food",categoryIconId:"2",color:"ff6b22"},{name:"Drink",categoryIconId:"30",color:"ff6b22"},{name:"Fruit & Snack",categoryIconId:"70",color:"ff6b22"}]},{name:"Clothing & Appearance",categoryIconId:"100",color:"673ab7",subCategories:[{name:"Clothing",categoryIconId:"110",color:"673ab7"},{name:"Jewelry",categoryIconId:"170",color:"673ab7"},{name:"Cosmetic",categoryIconId:"180",color:"673ab7"},{name:"Hair Cuts & Salon",categoryIconId:"190",color:"673ab7"}]},{name:"Housing & Houseware",categoryIconId:"200",color:"000000",subCategories:[{name:"Houseware",categoryIconId:"210",color:"000000"},{name:"Electronics",categoryIconId:"230",color:"000000"},{name:"Repairs & Maintenance",categoryIconId:"250",color:"000000"},{name:"Housekeeping Services",categoryIconId:"260",color:"000000"},{name:"Utilities Expense",categoryIconId:"270",color:"000000"},{name:"Rent & Mortgage",categoryIconId:"290",color:"000000"}]},{name:"Transportation",categoryIconId:"300",color:"009688",subCategories:[{name:"Public Transit",categoryIconId:"310",color:"009688"},{name:"Taxi & Car Rental",categoryIconId:"320",color:"009688"},{name:"Personal Car Expense",categoryIconId:"330",color:"009688"},{name:"Train Tickets",categoryIconId:"370",color:"009688"},{name:"Airline Tickets",categoryIconId:"390",color:"009688"}]},{name:"Communication",categoryIconId:"400",color:"2196f3",subCategories:[{name:"Telephone Bill",categoryIconId:"420",color:"2196f3"},{name:"Internet Bill",categoryIconId:"430",color:"2196f3"},{name:"Express Fee",categoryIconId:"480",color:"2196f3"}]},{name:"Entertainment",categoryIconId:"500",color:"ff2d55",subCategories:[{name:"Sports & Fitness",categoryIconId:"510",color:"ff2d55"},{name:"Party Expense",categoryIconId:"540",color:"ff2d55"},{name:"Movies & Shows",categoryIconId:"550",color:"ff2d55"},{name:"Toys & Games",categoryIconId:"560",color:"ff2d55"},{name:"Subscriptions",categoryIconId:"570",color:"ff2d55"},{name:"Pet Expense",categoryIconId:"580",color:"ff2d55"},{name:"Travelling",categoryIconId:"590",color:"ff2d55"}]},{name:"Education & Studying",categoryIconId:"600",color:"cddc39",subCategories:[{name:"Books & Newspaper & Magazines",categoryIconId:"610",color:"cddc39"},{name:"Training Courses",categoryIconId:"660",color:"cddc39"},{name:"Certification & Examination",categoryIconId:"680",color:"cddc39"}]},{name:"Gifts & Donations",categoryIconId:"700",color:"4cd964",subCategories:[{name:"Gifts",categoryIconId:"710",color:"4cd964"},{name:"Donations",categoryIconId:"780",color:"4cd964"}]},{name:"Medical & Healthcare",categoryIconId:"800",color:"ff3b30",subCategories:[{name:"Diagnosis & Treatment",categoryIconId:"840",color:"ff3b30"},{name:"Medications",categoryIconId:"860",color:"ff3b30"},{name:"Medical Devices",categoryIconId:"890",color:"ff3b30"}]},{name:"Finance & Insurance",categoryIconId:"900",color:"ff9500",subCategories:[{name:"Tax Expense",categoryIconId:"910",color:"ff9500"},{name:"Service Charge",categoryIconId:"930",color:"ff9500"},{name:"Insurance Expense",categoryIconId:"950",color:"ff9500"},{name:"Interest Expense",categoryIconId:"970",color:"ff9500"},{name:"Compensation & Fine",categoryIconId:"990",color:"ff9500"}]},{name:"Miscellaneous",categoryIconId:"1000",color:"8e8e93",subCategories:[{name:"Other Expense",categoryIconId:"1010",color:"8e8e93"}]}],ec=[{name:"Occupational Earnings",categoryIconId:"2000",color:"ff6b22",subCategories:[{name:"Salary Income",categoryIconId:"2010",color:"ff6b22"},{name:"Bonus Income",categoryIconId:"2020",color:"ff6b22"},{name:"Overtime Pay",categoryIconId:"231",color:"ff6b22"},{name:"Side Job Income",categoryIconId:"2080",color:"ff6b22"}]},{name:"Finance & Investment",categoryIconId:"900",color:"ff9500",subCategories:[{name:"Investment Income",categoryIconId:"2100",color:"ff9500"},{name:"Rental Income",categoryIconId:"290",color:"ff9500"},{name:"Interest Income",categoryIconId:"970",color:"ff9500"}]},{name:"Miscellaneous",categoryIconId:"1000",color:"8e8e93",subCategories:[{name:"Gift & Lucky Money",categoryIconId:"710",color:"8e8e93"},{name:"Winnings Income",categoryIconId:"564",color:"8e8e93"},{name:"Windfall",categoryIconId:"5200",color:"8e8e93"},{name:"Other Income",categoryIconId:"3010",color:"8e8e93"}]}],tc=[{name:"General Transfer",categoryIconId:"4000",color:"ff6b22",subCategories:[{name:"Bank Transfer",categoryIconId:"900",color:"ff6b22"},{name:"Credit Card Repayment",categoryIconId:"980",color:"ff6b22"},{name:"Deposits & Withdrawals",categoryIconId:"981",color:"ff6b22"}]},{name:"Loan & Debt",categoryIconId:"950",color:"ff9500",subCategories:[{name:"Borrowing Money",categoryIconId:"910",color:"ff9500"},{name:"Lending Money",categoryIconId:"290",color:"ff9500"},{name:"Repayment",categoryIconId:"930",color:"ff9500"},{name:"Debt Collection",categoryIconId:"5030",color:"ff9500"}]},{name:"Miscellaneous",categoryIconId:"1000",color:"8e8e93",subCategories:[{name:"Out-of-Pocket Expense",categoryIconId:"2010",color:"8e8e93"},{name:"Reimbursement",categoryIconId:"920",color:"8e8e93"},{name:"Other Transfer",categoryIconId:"4900",color:"8e8e93"}]}],ac="/api",nc="/qrcode",si="/proxy",sc="/_AMapService",Vi=1e4,jn=3e4,oi=18e4,oc=18e5,Fs=18e5,ic=6e5,rc="https://maps.googleapis.com/maps/api/js",lc="https://api.map.baidu.com/api?v=3.0",cc="https://webapi.amap.com/maps?v=2.0";var qs=(e=>(e[e.ApiNotFound=100001]="ApiNotFound",e[e.ValidatorError=2e5]="ValidatorError",e[e.UserEmailNotVerified=201020]="UserEmailNotVerified",e[e.TwoFactorAuthorizationPasscodeEmpty=203005]="TwoFactorAuthorizationPasscodeEmpty",e[e.TransactionCannotCreateInThisTime=205017]="TransactionCannotCreateInThisTime",e[e.TransactionCannotModifyInThisTime=205018]="TransactionCannotModifyInThisTime",e[e.TransactionPictureNotFound=211001]="TransactionPictureNotFound",e))(qs||{});const ii={"/api/register.json":{message:"User registration is disabled"}},uc=[{localeKey:"parameter invalid",regex:/^parameter "(\w+)" is invalid$/,parameters:[{field:"parameter",localized:!0}]},{localeKey:"parameter required",regex:/^parameter "(\w+)" is required$/,parameters:[{field:"parameter",localized:!0}]},{localeKey:"parameter too large",regex:/^parameter "(\w+)" must be less than (\d+)$/,parameters:[{field:"parameter",localized:!0},{field:"number",localized:!1}]},{localeKey:"parameter too long",regex:/^parameter "(\w+)" must be less than (\d+) characters$/,parameters:[{field:"parameter",localized:!0},{field:"length",localized:!1}]},{localeKey:"parameter too small",regex:/^parameter "(\w+)" must be more than (\d+)$/,parameters:[{field:"parameter",localized:!0},{field:"number",localized:!1}]},{localeKey:"parameter too short",regex:/^parameter "(\w+)" must be more than (\d+) characters$/,parameters:[{field:"parameter",localized:!0},{field:"length",localized:!1}]},{localeKey:"parameter length not equal",regex:/^parameter "(\w+)" length is not equal to (\d+)$/,parameters:[{field:"parameter",localized:!0},{field:"length",localized:!1}]},{localeKey:"parameter cannot be blank",regex:/^parameter "(\w+)" cannot be blank$/,parameters:[{field:"parameter",localized:!0}]},{localeKey:"parameter invalid username format",regex:/^parameter "(\w+)" is invalid username format$/,parameters:[{field:"parameter",localized:!0}]},{localeKey:"parameter invalid email format",regex:/^parameter "(\w+)" is invalid email format$/,parameters:[{field:"parameter",localized:!0}]},{localeKey:"parameter invalid currency",regex:/^parameter "(\w+)" is invalid currency$/,parameters:[{field:"parameter",localized:!0}]},{localeKey:"parameter invalid color",regex:/^parameter "(\w+)" is invalid color$/,parameters:[{field:"parameter",localized:!0}]},{localeKey:"parameter invalid amount filter",regex:/^parameter "(\w+)" is invalid amount filter$/,parameters:[{field:"parameter",localized:!0}]}],ri={nextcloud:"Nextcloud",gitea:"Gitea",github:"GitHub"},Wd=".jpg,.jpeg,.png,.gif,.webp",Ji="en",Ps={DEFAULT_DOCUMENT_LANGUAGE_FOR_IMPORT_FILE:Ji,"zh-Hans":"zh-Hans","zh-Hant":"zh-Hans"},dc=["utf-8","utf-8-bom","utf-16le","utf-16be","cp437","cp863","cp037","cp1047","cp1140","iso-8859-1","cp850","cp858","windows-1252","iso-8859-15","iso-8859-4","iso-8859-10","cp865","iso-8859-2","cp852","windows-1250","iso-8859-14","iso-8859-3","cp860","iso-8859-7","windows-1253","iso-8859-9","windows-1254","iso-8859-13","windows-1257","iso-8859-16","iso-8859-5","cp855","cp866","windows-1251","koi8r","koi8u","iso-8859-6","windows-1256","iso-8859-8","cp862","windows-1255","windows-874","windows-1258","gb18030","gbk","big5","euc-kr","euc-jp","iso-2022-jp","shift_jis"],mc=[{categoryName:"ezBookkeeping File Format",fileTypes:[{type:"ezbookkeeping",name:"ezbookkeeping Data Export File",extensions:".csv,.tsv",subTypes:[{type:"ezbookkeeping_csv",name:"CSV (Comma-separated values) File",extensions:".csv"},{type:"ezbookkeeping_tsv",name:"TSV (Tab-separated values) File",extensions:".tsv"}],document:{supportMultiLanguages:!0,anchor:"export-transactions"}}]},{categoryName:"Custom File Format",fileTypes:[{type:"dsv",name:"Delimiter-separated Values (DSV) File",extensions:".csv,.tsv",subTypes:[{type:"custom_csv",name:"CSV (Comma-separated values) File",extensions:".csv"},{type:"custom_tsv",name:"TSV (Tab-separated values) File",extensions:".tsv,.txt"}],supportedEncodings:dc,document:{supportMultiLanguages:!0,anchor:"how-to-import-delimiter-separated-values-dsv-file-or-data"}},{type:"dsv_data",name:"Delimiter-separated Values (DSV) Data",extensions:".csv,.tsv",subTypes:[{type:"custom_csv",name:"CSV (Comma-separated values) File",extensions:".csv"},{type:"custom_tsv",name:"TSV (Tab-separated values) File",extensions:".tsv,.txt"}],dataFromTextbox:!0,document:{supportMultiLanguages:!0,anchor:"how-to-import-delimiter-separated-values-dsv-file-or-data"}}]},{categoryName:"General Data Exchange Format",fileTypes:[{type:"ofx",name:"Open Financial Exchange (OFX) File",extensions:".ofx"},{type:"qfx",name:"Quicken Financial Exchange (QFX) File",extensions:".qfx"},{type:"qif",name:"Quicken Interchange Format (QIF) File",extensions:".qif",subTypes:[{type:"qif_ymd",name:"Year-month-day format"},{type:"qif_mdy",name:"Month-day-year format"},{type:"qif_dmy",name:"Day-month-year format"}]},{type:"iif",name:"Intuit Interchange Format (IIF) File",extensions:".iif"}]},{categoryName:"General Bank Statement Format",fileTypes:[{type:"camt053",name:"Camt.053 Bank to Customer Statement File",extensions:".xml"},{type:"mt940",name:"MT940 Consumer Statement Message File",extensions:".txt"}]},{categoryName:"Other Bank/Payment App Statement File",fileTypes:[{type:"alipay_app_csv",name:"Alipay (App) Statement File",extensions:".csv",document:{supportMultiLanguages:"zh-Hans",anchor:"如何获取支付宝app交易流水文件"}},{type:"alipay_web_csv",name:"Alipay (Web) Statement File",extensions:".csv",document:{supportMultiLanguages:"zh-Hans",anchor:"如何获取支付宝网页版交易流水文件"}},{type:"wechat_pay_app",name:"WeChat Pay Statement File",extensions:".xlsx,.csv",subTypes:[{type:"wechat_pay_app_xlsx",name:"Excel Workbook File",extensions:".xlsx"},{type:"wechat_pay_app_csv",name:"CSV (Comma-separated values) File",extensions:".csv"}],document:{supportMultiLanguages:"zh-Hans",anchor:"如何获取微信支付账单文件"}},{type:"jdcom_finance_app_csv",name:"JD.com Finance Statement File",extensions:".csv",document:{supportMultiLanguages:"zh-Hans",anchor:"如何获取京东金融账单文件"}}]},{categoryName:"Other Finance App File Format",fileTypes:[{type:"gnucash",name:"GnuCash XML Database File",extensions:".gnucash",document:{supportMultiLanguages:!0,anchor:"how-to-get-gnucash-xml-database-file"}},{type:"firefly_iii_csv",name:"Firefly III Data Export File",extensions:".csv",document:{supportMultiLanguages:!0,anchor:"how-to-get-firefly-iii-data-export-file"}},{type:"beancount",name:"Beancount Data File",extensions:".beancount"},{type:"feidee_mymoney_csv",name:"Feidee MyMoney (App) Data Export File",extensions:".csv",document:{supportMultiLanguages:"zh-Hans",anchor:"如何获取随手记app数据导出文件"}},{type:"feidee_mymoney_xls",name:"Feidee MyMoney (Web) Data Export File",extensions:".xls",document:{supportMultiLanguages:"zh-Hans",anchor:"如何获取随手记web版数据导出文件"}},{type:"feidee_mymoney_elecloud_xlsx",name:"Feidee MyMoney (Elecloud) Data Export File",extensions:".xlsx",document:{supportMultiLanguages:"zh-Hans",anchor:"如何获取随手记神象云账本数据导出文件"}}]}],_i="1",Zi={1:{icon:"las la-wallet"},10:{icon:"las la-coins"},20:{icon:"las la-money-bill-alt"},30:{icon:"las la-piggy-bank"},100:{icon:"las la-credit-card"},110:{icon:"las la-money-check-alt"},500:{icon:"las la-digital-tachograph"},510:{icon:"las la-ticket-alt"},520:{icon:"las la-envelope"},530:{icon:"las la-box"},540:{icon:"las la-donate"},560:{icon:"las la-shield-alt"},600:{icon:"las la-calendar-minus"},601:{icon:"las la-calendar-plus"},700:{icon:"las la-file-invoice-dollar"},701:{icon:"las la-receipt"},800:{icon:"las la-chart-area"},801:{icon:"las la-chart-line"},900:{icon:"las la-user-friends"},901:{icon:"las la-users"},910:{icon:"las la-home"},911:{icon:"las la-building"},912:{icon:"las la-industry"},990:{icon:"las la-globe"},1e3:{icon:"las la-dollar-sign"},1001:{icon:"las la-euro-sign"},1002:{icon:"las la-pound-sign"},1003:{icon:"las la-yen-sign"},1004:{icon:"las la-ruble-sign"},1005:{icon:"las la-rupee-sign"},1006:{icon:"las la-won-sign"},1007:{icon:"las la-shekel-sign"},1008:{icon:"las la-hryvnia"},1009:{icon:"las la-tenge"},1500:{icon:"lab la-bitcoin"},1501:{icon:"lab la-ethereum"},5e3:{icon:"lab la-cc-visa"},5001:{icon:"lab la-cc-mastercard"},5002:{icon:"lab la-cc-amex"},5100:{icon:"lab la-cc-discover"},5200:{icon:"lab la-cc-jcb"},5300:{icon:"lab la-cc-diners-club"},8e3:{icon:"lab la-paypal"},8100:{icon:"lab la-apple-pay"},8101:{icon:"lab la-google-wallet"},8200:{icon:"lab la-amazon-pay"},8201:{icon:"lab la-stripe"},8300:{icon:"lab la-alipay"},8301:{icon:"lab la-qq"},8302:{icon:"lab la-weixin"}},rs=Zi[_i],qi="1",Hd="561",Xi={1:{icon:"las la-utensils"},2:{icon:"las la-concierge-bell"},10:{icon:"las la-hamburger"},11:{icon:"las la-pizza-slice"},12:{icon:"las la-hotdog"},13:{icon:"las la-bread-slice"},30:{icon:"las la-mug-hot"},31:{icon:"las la-coffee"},32:{icon:"las la-cocktail"},40:{icon:"las la-beer"},41:{icon:"las la-wine-bottle"},42:{icon:"las la-wine-glass-alt"},43:{icon:"las la-glass-martini"},44:{icon:"las la-glass-whiskey"},60:{icon:"las la-apple-alt"},61:{icon:"las la-lemon"},70:{icon:"las la-ice-cream"},71:{icon:"las la-cookie"},72:{icon:"las la-candy-cane"},100:{icon:"las la-user-tie"},110:{icon:"las la-tshirt"},130:{icon:"las la-hat-cowboy"},140:{icon:"las la-mitten"},150:{icon:"las la-socks"},170:{icon:"las la-gem"},171:{icon:"las la-ring"},180:{icon:"las la-spray-can"},190:{icon:"las la-cut"},200:{icon:"las la-home"},210:{icon:"las la-toilet-paper"},211:{icon:"las la-umbrella"},212:{icon:"las la-baby-carriage"},220:{icon:"las la-couch"},221:{icon:"las la-bed"},222:{icon:"las la-chair"},223:{icon:"las la-bath"},224:{icon:"las la-toilet"},230:{icon:"las la-plug"},231:{icon:"las la-lightbulb"},232:{icon:"las la-fan"},240:{icon:"las la-camera"},241:{icon:"las la-print"},250:{icon:"las la-tools"},251:{icon:"las la-wrench"},252:{icon:"las la-toolbox"},260:{icon:"las la-broom"},270:{icon:"las la-tint"},271:{icon:"las la-fire"},290:{icon:"las la-file-invoice"},300:{icon:"las la-traffic-light"},310:{icon:"las la-bus"},311:{icon:"las la-tram"},320:{icon:"las la-taxi"},330:{icon:"las la-car"},331:{icon:"las la-shuttle-van"},332:{icon:"las la-truck"},333:{icon:"las la-tractor"},340:{icon:"las la-charging-station"},341:{icon:"las la-gas-pump"},342:{icon:"las la-oil-can"},343:{icon:"las la-car-battery"},350:{icon:"las la-bicycle"},351:{icon:"las la-motorcycle"},370:{icon:"las la-train"},380:{icon:"las la-ship"},390:{icon:"las la-plane"},391:{icon:"las la-helicopter"},400:{icon:"las la-phone-volume"},410:{icon:"las la-fax"},420:{icon:"las la-mobile"},421:{icon:"las la-tablet"},430:{icon:"las la-desktop"},431:{icon:"las la-laptop"},440:{icon:"las la-wifi"},441:{icon:"las la-satellite-dish"},442:{icon:"las la-satellite"},450:{icon:"las la-tv"},451:{icon:"las la-broadcast-tower"},460:{icon:"las la-envelope"},470:{icon:"las la-dolly"},471:{icon:"las la-dolly-flatbed"},480:{icon:"las la-shipping-fast"},500:{icon:"las la-heart"},510:{icon:"las la-dumbbell"},511:{icon:"las la-walking"},512:{icon:"las la-running"},513:{icon:"las la-swimmer"},514:{icon:"las la-biking"},515:{icon:"las la-skating"},516:{icon:"las la-skiing"},517:{icon:"las la-snowboarding"},518:{icon:"las la-hiking"},520:{icon:"las la-futbol"},521:{icon:"las la-basketball-ball"},522:{icon:"las la-football-ball"},523:{icon:"las la-volleyball-ball"},524:{icon:"las la-baseball-ball"},530:{icon:"las la-table-tennis"},531:{icon:"las la-bowling-ball"},532:{icon:"las la-golf-ball"},540:{icon:"las la-microphone-alt"},541:{icon:"las la-guitar"},542:{icon:"las la-drum"},550:{icon:"las la-film"},551:{icon:"las la-record-vinyl"},552:{icon:"las la-video"},553:{icon:"las la-music"},554:{icon:"las la-headphones"},555:{icon:"las la-vr-cardboard"},560:{icon:"las la-gamepad"},561:{icon:"las la-shapes"},562:{icon:"las la-puzzle-piece"},563:{icon:"las la-dice-d6"},564:{icon:"las la-dice"},565:{icon:"las la-chess"},570:{icon:"las la-id-card-alt"},571:{icon:"las la-podcast"},580:{icon:"las la-dog"},581:{icon:"las la-fish"},582:{icon:"las la-crow"},589:{icon:"las la-bone"},590:{icon:"las la-umbrella-beach"},591:{icon:"las la-swimming-pool"},592:{icon:"las la-parachute-box"},593:{icon:"las la-hot-tub"},594:{icon:"las la-monument"},595:{icon:"las la-mountain"},596:{icon:"las la-campground"},597:{icon:"las la-hotel"},599:{icon:"las la-passport"},600:{icon:"las la-book-reader"},610:{icon:"las la-book-open"},611:{icon:"las la-book"},620:{icon:"las la-newspaper"},640:{icon:"las la-graduation-cap"},660:{icon:"las la-chalkboard-teacher"},680:{icon:"las la-award"},700:{icon:"las la-glass-cheers"},710:{icon:"las la-gift"},711:{icon:"las la-gifts"},720:{icon:"las la-birthday-cake"},760:{icon:"las la-ribbon"},780:{icon:"las la-donate"},800:{icon:"las la-briefcase-medical"},810:{icon:"las la-hospital"},811:{icon:"las la-ambulance"},820:{icon:"las la-user-nurse"},821:{icon:"las la-user-md"},840:{icon:"las la-stethoscope"},850:{icon:"las la-syringe"},860:{icon:"las la-capsules"},861:{icon:"las la-tablets"},862:{icon:"las la-pills"},863:{icon:"las la-band-aid"},870:{icon:"las la-x-ray"},880:{icon:"las la-glasses"},890:{icon:"las la-thermometer"},891:{icon:"las la-microscope"},892:{icon:"las la-pager"},893:{icon:"las la-vial"},900:{icon:"las la-landmark"},910:{icon:"las la-coins"},920:{icon:"las la-receipt"},930:{icon:"las la-hand-holding-usd"},950:{icon:"las la-file-invoice-dollar"},960:{icon:"las la-clipboard-check"},970:{icon:"las la-percentage"},980:{icon:"las la-credit-card"},981:{icon:"las la-piggy-bank"},990:{icon:"las la-gavel"},1e3:{icon:"las la-pen"},1010:{icon:"las la-minus-circle"},2e3:{icon:"las la-suitcase"},2010:{icon:"las la-wallet"},2020:{icon:"las la-trophy"},2021:{icon:"las la-medal"},2080:{icon:"las la-user-clock"},2100:{icon:"las la-chart-area"},2101:{icon:"las la-chart-line"},3010:{icon:"las la-plus-circle"},3100:{icon:"las la-recycle"},4e3:{icon:"las la-exchange-alt"},4900:{icon:"las la-arrow-circle-right"},5e3:{icon:"las la-star"},5010:{icon:"las la-magic"},5020:{icon:"las la-infinity"},5030:{icon:"las la-clipboard-list"},5040:{icon:"las la-trash-alt"},5050:{icon:"las la-weight-hanging"},5100:{icon:"las la-shopping-bag"},5101:{icon:"las la-shopping-basket"},5102:{icon:"las la-shopping-cart"},5200:{icon:"las la-money-bill-wave-alt"},6e3:{icon:"lab la-amazon"},6001:{icon:"lab la-ebay"},6100:{icon:"lab la-app-store"},6101:{icon:"lab la-google-play"},6200:{icon:"lab la-windows"},6300:{icon:"lab la-kickstarter"},6400:{icon:"lab la-uber"},6500:{icon:"lab la-fedex"},6501:{icon:"lab la-ups"},6502:{icon:"lab la-usps"},6503:{icon:"lab la-dhl"},7e3:{icon:"lab la-playstation"},7001:{icon:"lab la-xbox"},7100:{icon:"lab la-steam"},7200:{icon:"lab la-youtube"},7300:{icon:"lab la-spotify"},7301:{icon:"lab la-itunes"},8e3:{icon:"lab la-evernote"},8100:{icon:"lab la-adobe"},9e3:{icon:"lab la-aws"},9001:{icon:"lab la-linode"},9002:{icon:"lab la-digital-ocean"},9100:{icon:"lab la-github"},9101:{icon:"lab la-bitbucket"}},Xs=Xi[qi],Io="000000",Qi=Io,vn=Io,$n=Io,Cs="var(--default-icon-color)",ji=["000000","8e8e93","ff3b30","ff2d55","ff6b22","ff9500","ffcc00","cddc39","009688","4cd964","5ac8fa","2196f3","673ab7","9c27b0"],Vd=ji,Jd=ji,li=["cc4a66","e3564a","fc892c","ffc349","4dd291","24ceb3","2ab4d0","065786","713670","8e1d51"];class ht{id;name;parentId;category;type;icon;color;currency;balance;balanceTime;comment;creditCardStatementDate;displayOrder;visible;subAccounts;_isAsset;_isLiability;constructor(t,a,n,o,s,r,l,i,u,m,b,v,I,k,U,R,x){this.id=t,this.name=a,this.parentId=n,this.category=o,this.type=s,this.icon=r,this.color=l,this.currency=i,this.balance=u,this.balanceTime=I,this.comment=m,this.displayOrder=b,this.visible=v,this.creditCardStatementDate=k,this._isAsset=U,this._isLiability=R,typeof x<"u"?this.subAccounts=x:this.subAccounts=void 0}get isAsset(){if(typeof this._isAsset<"u")return this._isAsset;const t=Ve.valueOf(this.category);return t?t.isAsset:!1}get isLiability(){if(typeof this._isLiability<"u")return this._isLiability;const t=Ve.valueOf(this.category);return t?t.isLiability:!1}get hidden(){return!this.visible}equals(t){if(!(this.id===t.id&&this.name===t.name&&this.parentId===t.parentId&&this.category===t.category&&this.type===t.type&&this.icon===t.icon&&this.color===t.color&&this.currency===t.currency&&this.balance===t.balance&&this.balanceTime===t.balanceTime&&this.comment===t.comment&&this.displayOrder===t.displayOrder&&this.visible===t.visible&&this.creditCardStatementDate===t.creditCardStatementDate))return!1;if(this.subAccounts&&t.subAccounts){if(this.subAccounts.length!==t.subAccounts.length)return!1;for(let n=0;n<this.subAccounts.length;n++)if(!this.subAccounts[n].equals(t.subAccounts[n]))return!1}else if(this.subAccounts&&this.subAccounts.length||t.subAccounts&&t.subAccounts.length)return!1;return!0}fillFrom(t){this.id=t.id,this.category=t.category,this.type=t.type,this.name=t.name,this.icon=t.icon,this.color=t.color,this.currency=t.currency,this.balance=t.balance,this.balanceTime=t.balanceTime,this.comment=t.comment,this.creditCardStatementDate=t.creditCardStatementDate,this.visible=t.visible}setSuitableIcon(t,a){const n=Ve.values();for(const o of n)if(o.type===t){if(this.icon!==o.defaultAccountIconId)return;break}for(const o of n)o.type===a&&(this.icon=o.defaultAccountIconId)}toCreateRequest(t,a,n){let o;if(this.type===Me.MultiSubAccounts.type&&(o=[],a||(a=this.subAccounts),a))for(const s of a)o.push(s.toCreateRequest(t,void 0,this));return{name:this.name,category:n?n.category:this.category,type:n?Me.SingleAccount.type:this.type,icon:this.icon,color:this.color,currency:n||this.type===Me.SingleAccount.type?this.currency:zi,balance:n||this.type===Me.SingleAccount.type?this.balance:0,balanceTime:(n||this.type===Me.SingleAccount.type)&&this.balanceTime?this.balanceTime:0,comment:this.comment,creditCardStatementDate:!n&&this.category===Ve.CreditCard.type?this.creditCardStatementDate:void 0,subAccounts:n?void 0:o,clientSessionId:n?void 0:t}}toModifyRequest(t,a,n){let o;if(this.type===Me.MultiSubAccounts.type&&(o=[],a||(a=this.subAccounts),a))for(const s of a)o.push(s.toModifyRequest(t,void 0,this));return{id:this.id||"0",name:this.name,category:n?n.category:this.category,icon:this.icon,color:this.color,currency:n&&(!this.id||this.id==="0")?this.currency:void 0,balance:n&&(!this.id||this.id==="0")?this.balance:void 0,balanceTime:n&&(!this.id||this.id==="0")?this.balanceTime:void 0,comment:this.comment,creditCardStatementDate:!n&&this.category===Ve.CreditCard.type?this.creditCardStatementDate:void 0,hidden:!this.visible,subAccounts:n?void 0:o,clientSessionId:n?void 0:t}}getAccountOrSubAccountId(t){if(this.type===Me.SingleAccount.type)return this.id;if(this.type===Me.MultiSubAccounts.type&&!t)return this.id;if(this.type===Me.MultiSubAccounts.type&&t){if(!this.subAccounts||!this.subAccounts.length)return null;for(const a of this.subAccounts)if(t&&t===a.id)return a.id;return null}else return null}isAccountOrSubAccountHidden(t){if(this.type===Me.SingleAccount.type)return this.hidden;if(this.type===Me.MultiSubAccounts.type&&!t)return this.hidden;if(this.type===Me.MultiSubAccounts.type&&t){if(!this.subAccounts||!this.subAccounts.length)return!1;for(const a of this.subAccounts)if(t&&t===a.id)return a.hidden;return!1}else return!1}getAccountOrSubAccountComment(t){if(this.type===Me.SingleAccount.type)return this.comment;if(this.type===Me.MultiSubAccounts.type&&!t)return this.comment;if(this.type===Me.MultiSubAccounts.type&&t){if(!this.subAccounts||!this.subAccounts.length)return null;for(const a of this.subAccounts)if(t&&t===a.id)return a.comment;return null}else return null}getAccountOrSubAccount(t){if(this.type===Me.SingleAccount.type)return this;if(this.type===Me.MultiSubAccounts.type&&!t)return this;if(this.type===Me.MultiSubAccounts.type&&t){if(!this.subAccounts||!this.subAccounts.length)return null;for(const a of this.subAccounts)if(t&&t===a.id)return a;return null}else return null}getSubAccount(t){if(!this.subAccounts||!this.subAccounts.length)return null;for(const a of this.subAccounts)if(t&&t===a.id)return a;return null}getSubAccountCurrencies(t,a){if(!this.subAccounts||!this.subAccounts.length)return[];const n={},o=[];for(const s of this.subAccounts)if(!(!t&&s.hidden)){if(a&&a===s.id)return[s.currency];n[s.currency]||(n[s.currency]=!0,o.push(s.currency))}return o}clone(){return new ht(this.id,this.name,this.parentId,this.category,this.type,this.icon,this.color,this.currency,this.balance,this.comment,this.displayOrder,this.visible,this.balanceTime,this.creditCardStatementDate,this.isAsset,this.isLiability,typeof this.subAccounts<"u"?ht.cloneAccounts(this.subAccounts):void 0)}createNewSubAccount(t,a){return new ht("","","",0,0,this.icon,this.color,t,0,"",0,!0,a,0)}static createNewAccount(t,a){return new ht("","","",Ve.Cash.type,Me.SingleAccount.type,_i,vn,t,0,"",0,!0,a,0)}static of(t){return new ht(t.id,t.name,t.parentId,t.category,t.type,t.icon,t.color,t.currency,t.balance,t.comment,t.displayOrder,!t.hidden,void 0,t.creditCardStatementDate,t.isAsset,t.isLiability,t.subAccounts?ht.ofMulti(t.subAccounts):void 0)}static ofMulti(t){const a=[];for(const n of t)a.push(ht.of(n));return a}static findAccountNameById(t,a,n){for(const o of t)if(o.id===a)return o.name;return n}static cloneAccounts(t){const a=[];for(const n of t)a.push(n.clone());return a}static sortAccounts(t,a){return!t||!t.length?t:t.sort(function(n,o){if(n.category!==o.category){const l=Ve.valueOf(n.category),i=Ve.valueOf(o.category);return l?i?l.displayOrder-i.displayOrder:-1:1}if(n.parentId===o.parentId)return n.displayOrder-o.displayOrder;if(n.id===o.parentId)return-1;if(o.id===n.parentId)return 1;let s=n.displayOrder,r=o.displayOrder;return n.parentId&&n.parentId!=="0"&&(a&&a[n.parentId]?s=a[n.parentId].displayOrder:s=null),o.parentId&&o.parentId!=="0"&&(a&&a[o.parentId]?r=a[o.parentId].displayOrder:r=null),s!==null&&r!==null?s-r:n.id.localeCompare(o.id)})}}class zn extends ht{displayBalance;constructor(t,a){super(t.id,t.name,t.parentId,t.category,t.type,t.icon,t.color,t.currency,t.balance,t.comment,t.displayOrder,t.visible,t.balanceTime,t.creditCardStatementDate,t.isAsset,t.isLiability,t.subAccounts),this.displayBalance=a}static fromAccount(t,a){return new zn(t,a)}}class Co{category;name;icon;accounts;displayBalance;constructor(t,a,n,o,s){this.category=t,this.name=a,this.icon=n,this.accounts=o,this.displayBalance=s}static of(t,a,n){return new Co(t.category,t.name,t.icon,a,n)}}const ln=1999,Dn=2100,fc=1999,gc=2,pc=16,yc=[75200,103104,111272,108864,111776,60068,44352,87918,19360,75168,103786,86688,92480,95560,88736,43954,38720,84832,41709,42336,86624,62120,54592,88736,46756,38592,85452,84416,107712,120010,109152,46400,60742,77216,38390,38304,84384,106861,107680,109120,113290,92992,44448,43876,37728,84718,84320,87200,91307,55872,88896,38599,75488,37872,37600,51552,53581,119968,54592,85385,87488,75200,107974,103104,109230,108864,111776,47786,44352,85408,43944,42400,86896,86688,92480,93516,88736,43840,87880,84832,42336,91366,53856,58990,54592,88736,38571,38592,84704,43464,107200,119504,109120,111936,54605,44448,38336,86952,83360,107168,124068,109120],hc=["6K4J6L5K6L6M7N8N8N9O8N7M","6L4J5K4K5L5L7M7N7N8N7M7L","5K4I5K5K5L5L7N7N7N8N7M7M","5K4J6L5K6L6L7N8N8N8N7M7M","6K4J6L5K6L6M7N8N8N9O8N7M","6L4J5K4K5L5L7M7N7N8N7M7L","5K4I5K5K5L5L7N7N7N8N7M7M","5K4J6L5K5L6L7N7N8N8N7M7M","6K4J6L5K6L6M7N8N8N9O8N7M","6L4J5K4K5L5L7M7N7M8N7M7L","5K4I5K4K5L5L7N7N7N8N7M7M","5K4J6L5K5L6L7N7N8N8N7M7M","6K4J6L5K6L6M7N8N8N8O8N7M","6L4J5K4K5K5L7M7N7M8N7M7L","5K4I5K4K5L5L7M7N7N8N7M7M","5K4J6L5K5L6L7N7N8N8N7M7M","6K4J6L5K6L6M7N8N8N8O8M7M","6K4J5K4J5K5L7M7N7M8N7M7L","5K3I5K4K5L5L7M7N7N8N7M7M","5K4J5L5K5L6L7N7N8N8N7M7M","5K4J6L5K6L6L7N8N8N8O8M7M","6K4J5K4J5K5L6M7M7M8N7M7L","5K3I5K4K5L5L7M7N7N8N7M7L","5K4J5K5K5L6L7N7N7N8N7M7M","5K4J6L5K6L6L7N8N8N8O8M7M","6K4J5K4J5K5L6M7M7M8N7M6L","5K3I5K4K5L5L7M7N7N8N7M7L","5K4I5K5K5L5L7N7N7N8N7M7M","5K4J6L5K6L6L7N8N8N8N7M7M","6K4J5K4J5K5L6M7M7M8N7M6L","5K3I5K4K5L5L7M7N7N8N7M7L","5K4I5K5K5L5L7N7N7N8N7M7M","5K4J6L5K6L6L7N8N8N8N7M7M","6K4J5K4J5K5L6M7M7M8N7M6L","5K3I5K4K5L5L7M7N7N8N7M7L","5K4I5K5K5L5L7N7N7N8N7M7M","5K4J6L5K5L6L7N7N8N8N7M7M","6K4J5K4J5K5L6M7M7M8N7M6L","5K3I5K4K5L5L7M7N7N8N7M7L","5K4I5K5K5L5L7N7N7N8N7M7M","5K4J6L5K5L6L7N7N8N8N7M7M","6K4J5K4J5K5L6M7M7M8N7M6L","5K3I5K4K5K5L7M7N7M8N7M7L","5K4I5K4K5L5L7N7N7N8N7M7M","5K4J6L5K5L6L7N7N8N8N7M7M","6K4J5K4J5K5L6M7M7M7N7M6L","5K3I5K4J5K5L7M7N7M8N7M7L","5K4I5K4K5L5L7M7N7N8N7M7M","5K4J6L5K5L6L7N7N8N8N7M7M","6K4J5K4J5K5K6M7M7M7N7L6L","5J3I5K4J5K5L6M7M7M8N7M7L","5K3I5K4K5L5L7M7N7N8N7M7M","5K4J5K5K5L6L7N7N7N8N7M7M","5K4J5K4J5K5K6M7M7M7N7L6L","5J3I5K4J5K5L6M7M7M8N7M7L","5K3I5K4K5L5L7M7N7N8N7M7M","5K4J5K5K5L5L7N7N7N8N7M7M","5K4J5K4J5K5K6M7M7M7N7L6L","5J3I5K4J5K5L6M7M7M8N7M6L","5K3I5K4K5L5L7M7N7N8N7M7L","5K4J5K5K5L5L7N7N7N8N7M7M","5K4J5K4J5K5K6M7M7M7M6L6L","5J3I5K4J5K5L6M7M7M8N7M6L","5K3I5K4K5L5L7M7N7N8N7M7L","5K4I5K5K5L5L7N7N7N8N7M7M","5K4J5K4J5K5K6M7M7M7M6L6L","5J3I5K4J5K5L6M7M7M8N7M6L","5K3I5K4K5L5L7M7N7N8N7M7L","5K4I5K5K5L5L7N7N7N8N7M7M","5K4J5K4J4K5K6M6M7M7M6L6L","5J3I5K4J5K5L6M7M7M8N7M6L","5K3I5K4K5K5L7M7N7M8N7M7L","5K4I5K5K5L5L7N7N7N8N7M7M","5K4J5K4J4K5K6M6M7M7M6L6L","5J3I5K4J5K5L6M7M7M7N7M6L","5K3I5K4K5K5L7M7N7M8N7M7L","5K4I5K4K5L5L7M7N7N8N7M7M","5K4J5K4J4K5K6M6M7M7M6L6L","5J3I5K4J5K5L6M7M7M7N7M6L","5K3I5K4J5K5L6M7N7M8N7M7L","5K4I5K4K5L5L7M7N7N8N7M7M","5K4J5K4J4K5K6M6M7M7M6L6L","5J3I5K4J5K5K6M7M7M7N7L6L","5K3I5K4J5K5L6M7M7M8N7M7L","5K3I5K4K5L5L7M7N7N8N7M7M","5K4J4J4J4K5K6M6M6M7M6L6L","4J3I5K4J5K5K6M7M7M7N7L6L","5J3I5K4J5K5L6M7M7M8N7M7L","5K3I5K4K5L5L7M7N7N8N7M7M","5K4J4J4J4K4K6M6M6M7M6L6L","4J3I5K4J5K5K6M7M7M7N7L6L","5J3I5K4J5K5L6M7M7M8N7M6L","5K3I5K4K5L5L7M7N7N8N7M7L","5K4J4J4J4K4K6M6M6M7M6L6L","4J3I5K4J5K5K6M7M7M7M6L6L","5J3I5K4J5K5L6M7M7M8N7M6L","5K3I5K4K5L5L7M7N7N8N7M7L","5K4I4J4J4K4K6M6M6M7M6L6L","4J3I5K4J5K5K6M6M7M7M6L6L","5J3I5K4J5K5L6M7M7M8N7M6L","5K3I5K4K5L5L7M7N7N8N7M7L","5K4I5K5K5L5L7N7N7N8N7M7M"],ps=12,Bs=30,Rs=29,Tc=vc();function vc(){const e=[],t=new Date(fc,gc-1,pc);for(let a=ln;a<=Dn;a++){const n=yc[a-ln];if(!n)return e;const o=n>>5,s=n>>1&15;let r=[],l,i=o,u=0;for(let b=12;b>=1;b--){const v=(i&1)===1;i=i>>1,v?(r.push(Bs),u+=Bs):(r.push(Rs),u+=Rs)}s>0&&(l=(n&1)===1?Bs:Rs,u+=l),r=r.reverse();const m={year:a,totalDays:u,firstDayGregorianMonth:t.getMonth()+1,firstDayGregorianDay:t.getDate(),normalMonthDays:r,leapMonth:s>0?s:void 0,leapMonthDays:l};t.setDate(t.getDate()+u),e.push(m)}return e}function Ac(e,t){if(e<0)return"";const a=48;return e.toString().split("").map(n=>{const o=n.charCodeAt(0)-a;return o<0||o>9?n:t.numerals[o]}).join("")}function Qs(e){if(!(e<ln||e>Dn))return Tc[e-ln]}function bc(e,t){if(e<ln||e>Dn||t<1||t>12)return[0,0,0,0];const a=e-ln,n=hc[a];if(!n)return[0,0,0,0];const o=(t-1)*2,s=n.charAt(o),r=n.charAt(o+1);let l=0,i=0,u=0,m=0;return s&&(l=parseInt(s,36),i=o),r&&(u=parseInt(r,36),m=o+1),[l,i,u,m]}function Ic(e,t){if(t==null||!t.solarTermNames)return"";const[a,n,o,s]=bc(e.year,e.month);return a>0&&a===e.day?t.solarTermNames[n]??"":o>0&&o===e.day?t.solarTermNames[s]??"":""}function er(e){if(e.year<ln||e.year>Dn||e.month<1||e.month>12)return;const t=Qs(e.year);if(!t)return;let a=0,n=1,o=1;t.firstDayGregorianMonth<e.month||t.firstDayGregorianMonth===e.month&&t.firstDayGregorianDay<=e.day?a=e.year:a=e.year-1;const s=Qs(a);if(!s)return;if(a===e.year&&e.month===s.firstDayGregorianMonth&&e.day===s.firstDayGregorianDay)return{year:a,month:n,day:o,isLeapMonth:s.leapMonth===1};const r=ir({year:s.year,month:s.firstDayGregorianMonth,day:s.firstDayGregorianDay},e);if(r<0)return;let l=r;for(;l>0;){let i=s.normalMonthDays[n-1];if(!i)return;let u=!1,m=!1,b=!1;if(l>=i?(l-=i,m=!0):(o+=l,l=0),o>i&&(o=i-o),m&&l>0&&n===s.leapMonth&&(i=s.leapMonthDays||0,u=!0,l>=i?(l-=i,b=!0):(o+=l,l=0)),o>i&&(o=i-o),b?n++:m&&!u&&(n===s.leapMonth?u=!0:n++),n>ps&&(n=n-ps,a++,a>Dn))return;if(l===0)return{year:a,month:n,day:o,isLeapMonth:u}}}function js(e,t,a){return{gregorianYear:e.year,gregorianMonth:e.month,gregorianDay:e.day,year:t.year,month:t.month,day:t.day,displayYear:Ac(t.year,a),displayMonth:(t.isLeapMonth?a.leapMonthPrefix:"")+a.monthNames[t.month-1],displayDay:a.dayNames[t.day-1]??"",isLeapMonth:t.isLeapMonth,solarTermName:Ic(e,a)}}function Cc(e,t){const a={year:e.year,month:e.month1base,day:1},n=er(a);if(!n)return;const o=Qs(n.year);if(!o)return;const s=[];s.push(js(a,n,t));const r=new Date(a.year,a.month-1,a.day);let l=n.year,i=n.month,u=n.day,m=n.isLeapMonth,b=or(e)-1;for(;b>0;){const v=m?o.leapMonthDays:o.normalMonthDays[i-1];if(!v)return;if(r.setDate(r.getDate()+1),u++,b--,u>v){if(u=u-v,o.leapMonth===i&&!m)m=!0;else if(i++,i>ps&&(i=i-ps,l++,l>Dn))return}s.push(js({year:r.getFullYear(),month:r.getMonth()+1,day:r.getDate()},{year:l,month:i,day:u,isLeapMonth:m},t))}return s}function tr(e,t){const a=er(e);if(a)return js(e,a,t)}function ci(e){let t=e.displayDay;return e.day===1&&(t=e.displayMonth),e.solarTermName&&(t=e.solarTermName),{year:e.gregorianYear,month:e.gregorianMonth,day:e.gregorianDay,displayDate:t}}class Pt{static tokenFormatFuncs={YY:(t,a)=>({value:t.getLocalizedCalendarYear(a),hasNumeral:!0,minNumeralLength:2,maxLength:2}),YYYY:(t,a)=>({value:t.getLocalizedCalendarYear(a),hasNumeral:!0,minNumeralLength:4}),M:(t,a)=>({value:t.getLocalizedCalendarMonth(a),hasNumeral:!0}),MM:(t,a)=>({value:t.getLocalizedCalendarMonth(a),hasNumeral:!0,minNumeralLength:2}),MMM:(t,a)=>({value:t.getLocalizedCalendarMonthDisplayShortName(a)}),MMMM:(t,a)=>({value:t.getLocalizedCalendarMonthDisplayName(a)}),D:(t,a)=>({value:t.getLocalizedCalendarDay(a),hasNumeral:!0}),DD:(t,a)=>({value:t.getLocalizedCalendarDay(a),hasNumeral:!0,minNumeralLength:2}),dd:(t,a)=>({value:t.getWeekDayDisplayMinName(a)}),ddd:(t,a)=>({value:t.getWeekDayDisplayShortName(a)}),dddd:(t,a)=>({value:t.getWeekDayDisplayName(a)}),H:t=>({value:t.getHour()}),HH:t=>({value:t.getHour(),minNumeralLength:2}),h:t=>({value:mi(t.getHour())}),hh:t=>({value:mi(t.getHour()),minNumeralLength:2}),m:t=>({value:t.getMinute()}),mm:t=>({value:t.getMinute(),minNumeralLength:2}),s:t=>({value:t.getSecond()}),ss:t=>({value:t.getSecond(),minNumeralLength:2}),A:(t,a)=>({value:t.getDisplayAMPM(a)}),Z:t=>({value:wn(t.getTimezoneUtcOffsetMinutes()),hasNumeral:!0})};instance;chineseDateInfo=void 0;persianDateInfo=void 0;constructor(t){this.instance=t}getUnixTime(){return this.instance.unix()}getLocalizedCalendarYear(t){return t&&t.calendarType===bt.Buddhist?(this.instance.year()+543).toString():t&&t.calendarType===bt.Chinese?this.getChineseDateInfo(t.chineseCalendarLocaleData)?.displayYear??"":t&&t.calendarType===bt.Persian?this.getPersianDateInfo().jy.toString():this.instance.year().toString()}getGregorianCalendarYear(){return this.instance.year()}getGregorianCalendarQuarter(){return this.instance.quarter()}getLocalizedCalendarQuarter(t){return this.instance.quarter()}getGregorianCalendarMonth(){return this.instance.month()+1}getGregorianCalendarMonthDisplayName(t){return!t||!t.localeData?"":t.localeData.months()[this.getGregorianCalendarMonth()-1]||""}getGregorianCalendarMonthDisplayShortName(t){return!t||!t.localeData?"":t.localeData.monthsShort()[this.getGregorianCalendarMonth()-1]||""}getLocalizedCalendarMonth(t){return t&&t.calendarType===bt.Chinese?this.getChineseDateInfo(t.chineseCalendarLocaleData)?.displayMonth??"":t&&t.calendarType===bt.Persian?this.getPersianDateInfo().jm.toString():(this.instance.month()+1).toString()}getLocalizedCalendarMonthDisplayName(t){return!t||!t.localeData?"":t&&t.calendarType===bt.Chinese?this.getChineseDateInfo(t.chineseCalendarLocaleData)?.displayMonth??"":t&&t.calendarType===bt.Persian?t.persianCalendarLocaleData.monthNames[this.getPersianDateInfo().jm-1]??"":t.localeData.months()[this.instance.month()]||""}getLocalizedCalendarMonthDisplayShortName(t){return!t||!t.localeData?"":t&&t.calendarType===bt.Chinese?this.getChineseDateInfo(t.chineseCalendarLocaleData)?.displayMonth??"":t&&t.calendarType===bt.Persian?t.persianCalendarLocaleData.monthShortNames[this.getPersianDateInfo().jm-1]??"":t.localeData.monthsShort()[this.instance.month()]||""}getGregorianCalendarDay(){return this.instance.date()}getLocalizedCalendarDay(t){return t&&t.calendarType===bt.Chinese?this.getChineseDateInfo(t.chineseCalendarLocaleData)?.displayDay??"":t&&t.calendarType===bt.Persian?this.getPersianDateInfo().jd.toString():this.instance.date().toString()}isLocalizedCalendarFirstDayOfMonth(t){return t&&t.calendarType===bt.Chinese?this.getChineseDateInfo(t.chineseCalendarLocaleData)?.day===1:t&&t.calendarType===bt.Persian?this.getPersianDateInfo().jd===1:this.instance.date()===1}getGregorianCalendarYearDashMonthDashDay(){return this.instance.year()+"-"+(this.instance.month()+1).toString().padStart(2,ve.WesternArabicNumerals.digitZero)+"-"+this.instance.date().toString().padStart(2,ve.WesternArabicNumerals.digitZero)}getGregorianCalendarYearDashMonth(){return this.instance.year()+"-"+(this.instance.month()+1).toString().padStart(2,ve.WesternArabicNumerals.digitZero)}getWeekDay(){return lt.valueOf(this.instance.day())}getWeekDayDisplayName(t){return!t||!t.localeData?"":t.localeData.weekdays()[this.instance.day()]||""}getWeekDayDisplayShortName(t){return!t||!t.localeData?"":t.localeData.weekdaysShort()[this.instance.day()]||""}getWeekDayDisplayMinName(t){return!t||!t.localeData?"":t.localeData.weekdaysMin()[this.instance.day()]||""}getHour(){return this.instance.hour()}getMinute(){return this.instance.minute()}getSecond(){return this.instance.second()}getDisplayAMPM(t){return!t||!t.localeData?"":t.localeData.meridiem(this.getHour(),this.getMinute(),!1)}getTimezoneUtcOffsetMinutes(){return this.instance.utcOffset()}getDateTimeAfterDays(t){return Pt.of(this.instance.clone().add(t,"days"))}toGregorianCalendarYearMonthDay(){return{year:this.instance.year(),month:this.instance.month()+1,day:this.instance.date()}}toGregorianCalendarYear0BasedMonth(){return{year:this.instance.year(),month0base:this.instance.month()}}format(t,a){let n="",o=0;for(;o<t.length;){let s=!1;for(let r=4;r>0;r--){const l=t.substring(o,o+r),i=Pt.tokenFormatFuncs[l];if(co(i)){const u=i(this,a);let m=u.value.toString();yt(u.minNumeralLength)&&(m=m.padStart(u.minNumeralLength,ve.WesternArabicNumerals.digitZero)),yt(u.maxLength)&&m.length>u.maxLength&&(m=m.substring(m.length-u.maxLength)),Ie(u.value)?a&&a.numeralSystem&&(m=a.numeralSystem.replaceWesternArabicDigitsToLocalizedDigits(m)):Ye(m)&&u.hasNumeral&&a&&a.numeralSystem&&(m=a.numeralSystem.replaceWesternArabicDigitsToLocalizedDigits(m)),n+=m,o+=r,s=!0;break}}s||(n+=t[o],o++)}return n}static of(t){return new Pt(t)}static now(){return new Pt(De())}getChineseDateInfo(t){return this.chineseDateInfo||(this.chineseDateInfo=tr({year:this.instance.year(),month:this.instance.month()+1,day:this.instance.date()},t)),this.chineseDateInfo}getPersianDateInfo(){return this.persianDateInfo||(this.persianDateInfo=ul.toJalaali(this.instance.year(),this.instance.month()+1,this.instance.date())),this.persianDateInfo}static isGregorianCalendarYearFirstTime(t){const a=t.instance.clone().set({millisecond:0}).unix(),n=t.instance.clone().set({millisecond:0}).startOf("year").unix();return a===n}static isGregorianCalendarYearLastTime(t){const a=t.instance.clone().set({millisecond:999}).unix(),n=t.instance.clone().set({millisecond:999}).endOf("year").unix();return a===n}static isGregorianCalendarMonthFirstTime(t){const a=t.instance.clone().set({millisecond:0}).unix(),n=t.instance.clone().set({millisecond:0}).startOf("month").unix();return a===n}static isGregorianCalendarMonthLastTime(t){const a=t.instance.clone().set({millisecond:999}).unix(),n=t.instance.clone().set({millisecond:999}).endOf("month").unix();return a===n}}function ar(){return[2e3,De().year()+1]}function ys(e,t){return!Ie(e)||!Ie(t)?!1:e>0&&t>=0&&t<=11}function ui(e){const t=De.unix(e);return{year:t.year(),month0base:t.month()}}function Wn(e){if(!Ye(e))return null;const t=e.split("-");if(t.length!==2)return null;const a=parseInt(t[0]),n=parseInt(t[1])-1;return ys(a,n)?{year:a,month0base:n}:null}function di(e){return!e||!ys(e.year,e.month0base)?"":`${e.year}-${e.month0base+1}`}function mi(e){return e=e%12,e===0&&(e=12),e}function nr(e){return e>11}function Dc(e,t){const a=De.unix(e),n=De.unix(t);return a.year()===n.year()&&a.month()===n.month()&&a.date()===n.date()}function Sc(e,t){const a=De.unix(e),n=De.unix(t);return a.year()===n.year()&&a.month()===n.month()&&a.date()===n.date()&&a.hour()===n.hour()}function wn(e){const t=Math.trunc(Math.abs(e)/60),a=Math.abs(e)-t*60,n=t.toString().padStart(2,ve.WesternArabicNumerals.digitZero),o=a.toString().padStart(2,ve.WesternArabicNumerals.digitZero);return e>=0?`+${n}:${o}`:`-${n}:${o}`}function ls(e){return wn(Ct(e))}function Ct(e){return e?De().tz(e).utcOffset():De().utcOffset()}function Mc(){return wn(_t())}function _t(){return-new Date().getTimezoneOffset()}function $a(e){return new Date(e*1e3)}function On(e){return Math.floor(e.getTime()/1e3)}function yn(e,t,a){return e-(t-a)*60}function Wa(e,t,a){return e+(t-a)*60}function sr(){return Pt.now()}function Va(){return De().unix()}function jt(e,t,a){const n=De().set({year:e,month:t-1,date:a,hour:0,minute:0,second:0,millisecond:0});return Pt.of(n)}function St(e,t,a){return Ie(t)&&(Ie(a)||(a=Ct()),e=Wa(e,t,a)),Pt.of(De.unix(e))}function _d(e,t){const a=De(e,t.format);if(a.isValid())return Pt.of(a)}function fi(e,t){const a=De(e,t);if(a.isValid())return Pt.of(a)}function Qe(e,t,a,n,o){return St(e,n,o).format(t,a)}function gi(e,t){return Pt.now().format(e,t)}function Lc(e,t,a){return Pt.of(De(e,"YYYY-MM-DD")).format(t,a)}function Nc(e,t,a){return Pt.of(De(e,"MM-DD")).format(t,a)}function Zd(e){if(!Ye(e))return null;const t=e.split("-");if(t.length!==3)return null;const a=parseInt(t[0]),n=parseInt(t[1]),o=parseInt(t[2]);if(!Ie(a)||!Ie(n)||!Ie(o)||a<1e3||a>9999||n<1||n>12||o<1||o>31)return null;const s=new Date(a,n-1,o);return s.getFullYear()!==a||s.getMonth()!==n-1||s.getDate()!==o?null:s}function qd(e){if(!e)return"";const t=e.getFullYear().toString().padStart(4,ve.WesternArabicNumerals.digitZero),a=(e.getMonth()+1).toString().padStart(2,ve.WesternArabicNumerals.digitZero),n=e.getDate().toString().padStart(2,ve.WesternArabicNumerals.digitZero);return`${t}-${a}-${n}`}function Sn(e){return e?St(e).getGregorianCalendarYearDashMonth():""}function or(e){return De().set({year:e.year,month:e.month1base-1}).daysInMonth()}function Xd(e){return nr(e)?va.PM.name:va.AM.name}function He(e,t,a){return De.unix(e).subtract(t,a).unix()}function An(e,t,a){return De.unix(e).add(t,a).unix()}function ir(e,t){const a=De().set({year:e.year,month:e.month-1,date:e.day,hour:0,minute:0,second:0,millisecond:0});return De().set({year:t.year,month:t.month-1,date:t.day,hour:0,minute:0,second:0,millisecond:0}).diff(a,"days")}function wc(e){const t=Math.trunc(Math.abs(e)/60),a=Math.abs(e)-t*60;return{offsetHours:t,offsetMinutes:a}}function Xt(){return De().set({hour:0,minute:0,second:0,millisecond:0}).unix()}function Fn(){return De.unix(Xt()).add(1,"days").subtract(1,"seconds").unix()}function hs(e){const t=De.unix(Xt());Ie(e)||(e=0);let a=t.day()-e;return a<0&&(a+=7),t.subtract(a,"days").unix()}function eo(e){return De.unix(hs(e)).add(7,"days").subtract(1,"seconds").unix()}function ya(){const e=De.unix(Xt());return e.subtract(e.date()-1,"days").unix()}function Pn(){return De.unix(ya()).add(1,"months").subtract(1,"seconds").unix()}function to(e){return De().set({date:e,hour:0,minute:0,second:0,millisecond:0}).unix()}function pi(e){return De.unix(to(e)).add(1,"days").subtract(1,"seconds").unix()}function Ea(){const e=De.unix(Xt());return e.subtract(e.dayOfYear()-1,"days").unix()}function an(){return De.unix(Ea()).add(1,"years").subtract(1,"seconds").unix()}function xc(e){const t=De.unix(e).set({hour:0,minute:0,second:0,millisecond:0});return t.subtract(t.dayOfYear()-1,"days").unix()}function Ec(e){const t=De.unix(e).set({hour:0,minute:0,second:0,millisecond:0}),a=t.month(),n=Math.floor(a/3)*3;return t.set({month:n,date:1}).unix()}function Do(e){const t=De.unix(e).set({hour:0,minute:0,second:0,millisecond:0});return t.subtract(t.date()-1,"days").unix()}function rr(e){return De.unix(Do(e)).add(1,"months").subtract(1,"seconds").unix()}function lr(e){return De.unix(e).set({hour:0,minute:0,second:0,millisecond:0}).unix()}function kc(e){return De.unix(e).set({hour:0,minute:0,second:0,millisecond:0}).add(1,"days").subtract(1,"seconds").unix()}function cr(e){return De().set({year:e,month:0,date:1,hour:0,minute:0,second:0,millisecond:0}).unix()}function Uc(e){return De.unix(cr(e)).add(1,"years").subtract(1,"seconds").unix()}function ur(e){return De().set({year:e.year,month:(e.quarter-1)*3,date:1,hour:0,minute:0,second:0,millisecond:0}).unix()}function Oc(e){return De.unix(ur(e)).add(3,"months").subtract(1,"seconds").unix()}function _a(e){let t=null;return Ye(e)?t=Wn(e):Ke(e)&&"month0base"in e&&ys(e.year,e.month0base)?t=e:Ke(e)&&"month1base"in e&&ys(e.year,e.month1base-1)&&(t={year:e.year,month0base:e.month1base-1}),t?De().set({year:t.year,month:t.month0base,date:1,hour:0,minute:0,second:0,millisecond:0}).unix():0}function Hn(e){return De.unix(_a(e)).add(1,"months").subtract(1,"seconds").unix()}function Ds(e,t){let a=null,n=null;return Ye(e)?a=Wn(e):Ke(e)&&"month0base"in e?a=e:Ke(e)&&"month1base"in e&&(a={year:e.year,month0base:e.month1base-1}),Ye(t)?n=Wn(t):Ke(t)&&"month0base"in t?n=t:Ke(t)&&"month1base"in t&&(n={year:t.year,month0base:t.month1base-1}),!a||!n?null:{startYearMonth:a,endYearMonth:n}}function Fc(e,t){const a=[],n=Ds(e,t);if(!n)return a;for(let o=n.startYearMonth.year;o<=n.endYearMonth.year;o++){const s={year:o,minUnixTime:cr(o),maxUnixTime:Uc(o)};a.push(s)}return a}function Pc(e,t,a){const n=[],o=Ds(e,t);if(!o)return n;const s=_a(o.startYearMonth),r=Hn(o.endYearMonth);let l=_e.valueOf(a);l||(l=_e.Default);for(let i=o.startYearMonth.year-1;i<=o.endYearMonth.year+1;i++){const u=_a({year:i,month1base:l.month}),m=Mn(u,l.value),b=vs(u,l.value),v=pr(m,l.value);if(m<=r&&b>=s){const I={year:v,minUnixTime:m,maxUnixTime:b};n.push(I)}if(m>r)break}return n}function Bc(e,t){const a=[],n=Ds(e,t);if(!n)return a;for(let o=n.startYearMonth.year,s=n.startYearMonth.month0base;o<n.endYearMonth.year||o===n.endYearMonth.year&&Math.floor(s/3)<=Math.floor(n.endYearMonth.month0base/3);){const r={year:o,quarter:Math.floor(s/3)+1},l=ur(r),i=Oc(r);if(a.push(fo.of(r,l,i)),o===n.endYearMonth.year&&s>=n.endYearMonth.month0base)break;s>=9?(o++,s=0):s+=3}return a}function Rc(e,t){const a=[],n=Ds(e,t);if(!n)return a;for(let o=n.startYearMonth.year,s=n.startYearMonth.month0base;o<=n.endYearMonth.year||s<=n.endYearMonth.month0base;){const r={year:o,month0base:s},l=_a(r),i=Hn(r);if(a.push(go.of(r,l,i)),o===n.endYearMonth.year&&s===n.endYearMonth.month0base)break;s>=11?(o++,s=0):s++}return a}function dr(e,t){const a=[];if(!e||!t)return a;let n=e;for(;n<=t;){const o=St(n),s=lr(n),r=kc(n);a.push(po.of(o.toGregorianCalendarYearMonthDay(),s,r)),n=r+1}return a}function Yc(e,t,a,n,o){return a>fs&&t[a-1]&&t[a-1].key?t[a-1]:a===fs&&e[n]&&e[n].key?e[n]:o}function zc(e,t,a){const n=De.unix(St(e).getUnixTime()).set({millisecond:0}),o=De.unix(St(t).getUnixTime()).set({millisecond:999}),s=n.clone().startOf("month"),r=o.clone().endOf("month");if(s.unix()===n.unix()&&r.unix()===o.unix()){const i=o.year()*12+(o.month()+1)-n.year()*12-(n.month()+1)+1,u=n.add(i*a,"months"),m=u.clone().add(i,"months").subtract(1,"seconds");return{minTime:u.unix(),maxTime:m.unix()}}if(n.clone().add(1,"years").subtract(1,"seconds").unix()===o.unix()||o.clone().subtract(1,"years").add(1,"seconds").unix()===n.unix()){const i=n.add(1*a,"years"),u=o.add(1*a,"years");return{minTime:i.unix(),maxTime:u.unix()}}if(n.clone().add(1,"months").subtract(1,"seconds").unix()===o.unix()||o.clone().subtract(1,"months").add(1,"seconds").unix()===n.unix()){const i=n.add(1*a,"months"),u=o.add(1*a,"months");return{minTime:i.unix(),maxTime:u.unix()}}const l=(t-e+1)*a;return{minTime:e+l,maxTime:t+l}}function Qd(e,t,a,n,o,s){const r=zc(e,t,a);return{dateType:mr(r.minTime,r.maxTime,n,o,s),minTime:r.minTime,maxTime:r.maxTime}}function jd(e,t,a,n,o,s,r){if(!r||!Q.PreviousBillingCycle.isAvailableForScene(s)||!Q.CurrentBillingCycle.isAvailableForScene(s))return null;const l=Ts(Q.PreviousBillingCycle.type,n,o,r),i=Ts(Q.CurrentBillingCycle.type,n,o,r);return l&&He(l.maxTime,1,"months")===t&&He(l.minTime,1,"months")===e&&a===1?l:l&&l.maxTime===t&&l.minTime===e&&a===1?i:i&&i.maxTime===t&&i.minTime===e&&a===-1?l:i&&An(i.maxTime,1,"months")===t&&An(i.minTime,1,"months")===e&&a===-1?i:null}function mr(e,t,a,n,o){const s=Q.values();let r=Q.Custom.type;for(const l of s){if(!l.isAvailableForScene(o))continue;const i=Oa(l.type,a,n);if(i&&i.minTime===e&&i.maxTime===t){r=l.type;break}}return r}function em(e,t,a,n,o,s){if(!s||!Q.PreviousBillingCycle.isAvailableForScene(o)||!Q.CurrentBillingCycle.isAvailableForScene(o))return null;const r=Ts(Q.PreviousBillingCycle.type,a,n,s),l=Ts(Q.CurrentBillingCycle.type,a,n,s);return r&&r.maxTime===t&&r.minTime===e?r.dateType:l&&l.maxTime===t&&l.minTime===e?l.dateType:null}function Oa(e,t,a){let n=0,o=0;if(e===Q.All.type)n=0,o=0;else if(e===Q.Today.type)n=Fn(),o=Xt();else if(e===Q.Yesterday.type)n=He(Fn(),1,"days"),o=He(Xt(),1,"days");else if(e===Q.LastSevenDays.type)n=Fn(),o=He(Xt(),6,"days");else if(e===Q.LastThirtyDays.type)n=Fn(),o=He(Xt(),29,"days");else if(e===Q.ThisWeek.type)n=eo(t),o=hs(t);else if(e===Q.LastWeek.type)n=He(eo(t),7,"days"),o=He(hs(t),7,"days");else if(e===Q.ThisMonth.type)n=Pn(),o=ya();else if(e===Q.LastMonth.type)n=He(ya(),1,"seconds"),o=He(ya(),1,"months");else if(e===Q.ThisYear.type)n=an(),o=Ea();else if(e===Q.LastYear.type)n=He(an(),1,"years"),o=He(Ea(),1,"years");else if(e===Q.ThisFiscalYear.type)n=vs(Xt(),a),o=Mn(Xt(),a);else if(e===Q.LastFiscalYear.type)n=He(vs(Xt(),a),1,"years"),o=He(Mn(Xt(),a),1,"years");else if(e===Q.RecentTwelveMonths.type)n=Pn(),o=He(ya(),11,"months");else if(e===Q.RecentTwentyFourMonths.type)n=Pn(),o=He(ya(),23,"months");else if(e===Q.RecentThirtySixMonths.type)n=Pn(),o=He(ya(),35,"months");else if(e===Q.RecentTwoYears.type)n=an(),o=He(Ea(),1,"years");else if(e===Q.RecentThreeYears.type)n=an(),o=He(Ea(),2,"years");else if(e===Q.RecentFiveYears.type)n=an(),o=He(Ea(),4,"years");else return null;return{dateType:e,maxTime:n,minTime:o}}function Ts(e,t,a,n){let o=0,s=0;if(e===Q.PreviousBillingCycle.type||e===Q.CurrentBillingCycle.type)if(n)sr().getGregorianCalendarDay()<=n?(o=pi(n),s=He(An(to(n),1,"days"),1,"months")):(o=An(pi(n),1,"months"),s=An(to(n),1,"days")),e===Q.PreviousBillingCycle.type&&(o=He(o,1,"months"),s=He(s,1,"months"));else{let r=null;e===Q.CurrentBillingCycle.type?r=Oa(Q.ThisMonth.type,t,a):e===Q.PreviousBillingCycle.type&&(r=Oa(Q.LastMonth.type,t,a)),r&&(o=r.maxTime,s=r.minTime)}else return null;return{dateType:e,maxTime:o,minTime:s}}function Kc(e){const t=[],a=ya();for(let n=0;n<e;n++){let o=a;n>0&&(o=He(a,n,"months"));const s=He(An(o,1,"months"),1,"seconds");let r=Q.Custom.type;const l=St(o).getGregorianCalendarYear(),i=St(o).getGregorianCalendarMonth();n===0?r=Q.ThisMonth.type:n===1&&(r=Q.LastMonth.type),t.push({dateType:r,minTime:o,maxTime:s,year:l,month:i})}return t}function Ys(e,t){for(const[a,n]of Ze(e))if(!a.isPreset&&a.dateType===t)return n;return-1}function tm(e,t,a,n,o,s){let r=Oa(t,o,s);if(r&&r.dateType===Q.All.type)return Ys(e,Q.All.type);if(!r&&(!n||!a))return Ys(e,Q.Custom.type);r||(r={dateType:Q.Custom.type,maxTime:n,minTime:a});for(const[l,i]of Ze(e))if(l.isPreset&&l.minTime===r.minTime&&l.maxTime===r.maxTime)return i;return Ys(e,Q.Custom.type)}function am(e,t,a,n){if(gr(e,t))return null;if(!e)return Oa(Q.ThisMonth.type,a,n);const o=Do(e),s=rr(e);return{dateType:mr(o,s,a,n,ua.Normal),maxTime:s,minTime:o}}function nm(e,t,a,n,o,s,r){const l=new Date(e.valueOf());let i=t.parseInt(a);const u=t.parseInt(n),m=t.parseInt(o);return r||(i===12&&(i=0),s===va.PM.name&&(i+=12)),l.setHours(i),l.setMinutes(u),l.setSeconds(m),l}function sm(e,t){const a=De(),n=De.unix(rr(e));if(t){const o=t.split("-");if(o.length===3){const s=parseInt(o[2]);if(s<n.date())return Pt.of(n.set({date:s})).getGregorianCalendarYearDashMonthDashDay()}}return n.year()===a.year()&&n.month()===a.month()?Pt.of(a).getGregorianCalendarYearDashMonthDashDay():Pt.of(n).getGregorianCalendarYearDashMonthDashDay()}function Gc(e,t){const a=St(e),n=St(t);return Pt.isGregorianCalendarYearFirstTime(a)&&Pt.isGregorianCalendarYearLastTime(n)}function fr(e,t){const a=St(e),n=St(t);return Pt.isGregorianCalendarMonthFirstTime(a)&&Pt.isGregorianCalendarMonthLastTime(n)}function gr(e,t){const a=St(e),n=St(t);return a.getGregorianCalendarYear()!==n.getGregorianCalendarYear()||a.getGregorianCalendarMonth()!==n.getGregorianCalendarMonth()?!1:fr(e,t)}function pr(e,t){const a=De.unix(e);if(t===_e.JanuaryFirstDay.value)return a.year();const n=a.month()+1,o=a.date(),s=a.year();let r=_e.valueOf(t);return r||(r=_e.Default),n<r.month||n===r.month&&o<r.day?s:s+1}function Mn(e,t){const a=De.unix(e);if(t===_e.JanuaryFirstDay.value)return De().year(a.year()).month(0).date(1).hour(0).minute(0).second(0).millisecond(0).unix();let n=_e.valueOf(t);n||(n=_e.Default);const o=a.month()+1,s=a.date(),r=a.year();let l=r-1;return(o>n.month||o===n.month&&s>=n.day)&&(l=r),De().set({year:l,month:n.month-1,date:n.day,hour:0,minute:0,second:0,millisecond:0}).unix()}function vs(e,t){return De.unix(Mn(e,t)).add(1,"years").subtract(1,"seconds").unix()}function yi(e,t){const a=Mn(e,t),n=vs(e,t);return{year:pr(e,t),minUnixTime:a,maxUnixTime:n}}function $c(e,t){const a=e;let n=_e.valueOf(t);n||(n=_e.Default);const o=t===_e.JanuaryFirstDay.value?a:a-1,s=De().set({year:o,month:n.month-1,date:n.day,hour:0,minute:0,second:0,millisecond:0}).unix(),r=De.unix(s).add(1,"years").subtract(1,"seconds").unix();return{year:a,minUnixTime:s,maxUnixTime:r}}function Wc(e){let t=0;for(const a of e)t+=a;return t}function Ln(e,t){if(!e)return e;const a=t.numeralSystem||ve.Default,n=t.digitGrouping,o=t.digitGroupingSymbol||et.Default.symbol,s=t.decimalSeparator||Je.Default.symbol,r=e.charAt(0)==="-";r&&(e=e.substring(1));const l=[],i=[];let u="";if(e===Jt){for(let I=0;I<e.length-2;I++)l.push(e.charAt(I));const v=Math.max(0,e.length-2);for(let I=v;I<e.length;I++)i.push(e.charAt(I))}else for(let v=0;v<e.length;v++){const I=e.charAt(v);if(!u)a.isDigit(I)?l.push(I):u=I;else if(a.isDigit(I))i.push(I);else throw new Error('Number "'+e+'" is not a valid textual number')}let m="";n?m=n.format(l,o):m=l.join("");const b=i.join("");return b?e=`${m}${s}${b}`:e=m,r&&(e=`-${e}`),e}function Hc(e,t){if(!Ye(e)||!e||e.length<1)return 0;const a=e.charAt(0)==="-";if(a&&(e=e.substring(1)),!e||e.length<1)return 0;const n=a?-1:1,o=t.numeralSystem||ve.Default,s=t.decimalSeparator||Je.Default.symbol,r=t.digitGroupingSymbol||et.Default.symbol;e.indexOf(r)>=0&&(e=uo(e,r));let l=e.indexOf(s);if(l<0)return n*o.parseInt(e)*100;l===0&&(e=o.digitZero+e,l++);const i=e.substring(0,l),u=e.substring(l+1,e.length);return u.length<1?n*o.parseInt(i)*100:u.length===1?n*o.parseInt(i)*100+n*o.parseInt(u)*10:u.length===2?n*o.parseInt(i)*100+n*o.parseInt(u):n*o.parseInt(i)*100+n*o.parseInt(u.substring(0,2))}function hi(e,t){if(!Number.isSafeInteger(e))throw new Error('Number "'+e+'" is not amount number');const a=t.numeralSystem||ve.Default;let n=a.formatNumber(e);if(!n)return n;const o=n.charAt(0)==="-";o&&(n=n.substring(1));const s=t.digitGrouping,r=t.digitGroupingSymbol||et.Default.symbol,l=t.decimalSeparator||Je.Default.symbol;let i=t.decimalNumberCount;(!Ie(i)||i>Xl)&&(i=ql);let u=a.digitZero,m=a.doubleDigitZero;return n.length>2?(u=n.substring(0,n.length-2),m=n.substring(n.length-2)):n.length===2?m=n:n.length===1&&(m=a.digitZero+n),i===0?m===a.doubleDigitZero?m="":m.charAt(1)===a.digitZero&&(m=m.charAt(0)):i===1&&m.charAt(1)===a.digitZero&&(m=m.charAt(0)),t.trimTailZero&&(m.charAt(0)===a.digitZero&&m.charAt(1)===a.digitZero?m="":m.charAt(0)!==a.digitZero&&m.charAt(1)===a.digitZero&&(m=m.charAt(0))),u&&u.length>1&&s&&(u=s.format(u.split(""),r)),m?n=`${u}${l}${m}`:n=u,o&&(n=`-${n}`),n}function Vc(e,t){return Ln(e,t)}function yr(e,t,a){const n=t.numeralSystem||ve.Default;if(yt(a)){const o=Math.pow(10,a),s=Math.trunc(e*o),r=n.formatNumber(s/o);return Ln(r,t)}else{const o=n.formatNumber(e);return Ln(o,t)}}function Jc(e,t,a,n){const o=n.numeralSystem||ve.Default,s=Math.pow(10,t),r=Math.trunc(e*s);if(e>0&&r<1&&a){const l=Je.Dot.symbol,i=n.decimalSeparator||Je.Default.symbol;return a=o.replaceWesternArabicDigitsToLocalizedDigits(a),l===i?a+"%":ka(a,l,i)+"%"}return yr(e,n,t)+"%"}function Ti(e,t){return t===0?Math.trunc(e/100)*100:t===1?Math.trunc(e/10)*10:e}function ao(e,t){const a=t.numeralSystem||ve.Default,n=a.formatNumber(e),o=Je.Dot.symbol;if(n.indexOf(o)<0)return Ln(n,t);{let s=0;for(let l=0;l<n.length;l++)if(n.charAt(l)!==o&&n.charAt(l)!==a.digitZero){s=Math.min(l+4,n.length);break}const r=n.substring(0,Math.max(6,Math.max(s,n.indexOf(o)+2)));return Ln(r,t)}}function _c(e,t,a,n,o){const s=a.numeralSystem||ve.Default;if(!e||!t||e===t){if(!n||!n.rate||!o||!o.rate)return null;e=parseFloat(n.rate),t=parseFloat(o.rate)}if(e>t){const r=e/t;return`${ao(r,a)} : ${s.getLocalizedDigit(1)}`}else{const r=t/e,l=ao(r,a);return`${s.getLocalizedDigit(1)} : ${l}`}}function So(e,t,a){const n=parseFloat(a)/parseFloat(t);return Ie(n)?e*n:null}function hr(e){return e?Gn[e]?.fraction:void 0}function vi(e,t,a,n,o,s){const r=Tr(t,a,n,o,s);if(!r)return e;const l=t.separator||"";let i=e;return r.prependText&&(i=r.prependText+l+i),r.appendText&&(i=i+l+r.appendText),i}function Tr(e,t,a,n,o){if(!e)return null;let s="";if(e.symbol===En.Symbol){const r=Gn[t];r&&r.symbol&&r.symbol.normal&&(s=r.symbol.normal,o&&r.symbol.plural&&(s=r.symbol.plural)),s||(s=Nl)}else e.symbol===En.Code?s=t:e.symbol===En.Unit?s=a:e.symbol===En.Name&&(s=n);return e.location===Vs.BeforeAmount?{prependText:s}:e.location===Vs.AfterAmount?{appendText:s}:null}function As(e){const t={};for(const a of e){if(!t[a.category]){const o=Ve.valueOf(a.category);o&&(t[a.category]={category:a.category,name:o.name,icon:o.defaultAccountIconId,accounts:[]})}const n=t[a.category];n&&n.accounts.push(a)}return t}function Zc(e){const t=[],a=Ve.values(),n=As(e);for(const o of a){if(!n[o.type])continue;const s=n[o.type];s&&t.push(s)}return t}function om(e){const t={};if(!e)return t;for(const a of e)if(a.type===Me.SingleAccount.type)t[a.name]=a;else if(a.type===Me.MultiSubAccounts.type&&a.subAccounts)for(const n of a.subAccounts)t[n.name]=n;return t}function qc(e){const t=[],a=Ve.values();for(const n of a){const o=e[n.type];if(!o||!o.accounts)continue;const s=o.accounts,r={},l={},i={};let u=0,m=-1;for(const[b,v]of Ze(s))if(b.hidden||(u++,m===-1&&(m=v)),b.type===Me.MultiSubAccounts.type&&b.subAccounts){let I=0,k=-1;for(const[U,R]of Ze(b.subAccounts))U.hidden||(I++,k===-1&&(k=R));b.subAccounts.length>0&&(r[b.id]=b.subAccounts,l[b.id]=I,i[b.id]=k)}s.length>0&&t.push({category:n.type,name:n.name,icon:n.defaultAccountIconId,allAccounts:s,allVisibleAccountCount:u,firstVisibleAccountIndex:m,allSubAccounts:r,allVisibleSubAccountCounts:l,allFirstVisibleSubAccountIndexes:i})}return t}function Bn(e,t){const a=Ve.values(),n=[];for(const o of a){const s=e[o.type];if(!(!s||!s.accounts)){for(const r of s.accounts)if(!(r.hidden||!t(r))){if(r.type===Me.SingleAccount.type)n.push({balance:r.balance,isAsset:!!r.isAsset,isLiability:!!r.isLiability,currency:r.currency});else if(r.type===Me.MultiSubAccounts.type&&r.subAccounts)for(const l of r.subAccounts)l.hidden||!t(l)||n.push({balance:l.balance,isAsset:!!l.isAsset,isLiability:!!l.isLiability,currency:l.currency})}}}return n}function cs(e,t){let a="";if(!e)return a;for(const n of Dt(e))t&&!vr(n,t)||(a.length>0&&(a+=","),a+=n.id);return a}function Xc(e,t,a){if(!t)return a;let n="";for(const o of Ba(t,!0)){const s=e[o];if(s&&s.currency!==zi){if(n==="")n=s.currency;else if(n!==s.currency)return a}}return n||a}function Qc(e,t,a){if(t.type===Me.SingleAccount.type)e[t.id]=a;else if(t.type===Me.MultiSubAccounts.type){if(!t.subAccounts||!t.subAccounts.length)return;for(const n of t.subAccounts)e[n.id]=a}}function im(e,t){for(const a of Mt(e)){const n=t[a];if(n){if(n.hidden||n.parentId&&t[n.parentId]&&t[n.parentId].hidden)continue;n.type===Me.SingleAccount.type&&(e[n.id]=!1)}}}function rm(e,t,a){for(const n of Mt(e)){const o=t[n];a&&o&&o.hidden||o&&o.type===Me.SingleAccount.type&&(e[o.id]=!1)}}function lm(e,t,a){for(const n of Mt(e)){const o=t[n];a&&o&&o.hidden||o&&o.type===Me.SingleAccount.type&&(e[o.id]=!0)}}function cm(e,t,a){for(const n of Mt(e)){const o=t[n];a&&o&&o.hidden||o&&o.type===Me.SingleAccount.type&&(e[o.id]=!e[o.id])}}function vr(e,t){if(!e.subAccounts)return!t[e.id];for(const a of e.subAccounts)if(t[a.id])return!1;return!0}function um(e,t){if(!e.subAccounts)return!1;let a=0;for(const n of e.subAccounts)t[n.id]||a++;return a>0&&a<e.subAccounts.length}class aa{id;name;parentId;type;icon;color;comment;displayOrder;visible;subCategories;constructor(t,a,n,o,s,r,l,i,u,m){this.id=t,this.name=a,this.parentId=n,this.type=o,this.icon=s,this.color=r,this.comment=l,this.displayOrder=i,this.visible=u,m?this.subCategories=m:!m&&(!n||n==="0")&&(this.subCategories=[])}get hidden(){return!this.visible}equals(t){if(!(this.id===t.id&&this.name===t.name&&this.parentId===t.parentId&&this.type===t.type&&this.icon===t.icon&&this.color===t.color&&this.comment===t.comment&&this.displayOrder===t.displayOrder&&this.visible===t.visible))return!1;if(this.subCategories&&t.subCategories){if(this.subCategories.length!==t.subCategories.length)return!1;for(let n=0;n<this.subCategories.length;n++)if(!this.subCategories[n].equals(t.subCategories[n]))return!1}else if(this.subCategories&&this.subCategories.length||t.subCategories&&t.subCategories.length)return!1;return!0}fillFrom(t){this.id=t.id,this.name=t.name,this.parentId=t.parentId,this.type=t.type,this.icon=t.icon,this.color=t.color,this.comment=t.comment,this.visible=t.visible}toCreateRequest(t){return{name:this.name,type:this.type,parentId:this.parentId,icon:this.icon,color:this.color,comment:this.comment,clientSessionId:t}}toModifyRequest(){return{id:this.id,name:this.name,parentId:this.parentId,icon:this.icon,color:this.color,comment:this.comment,hidden:!this.visible}}static of(t){return new aa(t.id,t.name,t.parentId,t.type,t.icon,t.color,t.comment,t.displayOrder,!t.hidden,t.subCategories?aa.ofMulti(t.subCategories):void 0)}static ofMulti(t){const a=[];for(const n of t)a.push(aa.of(n));return a}static ofMap(t){const a={};for(const[n,o]of Wt(t))a[parseInt(n)]=aa.ofMulti(o);return a}static findNameById(t,a){for(const n of t)if(n.id===a)return n.name;return null}static createNewCategory(t,a){return new aa("","",a||"0",t||pe.Income,qi,$n,"",0,!0)}}class Ja{id;name;displayOrder;hidden;constructor(t,a,n,o){this.id=t,this.name=a,this.displayOrder=n,this.hidden=o}toCreateRequest(){return{name:this.name}}toModifyRequest(){return{id:this.id,name:this.name}}static of(t){return new Ja(t.id,t.name,t.displayOrder,t.hidden)}static ofMulti(t){const a=[];for(const n of t)a.push(Ja.of(n));return a}static createNewTag(t){return new Ja("",t||"",0,!1)}}class rn{pictureId;originalUrl;constructor(t,a){this.pictureId=t,this.originalUrl=a}static of(t){return new rn(t.pictureId,t.originalUrl)}static ofMulti(t){const a=[];for(const n of t)a.push(rn.of(n));return a}}class Aa{id;timeSequenceId;type;expenseCategoryId="";incomeCategoryId="";transferCategoryId="";time;timeZone;utcOffset;sourceAccountId;destinationAccountId;sourceAmount;destinationAmount;hideAmount;tagIds;comment;editable;_pictures;_geoLocation;_category;_sourceAccount;_destinationAccount;_tags;_gregorianCalendarYearDashMonthDashDay=void 0;_gregorianCalendarDayOfMonth=void 0;_displayDayOfWeek=void 0;constructor(t,a,n,o,s,r,l,i,u,m,b,v,I,k,U){this.id=t,this.timeSequenceId=a,this.type=n,this.time=s,this.timeZone=r,this.utcOffset=l,this.sourceAccountId=i,this.destinationAccountId=u,this.sourceAmount=m,this.destinationAmount=b,this.hideAmount=v,this.tagIds=I,this.comment=k,this.editable=U,this.setCategoryId(o)}get pictures(){const t=[];if(this._pictures)for(const a of this._pictures)t.push(a);return t}get geoLocation(){return this._geoLocation}set geoLocation(t){this._geoLocation=bn.of(t)}get categoryId(){return this.getCategoryId()}get category(){return this._category}get sourceAccount(){return this._sourceAccount}get destinationAccount(){return this._destinationAccount}get tags(){const t=[];if(this._tags)for(const a of this._tags)t.push(a);return t}get gregorianCalendarYearDashMonthDashDay(){return this._gregorianCalendarYearDashMonthDashDay}get gregorianCalendarDayOfMonth(){return this._gregorianCalendarDayOfMonth}get displayDayOfWeek(){return this._displayDayOfWeek}getCategoryId(){return this.type===ue.Expense?this.expenseCategoryId:this.type===ue.Income?this.incomeCategoryId:this.type===ue.Transfer?this.transferCategoryId:""}setCategoryId(t){this.type===ue.Expense?this.expenseCategoryId=t:this.type===ue.Income?this.incomeCategoryId=t:this.type===ue.Transfer&&(this.transferCategoryId=t)}setCategory(t){this._category=t}setSourceAccount(t){this._sourceAccount=t}setDestinationAccount(t){this._destinationAccount=t}setTags(t){this._tags=t}getPictureIds(){const t=[];if(this._pictures)for(const a of this._pictures)t.push(a.pictureId);return t}setPictures(t){this._pictures=t}addPicture(t){this._pictures||(this._pictures=[]),this._pictures.push(rn.of(t))}removePicture(t){if(this._pictures)for(const[a,n]of Ze(this._pictures))a.pictureId===t.pictureId&&this._pictures.splice(n,1)}clearPictures(){this._pictures=[]}getNormalizedGeoLocation(){if(this._geoLocation)return this._geoLocation.toNormalizedCoordinate()}setGeoLocation(t){t?this._geoLocation=bn.createNewGeoLocation(t.latitude,t.longitude):this._geoLocation=void 0}setLatitudeAndLongitude(t,a){this._geoLocation=bn.createNewGeoLocation(t,a)}removeGeoLocation(){this._geoLocation=void 0}setDisplayDate(t,a,n){this._gregorianCalendarYearDashMonthDashDay=t,this._gregorianCalendarDayOfMonth=a,this._displayDayOfWeek=n}toCreateRequest(t,a){return{type:this.type,categoryId:this.getCategoryId(),time:a||this.time,utcOffset:this.utcOffset,sourceAccountId:this.sourceAccountId,destinationAccountId:this.type===ue.Transfer?this.destinationAccountId:"0",sourceAmount:this.sourceAmount,destinationAmount:this.type===ue.Transfer?this.destinationAmount:0,hideAmount:this.hideAmount,tagIds:this.tagIds,pictureIds:this.getPictureIds(),comment:this.comment,geoLocation:this.getNormalizedGeoLocation(),clientSessionId:t}}toModifyRequest(t){let a=this.getCategoryId();return this.type===ue.ModifyBalance&&(a="0"),{id:this.id,categoryId:a,time:t||this.time,utcOffset:this.utcOffset,sourceAccountId:this.sourceAccountId,destinationAccountId:this.type===ue.Transfer?this.destinationAccountId:"0",sourceAmount:this.sourceAmount,destinationAmount:this.type===ue.Transfer?this.destinationAmount:0,hideAmount:this.hideAmount,tagIds:this.tagIds,pictureIds:this.getPictureIds(),comment:this.comment,geoLocation:this.getNormalizedGeoLocation()}}toTransactionDraft(){return this.type!==ue.Expense&&this.type!==ue.Income&&this.type!==ue.Transfer?null:{type:this.type,categoryId:this.getCategoryId(),sourceAccountId:this.sourceAccountId,sourceAmount:this.sourceAmount,destinationAccountId:this.type===ue.Transfer?this.destinationAccountId:"0",destinationAmount:this.type===ue.Transfer?this.destinationAmount:0,hideAmount:this.hideAmount,tagIds:this.tagIds,pictures:this.pictures,comment:this.comment}}static createNewTransaction(t,a,n,o){return new Aa("","",t,"",a,n,o,"","",0,0,!1,[],"",!0)}static of(t){const a=new Aa(t.id,t.timeSequenceId,t.type,t.categoryId,t.time,void 0,t.utcOffset,t.sourceAccountId,t.destinationAccountId,t.sourceAmount,t.destinationAmount,t.hideAmount,t.tagIds,t.comment,t.editable);if(t.category&&a.setCategory(aa.of(t.category)),t.sourceAccount&&a.setSourceAccount(ht.of(t.sourceAccount)),t.destinationAccount&&a.setDestinationAccount(ht.of(t.destinationAccount)),t.tags&&a.setTags(Ja.ofMulti(t.tags)),t.pictures){const n=[];for(const o of t.pictures)n.push(rn.of(o));a.setPictures(n)}return t.geoLocation&&a.setLatitudeAndLongitude(t.geoLocation.latitude,t.geoLocation.longitude),a}static ofMulti(t){const a=[];for(const n of t)a.push(Aa.of(n));return a}static ofDraft(t){if(!t||t.type!==ue.Expense&&t.type!==ue.Income&&t.type!==ue.Transfer)return null;const a=new Aa("","",t.type,t.categoryId??"",0,void 0,0,t.sourceAccountId??"",t.destinationAccountId??"",t.sourceAmount??0,t.destinationAmount??0,t.hideAmount??!1,t.tagIds??[],t.comment??"",!0);if(t.pictures){const n=[];for(const o of t.pictures)n.push(rn.of(o));a.setPictures(n)}return a}}class bn{latitude;longitude;constructor(t,a){this.latitude=t,this.longitude=a}static createNewGeoLocation(t,a){return new bn(t,a)}static of(t){return new bn(t.latitude,t.longitude)}toNormalizedCoordinate(){return Wi(this)}}const Ar=["today","thisWeek","thisMonth","thisYear","lastMonth","monthBeforeLastMonth","monthBeforeLast2Months","monthBeforeLast3Months","monthBeforeLast4Months","monthBeforeLast5Months","monthBeforeLast6Months","monthBeforeLast7Months","monthBeforeLast8Months","monthBeforeLast9Months","monthBeforeLast10Months"],dm=["monthBeforeLast10Months","monthBeforeLast9Months","monthBeforeLast8Months","monthBeforeLast7Months","monthBeforeLast6Months","monthBeforeLast5Months","monthBeforeLast4Months","monthBeforeLast3Months","monthBeforeLast2Months","monthBeforeLastMonth","lastMonth","thisMonth"];class Mo{useTransactionTimezone;query;constructor(t,a){this.useTransactionTimezone=t,this.query=a}buildQuery(){return`use_transaction_timezone=${this.useTransactionTimezone}`+(this.query.length?"&query="+this.query:"")}static of(t){const a=[];return Ar.forEach(n=>{t[n]&&a.push(`${n}_${t[n].startTime}_${t[n].endTime}`)}),new Mo(t.useTransactionTimezone,a.length?a.join("|"):"")}}var Et=(e=>(e.IncomeByPrimaryCategory="incomeByPrimaryCategory",e.IncomeBySecondaryCategory="incomeBySecondaryCategory",e.IncomeByAccount="incomeByAccount",e.ExpenseByAccount="expenseByAccount",e.NetCashFlow="netCashFlow",e.ExpenseBySecondaryCategory="expenseBySecondaryCategory",e.ExpenseByPrimaryCategory="expenseByPrimaryCategory",e))(Et||{});const es={items:[],totalCount:0};function qe(e){return(window.EZBOOKKEEPING_SERVER_SETTINGS||{})[e]}function mm(){return qe("a")!==0}function fm(){return qe("o")===1}function gm(){return qe("r")===1}function pm(){return qe("f")===1}function ym(){return qe("t")===1}function hm(){return qe("v")===1}function Tm(){return qe("p")===1}function vm(){return qe("s")===1}function Am(){return qe("e")===1}function bm(){return qe("i")===1}function jc(){return qe("op")}function eu(){return qe("ocn")}function Im(){return qe("mcp")===1}function Cm(){return qe("llmt")===1}function tu(){return qe("lpt")}function br(){return qe("m")}function Ai(){return qe("mp")===1}function au(){return qe("cmsu")}function nu(){return qe("cmau")}function su(){return qe("cmap")===1}function bi(){const e=(qe("cmzl")||"").split("-");return e&&e[0]?parseInt(e[0]):1}function ou(){const e=(qe("cmzl")||"").split("-");return e&&e[1]?parseInt(e[1]):18}function iu(){const e=(qe("cmzl")||"").split("-");return e&&e[2]?parseInt(e[2]):14}function ru(){return qe("tmak")}function lu(){return qe("tdak")}function cu(){return qe("gmak")}function uu(){return qe("bmak")}function du(){return qe("amak")}function zs(){return qe("amsv")}function mu(){return qe("amep")}function fu(){return qe("amas")}function gu(){return qe("errt")}function Lo(e,t){return new Promise(function(a,n){let o=!1,s=null;if(e==="js")s=document.querySelector('script[src="'+t+'"]');else if(e==="css")s=document.querySelector('link[href="'+t+'"]');else{n({type:e,assetUrl:t,error:"notsupport"});return}if(!s)e==="js"?(s=document.createElement("script"),s.setAttribute("type","text/javascript"),s.setAttribute("async","true"),s.setAttribute("src",t)):e==="css"&&(s=document.createElement("link"),s.setAttribute("rel","stylesheet"),s.setAttribute("type","text/css"),s.setAttribute("href",t)),o=!0;else if(s.hasAttribute("data-loaded")){a({type:e,assetUrl:t});return}if(!s){n({type:e,assetUrl:t,error:"unexpected"});return}s.addEventListener("load",()=>{s.setAttribute("data-loaded","true"),a({type:e,assetUrl:t})}),s.addEventListener("error",()=>{n({type:e,assetUrl:t,error:"error"})}),s.addEventListener("abort",()=>{n({type:e,assetUrl:t,error:"abort"})}),o&&document.head.appendChild(s)})}function No(){let e="ebk_"+new Date().getTime();if(crypto&&crypto.getRandomValues){const t=new Uint8Array(256);crypto.getRandomValues(t),e+="_"+mo(t.buffer)}else e+="_"+Math.random();return sn.SHA256(e).toString()}function Ii(){const e=No();return e.substring(0,8)+"-"+e.substring(8,12)+"-8"+e.substring(13,16)+"-"+(8|parseInt(e.charAt(16),16)&3).toString(16)+e.substring(17,20)+"-"+e.substring(20,32)}function ha(){const e=window.location.pathname,t=e.lastIndexOf("/");return t<0?e:e.substring(0,t)}function Dm(e){window.location.replace(`${e}#/`)}let no=!1;const so=[],Rn={};le.defaults.baseURL=ha()+ac;le.defaults.timeout=Vi;le.interceptors.request.use(e=>{const t=ja();return t&&!e.noAuth&&(e.headers.Authorization=`Bearer ${t}`),e.headers["X-Timezone-Offset"]=Ct(),no&&!e.ignoreBlocked?new Promise(a=>{so.push(n=>{n&&(e.headers.Authorization=`Bearer ${n}`),a(e)})}):e},e=>Promise.reject(e));le.interceptors.response.use(e=>"cancelableUuid"in e.config&&e.config.cancelableUuid&&Rn[e.config.cancelableUuid]?(Z.debug("Response canceled by user request, url: "+e.config.url+", cancelableUuid: "+e.config.cancelableUuid),delete Rn[e.config.cancelableUuid],Promise.reject({canceled:!0})):e,e=>{if("cancelableUuid"in e.response.config&&e.response.config.cancelableUuid&&Rn[e.response.config.cancelableUuid])return Z.debug("Response canceled by user request, url: "+e.response.config.url+", cancelableUuid: "+e.response.config.cancelableUuid),delete Rn[e.response.config.cancelableUuid],Promise.reject({canceled:!0});if(e.response&&!e.response.config.ignoreError&&e.response.data&&e.response.data.errorCode){const t=e.response.data.errorCode;if(t===202001||t===202002||t===202003||t===202004||t===202005||t===202006||t===202012)return gn(!1),location.reload(),Promise.reject({processed:!0})}return Promise.reject(e)});const ne={setLocale:e=>{le.defaults.headers.common["Accept-Language"]=e},authorize:e=>le.post("authorize.json",e),authorize2FA:({passcode:e,token:t})=>le.post("2fa/authorize.json",{passcode:e},{noAuth:!0,headers:{Authorization:`Bearer ${t}`}}),authorize2FAByBackupCode:({recoveryCode:e,token:t})=>le.post("2fa/recovery.json",{recoveryCode:e},{noAuth:!0,headers:{Authorization:`Bearer ${t}`}}),authorizeOAuth2:({password:e,passcode:t,callbackToken:a})=>{const n={password:e,passcode:t,token:ja()||void 0};return le.post("oauth2/authorize.json",n,{noAuth:!0,headers:{Authorization:`Bearer ${a}`}})},register:e=>le.post("register.json",e),verifyEmail:({token:e,requestNewToken:t})=>le.post("verify_email/by_token.json?token="+e,{requestNewToken:t},{noAuth:!0,ignoreError:!0}),resendVerifyEmailByUnloginUser:e=>le.post("verify_email/resend.json",e),requestResetPassword:e=>le.post("forget_password/request.json",e),resetPassword:({email:e,token:t,password:a})=>le.post("forget_password/reset/by_token.json?token="+t,{email:e,password:a},{noAuth:!0,ignoreError:!0}),logout:()=>le.get("logout.json"),refreshToken:()=>new Promise(e=>{no=!0,le.post("v1/tokens/refresh.json",{},{ignoreBlocked:!0}).then(t=>{const a=t.data;return e(t),no=!1,a.result.newToken}).then(t=>{so.forEach(a=>a(t)),so.length=0})}),getExternalAuths:()=>le.get("v1/users/external_auth/list.json"),unlinkExternalAuth:e=>le.post("v1/users/external_auth/unlink.json",e),getTokens:()=>le.get("v1/tokens/list.json"),generateAPIToken:e=>le.post("v1/tokens/generate/api.json",e),generateMCPToken:e=>le.post("v1/tokens/generate/mcp.json",e),revokeToken:({tokenId:e,ignoreError:t})=>{const a={tokenId:e};return le.post("v1/tokens/revoke.json",a,{ignoreError:!!t})},revokeAllTokens:()=>le.post("v1/tokens/revoke_all.json"),getProfile:()=>le.get("v1/users/profile/get.json"),updateProfile:e=>le.post("v1/users/profile/update.json",e),updateAvatar:({avatarFile:e})=>le.postForm("v1/users/avatar/update.json",{avatar:e},{timeout:jn}),removeAvatar:()=>le.post("v1/users/avatar/remove.json"),resendVerifyEmailByLoginedUser:()=>le.post("v1/users/verify_email/resend.json"),getUserApplicationCloudSettings:()=>le.get("v1/users/settings/cloud/get.json"),updateUserApplicationCloudSettings:e=>le.post("v1/users/settings/cloud/update.json",e),disableUserApplicationCloudSettings:()=>le.post("v1/users/settings/cloud/disable.json"),get2FAStatus:()=>le.get("v1/users/2fa/status.json"),enable2FA:()=>le.post("v1/users/2fa/enable/request.json"),confirmEnable2FA:e=>le.post("v1/users/2fa/enable/confirm.json",e),disable2FA:e=>le.post("v1/users/2fa/disable.json",e),regenerate2FARecoveryCode:e=>le.post("v1/users/2fa/recovery/regenerate.json",e),getUserDataStatistics:()=>le.get("v1/data/statistics.json"),getExportedUserData:(e,t)=>{let a="";if(t){const n=encodeURIComponent(t.amountFilter),o=encodeURIComponent(t.keyword);a=`max_time=${t.maxTime}&min_time=${t.minTime}&type=${t.type}&category_ids=${t.categoryIds}&account_ids=${t.accountIds}&tag_ids=${t.tagIds}&tag_filter_type=${t.tagFilterType}&amount_filter=${n}&keyword=${o}`}else a="max_time=0&min_time=0&type=0&category_ids=&account_ids=&tag_ids=&tag_filter_type=0&amount_filter=&keyword=";return e==="csv"?le.get("v1/data/export.csv?"+a,{timeout:oi}):e==="tsv"?le.get("v1/data/export.tsv?"+a,{timeout:oi}):Promise.reject("Parameter Invalid")},clearAllData:e=>le.post("v1/data/clear/all.json",e,{timeout:Fs}),clearAllTransactions:e=>le.post("v1/data/clear/transactions.json",e,{timeout:Fs}),clearAllTransactionsOfAccount:e=>le.post("v1/data/clear/transactions/by_account.json",e,{timeout:Fs}),getAllAccounts:({visibleOnly:e})=>le.get("v1/accounts/list.json?visible_only="+e),getAccount:({id:e})=>le.get("v1/accounts/get.json?id="+e),addAccount:e=>le.post("v1/accounts/add.json",e),modifyAccount:e=>le.post("v1/accounts/modify.json",e),hideAccount:e=>le.post("v1/accounts/hide.json",e),moveAccount:e=>le.post("v1/accounts/move.json",e),deleteAccount:e=>le.post("v1/accounts/delete.json",e),deleteSubAccount:e=>le.post("v1/accounts/sub_account/delete.json",e),getTransactions:e=>{const t=encodeURIComponent(e.amountFilter),a=encodeURIComponent(e.keyword);return le.get(`v1/transactions/list.json?max_time=${e.maxTime}&min_time=${e.minTime}&type=${e.type}&category_ids=${e.categoryIds}&account_ids=${e.accountIds}&tag_ids=${e.tagIds}&tag_filter_type=${e.tagFilterType}&amount_filter=${t}&keyword=${a}&count=${e.count}&page=${e.page}&with_count=${e.withCount}&trim_account=true&trim_category=true&trim_tag=true`)},getAllTransactionsByMonth:e=>{const t=encodeURIComponent(e.amountFilter),a=encodeURIComponent(e.keyword);return le.get(`v1/transactions/list/by_month.json?year=${e.year}&month=${e.month}&type=${e.type}&category_ids=${e.categoryIds}&account_ids=${e.accountIds}&tag_ids=${e.tagIds}&tag_filter_type=${e.tagFilterType}&amount_filter=${t}&keyword=${a}&trim_account=true&trim_category=true&trim_tag=true`)},getReconciliationStatements:e=>le.get(`v1/transactions/reconciliation_statements.json?account_id=${e.accountId}&start_time=${e.startTime}&end_time=${e.endTime}`),getTransactionStatistics:e=>{const t=[];return e.startTime&&t.push(`start_time=${e.startTime}`),e.endTime&&t.push(`end_time=${e.endTime}`),e.tagIds&&t.push(`tag_ids=${e.tagIds}`),e.tagFilterType&&t.push(`tag_filter_type=${e.tagFilterType}`),e.keyword&&t.push(`keyword=${encodeURIComponent(e.keyword)}`),le.get(`v1/transactions/statistics.json?use_transaction_timezone=${e.useTransactionTimezone}`+(t.length?"&"+t.join("&"):""))},getTransactionStatisticsTrends:e=>{const t=[];return e.startYearMonth&&t.push(`start_year_month=${e.startYearMonth}`),e.endYearMonth&&t.push(`end_year_month=${e.endYearMonth}`),e.tagIds&&t.push(`tag_ids=${e.tagIds}`),e.tagFilterType&&t.push(`tag_filter_type=${e.tagFilterType}`),e.keyword&&t.push(`keyword=${encodeURIComponent(e.keyword)}`),le.get(`v1/transactions/statistics/trends.json?use_transaction_timezone=${e.useTransactionTimezone}`+(t.length?"&"+t.join("&"):""))},getTransactionStatisticsAssetTrends:e=>{const t=[];return e.startTime&&t.push(`start_time=${e.startTime}`),e.endTime&&t.push(`end_time=${e.endTime}`),le.get("v1/transactions/statistics/asset_trends.json"+(t.length?"?"+t.join("&"):""))},getTransactionAmounts:(e,t,a)=>{let o=Mo.of(e).buildQuery();return t&&t.length&&(o=o+`&exclude_account_ids=${t.join(",")}`),a&&a.length&&(o=o+`&exclude_category_ids=${a.join(",")}`),le.get(`v1/transactions/amounts.json?${o}`)},getTransaction:({id:e,withPictures:t})=>(yt(t)||(t=!0),le.get(`v1/transactions/get.json?id=${e}&with_pictures=${t}&trim_account=true&trim_category=true&trim_tag=true`)),addTransaction:e=>le.post("v1/transactions/add.json",e),modifyTransaction:e=>le.post("v1/transactions/modify.json",e),moveAllTransactionsBetweenAccounts:e=>le.post("v1/transactions/move/all.json",e),deleteTransaction:e=>le.post("v1/transactions/delete.json",e),parseImportDsvFile:({fileType:e,fileEncoding:t,importFile:a})=>le.postForm("v1/transactions/parse_dsv_file.json",{fileType:e,fileEncoding:t,file:a},{timeout:jn}),parseImportTransaction:({fileType:e,fileEncoding:t,importFile:a,columnMapping:n,transactionTypeMapping:o,hasHeaderLine:s,timeFormat:r,timezoneFormat:l,amountDecimalSeparator:i,amountDigitGroupingSymbol:u,geoSeparator:m,geoOrder:b,tagSeparator:v})=>{let I,k,U;return n&&(I=JSON.stringify(n)),o&&(k=JSON.stringify(o)),s&&(U="true"),le.postForm("v1/transactions/parse_import.json",{fileType:e,fileEncoding:t,file:a,columnMapping:I,transactionTypeMapping:k,hasHeaderLine:U,timeFormat:r,timezoneFormat:l,amountDecimalSeparator:i,amountDigitGroupingSymbol:u,geoSeparator:m,geoOrder:b,tagSeparator:v},{timeout:jn})},importTransactions:e=>le.post("v1/transactions/import.json",e,{timeout:oc}),getImportTransactionsProcess:e=>le.get("v1/transactions/import/process.json?client_session_id="+e,{ignoreError:!0}),uploadTransactionPicture:({pictureFile:e,clientSessionId:t})=>le.postForm("v1/transaction/pictures/upload.json",{picture:e,clientSessionId:t},{timeout:jn}),removeUnusedTransactionPicture:e=>le.post("v1/transaction/pictures/remove_unused.json",e),getAllTransactionCategories:()=>le.get("v1/transaction/categories/list.json"),getTransactionCategory:({id:e})=>le.get("v1/transaction/categories/get.json?id="+e),addTransactionCategory:e=>le.post("v1/transaction/categories/add.json",e),addTransactionCategoryBatch:e=>le.post("v1/transaction/categories/add_batch.json",e),modifyTransactionCategory:e=>le.post("v1/transaction/categories/modify.json",e),hideTransactionCategory:e=>le.post("v1/transaction/categories/hide.json",e),moveTransactionCategory:e=>le.post("v1/transaction/categories/move.json",e),deleteTransactionCategory:e=>le.post("v1/transaction/categories/delete.json",e),getAllTransactionTags:()=>le.get("v1/transaction/tags/list.json"),getTransactionTag:({id:e})=>le.get("v1/transaction/tags/get.json?id="+e),addTransactionTag:e=>le.post("v1/transaction/tags/add.json",e),addTransactionTagBatch:e=>le.post("v1/transaction/tags/add_batch.json",e),modifyTransactionTag:e=>le.post("v1/transaction/tags/modify.json",e),hideTransactionTag:e=>le.post("v1/transaction/tags/hide.json",e),moveTransactionTag:e=>le.post("v1/transaction/tags/move.json",e),deleteTransactionTag:e=>le.post("v1/transaction/tags/delete.json",e),getAllTransactionTemplates:({templateType:e})=>le.get("v1/transaction/templates/list.json?templateType="+e),getTransactionTemplate:({id:e})=>le.get("v1/transaction/templates/get.json?id="+e),addTransactionTemplate:e=>le.post("v1/transaction/templates/add.json",e),modifyTransactionTemplate:e=>le.post("v1/transaction/templates/modify.json",e),hideTransactionTemplate:e=>le.post("v1/transaction/templates/hide.json",e),moveTransactionTemplate:e=>le.post("v1/transaction/templates/move.json",e),deleteTransactionTemplate:e=>le.post("v1/transaction/templates/delete.json",e),recognizeReceiptImage:({imageFile:e,cancelableUuid:t})=>le.postForm("v1/llm/transactions/recognize_receipt_image.json",{image:e},{timeout:ic,cancelableUuid:t}),getLatestExchangeRates:e=>le.get("v1/exchange_rates/latest.json",{ignoreError:!!e.ignoreError,timeout:gu()||Vi}),updateUserCustomExchangeRate:e=>le.post("v1/exchange_rates/user_custom/update.json",e),deleteUserCustomExchangeRate:e=>le.post("v1/exchange_rates/user_custom/delete.json",e),getServerVersion:()=>le.get("v1/systems/version.json"),cancelRequest:e=>{Rn[e]=!0},generateOAuth2LoginUrl:(e,t)=>`${ha()}/oauth2/login?platform=${e}&client_session_id=${t}`,generateOAuth2LinkUrl:(e,t)=>`${ha()}/oauth2/login?platform=${e}&client_session_id=${t}&token=${ja()}`,generateQrCodeUrl:e=>`${ha()}${nc}/${e}.png`,generateMapProxyTileImageUrl:(e,t)=>{const a=ja();let n=`${ha()}${si}/map/tile/{z}/{x}/{y}.png?provider=${e}&token=${a}`;return t&&(n=n+`&language=${t}`),n},generateMapProxyAnnotationImageUrl:(e,t)=>{const a=ja();let n=`${ha()}${si}/map/annotation/{z}/{x}/{y}.png?provider=${e}&token=${a}`;return t&&(n=n+`&language=${t}`),n},generateGoogleMapJavascriptUrl:(e,t)=>{let a=`${rc}?key=${cu()}&libraries=core,marker&callback=${t}`;return e&&(a=a+`&language=${e}`),a},generateBaiduMapJavascriptUrl:e=>`${lc}&ak=${uu()}&callback=${e}`,generateAmapJavascriptUrl:e=>`${cc}&key=${du()}&plugin=AMap.ToolBar&callback=${e}`,generateAmapApiInternalProxyUrl:()=>`${window.location.origin}${ha()}${sc}`,getInternalAvatarUrlWithToken(e,t){if(!e)return e;const a=[];return a.push("token="+ja()),t&&(Cn(t)?a.push("_nocache="+Ii()):a.push("_nocache="+t)),e.indexOf("?")>=0?e+"&"+a.join("&"):e+"?"+a.join("&")},getTransactionPictureUrlWithToken(e,t){if(!e)return e;const a=[];return a.push("token="+ja()),t&&(Cn(t)?a.push("_nocache="+Ii()):a.push("_nocache="+t)),e.indexOf("?")>=0?e+"&"+a.join("&"):e+"?"+a.join("&")}},mt=Ht("settings",()=>{const e=q(Ra()),t=q({}),a=q(kl()),n=c(()=>Cl(t.value)>0);function o(h,O){const fe=h.split("."),ge=fe[0];if(fe.length===1)vt(ge,O),e.value[ge]=O;else if(fe.length===2){const Se=fe[1];oa(ge,Se,O),e.value[ge][Se]=O}else Z.warn(`cannot load application cloud setting "${h}", because it has invalid key format`)}function s(h){const O=Os[h];if(!O)return Z.warn(`cannot get application cloud setting "${h}", because it is not supported to sync`),null;const fe=h.split(".");let ge=e.value[h];if(fe.length===2){const be=fe[0],Ue=fe[1];ge=e.value[be][Ue]}else if(fe.length>2)return Z.warn(`cannot get application cloud setting "${h}", because it has invalid key format`),null;let Se="";return O===fn.String?ge?Se=ge.toString():Se="":Se=JSON.stringify(ge),{settingKey:h,settingValue:Se}}function r(h,O){if(!t.value||!t.value[h]||!Os[h])return;const ge=Ye(O)?O:JSON.stringify(O);ne.updateUserApplicationCloudSettings({settings:[{settingKey:h,settingValue:ge}],fullUpdate:!1}).then(Se=>{const be=Se.data;if(!be||!be.success||!be.result){Z.debug(`failed to update user application cloud setting "${h}" with value "${ge}"`);return}Z.debug(`update user application cloud setting "${h}" with value "${ge}" successfully`)}).catch(Se=>{Z.debug(`failed to update user application cloud setting "${h}" with value "${ge}"`,Se)})}function l(h){vt("theme",h),e.value.theme=h}function i(h){vt("fontSize",h),e.value.fontSize=h}function u(h){vt("timeZone",h),e.value.timeZone=h}function m(h){vt("autoUpdateExchangeRatesData",h),e.value.autoUpdateExchangeRatesData=h}function b(h){vt("showAccountBalance",h),e.value.showAccountBalance=h,r("showAccountBalance",h)}function v(h){vt("swipeBack",h),e.value.swipeBack=h}function I(h){vt("animate",h),e.value.animate=h}function k(h){vt("applicationLock",h),e.value.applicationLock=h}function U(h){vt("applicationLockWebAuthn",h),e.value.applicationLockWebAuthn=h}function R(h){vt("showAddTransactionButtonInDesktopNavbar",h),e.value.showAddTransactionButtonInDesktopNavbar=h}function x(h){vt("showAmountInHomePage",h),e.value.showAmountInHomePage=h,r("showAmountInHomePage",h)}function B(h){vt("timezoneUsedForStatisticsInHomePage",h),e.value.timezoneUsedForStatisticsInHomePage=h,r("timezoneUsedForStatisticsInHomePage",h)}function N(h){vt("overviewAccountFilterInHomePage",h),e.value.overviewAccountFilterInHomePage=h,r("overviewAccountFilterInHomePage",h)}function K(h){vt("overviewTransactionCategoryFilterInHomePage",h),e.value.overviewTransactionCategoryFilterInHomePage=h,r("overviewTransactionCategoryFilterInHomePage",h)}function D(h){vt("itemsCountInTransactionListPage",h),e.value.itemsCountInTransactionListPage=h,r("itemsCountInTransactionListPage",h)}function Y(h){vt("showTotalAmountInTransactionListPage",h),e.value.showTotalAmountInTransactionListPage=h,r("showTotalAmountInTransactionListPage",h)}function g(h){vt("showTagInTransactionListPage",h),e.value.showTagInTransactionListPage=h,r("showTagInTransactionListPage",h)}function A(h){vt("autoSaveTransactionDraft",h),e.value.autoSaveTransactionDraft=h,r("autoSaveTransactionDraft",h)}function w(h){vt("autoGetCurrentGeoLocation",h),e.value.autoGetCurrentGeoLocation=h,r("autoGetCurrentGeoLocation",h)}function P(h){vt("alwaysShowTransactionPicturesInMobileTransactionEditPage",h),e.value.alwaysShowTransactionPicturesInMobileTransactionEditPage=h,r("alwaysShowTransactionPicturesInMobileTransactionEditPage",h)}function H(h){vt("totalAmountExcludeAccountIds",h),e.value.totalAmountExcludeAccountIds=h,r("totalAmountExcludeAccountIds",h)}function _(h){vt("currencySortByInExchangeRatesPage",h),e.value.currencySortByInExchangeRatesPage=h,r("currencySortByInExchangeRatesPage",h)}function Ae(h){oa("statistics","defaultChartDataType",h),e.value.statistics.defaultChartDataType=h,r("statistics.defaultChartDataType",h)}function de(h){oa("statistics","defaultTimezoneType",h),e.value.statistics.defaultTimezoneType=h,r("statistics.defaultTimezoneType",h)}function X(h){oa("statistics","defaultAccountFilter",h),e.value.statistics.defaultAccountFilter=h,r("statistics.defaultAccountFilter",h)}function me(h){oa("statistics","defaultTransactionCategoryFilter",h),e.value.statistics.defaultTransactionCategoryFilter=h,r("statistics.defaultTransactionCategoryFilter",h)}function ae(h){oa("statistics","defaultSortingType",h),e.value.statistics.defaultSortingType=h,r("statistics.defaultSortingType",h)}function T(h){oa("statistics","defaultCategoricalChartType",h),e.value.statistics.defaultCategoricalChartType=h,r("statistics.defaultCategoricalChartType",h)}function p(h){oa("statistics","defaultCategoricalChartDataRangeType",h),e.value.statistics.defaultCategoricalChartDataRangeType=h,r("statistics.defaultCategoricalChartDataRangeType",h)}function G(h){oa("statistics","defaultTrendChartType",h),e.value.statistics.defaultTrendChartType=h,r("statistics.defaultTrendChartType",h)}function f(h){oa("statistics","defaultTrendChartDataRangeType",h),e.value.statistics.defaultTrendChartDataRangeType=h,r("statistics.defaultTrendChartDataRangeType",h)}function F(h){oa("statistics","defaultAssetTrendsChartType",h),e.value.statistics.defaultAssetTrendsChartType=h,r("statistics.defaultAssetTrendsChartType",h)}function C(h){oa("statistics","defaultAssetTrendsChartDataRangeType",h),e.value.statistics.defaultAssetTrendsChartDataRangeType=h,r("statistics.defaultAssetTrendsChartDataRangeType",h)}function S(){Ol(),e.value=Ra()}function E(h){if(!h||h.length<1)return[];const O=[];for(const fe of h){const ge=s(fe);ge&&O.push(ge)}return O}function W(h){if(!h||h.length<1){t.value={};return}t.value=Hs(h.map(O=>O.settingKey),!0);for(const O of h){if(!O||!O.settingKey)continue;const fe=Os[O.settingKey];if(!fe){Z.warn(`cannot load application cloud setting "${O.settingKey}", because it is not supported to sync`);continue}if(fe===fn.String)o(O.settingKey,O.settingValue);else if(fe===fn.Number){const ge=parseFloat(O.settingValue);if(isNaN(ge)){Z.warn(`cannot load application cloud setting "${O.settingKey}", because it has invalid number value`);continue}o(O.settingKey,ge)}else if(fe===fn.Boolean){if(O.settingValue!=="true"&&O.settingValue!=="false"){Z.warn(`cannot load application cloud setting "${O.settingKey}", because it has invalid boolean value`);continue}o(O.settingKey,O.settingValue==="true")}else if(fe===fn.StringBooleanMap)try{const ge=JSON.parse(O.settingValue);let Se=Ke(ge);if(Se){for(const be of Dt(ge))if(!Cn(be)){Se=!1;break}}if(!Se){Z.warn(`cannot load application cloud setting "${O.settingKey}", because it has invalid map value`);continue}o(O.settingKey,ge)}catch(ge){Z.warn(`cannot load application cloud setting "${O.settingKey}", because cannot parse JSON (${ge})`)}else Z.warn(`cannot load application cloud setting "${O.settingKey}", because it has unknown type "${fe}"`)}}function V(h){!h||h.length<1?t.value={}:t.value=Hs(h,!0)}function J(h){h&&(a.value.currency=h.currency,a.value.firstDayOfWeek=h.firstDayOfWeek)}return{appSettings:e,syncedAppSettings:t,localeDefaultSettings:a,enableApplicationCloudSync:n,setTheme:l,setFontSize:i,setTimeZone:u,setAutoUpdateExchangeRatesData:m,setShowAccountBalance:b,setEnableSwipeBack:v,setEnableAnimate:I,setEnableApplicationLock:k,setEnableApplicationLockWebAuthn:U,setShowAddTransactionButtonInDesktopNavbar:R,setShowAmountInHomePage:x,setTimezoneUsedForStatisticsInHomePage:B,setOverviewAccountFilterInHomePage:N,setOverviewTransactionCategoryFilterInHomePage:K,setItemsCountInTransactionListPage:D,setShowTotalAmountInTransactionListPage:Y,setShowTagInTransactionListPage:g,setAutoSaveTransactionDraft:A,setAutoGetCurrentGeoLocation:w,setAlwaysShowTransactionPicturesInMobileTransactionEditPage:P,setTotalAmountExcludeAccountIds:H,setCurrencySortByInExchangeRatesPage:_,setStatisticsDefaultChartDataType:Ae,setStatisticsDefaultTimezoneType:de,setStatisticsDefaultAccountFilter:X,setStatisticsDefaultTransactionCategoryFilter:me,setStatisticsSortingType:ae,setStatisticsDefaultCategoricalChartType:T,setStatisticsDefaultCategoricalChartDateRange:p,setStatisticsDefaultTrendChartType:G,setStatisticsDefaultTrendChartDateRange:f,setStatisticsDefaultAssetTrendsChartType:F,setStatisticsDefaultAssetTrendsChartDateRange:C,clearAppSettings:S,createApplicationCloudSettings:E,setApplicationSettingsFromCloudSettings:W,updateApplicationSyncSettingKeys:V,updateLocalizedDefaultSettings:J}});class Nn{username="";password="";confirmPassword="";email="";nickname="";language;defaultCurrency;firstDayOfWeek;defaultAccountId=Pe.defaultAccountId;transactionEditScope=Pe.transactionEditScope;fiscalYearStart=Pe.fiscalYearStart;calendarDisplayType=Pe.calendarDisplayType;dateDisplayType=Pe.dateDisplayType;longDateFormat=Pe.longDateFormat;shortDateFormat=Pe.shortDateFormat;longTimeFormat=Pe.longTimeFormat;shortTimeFormat=Pe.shortTimeFormat;fiscalYearFormat=Pe.fiscalYearFormat;currencyDisplayType=Pe.currencyDisplayType;numeralSystem=Pe.numeralSystem;decimalSeparator=Pe.decimalSeparator;digitGroupingSymbol=Pe.digitGroupingSymbol;digitGrouping=Pe.digitGrouping;coordinateDisplayType=Pe.coordinateDisplayType;expenseAmountColor=Pe.expenseAmountColor;incomeAmountColor=Pe.incomeAmountColor;constructor(t,a,n){this.language=t,this.defaultCurrency=a,this.firstDayOfWeek=n}fillFrom(t){this.username=t.username,this.email=t.email,this.nickname=t.nickname,this.defaultAccountId=t.defaultAccountId,this.transactionEditScope=t.transactionEditScope,this.language=t.language,this.defaultCurrency=t.defaultCurrency,this.firstDayOfWeek=t.firstDayOfWeek,this.fiscalYearStart=t.fiscalYearStart,this.calendarDisplayType=t.calendarDisplayType,this.dateDisplayType=t.dateDisplayType,this.longDateFormat=t.longDateFormat,this.shortDateFormat=t.shortDateFormat,this.longTimeFormat=t.longTimeFormat,this.shortTimeFormat=t.shortTimeFormat,this.fiscalYearFormat=t.fiscalYearFormat,this.currencyDisplayType=t.currencyDisplayType,this.numeralSystem=t.numeralSystem,this.decimalSeparator=t.decimalSeparator,this.digitGroupingSymbol=t.digitGroupingSymbol,this.digitGrouping=t.digitGrouping,this.coordinateDisplayType=t.coordinateDisplayType,this.expenseAmountColor=t.expenseAmountColor,this.incomeAmountColor=t.incomeAmountColor}toRegisterRequest(t){return{username:this.username,email:this.email,nickname:this.nickname,password:this.password,language:this.language,defaultCurrency:this.defaultCurrency,firstDayOfWeek:this.firstDayOfWeek,categories:t}}toProfileUpdateRequest(t){return{email:this.email,nickname:this.nickname,password:this.password,oldPassword:t,defaultAccountId:this.defaultAccountId,transactionEditScope:this.transactionEditScope,language:this.language,defaultCurrency:this.defaultCurrency,firstDayOfWeek:this.firstDayOfWeek,fiscalYearStart:this.fiscalYearStart,calendarDisplayType:this.calendarDisplayType,dateDisplayType:this.dateDisplayType,longDateFormat:this.longDateFormat,shortDateFormat:this.shortDateFormat,longTimeFormat:this.longTimeFormat,shortTimeFormat:this.shortTimeFormat,fiscalYearFormat:this.fiscalYearFormat,currencyDisplayType:this.currencyDisplayType,numeralSystem:this.numeralSystem,decimalSeparator:this.decimalSeparator,digitGroupingSymbol:this.digitGroupingSymbol,digitGrouping:this.digitGrouping,coordinateDisplayType:this.coordinateDisplayType,expenseAmountColor:this.expenseAmountColor,incomeAmountColor:this.incomeAmountColor}}static of(t){const a=new Nn(t.language,t.defaultCurrency,t.firstDayOfWeek);return a.defaultAccountId=t.defaultAccountId,a.transactionEditScope=t.transactionEditScope,a.fiscalYearStart=t.fiscalYearStart,a.calendarDisplayType=t.calendarDisplayType,a.dateDisplayType=t.dateDisplayType,a.longDateFormat=t.longDateFormat,a.shortDateFormat=t.shortDateFormat,a.longTimeFormat=t.longTimeFormat,a.shortTimeFormat=t.shortTimeFormat,a.fiscalYearFormat=t.fiscalYearFormat,a.currencyDisplayType=t.currencyDisplayType,a.numeralSystem=t.numeralSystem,a.decimalSeparator=t.decimalSeparator,a.digitGroupingSymbol=t.digitGroupingSymbol,a.digitGrouping=t.digitGrouping,a.coordinateDisplayType=t.coordinateDisplayType,a.expenseAmountColor=t.expenseAmountColor,a.incomeAmountColor=t.incomeAmountColor,a}static createNewUser(t,a,n){return new Nn(t,a,n)}}const Pe={username:"",email:"",nickname:"",avatar:"",avatarProvider:void 0,defaultAccountId:"",transactionEditScope:ra.All.type,language:"",defaultCurrency:"",firstDayOfWeek:-1,fiscalYearStart:_e.Default.value,calendarDisplayType:Ot.Default.type,dateDisplayType:Ft.Default.type,longDateFormat:je.Default.type,shortDateFormat:We.Default.type,longTimeFormat:gt.Default.type,shortTimeFormat:pt.Default.type,fiscalYearFormat:ft.Default.type,currencyDisplayType:it.Default.type,numeralSystem:ve.Default.type,decimalSeparator:Je.LanguageDefaultType,digitGroupingSymbol:et.LanguageDefaultType,digitGrouping:Lt.LanguageDefaultType,coordinateDisplayType:Bt.Default.type,expenseAmountColor:dt.DefaultExpenseColor.type,incomeAmountColor:dt.DefaultIncomeColor.type,emailVerified:!1},Nt=Ht("user",()=>{const e=mt(),t=q(Wl()),a=c(()=>{const f=t.value||Pe;return f.nickname||f.username||null}),n=c(()=>{const f=t.value||Pe;return G(f,!1)}),o=c(()=>(t.value||Pe).defaultAccountId),s=c(()=>(t.value||Pe).language),r=c(()=>(t.value||Pe).defaultCurrency||e.localeDefaultSettings.currency),l=c(()=>{const f=t.value||Pe;return Ie(f.firstDayOfWeek)&&lt.valueOf(f.firstDayOfWeek)?f.firstDayOfWeek:e.localeDefaultSettings.firstDayOfWeek}),i=c(()=>{const f=t.value||Pe;return Ie(f.fiscalYearStart)&&_e.valueOf(f.fiscalYearStart)?f.fiscalYearStart:Pe.fiscalYearStart}),u=c(()=>(t.value||Pe).calendarDisplayType),m=c(()=>(t.value||Pe).dateDisplayType),b=c(()=>(t.value||Pe).longDateFormat),v=c(()=>(t.value||Pe).shortDateFormat),I=c(()=>(t.value||Pe).longTimeFormat),k=c(()=>(t.value||Pe).shortTimeFormat),U=c(()=>(t.value||Pe).fiscalYearFormat),R=c(()=>(t.value||Pe).currencyDisplayType),x=c(()=>(t.value||Pe).numeralSystem),B=c(()=>(t.value||Pe).decimalSeparator),N=c(()=>(t.value||Pe).digitGroupingSymbol),K=c(()=>(t.value||Pe).digitGrouping),D=c(()=>(t.value||Pe).coordinateDisplayType),Y=c(()=>(t.value||Pe).expenseAmountColor),g=c(()=>(t.value||Pe).incomeAmountColor);function A(f){return Nn.createNewUser(f,e.localeDefaultSettings.currency,e.localeDefaultSettings.firstDayOfWeek)}function w(f){t.value=f,Hl(f)}function P(){t.value=null,Gi()}function H(){return new Promise((f,F)=>{ne.getProfile().then(C=>{const S=C.data;if(!S||!S.success||!S.result){F({message:"Unable to retrieve user profile"});return}f(S.result)}).catch(C=>{Z.error("failed to retrieve user profile",C),C.response&&C.response.data&&C.response.data.errorMessage?F({error:C.response.data}):C.processed?F(C):F({message:"Unable to retrieve user profile"})})})}function _({transactionEditScope:f}){return new Promise((F,C)=>{ne.updateProfile({transactionEditScope:f}).then(S=>{const E=S.data;if(!E||!E.success||!E.result||!E.result.user||!Ke(E.result.user)){C({message:"Unable to update editable transaction range"});return}w(E.result.user),F(E.result)}).catch(S=>{Z.error("failed to save editable transaction range",S),S.response&&S.response.data&&S.response.data.errorMessage?C({error:S.response.data}):S.processed?C(S):C({message:"Unable to update editable transaction range"})})})}function Ae({avatarFile:f}){return new Promise((F,C)=>{ne.updateAvatar({avatarFile:f}).then(S=>{const E=S.data;if(!E||!E.success||!E.result){C({message:"Unable to update user avatar"});return}w(E.result),F(E.result)}).catch(S=>{Z.error("failed to update user avatar",S),S.response&&S.response.data&&S.response.data.errorMessage?C({error:S.response.data}):S.processed?C(S):C({message:"Unable to update user avatar"})})})}function de(){return new Promise((f,F)=>{ne.removeAvatar().then(C=>{const S=C.data;if(!S||!S.success||!S.result){F({message:"Unable to remove user avatar"});return}w(S.result),f(S.result)}).catch(C=>{Z.error("failed to remove user avatar",C),C.response&&C.response.data&&C.response.data.errorMessage?F({error:C.response.data}):C.processed?F(C):F({message:"Unable to remove user avatar"})})})}function X(){return new Promise((f,F)=>{ne.getUserApplicationCloudSettings().then(C=>{const S=C.data;if(!S||!S.success||!S.result){f(S.result);return}f(S.result)}).catch(C=>{Z.error("failed to load user synchronized application settings",C),C.response&&C.response.data&&C.response.data.errorMessage?F({error:C.response.data}):C.processed?F(C):F({message:"Unable to retrieve user synchronized application settings"})})})}function me(f){const F=e.createApplicationCloudSettings(f);return new Promise((C,S)=>{ne.updateUserApplicationCloudSettings({settings:F,fullUpdate:!0}).then(E=>{const W=E.data;if(!W||!W.success||!W.result){S({message:"Unable to update user synchronized application settings"});return}e.updateApplicationSyncSettingKeys(f),C(W.result)}).catch(E=>{Z.error("failed to update user synchronized application settings",E),E.response&&E.response.data&&E.response.data.errorMessage?S({error:E.response.data}):E.processed?S(E):S({message:"Unable to update user synchronized application settings"})})})}function ae(){return new Promise((f,F)=>{ne.disableUserApplicationCloudSettings().then(C=>{const S=C.data;if(!S||!S.success||!S.result){F({message:"Unable to disable user synchronized application settings"});return}e.updateApplicationSyncSettingKeys(void 0),f(S.result)}).catch(C=>{Z.error("failed to disable user synchronized application settings",C),C.response&&C.response.data&&C.response.data.errorMessage?F({error:C.response.data}):C.processed?F(C):F({message:"Unable to disable user synchronized application settings"})})})}function T(){return new Promise((f,F)=>{ne.getUserDataStatistics().then(C=>{const S=C.data;if(!S||!S.success||!S.result){F({message:"Unable to retrieve user statistics data"});return}f(S.result)}).catch(C=>{Z.error("failed to retrieve user statistics data",C),C.response&&C.response.data&&C.response.data.errorMessage?F({error:C.response.data}):C.processed?F(C):F({message:"Unable to retrieve user statistics data"})})})}function p(f,F){return new Promise((C,S)=>{ne.getExportedUserData(f,F).then(E=>{if(E&&E.headers){const V=E.headers["content-type"]?.toString()||"";if(f==="csv"&&!$t.CSV.isSameType(V)){S({message:"Unable to retrieve exported user data"});return}else if(f==="tsv"&&!$t.TSV.isSameType(V)){S({message:"Unable to retrieve exported user data"});return}}const W=new Blob([E.data],{type:E.headers["content-type"]});C(W)}).catch(E=>{Z.error("failed to retrieve user statistics data",E),E.response&&$t.TXT.isSameType(E.response.headers["content-type"])&&E.response&&E.response.data?S({message:"error."+E.response.data}):E.processed?S(E):S({message:"Unable to retrieve exported user data"})})})}function G(f,F){let C="";return Ke(f)?C=f.avatar:Ye(f)&&(C=f),C?ne.getInternalAvatarUrlWithToken(C,F):null}return{currentUserBasicInfo:t,currentUserNickname:a,currentUserAvatar:n,currentUserDefaultAccountId:o,currentUserLanguage:s,currentUserDefaultCurrency:r,currentUserFirstDayOfWeek:l,currentUserFiscalYearStart:i,currentUserCalendarDisplayType:u,currentUserDateDisplayType:m,currentUserLongDateFormat:b,currentUserShortDateFormat:v,currentUserLongTimeFormat:I,currentUserShortTimeFormat:k,currentUserFiscalYearFormat:U,currentUserCurrencyDisplayType:R,currentUserNumeralSystem:x,currentUserDecimalSeparator:B,currentUserDigitGroupingSymbol:N,currentUserDigitGrouping:K,currentUserCoordinateDisplayType:D,currentUserExpenseAmountColor:Y,currentUserIncomeAmountColor:g,generateNewUserModel:A,storeUserBasicInfo:w,resetUserBasicInfo:P,getCurrentUserProfile:H,updateUserTransactionEditScope:_,updateUserAvatar:Ae,removeUserAvatar:de,getUserApplicationCloudSettings:X,fullUpdateUserApplicationCloudSettings:me,disableUserApplicationCloudSettings:ae,getUserDataStatistics:T,getExportedUserData:p,getUserAvatarUrl:G}}),wo="ebk_app_exchange_rates",pu="user_custom";function Ci(){const e=localStorage.getItem(wo)||"{}";return JSON.parse(e)}function Ks(e){const t=JSON.stringify(e);localStorage.setItem(wo,t)}function yu(){localStorage.removeItem(wo)}const da=Ht("exchangeRates",()=>{const e=q(Ci()),t=c(()=>!e.value||!e.value.data?!1:e.value.data.dataSource===pu),a=c(()=>{const b=e.value||{};return b&&b.data?b.data.updateTime:null}),n=c(()=>{const b={};if(!e.value||!e.value.data||!e.value.data.exchangeRates)return b;for(const v of e.value.data.exchangeRates)b[v.currency]=v;return b});function o(b,v){if(!e.value||!e.value.data||!e.value.data.exchangeRates)return;const I=e.value.data.exchangeRates;let k=!1;for(const[U,R]of Ze(I))if(U.currency===b.currency){I.splice(R,1,b),k=!0;break}k||(I.push(b),k=!0),e.value.data.updateTime=v,k&&Ks(e.value)}function s(b){if(!e.value||!e.value.data||!e.value.data.exchangeRates)return;const v=e.value.data.exchangeRates;let I=!1;for(const[k,U]of Ze(v))if(k.currency===b){v.splice(U,1),I=!0;break}I&&Ks(e.value)}function r(){e.value={},yu()}function l({silent:b,force:v}){const I=e.value,k=Va();return!v&&(I&&I.time&&I.data&&Dc(I.data.updateTime,k)||I&&I.time&&I.data&&Sc(I.time,k))?Promise.resolve(I.data):new Promise((U,R)=>{ne.getLatestExchangeRates({ignoreError:b}).then(x=>{const B=x.data;if(!B||!B.success||!B.result){R({message:"Unable to retrieve exchange rates data"});return}const N=Ci();if(v&&N&&N.data&&ta(N.data,B.result)){R({message:"Exchange rates data is up to date",isUpToDate:!0});return}e.value={time:k,data:B.result},Ks(e.value),U(B.result)}).catch(x=>{Z.error("failed to retrieve latest exchange rates data",x),x&&x.processed?R(x):x.response&&x.response.data&&x.response.data.errorMessage?R({error:x.response.data}):R({message:"Unable to retrieve exchange rates data"})})})}function i({currency:b,rate:v}){return new Promise((I,k)=>{ne.updateUserCustomExchangeRate({currency:b,rate:v.toString()}).then(U=>{const R=U.data;if(!R||!R.success||!R.result){k({message:"Unable to update user custom exchange rate"});return}const x={currency:R.result.currency,rate:R.result.rate};o(x,R.result.updateTime),I(R.result)}).catch(U=>{Z.error("failed to update user custom exchange rate",U),U.response&&U.response.data&&U.response.data.errorMessage?k({error:U.response.data}):U.processed?k(U):k({message:"Unable to update user custom exchange rate"})})})}function u({currency:b,beforeResolve:v}){return new Promise((I,k)=>{ne.deleteUserCustomExchangeRate({currency:b}).then(U=>{const R=U.data;if(!R||!R.success||!R.result){k({message:"Unable to delete this user custom exchange rate"});return}v?v(()=>{s(b)}):s(b),I(R.result)}).catch(U=>{Z.error("failed to delete user custom exchange rate",U),U.response&&U.response.data&&U.response.data.errorMessage?k({error:U.response.data}):U.processed?k(U):k({message:"Unable to delete this user custom exchange rate"})})})}function m(b,v,I){if(b===0)return 0;if(!e.value||!e.value.data||!e.value.data.exchangeRates)return null;const k=e.value.data.exchangeRates,U={};for(const B of k)U[B.currency]=B;const R=U[v],x=U[I];return!R||!x?null:So(b,R.rate,x.rate)}return{latestExchangeRates:e,isUserCustomExchangeRates:t,exchangeRatesLastUpdateTime:a,latestExchangeRateMap:n,resetLatestExchangeRates:r,getLatestExchangeRates:l,updateUserCustomExchangeRate:i,deleteUserCustomExchangeRate:u,getExchangedAmount:m}});function Sm(){return{legacy:!1,locale:pn,fallbackLocale:pn,formatFallbackMessages:!0,messages:(function(){const e={};for(const[t,a]of Wt(Vt))e[t]=a.content;return e})()}}function Mm(){const e={};for(const[t,a]of Wt(Vt))a.textDirection==="rtl"&&(e[t]=!0);return e}function Ge(){const{t:e,locale:t}=dl(),a=mt(),n=Nt(),o=da();function s(d){return e(`language.${d}`)}function r(){if(!window||!window.navigator)return pn;let d=window.navigator.browserLanguage||window.navigator.language;if(!d)return pn;if(Vt[d])return d;let y=l(d);if(y&&Vt[y])return y;const M=d.split("-");if(M.length>2){if(d=M[0]+"-"+M[1],Vt[d])return d;if(y=l(d),y&&Vt[y])return y}if(M.length>1){if(d=M[0],Vt[d])return d;if(y=l(d),y&&Vt[y])return y}return y=i(d),y&&Vt[y]?y:pn}function l(d){for(const[y,M]of Wt(Vt)){if(y.toLowerCase()===d.toLowerCase())return y;const $=M.aliases;if(!(!$||$.length<1)){for(const ee of $)if(ee.toLowerCase()===d.toLowerCase())return y}}return null}function i(d){for(const y of Mt(Vt)){if(y.indexOf("-")<0)continue;if(y.split("-")[0].toLowerCase()===d.toLowerCase())return y}return null}function u(d){if(d.errorCode===qs.ApiNotFound&&ii[d.path])return{message:`${ii[d.path].message}`};if(d.errorCode!==qs.ValidatorError)return{message:`error.${d.errorMessage}`};for(const y of uc){const M=d.errorMessage.match(y.regex);if(M&&M.length===y.parameters.length+1)return{message:`parameterizedError.${y.localeKey}`,parameters:y.parameters.map(($,ee)=>({key:$.field,localized:$.localized,value:M[ee+1]}))}}return{message:`error.${d.errorMessage}`}}function m(d){const y={};if(d)for(const M of d)M.localized?y[M.key]=e(`parameter.${M.value}`):y[M.key]=M.value;return y}function b(){return De.localeData()}function v(){const d=hl[t.value]??Tl;return{numerals:d.numerals,monthNames:d.monthNames,dayNames:d.dayNames,leapMonthPrefix:d.leapMonthPrefix,solarTermNames:d.solarTermNames}}function I(){const d=vl[t.value]??Al;return{monthNames:d.monthNames,monthShortNames:d.monthShortNames}}function k(d,y){const M=e("default.currencyDisplayType");let $=it.parse(M);$||($=it.Default);const ee=n.currentUserDefaultCurrency,re=[],Ce=Qa(12345,ee,$,d,y);re.push({type:it.LanguageDefaultType,displayName:`${e("Language Default")} (${Ce})`});const Oe=it.values();for(const Le of Oe){const nt=Qa(12345,ee,Le,d,y),st=`${e(Le.name)} (${nt})`;re.push({type:Le.type,displayName:st})}return re}function U(d,y,M,$){let ee=y;ee||(ee=M);const re=[];re.push({type:$,displayName:`${e("Language Default")} (${e("calendar."+ee.name)})`});for(const Ce of d)re.push({type:Ce.type,displayName:e("calendar."+Ce.name)});return re}function R(d){const y=[];for(const M of d)y.push({type:M.type,displayName:e(M.name)});return y}function x(d,y,M){const $=[];$.push({type:y,displayName:e("System Default")+(M.name?` (${e(M.name)})`:"")});for(const ee of d)$.push({type:ee.type,displayName:e(ee.name)});return $}function B(d,y,M,$){let ee=y;ee||(ee=M);const re=[];re.push({type:$,symbol:ee.symbol,displayName:`${e("Language Default")} (${ee.symbol})`});for(const Ce of d)re.push({type:Ce.type,symbol:Ce.symbol,displayName:`${e("numeral."+Ce.name)} (${Ce.symbol})`});return re}function N(d,y){const M=[],$=Xe.values(d);for(const ee of $)M.push({type:ee.type,displayName:e(y?ee.fullName:`granularity.${ee.shortName}`)});return M}function K(d){const y=[],M=zt.values();for(const $ of M)y.push(e(`datetime.${$.name}.${d}`));return y}function D(d){const y=[],M=lt.values();for(const $ of M)y.push(e(`datetime.${$.name}.${d}`));return y}function Y(d,y,M,$,ee){return Yc(d,y,M,e(`default.${$}`),ee)}function g(d,y,M,$,ee,re){const Ce=Y(y,M,$,ee,re);return e(`format.${d}.${Ce.key}`)}function A(){return g("longDate",je.all(),je.values(),n.currentUserLongDateFormat,"longDateFormat",je.Default)}function w(){return g("shortDate",We.all(),We.values(),n.currentUserShortDateFormat,"shortDateFormat",We.Default)}function P(){return g("longYear",je.all(),je.values(),n.currentUserLongDateFormat,"longDateFormat",je.Default)}function H(){return g("shortYear",We.all(),We.values(),n.currentUserShortDateFormat,"shortDateFormat",We.Default)}function _(){return g("longYearMonth",je.all(),je.values(),n.currentUserLongDateFormat,"longDateFormat",je.Default)}function Ae(){return g("shortYearMonth",We.all(),We.values(),n.currentUserShortDateFormat,"shortDateFormat",We.Default)}function de(){return g("longMonthDay",je.all(),je.values(),n.currentUserLongDateFormat,"longDateFormat",je.Default)}function X(){return g("shortMonthDay",We.all(),We.values(),n.currentUserShortDateFormat,"shortDateFormat",We.Default)}function me(){return g("shortDay",We.all(),We.values(),n.currentUserShortDateFormat,"shortDateFormat",We.Default)}function ae(){return g("longTime",gt.all(),gt.values(),n.currentUserLongTimeFormat,"longTimeFormat",gt.Default)}function T(){return g("shortTime",pt.all(),pt.values(),n.currentUserShortTimeFormat,"shortTimeFormat",pt.Default)}function p(d){let y=d?.numeralSystem,M=d?.calendarType;return yt(y)||(y=La()),yt(M)||(M=Ns().calendarType),{numeralSystem:y,calendarType:M,localeData:b(),chineseCalendarLocaleData:v(),persianCalendarLocaleData:I()}}function G({numeralSystem:d,digitGrouping:y,decimalSeparator:M,currencyCode:$}){return yt(d)||(d=La()),yt(y)||(y=Ho()),yt(M)||(M=$o()),{numeralSystem:d,digitGrouping:y,digitGroupingSymbol:Wo(),decimalSeparator:M,decimalNumberCount:hr($)}}function f(d,y){const M=Gn[d];return M&&M.unit?e(y?`currency.unit.${M.unit}.plural`:`currency.unit.${M.unit}.normal`):""}function F(d){return d===bt.Gregorian||d===bt.Buddhist}function C(){const d=Ns();return F(d.calendarType)?d.calendarType:bt.Gregorian}function S(d,y){return 1<=y&&y<=4?e("format.yearQuarter.q"+y,{year:d,quarter:y}):""}function E(d,y,M,$){d||(d=ft.Default),yt($)?F($)||($=bt.Gregorian):$=C();const ee=p({calendarType:$,numeralSystem:M});return e("format.fiscalYear."+d.typeName,{StartYYYY:Qe(y.minUnixTime,"YYYY",ee),StartYY:Qe(y.minUnixTime,"YY",ee),EndYYYY:Qe(y.maxUnixTime,"YYYY",ee),EndYY:Qe(y.maxUnixTime,"YY",ee)})}function W(){let d=it.valueOf(n.currentUserCurrencyDisplayType);if(!d){const y=e("default.currencyDisplayType");d=it.parse(y)}return d||(d=it.Default),d}function V(d,y){let $=La().replaceWesternArabicDigitsToLocalizedDigits(d.getLocalizedCalendarDay(y));return d.isLocalizedCalendarFirstDayOfMonth(y)&&($=d.getLocalizedCalendarMonthDisplayShortName(y)),{year:d.getGregorianCalendarYear(),month:d.getGregorianCalendarMonth(),day:d.getGregorianCalendarDay(),displayDate:$}}function J(d,y){return yt(d)?y?e(d):d:""}function h(d){let y="",M={};if(Ke(d)&&Ke(d.error)){const $=u(d.error);y=$.message,M=m($.parameters)}else if(Ye(d))y=d;else return"";return e(y,M)}function O(d){if(!d||!d.length)return"";const y=e("format.misc.multiTextJoinSeparator");return d.join(y)}function fe(d){if(!d)return"";const y=ge();return Ye(d[y])?d[y]:d.default||""}function ge(){return t.value}function Se(){const d=dn(t.value);return d||dn(r())}function be(){return Se().displayName}function Ue(){return Se().textDirection==="rtl"?en.RTL:en.LTR}function $e(){return e("default.currency")}function Ne(){return e("default.firstDayOfWeek")}function xe(d){const y=[];for(const[M,$]of Wt(Vt)){const ee=$.displayName,re=s($.name);y.push({languageTag:M,displayName:re,nativeDisplayName:ee})}return y.sort(function(M,$){return M.languageTag.localeCompare($.languageTag)}),d&&y.splice(0,0,{languageTag:"",displayName:"",nativeDisplayName:e("System Default")}),y}function ze(){return[{value:!0,displayName:e("Enable")},{value:!1,displayName:e("Disable")}]}function L(){const d=[];for(const y of Mt(Gn)){const M={currencyCode:y,displayName:xn(y)};d.push(M)}return d.sort(function(y,M){return y.displayName.localeCompare(M.displayName)}),d}function oe(){const d=va.values(),y=[];for(const M of d)y.push({name:e(`datetime.${M.name}.content`),value:M.name});return y}function ce(){return K("long")}function ie(){return K("short")}function j(){return D("long")}function te(){return D("short")}function he(){return D("min")}function we(d){const y=[],M=lt.values();Ie(d)||(d=lt.DefaultFirstDay.type);for(let $=d;$<M.length;$++){const ee=M[$];y.push({type:ee.type,displayName:e(`datetime.${ee.name}.long`)})}for(let $=0;$<d;$++){const ee=M[$];y.push({type:ee.type,displayName:e(`datetime.${ee.name}.long`)})}return y}function Fe(d,y,M,$,ee,re,Ce){const Oe=g(d,y,M,fs,$,ee),Le=[],nt=p({numeralSystem:re,calendarType:Ce});Le.push({type:fs,format:Oe,displayName:`${e("Language Default")} (${gi(Oe,nt)})`});for(const st of M){const wt=e(`format.${d}.${st.key}`);Le.push({type:st.type,format:wt,displayName:gi(wt,nt)})}return Le}function ke(d,y,M){const $=[],ee=Q.values();for(const re of ee)if(re.isAvailableForScene(d)){if(re.isBillingCycle){M&&$.push({type:re.type,displayName:e(re.name),isBillingCycle:re.isBillingCycle,isUserCustomRange:re.isUserCustomRange});continue}(y||re.type!==Q.Custom.type)&&$.push({type:re.type,displayName:e(re.name),isBillingCycle:re.isBillingCycle,isUserCustomRange:re.isUserCustomRange})}return $}function se(d,y){const M=[],$=Kc(12),ee=Xa(),re=p({calendarType:ee.primaryCalendarType});d&&M.push({dateType:Q.All.type,minTime:0,maxTime:0,displayName:e("All")});for(const Ce of $)M.push({dateType:Ce.dateType,minTime:Ce.minTime,maxTime:Ce.maxTime,year:Ce.year,month:Ce.month,isPreset:!0,displayName:Qe(Ce.minTime,_(),re)});return y&&M.push({dateType:Q.Custom.type,minTime:0,maxTime:0,displayName:e("Custom Date")}),M}function ye(d){const y=La(),M=y.replaceWesternArabicDigitsToLocalizedDigits(Mc()),$=_t(),ee=[];for(const re of Ql){const Ce=re.timezoneName!==Hi.timezoneName?y.replaceWesternArabicDigitsToLocalizedDigits(ls(re.timezoneName)):"",Oe=e(`timezone.${re.displayName}`);ee.push({name:re.timezoneName,utcOffset:Ce,utcOffsetMinutes:Ct(re.timezoneName),displayName:Oe,displayNameWithUtcOffset:`(UTC${Ce}) ${Oe}`})}if(d){const re=e("System Default");ee.push({name:"",utcOffset:M,utcOffsetMinutes:$,displayName:re,displayNameWithUtcOffset:`(UTC${M}) ${re}`})}return ee.sort(function(re,Ce){const Oe=re.utcOffsetMinutes,Le=Ce.utcOffsetMinutes;return Oe!==Le?Oe-Le:re.displayName.localeCompare(Ce.displayName)}),ee}function Be(d){const M=La().replaceWesternArabicDigitsToLocalizedDigits(ls(d));return[{type:na.ApplicationTimezone.type,displayName:e(na.ApplicationTimezone.name)+` (UTC${M})`},{type:na.TransactionTimezone.type,displayName:e(na.TransactionTimezone.name)}]}function Tt(d,y){const M=Va();let $=n.currentUserFiscalYearStart;$||($=_e.Default.value);const ee=yi(M,$);let re=ft.parse(e("default.fiscalYearFormat"));re||(re=ft.Default);const Ce=[];Ce.push({type:_l,displayName:`${e("Language Default")} (${E(re,ee,d,y)})`});const Oe=ft.values();for(const Le of Oe)Ce.push({type:Le.type,displayName:E(Le,ee,d,y)});return Ce}function Te(){const d=e("default.numeralSystem");let y=ve.parse(d);y||(y=ve.Default);const M=[];M.push({type:ve.LanguageDefaultType,displayName:`${e("Language Default")} (${y.textualAllDigits})`});const $=ve.values();for(const ee of $)M.push({type:ee.type,displayName:`${e("numeral."+ee.name)} (${ee.textualAllDigits})`});return M}function Re(d,y){const M=e("default.digitGrouping");let $=Lt.parse(M);$||($=Lt.Default);const ee=[];ee.push({type:Lt.LanguageDefaultType,enabled:$.enabled,displayName:`${e("Language Default")} (${e("numeral."+$.name)})`});const re=Lt.values(),Ce=d.replaceWesternArabicDigitsToLocalizedDigits("123456789").split("");for(const Oe of re){const Le=Oe.format(Ce,y);ee.push({type:Oe.type,enabled:Oe.enabled,displayName:`${e("numeral."+Oe.name)} (${Le})`})}return ee}function tt(d){const y=[];let M="";d===pe.Expense?M=dt.DefaultExpenseColor.name:d===pe.Income&&(M=dt.DefaultIncomeColor.name),M&&(M=e("color.amount."+M)),y.push({type:dt.SystemDefaultType,displayName:e("System Default")+(M?` (${M})`:"")});const $=dt.values();for(const ee of $)y.push({type:ee.type,displayName:e("color.amount."+ee.name)});return y}function at(){const d=[],y=Ve.values();for(const M of y)d.push({type:M.type,displayName:e(M.name),defaultAccountIconId:M.defaultAccountIconId});return d}function qt(d,y){const M={},$=[];d===0?$.push(...Zl):$.push(d);for(const ee of $){const re=[];let Ce=[];ee===pe.Income?Ce=ec:ee===pe.Expense?Ce=jl:ee===pe.Transfer&&(Ce=tc);for(const Oe of Ce){const Le={name:e("category."+Oe.name,{},{locale:y}),type:ee,icon:Oe.categoryIconId,color:Oe.color,subCategories:[]};for(const nt of Oe.subCategories){const st={name:e("category."+nt.name,{},{locale:y}),type:ee,icon:nt.categoryIconId,color:nt.color};Le.subCategories.push(st)}re.push(Le)}M[ee]=re}return M}function Ls(d){const y=[];if(!d||!d.exchangeRates)return y;for(const M of d.exchangeRates)y.push({currencyCode:M.currency,currencyDisplayName:xn(M.currency),rate:M.rate});return a.appSettings.currencySortByInExchangeRatesPage===ca.Name.type?y.sort(function(M,$){return M.currencyDisplayName.localeCompare($.currencyDisplayName)}):a.appSettings.currencySortByInExchangeRatesPage===ca.CurrencyCode.type?y.sort(function(M,$){return M.currencyCode.localeCompare($.currencyCode)}):a.appSettings.currencySortByInExchangeRatesPage===ca.ExchangeRate.type&&y.sort(function(M,$){const ee=parseFloat(M.rate),re=parseFloat($.rate);return ee>re?1:ee<re?-1:0}),y}function xr(){const d=[];for(const y of mc){const M={displayCategoryName:e(y.categoryName),fileTypes:[]};for(const $ of y.fileTypes){let ee;if($.document){let Le="",nt="",st="";$.document.supportMultiLanguages===!0?(Le=ge(),Ps[Le]===Le?st=e(`document.anchor.export_and_import.${$.document.anchor}`):Ps[Le]?(Le=Ps[Le],st=e(`document.anchor.export_and_import.${$.document.anchor}`,{},{locale:Le})):(Le=Ji,st=e(`document.anchor.export_and_import.${$.document.anchor}`,{},{locale:Le}))):Ye($.document.supportMultiLanguages)&&Vt[$.document.supportMultiLanguages]&&(Le=$.document.supportMultiLanguages,st=$.document.anchor),Le&&Le!==ge()&&Vt[Le]&&(nt=s(Vt[Le].name)),Le&&(Le=Le.replace(/-/g,"_")),st&&(st=st.toLowerCase().replace(/ /g,"-")),Le===pn&&(Le=""),ee={language:Le,displayLanguageName:nt,anchor:st}}else ee=void 0;const re=[];if($.subTypes)for(const Le of $.subTypes){const nt={type:Le.type,displayName:e(Le.name),extensions:Le.extensions};re.push(nt)}const Ce=[];if($.supportedEncodings)for(const Le of $.supportedEncodings){const nt={encoding:Le,displayName:e(`encoding.${Le}`)};Ce.push(nt)}const Oe={type:$.type,displayName:e($.name),extensions:$.extensions,subTypes:re.length?re:void 0,supportedEncodings:Ce.length?Ce:void 0,dataFromTextbox:$.dataFromTextbox,document:ee};M.fileTypes.push(Oe)}d.push(M)}return d}function dn(d){return Vt[d]}function Er(d){return e(`datetime.${d}.short`)}function kr(d){return e(`datetime.${d}.long`)}function Zn(d){return e(`datetime.monthDayOrdinal.${d}`)}function Ur(d){return e("format.misc.monthDay",{ordinal:Zn(d)})}function Or(d){return e(`datetime.${d.name}.short`)}function Fr(d){return e(`datetime.${d.name}.long`)}function Pr(d){return d?d.length===1?e("format.misc.monthDay",{ordinal:Zn(d[0])}):e("format.misc.monthDays",{multiMonthDays:O(d.map(y=>e("format.misc.eachMonthDayInMonthDays",{ordinal:Zn(y)})))}):""}function Br(d,y){const M={};Ie(y)||(y=lt.DefaultFirstDay.type);for(const re of d)M[re]=!0;const $=we(y),ee=[];for(const re of $)M[re.type]&&ee.push(re.displayName);return O(ee)}function Rr(){return La().getAllDigits()}function Po(){const d=e("default.calendarDisplayType");let y=Ot.parse(d);return y||(y=Ot.Default),y}function Bo(){const d=e("default.dateDisplayType");let y=Ft.parse(d);return y||(y=Ft.Default),y}function Ro(){const d=e("default.numeralSystem");let y=ve.parse(d);return y||(y=ve.Default),y}function Yo(){const d=e("default.decimalSeparator");let y=Je.parse(d);return y||(y=Je.Default),y}function zo(){const d=e("default.digitGroupingSymbol");let y=et.parse(d);return y||(y=et.Default),y}function Ko(){const d=e("default.digitGrouping");let y=Lt.parse(d);return y||(y=Lt.Default),y}function Go(){const d=e("default.fiscalYearFormat");let y=ft.parse(d);return y||(y=ft.Default),y}function Xa(){return Ot.valueOf(n.currentUserCalendarDisplayType)??Po()}function Ns(){return Ft.valueOf(n.currentUserDateDisplayType)??Bo()}function La(){return ve.valueOf(n.currentUserNumeralSystem)??Ro()}function $o(){return Je.valueOf(n.currentUserDecimalSeparator)?.symbol??Yo().symbol}function Wo(){return et.valueOf(n.currentUserDigitGroupingSymbol)?.symbol??zo().symbol}function Ho(){return Lt.valueOf(n.currentUserDigitGrouping)??Ko()}function ws(){return ft.valueOf(n.currentUserFiscalYearFormat)?.type??Go().type}function xn(d){return d?e(`currency.name.${d}`):""}function Yr(){return Y(je.all(),je.values(),n.currentUserLongDateFormat,"longDateFormat",je.Default).isMonthAfterYear}function zr(){return Y(We.all(),We.values(),n.currentUserShortDateFormat,"shortDateFormat",We.Default).isMonthAfterYear}function Kr(){return Y(gt.all(),gt.values(),n.currentUserLongTimeFormat,"longTimeFormat",gt.Default).is24HourFormat}function Gr(){return Y(gt.all(),gt.values(),n.currentUserLongTimeFormat,"longTimeFormat",gt.Default).isMeridiemIndicatorFirst||!1}function $r(){return Y(pt.all(),pt.values(),n.currentUserShortTimeFormat,"shortTimeFormat",pt.Default).is24HourFormat}function Wr(){return Y(pt.all(),pt.values(),n.currentUserShortTimeFormat,"shortTimeFormat",pt.Default).isMeridiemIndicatorFirst||!1}function Hr(){const d=ae();return d.indexOf("HH")>=0||d.indexOf("hh")>=0}function Vr(){return ae().indexOf("mm")>=0}function Jr(){return ae().indexOf("ss")>=0}function Vo(d,y){const M=C();return Nc(d,de(),p({calendarType:M,numeralSystem:y}))}function _r(d){const y=C(),M=p({calendarType:y}),$=St(d),ee=$.getLocalizedCalendarYear(M),re=$.getLocalizedCalendarQuarter(M);return S(ee,re)}function Zr(d,y){const M=C(),$=p({calendarType:M}),re=jt(d,1,1).getLocalizedCalendarYear($);return S(re,y)}function qr(d){let y=ft.valueOf(ws());y||(y=ft.Default);const M=yi(d,n.currentUserFiscalYearStart);return E(y,M)}function Xr(d){let y=ft.valueOf(ws());y||(y=ft.Default);const M=$c(d,n.currentUserFiscalYearStart);return E(y,M)}function Qr(d,y){let M=_e.valueOf(d);return M||(M=_e.Default),Vo(M.toMonthDashDayString(),y)}function jr(d,y,M){if(d===Q.All.type)return e(Q.All.name);const $=Q.values(),ee=C(),re=p(),Ce=p({calendarType:ee});for(const ot of $)if(ot&&ot.type!==Q.Custom.type&&ot.type===d&&ot.name)return e(ot.name);if(Gc(y,M)){const ot=H(),Da=Qe(y,ot,Ce),Yt=Qe(M,ot,Ce);return Da!==Yt?`${Da} ~ ${Yt}`:Da}if(fr(y,M)){const ot=Ae(),Da=Qe(y,ot,Ce),Yt=Qe(M,ot,Ce);return Da!==Yt?`${Da} ~ ${Yt}`:Da}const Oe=St(y).getLocalizedCalendarYear(Ce),Le=St(M).getLocalizedCalendarYear(Ce),nt=w(),st=Qe(y,nt,re),wt=Qe(M,nt,re);if(st===wt)return st;if(Oe===Le){const ot=Qe(M,X(),Ce);return`${st} ~ ${ot}`}return`${st} ~ ${wt}`}function el(d){const y=La(),M=Ct(),$=wc(d-M);return d>M?$.offsetMinutes?e("format.misc.hoursMinutesAheadOfDefaultTimezone",{hours:y.formatNumber($.offsetHours),minutes:y.formatNumber($.offsetMinutes)}):e("format.misc.hoursAheadOfDefaultTimezone",{hours:y.formatNumber($.offsetHours)}):d<M?$.offsetMinutes?e("format.misc.hoursMinutesBehindDefaultTimezone",{hours:y.formatNumber($.offsetHours),minutes:y.formatNumber($.offsetMinutes)}):e("format.misc.hoursBehindDefaultTimezone",{hours:y.formatNumber($.offsetHours)}):e("Same time as default timezone")}function tl(d){const y=Xa().secondaryCalendarType;if(!y)return;const M=p({calendarType:y});if(y===bt.Chinese){const $=v(),ee=Cc(d,$);if(!ee)return;const re=[];for(const Ce of ee){const Oe=ci(Ce);re.push(Oe)}return re}else if(y===bt.Persian){const $=or(d),ee=[];for(let re=1;re<=$;re++){const Ce=jt(d.year,d.month1base,re);ee.push(V(Ce,M))}return ee}}function al(d){const y=Xa().secondaryCalendarType;if(!y)return;const M=p({calendarType:y});if(y===bt.Chinese){const $=v(),ee=tr(d,$);return ee?ci(ee):void 0}else if(y===bt.Persian){const $=jt(d.year,d.month,d.day);return V($,M)}}function Jo(d,y){const M=G({numeralSystem:y});return Hc(d,M)}function qn(d,y,M,$){const ee=G({numeralSystem:y,digitGrouping:M,currencyCode:$});return hi(d,ee)}function Qa(d,y,M,$,ee){let re="";!Cn(y)&&!y?re=n.currentUserDefaultCurrency:Cn(y)&&!y?re="":re=y,M||(M=W()),$||($=La());let Ce="";Ke(d)&&Ie(d.value)&&Ye(d.suffix)&&(Ce=d.suffix,d=d.value);const Oe=G({numeralSystem:$,decimalSeparator:ee,currencyCode:re}),Le=xn(re);if(Ie(d)){const nt=d!==100&&d!==-100,st=hi(d,Oe);if(!re)return st;const wt=f(re,nt),ot=vi(st,M,re,wt,Le,nt);return Ce?ot+Ce:ot}else if(Ye(d)){const st=Vc(d,Oe);if(!re)return st;const wt=f(re,!0);return vi(st,M,re,wt,Le,!0)}else return""}function _o(d,y,M){const $=G({numeralSystem:y,digitGrouping:Lt.None});return yr(d,$,M)}function Zo(d,y,M,$){const ee=G({numeralSystem:$});return Jc(d,y,M,ee)}function nl(d,y){const M=G({numeralSystem:y});return ao(d,M)}function sl(d,y,M,$){const ee=G({});return _c(d,y,ee,M,$)}function ol(d,y){const M=W(),$=f(d,y),ee=xn(d);return Tr(M,d,$,ee,y)}function il(d,y){const M=[],$=n.currentUserDefaultCurrency,ee=Ve.values(),re=As(ht.cloneAccounts(d));for(const Ce of ee){const Oe=re[Ce.type];if(!Oe)continue;const Le=[];if(Oe.accounts)for(const wt of Oe.accounts){let ot;y&&wt.isAsset?ot=zn.fromAccount(wt,Qa(wt.balance,wt.currency)):y&&wt.isLiability?ot=zn.fromAccount(wt,Qa(-wt.balance,wt.currency)):ot=zn.fromAccount(wt,Jt),Le.push(ot)}let nt="";if(y){const wt=Bn(re,Yt=>Yt.category===Oe.category);let ot=0,Da=!1;for(const Yt of wt)if(Yt.currency===$)Yt.isAsset?ot+=Yt.balance:Yt.isLiability&&(ot-=Yt.balance);else{const Es=o.getExchangedAmount(Yt.balance,Yt.currency,$);if(!Ie(Es)){Da=!0;continue}Yt.isAsset?ot+=Math.trunc(Es):Yt.isLiability&&(ot-=Math.trunc(Es))}nt=Qa(ot,$),Da&&(nt=nt+xa)}else nt=Jt;const st=Co.of(Oe,Le,nt);M.push(st)}return M}function rl(d,y){if(d==="oidc"){const M=fe(y);return M||"Connect ID"}else{const M=ri[d];return M||"OAuth 2.0"}}function ll(d,y){if(d==="oidc"){const M=fe(y);return M?e("format.misc.loginWithCustomProvider",{name:M}):e("Log in with Connect ID")}else{const M=ri[d];return M?e("format.misc.loginWithCustomProvider",{name:M}):e("Log in with OAuth 2.0")}}function Xn(d,y){d||(d=r(),Z.info(`No specified language, use browser default language ${d}`));const M=dn(d);if(M||(d=r(),Z.warn(`Not found language ${d}, use browser default language ${d}`)),!y&&t.value===d)return Z.info(`Current locale is already ${d}`),null;if(Z.info(`Apply current language to ${d}`),t.value=d,De.updateLocale(d,{months:ce(),monthsShort:ie(),weekdays:j(),weekdaysShort:te(),weekdaysMin:he(),meridiem:function(Oe){return nr(Oe)?e(`datetime.${va.PM.name}.content`):e(`datetime.${va.AM.name}.content`)}}),Pl(d),ne.setLocale(d),document.querySelector("html")?.setAttribute("lang",d),document.querySelector("html")?.getAttribute("data-dir-mode")==="static"){if(M&&M.textDirection===en.LTR){if(location.search.includes("rtl")){const Oe=new URL(window.location.href);Oe.search="",Oe.hash="#/",window.location.replace(Oe.toString())}}else if(M&&M.textDirection===en.RTL&&!location.search.includes("rtl")){const Oe=new URL(window.location.href);Oe.searchParams.set("rtl",""),Oe.hash="#/",window.location.replace(Oe.toString())}}else M&&M.textDirection===en.LTR?document.querySelector("html")?.removeAttribute("dir"):M&&M.textDirection===en.RTL&&document.querySelector("html")?.setAttribute("dir","rtl");const $=$e(),ee=Ne();let re=lt.DefaultFirstDay.type;return lt.parse(ee)&&(re=lt.parse(ee).type),{currency:$,firstDayOfWeek:re}}function xs(d){let y=_t();d&&(y=Ct(d)),De.tz.add(De.tz.pack({name:"Fixed/Timezone",abbrs:["FIX"],offsets:[-y],untils:[0]})),De.tz.setDefault("Fixed/Timezone")}function cl(d,y){const M=Fl();let $=null;return d&&dn(d)?(Z.info(`Last user language is ${d}`),$=Xn(d,!0)):M&&dn(M)?(Z.info(`Session language is ${M}`),$=Xn(M,!0)):$=Xn(null,!0),y?(Z.info(`Current timezone is ${y}`),xs(y)):(Z.info(`No timezone is set, use browser default ${ls()} (maybe ${De.tz.guess(!0)})`),xs("")),$}return{tt:e,ti:J,te:h,joinMultiText:O,getServerMultiLanguageConfigContent:fe,getCurrentLanguageTag:ge,getCurrentLanguageInfo:Se,getCurrentLanguageDisplayName:be,getCurrentLanguageTextDirection:Ue,getDefaultCurrency:$e,getDefaultFirstDayOfWeek:Ne,getAllLanguageOptions:xe,getAllEnableDisableOptions:ze,getAllCurrencies:L,getAllMeridiemIndicators:oe,getAllLongMonthNames:ce,getAllShortMonthNames:ie,getAllLongWeekdayNames:j,getAllShortWeekdayNames:te,getAllMinWeekdayNames:he,getAllWeekDays:we,getAllCalendarDisplayTypes:()=>U(Ot.values(),Ot.parse(e("default.calendarDisplayType")),Ot.Default,Ot.LanguageDefaultType),getAllDateDisplayTypes:()=>U(Ft.values(),Ft.parse(e("default.dateDisplayType")),Ft.Default,Ft.LanguageDefaultType),getAllLongDateFormats:(d,y)=>Fe("longDate",je.all(),je.values(),"longDateFormat",je.Default,d,y),getAllShortDateFormats:(d,y)=>Fe("shortDate",We.all(),We.values(),"shortDateFormat",We.Default,d,y),getAllLongTimeFormats:d=>Fe("longTime",gt.all(),gt.values(),"longTimeFormat",gt.Default,d),getAllShortTimeFormats:d=>Fe("shortTime",pt.all(),pt.values(),"shortTimeFormat",pt.Default,d),getAllFiscalYearFormats:Tt,getAllDateRanges:ke,getAllRecentMonthDateRanges:se,getAllTimezones:ye,getAllTimezoneTypesUsedForStatistics:Be,getAllNumeralSystemTypes:Te,getAllDecimalSeparators:()=>B(Je.values(),Je.parse(e("default.decimalSeparator")),Je.Default,Je.LanguageDefaultType),getAllDigitGroupingSymbols:()=>B(et.values(),et.parse(e("default.digitGroupingSymbol")),et.Default,et.LanguageDefaultType),getAllDigitGroupingTypes:Re,getAllCurrencyDisplayTypes:k,getAllCurrencySortingTypes:()=>R(ca.values()),getAllCoordinateDisplayTypes:()=>x(Bt.values(),Bt.SystemDefaultType,Bt.Default),getAllExpenseAmountColors:()=>tt(pe.Expense),getAllIncomeAmountColors:()=>tt(pe.Income),getAllAccountCategories:at,getAllAccountTypes:()=>R(Me.values()),getAllCategoricalChartTypes:d=>R(Gt.values(!!d)),getAllTrendChartTypes:()=>R(It.values()),getAllAccountBalanceTrendChartTypes:()=>R(tn.values()),getAllStatisticsChartDataTypes:(d,y)=>R(z.values(d,y)),getAllStatisticsSortingTypes:()=>R(Rt.values()),getAllStatisticsDateAggregationTypes:d=>N(d,!0),getAllStatisticsDateAggregationTypesWithShortName:d=>N(d,!1),getAllTransactionEditScopeTypes:()=>R(ra.values()),getAllTransactionTagFilterTypes:()=>R(Zt.values()),getAllTransactionScheduledFrequencyTypes:()=>R(Na.values()),getAllImportTransactionColumnTypes:()=>R(rt.values()),getAllTransactionDefaultCategories:qt,getAllDisplayExchangeRates:Ls,getAllSupportedImportFileCagtegoryAndTypes:xr,getLanguageInfo:dn,getMonthShortName:Er,getMonthLongName:kr,getMonthdayOrdinal:Zn,getMonthdayShortName:Ur,getWeekdayShortName:Or,getWeekdayLongName:Fr,getMultiMonthdayShortNames:Pr,getMultiWeekdayLongNames:Br,getAllLocalizedDigits:Rr,getLocaleDefaultCalendarDisplayType:Po,getLocaleDefaultDateDisplayType:Bo,getLocaleDefaultNumeralSystemType:Ro,getLocaleDefaultDecimalSeparator:Yo,getLocaleDefaultDigitGroupingSymbol:zo,getLocaleDefaultDigitGroupingType:Ko,getLocaleFiscalYearFormatType:Go,getCurrentCalendarDisplayType:Xa,getCurrentDateDisplayType:Ns,getCurrentNumeralSystemType:La,getCurrentDecimalSeparator:$o,getCurrentDigitGroupingSymbol:Wo,getCurrentDigitGroupingType:Ho,getCurrentFiscalYearFormatType:ws,getCurrencyName:xn,isLongDateMonthAfterYear:Yr,isShortDateMonthAfterYear:zr,isLongTime24HourFormat:Kr,isLongTimeMeridiemIndicatorFirst:Gr,isShortTime24HourFormat:$r,isShortTimeMeridiemIndicatorFirst:Wr,isLongTimeHourTwoDigits:Hr,isLongTimeMinuteTwoDigits:Vr,isLongTimeSecondTwoDigits:Jr,getCalendarDisplayShortYearFromUnixTime:(d,y,M,$)=>Qe(d,H(),p({calendarType:Xa().primaryCalendarType,numeralSystem:y}),M,$),getCalendarDisplayShortMonthFromUnixTime:(d,y,M,$)=>Qe(d,"MMM",p({calendarType:Xa().primaryCalendarType,numeralSystem:y}),M,$),getCalendarDisplayDayOfMonthFromUnixTime:(d,y,M,$)=>Qe(d,me(),p({calendarType:Xa().primaryCalendarType,numeralSystem:y}),M,$),parseDateTimeFromLongDateTime:d=>fi(d,A()+" "+ae()),parseDateTimeFromShortDateTime:d=>fi(d,w()+" "+T()),formatUnixTimeToLongDateTime:(d,y,M)=>Qe(d,A()+" "+ae(),p(),y,M),formatUnixTimeToShortDateTime:(d,y,M)=>Qe(d,w()+" "+T(),p(),y,M),formatUnixTimeToLongDate:(d,y,M)=>Qe(d,A(),p(),y,M),formatUnixTimeToShortDate:(d,y,M)=>Qe(d,w(),p(),y,M),formatUnixTimeToLongMonthDay:(d,y,M)=>Qe(d,de(),p(),y,M),formatUnixTimeToShortMonthDay:(d,y,M)=>Qe(d,X(),p(),y,M),formatUnixTimeToLongTime:(d,y,M)=>Qe(d,ae(),p(),y,M),formatUnixTimeToShortTime:(d,y,M)=>Qe(d,T(),p(),y,M),formatGregorianTextualYearMonthDayToLongDate:d=>Lc(d,A(),p()),formatUnixTimeToGregorianLikeLongYear:(d,y,M)=>Qe(d,P(),p({calendarType:C()}),y,M),formatUnixTimeToGregorianLikeShortYear:(d,y,M)=>Qe(d,H(),p({calendarType:C()}),y,M),formatUnixTimeToGregorianLikeLongYearMonth:(d,y,M)=>Qe(d,_(),p({calendarType:C()}),y,M),formatUnixTimeToGregorianLikeShortYearMonth:(d,y,M)=>Qe(d,Ae(),p({calendarType:C()}),y,M),formatUnixTimeToGregorianLikeLongMonth:(d,y,M)=>Qe(d,"MMMM",p({calendarType:C()}),y,M),formatUnixTimeToGregorianLikeShortMonth:(d,y,M)=>Qe(d,"MMM",p({calendarType:C()}),y,M),formatGregorianTextualMonthDayToGregorianLikeLongMonthDay:Vo,formatUnixTimeToGregorianLikeYearQuarter:_r,formatYearQuarterToGregorianLikeYearQuarter:Zr,formatUnixTimeToGregorianLikeFiscalYear:qr,formatGregorianYearToGregorianLikeFiscalYear:Xr,formatFiscalYearStartToGregorianLikeLongMonth:Qr,formatUnixTimeToGregorianDefaultDateTime:(d,y,M)=>Qe(d,kt.DefaultDateTime.format,p({numeralSystem:ve.WesternArabicNumerals,calendarType:bt.Gregorian}),y,M),formatDateRange:jr,getTimezoneDifferenceDisplayText:el,getCalendarAlternateDates:tl,getCalendarAlternateDate:al,parseAmountFromLocalizedNumerals:d=>Jo(d),parseAmountFromWesternArabicNumerals:d=>Jo(d,ve.WesternArabicNumerals),formatAmountToLocalizedNumerals:(d,y)=>qn(d,void 0,void 0,y),formatAmountToWesternArabicNumerals:(d,y)=>qn(d,ve.WesternArabicNumerals,void 0,y),formatAmountToLocalizedNumeralsWithoutDigitGrouping:(d,y)=>qn(d,void 0,Lt.None,y),formatAmountToWesternArabicNumeralsWithoutDigitGrouping:(d,y)=>qn(d,ve.WesternArabicNumerals,Lt.None,y),formatAmountToLocalizedNumeralsWithCurrency:(d,y,M)=>Qa(d,y,M),formatAmountToWesternArabicNumeralsWithCurrency:(d,y,M)=>Qa(d,y,M,ve.WesternArabicNumerals),formatNumberToLocalizedNumerals:(d,y)=>_o(d,void 0,y),formatNumberToWesternArabicNumerals:(d,y)=>_o(d,ve.WesternArabicNumerals,y),formatPercentToLocalizedNumerals:(d,y,M)=>Zo(d,y,M),formatPercentToWesternArabicNumerals:(d,y,M)=>Zo(d,y,M,ve.WesternArabicNumerals),formatExchangeRateAmountToWesternArabicNumerals:d=>nl(d,ve.WesternArabicNumerals),appendDigitGroupingSymbolAndDecimalSeparator:d=>Ln(d,G({})),getAdaptiveAmountRate:sl,getAmountPrependAndAppendText:ol,getCategorizedAccountsWithDisplayBalance:il,getLocalizedOAuth2ProviderName:rl,getLocalizedOAuth2LoginText:ll,setLanguage:Xn,setTimeZone:xs,initLocale:cl}}const sa=Ht("accounts",()=>{const e=mt(),t=Nt(),a=da(),n=q([]),o=q({}),s=q({}),r=q(!0),l=c(()=>{const S=[];for(const E of n.value)if(E.type===Me.SingleAccount.type)S.push(E);else if(E.type===Me.MultiSubAccounts.type&&E.subAccounts)for(const W of E.subAccounts)S.push(W);return ht.sortAccounts(S,o.value)}),i=c(()=>{const S=[];for(const E of n.value)if(E.type===Me.SingleAccount.type)S.push(E);else if(E.type===Me.MultiSubAccounts.type&&(S.push(E),E.subAccounts))for(const W of E.subAccounts)S.push(W);return ht.sortAccounts(S,o.value)}),u=c(()=>{const S=[];for(const E of n.value)if(!E.hidden){if(E.type===Me.SingleAccount.type)S.push(E);else if(E.type===Me.MultiSubAccounts.type&&E.subAccounts)for(const W of E.subAccounts)W.hidden||S.push(W)}return ht.sortAccounts(S,o.value)}),m=c(()=>{let S=0;for(const E of Dt(s.value))S+=E.accounts.length;return S}),b=c(()=>{let S=0;for(const E of Dt(s.value)){const W=E.accounts;for(const V of W)V.hidden||S++}return S});function v(S){n.value=S,o.value={};for(const E of S)if(o.value[E.id]=E,E.subAccounts)for(const W of E.subAccounts)o.value[W.id]=W;s.value=As(S)}function I(S){const E=Ve.valueOf(S.category);let W=n.value.length;if(E)for(const[V,J]of Ze(n.value)){const h=Ve.valueOf(V.category);if(h&&h.displayOrder>E.displayOrder){W=J;break}}if(n.value.splice(W,0,S),o.value[S.id]=S,S.subAccounts)for(const V of S.subAccounts)o.value[V.id]=V;s.value[S.category]?s.value[S.category].accounts.push(S):s.value=As(n.value)}function k(S,E){for(const[W,V]of Ze(n.value))if(W.id===E.id){n.value.splice(V,1,E);break}if(S.subAccounts)for(const W of S.subAccounts)o.value[W.id]&&delete o.value[W.id];if(o.value[E.id]=E,E.subAccounts)for(const W of E.subAccounts)o.value[W.id]=W;if(s.value[E.category]){const W=s.value[E.category].accounts;for(const[V,J]of Ze(W))if(V.id===E.id){W.splice(J,1,E);break}}}function U({account:S,from:E,to:W,updateListOrder:V,updateGlobalListOrder:J}){let h=null,O=null;if(s.value[S.category]){const fe=s.value[S.category].accounts;V?(h=fe[E],O=fe[W],fe.splice(W,0,fe.splice(E,1)[0])):(h=fe[W],E<W?O=fe[W-1]:E>W&&(O=fe[W+1]))}if(J&&h&&O){let fe=-1,ge=-1;for(const[Se,be]of Ze(n.value))Se.id===h.id?fe=be:Se.id===O.id&&(ge=be);fe>=0&&ge>=0&&n.value.splice(ge,0,n.value.splice(fe,1)[0])}}function R({account:S,hidden:E}){o.value[S.id]&&(o.value[S.id].visible=!E)}function x(S){for(const[E,W]of Ze(n.value))if(E.id===S.id){n.value.splice(W,1);break}if(o.value[S.id]&&o.value[S.id].subAccounts){const E=o.value[S.id].subAccounts;for(const W of E)o.value[W.id]&&delete o.value[W.id]}if(o.value[S.id]&&delete o.value[S.id],s.value[S.category]){const E=s.value[S.category].accounts;for(const[W,V]of Ze(E))if(W.id===S.id){E.splice(V,1);break}}}function B(S){for(const E of n.value){if(E.type!==Me.MultiSubAccounts.type||!E.subAccounts)continue;const W=E.subAccounts;for(const[V,J]of Ze(W))if(V.id===S.id){W.splice(J,1);break}}if(o.value[S.id]&&delete o.value[S.id],s.value[S.category]){const E=s.value[S.category].accounts;for(const W of E){if(W.type!==Me.MultiSubAccounts.type||!W.subAccounts)continue;const V=W.subAccounts;for(const[J,h]of Ze(V))if(J.id===S.id){V.splice(h,1);break}}}}function N(S){r.value=S}function K(){n.value=[],o.value={},s.value={},r.value=!0}function D(S){const E={accounts:{},subAccounts:{}};for(const[W,V]of Wt(s.value)){if(!V||!V.accounts)continue;const J=V.accounts;for(const h of J){if(h.type===Me.MultiSubAccounts.type&&h.subAccounts){for(const O of h.subAccounts)if(S||!O.hidden){E.subAccounts[h.id]=O.id;break}}if(S||!h.hidden){E.accounts[parseInt(W)]=h.id;break}}}return E}function Y(S){const E={accounts:{},subAccounts:{}};for(const[W,V]of Wt(s.value)){if(!V||!V.accounts)continue;const J=V.accounts;for(const h of Kn(J)){if(h.type===Me.MultiSubAccounts.type&&h.subAccounts){for(const O of Kn(h.subAccounts))if(S||!O.hidden){E.subAccounts[h.id]=O.id;break}}if(S||!h.hidden){E.accounts[parseInt(W)]=h.id;break}}}return E}function g(S){if(!S)return null;const E=S.split(",");let W=null;for(const V of E){let J=o.value[V];if(!J||(J.parentId!=="0"&&(J=o.value[J.parentId]),!J))return null;if(W){if(W.id!==J.id)return null;continue}W=J}return W&&W.category===Ve.CreditCard.type?W.creditCardStatementDate:null}function A(S){if(!S)return Jt;const E=Bn(s.value,J=>!(J.type===Me.SingleAccount.type&&e.appSettings.totalAmountExcludeAccountIds[J.id]));let W=0,V=!1;for(const J of E)if(J.currency===t.currentUserDefaultCurrency)W+=J.balance;else{const h=a.getExchangedAmount(J.balance,J.currency,t.currentUserDefaultCurrency);if(!Ie(h)){V=!0;continue}W+=Math.trunc(h)}return V?{value:W,suffix:xa}:W}function w(S){if(!S)return Jt;const E=Bn(s.value,J=>(J.isAsset||!1)&&!(J.type===Me.SingleAccount.type&&e.appSettings.totalAmountExcludeAccountIds[J.id]));let W=0,V=!1;for(const J of E)if(J.currency===t.currentUserDefaultCurrency)W+=J.balance;else{const h=a.getExchangedAmount(J.balance,J.currency,t.currentUserDefaultCurrency);if(!Ie(h)){V=!0;continue}W+=Math.trunc(h)}return V?{value:W,suffix:xa}:W}function P(S){if(!S)return Jt;const E=Bn(s.value,J=>(J.isLiability||!1)&&!(J.type===Me.SingleAccount.type&&e.appSettings.totalAmountExcludeAccountIds[J.id]));let W=0,V=!1;for(const J of E)if(J.currency===t.currentUserDefaultCurrency)W-=J.balance;else{const h=a.getExchangedAmount(J.balance,J.currency,t.currentUserDefaultCurrency);if(!Ie(h)){V=!0;continue}W-=Math.trunc(h)}return V?{value:W,suffix:xa}:W}function H(S,E){if(!S)return Jt;const W=Bn(s.value,h=>h.category===E.type);let V=0,J=!1;for(const h of W)if(h.currency===t.currentUserDefaultCurrency)h.isAsset?V+=h.balance:h.isLiability?V-=h.balance:V+=h.balance;else{const O=a.getExchangedAmount(h.balance,h.currency,t.currentUserDefaultCurrency);if(!Ie(O)){J=!0;continue}h.isAsset?V+=Math.trunc(O):h.isLiability?V-=Math.trunc(O):V+=Math.trunc(O)}return J?{value:V,suffix:xa}:V}function _(S,E){return E.type!==Me.SingleAccount.type?null:S?E.isAsset?E.balance:E.isLiability?-E.balance:E.balance:Jt}function Ae(S,E,W,V){if(W.type!==Me.MultiSubAccounts.type)return null;let J=t.currentUserDefaultCurrency;if(!W.subAccounts||!W.subAccounts.length)return{balance:S?0:Jt,currency:J};const h={},O=[];let fe=0;for(const be of W.subAccounts)!E&&be.hidden||h[be.currency]||(h[be.currency]=!0,O.push(be.currency));if(O.length===0)return{balance:S?0:Jt,currency:J};O.length===1&&(J=O[0]);let ge=!1;for(const be of W.subAccounts)if(!(!E&&be.hidden)){if(V&&V===be.id)return{balance:S?_(S,be):Jt,currency:be.currency};if(be.currency===J)be.isAsset?fe+=be.balance:be.isLiability?fe-=be.balance:fe+=be.balance;else{const Ue=a.getExchangedAmount(be.balance,be.currency,J);if(!Ie(Ue)){ge=!0;continue}be.isAsset?fe+=Math.trunc(Ue):be.isLiability?fe-=Math.trunc(Ue):fe+=Math.trunc(Ue)}}return V?null:{balance:S?{value:fe,suffix:ge?xa:""}:Jt,currency:J}}function de(S,E){const W=s.value[S.type];if(!W||!W.accounts||!W.accounts.length)return!1;let V=0;for(const J of W.accounts)(!E||!J.hidden)&&V++;return V>0}function X(S,E){if(!E||E.type!==Me.MultiSubAccounts.type||!E.subAccounts)return!1;for(const W of E.subAccounts)if(S||!W.hidden)return!0;return!1}function me({force:S}){return!S&&!r.value?new Promise(E=>{E(n.value)}):new Promise((E,W)=>{ne.getAllAccounts({visibleOnly:!1}).then(V=>{const J=V.data;if(!J||!J.success||!J.result){W({message:"Unable to retrieve account list"});return}r.value&&N(!1);const h=ht.sortAccounts(ht.ofMulti(J.result));if(S&&J.result&&ta(n.value,h)){W({message:"Account list is up to date",isUpToDate:!0});return}v(h),E(h)}).catch(V=>{S?Z.error("failed to force load account list",V):Z.error("failed to load account list",V),V.response&&V.response.data&&V.response.data.errorMessage?W({error:V.response.data}):V.processed?W(V):W({message:"Unable to retrieve account list"})})})}function ae({accountId:S}){return new Promise((E,W)=>{ne.getAccount({id:S}).then(V=>{const J=V.data;if(!J||!J.success||!J.result){W({message:"Unable to retrieve account"});return}const h=ht.of(J.result);E(h)}).catch(V=>{Z.error("failed to load account info",V),V.response&&V.response.data&&V.response.data.errorMessage?W({error:V.response.data}):V.processed?W(V):W({message:"Unable to retrieve account"})})})}function T({account:S,subAccounts:E,isEdit:W,clientSessionId:V}){return new Promise((J,h)=>{const O=W?o.value[S.id]:null;let fe=null;W?fe=ne.modifyAccount(S.toModifyRequest(V,E)):fe=ne.addAccount(S.toCreateRequest(V,E)),fe.then(ge=>{const Se=ge.data;if(!Se||!Se.success||!Se.result){h(W?{message:"Unable to save account"}:{message:"Unable to add account"});return}const be=ht.of(Se.result);W?O&&O.category===be.category?k(O,be):N(!0):I(be),J(be)}).catch(ge=>{Z.error("failed to save account",ge),ge.response&&ge.response.data&&ge.response.data.errorMessage?h({error:ge.response.data}):ge.processed?h(ge):h(W?{message:"Unable to save account"}:{message:"Unable to add account"})})})}function p({accountId:S,from:E,to:W,updateListOrder:V,updateGlobalListOrder:J}){const h=o.value[S];return new Promise((O,fe)=>{if(!h||!s.value[h.category]||!s.value[h.category].accounts||!s.value[h.category].accounts[W]){fe({message:"Unable to move account"});return}r.value||N(!0),U({account:h,from:E,to:W,updateListOrder:V,updateGlobalListOrder:J}),O()})}function G(){const S=[];for(const E of Dt(s.value))for(const[W,V]of Ze(E.accounts))S.push({id:W.id,displayOrder:V+1});return new Promise((E,W)=>{ne.moveAccount({newDisplayOrders:S}).then(V=>{const J=V.data;if(!J||!J.success||!J.result){W({message:"Unable to move account"});return}r.value&&N(!1),E(J.result)}).catch(V=>{Z.error("failed to save accounts display order",V),V.response&&V.response.data&&V.response.data.errorMessage?W({error:V.response.data}):V.processed?W(V):W({message:"Unable to move account"})})})}function f({account:S,hidden:E}){return new Promise((W,V)=>{ne.hideAccount({id:S.id,hidden:E}).then(J=>{const h=J.data;if(!h||!h.success||!h.result){V(E?{message:"Unable to hide this account"}:{message:"Unable to unhide this account"});return}R({account:S,hidden:E}),W(h.result)}).catch(J=>{Z.error("failed to change account visibility",J),J.response&&J.response.data&&J.response.data.errorMessage?V({error:J.response.data}):J.processed?V(J):V(E?{message:"Unable to hide this account"}:{message:"Unable to unhide this account"})})})}function F({account:S,beforeResolve:E}){return new Promise((W,V)=>{ne.deleteAccount({id:S.id}).then(J=>{const h=J.data;if(!h||!h.success||!h.result){V({message:"Unable to delete this account"});return}E?E(()=>{x(S)}):x(S),W(h.result)}).catch(J=>{Z.error("failed to delete account",J),J.response&&J.response.data&&J.response.data.errorMessage?V({error:J.response.data}):J.processed?V(J):V({message:"Unable to delete this account"})})})}function C({subAccount:S,beforeResolve:E}){return new Promise((W,V)=>{ne.deleteSubAccount({id:S.id}).then(J=>{const h=J.data;if(!h||!h.success||!h.result){V({message:"Unable to delete this sub-account"});return}E?E(()=>{B(S)}):B(S),W(h.result)}).catch(J=>{Z.error("failed to delete sub-account",J),J.response&&J.response.data&&J.response.data.errorMessage?V({error:J.response.data}):J.processed?V(J):V({message:"Unable to delete this sub-account"})})})}return{allAccounts:n,allAccountsMap:o,allCategorizedAccountsMap:s,accountListStateInvalid:r,allPlainAccounts:l,allMixedPlainAccounts:i,allVisiblePlainAccounts:u,allAvailableAccountsCount:m,allVisibleAccountsCount:b,updateAccountListInvalidState:N,resetAccounts:K,getFirstShowingIds:D,getLastShowingIds:Y,getAccountStatementDate:g,getNetAssets:A,getTotalAssets:w,getTotalLiabilities:P,getAccountCategoryTotalBalance:H,getAccountBalance:_,getAccountSubAccountBalance:Ae,hasAccount:de,hasVisibleSubAccount:X,loadAllAccounts:me,getAccount:ae,saveAccount:T,changeAccountDisplayOrder:p,updateAccountDisplayOrders:G,hideAccount:f,deleteAccount:F,deleteSubAccount:C}});function Lm(e){return e===ue.Income?pe.Income:e===ue.Expense?pe.Expense:e===ue.Transfer?pe.Transfer:null}function oo(e){return e===pe.Income?ue.Income:e===pe.Expense?ue.Expense:e===pe.Transfer?ue.Transfer:null}function hu(e){const t=[];for(const n of e.subCategories){const o={name:n.name,type:n.type,parentId:"0",icon:n.icon,color:n.color,comment:"",clientSessionId:""};t.push(o)}return{name:e.name,type:e.type,icon:e.icon,color:e.color,subCategories:t}}function Nm(e){const t=[];for(const a of e){const n=hu(a);t.push(n)}return t}function wm(e){const t={};if(!e)return t;for(const a of e)if(a.subCategories)for(const n of a.subCategories)t[n.name]=n;return t}function xm(e,t){if(!t)return"";for(const a of t){const n=a.subCategories;if(n){for(const o of n)if(o.id===e)return a.name}}return""}function Em(e,t){if(!t)return"";for(const a of t){const n=a.subCategories;if(n){for(const o of n)if(o.id===e)return o.name}}return""}function Tu(e,t){const a={},n=t&&(t[pe.Income]||t[pe.Expense]||t[pe.Transfer]),o=[pe.Income,pe.Expense,pe.Transfer];for(const s of o){if(!e[s]||n&&!t[s])continue;const r=e[s],l={},i={},u={};let m=0,b=-1;for(const[v,I]of Ze(r))if(v.hidden||(m++,b===-1&&(b=I)),v.subCategories){let k=0,U=-1;for(const[R,x]of Ze(v.subCategories))R.hidden||(k++,U===-1&&(U=x));v.subCategories.length>0&&(l[v.id]=v.subCategories,i[v.id]=k,u[v.id]=U)}a[s]={type:s,allCategories:r,allVisibleCategoryCount:m,firstVisibleCategoryIndex:b,allSubCategories:l,allVisibleSubCategoryCounts:i,allFirstVisibleSubCategoryIndexes:u}}return a}function vu(e,t){const a=e[t],n=[];if(!a)return n;for(const o of a)o.hidden||n.push(o);return n}function us(e,t){let a="";if(!e)return a;for(const n of Dt(e))t&&!Ir(n,t)||(a.length>0&&(a+=","),a+=n.id);return a}function Gs(e,t){if(!e||!e.length)return!1;for(const a of e){if(a.hidden)continue;const n=a.subCategories;if(n){for(const o of n)if(!o.hidden&&o.id===t)return!0}}return!1}function Fa(e){if(!e||!e.length)return"";for(const t of e){if(t.hidden)continue;const a=t.subCategories;if(a){for(const n of a)if(!n.hidden)return n.id}}return""}function $s(e,t){if(!e||!e.length)return"";for(const a of e){if(a.hidden||a.id!==t)continue;const n=a.subCategories;if(!n)return"";for(const o of n)if(!o.hidden)return o.id;return""}return""}function km(e,t){for(const a of e)if(t||!a.hidden)return!1;return!0}function Um(e,t){let a=0;for(const n of e)(t||!n.hidden)&&a++;return a}function Om(e,t){for(const a of e)if(t||!a.hidden)return a.id;return null}function Fm(e,t){for(const a of Kn(e))if(t||!a.hidden)return a.id;return null}function Di(e,t){for(const a of Dt(e))if(t){if(a.allCategories&&a.allCategories.length>0)return!0}else if(a.allVisibleCategoryCount>0)return!0;return!1}function Au(e,t){const a={};for(const[n,o]of Wt(e))t?a[parseInt(n)]=o.allCategories&&o.allCategories.length>0:a[parseInt(n)]=o.allVisibleCategoryCount>0;return a}function bu(e,t,a){if(!(!a||!a.subCategories||!a.subCategories.length))for(const n of a.subCategories)e[n.id]=t}function Pm(e,t){for(const a of Mt(e)){const n=t[a];if(n){if(n.hidden||n.parentId&&t[n.parentId]&&t[n.parentId].hidden)continue;e[n.id]=!1}}}function Bm(e,t){for(const a of Mt(e)){const n=t[a];n&&(e[n.id]=!1)}}function Rm(e,t){for(const a of Mt(e)){const n=t[a];n&&(e[n.id]=!0)}}function Ym(e,t){for(const a of Mt(e)){const n=t[a];n&&(e[n.id]=!e[n.id])}}function Ir(e,t){if(!e.subCategories||e.subCategories.length<1)return!t[e.id];for(const a of e.subCategories)if(t[a.id])return!1;return!0}function zm(e,t){if(!e.subCategories||e.subCategories.length<1)return!1;for(const a of e.subCategories)if(t[a.id])return!1;return!0}function Km(e,t){let a=0;if(!e.subCategories||e.subCategories.length<1)return!1;for(const n of e.subCategories)t[n.id]||a++;return a>0&&a<e.subCategories.length}const Ca=Ht("transactionCategories",()=>{const e=q({}),t=q({}),a=q(!0),n=c(()=>!e.value||!e.value[pe.Expense]||!e.value[pe.Expense].length?!1:Fa(e.value[pe.Expense])!==""),o=c(()=>!e.value||!e.value[pe.Income]||!e.value[pe.Income].length?!1:Fa(e.value[pe.Income])!==""),s=c(()=>!e.value||!e.value[pe.Transfer]||!e.value[pe.Transfer].length?!1:Fa(e.value[pe.Transfer])!=="");function r(g){e.value=g,t.value={};for(const A of Dt(g))for(const w of A)if(t.value[w.id]=w,!!w.subCategories)for(const P of w.subCategories)t.value[P.id]=P}function l(g){let A;!g.parentId||g.parentId==="0"?A=e.value[g.type]:t.value[g.parentId]&&(A=t.value[g.parentId].subCategories),A&&A.push(g),t.value[g.id]=g}function i(g,A){if(A&&g.parentId!==A.parentId)return!1;let w;if(!g.parentId||g.parentId==="0"?w=e.value[g.type]:t.value[g.parentId]&&(w=t.value[g.parentId].subCategories),w){for(const[P,H]of Ze(w))if(P.id===g.id){(!g.parentId||g.parentId==="0")&&(g.subCategories=P.subCategories),w.splice(H,1,g);break}}return t.value[g.id]=g,!0}function u({category:g,from:A,to:w}){let P;!g.parentId||g.parentId==="0"?P=e.value[g.type]:t.value[g.parentId]&&(P=t.value[g.parentId].subCategories),P&&P.splice(w,0,P.splice(A,1)[0])}function m({category:g,hidden:A}){t.value[g.id]&&(t.value[g.id].visible=!A)}function b(g){let A;if(!g.parentId||g.parentId==="0"?A=e.value[g.type]:t.value[g.parentId]&&(A=t.value[g.parentId].subCategories),A){for(const[w,P]of Ze(A))if(w.id===g.id){A.splice(P,1);break}}if(t.value[g.id]&&t.value[g.id].subCategories){const w=t.value[g.id].subCategories;if(w)for(const P of w)t.value[P.id]&&delete t.value[P.id]}t.value[g.id]&&delete t.value[g.id]}function v(g){a.value=g}function I(){e.value={},t.value={},a.value=!0}function k({force:g}){return!g&&!a.value?new Promise(A=>{A(e.value)}):new Promise((A,w)=>{ne.getAllTransactionCategories().then(P=>{const H=P.data;if(!H||!H.success||!H.result){w({message:"Unable to retrieve category list"});return}H.result[pe.Income]||(H.result[pe.Income]=[]),H.result[pe.Expense]||(H.result[pe.Expense]=[]),H.result[pe.Transfer]||(H.result[pe.Transfer]=[]),a.value&&v(!1);const _=aa.ofMap(H.result);if(g&&H.result&&ta(e.value,_)){w({message:"Category list is up to date",isUpToDate:!0});return}r(_),A(_)}).catch(P=>{g?Z.error("failed to force load category list",P):Z.error("failed to load category list",P),P.response&&P.response.data&&P.response.data.errorMessage?w({error:P.response.data}):P.processed?w(P):w({message:"Unable to retrieve category list"})})})}function U({categoryId:g}){return new Promise((A,w)=>{ne.getTransactionCategory({id:g}).then(P=>{const H=P.data;if(!H||!H.success||!H.result){w({message:"Unable to retrieve category"});return}const _=aa.of(H.result);A(_)}).catch(P=>{Z.error("failed to load category info",P),P.response&&P.response.data&&P.response.data.errorMessage?w({error:P.response.data}):P.processed?w(P):w({message:"Unable to retrieve category"})})})}function R({category:g,isEdit:A,clientSessionId:w}){return new Promise((P,H)=>{let _;A?_=ne.modifyTransactionCategory(g.toModifyRequest()):_=ne.addTransactionCategory(g.toCreateRequest(w)),_.then(Ae=>{const de=Ae.data;if(!de||!de.success||!de.result){H(A?{message:"Unable to save category"}:{message:"Unable to add category"});return}const X=aa.of(de.result);A?!i(X,t.value[g.id])&&!a.value&&v(!0):l(X),P(X)}).catch(Ae=>{Z.error("failed to save category",Ae),Ae.response&&Ae.response.data&&Ae.response.data.errorMessage?H({error:Ae.response.data}):Ae.processed?H(Ae):H(A?{message:"Unable to save category"}:{message:"Unable to add category"})})})}function x(g){return new Promise((A,w)=>{ne.addTransactionCategoryBatch(g).then(P=>{const H=P.data;if(!H||!H.success||!H.result){w({message:"Unable to add category"});return}a.value||v(!0);const _=aa.ofMap(H.result);A(_)}).catch(P=>{Z.error("failed to add categories",P),P.response&&P.response.data&&P.response.data.errorMessage?w({error:P.response.data}):P.processed?w(P):w({message:"Unable to add category"})})})}function B(g){return new Promise((A,w)=>{ne.addTransactionCategoryBatch(g).then(P=>{const H=P.data;if(!H||!H.success||!H.result){w({message:"Unable to add preset categories"});return}a.value||v(!0);const _=aa.ofMap(H.result);A(_)}).catch(P=>{Z.error("failed to add preset categories",P),P.response&&P.response.data&&P.response.data.errorMessage?w({error:P.response.data}):P.processed?w(P):w({message:"Unable to add preset categories"})})})}function N({categoryId:g,from:A,to:w}){const P=t.value[g];return new Promise((H,_)=>{if(!P){_({message:"Unable to move category"});return}if(!P.parentId||P.parentId==="0"){if(!e.value[P.type]||!e.value[P.type][w]){_({message:"Unable to move category"});return}}else{const Ae=t.value[P.parentId]?.subCategories;if(!Ae||!Ae[w]){_({message:"Unable to move category"});return}}a.value||v(!0),u({category:P,from:A,to:w}),H()})}function K({type:g,parentId:A}){const w=[];let P;if(!A||A==="0"?P=e.value[g]:t.value[A]&&(P=t.value[A].subCategories),P)for(const[H,_]of Ze(P))w.push({id:H.id,displayOrder:_+1});return new Promise((H,_)=>{ne.moveTransactionCategory({newDisplayOrders:w}).then(Ae=>{const de=Ae.data;if(!de||!de.success||!de.result){_({message:"Unable to move category"});return}a.value&&v(!1),H(de.result)}).catch(Ae=>{Z.error("failed to save categories display order",Ae),Ae.response&&Ae.response.data&&Ae.response.data.errorMessage?_({error:Ae.response.data}):Ae.processed?_(Ae):_({message:"Unable to move category"})})})}function D({category:g,hidden:A}){return new Promise((w,P)=>{ne.hideTransactionCategory({id:g.id,hidden:A}).then(H=>{const _=H.data;if(!_||!_.success||!_.result){P(A?{message:"Unable to hide this category"}:{message:"Unable to unhide this category"});return}m({category:g,hidden:A}),w(_.result)}).catch(H=>{Z.error("failed to change category visibility",H),H.response&&H.response.data&&H.response.data.errorMessage?P({error:H.response.data}):H.processed?P(H):P(A?{message:"Unable to hide this category"}:{message:"Unable to unhide this category"})})})}function Y({category:g,beforeResolve:A}){return new Promise((w,P)=>{ne.deleteTransactionCategory({id:g.id}).then(H=>{const _=H.data;if(!_||!_.success||!_.result){P({message:"Unable to delete this category"});return}A?A(()=>{b(g)}):b(g),w(_.result)}).catch(H=>{Z.error("failed to delete category",H),H.response&&H.response.data&&H.response.data.errorMessage?P({error:H.response.data}):H.processed?P(H):P({message:"Unable to delete this category"})})})}return{allTransactionCategories:e,allTransactionCategoriesMap:t,transactionCategoryListStateInvalid:a,hasAvailableExpenseCategories:n,hasAvailableIncomeCategories:o,hasAvailableTransferCategories:s,updateTransactionCategoryListInvalidState:v,resetTransactionCategories:I,loadAllCategories:k,getCategory:U,saveCategory:R,addCategories:x,addPresetCategories:B,changeCategoryDisplayOrder:N,updateCategoryDisplayOrders:K,hideCategory:D,deleteCategory:Y}}),Ss=Ht("transactionTags",()=>{const e=q([]),t=q({}),a=q(!0),n=c(()=>{const D=[];for(const Y of e.value)Y.hidden||D.push(Y);return D}),o=c(()=>e.value.length),s=c(()=>n.value.length);function r(D){e.value=D,t.value={};for(const Y of D)t.value[Y.id]=Y}function l(D){e.value.push(D),t.value[D.id]=D}function i(D){for(const[Y,g]of Ze(e.value))if(Y.id===D.id){e.value.splice(g,1,D);break}t.value[D.id]=D}function u({from:D,to:Y}){e.value.splice(Y,0,e.value.splice(D,1)[0])}function m({tag:D,hidden:Y}){t.value[D.id]&&(t.value[D.id].hidden=Y)}function b(D){for(const[Y,g]of Ze(e.value))if(Y.id===D.id){e.value.splice(g,1);break}t.value[D.id]&&delete t.value[D.id]}function v(D){a.value=D}function I(){e.value=[],t.value={},a.value=!0}function k({force:D}){return!D&&!a.value?new Promise(Y=>{Y(e.value)}):new Promise((Y,g)=>{ne.getAllTransactionTags().then(A=>{const w=A.data;if(!w||!w.success||!w.result){g({message:"Unable to retrieve tag list"});return}a.value&&v(!1);const P=Ja.ofMulti(w.result);if(D&&w.result&&ta(e.value,P)){g({message:"Tag list is up to date",isUpToDate:!0});return}r(P),Y(P)}).catch(A=>{D?Z.error("failed to force load tag list",A):Z.error("failed to load tag list",A),A.response&&A.response.data&&A.response.data.errorMessage?g({error:A.response.data}):A.processed?g(A):g({message:"Unable to retrieve tag list"})})})}function U({tag:D}){return new Promise((Y,g)=>{let A;D.id?A=ne.modifyTransactionTag(D.toModifyRequest()):A=ne.addTransactionTag(D.toCreateRequest()),A.then(w=>{const P=w.data;if(!P||!P.success||!P.result){D.id?g({message:"Unable to save tag"}):g({message:"Unable to add tag"});return}const H=Ja.of(P.result);D.id?i(H):l(H),Y(H)}).catch(w=>{Z.error("failed to save tag",w),w.response&&w.response.data&&w.response.data.errorMessage?g({error:w.response.data}):w.processed?g(w):D.id?g({message:"Unable to save tag"}):g({message:"Unable to add tag"})})})}function R(D){return new Promise((Y,g)=>{ne.addTransactionTagBatch(D).then(A=>{const w=A.data;if(!w||!w.success||!w.result){g({message:"Unable to add tag"});return}a.value||v(!0);const P=Ja.ofMulti(w.result);Y(P)}).catch(A=>{Z.error("failed to add tags",A),A.response&&A.response.data&&A.response.data.errorMessage?g({error:A.response.data}):A.processed?g(A):g({message:"Unable to add tag"})})})}function x({tagId:D,from:Y,to:g}){return new Promise((A,w)=>{let P=null;for(const H of e.value)if(H.id===D){P=H;break}if(!P||!e.value[g]){w({message:"Unable to move tag"});return}a.value||v(!0),u({from:Y,to:g}),A()})}function B(){const D=[];for(const[Y,g]of Ze(e.value))D.push({id:Y.id,displayOrder:g+1});return new Promise((Y,g)=>{ne.moveTransactionTag({newDisplayOrders:D}).then(A=>{const w=A.data;if(!w||!w.success||!w.result){g({message:"Unable to move tag"});return}a.value&&v(!1),Y(w.result)}).catch(A=>{Z.error("failed to save tags display order",A),A.response&&A.response.data&&A.response.data.errorMessage?g({error:A.response.data}):A.processed?g(A):g({message:"Unable to move tag"})})})}function N({tag:D,hidden:Y}){return new Promise((g,A)=>{ne.hideTransactionTag({id:D.id,hidden:Y}).then(w=>{const P=w.data;if(!P||!P.success||!P.result){A(Y?{message:"Unable to hide this tag"}:{message:"Unable to unhide this tag"});return}m({tag:D,hidden:Y}),g(P.result)}).catch(w=>{Z.error("failed to change tag visibility",w),w.response&&w.response.data&&w.response.data.errorMessage?A({error:w.response.data}):w.processed?A(w):A(Y?{message:"Unable to hide this tag"}:{message:"Unable to unhide this tag"})})})}function K({tag:D,beforeResolve:Y}){return new Promise((g,A)=>{ne.deleteTransactionTag({id:D.id}).then(w=>{const P=w.data;if(!P||!P.success||!P.result){A({message:"Unable to delete this tag"});return}Y?Y(()=>{b(D)}):b(D),g(P.result)}).catch(w=>{Z.error("failed to delete tag",w),w.response&&w.response.data&&w.response.data.errorMessage?A({error:w.response.data}):w.processed?A(w):A({message:"Unable to delete this tag"})})})}return{allTransactionTags:e,allTransactionTagsMap:t,transactionTagListStateInvalid:a,allVisibleTags:n,allAvailableTagsCount:o,allVisibleTagsCount:s,updateTransactionTagListInvalidState:v,resetTransactionTags:I,loadAllTags:k,saveTag:U,addTags:R,changeTagDisplayOrder:x,updateTagDisplayOrders:B,hideTag:N,deleteTag:K}});class Pa extends Aa{templateType;name;scheduledFrequencyType;scheduledFrequency;scheduledStartDate;scheduledEndDate;scheduledAt;displayOrder;hidden;constructor(t,a,n,o,s,r,l,i,u,m,b,v,I,k,U,R,x,B,N,K,D,Y){super(t,"",o,s,0,r,l,i,u,m,b,v,B,N,K),this.templateType=a,this.name=n,this.scheduledFrequencyType=I,this.scheduledFrequency=k,this.scheduledStartDate=U,this.scheduledEndDate=R,this.scheduledAt=x,this.displayOrder=D,this.hidden=Y}fillFrom(t){this.templateType=t.templateType,this.name=t.name,this.templateType===Ut.Schedule.type&&(this.scheduledFrequencyType=t.scheduledFrequencyType,this.scheduledFrequency=t.scheduledFrequency,this.scheduledStartDate=t.scheduledStartDate,this.scheduledEndDate=t.scheduledEndDate,this.utcOffset=t.utcOffset,this.timeZone=void 0)}toTemplateCreateRequest(t){return{templateType:this.templateType,name:this.name,type:this.type,categoryId:this.getCategoryId(),sourceAccountId:this.sourceAccountId,destinationAccountId:this.type===ue.Transfer?this.destinationAccountId:"0",sourceAmount:this.sourceAmount,destinationAmount:this.type===ue.Transfer?this.destinationAmount:0,hideAmount:this.hideAmount,tagIds:this.tagIds,comment:this.comment,scheduledFrequencyType:this.templateType===Ut.Schedule.type?this.scheduledFrequencyType:void 0,scheduledFrequency:this.templateType===Ut.Schedule.type?this.scheduledFrequency:void 0,scheduledStartDate:this.templateType===Ut.Schedule.type&&this.scheduledStartDate?this.scheduledStartDate:void 0,scheduledEndDate:this.templateType===Ut.Schedule.type&&this.scheduledEndDate?this.scheduledEndDate:void 0,utcOffset:this.templateType===Ut.Schedule.type?this.utcOffset:void 0,clientSessionId:t}}toTemplateModifyRequest(){return{id:this.id,name:this.name,type:this.type,categoryId:this.getCategoryId(),sourceAccountId:this.sourceAccountId,destinationAccountId:this.type===ue.Transfer?this.destinationAccountId:"0",sourceAmount:this.sourceAmount,destinationAmount:this.type===ue.Transfer?this.destinationAmount:0,hideAmount:this.hideAmount,tagIds:this.tagIds,comment:this.comment,scheduledFrequencyType:this.templateType===Ut.Schedule.type?this.scheduledFrequencyType:void 0,scheduledFrequency:this.templateType===Ut.Schedule.type?this.scheduledFrequency:void 0,scheduledStartDate:this.templateType===Ut.Schedule.type&&this.scheduledStartDate?this.scheduledStartDate:void 0,scheduledEndDate:this.templateType===Ut.Schedule.type&&this.scheduledEndDate?this.scheduledEndDate:void 0,utcOffset:this.templateType===Ut.Schedule.type?this.utcOffset:void 0}}static createNewTransactionTemplate(t){return new Pa(t.id,0,"",t.type,t.categoryId,t.timeZone,t.utcOffset,t.sourceAccountId,t.destinationAccountId,t.sourceAmount,t.destinationAmount,t.hideAmount,void 0,void 0,void 0,void 0,void 0,t.tagIds,t.comment,!0,0,!1)}static ofTemplate(t){return new Pa(t.id,t.templateType,t.name,t.type,t.categoryId,void 0,t.utcOffset??0,t.sourceAccountId,t.destinationAccountId,t.sourceAmount,t.destinationAmount,t.hideAmount,t.scheduledFrequencyType,t.scheduledFrequency,t.scheduledStartDate??void 0,t.scheduledEndDate??void 0,t.scheduledAt,t.tagIds,t.comment,!0,t.displayOrder,t.hidden)}static ofMultiTemplates(t){const a=[];for(const n of t)a.push(Pa.ofTemplate(n));return a}}const Iu=Ht("transactionTemplates",()=>{const e=q({}),t=q({}),a=q({}),n=c(()=>{const D={};for(const[Y,g]of Wt(e.value)){const A=[];for(const w of g)w.hidden||A.push(w);D[parseInt(Y)]=A}return D}),o=c(()=>{const D={};for(const[Y,g]of Wt(e.value))D[parseInt(Y)]=g.length;return D}),s=c(()=>{const D={};for(const[Y,g]of Wt(n.value))D[parseInt(Y)]=g.length;return D});function r(D,Y){e.value[D]=Y,t.value[D]={};for(const g of Y)t.value[D][g.id]=g}function l(D,Y){const g=e.value[D],A=t.value[D];xt(g)&&g.push(Y),Ke(A)&&(A[Y.id]=Y)}function i(D,Y){const g=e.value[D],A=t.value[D];if(xt(g)){for(const[w,P]of Ze(g))if(w.id===w.id){g.splice(P,1,w);break}}Ke(A)&&(A[Y.id]=Y)}function u(D,{from:Y,to:g}){const A=e.value[D];xt(A)&&A.splice(g,0,A.splice(Y,1)[0])}function m(D,{template:Y,hidden:g}){const A=t.value[D];Ke(A)&&A[Y.id]&&(A[Y.id].hidden=g)}function b(D,Y){const g=e.value[D],A=t.value[D];if(xt(g)){for(const[w,P]of Ze(g))if(w.id===Y.id){g.splice(P,1);break}}Ke(A)&&A[Y.id]&&delete A[Y.id]}function v(D,Y){a.value[D]=Y}function I(){e.value={},t.value={},a.value={}}function k({templateType:D,force:Y}){return!Y&&yt(a.value[D])&&!a.value[D]?new Promise(g=>{g(e.value[D]||[])}):new Promise((g,A)=>{ne.getAllTransactionTemplates({templateType:D}).then(w=>{const P=w.data;if(!P||!P.success||!P.result){A({message:"Unable to retrieve template list"});return}(!yt(a.value[D])||a.value[D])&&v(D,!1);const H=Pa.ofMultiTemplates(P.result);if(Y&&P.result&&ta(e.value[D],H)){A({message:"Template list is up to date",isUpToDate:!0});return}r(D,H),g(H)}).catch(w=>{Y?Z.error("failed to force load template list",w):Z.error("failed to load template list",w),w.response&&w.response.data&&w.response.data.errorMessage?A({error:w.response.data}):w.processed?A(w):A({message:"Unable to retrieve template list"})})})}function U({templateId:D}){return new Promise((Y,g)=>{ne.getTransactionTemplate({id:D}).then(A=>{const w=A.data;if(!w||!w.success||!w.result){g({message:"Unable to retrieve template"});return}const P=Pa.ofTemplate(w.result);Y(P)}).catch(A=>{Z.error("failed to load template info",A),A.response&&A.response.data&&A.response.data.errorMessage?g({error:A.response.data}):A.processed?g(A):g({message:"Unable to retrieve template"})})})}function R({template:D,isEdit:Y,clientSessionId:g}){return new Promise((A,w)=>{let P;if(D.type!==ue.Expense&&D.type!==ue.Income&&D.type!==ue.Transfer){w({message:"An error occurred"});return}Y?P=ne.modifyTransactionTemplate(D.toTemplateModifyRequest()):P=ne.addTransactionTemplate(D.toTemplateCreateRequest(g)),P.then(H=>{const _=H.data;if(!_||!_.success||!_.result){w(Y?{message:"Unable to save template"}:{message:"Unable to add template"});return}const Ae=Pa.ofTemplate(_.result);Y?i(Ae.templateType,Ae):l(Ae.templateType,Ae),A(Ae)}).catch(H=>{Z.error("failed to save template",H),H.response&&H.response.data&&H.response.data.errorMessage?w({error:H.response.data}):H.processed?w(H):w(Y?{message:"Unable to save template"}:{message:"Unable to add template"})})})}function x({templateType:D,templateId:Y,from:g,to:A}){return new Promise((w,P)=>{let H=null;if(!xt(e.value[D])){P({message:"Unable to move template"});return}for(const _ of e.value[D])if(_.id===Y){H=_;break}if(!H||!e.value[D][A]){P({message:"Unable to move template"});return}yt(a.value[D])&&!a.value[D]&&v(D,!0),u(D,{from:g,to:A}),w()})}function B({templateType:D}){const Y=[];if(xt(e.value[D]))for(const[g,A]of Ze(e.value[D]))Y.push({id:g.id,displayOrder:A+1});return new Promise((g,A)=>{ne.moveTransactionTemplate({newDisplayOrders:Y}).then(w=>{const P=w.data;if(!P||!P.success||!P.result){A({message:"Unable to move template"});return}(!yt(a.value[D])||a.value[D])&&v(D,!1),g(P.result)}).catch(w=>{Z.error("failed to save templates display order",w),w.response&&w.response.data&&w.response.data.errorMessage?A({error:w.response.data}):w.processed?A(w):A({message:"Unable to move template"})})})}function N({template:D,hidden:Y}){return new Promise((g,A)=>{ne.hideTransactionTemplate({id:D.id,hidden:Y}).then(w=>{const P=w.data;if(!P||!P.success||!P.result){A(Y?{message:"Unable to hide this template"}:{message:"Unable to unhide this template"});return}m(D.templateType,{template:D,hidden:Y}),g(P.result)}).catch(w=>{Z.error("failed to change template visibility",w),w.response&&w.response.data&&w.response.data.errorMessage?A({error:w.response.data}):w.processed?A(w):A(Y?{message:"Unable to hide this template"}:{message:"Unable to unhide this template"})})})}function K({template:D,beforeResolve:Y}){return new Promise((g,A)=>{ne.deleteTransactionTemplate({id:D.id}).then(w=>{const P=w.data;if(!P||!P.success||!P.result){A({message:"Unable to delete this template"});return}Y?Y(()=>{b(D.templateType,D)}):b(D.templateType,D),g(P.result)}).catch(w=>{Z.error("failed to delete template",w),w.response&&w.response.data&&w.response.data.errorMessage?A({error:w.response.data}):w.processed?A(w):A({message:"Unable to delete this template"})})})}return{allTransactionTemplates:e,allTransactionTemplatesMap:t,transactionTemplateListStatesInvalid:a,allVisibleTemplates:n,allAvailableTemplatesCount:o,allVisibleTemplatesCount:s,updateTransactionTemplateListInvalidState:v,resetTransactionTemplates:I,loadAllTemplates:k,getTemplate:U,saveTemplateContent:R,changeTemplateDisplayOrder:x,updateTemplateDisplayOrders:B,hideTemplate:N,deleteTemplate:K}}),cn=Ht("overview",()=>{const e=mt(),t=Nt(),a=sa(),n=Ca(),o=da(),s=q(m()),r=q({loadLast11Months:!1}),l=q({}),i=q(!0),u=c(()=>{const x=l.value;if(!x||!x.thisMonth)return{thisMonth:{valid:!1,incomeAmount:0,expenseAmount:0,incompleteIncomeAmount:!1,incompleteExpenseAmount:!1}};const B={},N=t.currentUserDefaultCurrency;return Ar.forEach(K=>{const D=x[K];if(!D)return;let Y=0,g=0,A=!1,w=!1;if(D.amounts)for(const P of D.amounts)if(P.currency!==N){const H=o.getExchangedAmount(P.incomeAmount,P.currency,N),_=o.getExchangedAmount(P.expenseAmount,P.currency,N);Ie(H)?Y+=Math.trunc(H):A=!0,Ie(_)?g+=Math.trunc(_):w=!0}else Y+=P.incomeAmount,g+=P.expenseAmount;B[K]={valid:!0,incomeAmount:Y,expenseAmount:g,incompleteIncomeAmount:A,incompleteExpenseAmount:w,amounts:D.amounts||[]}}),B});function m(){const x={today:{startTime:0,endTime:0},thisWeek:{startTime:0,endTime:0},thisMonth:{startTime:0,endTime:0},thisYear:{startTime:0,endTime:0},lastMonth:{startTime:0,endTime:0},monthBeforeLastMonth:{startTime:0,endTime:0},monthBeforeLast2Months:{startTime:0,endTime:0},monthBeforeLast3Months:{startTime:0,endTime:0},monthBeforeLast4Months:{startTime:0,endTime:0},monthBeforeLast5Months:{startTime:0,endTime:0},monthBeforeLast6Months:{startTime:0,endTime:0},monthBeforeLast7Months:{startTime:0,endTime:0},monthBeforeLast8Months:{startTime:0,endTime:0},monthBeforeLast9Months:{startTime:0,endTime:0},monthBeforeLast10Months:{startTime:0,endTime:0}};return b(x),x}function b(x){x.today.startTime=Xt(),x.today.endTime=Fn(),x.thisWeek.startTime=hs(t.currentUserFirstDayOfWeek),x.thisWeek.endTime=eo(t.currentUserFirstDayOfWeek),x.thisMonth.startTime=ya(),x.thisMonth.endTime=Pn(),x.thisYear.startTime=Ea(),x.thisYear.endTime=an(),x.lastMonth.startTime=He(ya(),1,"months"),x.lastMonth.endTime=He(ya(),1,"seconds"),x.monthBeforeLastMonth.startTime=He(x.lastMonth.startTime,1,"months"),x.monthBeforeLastMonth.endTime=He(x.lastMonth.startTime,1,"seconds"),x.monthBeforeLast2Months.startTime=He(x.monthBeforeLastMonth.startTime,1,"months"),x.monthBeforeLast2Months.endTime=He(x.monthBeforeLastMonth.startTime,1,"seconds");for(let B=3;B<=10;B++)x[`monthBeforeLast${B}Months`].startTime=He(x[`monthBeforeLast${B-1}Months`].startTime,1,"months"),x[`monthBeforeLast${B}Months`].endTime=He(x[`monthBeforeLast${B-1}Months`].startTime,1,"seconds")}function v(){b(s.value)}function I(x){i.value=x}function k(){v(),r.value.loadLast11Months=!1,l.value={},i.value=!0}function U({force:x,loadLast11Months:B}){let N=!1,K=!1;if(s.value.today.startTime!==Xt()&&(N=!0,v()),B&&!r.value.loadLast11Months&&(K=!0),!N&&!K&&!x&&!i.value)return new Promise(A=>{A(l.value)});const D={useTransactionTimezone:e.appSettings.timezoneUsedForStatisticsInHomePage===na.TransactionTimezone.type,today:s.value.today,thisWeek:s.value.thisWeek,thisMonth:s.value.thisMonth,thisYear:s.value.thisYear};B&&(D.lastMonth=s.value.lastMonth,D.monthBeforeLastMonth=s.value.monthBeforeLastMonth,D.monthBeforeLast2Months=s.value.monthBeforeLast2Months,D.monthBeforeLast3Months=s.value.monthBeforeLast3Months,D.monthBeforeLast4Months=s.value.monthBeforeLast4Months,D.monthBeforeLast5Months=s.value.monthBeforeLast5Months,D.monthBeforeLast6Months=s.value.monthBeforeLast6Months,D.monthBeforeLast7Months=s.value.monthBeforeLast7Months,D.monthBeforeLast8Months=s.value.monthBeforeLast8Months,D.monthBeforeLast9Months=s.value.monthBeforeLast9Months,D.monthBeforeLast10Months=s.value.monthBeforeLast10Months);const Y=ti(e.appSettings.overviewAccountFilterInHomePage,!0),g=ti(e.appSettings.overviewTransactionCategoryFilterInHomePage,!0);return new Promise((A,w)=>{ne.getTransactionAmounts(D,Y,g).then(P=>{const H=P.data;if(!H||!H.success||!H.result){w({message:"Unable to retrieve transaction overview"});return}if(i.value&&I(!1),x&&H.result&&ta(l.value,H.result)){w({message:"Data is up to date",isUpToDate:!0});return}l.value=H.result,r.value.loadLast11Months=!!B,A(H.result)}).catch(P=>{x?Z.error("failed to force load transaction overview",P):Z.error("failed to load transaction overview",P),P.response&&P.response.data&&P.response.data.errorMessage?w({error:P.response.data}):P.processed?w(P):w({message:"Unable to retrieve transaction overview"})})})}function R({type:x,dateType:B,minTime:N,maxTime:K}){const D=[];return yt(x)&&D.push("type="+x),yt(B)&&(D.push("dateType="+B),B===Q.Custom.type&&(Ie(N)&&N>0&&D.push("minTime="+N),Ie(K)&&K>0&&D.push("maxTime="+K))),nn(e.appSettings.overviewTransactionCategoryFilterInHomePage)||D.push("categoryIds="+us(n.allTransactionCategoriesMap,e.appSettings.overviewTransactionCategoryFilterInHomePage)),nn(e.appSettings.overviewAccountFilterInHomePage)||D.push("accountIds="+cs(a.allAccountsMap,e.appSettings.overviewAccountFilterInHomePage)),D.join("&")}return{transactionDataRange:s,transactionOverviewOptions:r,transactionOverviewData:l,transactionOverviewStateInvalid:i,transactionOverview:u,updateTransactionOverviewInvalidState:I,resetTransactionOverview:k,loadTransactionOverview:U,getTransactionListPageParams:R}});function Si(e,t){t===Rt.DisplayOrder.type?e.sort(function(a,n){for(let o=0;o<Math.min(a.displayOrders.length,n.displayOrders.length);o++)if(a.displayOrders[o]!==n.displayOrders[o])return a.displayOrders[o]-n.displayOrders[o];return a.name.localeCompare(n.name,void 0,{numeric:!0,sensitivity:"base"})}):t===Rt.Name.type?e.sort(function(a,n){return a.name.localeCompare(n.name,void 0,{numeric:!0,sensitivity:"base"})}):e.sort(function(a,n){return a.totalAmount!==n.totalAmount?n.totalAmount-a.totalAmount:a.name.localeCompare(n.name,void 0,{numeric:!0,sensitivity:"base"})})}function Cu(e,t,a,n,o){if((!t||!a)&&e&&e.length){let s=Number.MAX_SAFE_INTEGER,r=Number.MAX_SAFE_INTEGER,l=0,i=0;for(const u of e)for(const m of u.items)(m.year<s||m.year===s&&m.month1base<r)&&(s=m.year,r=m.month1base),(m.year>l||m.year===l&&m.month1base>i)&&(l=m.year,i=m.month1base);t=`${s}-${r}`,a=`${l}-${i}`}return xo(t,a,n,o)}function xo(e,t,a,n){return!e||!t?[]:n===Xe.Year.type?Fc(e,t):n===Xe.FiscalYear.type?Pc(e,t,a):n===Xe.Quarter.type?Bc(e,t):Rc(e,t)}const un=Ht("statistics",()=>{const e=mt(),t=Nt(),a=sa(),n=Ca(),o=da(),s=q({chartDataType:z.Default.type,categoricalChartType:Gt.Default.type,categoricalChartDateType:as.type,categoricalChartStartTime:0,categoricalChartEndTime:0,trendChartType:It.Default.type,trendChartDateType:ns.type,trendChartStartYearMonth:"",trendChartEndYearMonth:"",assetTrendsChartType:It.Default.type,assetTrendsChartDateType:ss.type,assetTrendsChartStartTime:0,assetTrendsChartEndTime:0,filterAccountIds:{},filterCategoryIds:{},tagIds:"",tagFilterType:Zt.Default.type,keyword:"",sortingType:Rt.Default.type}),r=q(null),l=q([]),i=q([]),u=q(!0),m=c(()=>s.value.chartDataType===z.OutflowsByAccount.type||s.value.chartDataType===z.ExpenseByAccount.type||s.value.chartDataType===z.InflowsByAccount.type||s.value.chartDataType===z.IncomeByAccount.type||s.value.chartDataType===z.AccountTotalAssets.type||s.value.chartDataType===z.AccountTotalLiabilities.type?"account":s.value.chartDataType===z.ExpenseByPrimaryCategory.type||s.value.chartDataType===z.ExpenseBySecondaryCategory.type||s.value.chartDataType===z.IncomeByPrimaryCategory.type||s.value.chartDataType===z.IncomeBySecondaryCategory.type?"category":""),b=c(()=>{const T=r.value;if(!T)return null;const p={startTime:T.startTime,endTime:T.endTime,items:[]};return T&&T.items&&T.items.length&&p.items.push(...Y(T.items)),p}),v=c(()=>!b.value||!b.value.items?null:g(b.value.items,s.value)),I=c(()=>{if(!b.value||!b.value.items)return null;const T={},p=[],G=[],f=[],F=[],C=[],S=[],E=[],W=[];let V=0,J=0;for(const O of b.value.items){if(!O.primaryAccount||!O.account||!O.primaryCategory||!O.category||O.relatedAccount&&O.relatedAccountType===kn.TransferFrom||!Ie(O.amountInDefaultCurrency)||s.value.filterAccountIds&&s.value.filterAccountIds[O.account.id]||s.value.filterCategoryIds&&s.value.filterCategoryIds[O.category.id])continue;O.category.type===pe.Income?V+=O.amountInDefaultCurrency:O.category.type===pe.Expense&&(J+=O.amountInDefaultCurrency);const fe=`${Et.IncomeByAccount}:${O.account.id}`,ge=`${Et.ExpenseByAccount}:${O.account.id}`;let Se=T[fe],be=T[ge];if(Se||(Se=K(O.account.id,O.account.name,Et.IncomeByAccount,[O.primaryAccount.category,O.primaryAccount.displayOrder,O.account.displayOrder],O.primaryAccount.hidden||O.account.hidden),T[fe]=Se,f.push(Se)),be||(be=K(O.account.id,O.account.name,Et.ExpenseByAccount,[O.primaryAccount.category,O.primaryAccount.displayOrder,O.account.displayOrder],O.primaryAccount.hidden||O.account.hidden),T[ge]=be,F.push(be)),O.category.type===pe.Income){const Ue=`${Et.IncomeByPrimaryCategory}:${O.primaryCategory.id}`,$e=`${Et.IncomeBySecondaryCategory}:${O.category.id}`;let Ne=T[Ue],xe=T[$e];Ne||(Ne=K(O.primaryCategory.id,O.primaryCategory.name,Et.IncomeByPrimaryCategory,[O.primaryCategory.displayOrder],O.primaryCategory.hidden),T[Ue]=Ne,p.push(Ne)),xe||(xe=K(O.category.id,O.category.name,Et.IncomeBySecondaryCategory,[O.primaryCategory.displayOrder,O.category.displayOrder],O.primaryCategory.hidden||O.category.hidden),T[$e]=xe,G.push(xe)),Ne.totalAmount+=O.amountInDefaultCurrency,Ne.totalNonNegativeAmount+=O.amountInDefaultCurrency>0?O.amountInDefaultCurrency:0,Ne.includeInPercent=!0,Ne.outflows.push({amount:O.amountInDefaultCurrency,relatedItem:xe}),xe.totalAmount+=O.amountInDefaultCurrency,xe.totalNonNegativeAmount+=O.amountInDefaultCurrency>0?O.amountInDefaultCurrency:0,xe.includeInPercent=!0,xe.inflows.push({amount:O.amountInDefaultCurrency,relatedItem:Ne}),xe.outflows.push({amount:O.amountInDefaultCurrency,relatedItem:Se}),Se.totalAmount+=O.amountInDefaultCurrency,Se.totalNonNegativeAmount+=O.amountInDefaultCurrency>0?O.amountInDefaultCurrency:0,Se.includeInPercent=!0,Se.inflows.push({amount:O.amountInDefaultCurrency,relatedItem:xe})}else if(O.category.type===pe.Expense){const Ue=`${Et.ExpenseByPrimaryCategory}:${O.primaryCategory.id}`,$e=`${Et.ExpenseBySecondaryCategory}:${O.category.id}`;let Ne=T[Ue],xe=T[$e];Ne||(Ne=K(O.primaryCategory.id,O.primaryCategory.name,Et.ExpenseByPrimaryCategory,[O.primaryCategory.displayOrder],O.primaryCategory.hidden),T[Ue]=Ne,S.push(Ne)),xe||(xe=K(O.category.id,O.category.name,Et.ExpenseBySecondaryCategory,[O.primaryCategory.displayOrder,O.category.displayOrder],O.primaryCategory.hidden||O.category.hidden),T[$e]=xe,C.push(xe)),be.totalAmount+=O.amountInDefaultCurrency,be.totalNonNegativeAmount+=O.amountInDefaultCurrency>0?O.amountInDefaultCurrency:0,be.includeInPercent=!0,be.outflows.push({amount:O.amountInDefaultCurrency,relatedItem:xe}),xe.totalAmount+=O.amountInDefaultCurrency,xe.totalNonNegativeAmount+=O.amountInDefaultCurrency>0?O.amountInDefaultCurrency:0,xe.includeInPercent=!0,xe.inflows.push({amount:O.amountInDefaultCurrency,relatedItem:be}),xe.outflows.push({amount:O.amountInDefaultCurrency,relatedItem:Ne}),Ne.totalAmount+=O.amountInDefaultCurrency,Ne.totalNonNegativeAmount+=O.amountInDefaultCurrency>0?O.amountInDefaultCurrency:0,Ne.includeInPercent=!0,Ne.inflows.push({amount:O.amountInDefaultCurrency,relatedItem:xe})}else if(O.category.type===pe.Transfer&&O.relatedPrimaryAccount&&O.relatedAccount){const Ue=`${Et.ExpenseByAccount}:${O.relatedAccount.id}`;let $e=T[Ue];$e||($e=K(O.relatedAccount.id,O.relatedAccount.name,Et.ExpenseByAccount,[O.relatedPrimaryAccount.category,O.relatedPrimaryAccount.displayOrder,O.relatedAccount.displayOrder],O.relatedPrimaryAccount.hidden||O.relatedAccount.hidden),T[Ue]=$e,F.push($e)),Se.outflows.push({amount:O.amountInDefaultCurrency,relatedItem:$e}),$e.inflows.push({amount:O.amountInDefaultCurrency,relatedItem:Se})}}D(p,s.value),D(G,s.value),D(f,s.value),D(F,s.value),D(C,s.value),D(S,s.value);for(const O of F){const fe=`${Et.IncomeByAccount}:${O.id}`,ge=T[fe];let Se=0,be=0,Ue=0,$e=0;if(ge){for(const ze of ge.inflows)Se+=ze.amount,be+=ze.amount;for(const ze of ge.outflows)Ue+=ze.amount}for(const ze of O.inflows)ze.relatedItem.type===O.type&&ze.relatedItem.id===O.id||(Se+=ze.amount);for(const ze of O.outflows)$e+=ze.amount;const Ne=be-Ue-$e,xe=Se-Ue-$e;if(ge&&a.allAccountsMap[O.id]?.isAsset&&(Ne>0?(ge.outflows.push({amount:Ne+$e,relatedItem:O}),O.inflows.push({amount:Ne+$e,relatedItem:ge})):xe<0&&(ge.totalAmount+=-xe,ge.totalNonNegativeAmount+=-xe>0?-xe:0,ge.outflows.push({amount:-xe,relatedItem:O}),O.inflows.push({amount:-xe,relatedItem:ge}))),xe>0){let ze=T[Et.NetCashFlow];ze||(ze=K(Et.NetCashFlow,"Net Cash Flow",Et.NetCashFlow,[Number.MAX_SAFE_INTEGER],!1),T[Et.NetCashFlow]=ze,W.push(ze)),O.outflows.push({amount:xe,relatedItem:ze}),ze.totalAmount+=xe,ze.totalNonNegativeAmount+=xe>0?xe:0,ze.inflows.push({amount:xe,relatedItem:O})}}const h=[...p,...G,...f,...E,...F,...C,...W,...S];return{totalIncome:V,totalExpense:J,items:h}}),k=c(()=>{if(!a.allPlainAccounts)return null;const T={};let p=0,G=0;for(const f of a.allPlainAccounts){if(s.value.chartDataType===z.AccountTotalAssets.type){if(!f.isAsset)continue}else if(s.value.chartDataType===z.AccountTotalLiabilities.type&&!f.isLiability)continue;if(s.value.filterAccountIds&&s.value.filterAccountIds[f.id])continue;let F=a.allAccountsMap[f.parentId];F||(F=f);let C=f.balance;if(f.currency!==t.currentUserDefaultCurrency){const E=o.getExchangedAmount(C,f.currency,t.currentUserDefaultCurrency);if(!Ie(E))continue;C=Math.trunc(E)}f.isLiability&&(C=-C);const S={name:f.name,type:"account",id:f.id,icon:f.icon||rs.icon,color:f.color||vn,hidden:F.hidden||f.hidden,displayOrders:[F.category,F.displayOrder,f.displayOrder],totalAmount:C};p+=C,C>0&&(G+=C),T[f.id]=S}return{totalAmount:p,totalNonNegativeAmount:G,items:T}}),U=c(()=>{let T=null;s.value.chartDataType===z.OutflowsByAccount.type||s.value.chartDataType===z.ExpenseByAccount.type||s.value.chartDataType===z.ExpenseByPrimaryCategory.type||s.value.chartDataType===z.ExpenseBySecondaryCategory.type||s.value.chartDataType===z.InflowsByAccount.type||s.value.chartDataType===z.IncomeByAccount.type||s.value.chartDataType===z.IncomeByPrimaryCategory.type||s.value.chartDataType===z.IncomeBySecondaryCategory.type?T=v.value:(s.value.chartDataType===z.AccountTotalAssets.type||s.value.chartDataType===z.AccountTotalLiabilities.type)&&(T=k.value);const p=[];if(T&&T.items){let f=0;for(const F of Dt(T.items))F.totalAmount>f&&(f=F.totalAmount);for(const F of Dt(T.items)){let C=0;s.value.chartDataType===z.OutflowsByAccount.type||s.value.chartDataType===z.InflowsByAccount.type?(f>0?C=F.totalAmount*100/f:C=0,C<0&&(C=0)):(F.totalAmount>0?C=F.totalAmount*100/T.totalNonNegativeAmount:C=0,C<0&&(C=0));const S={name:F.name,type:F.type,id:F.id,icon:F.icon,color:F.color,hidden:F.hidden,displayOrders:F.displayOrders,totalAmount:F.totalAmount,percent:C};p.push(S)}}return A(p,s.value),{totalAmount:T?.totalAmount||0,items:p}}),R=c(()=>{const T=l.value,p=[];if(T&&T.length)for(const G of T){const f={year:G.year,month:G.month,items:[]};G&&G.items&&G.items.length&&f.items.push(...Y(G.items)),p.push(f)}return p}),x=c(()=>{if(!R.value||!R.value.length)return null;const T={};for(const f of R.value){const F=g(f.items,s.value);for(const[C,S]of Wt(F.items)){let E=T[C];E||(E={name:S.name,type:S.type,id:S.id,icon:S.icon,color:S.color,hidden:S.hidden,displayOrders:S.displayOrders,totalAmount:0,items:[]}),E.items.push({year:f.year,month1base:f.month,totalAmount:S.totalAmount}),E.totalAmount+=S.totalAmount,T[C]=E}}const p=[];for(const f of Dt(T))p.push(f);return A(p,s.value),{items:p}}),B=c(()=>{const T=i.value,p=[];if(!T||!T.length)return p;const G=T[0];if(!G)return p;const f={};let F=G;for(const C of G.items)f[C.accountId]=C;for(const C of T){const S=[],E={},W=ir(F,C)-1,V=jt(F.year,F.month,F.day);for(let h=1;h<=W;h++){const O=[],fe=V.getDateTimeAfterDays(h);for(const Se of Dt(f)){const be={categoryId:"",accountId:Se.accountId,amount:Se.accountClosingBalance};O.push(be)}const ge={year:fe.getGregorianCalendarYear(),month:fe.getGregorianCalendarMonth(),day:fe.getGregorianCalendarDay(),items:Y(O)};F=C,p.push(ge)}for(const h of C.items){const O={categoryId:"",accountId:h.accountId,amount:h.accountClosingBalance};f[h.accountId]=h,E[h.accountId]=!0,S.push(O)}for(const h of Dt(f)){if(E[h.accountId])continue;const O={categoryId:"",accountId:h.accountId,amount:h.accountClosingBalance};E[h.accountId]=!0,S.push(O)}const J={year:C.year,month:C.month,day:C.day,items:Y(S)};F=C,p.push(J)}return p}),N=c(()=>{if(!B.value||!B.value.length)return null;const T={};for(const f of B.value){let F=0;for(const C of f.items){if(!C.primaryAccount||!C.account||s.value.filterAccountIds&&s.value.filterAccountIds[C.account.id]||!Ie(C.amountInDefaultCurrency))continue;if(s.value.chartDataType===z.AccountTotalAssets.type){if(!C.account.isAsset)continue}else if(s.value.chartDataType===z.AccountTotalLiabilities.type){if(!C.account.isLiability)continue}else if(s.value.chartDataType!==z.NetWorth.type)continue;let S=C.amountInDefaultCurrency;if(C.account.isLiability&&(S=-S),s.value.chartDataType===z.AccountTotalAssets.type||s.value.chartDataType===z.AccountTotalLiabilities.type){let E=T[C.account.id];E?E.totalAmount+=S:E={name:C.account.name,type:"account",id:C.account.id,icon:C.account.icon||rs.icon,color:C.account.color||vn,hidden:C.primaryAccount.hidden||C.account.hidden,displayOrders:[C.primaryAccount.category,C.primaryAccount.displayOrder,C.account.displayOrder],totalAmount:S,items:[]};const W={year:f.year,month:f.month,day:f.day,totalAmount:S};E.items.push(W),T[C.account.id]=E}C.account.isAsset?F+=S:C.account.isLiability&&(F-=S)}if(s.value.chartDataType===z.NetWorth.type){let C=T.total;C?C.totalAmount+=F:C={name:z.NetWorth.name,type:"total",id:"total",icon:"",color:"",hidden:!1,displayOrders:[1],totalAmount:F,items:[]};const S={year:f.year,month:f.month,day:f.day,totalAmount:F};C.items.push(S),T.total=C}}const p=[];for(const f of Dt(T))p.push(f);return A(p,s.value),{items:p}});function K(T,p,G,f,F){return{id:T,name:p,type:G,displayOrders:f,hidden:F,inflows:[],outflows:[],totalAmount:0,totalNonNegativeAmount:0}}function D(T,p){let G=0;for(const f of T)G+=f.totalNonNegativeAmount;if(G>0)for(const f of T)f.includeInPercent&&(f.percent=f.totalAmount*100/G);Si(T,p.sortingType)}function Y(T){const p=[],G=t.currentUserDefaultCurrency;for(const f of T){const F={categoryId:f.categoryId,accountId:f.accountId,relatedAccountId:f.relatedAccountId,relatedAccountType:f.relatedAccountType,amount:f.amount,amountInDefaultCurrency:null};if(F.accountId&&(F.account=a.allAccountsMap[F.accountId]),F.account&&F.account.parentId!=="0"?F.primaryAccount=a.allAccountsMap[F.account.parentId]:F.primaryAccount=F.account,F.relatedAccountId&&(F.relatedAccount=a.allAccountsMap[F.relatedAccountId]),F.relatedAccount&&F.relatedAccount.parentId!=="0"?F.relatedPrimaryAccount=a.allAccountsMap[F.relatedAccount.parentId]:F.relatedPrimaryAccount=F.relatedAccount,F.categoryId&&(F.category=n.allTransactionCategoriesMap[F.categoryId]),F.category&&F.category.parentId!=="0"?F.primaryCategory=n.allTransactionCategoriesMap[F.category.parentId]:F.primaryCategory=F.category,F.account&&F.account.currency!==G){const C=o.getExchangedAmount(F.amount,F.account.currency,G);Ie(C)&&(F.amountInDefaultCurrency=Math.trunc(C))}else F.account&&F.account.currency===G?F.amountInDefaultCurrency=F.amount:F.amountInDefaultCurrency=null;p.push(F)}return p}function g(T,p){const G={};let f=0,F=0;for(const C of T)if(!(!C.primaryAccount||!C.account||!C.primaryCategory||!C.category)){if(p.chartDataType===z.OutflowsByAccount.type||p.chartDataType===z.TotalOutflows.type){if(C.category.type===pe.Transfer){if(C.relatedAccountType!==kn.TransferTo)continue}else if(C.category.type!==pe.Expense)continue}else if(p.chartDataType===z.ExpenseByAccount.type||p.chartDataType===z.ExpenseByPrimaryCategory.type||p.chartDataType===z.ExpenseBySecondaryCategory.type||p.chartDataType===z.TotalExpense.type){if(C.category.type!==pe.Expense)continue}else if(p.chartDataType===z.InflowsByAccount.type||p.chartDataType===z.TotalInflows.type){if(C.category.type===pe.Transfer){if(C.relatedAccountType!==kn.TransferFrom)continue}else if(C.category.type!==pe.Income)continue}else if(p.chartDataType===z.IncomeByAccount.type||p.chartDataType===z.IncomeByPrimaryCategory.type||p.chartDataType===z.IncomeBySecondaryCategory.type||p.chartDataType===z.TotalIncome.type){if(C.category.type!==pe.Income)continue}else if(p.chartDataType!==z.NetCashFlow.type)if(p.chartDataType===z.NetIncome.type){if(C.category.type===pe.Transfer)continue}else continue;if(!(p.filterAccountIds&&p.filterAccountIds[C.account.id])&&!(p.filterCategoryIds&&p.filterCategoryIds[C.category.id])){if(p.chartDataType===z.OutflowsByAccount.type||p.chartDataType===z.ExpenseByAccount.type||p.chartDataType===z.InflowsByAccount.type||p.chartDataType===z.IncomeByAccount.type){if(Ie(C.amountInDefaultCurrency)){let S=G[C.account.id];S?S.totalAmount+=C.amountInDefaultCurrency:S={name:C.account.name,type:"account",id:C.account.id,icon:C.account.icon||rs.icon,color:C.account.color||vn,hidden:C.primaryAccount.hidden||C.account.hidden,displayOrders:[C.primaryAccount.category,C.primaryAccount.displayOrder,C.account.displayOrder],totalAmount:C.amountInDefaultCurrency};let E=!0;(p.chartDataType===z.OutflowsByAccount.type||p.chartDataType===z.InflowsByAccount.type)&&C.relatedAccount&&(!p.filterAccountIds||!p.filterAccountIds[C.relatedAccount.id])&&(E=!1),E&&(f+=C.amountInDefaultCurrency,C.amountInDefaultCurrency>0&&(F+=C.amountInDefaultCurrency)),G[C.account.id]=S}}else if(p.chartDataType===z.ExpenseByPrimaryCategory.type||p.chartDataType===z.IncomeByPrimaryCategory.type){if(Ie(C.amountInDefaultCurrency)){let S=G[C.primaryCategory.id];S?S.totalAmount+=C.amountInDefaultCurrency:S={name:C.primaryCategory.name,type:"category",id:C.primaryCategory.id,icon:C.primaryCategory.icon||Xs.icon,color:C.primaryCategory.color||$n,hidden:C.primaryCategory.hidden,displayOrders:[C.primaryCategory.type,C.primaryCategory.displayOrder],totalAmount:C.amountInDefaultCurrency},f+=C.amountInDefaultCurrency,C.amountInDefaultCurrency>0&&(F+=C.amountInDefaultCurrency),G[C.primaryCategory.id]=S}}else if(p.chartDataType===z.ExpenseBySecondaryCategory.type||p.chartDataType===z.IncomeBySecondaryCategory.type){if(Ie(C.amountInDefaultCurrency)){let S=G[C.category.id];S?S.totalAmount+=C.amountInDefaultCurrency:S={name:C.category.name,type:"category",id:C.category.id,icon:C.category.icon||Xs.icon,color:C.category.color||$n,hidden:C.primaryCategory.hidden||C.category.hidden,displayOrders:[C.primaryCategory.type,C.primaryCategory.displayOrder,C.category.displayOrder],totalAmount:C.amountInDefaultCurrency},f+=C.amountInDefaultCurrency,C.amountInDefaultCurrency>0&&(F+=C.amountInDefaultCurrency),G[C.category.id]=S}}else if((p.chartDataType===z.TotalOutflows.type||p.chartDataType===z.TotalExpense.type||p.chartDataType===z.TotalInflows.type||p.chartDataType===z.TotalIncome.type||p.chartDataType===z.NetCashFlow.type||p.chartDataType===z.NetIncome.type)&&Ie(C.amountInDefaultCurrency)){let S=G.total,E=C.amountInDefaultCurrency,W=!0;if((p.chartDataType===z.NetCashFlow.type&&(C.category.type===pe.Expense||C.category.type===pe.Transfer&&C.relatedAccountType===kn.TransferTo)||p.chartDataType===z.NetIncome.type&&C.category.type===pe.Expense)&&(E=-E),(p.chartDataType===z.TotalOutflows.type||p.chartDataType===z.TotalInflows.type||p.chartDataType===z.NetCashFlow.type)&&C.relatedAccount&&(!p.filterAccountIds||!p.filterAccountIds[C.relatedAccount.id])&&(W=!1),!S){let V="";p.chartDataType===z.TotalOutflows.type?V=z.TotalOutflows.name:p.chartDataType===z.TotalExpense.type?V=z.TotalExpense.name:p.chartDataType===z.TotalInflows.type?V=z.TotalInflows.name:p.chartDataType===z.TotalIncome.type?V=z.TotalIncome.name:p.chartDataType===z.NetCashFlow.type?V=z.NetCashFlow.name:p.chartDataType===z.NetIncome.type&&(V=z.NetIncome.name),S={name:V,type:"total",id:"total",icon:"",color:"",hidden:!1,displayOrders:[1],totalAmount:0}}W&&(S.totalAmount+=E,f+=E,C.amountInDefaultCurrency>0&&(F+=E)),G.total=S}}}return{totalAmount:f,totalNonNegativeAmount:F,items:G}}function A(T,p){Si(T,p.sortingType)}function w(T){u.value=T}function P(){s.value.chartDataType=z.Default.type,s.value.categoricalChartType=Gt.Default.type,s.value.categoricalChartDateType=as.type,s.value.categoricalChartStartTime=0,s.value.categoricalChartEndTime=0,s.value.trendChartType=It.Default.type,s.value.trendChartDateType=ns.type,s.value.trendChartStartYearMonth="",s.value.trendChartEndYearMonth="",s.value.assetTrendsChartType=It.Default.type,s.value.assetTrendsChartDateType=ss.type,s.value.assetTrendsChartStartTime=0,s.value.assetTrendsChartEndTime=0,s.value.filterAccountIds={},s.value.filterCategoryIds={},s.value.tagIds="",s.value.tagFilterType=Zt.Default.type,s.value.keyword="",r.value=null,l.value=[],u.value=!0}function H(T,p){p&&ct(p.chartDataType)?s.value.chartDataType=p.chartDataType:s.value.chartDataType=e.appSettings.statistics.defaultChartDataType,T===Ee.CategoricalAnalysis||T===Ee.TrendAnalysis?z.isAvailableForAnalysisType(s.value.chartDataType,T)||(s.value.chartDataType=z.Default.type):T===Ee.AssetTrends&&(z.isAvailableForAnalysisType(s.value.chartDataType,T)||(s.value.chartDataType=z.DefaultForAssetTrends.type)),p&&ct(p.categoricalChartType)?s.value.categoricalChartType=p.categoricalChartType:s.value.categoricalChartType=e.appSettings.statistics.defaultCategoricalChartType,Gt.isValidType(s.value.categoricalChartType)||(s.value.categoricalChartType=Gt.Default.type),p&&ct(p.categoricalChartDateType)?s.value.categoricalChartDateType=p.categoricalChartDateType:s.value.categoricalChartDateType=e.appSettings.statistics.defaultCategoricalChartDataRangeType;let G=!0;if(Q.isAvailableForScene(s.value.categoricalChartDateType,ua.Normal)||(s.value.categoricalChartDateType=as.type,G=!1),G&&s.value.categoricalChartDateType===Q.Custom.type)p&&ct(p.categoricalChartStartTime)?s.value.categoricalChartStartTime=p.categoricalChartStartTime:s.value.categoricalChartStartTime=0,p&&ct(p.categoricalChartEndTime)?s.value.categoricalChartEndTime=p.categoricalChartEndTime:s.value.categoricalChartEndTime=0;else{const C=Oa(s.value.categoricalChartDateType,t.currentUserFirstDayOfWeek,t.currentUserFiscalYearStart);C&&(s.value.categoricalChartDateType=C.dateType,s.value.categoricalChartStartTime=C.minTime,s.value.categoricalChartEndTime=C.maxTime)}p&&ct(p.trendChartType)?s.value.trendChartType=p.trendChartType:s.value.trendChartType=e.appSettings.statistics.defaultTrendChartType,It.isValidType(s.value.trendChartType)||(s.value.trendChartType=It.Default.type),p&&ct(p.trendChartDateType)?s.value.trendChartDateType=p.trendChartDateType:s.value.trendChartDateType=e.appSettings.statistics.defaultTrendChartDataRangeType;let f=!0;if(Q.isAvailableForScene(s.value.trendChartDateType,ua.TrendAnalysis)||(s.value.trendChartDateType=ns.type,f=!1),f&&s.value.trendChartDateType===Q.Custom.type)p&&Qn(p.trendChartStartYearMonth)?s.value.trendChartStartYearMonth=p.trendChartStartYearMonth:s.value.trendChartStartYearMonth="",p&&Qn(p.trendChartEndYearMonth)?s.value.trendChartEndYearMonth=p.trendChartEndYearMonth:s.value.trendChartEndYearMonth="";else{const C=Oa(s.value.trendChartDateType,t.currentUserFirstDayOfWeek,t.currentUserFiscalYearStart);C&&(s.value.trendChartDateType=C.dateType,s.value.trendChartStartYearMonth=Sn(C.minTime),s.value.trendChartEndYearMonth=Sn(C.maxTime))}p&&ct(p.assetTrendsChartType)?s.value.assetTrendsChartType=p.assetTrendsChartType:s.value.assetTrendsChartType=e.appSettings.statistics.defaultAssetTrendsChartType,It.isValidType(s.value.assetTrendsChartType)||(s.value.assetTrendsChartType=It.Default.type),p&&ct(p.assetTrendsChartDateType)?s.value.assetTrendsChartDateType=p.assetTrendsChartDateType:s.value.assetTrendsChartDateType=e.appSettings.statistics.defaultAssetTrendsChartDataRangeType;let F=!0;if(Q.isAvailableForScene(s.value.assetTrendsChartDateType,ua.AssetTrends)||(s.value.assetTrendsChartDateType=ss.type,F=!1),F&&s.value.assetTrendsChartDateType===Q.Custom.type)p&&ct(p.assetTrendsChartStartTime)?s.value.assetTrendsChartStartTime=p.assetTrendsChartStartTime:s.value.assetTrendsChartStartTime=0,p&&ct(p.assetTrendsChartEndTime)?s.value.assetTrendsChartEndTime=p.assetTrendsChartEndTime:s.value.assetTrendsChartEndTime=0;else{const C=Oa(s.value.assetTrendsChartDateType,t.currentUserFirstDayOfWeek,t.currentUserFiscalYearStart);C&&(s.value.assetTrendsChartDateType=C.dateType,s.value.assetTrendsChartStartTime=C.minTime,s.value.assetTrendsChartEndTime=C.maxTime)}p&&Ke(p.filterAccountIds)?s.value.filterAccountIds=p.filterAccountIds:s.value.filterAccountIds=e.appSettings.statistics.defaultAccountFilter||{},p&&Ke(p.filterCategoryIds)?s.value.filterCategoryIds=p.filterCategoryIds:s.value.filterCategoryIds=e.appSettings.statistics.defaultTransactionCategoryFilter||{},p&&Ye(p.tagIds)?s.value.tagIds=p.tagIds:s.value.tagIds="",p&&ct(p.tagFilterType)?s.value.tagFilterType=p.tagFilterType:s.value.tagFilterType=Zt.Default.type,p&&Ye(p.keyword)?s.value.keyword=p.keyword:s.value.keyword="",p&&ct(p.sortingType)?s.value.sortingType=p.sortingType:s.value.sortingType=e.appSettings.statistics.defaultSortingType,(s.value.sortingType<Rt.Amount.type||s.value.sortingType>Rt.Name.type)&&(s.value.sortingType=Rt.Default.type)}function _(T){let p=!1;return T&&ct(T.chartDataType)&&s.value.chartDataType!==T.chartDataType&&(s.value.chartDataType=T.chartDataType,p=!0),T&&ct(T.categoricalChartType)&&s.value.categoricalChartType!==T.categoricalChartType&&(s.value.categoricalChartType=T.categoricalChartType,p=!0),T&&ct(T.categoricalChartDateType)&&s.value.categoricalChartDateType!==T.categoricalChartDateType&&(s.value.categoricalChartDateType=T.categoricalChartDateType,p=!0),T&&ct(T.categoricalChartStartTime)&&s.value.categoricalChartStartTime!==T.categoricalChartStartTime&&(s.value.categoricalChartStartTime=T.categoricalChartStartTime,p=!0),T&&ct(T.categoricalChartEndTime)&&s.value.categoricalChartEndTime!==T.categoricalChartEndTime&&(s.value.categoricalChartEndTime=T.categoricalChartEndTime,p=!0),T&&ct(T.trendChartType)&&s.value.trendChartType!==T.trendChartType&&(s.value.trendChartType=T.trendChartType,p=!0),T&&ct(T.trendChartDateType)&&s.value.trendChartDateType!==T.trendChartDateType&&(s.value.trendChartDateType=T.trendChartDateType,p=!0),T&&(Qn(T.trendChartStartYearMonth)||T.trendChartStartYearMonth==="")&&!Xo(s.value.trendChartStartYearMonth,T.trendChartStartYearMonth)&&(s.value.trendChartStartYearMonth=T.trendChartStartYearMonth,p=!0),T&&(Qn(T.trendChartEndYearMonth)||T.trendChartEndYearMonth==="")&&!Xo(s.value.trendChartEndYearMonth,T.trendChartEndYearMonth)&&(s.value.trendChartEndYearMonth=T.trendChartEndYearMonth,p=!0),T&&ct(T.assetTrendsChartType)&&s.value.assetTrendsChartType!==T.assetTrendsChartType&&(s.value.assetTrendsChartType=T.assetTrendsChartType,p=!0),T&&ct(T.assetTrendsChartDateType)&&s.value.assetTrendsChartDateType!==T.assetTrendsChartDateType&&(s.value.assetTrendsChartDateType=T.assetTrendsChartDateType,p=!0),T&&ct(T.assetTrendsChartStartTime)&&s.value.assetTrendsChartStartTime!==T.assetTrendsChartStartTime&&(s.value.assetTrendsChartStartTime=T.assetTrendsChartStartTime,p=!0),T&&ct(T.assetTrendsChartEndTime)&&s.value.assetTrendsChartEndTime!==T.assetTrendsChartEndTime&&(s.value.assetTrendsChartEndTime=T.assetTrendsChartEndTime,p=!0),T&&Ke(T.filterAccountIds)&&!ta(s.value.filterAccountIds,T.filterAccountIds)&&(s.value.filterAccountIds=T.filterAccountIds,p=!0),T&&Ke(T.filterCategoryIds)&&!ta(s.value.filterCategoryIds,T.filterCategoryIds)&&(s.value.filterCategoryIds=T.filterCategoryIds,p=!0),T&&Ye(T.tagIds)&&s.value.tagIds!==T.tagIds&&(s.value.tagIds=T.tagIds,p=!0),T&&ct(T.tagFilterType)&&s.value.tagFilterType!==T.tagFilterType&&(s.value.tagFilterType=T.tagFilterType,p=!0),T&&Ye(T.keyword)&&s.value.keyword!==T.keyword&&(s.value.keyword=T.keyword,p=!0),T&&ct(T.sortingType)&&s.value.sortingType!==T.sortingType&&(s.value.sortingType=T.sortingType,p=!0),p}function Ae(T,p,G){const f=[];if(f.push("analysisType="+T),f.push("chartDataType="+s.value.chartDataType),T===Ee.CategoricalAnalysis?(f.push("chartType="+s.value.categoricalChartType),f.push("chartDateType="+s.value.categoricalChartDateType),s.value.categoricalChartDateType===Q.Custom.type&&(f.push("startTime="+s.value.categoricalChartStartTime),f.push("endTime="+s.value.categoricalChartEndTime))):T===Ee.TrendAnalysis?(f.push("chartType="+s.value.trendChartType),f.push("chartDateType="+s.value.trendChartDateType),s.value.trendChartDateType===Q.Custom.type&&(f.push("startTime="+s.value.trendChartStartYearMonth),f.push("endTime="+s.value.trendChartEndYearMonth)),p!==Xe.Default.type&&f.push("trendDateAggregationType="+p)):T===Ee.AssetTrends&&(f.push("chartType="+s.value.assetTrendsChartType),f.push("chartDateType="+s.value.assetTrendsChartDateType),s.value.assetTrendsChartDateType===Q.Custom.type&&(f.push("startTime="+s.value.assetTrendsChartStartTime),f.push("endTime="+s.value.assetTrendsChartEndTime)),G!==Xe.Default.type&&f.push("assetTrendsDateAggregationType="+G)),s.value.filterAccountIds){const F=ei(s.value.filterAccountIds);F&&F.length&&f.push("filterAccountIds="+F.join(","))}if(s.value.filterCategoryIds){const F=ei(s.value.filterCategoryIds);F&&F.length&&f.push("filterCategoryIds="+F.join(","))}return s.value.tagIds&&f.push("tagIds="+s.value.tagIds),s.value.tagFilterType&&f.push("tagFilterType="+s.value.tagFilterType),s.value.keyword&&f.push("keyword="+encodeURIComponent(s.value.keyword)),f.push("sortingType="+s.value.sortingType),f.join("&")}function de(T,p,G){const f=[];if(s.value.chartDataType===z.IncomeByAccount.type||s.value.chartDataType===z.IncomeByPrimaryCategory.type||s.value.chartDataType===z.IncomeBySecondaryCategory.type||s.value.chartDataType===z.TotalIncome.type?f.push("type=2"):(s.value.chartDataType===z.ExpenseByAccount.type||s.value.chartDataType===z.ExpenseByPrimaryCategory.type||s.value.chartDataType===z.ExpenseBySecondaryCategory.type||s.value.chartDataType===z.TotalExpense.type)&&f.push("type=3"),p&&s.value.chartDataType===z.Overview.type){const F=p.split("-"),C=(F[0]||"").split(":"),S=[],E=[];if(C.length===2&&(C[0]==="account"?S.push(C[1]):C[0]==="category"&&E.push(C[1])),F.length===2){const W=(F[1]||"").split(":");W.length===2&&(W[0]==="account"?S.push(W[1]):W[0]==="category"&&E.push(W[1]))}S.length?(S.length===2&&f.push("type=4"),f.push("accountIds="+S.join(","))):f.push("accountIds="+cs(a.allAccountsMap,s.value.filterAccountIds)),E.length?f.push("categoryIds="+E.join(",")):f.push("categoryIds="+us(n.allTransactionCategoriesMap,s.value.filterCategoryIds))}else p&&(s.value.chartDataType===z.InflowsByAccount.type||s.value.chartDataType===z.IncomeByAccount.type||s.value.chartDataType===z.OutflowsByAccount.type||s.value.chartDataType===z.ExpenseByAccount.type||s.value.chartDataType===z.AccountTotalAssets.type||s.value.chartDataType===z.AccountTotalLiabilities.type)?(f.push("accountIds="+p),(T===Ee.CategoricalAnalysis||T===Ee.TrendAnalysis)&&!nn(s.value.filterCategoryIds)&&f.push("categoryIds="+us(n.allTransactionCategoriesMap,s.value.filterCategoryIds))):p&&(s.value.chartDataType===z.IncomeByPrimaryCategory.type||s.value.chartDataType===z.IncomeBySecondaryCategory.type||s.value.chartDataType===z.ExpenseByPrimaryCategory.type||s.value.chartDataType===z.ExpenseBySecondaryCategory.type)?(f.push("categoryIds="+p),nn(s.value.filterAccountIds)||f.push("accountIds="+cs(a.allAccountsMap,s.value.filterAccountIds))):p||(nn(s.value.filterCategoryIds)||f.push("categoryIds="+us(n.allTransactionCategoriesMap,s.value.filterCategoryIds)),nn(s.value.filterAccountIds)||f.push("accountIds="+cs(a.allAccountsMap,s.value.filterAccountIds)));return(T===Ee.CategoricalAnalysis||T===Ee.TrendAnalysis)&&(s.value.tagIds&&f.push("tagIds="+s.value.tagIds),s.value.tagFilterType&&f.push("tagFilterType="+s.value.tagFilterType),s.value.keyword&&f.push("keyword="+encodeURIComponent(s.value.keyword))),T===Ee.CategoricalAnalysis&&s.value.chartDataType!==z.AccountTotalAssets.type&&s.value.chartDataType!==z.AccountTotalLiabilities.type?(f.push("dateType="+s.value.categoricalChartDateType),s.value.categoricalChartDateType===Q.Custom.type&&(f.push("minTime="+s.value.categoricalChartStartTime),f.push("maxTime="+s.value.categoricalChartEndTime))):(T===Ee.TrendAnalysis||T===Ee.AssetTrends)&&G&&(f.push("dateType="+G.dateType),f.push("minTime="+G.minTime),f.push("maxTime="+G.maxTime)),f.join("&")}function X({force:T}){return new Promise((p,G)=>{ne.getTransactionStatistics({startTime:s.value.categoricalChartStartTime,endTime:s.value.categoricalChartEndTime,tagIds:s.value.tagIds,tagFilterType:s.value.tagFilterType,keyword:s.value.keyword,useTransactionTimezone:e.appSettings.statistics.defaultTimezoneType===na.TransactionTimezone.type}).then(f=>{const F=f.data;if(!F||!F.success||!F.result){G({message:"Unable to retrieve transaction statistics"});return}if(u.value&&w(!1),T&&F.result&&ta(r.value,F.result)){G({message:"Data is up to date",isUpToDate:!0});return}r.value=F.result,p(F.result)}).catch(f=>{Z.error("failed to retrieve transaction statistics",f),f.response&&f.response.data&&f.response.data.errorMessage?G({error:f.response.data}):f.processed?G(f):G({message:"Unable to retrieve transaction statistics"})})})}function me({force:T}){return new Promise((p,G)=>{ne.getTransactionStatisticsTrends({startYearMonth:s.value.trendChartStartYearMonth,endYearMonth:s.value.trendChartEndYearMonth,tagIds:s.value.tagIds,tagFilterType:s.value.tagFilterType,keyword:s.value.keyword,useTransactionTimezone:e.appSettings.statistics.defaultTimezoneType===na.TransactionTimezone.type}).then(f=>{const F=f.data;if(!F||!F.success||!F.result){G({message:"Unable to retrieve transaction statistics"});return}if(u.value&&w(!1),T&&F.result&&ta(l.value,F.result)){G({message:"Data is up to date",isUpToDate:!0});return}l.value=F.result,p(F.result)}).catch(f=>{Z.error("failed to retrieve transaction statistics",f),f.response&&f.response.data&&f.response.data.errorMessage?G({error:f.response.data}):f.processed?G(f):G({message:"Unable to retrieve transaction statistics"})})})}function ae({force:T}){return new Promise((p,G)=>{ne.getTransactionStatisticsAssetTrends({startTime:s.value.assetTrendsChartStartTime,endTime:s.value.assetTrendsChartEndTime}).then(f=>{const F=f.data;if(!F||!F.success||!F.result){G({message:"Unable to retrieve transaction statistics"});return}if(u.value&&w(!1),T&&F.result&&ta(i.value,F.result)){G({message:"Data is up to date",isUpToDate:!0});return}i.value=F.result,p(F.result)}).catch(f=>{Z.error("failed to retrieve transaction statistics",f),f.response&&f.response.data&&f.response.data.errorMessage?G({error:f.response.data}):f.processed?G(f):G({message:"Unable to retrieve transaction statistics"})})})}return{transactionStatisticsFilter:s,transactionCategoryStatisticsData:r,transactionCategoryTrendsData:l,transactionStatisticsStateInvalid:u,categoricalAnalysisChartDataCategory:m,categoricalOverviewAnalysisData:I,categoricalAnalysisData:U,trendsAnalysisData:x,assetTrendsData:N,updateTransactionStatisticsInvalidState:w,resetTransactionStatistics:P,initTransactionStatisticsFilter:H,updateTransactionStatisticsFilter:_,getTransactionStatisticsPageParams:Ae,getTransactionListPageParams:de,loadCategoricalAnalysis:X,loadTrendAnalysis:me,loadAssetTrends:ae}}),Cr=-99999999999,Dr=99999999999,Du=10;class Sr{type;categoryId;originalCategoryName;time;utcOffset;sourceAccountId;originalSourceAccountName;originalSourceAccountCurrency;destinationAccountId;originalDestinationAccountName;originalDestinationAccountCurrency;sourceAmount;destinationAmount;tagIds;originalTagNames;comment;geoLocation;actualCategoryName;actualSourceAccountName;actualDestinationAccountName;index;selected;valid;constructor(t,a){this.type=t.type,this.categoryId=t.categoryId,this.originalCategoryName=t.originalCategoryName,this.time=t.time,this.utcOffset=t.utcOffset,this.sourceAccountId=t.sourceAccountId,this.originalSourceAccountName=t.originalSourceAccountName,this.originalSourceAccountCurrency=t.originalSourceAccountCurrency,this.destinationAccountId=t.destinationAccountId||"",this.originalDestinationAccountName=t.originalDestinationAccountName,this.originalDestinationAccountCurrency=t.originalDestinationAccountCurrency,this.sourceAmount=t.sourceAmount,this.destinationAmount=t.destinationAmount||0,this.tagIds=t.tagIds||[],this.originalTagNames=t.originalTagNames||[],this.comment=t.comment,this.geoLocation=t.geoLocation,this.actualCategoryName=t.originalCategoryName,this.actualSourceAccountName=t.originalSourceAccountName,this.actualDestinationAccountName=t.originalDestinationAccountName,this.index=a,this.selected=!1,this.valid=this.isTransactionValid()}toCreateRequest(){return{type:this.type,categoryId:this.categoryId,time:this.time,utcOffset:this.utcOffset,sourceAccountId:this.sourceAccountId,destinationAccountId:this.type===ue.Transfer?this.destinationAccountId:"0",sourceAmount:this.sourceAmount,destinationAmount:this.type===ue.Transfer?this.destinationAmount:0,hideAmount:!1,tagIds:this.tagIds,pictureIds:[],comment:this.comment,geoLocation:this.geoLocation,clientSessionId:""}}isTransactionValid(){if(this.type!==ue.ModifyBalance&&(!this.categoryId||this.categoryId==="0")||!this.sourceAccountId||this.sourceAccountId==="0"||this.type===ue.Transfer&&(!this.destinationAccountId||this.destinationAccountId==="0"))return!1;if(this.tagIds&&this.tagIds.length){for(const t of this.tagIds)if(!t||t==="0")return!1}return!0}static of(t,a){return new Sr(t,a)}}const qa=Ht("transactions",()=>{const e=mt(),t=Nt(),a=sa(),n=Ca(),o=cn(),s=un(),r=da(),l=q(ni()),i=q({dateType:Q.All.type,maxTime:0,minTime:0,type:0,categoryIds:"",accountIds:"",tagIds:"",tagFilterType:Zt.Default.type,amountFilter:"",keyword:""}),u=q([]),m=q(0),b=q(!0),v=q(!0),I=c(()=>ks(i.value.categoryIds,",")),k=c(()=>ks(i.value.accountIds,",")),U=c(()=>ks(i.value.tagIds,",")),R=c(()=>Us(i.value.categoryIds,",")),x=c(()=>Us(i.value.accountIds,",")),B=c(()=>Us(i.value.tagIds,",")),N=c(()=>{for(const L of u.value)for(const oe of L.items)if(oe)return!1;return!0}),K=c(()=>m.value>0);function D({transactionPageWrapper:L,reload:oe,autoExpand:ce,defaultCurrency:ie,nextTimeSequenceId:j}){if(oe&&(u.value=[]),L.items&&L.items.length){const te=Ct(e.appSettings.timeZone);let he=-1,we=null;for(const[Fe,ke]of Ze(L.items)){w(Fe,te);const se=St(Fe.time,Fe.utcOffset,te),ye=se.getGregorianCalendarYear(),Be=se.getGregorianCalendarMonth(),Tt=se.getGregorianCalendarYearDashMonth();if(ke===0&&u.value.length>0){const Te=u.value[u.value.length-1];(Te.totalAmount.incompleteExpense||Te.totalAmount.incompleteIncome)&&A(Te,ie,i.value.accountIds,!1)}if(we&&we.year===ye&&we.month===Be){we.items.push(Object.freeze(Fe)),ke===L.items.length-1&&A(we,ie,i.value.accountIds,!0);continue}for(let Te=he+1;Te<u.value.length;Te++)if(u.value[Te].year===ye&&u.value[Te].month===Be){he=Te,we=u.value[Te];break}if(!we||we.year!==ye||we.month!==Be){A(we,ie,i.value.accountIds,!1);const Te={year:ye,month:Be,yearDashMonth:Tt,opened:ce,items:[],totalAmount:{expense:0,incompleteExpense:!0,income:0,incompleteIncome:!0},dailyTotalAmounts:{}};u.value.push(Te),he=u.value.length-1,we=u.value[u.value.length-1]}we.items.push(Object.freeze(Fe)),A(we,ie,i.value.accountIds,!0)}}j?m.value=j:(A(u.value[u.value.length-1],ie,i.value.accountIds,!1),m.value=-1)}function Y({currentTransaction:L,defaultCurrency:oe}){const ce=Ct(e.appSettings.timeZone),ie=St(L.time,L.utcOffset,ce),j=ie.getGregorianCalendarYear(),te=ie.getGregorianCalendarMonth();for(const[he,we]of Ze(u.value))if(he.items){for(const[Fe,ke]of Ze(he.items))if(Fe.id===L.id){if(w(L,ce),j!==he.year||te!==he.month||L.gregorianCalendarDayOfMonth!==Fe.gregorianCalendarDayOfMonth){b.value=!0;return}i.value.categoryIds&&!I.value[L.categoryId]||i.value.accountIds&&!k.value[L.sourceAccountId]&&!k.value[L.destinationAccountId]&&(!L.sourceAccount||!k.value[L.sourceAccount.parentId])&&(!L.destinationAccount||!k.value[L.destinationAccount.parentId])?he.items.splice(ke,1):he.items.splice(ke,1,L),he.items.length<1?u.value.splice(we,1):A(he,oe,i.value.accountIds,we>=u.value.length-1&&m.value>0);return}}}function g({currentTransaction:L,defaultCurrency:oe}){for(const[ce,ie]of Ze(u.value))if(!(!ce.items||ce.items[0].time<L.time||ce.items[ce.items.length-1].time>L.time)){for(const[j,te]of Ze(ce.items))j.id===L.id&&ce.items.splice(te,1);ce.items.length<1?u.value.splice(ie,1):A(ce,oe,i.value.accountIds,ie>=u.value.length-1&&m.value>0)}}function A(L,oe,ce,ie){if(!L)return;let j=0,te=0,he=!1,we=!1;const Fe={},ke={};let se=0;if(ce&&ce!=="0"){const ye=ce.split(",");for(const Be of ye)Be&&(ke[Be]=!0,se++)}for(const ye of L.items){const Be=Ie(ye.gregorianCalendarDayOfMonth)?ye.gregorianCalendarDayOfMonth.toString():"0";let Tt=Fe[Be];Tt||(Tt={expense:0,incompleteExpense:!1,income:0,incompleteIncome:!1},Fe[Be]=Tt);let Te=ye.sourceAmount,Re=ye.sourceAccount;if(se>0&&ye.destinationAccount&&!ke[ye.sourceAccount?.id||""]&&!ke[ye.sourceAccount?.parentId||""]&&(ke[ye.destinationAccount.id]||ke[ye.destinationAccount.parentId])&&(Te=ye.destinationAmount,Re=ye.destinationAccount),!!Re){if(Re.currency!==oe){const tt=r.getExchangedAmount(Te,Re.currency,oe);if(!Ie(tt)){ye.type===ue.Expense?(he=!0,Tt.incompleteExpense=!0):ye.type===ue.Income&&(we=!0,Tt.incompleteIncome=!0);continue}Te=tt}ye.type===ue.Expense?(j+=Te,Tt.expense+=Te):ye.type===ue.Income?(te+=Te,Tt.income+=Te):ye.type===ue.Transfer&&se>0&&(ke[ye.sourceAccountId]&&ke[ye.destinationAccountId]||ye.sourceAccount&&ye.destinationAccount&&ke[ye.sourceAccount.parentId]&&ke[ye.destinationAccount.parentId]||ye.sourceAccount&&ke[ye.sourceAccount.parentId]&&ke[ye.destinationAccountId]||ye.destinationAccount&&ke[ye.sourceAccountId]&&ke[ye.destinationAccount.parentId]||(ke[ye.sourceAccountId]||ye.sourceAccount&&ke[ye.sourceAccount.parentId]?(j+=Te,Tt.expense+=Te):(ke[ye.destinationAccountId]||ye.destinationAccount&&ke[ye.destinationAccount.parentId])&&(te+=Te,Tt.income+=Te)))}}L.totalAmount.expense=Math.trunc(j),L.totalAmount.incompleteExpense=ie||he,L.totalAmount.income=Math.trunc(te),L.totalAmount.incompleteIncome=ie||we;for(const ye of Mt(L.dailyTotalAmounts))delete L.dailyTotalAmounts[ye];for(const[ye,Be]of Wt(Fe))L.dailyTotalAmounts[ye]={expense:Math.trunc(Be.expense),incompleteExpense:ie||Be.incompleteExpense,income:Math.trunc(Be.income),incompleteIncome:ie||Be.incompleteIncome}}function w(L,oe){if(!L)return;const ce=St(L.time,L.utcOffset,oe);L.setDisplayDate(ce.getGregorianCalendarYearDashMonthDashDay(),ce.getGregorianCalendarDay(),ce.getWeekDay()),L.sourceAccountId&&L.setSourceAccount(a.allAccountsMap[L.sourceAccountId]),L.destinationAccountId&&L.setDestinationAccount(a.allAccountsMap[L.destinationAccountId]),L.categoryId&&L.setCategory(n.allTransactionCategoriesMap[L.categoryId])}function P(){e.appSettings.autoSaveTransactionDraft==="enabled"||e.appSettings.autoSaveTransactionDraft==="confirmation"?l.value=ni():l.value=null}function H(L,oe,ce,ie,j,te){if(!L)return!1;if(L.sourceAmount!==0&&L.sourceAmount!==oe||L.type===ue.Transfer&&L.destinationAmount!==0||L.sourceAccountId&&L.sourceAccountId!=="0"&&L.sourceAccountId!==t.currentUserDefaultAccountId&&(t.currentUserDefaultAccountId!==""&&t.currentUserDefaultAccountId!=="0"||L.sourceAccountId!==te)&&L.sourceAccountId!==ie||L.type===ue.Transfer&&L.destinationAccountId&&L.destinationAccountId!=="0"&&L.destinationAccountId!==t.currentUserDefaultAccountId&&L.destinationAccountId!==ie)return!0;const he=n.allTransactionCategories;if(he){if(L.type===ue.Expense){const we=Fa(he[pe.Expense]);if(L.expenseCategoryId&&L.expenseCategoryId!=="0"&&L.expenseCategoryId!==we&&L.expenseCategoryId!==ce)return!0}else if(L.type===ue.Income){const we=Fa(he[pe.Income]);if(L.incomeCategoryId&&L.incomeCategoryId!=="0"&&L.incomeCategoryId!==we&&L.incomeCategoryId!==ce)return!0}else if(L.type===ue.Transfer){const we=Fa(he[pe.Transfer]);if(L.transferCategoryId&&L.transferCategoryId!=="0"&&L.transferCategoryId!==we&&L.transferCategoryId!==ce)return!0}}return L.hideAmount?!0:L.tagIds&&L.tagIds.length>0?!j||!bl(L.tagIds,j.split(",")):!!(L.pictures&&L.pictures.length>0||L.comment&&L.comment.trim())}function _(L,oe,ce,ie,j,te){if(e.appSettings.autoSaveTransactionDraft!=="enabled"&&e.appSettings.autoSaveTransactionDraft!=="confirmation"){Ae();return}if(L){if(!H(L,oe,ce,ie,j,te)){Ae();return}l.value=L.toTransactionDraft()}Vl(l.value)}function Ae(){l.value=null,$i()}function de(L,oe,ce){if(L.type===ue.Expense||L.type===ue.Income)L.destinationAmount=ce;else if(L.type===ue.Transfer){const ie=a.allAccountsMap[L.sourceAccountId],j=a.allAccountsMap[L.destinationAccountId];if(ie&&j&&ie.currency!==j.currency){const te=hr(j.currency),he=r.getExchangedAmount(oe,ie.currency,j.currency),we=r.getExchangedAmount(ce,ie.currency,j.currency);if(Ie(te)&&Ie(he)&&(oe=Math.trunc(he),oe=Ti(oe,te)),Ie(te)&&Ie(we))ce=Math.trunc(we),ce=Ti(ce,te);else return}(!ie||!j||L.destinationAmount===oe||L.destinationAmount===0)&&Cr<=ce&&ce<=Dr&&(L.destinationAmount=ce)}}function X(L){b.value=L}function me(L){v.value=L}function ae(){i.value.dateType=Q.All.type,i.value.maxTime=0,i.value.minTime=0,i.value.type=0,i.value.categoryIds="",i.value.accountIds="",i.value.tagIds="",i.value.tagFilterType=Zt.Default.type,i.value.amountFilter="",i.value.keyword="",u.value=[],m.value=0,b.value=!0,v.value=!0}function T(){u.value=[],m.value=0,b.value=!0}function p(L){L&&Ie(L.dateType)?i.value.dateType=L.dateType:i.value.dateType=Q.All.type,L&&Ie(L.maxTime)?i.value.maxTime=L.maxTime:i.value.maxTime=0,L&&Ie(L.minTime)?i.value.minTime=L.minTime:i.value.minTime=0,L&&Ie(L.type)?i.value.type=L.type:i.value.type=0,L&&Ye(L.categoryIds)?i.value.categoryIds=L.categoryIds:i.value.categoryIds="",L&&Ye(L.accountIds)?i.value.accountIds=L.accountIds:i.value.accountIds="",L&&Ye(L.tagIds)?i.value.tagIds=L.tagIds:i.value.tagIds="",L&&Ie(L.tagFilterType)?i.value.tagFilterType=L.tagFilterType:i.value.tagFilterType=Zt.Default.type,L&&Ye(L.amountFilter)?i.value.amountFilter=L.amountFilter:i.value.amountFilter="",L&&Ye(L.keyword)?i.value.keyword=L.keyword:i.value.keyword=""}function G(L){let oe=!1;return L&&Ie(L.dateType)&&i.value.dateType!==L.dateType&&(i.value.dateType=L.dateType,oe=!0),L&&Ie(L.maxTime)&&i.value.maxTime!==L.maxTime&&(i.value.maxTime=L.maxTime,oe=!0),L&&Ie(L.minTime)&&i.value.minTime!==L.minTime&&(i.value.minTime=L.minTime,oe=!0),L&&Ie(L.type)&&i.value.type!==L.type&&(i.value.type=L.type,oe=!0),L&&Ye(L.categoryIds)&&i.value.categoryIds!==L.categoryIds&&(i.value.categoryIds=L.categoryIds,oe=!0),L&&Ye(L.accountIds)&&i.value.accountIds!==L.accountIds&&(Q.isBillingCycle(i.value.dateType)&&(!a.getAccountStatementDate(L.accountIds)||a.getAccountStatementDate(L.accountIds)!==a.getAccountStatementDate(i.value.accountIds))&&(i.value.dateType=Q.Custom.type),i.value.accountIds=L.accountIds,oe=!0),L&&Ye(L.tagIds)&&i.value.tagIds!==L.tagIds&&(i.value.tagIds=L.tagIds,oe=!0),L&&Ie(L.tagFilterType)&&i.value.tagFilterType!==L.tagFilterType&&(i.value.tagFilterType=L.tagFilterType,oe=!0),L&&Ye(L.amountFilter)&&i.value.amountFilter!==L.amountFilter&&(i.value.amountFilter=L.amountFilter,oe=!0),L&&Ye(L.keyword)&&i.value.keyword!==L.keyword&&(i.value.keyword=L.keyword,oe=!0),oe}function f(L){const oe=[];return oe.push("pageType="+L),i.value.type&&oe.push("type="+i.value.type),i.value.accountIds&&oe.push("accountIds="+i.value.accountIds),i.value.categoryIds&&oe.push("categoryIds="+i.value.categoryIds),i.value.tagIds&&oe.push("tagIds="+i.value.tagIds),i.value.tagFilterType&&oe.push("tagFilterType="+i.value.tagFilterType),oe.push("dateType="+i.value.dateType),(Q.isBillingCycle(i.value.dateType)||i.value.dateType===Q.Custom.type)&&(oe.push("maxTime="+i.value.maxTime),oe.push("minTime="+i.value.minTime)),i.value.amountFilter&&oe.push("amountFilter="+encodeURIComponent(i.value.amountFilter)),i.value.keyword&&oe.push("keyword="+encodeURIComponent(i.value.keyword)),oe.join("&")}function F(){return{maxTime:i.value.maxTime,minTime:i.value.minTime,type:i.value.type,categoryIds:i.value.categoryIds,accountIds:i.value.accountIds,tagIds:i.value.tagIds,tagFilterType:i.value.tagFilterType,amountFilter:i.value.amountFilter,keyword:i.value.keyword}}function C({reload:L,count:oe,page:ce,withCount:ie,autoExpand:j,defaultCurrency:te}){let he=m.value;return L&&i.value.maxTime>0?he=i.value.maxTime*1e3+999:L&&i.value.maxTime<=0&&(he=0),new Promise((we,Fe)=>{ne.getTransactions({maxTime:he,minTime:i.value.minTime*1e3,count:oe||50,page:ce||1,withCount:!!ie,type:i.value.type,categoryIds:i.value.categoryIds,accountIds:i.value.accountIds,tagIds:i.value.tagIds,tagFilterType:i.value.tagFilterType,amountFilter:i.value.amountFilter,keyword:i.value.keyword}).then(ke=>{const se=ke.data;if(!se||!se.success||!se.result){L&&(D({transactionPageWrapper:es,reload:L,autoExpand:j,defaultCurrency:te}),b.value||X(!0)),Fe({message:"Unable to retrieve transaction list"});return}const ye={items:Aa.ofMulti(se.result.items),totalCount:se.result.totalCount};D({transactionPageWrapper:ye,reload:!!L,autoExpand:j,defaultCurrency:te,nextTimeSequenceId:se.result.nextTimeSequenceId}),L&&b.value&&X(!1),we(ye)}).catch(ke=>{Z.error("failed to load transaction list",ke),L&&(D({transactionPageWrapper:es,reload:L,autoExpand:j,defaultCurrency:te}),b.value||X(!0)),ke.response&&ke.response.data&&ke.response.data.errorMessage?Fe({error:ke.response.data}):ke.processed?Fe(ke):Fe({message:"Unable to retrieve transaction list"})})})}function S({year:L,month:oe,autoExpand:ce,defaultCurrency:ie}){return new Promise((j,te)=>{ne.getAllTransactionsByMonth({year:L,month:oe,type:i.value.type,categoryIds:i.value.categoryIds,accountIds:i.value.accountIds,tagIds:i.value.tagIds,tagFilterType:i.value.tagFilterType,amountFilter:i.value.amountFilter,keyword:i.value.keyword}).then(he=>{const we=he.data;if(!we||!we.success||!we.result){D({transactionPageWrapper:es,reload:!0,autoExpand:ce,defaultCurrency:ie}),b.value||X(!0),te({message:"Unable to retrieve transaction list"});return}const Fe={items:Aa.ofMulti(we.result.items),totalCount:we.result.totalCount};D({transactionPageWrapper:Fe,reload:!0,autoExpand:ce,defaultCurrency:ie}),b.value&&X(!1),j(Fe)}).catch(he=>{Z.error("failed to load monthly all transaction list",he),D({transactionPageWrapper:es,reload:!0,autoExpand:ce,defaultCurrency:ie}),b.value||X(!0),he.response&&he.response.data&&he.response.data.errorMessage?te({error:he.response.data}):he.processed?te(he):te({message:"Unable to retrieve transaction list"})})})}function E({accountId:L,startTime:oe,endTime:ce}){return new Promise((ie,j)=>{ne.getReconciliationStatements({accountId:L,startTime:oe,endTime:ce}).then(te=>{const he=te.data;if(!he||!he.success||!he.result){v.value||me(!0),j({message:"Unable to retrieve reconciliation statements"});return}v.value&&me(!1),ie(he.result)}).catch(te=>{Z.error("failed to load reconciliation statements",te),v.value||me(!0),te.response&&te.response.data&&te.response.data.errorMessage?j({error:te.response.data}):te.processed?j(te):j({message:"Unable to retrieve reconciliation statements"})})})}function W({transactionId:L,withPictures:oe}){return new Promise((ce,ie)=>{yt(oe)||(oe=!0),ne.getTransaction({id:L,withPictures:oe}).then(j=>{const te=j.data;if(!te||!te.success||!te.result){ie({message:"Unable to retrieve transaction"});return}const he=Aa.of(te.result);ce(he)}).catch(j=>{Z.error("failed to load transaction info",j),j.response&&j.response.data&&j.response.data.errorMessage?ie({error:j.response.data}):j.processed?ie(j):ie({message:"Unable to retrieve transaction"})})})}function V({transaction:L,defaultCurrency:oe,isEdit:ce,clientSessionId:ie}){return new Promise((j,te)=>{const he=yn(L.time,L.utcOffset,_t());let we;if(L.type!==ue.Expense&&L.type!==ue.Income&&L.type!==ue.Transfer&&L.type!==ue.ModifyBalance){te({message:"An error occurred"});return}else if(!ce&&L.type===ue.ModifyBalance){te({message:"An error occurred"});return}ce?we=ne.modifyTransaction(L.toModifyRequest(he)):we=ne.addTransaction(L.toCreateRequest(ie,he)),we.then(Fe=>{const ke=Fe.data;(!ke||!ke.success||!ke.result)&&te(ce?{message:"Unable to save transaction"}:{message:"Unable to add transaction"});const se=Aa.of(ke.result);ce?Y({currentTransaction:se,defaultCurrency:oe}):b.value||X(!0),v.value||me(!0),a.accountListStateInvalid||a.updateAccountListInvalidState(!0),o.transactionOverviewStateInvalid||o.updateTransactionOverviewInvalidState(!0),s.transactionStatisticsStateInvalid||s.updateTransactionStatisticsInvalidState(!0),j(se)}).catch(Fe=>{Z.error("failed to save transaction",Fe),Fe.response&&Fe.response.data&&Fe.response.data.errorMessage?te({error:Fe.response.data}):Fe.processed?te(Fe):te(ce?{message:"Unable to save transaction"}:{message:"Unable to add transaction"})})})}function J({fromAccountId:L,toAccountId:oe}){return new Promise((ce,ie)=>{ne.moveAllTransactionsBetweenAccounts({fromAccountId:L,toAccountId:oe}).then(j=>{const te=j.data;if(!te||!te.success||!te.result){ie({message:"Unable to move transactions"});return}b.value||X(!0),v.value||me(!0),a.accountListStateInvalid||a.updateAccountListInvalidState(!0),o.transactionOverviewStateInvalid||o.updateTransactionOverviewInvalidState(!0),s.transactionStatisticsStateInvalid||s.updateTransactionStatisticsInvalidState(!0),ce(te.result)}).catch(j=>{Z.error("failed to move transactions",j),j.response&&j.response.data&&j.response.data.errorMessage?ie({error:j.response.data}):j.processed?ie(j):ie({message:"Unable to move transactions"})})})}function h({transaction:L,defaultCurrency:oe,beforeResolve:ce}){return new Promise((ie,j)=>{ne.deleteTransaction({id:L.id}).then(te=>{const he=te.data;if(!he||!he.success||!he.result){j({message:"Unable to delete this transaction"});return}ce?ce(()=>{g({currentTransaction:L,defaultCurrency:oe})}):g({currentTransaction:L,defaultCurrency:oe}),v.value||me(!0),a.accountListStateInvalid||a.updateAccountListInvalidState(!0),o.transactionOverviewStateInvalid||o.updateTransactionOverviewInvalidState(!0),s.transactionStatisticsStateInvalid||s.updateTransactionStatisticsInvalidState(!0),ie(he.result)}).catch(te=>{Z.error("failed to delete transaction",te),te.response&&te.response.data&&te.response.data.errorMessage?j({error:te.response.data}):te.processed?j(te):j({message:"Unable to delete this transaction"})})})}function O({imageFile:L,cancelableUuid:oe}){return new Promise((ce,ie)=>{ne.recognizeReceiptImage({imageFile:L,cancelableUuid:oe}).then(j=>{const te=j.data;if(!te||!te.success||!te.result){ie({message:"Unable to recognize image"});return}ce(te.result)}).catch(j=>{j.canceled&&ie(j),Z.error("failed to recognize image",j),j.response&&j.response.data&&j.response.data.errorMessage?ie({error:j.response.data}):j.processed?ie(j):ie({message:"Unable to recognize image"})})})}function fe(L){ne.cancelRequest(L)}function ge({fileType:L,fileEncoding:oe,importFile:ce}){return new Promise((ie,j)=>{ne.parseImportDsvFile({fileType:L,fileEncoding:oe,importFile:ce}).then(te=>{const he=te.data;if(!he||!he.success||!he.result){j({message:"Unable to parse import file"});return}ie(he.result)}).catch(te=>{Z.error("Unable to parse import file",te),te.response&&te.response.data&&te.response.data.errorMessage?j({error:te.response.data}):te.processed?j(te):j({message:"Unable to parse import file"})})})}function Se({fileType:L,fileEncoding:oe,importFile:ce,columnMapping:ie,transactionTypeMapping:j,hasHeaderLine:te,timeFormat:he,timezoneFormat:we,amountDecimalSeparator:Fe,amountDigitGroupingSymbol:ke,geoSeparator:se,geoOrder:ye,tagSeparator:Be}){return new Promise((Tt,Te)=>{ne.parseImportTransaction({fileType:L,fileEncoding:oe,importFile:ce,columnMapping:ie,transactionTypeMapping:j,hasHeaderLine:te,timeFormat:he,timezoneFormat:we,amountDecimalSeparator:Fe,amountDigitGroupingSymbol:ke,geoSeparator:se,geoOrder:ye,tagSeparator:Be}).then(Re=>{const tt=Re.data;if(!tt||!tt.success||!tt.result){Te({message:"Unable to parse import file"});return}Tt(tt.result)}).catch(Re=>{Z.error("Unable to parse import file",Re),Re.response&&Re.response.data&&Re.response.data.errorMessage?Te({error:Re.response.data}):Re.processed?Te(Re):Te({message:"Unable to parse import file"})})})}function be({transactions:L,clientSessionId:oe}){const ce=[];if(L)for(const ie of L){const j=ie.toCreateRequest();ce.push(j)}return new Promise((ie,j)=>{ne.importTransactions({transactions:ce,clientSessionId:oe}).then(te=>{const he=te.data;if(!he||!he.success||!he.result){j({message:"Unable to import transactions"});return}ie(he.result)}).catch(te=>{Z.error("Unable to import transactions",te),te.response&&te.response.data&&te.response.data.errorMessage?j({error:te.response.data}):te.processed?j(te):j({message:"Unable to import transactions"})})})}function Ue({clientSessionId:L}){return new Promise((oe,ce)=>{ne.getImportTransactionsProcess(L).then(ie=>{const j=ie.data;if(!j||!j.success||!j.result){ce({message:"Unable to get transactions import process"});return}oe(j.result)}).catch(ie=>{Z.error("Unable to get transactions import process",ie),ie.response&&ie.response.data&&ie.response.data.errorMessage?ce({error:ie.response.data}):ie.processed?ce(ie):ce({message:"Unable to get transactions import process"})})})}function $e({pictureFile:L,clientSessionId:oe}){return new Promise((ce,ie)=>{ne.uploadTransactionPicture({pictureFile:L,clientSessionId:oe}).then(j=>{const te=j.data;if(!te||!te.success||!te.result){ie({message:"Unable to upload transaction picture"});return}ce(te.result)}).catch(j=>{Z.error("Unable to upload transaction picture",j),j.response&&j.response.data&&j.response.data.errorMessage?ie({error:j.response.data}):j.processed?ie(j):ie({message:"Unable to upload transaction picture"})})})}function Ne({pictureInfo:L}){return new Promise((oe,ce)=>{ne.removeUnusedTransactionPicture({id:L.pictureId}).then(ie=>{const j=ie.data;if(!j||!j.success||!j.result){ce({message:"Unable to remove transaction picture"});return}oe(j.result)}).catch(ie=>{Z.error("failed to remove transaction picture",ie),ie.response&&ie.response.data&&ie.response.data.errorMessage?ce({error:ie.response.data}):ie.processed?ce(ie):ce({message:"Unable to remove transaction picture"})})})}function xe(L,oe){if(!(!L||!L.originalUrl))return ne.getTransactionPictureUrlWithToken(L.originalUrl,oe)}function ze({monthList:L,collapse:oe}){L&&(L.opened=!oe)}return{transactionDraft:l,transactionsFilter:i,transactions:u,transactionsNextTimeId:m,transactionListStateInvalid:b,transactionReconciliationStatementStateInvalid:v,allFilterCategoryIds:I,allFilterAccountIds:k,allFilterTagIds:U,allFilterCategoryIdsCount:R,allFilterAccountIdsCount:x,allFilterTagIdsCount:B,noTransaction:N,hasMoreTransaction:K,initTransactionDraft:P,isTransactionDraftModified:H,saveTransactionDraft:_,clearTransactionDraft:Ae,setTransactionSuitableDestinationAmount:de,updateTransactionListInvalidState:X,updateTransactionReconciliationStatementInvalidState:me,resetTransactions:ae,clearTransactions:T,initTransactionListFilter:p,updateTransactionListFilter:G,getTransactionListPageParams:f,getExportTransactionDataRequestByTransactionFilter:F,loadTransactions:C,loadMonthlyAllTransactions:S,getReconciliationStatements:E,getTransaction:W,saveTransaction:V,moveAllTransactionsBetweenAccounts:J,deleteTransaction:h,recognizeReceiptImage:O,cancelRecognizeReceiptImage:fe,parseImportDsvFile:ge,parseImportTransaction:Se,importTransactions:be,getImportTransactionsProcess:Ue,uploadTransactionPicture:$e,removeUnusedTransactionPicture:Ne,getTransactionPictureUrl:xe,collapseMonthInTransactionList:ze}}),Eo=Ht("root",()=>{const e=mt(),t=Nt(),a=sa(),n=Ca(),o=Ss(),s=Iu(),r=qa(),l=cn(),i=un(),u=da(),m=q(null);function b(X){X&&u.resetLatestExchangeRates(),v(null),i.resetTransactionStatistics(),l.resetTransactionOverview(),r.resetTransactions(),o.resetTransactionTags(),n.resetTransactionCategories(),s.resetTransactionTemplates(),a.resetAccounts(),X&&t.resetUserBasicInfo()}function v(X){m.value=X}function I(X,me){return ne.generateOAuth2LoginUrl(X,me)}function k(X,me){return ne.generateOAuth2LinkUrl(X,me)}function U(X){return new Promise((me,ae)=>{ne.authorize(X).then(T=>{const p=T.data;if(!p||!p.success||!p.result||!p.result.token){ae({message:"Unable to log in"});return}if(p.result.need2FA){me(p.result);return}if(e.appSettings.applicationLock||os()){const G=Ua();(!G||G.username!==p.result.user?.username)&&(gn(!0),e.setEnableApplicationLock(!1),e.setEnableApplicationLockWebAuthn(!1),mn())}e.setApplicationSettingsFromCloudSettings(p.result.applicationCloudSettings),za(p.result.token),p.result.user&&Ke(p.result.user)&&t.storeUserBasicInfo(p.result.user),me(p.result)}).catch(T=>{Z.error("failed to login",T),T&&T.processed?ae(T):T.response&&T.response.data&&T.response.data.errorMessage?ae({error:T.response.data}):ae({message:"Unable to log in"})})})}function R({token:X,passcode:me,recoveryCode:ae}){return new Promise((T,p)=>{let G;if(me)G=ne.authorize2FA({passcode:me,token:X});else if(ae)G=ne.authorize2FAByBackupCode({recoveryCode:ae,token:X});else{p({message:"An error occurred"});return}G.then(f=>{const F=f.data;if(!F||!F.success||!F.result||!F.result.token){p({message:"Unable to verify"});return}if(e.appSettings.applicationLock||os()){const C=Ua();(!C||C.username!==F.result.user?.username)&&(gn(!0),e.setEnableApplicationLock(!1),e.setEnableApplicationLockWebAuthn(!1),mn())}e.setApplicationSettingsFromCloudSettings(F.result.applicationCloudSettings),za(F.result.token),F.result.user&&Ke(F.result.user)&&t.storeUserBasicInfo(F.result.user),T(F.result)}).catch(f=>{Z.error("failed to verify 2fa",f),f&&f.processed?p(f):f.response&&f.response.data&&f.response.data.errorMessage?p({error:f.response.data}):p({message:"Unable to verify"})})})}function x({password:X,passcode:me,callbackToken:ae}){return new Promise((T,p)=>{ne.authorizeOAuth2({password:X,passcode:me,callbackToken:ae}).then(G=>{const f=G.data;if(!f||!f.success||!f.result||!f.result.token){p({message:"Unable to log in"});return}if(e.appSettings.applicationLock||os()){const F=Ua();(!F||F.username!==f.result.user?.username)&&(gn(!0),e.setEnableApplicationLock(!1),e.setEnableApplicationLockWebAuthn(!1),mn())}e.setApplicationSettingsFromCloudSettings(f.result.applicationCloudSettings),za(f.result.token),f.result.user&&Ke(f.result.user)&&t.storeUserBasicInfo(f.result.user),T(f.result)}).catch(G=>{Z.error("failed to login",G),G&&G.processed?p(G):G.response&&G.response.data&&G.response.data.errorMessage?p({error:G.response.data}):p({message:"Unable to log in"})})})}function B({user:X,presetCategories:me}){return new Promise((ae,T)=>{ne.register(X.toRegisterRequest(me)).then(p=>{const G=p.data;if(!G||!G.success||!G.result){T({message:"Unable to sign up"});return}e.appSettings.applicationLock&&(e.setEnableApplicationLock(!1),e.setEnableApplicationLockWebAuthn(!1),mn()),G.result.token&&Ye(G.result.token)&&za(G.result.token),G.result.user&&Ke(G.result.user)&&t.storeUserBasicInfo(G.result.user),ae(G.result)}).catch(p=>{Z.error("failed to sign up",p),p.response&&p.response.data&&p.response.data.errorMessage?T({error:p.response.data}):p.processed?T(p):T({message:"Unable to sign up"})})})}function N(){Jl(),b(!1)}function K(){return new Promise((X,me)=>{ne.logout().then(ae=>{const T=ae.data;if(!T||!T.success||!T.result){me({message:"Unable to logout"});return}gn(!0),mn(),b(!0),X(T.result)}).catch(ae=>{Z.error("failed to log out",ae),ae&&ae.processed?me(ae):ae.response&&ae.response.data&&ae.response.data.errorMessage?me({error:ae.response.data}):me({message:"Unable to logout"})})})}function D(){gn(!0),mn(),b(!0)}function Y({token:X,requestNewToken:me}){return new Promise((ae,T)=>{ne.verifyEmail({token:X,requestNewToken:me}).then(p=>{const G=p.data;if(!G||!G.success||!G.result){T({message:"Unable to verify email"});return}G.result.newToken&&Ye(G.result.newToken)&&za(G.result.newToken),G.result.user&&Ke(G.result.user)&&t.storeUserBasicInfo(G.result.user),ae(G.result)}).catch(p=>{Z.error("failed to verify email",p),p&&p.processed?T(p):p.response&&p.response.data&&p.response.data.errorMessage?T({error:p.response.data}):T({message:"Unable to verify email"})})})}function g(X){return new Promise((me,ae)=>{ne.resendVerifyEmailByUnloginUser(X).then(T=>{const p=T.data;if(!p||!p.success||!p.result){ae({message:"Unable to resend validation email"});return}me(p.result)}).catch(T=>{Z.error("failed to resend verify email",T),T&&T.processed?ae(T):T.response&&T.response.data&&T.response.data.errorMessage?ae({error:T.response.data}):ae({message:"Unable to resend validation email"})})})}function A(X){return new Promise((me,ae)=>{ne.requestResetPassword(X).then(T=>{const p=T.data;if(!p||!p.success||!p.result){ae({message:"Unable to send password reset email"});return}me(p.result)}).catch(T=>{Z.error("failed to send password reset email",T),T&&T.processed?ae(T):T.response&&T.response.data&&T.response.data.errorMessage?ae({error:T.response.data}):ae({message:"Unable to send password reset email"})})})}function w({email:X,token:me,password:ae}){return new Promise((T,p)=>{ne.resetPassword({email:X,token:me,password:ae}).then(G=>{const f=G.data;if(!f||!f.success||!f.result){p({message:"Unable to reset password"});return}T(f.result)}).catch(G=>{Z.error("failed to reset password",G),G&&G.processed?p(G):G.response&&G.response.data&&G.response.data.errorMessage?p({error:G.response.data}):p({message:"Unable to reset password"})})})}function P(X){const me=t.currentUserDefaultCurrency;return new Promise((ae,T)=>{ne.updateProfile(X).then(p=>{const G=p.data;if(!G||!G.success||!G.result){T({message:"Unable to update user profile"});return}G.result.newToken&&Ye(G.result.newToken)&&za(G.result.newToken),G.result.user&&Ke(G.result.user)&&t.storeUserBasicInfo(G.result.user),a.accountListStateInvalid||a.updateAccountListInvalidState(!0),l.transactionOverviewStateInvalid||l.updateTransactionOverviewInvalidState(!0),i.transactionStatisticsStateInvalid||i.updateTransactionStatisticsInvalidState(!0),G.result.user&&G.result.user.defaultCurrency!==me&&u.resetLatestExchangeRates(),ae(G.result)}).catch(p=>{Z.error("failed to save user profile",p),p.response&&p.response.data&&p.response.data.errorMessage?T({error:p.response.data}):p.processed?T(p):T({message:"Unable to update user profile"})})})}function H(){return new Promise((X,me)=>{ne.resendVerifyEmailByLoginedUser().then(ae=>{const T=ae.data;if(!T||!T.success||!T.result){me({message:"Unable to resend validation email"});return}X(T.result)}).catch(ae=>{Z.error("failed to resend verify email",ae),ae&&ae.processed?me(ae):ae.response&&ae.response.data&&ae.response.data.errorMessage?me({error:ae.response.data}):me({message:"Unable to resend validation email"})})})}function _({accountId:X,password:me}){return new Promise((ae,T)=>{ne.clearAllTransactionsOfAccount({accountId:X,password:me}).then(p=>{const G=p.data;if(!G||!G.success||!G.result){T({message:"Unable to clear user data"});return}a.accountListStateInvalid||a.updateAccountListInvalidState(!0),l.transactionOverviewStateInvalid||l.updateTransactionOverviewInvalidState(!0),i.transactionStatisticsStateInvalid||i.updateTransactionStatisticsInvalidState(!0),ae(G.result)}).catch(p=>{Z.error("failed to clear user data",p),p&&p.processed?T(p):p.response&&p.response.data&&p.response.data.errorMessage?T({error:p.response.data}):T({message:"Unable to clear user data"})})})}function Ae({password:X}){return new Promise((me,ae)=>{ne.clearAllTransactions({password:X}).then(T=>{const p=T.data;if(!p||!p.success||!p.result){ae({message:"Unable to clear user data"});return}a.accountListStateInvalid||a.updateAccountListInvalidState(!0),l.transactionOverviewStateInvalid||l.updateTransactionOverviewInvalidState(!0),i.transactionStatisticsStateInvalid||i.updateTransactionStatisticsInvalidState(!0),me(p.result)}).catch(T=>{Z.error("failed to clear user data",T),T&&T.processed?ae(T):T.response&&T.response.data&&T.response.data.errorMessage?ae({error:T.response.data}):ae({message:"Unable to clear user data"})})})}function de({password:X}){return new Promise((me,ae)=>{ne.clearAllData({password:X}).then(T=>{const p=T.data;if(!p||!p.success||!p.result){ae({message:"Unable to clear user data"});return}a.accountListStateInvalid||a.updateAccountListInvalidState(!0),n.transactionCategoryListStateInvalid||n.updateTransactionCategoryListInvalidState(!0),o.transactionTagListStateInvalid||o.updateTransactionTagListInvalidState(!0),l.transactionOverviewStateInvalid||l.updateTransactionOverviewInvalidState(!0),i.transactionStatisticsStateInvalid||i.updateTransactionStatisticsInvalidState(!0),me(p.result)}).catch(T=>{Z.error("failed to clear user data",T),T&&T.processed?ae(T):T.response&&T.response.data&&T.response.data.errorMessage?ae({error:T.response.data}):ae({message:"Unable to clear user data"})})})}return{currentNotification:m,setNotificationContent:v,generateOAuth2LoginUrl:I,generateOAuth2LinkUrl:k,authorize:U,authorize2FA:R,authorizeOAuth2:x,register:B,lock:N,logout:K,forceLogout:D,verifyEmail:Y,resendVerifyEmailByUnloginUser:g,requestResetPassword:A,resetPassword:w,updateUserProfile:P,resendVerifyEmailByLoginedUser:H,clearAllUserTransactionsOfAccount:_,clearAllUserTransactions:Ae,clearAllUserData:de}}),Gm=Ht("desktopPages",()=>{const e=q(!1);function t(){e.value=!0}function a(){e.value=!1}return{showAddTransactionDialogInTransactionList:e,setShowAddTransactionDialogInTransactionList:t,resetShowAddTransactionDialogInTransactionList:a}}),Su="img",$m=Su+"/ezbookkeeping-192.png";var io=(e=>(e.Light="light",e.Dark="dark",e))(io||{});function Wm(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?io.Dark:io.Light}function Hm(e,t,a){let n=e?dt.valueOf(e):null,o=t?dt.valueOf(t):null;return n||(n=dt.DefaultExpenseColor),o||(o=dt.DefaultIncomeColor),a?{expenseAmountColor:n.darkThemeColor,incomeAmountColor:o.darkThemeColor}:{expenseAmountColor:n.lightThemeColor,incomeAmountColor:o.lightThemeColor}}function Vn(e,t){let a=e?dt.valueOf(e):null,n=t?dt.valueOf(t):null;a||(a=dt.DefaultExpenseColor),n||(n=dt.DefaultIncomeColor);const o=document.querySelector("html");if(!o)return;const s=dt.values();for(const r of s)r.type===a.type?o.classList.contains(r.expenseClassName)||o.classList.add(r.expenseClassName):o.classList.remove(r.expenseClassName),r.type===n.type?o.classList.contains(r.incomeClassName)||o.classList.add(r.incomeClassName):o.classList.remove(r.incomeClassName)}function Vm(e,t){ml.copy(e,{container:t||document.body})}function Jm({allowedExtensions:e}){return new Promise((t,a)=>{const n=document.createElement("input");n.style.display="none",n.type="file",n.accept=e,n.onchange=o=>{const s=o.target;if(s.files&&s.files.length>0&&s.files[0]){const r=s.files[0],l=new FileReader;l.onload=i=>{const u=i.target?.result;typeof u=="string"?t(u):a(new Error("failed to load file, because file reader result is not string"))},l.onerror=i=>{Z.error("failed to load file",i)},l.readAsText(r)}},n.click()})}function _m(e,t){const a=URL.createObjectURL(t),n=document.createElement("a");n.style.display="none",n.href=a,n.setAttribute("download",e),document.body.appendChild(n),n.click()}function Zm(e,t,a,n){return new Promise((o,s)=>{const r=new FileReader;r.onload=l=>{const i=new Image;i.onload=()=>{let u=i.width,m=i.height;if(u>t||m>a){const I=Math.min(t/u,a/m);u=Math.floor(u*I),m=Math.floor(m*I)}const b=document.createElement("canvas"),v=b.getContext("2d");if(!v){s(new Error("failed to get canvas context"));return}b.width=u,b.height=m,v.drawImage(i,0,0,u,m),b.toBlob(I=>{I?o(I):s(new Error("failed to compress image"))},$t.JPG.contentType,n)},i.onerror=u=>{s(u)},l.target&&l.target.result?i.src=l.target.result:s(new Error("failed to read file"))},r.onerror=l=>{s(l)},r.readAsDataURL(e)})}function Mu(){return window.caches?new Promise((e,t)=>{window.caches.keys().then(a=>{const n=[];for(const o of a)n.push(window.caches.delete(o).then(s=>s?(Z.info(`cache "${o}" cleared successfully`),Promise.resolve(o)):(Z.warn(`failed to clear cache "${o}"`),Promise.reject(o))));Promise.all(n).then(()=>{Z.info("all caches cleared successfully"),e()}).catch(()=>{e()})}).catch(a=>{Z.warn("failed to clear cache",a),t(a)})}):(Z.error("caches API is not supported in this browser"),Promise.reject())}const ko={version:"1.2.0",commitHash:"4c8bb5a",buildTime:""};function Mr(e){const t=!e.buildTime,a=e.commitHash;let n=e.version;return n&&(!t||!Uo())&&(n+="-dev"),n?n="v"+n:n="unknown",a&&(n+=` (${a.substring(0,Math.min(7,a.length))})`),n}function Uo(){return!0}function Lu(){return ko}function Oo(){return Mr(ko)}function Nu(){return ko.buildTime||""}function qm(){return Uo()?ha()+"/mobile#/":ha()+"/mobile.html#/"}function Xm(){return Uo()?ha()+"/desktop#/":ha()+"/desktop.html#/"}function Qm(e){const{getServerMultiLanguageConfigContent:t,getLocalizedOAuth2LoginText:a,setLanguage:n}=Ge(),o=Eo(),s=mt(),r=da(),l=`${Oo()}`,i=q(""),u=q(""),m=q(""),b=q(""),v=q(""),I=q("passcode"),k=q(""),U=q(!1),R=q(!1),x=q(!1),B=c(()=>!i.value||!u.value),N=c(()=>I.value==="backupcode"?!b.value:!m.value),K=c(()=>o.generateOAuth2LoginUrl(e,k.value)),D=c(()=>a(jc(),eu())),Y=c(()=>t(tu()));function g(A){if(A.user){const w=n(A.user.language);s.updateLocalizedDefaultSettings(w),Vn(A.user.expenseAmountColor,A.user.incomeAmountColor)}s.appSettings.autoUpdateExchangeRatesData&&r.getLatestExchangeRates({silent:!0,force:!1}),A.notificationContent&&o.setNotificationContent(A.notificationContent)}return{version:l,username:i,password:u,passcode:m,backupCode:b,tempToken:v,twoFAVerifyType:I,oauth2ClientSessionId:k,loggingInByPassword:U,loggingInByOAuth2:R,verifying:x,inputIsEmpty:B,twoFAInputIsEmpty:N,oauth2LoginUrl:K,oauth2LoginDisplayName:D,tips:Y,doAfterLogin:g}}function jm(){const{tt:e,getCurrentLanguageTag:t,getLanguageInfo:a,setLanguage:n}=Ge(),o=Eo(),s=mt(),r=Nt(),l=da(),i=q(r.generateNewUserModel(t())),u=q(!1),m=c(()=>{const N=e("Language");return N!=="Language"?`${N} / Language`:N}),b=c({get:()=>t(),set:N=>{const K=i.value.defaultCurrency===s.localeDefaultSettings.currency,D=i.value.firstDayOfWeek===s.localeDefaultSettings.firstDayOfWeek;i.value.language=N;const Y=n(N);s.updateLocalizedDefaultSettings(Y),K&&(i.value.defaultCurrency=s.localeDefaultSettings.currency),D&&(i.value.firstDayOfWeek=s.localeDefaultSettings.firstDayOfWeek)}}),v=c(()=>{const N=a(b.value);return N?N.displayName:""}),I=c(()=>i.value.username?i.value.password?i.value.confirmPassword?i.value.email?i.value.nickname?i.value.defaultCurrency?"":"Default currency cannot be blank":"Nickname cannot be blank":"Email address cannot be blank":"Password confirmation cannot be blank":"Password cannot be blank":"Username cannot be blank"),k=c(()=>i.value.password&&i.value.confirmPassword&&i.value.password!==i.value.confirmPassword?"Password and password confirmation do not match":""),U=c(()=>!!I.value),R=c(()=>!!k.value);function x(N){switch(N){case pe.Income:return e("Income Categories");case pe.Expense:return e("Expense Categories");case pe.Transfer:return e("Transfer Categories");default:return e("Transaction Categories")}}function B(N){if(N.user){const K=n(N.user.language);s.updateLocalizedDefaultSettings(K),Vn(N.user.expenseAmountColor,N.user.incomeAmountColor)}s.appSettings.autoUpdateExchangeRatesData&&l.getLatestExchangeRates({silent:!0,force:!1}),N.notificationContent&&o.setNotificationContent(N.notificationContent)}return{user:i,submitting:u,languageTitle:m,currentLocale:b,currentLanguageName:v,inputEmptyProblemMessage:I,inputInvalidProblemMessage:k,inputIsEmpty:U,inputIsInvalid:R,getCategoryTypeName:x,doAfterSignupSuccess:B}}function ef(e,t){return{success:!1,errorCode:e,errorMessage:t,path:""}}const wu=Ht("tokens",()=>{const e=mt(),t=Nt();function a(){return new Promise((l,i)=>{ne.getTokens().then(u=>{const m=u.data;if(!m||!m.success||!m.result){i({message:"Unable to retrieve session list"});return}l(m.result)}).catch(u=>{Z.error("failed to load token list",u),u.response&&u.response.data&&u.response.data.errorMessage?i({error:u.response.data}):u.processed?i(u):i({message:"Unable to retrieve session list"})})})}function n(){return new Promise(l=>{ne.refreshToken().then(i=>{const u=i.data;u&&u.success&&u.result&&e.setApplicationSettingsFromCloudSettings(u.result.applicationCloudSettings),u&&u.success&&u.result&&u.result.user&&Ke(u.result.user)&&t.storeUserBasicInfo(u.result.user),u&&u.success&&u.result&&u.result.newToken&&(za(u.result.newToken),u.result.oldTokenId&&s({tokenId:u.result.oldTokenId,ignoreError:!0})),l(u.result)})})}function o({type:l,expiresInSeconds:i,password:u}){return new Promise((m,b)=>{let v=null;if(l==="api")v=ne.generateAPIToken({expiresInSeconds:i,password:u});else if(l==="mcp")v=ne.generateMCPToken({expiresInSeconds:i,password:u});else{b({message:"An error occurred"});return}v.then(I=>{const k=I.data;if(!k||!k.success||!k.result){b({message:"Unable to generate token"});return}m(k.result)}).catch(I=>{Z.error("failed to generate token",I),I.response&&I.response.data&&I.response.data.errorMessage?b({error:I.response.data}):I.processed?b(I):b({message:"Unable to generate token"})})})}function s({tokenId:l,ignoreError:i}){return new Promise((u,m)=>{ne.revokeToken({tokenId:l,ignoreError:i}).then(b=>{const v=b.data;if(!v||!v.success||!v.result){m({message:"Unable to logout from this session"});return}u(v.result)}).catch(b=>{Z.error("failed to revoke token",b),b.response&&b.response.data&&b.response.data.errorMessage?m({error:b.response.data}):b.processed?m(b):m({message:"Unable to logout from this session"})})})}function r(){return new Promise((l,i)=>{ne.revokeAllTokens().then(u=>{const m=u.data;if(!m||!m.success||!m.result){i({message:"Unable to logout all other sessions"});return}l(m.result)}).catch(u=>{Z.error("failed to revoke all tokens",u),u.response&&u.response.data&&u.response.data.errorMessage?i({error:u.response.data}):u.processed?i(u):i({message:"Unable to logout all other sessions"})})})}return{getAllTokens:a,refreshTokenAndRevokeOldToken:n,generateToken:o,revokeToken:s,revokeAllTokens:r}}),xu={attestation:"none",authenticatorSelection:{authenticatorAttachment:"platform",requireResidentKey:!1,userVerification:"discouraged"},pubKeyCredParams:[{type:"public-key",alg:-7},{type:"public-key",alg:-257}],timeout:12e4},Eu={allowCredentials:[{type:"public-key"}],userVerification:"discouraged",timeout:12e4};function Lr(e){const a=new TextDecoder("utf-8").decode(e.response.clientDataJSON);return JSON.parse(a)}function ku(e){const a=fl.decode(e.response.attestationObject).authData,n=new DataView(new ArrayBuffer(2));a.slice(53,55).forEach((l,i)=>n.setUint8(i,l));const s=n.getUint16(0);return a.slice(55+s)}function Ms(){return!!window.PublicKeyCredential&&!!navigator.credentials&&co(window.PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable)}function Uu(){return Ms()?window.PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable():Promise.resolve(!1)}function tf(e,t){if(!window.location||!window.location.hostname)return Promise.reject({notSupported:!0});if(!Ms()||!navigator.credentials.create)return Promise.reject({notSupported:!0});const a=No(),n=`${e.username}|${e.secret}`,o=Object.assign({},xu,{challenge:ms(a),rp:{name:window.location.hostname,id:window.location.hostname},user:{id:ms(n),name:e.username,displayName:t.nickname}});return Z.debug("webauthn create options",o),navigator.credentials.create({publicKey:o}).then(s=>{const r=s?Lr(s):null,l=s?ku(s):null,i=r&&r.challenge?Ws(r.challenge):null;if(Z.debug("webauthn create raw response",s),s&&s.rawId&&r&&r.type==="webauthn.create"&&i===a){const u={id:mo(s.rawId),clientData:r,publicKey:l,rawCredential:s};return Z.debug("webauthn create response",u),u}else return Promise.reject({invalid:!0})})}function af(e,t){if(!window.location||!window.location.hostname)return Promise.reject({notSupported:!0});if(!Ms()||!navigator.credentials.get)return Promise.reject({notSupported:!0});const a=No(),n=Object.assign({},Eu,{challenge:ms(a),rpId:window.location.hostname});return n.allowCredentials&&n.allowCredentials.length>0&&(n.allowCredentials[0].id=ms(Ws(t))),Z.debug("webauthn get options",n),navigator.credentials.get({publicKey:n}).then(o=>{const s=o?Lr(o):null,r=s&&s.challenge?Ws(s.challenge):null,l=o&&o.response&&o.response.userHandle?Sl(o.response.userHandle).split("|"):null;if(Z.debug("webauthn get raw response",o),o&&o.rawId&&s&&s.type==="webauthn.get"&&r===a&&l&&l.length===2&&l[0]===e.username){const i={id:mo(o.rawId),userName:l[0],userSecret:l[1],clientData:s,rawCredential:o};return Z.debug("webauthn get response",i),i}else return Promise.reject({invalid:!0})})}function nf(){const{setLanguage:e,initLocale:t}=Ge(),a=Eo(),n=mt(),o=Nt(),s=wu(),r=qa(),l=da(),i=`${Oo()}`,u=q(""),m=c(()=>n.appSettings.applicationLockWebAuthn&&Gl()&&Ms());function b(k){return!!k&&k.length===6}function v(){r.initTransactionDraft(),s.refreshTokenAndRevokeOldToken().then(k=>{if(k.user){const U=e(k.user.language);n.updateLocalizedDefaultSettings(U),Vn(k.user.expenseAmountColor,k.user.incomeAmountColor)}k.notificationContent&&a.setNotificationContent(k.notificationContent)}),n.appSettings.autoUpdateExchangeRatesData&&l.getLatestExchangeRates({silent:!0,force:!1})}function I(){a.forceLogout(),n.clearAppSettings();const k=t(o.currentUserLanguage,n.appSettings.timeZone);n.updateLocalizedDefaultSettings(k),Vn(o.currentUserExpenseAmountColor,o.currentUserIncomeAmountColor)}return{version:i,pinCode:u,isWebAuthnAvailable:m,isPinCodeValid:b,doAfterUnlocked:v,doRelogin:I}}function sf(){const{formatUnixTimeToLongDate:e,formatUnixTimeToLongMonthDay:t,formatUnixTimeToGregorianLikeLongYear:a,formatUnixTimeToGregorianLikeLongMonth:n,formatAmountToLocalizedNumeralsWithCurrency:o}=Ge(),s=mt(),r=Nt(),l=sa(),i=cn(),u=c({get:()=>s.appSettings.showAmountInHomePage,set:K=>s.setShowAmountInHomePage(K)}),m=c(()=>r.currentUserDefaultCurrency),b=c(()=>l.allAccounts),v=c(()=>{const K=l.getNetAssets(u.value);return o(K,m.value)}),I=c(()=>{const K=l.getTotalAssets(u.value);return o(K,m.value)}),k=c(()=>{const K=l.getTotalLiabilities(u.value);return o(K,m.value)}),U=c(()=>({today:{displayTime:e(i.transactionDataRange.today.startTime)},thisWeek:{startTime:t(i.transactionDataRange.thisWeek.startTime),endTime:t(i.transactionDataRange.thisWeek.endTime)},thisMonth:{displayTime:n(i.transactionDataRange.thisMonth.startTime),startTime:t(i.transactionDataRange.thisMonth.startTime),endTime:t(i.transactionDataRange.thisMonth.endTime)},thisYear:{displayTime:a(i.transactionDataRange.thisYear.startTime)}})),R=c(()=>i.transactionOverview);function x(K,D){return u.value?o(K,m.value)+(D?xa:""):o(Jt,m.value)}function B(K){return x(K.incomeAmount,K.incompleteIncomeAmount)}function N(K){return x(K.expenseAmount,K.incompleteExpenseAmount)}return{showAmountInHomePage:u,defaultCurrency:m,allAccounts:b,netAssets:v,totalAssets:I,totalLiabilities:k,displayDateRange:U,transactionOverview:R,getDisplayAmount:x,getDisplayIncomeAmount:B,getDisplayExpenseAmount:N}}const ds={openstreetmap:{tileUrlFormat:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",tileUrlSubDomains:"abc",minZoom:1,maxZoom:19,defaultZoomLevel:14,website:"https://www.openstreetmap.org",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright" class="external" target="_blank">OpenStreetMap</a> contributors'},"openstreetmap-humanitarian":{tileUrlFormat:"https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png",tileUrlSubDomains:"abc",minZoom:1,maxZoom:19,defaultZoomLevel:14,website:"https://www.hotosm.org",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright" class="external" target="_blank">OpenStreetMap</a> contributors, Tiles style by <a href="https://www.hotosm.org/" class="external" target="_blank">Humanitarian OpenStreetMap Team</a> hosted by <a href="https://openstreetmap.fr/" class="external" target="_blank">OpenStreetMap France</a>'},opentopomap:{tileUrlFormat:"https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",tileUrlSubDomains:"abc",minZoom:1,maxZoom:17,defaultZoomLevel:14,website:"https://opentopomap.org",attribution:'Map data: &copy; <a href="https://www.openstreetmap.org/copyright" class="external" target="_blank">OpenStreetMap</a> contributors, <a href="http://viewfinderpanoramas.org" class="external" target="_blank">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org" class="external" target="_blank">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/" class="external" target="_blank">CC-BY-SA</a>)'},opnvkarte:{tileUrlFormat:"https://tileserver.memomaps.de/tilegen/{z}/{x}/{y}.png",tileUrlSubDomains:"",minZoom:1,maxZoom:17,defaultZoomLevel:14,website:"https://memomaps.de",attribution:'Map <a href="https://memomaps.de/" class="external" target="_blank">memomaps.de</a> <a href="http://creativecommons.org/licenses/by-sa/2.0/" class="external" target="_blank">CC-BY-SA</a>, map data &copy; <a href="https://www.openstreetmap.org/copyright" class="external" target="_blank">OpenStreetMap</a> contributors'},cyclosm:{tileUrlFormat:"https://{s}.tile-cyclosm.openstreetmap.fr/cyclosm/{z}/{x}/{y}.png",tileUrlSubDomains:"abc",minZoom:1,maxZoom:19,defaultZoomLevel:14,website:"https://github.com/cyclosm/cyclosm-cartocss-style",attribution:'<a href="https://github.com/cyclosm/cyclosm-cartocss-style/releases" title="CyclOSM - Open Bicycle render" class="external" target="_blank">CyclOSM</a> | Map data: &copy; <a href="https://www.openstreetmap.org/copyright" class="external" target="_blank">OpenStreetMap</a> contributors'},cartodb:{tileUrlFormat:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}.png",tileUrlSubDomains:"abcd",minZoom:1,maxZoom:20,defaultZoomLevel:14,website:"https://carto.com",attribution:'&copy; <a href="http://www.openstreetmap.org/copyright" class="external" target="_blank">OpenStreetMap</a>, &copy; <a href="https://carto.com/attributions" class="external" target="_blank">CARTO</a>'},tomtom:{tileUrlFormat:"https://{s}.api.tomtom.com/map/1/tile/basic/main/{z}/{x}/{y}.png",tileUrlSubDomains:"abcd",tileUrlExtraParams:[{paramName:"key",paramValueType:"tomtom_key"},{paramName:"language",paramValueType:"language"}],minZoom:1,maxZoom:19,defaultZoomLevel:14,website:"https://tomtom.com",attribution:'<a href="https://tomtom.com" class="external" target="_blank">&copy;  1992 - 2023 TomTom.</a>'},tianditu:{tileUrlFormat:"https://t{s}.tianditu.gov.cn/vec_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=vec&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",tileUrlSubDomains:"01234567",tileUrlExtraParams:[{paramName:"tk",paramValueType:"tianditu_key"}],annotationUrlFormat:"https://t{s}.tianditu.gov.cn/cva_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=cva&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",annotationUrlSubDomains:"01234567",annotationUrlExtraParams:[{paramName:"tk",paramValueType:"tianditu_key"}],minZoom:1,maxZoom:18,defaultZoomLevel:14,website:"https://www.tianditu.gov.cn",attribution:'<a href="https://www.tianditu.gov.cn" class="external" target="_blank">天地图</a>'}},Ou="modulepreload",Fu=function(e,t){return new URL(e,t).href},Mi={},Li=function(t,a,n){let o=Promise.resolve();if(a&&a.length>0){let u=function(m){return Promise.all(m.map(b=>Promise.resolve(b).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};const r=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),i=l?.nonce||l?.getAttribute("nonce");o=u(a.map(m=>{if(m=Fu(m,n),m in Mi)return;Mi[m]=!0;const b=m.endsWith(".css"),v=b?'[rel="stylesheet"]':"";if(n)for(let k=r.length-1;k>=0;k--){const U=r[k];if(U.href===m&&(!b||U.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${m}"]${v}`))return;const I=document.createElement("link");if(I.rel=b?"stylesheet":Ou,b||(I.as="script"),I.crossOrigin="",I.href=m,i&&I.setAttribute("nonce",i),document.head.appendChild(I),b)return new Promise((k,U)=>{I.addEventListener("load",k),I.addEventListener("error",()=>U(new Error(`Unable to preload CSS for ${m}`)))})}))}function s(r){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=r,window.dispatchEvent(l),!l.defaultPrevented)throw r}return o.then(r=>{for(const l of r||[])l.status==="rejected"&&s(l.reason);return t().catch(s)})};class Ka{static Leaflet=null;mapProvider;constructor(t){this.mapProvider=t}getWebsite(){return this.mapProvider==="custom"?"":ds[this.mapProvider]&&ds[this.mapProvider].website||""}isSupportGetGeoLocationByClick(){return!0}asyncLoadAssets(t){return Promise.all([Li(()=>import("./leaflet-BI9MOT7F.js").then(a=>a.l),__vite__mapDeps([0,1]),import.meta.url),Li(()=>import("./leaflet-BI9MOT7F.js").then(a=>a.a),__vite__mapDeps([0,1]),import.meta.url).then(a=>Ka.Leaflet=a)])}createMapInstance(){const t=ds[this.mapProvider];return this.mapProvider!=="custom"&&!t?null:new Pu(this.mapProvider,t)}}class Pu{dependencyLoaded=!1;inited=!1;defaultZoomLevel;minZoomLevel;mapProvider;presetMapTileSource;leafletInstance;leafletTileLayer;leafletAnnotationLayer;leafletZoomControl;leafletAttribution;leafletCenterMarker;constructor(t,a){this.dependencyLoaded=!!Ka.Leaflet,this.mapProvider=t,this.presetMapTileSource=a,this.defaultZoomLevel=this.presetMapTileSource?.defaultZoomLevel||iu(),this.minZoomLevel=this.presetMapTileSource?.minZoom||bi()}initMapInstance(t,a){if(!Ka.Leaflet)return;const n=Ka.Leaflet,o=n.map(t,{center:[a.initCenter.latitude,a.initCenter.longitude],zoom:a.zoomLevel,attributionControl:!1,zoomControl:!1});let s,r,l,i,u,m;this.mapProvider!=="custom"?(s=this.presetMapTileSource?.tileUrlFormat,r=this.presetMapTileSource?.tileUrlSubDomains,l=this.presetMapTileSource?.annotationUrlFormat,i=this.presetMapTileSource?.annotationUrlSubDomains,u=this.presetMapTileSource?.minZoom,m=this.presetMapTileSource?.maxZoom):(s=au(),l=nu(),u=bi(),m=ou()),Ai()?(s=ne.generateMapProxyTileImageUrl(this.mapProvider,a.language),r=""):this.presetMapTileSource&&this.presetMapTileSource.tileUrlExtraParams&&(s=this.getFinalUrlFormat(this.presetMapTileSource.tileUrlFormat,this.presetMapTileSource.tileUrlExtraParams,a));const b=n.tileLayer(s,{subdomains:r,maxZoom:m,minZoom:u});if(b.addTo(o),l||this.mapProvider==="custom"&&su()){Ai()?(l=ne.generateMapProxyAnnotationImageUrl(this.mapProvider,a.language),i=""):this.presetMapTileSource&&this.presetMapTileSource.annotationUrlExtraParams&&(l=this.getFinalUrlFormat(this.presetMapTileSource.annotationUrlFormat,this.presetMapTileSource.annotationUrlExtraParams,a));const I=n.tileLayer(l,{subdomains:i,maxZoom:m,minZoom:u});I.addTo(o),this.leafletAnnotationLayer=I}const v=n.control.zoom({zoomInTitle:a.text.zoomIn,zoomOutTitle:a.text.zoomOut});if(v.addTo(o),this.presetMapTileSource&&this.presetMapTileSource.attribution){const I=n.control.attribution({prefix:!1});I.addAttribution(this.presetMapTileSource.attribution),I.addTo(o),this.leafletAttribution=I}o.addEventListener("click",function(I){a.onClick&&a.onClick({latitude:I.latlng.lat,longitude:I.latlng.lng})}),this.leafletInstance=o,this.leafletTileLayer=b,this.leafletZoomControl=v,this.inited=!0}setMapCenterTo(t,a){this.leafletInstance&&this.leafletInstance.setView([t.latitude,t.longitude],a)}setMapCenterMarker(t){if(!Ka.Leaflet||!this.leafletInstance)return;const a=Ka.Leaflet;if(this.leafletCenterMarker)this.leafletCenterMarker.setLatLng([t.latitude,t.longitude]);else{const n=a.icon({iconUrl:"img/map-marker-icon.png",iconRetinaUrl:"img/map-marker-icon-2x.png",iconSize:[25,32],iconAnchor:[12,32],shadowUrl:"img/map-marker-shadow.png",shadowSize:[41,32]});this.leafletCenterMarker=a.marker([t.latitude,t.longitude],{icon:n}),this.leafletCenterMarker.addTo(this.leafletInstance)}}removeMapCenterMarker(){!this.leafletInstance||!this.leafletCenterMarker||(this.leafletCenterMarker.remove(),this.leafletCenterMarker=null)}getFinalUrlFormat(t,a,n){const o=[];for(const s of a)s.paramValueType==="tomtom_key"?o.push(s.paramName+"="+ru()):s.paramValueType==="tianditu_key"?o.push(s.paramName+"="+lu()):s.paramValueType==="language"&&n.language&&o.push(s.paramName+"="+n.language);return o.length&&(t.indexOf("?")>=0?t=t+"&"+o.join("&"):t=t+"?"+o.join("&")),t}}class la{static GoogleMap=null;static ControlPosition={LEFT_TOP:window.google&&window.google.maps&&window.google.maps.ControlPosition?window.google.maps.ControlPosition.LEFT_TOP:5};getWebsite(){return"https://maps.google.com"}isSupportGetGeoLocationByClick(){return!0}asyncLoadAssets(t){return la.GoogleMap?Promise.resolve():(window.onGoogleMapCallback||(window.onGoogleMapCallback=()=>{window.google&&(la.GoogleMap=window.google.maps,la.ControlPosition.LEFT_TOP=window.google&&window.google.maps&&window.google.maps.ControlPosition?window.google.maps.ControlPosition.LEFT_TOP:5)}),Lo("js",ne.generateGoogleMapJavascriptUrl(t,"onGoogleMapCallback")))}createMapInstance(){return new Bu}}class Bu{dependencyLoaded=!1;inited=!1;defaultZoomLevel=14;minZoomLevel=1;googleMapInstance=null;googleMapCenterMarker;constructor(){this.dependencyLoaded=!!la.GoogleMap}initMapInstance(t,a){if(!la.GoogleMap)return;const n=la.GoogleMap;this.googleMapInstance=new n.Map(t,{zoom:a.zoomLevel,center:{lat:a.initCenter.latitude,lng:a.initCenter.longitude},maxZoom:19,zoomControl:!0,mapTypeControl:!1,scaleControl:!1,streetViewControl:!1,rotateControl:!1,fullscreenControl:!1,gestureHandling:"greedy",zoomControlOptions:{position:la.ControlPosition.LEFT_TOP}}),this.googleMapInstance.addListener("click",function(o){a.onClick&&a.onClick({latitude:o.latLng.lat(),longitude:o.latLng.lng()})}),this.inited=!0}setMapCenterTo(t,a){!la.GoogleMap||!this.googleMapInstance||(this.googleMapInstance.setCenter({lat:t.latitude,lng:t.longitude}),this.googleMapInstance.setZoom(a))}setMapCenterMarker(t){if(!la.GoogleMap||!this.googleMapInstance)return;const a=la.GoogleMap;this.googleMapCenterMarker?this.googleMapCenterMarker.setPosition({lat:t.latitude,lng:t.longitude}):this.googleMapCenterMarker=new a.Marker({position:{lat:t.latitude,lng:t.longitude},map:this.googleMapInstance})}removeMapCenterMarker(){!this.googleMapInstance||!this.googleMapCenterMarker||(this.googleMapCenterMarker.setMap(null),this.googleMapCenterMarker=null)}}class At{static BMap=null;static BMAP_NAVIGATION_CONTROL_ZOOM=window.BMAP_NAVIGATION_CONTROL_ZOOM||3;static BMAP_ANCHOR_TOP_LEFT=window.BMAP_ANCHOR_TOP_LEFT||0;static COORDINATES_WGS84=window.COORDINATES_WGS84||1;static COORDINATES_BD09=window.COORDINATES_BD09||5;getWebsite(){return"https://map.baidu.com"}isSupportGetGeoLocationByClick(){return!1}asyncLoadAssets(t){return At.BMap?Promise.resolve():(window.onBMapCallback||(window.onBMapCallback=()=>{At.BMap=window.BMap,At.BMAP_NAVIGATION_CONTROL_ZOOM=window.BMAP_NAVIGATION_CONTROL_ZOOM||3,At.BMAP_ANCHOR_TOP_LEFT=window.BMAP_ANCHOR_TOP_LEFT||0,At.COORDINATES_WGS84=window.COORDINATES_WGS84||1,At.COORDINATES_BD09=window.COORDINATES_BD09||5}),Lo("js",ne.generateBaiduMapJavascriptUrl("onBMapCallback")))}createMapInstance(){return new Ru}}class Ru{dependencyLoaded=!1;inited=!1;defaultZoomLevel=15;minZoomLevel=1;baiduMapInstance=null;baiduMapConverter=null;baiduMapNavigationControl=null;baiduMapCenterPosition=null;baiduMapCenterMarker;constructor(){this.dependencyLoaded=!!At.BMap}initMapInstance(t,a){if(!At.BMap)return;const n=At.BMap,o=new n.Map(t,{maxZoom:19});o.enableScrollWheelZoom();const s=new n.NavigationControl({type:At.BMAP_NAVIGATION_CONTROL_ZOOM,anchor:At.BMAP_ANCHOR_TOP_LEFT});o.addControl(s),o.centerAndZoom(new n.Point(a.initCenter.longitude,a.initCenter.latitude),a.zoomLevel),o.addEventListener("click",function(r){a.onClick&&a.onClick({latitude:r.point.lat,longitude:r.point.lng})}),this.baiduMapInstance=o,this.baiduMapConverter=new n.Convertor,this.baiduMapNavigationControl=s,this.inited=!0}setMapCenterTo(t,a){if(!At.BMap||!this.baiduMapInstance)return;const n=At.BMap;if(this.baiduMapCenterPosition&&this.baiduMapCenterPosition.originalLongitude===t.longitude&&this.baiduMapCenterPosition.originalLatitude===t.latitude&&this.baiduMapCenterPosition.convertedLongitude&&this.baiduMapCenterPosition.convertedLatitude){this.baiduMapInstance.centerAndZoom(new n.Point(this.baiduMapCenterPosition.convertedLongitude,this.baiduMapCenterPosition.convertedLatitude),a);return}this.baiduMapCenterPosition={originalLongitude:t.longitude,originalLatitude:t.latitude,convertedLongitude:null,convertedLatitude:null};const o=new n.Point(t.longitude,t.latitude);this.baiduMapConverter?this.baiduMapConverter.translate([o],At.COORDINATES_WGS84,At.COORDINATES_BD09,s=>{let r=o;s.status!==0||!s.points?Z.warn("baidu map geo position convert failed"):(r=s.points[0],this.baiduMapCenterPosition.convertedLongitude=r.lng,this.baiduMapCenterPosition.convertedLatitude=r.lat),this.baiduMapInstance.centerAndZoom(r,a)}):this.baiduMapInstance.centerAndZoom(o,a)}setMapCenterMarker(t){if(!At.BMap||!this.baiduMapInstance)return;const a=At.BMap;if(this.baiduMapCenterPosition&&this.baiduMapCenterPosition.originalLongitude===t.longitude&&this.baiduMapCenterPosition.originalLatitude===t.latitude&&this.baiduMapCenterPosition.convertedLongitude&&this.baiduMapCenterPosition.convertedLatitude){this.setMaker(new a.Point(this.baiduMapCenterPosition.convertedLongitude,this.baiduMapCenterPosition.convertedLatitude));return}const n=new a.Point(t.longitude,t.latitude);this.baiduMapConverter?this.baiduMapConverter.translate([n],At.COORDINATES_WGS84,At.COORDINATES_BD09,o=>{let s=n;o.status!==0||!o.points?Z.warn("baidu map geo position convert failed"):s=o.points[0],this.setMaker(s)}):this.setMaker(n)}removeMapCenterMarker(){!this.baiduMapInstance||!this.baiduMapCenterMarker||(this.baiduMapInstance.removeOverlay(this.baiduMapCenterMarker),this.baiduMapCenterMarker=null)}setMaker(t){if(!At.BMap||!this.baiduMapInstance)return;const a=At.BMap;this.baiduMapCenterMarker?this.baiduMapCenterMarker.setPosition(t):(this.baiduMapCenterMarker=new a.Marker(t),this.baiduMapInstance.addOverlay(this.baiduMapCenterMarker))}}class ea{static AMap=null;getWebsite(){return"https://www.amap.com"}isSupportGetGeoLocationByClick(){return!1}asyncLoadAssets(t){if(ea.AMap)return Promise.resolve();if(!window._AMapSecurityConfig){const a={};zs()==="internalproxy"?a.serviceHost=ne.generateAmapApiInternalProxyUrl():zs()==="externalproxy"?a.serviceHost=mu():zs()==="plaintext"&&(a.securityJsCode=fu()),window._AMapSecurityConfig=a}return window.onAMapCallback||(window.onAMapCallback=()=>{ea.AMap=window.AMap}),Lo("js",ne.generateAmapJavascriptUrl("onAMapCallback"))}createMapInstance(){return new Yu}}class Yu{dependencyLoaded=!1;inited=!1;defaultZoomLevel=14;minZoomLevel=1;amapInstance=null;amapToolbar=null;amapCenterPosition=null;amapCenterMarker;constructor(){this.dependencyLoaded=!!ea.AMap}initMapInstance(t,a){if(!ea.AMap)return;const n=ea.AMap,o=new n.Map(t,{zoom:a.zoomLevel,center:[a.initCenter.longitude,a.initCenter.latitude],zooms:[1,19],jogEnable:!1}),s=new n.ToolBar({position:"LT"});o.addControl(s),o.on("click",function(r){a.onClick&&a.onClick({latitude:r.lnglat.lat,longitude:r.lnglat.lng})}),this.amapInstance=o,this.amapToolbar=s,this.inited=!0}setMapCenterTo(t,a){if(!ea.AMap||!this.amapInstance)return;const n=ea.AMap;if(this.amapCenterPosition&&this.amapCenterPosition.originalLongitude===t.longitude&&this.amapCenterPosition.originalLatitude===t.latitude&&this.amapCenterPosition.convertedLongitude&&this.amapCenterPosition.convertedLatitude){this.amapInstance.setZoomAndCenter(a,new n.LngLat(this.amapCenterPosition.convertedLongitude,this.amapCenterPosition.convertedLatitude));return}this.amapCenterPosition={originalLongitude:t.longitude,originalLatitude:t.latitude,convertedLongitude:null,convertedLatitude:null};const o=new n.LngLat(t.longitude,t.latitude);n.convertFrom(o,"gps",(s,r)=>{let l=o;r.info!=="ok"||!r.locations?Z.warn("amap geo position convert failed"):(l=r.locations[0],this.amapCenterPosition.convertedLongitude=l.getLng(),this.amapCenterPosition.convertedLatitude=l.getLat()),this.amapInstance.setZoomAndCenter(a,l)})}setMapCenterMarker(t){if(!ea.AMap||!this.amapInstance)return;const a=ea.AMap;if(this.amapCenterPosition&&this.amapCenterPosition.originalLongitude===t.longitude&&this.amapCenterPosition.originalLatitude===t.latitude&&this.amapCenterPosition.convertedLongitude&&this.amapCenterPosition.convertedLatitude){this.setMaker(new a.LngLat(this.amapCenterPosition.convertedLongitude,this.amapCenterPosition.convertedLatitude));return}const n=new a.LngLat(t.longitude,t.latitude);a.convertFrom(n,"gps",(o,s)=>{let r=n;s.info!=="ok"||!s.locations?Z.warn("amap geo position convert failed"):r=s.locations[0],this.setMaker(r)})}removeMapCenterMarker(){!this.amapInstance||!this.amapCenterMarker||(this.amapInstance.remove(this.amapCenterMarker),this.amapCenterMarker=null)}setMaker(t){if(!ea.AMap||!this.amapInstance)return;const a=ea.AMap;this.amapCenterMarker?this.amapCenterMarker.setPosition(t):(this.amapCenterMarker=new a.Marker({position:t}),this.amapInstance.add(this.amapCenterMarker))}}let wa=null;function of(e){const t=br();ds[t]||t==="custom"?wa=new Ka(t):t==="googlemap"?wa=new la:t==="baidumap"?wa=new At:t==="amap"&&(wa=new ea),wa&&wa.asyncLoadAssets(e)}function zu(){return wa?.getWebsite()||""}function rf(){return wa?.isSupportGetGeoLocationByClick()||!1}function Ku(){return wa?.createMapInstance()||null}const lf=Jn({__name:"MapView",props:{height:{},mapClass:{},mapStyle:{},geoLocation:{}},emits:["click"],setup(e,{expose:t,emit:a}){const n=e,o=a,{tt:s,getCurrentLanguageInfo:r}=Ge(),l=ro("mapContainer"),i=q(Ku()),u=q({latitude:0,longitude:0}),m=q(1),b=c(()=>!!i.value),v=c(()=>i.value?.dependencyLoaded||!1),I=c(()=>{const R=Object.assign({},n.mapStyle);return n.height&&(R.height=n.height),(!b.value||!v.value)&&(R.height="0"),R});function k(){let R=!1,x=!1;if(!(!b.value||!v.value||!i.value)){if(n.geoLocation&&(n.geoLocation.longitude||n.geoLocation.latitude)?(u.value.latitude!==n.geoLocation.latitude||u.value.longitude!==n.geoLocation.longitude)&&(u.value.latitude=n.geoLocation.latitude,u.value.longitude=n.geoLocation.longitude,m.value=i.value.defaultZoomLevel,x=!0):(!n.geoLocation||!n.geoLocation.longitude&&!n.geoLocation.latitude)&&(u.value.latitude||u.value.longitude)&&(u.value.latitude=0,u.value.longitude=0,m.value=i.value.minZoomLevel,x=!0),!i.value.inited){const B=r();i.value.initMapInstance(l.value,{language:B?.alternativeLanguageTag,initCenter:u.value,zoomLevel:m.value,text:{zoomIn:s("Zoom in"),zoomOut:s("Zoom out")},onClick:N=>{o("click",N)}}),i.value.inited&&(R=!0)}(R||x)&&i.value.setMapCenterTo(u.value,m.value),x&&m.value>i.value.minZoomLevel?i.value.setMapCenterMarker(u.value):x&&m.value<=i.value.minZoomLevel&&i.value.removeMapCenterMarker()}}function U(R){i.value&&R&&i.value.setMapCenterMarker(R)}return t({initMapView:k,setMarkerPosition:U}),(R,x)=>(Ta(),Ha(Fi,null,[on("div",{ref_key:"mapContainer",ref:l,style:Pi([{width:"100%"},I.value]),class:In(e.mapClass)},null,6),!b.value||!v.value?qo(R.$slots,"error-title",{key:0,mapSupported:b.value,mapDependencyLoaded:v.value}):hn("",!0),!b.value||!v.value?qo(R.$slots,"error-content",{key:1,mapSupported:b.value,mapDependencyLoaded:v.value}):hn("",!0)],64))}});var Gu=(e=>(e.Transaction="transaction",e.Template="template",e))(Gu||{}),$u=(e=>(e.Add="add",e.Edit="edit",e.View="view",e))($u||{}),Wu=(e=>(e.Getting="getting",e.Success="success",e.Error="error",e))(Wu||{});function cf(e,t,a){const{tt:n,getAllTimezones:o,getCurrentNumeralSystemType:s,getTimezoneDifferenceDisplayText:r,formatAmountToLocalizedNumeralsWithCurrency:l,getAdaptiveAmountRate:i,getCategorizedAccountsWithDisplayBalance:u}=Ge(),m=mt(),b=Nt(),v=sa(),I=Ca(),k=Ss(),U=qa(),R=da(),x=!!navigator.geolocation,B=q(t??"add"),N=q(null),K=q(null),D=q(null),Y=q(""),g=q(!0),A=q(!1),w=q(!1),P=q(null),H=q(!1),_=q(se(a)),Ae=c(()=>s()),de=c(()=>Ct(m.appSettings.timeZone)),X=c(()=>m.appSettings.showAccountBalance),me=c(()=>b.currentUserDefaultCurrency),ae=c(()=>b.currentUserDefaultAccountId),T=c(()=>b.currentUserFirstDayOfWeek),p=c(()=>b.currentUserCoordinateDisplayType),G=c(()=>o(!0)),f=c(()=>v.allPlainAccounts),F=c(()=>v.allVisiblePlainAccounts),C=c(()=>v.allAccountsMap),S=c(()=>u(F.value,X.value)),E=c(()=>I.allTransactionCategories),W=c(()=>I.allTransactionCategoriesMap),V=c(()=>k.allTransactionTags),J=c(()=>k.allTransactionTagsMap),h=c(()=>F.value&&F.value[0]?F.value[0].id:void 0),O=c(()=>I.hasAvailableExpenseCategories),fe=c(()=>I.hasAvailableIncomeCategories),ge=c(()=>I.hasAvailableTransferCategories),Se=c(()=>e!=="transaction"||B.value!=="add"&&B.value!=="edit"?!1:!xt(_.value.pictures)||_.value.pictures.length<Du),be=c(()=>{if(e==="transaction")return B.value==="add"?"Add Transaction":B.value==="edit"?"Edit Transaction":"Transaction Detail";if(e==="template"&&_.value.templateType===Ut.Normal.type){if(B.value==="add")return"Add Transaction Template";if(B.value==="edit")return"Edit Transaction Template"}else if(e==="template"&&_.value.templateType===Ut.Schedule.type){if(B.value==="add")return"Add Scheduled Transaction";if(B.value==="edit")return"Edit Scheduled Transaction"}return""}),Ue=c(()=>B.value==="add"?"Add":"Save"),$e=c(()=>B.value==="view"?"Close":"Cancel"),Ne=c(()=>_.value.type===ue.Expense?"Expense Amount":_.value.type===ue.Income?"Income Amount":_.value.type===ue.Transfer?"Transfer Out Amount":"Amount"),xe=c(()=>{const Te=C.value[_.value.sourceAccountId],Re=n(Ne.value);if(!Te||Te.currency===me.value||!_.value.sourceAmount||_.value.hideAmount)return Re;const tt=R.latestExchangeRateMap[Te.currency],at=R.latestExchangeRateMap[me.value];if(!tt||!tt.rate||!at||!at.rate)return Re;let qt=So(_.value.sourceAmount,tt.rate,at.rate);if(!qt)return Re;qt=Math.trunc(qt);const Ls=Be(qt,_.value.hideAmount,me.value);return Re+` (${Ls})`}),ze=c(()=>_.value.type===ue.Expense||_.value.type===ue.Income?"Account":_.value.type===ue.Transfer?"Source Account":"Account"),L=c(()=>{const Te=C.value[_.value.sourceAccountId],Re=C.value[_.value.destinationAccountId];if(!Te||!Re||Te.currency===Re.currency)return n("Transfer In Amount");const tt=R.latestExchangeRateMap[Te.currency],at=R.latestExchangeRateMap[Re.currency],qt=i(_.value.sourceAmount,_.value.destinationAmount,tt,at);return qt?n("Transfer In Amount")+` (${qt})`:n("Transfer In Amount")}),oe=c(()=>_.value.sourceAccountId?ht.findAccountNameById(f.value,_.value.sourceAccountId)||"":n("None")),ce=c(()=>_.value.destinationAccountId?ht.findAccountNameById(f.value,_.value.destinationAccountId)||"":n("None")),ie=c(()=>{const Te=C.value[_.value.sourceAccountId];return Te?Te.currency:me.value}),j=c(()=>{const Te=C.value[_.value.destinationAccountId];return Te?Te.currency:me.value}),te=c(()=>`UTC${Ae.value.replaceWesternArabicDigitsToLocalizedDigits(wn(_.value.utcOffset))}`),he=c(()=>r(_.value.utcOffset)),we=c(()=>P.value==="success"?"":P.value==="getting"?n("Getting Location..."):n("No Location")),Fe=c(()=>{if(_.value.type===ue.Expense){if(!_.value.expenseCategoryId||_.value.expenseCategoryId==="")return"Transaction category cannot be blank";if(!_.value.sourceAccountId||_.value.sourceAccountId==="")return"Transaction account cannot be blank"}else if(_.value.type===ue.Income){if(!_.value.incomeCategoryId||_.value.incomeCategoryId==="")return"Transaction category cannot be blank";if(!_.value.sourceAccountId||_.value.sourceAccountId==="")return"Transaction account cannot be blank"}else if(_.value.type===ue.Transfer){if(!_.value.transferCategoryId||_.value.transferCategoryId==="")return"Transaction category cannot be blank";if(!_.value.sourceAccountId||_.value.sourceAccountId==="")return"Source account cannot be blank";if(!_.value.destinationAccountId||_.value.destinationAccountId==="")return"Destination account cannot be blank"}return e==="template"&&_.value instanceof Pa&&!_.value.name?"Template name cannot be blank":null}),ke=c(()=>!!Fe.value);function se(Te){const Re=Va(),tt=m.appSettings.timeZone;let at=ue.Expense;Te===ue.Income?at=ue.Income:Te===ue.Transfer&&(at=ue.Transfer);let qt=Aa.createNewTransaction(at,Re,tt,Ct(tt));return e==="template"&&(qt=Pa.createNewTransactionTemplate(qt)),qt}function ye(Te,Re){if(Te){const tt=_.value.sourceAccountId;_.value.sourceAccountId=_.value.destinationAccountId,_.value.destinationAccountId=tt}if(Re){const tt=_.value.sourceAmount;_.value.sourceAmount=_.value.destinationAmount,_.value.destinationAmount=tt}}function Be(Te,Re,tt){return l(Re?Jt:Te,tt)}function Tt(Te){return U.getTransactionPictureUrl(Te)}return Ma(()=>_.value.sourceAmount,(Te,Re)=>{B.value==="view"||g.value||U.setTransactionSuitableDestinationAmount(_.value,Re,Te)}),Ma(()=>_.value.destinationAmount,Te=>{B.value==="view"||g.value||(_.value.type===ue.Expense||_.value.type===ue.Income)&&(_.value.sourceAmount=Te)}),Ma(()=>_.value.timeZone,Te=>{for(const Re of G.value)if(Re.name===Te){_.value.utcOffset=Re.utcOffsetMinutes;break}}),{isSupportGeoLocation:x,mode:B,editId:N,addByTemplateId:K,duplicateFromId:D,clientSessionId:Y,loading:g,submitting:A,uploadingPicture:w,geoLocationStatus:P,setGeoLocationByClickMap:H,transaction:_,numeralSystem:Ae,currentTimezoneOffsetMinutes:de,showAccountBalance:X,defaultCurrency:me,defaultAccountId:ae,firstDayOfWeek:T,coordinateDisplayType:p,allTimezones:G,allAccounts:f,allVisibleAccounts:F,allAccountsMap:C,allVisibleCategorizedAccounts:S,allCategories:E,allCategoriesMap:W,allTags:V,allTagsMap:J,firstVisibleAccountId:h,hasAvailableExpenseCategories:O,hasAvailableIncomeCategories:fe,hasAvailableTransferCategories:ge,canAddTransactionPicture:Se,title:be,saveButtonTitle:Ue,cancelButtonTitle:$e,sourceAmountName:Ne,sourceAmountTitle:xe,sourceAccountTitle:ze,transferInAmountTitle:L,sourceAccountName:oe,destinationAccountName:ce,sourceAccountCurrency:ie,destinationAccountCurrency:j,transactionDisplayTimezone:te,transactionTimezoneTimeDifference:he,geoLocationStatusInfo:we,inputEmptyProblemMessage:Fe,inputIsEmpty:ke,createNewTransactionModel:se,swapTransactionData:ye,getDisplayAmount:Be,getTransactionPictureUrl:Tt}}function uf(e,t){if(!e)return"";e=Wi(e);const a=Bt.valueOf(t)||Bt.Default,n=Ni(e.latitude,"N","S",a.displayFormat,a.directionFormat),o=Ni(e.longitude,"E","W",a.displayFormat,a.directionFormat);return a.displayOrder===_s.LatitudeLongitude?`${n}, ${o}`:a.displayOrder===_s.LongitudeLatitude?`${o}, ${n}`:""}function Ni(e,t,a,n,o){let s="",r="";if(o===Zs.Signed?s=e>=0?"":"-":o===Zs.Directional&&(r=e>=0?t:a),e=Math.abs(e),n===is.DecimalDegrees)return`${s}${e.toFixed(6)}${r}`;if(n===is.DecimalMinutes){const l=Math.trunc(e),i=(e-l)*60;return`${s}${l}°${i.toFixed(5)}'${r}`}else if(n===is.DegreesMinutesSeconds){const l=Math.trunc(e),i=Math.trunc((e-l)*60),u=(e-l-i/60)*3600;return`${s}${l}°${i}'${u.toFixed(4)}"${r}`}else return""}function df(e,t,a,n,o,s,r,l,i,u,m){if(yt(i.time)&&(e.time=i.time),!i.type&&i.categoryId&&i.categoryId!=="0"&&n[i.categoryId]){const b=n[i.categoryId],v=oo(b.type);Ie(v)&&(e.type=v)}if(yt(i.amount)&&(e.sourceAmount=i.amount),yt(i.destinationAmount)&&(e.destinationAmount=i.destinationAmount),a[pe.Expense]&&a[pe.Expense].length&&(i.categoryId&&i.categoryId!=="0"&&(Gs(a[pe.Expense],i.categoryId)?e.expenseCategoryId=i.categoryId:e.expenseCategoryId=$s(a[pe.Expense],i.categoryId)),e.expenseCategoryId||(e.expenseCategoryId=Fa(a[pe.Expense]))),a[pe.Income]&&a[pe.Income].length&&(i.categoryId&&i.categoryId!=="0"&&(Gs(a[pe.Income],i.categoryId)?e.incomeCategoryId=i.categoryId:e.incomeCategoryId=$s(a[pe.Income],i.categoryId)),e.incomeCategoryId||(e.incomeCategoryId=Fa(a[pe.Income]))),a[pe.Transfer]&&a[pe.Transfer].length&&(i.categoryId&&i.categoryId!=="0"&&(Gs(a[pe.Transfer],i.categoryId)?e.transferCategoryId=i.categoryId:e.transferCategoryId=$s(a[pe.Transfer],i.categoryId)),e.transferCategoryId||(e.transferCategoryId=Fa(a[pe.Transfer]))),o.length){if(i.accountId&&i.accountId!=="0"){for(const b of o)if(b.id===i.accountId){e.sourceAccountId=i.accountId,e.destinationAccountId=i.accountId;break}}if(i.destinationAccountId&&i.destinationAccountId!=="0"){for(const b of o)if(b.id===i.destinationAccountId){e.destinationAccountId=i.destinationAccountId;break}}e.sourceAccountId||(l&&s[l]&&!s[l].hidden?e.sourceAccountId=l:e.sourceAccountId=o[0].id),e.destinationAccountId||(l&&s[l]&&!s[l].hidden?e.destinationAccountId=l:e.destinationAccountId=o[0].id)}if(r&&i.tagIds){const b=i.tagIds.split(","),v=[];for(const I of b){const k=r[I];k&&!k.hidden&&v.push(k.id)}e.tagIds=v}i.comment&&(e.comment=i.comment),t&&(u&&(e.id=t.id),e.type=t.type,e.type===ue.Expense?e.expenseCategoryId=t.categoryId||"":e.type===ue.Income?e.incomeCategoryId=t.categoryId||"":e.type===ue.Transfer&&(e.transferCategoryId=t.categoryId||""),u&&(e.utcOffset=t.utcOffset,e.timeZone=t.timeZone,m?e.time=Wa(t.time,e.utcOffset,_t()):e.time=t.time),e.sourceAccountId=t.sourceAccountId,t.destinationAccountId?e.destinationAccountId=t.destinationAccountId:e.destinationAccountId="",e.sourceAmount=t.sourceAmount,t.destinationAmount?e.destinationAmount=t.destinationAmount:e.destinationAmount=0,e.hideAmount=t.hideAmount,e.tagIds=t.tagIds||[],e.setPictures(rn.ofMulti(t.pictures||[])),e.comment=t.comment,u&&e.setGeoLocation(t.geoLocation))}function wi(e){if(!e||!Ye(e))return"";const t=e.split(".");return t[t.length-1]}function mf(e,t){if(!(!e||e.length<1)){for(const a of e)if(a.type===t)return a.extensions}}function ff(e,t){if(!t)return!1;const a=t.split(","),n=wi(e).toLowerCase();for(const o of a)if(wi(o).toLowerCase()===n)return!0;return!1}function gf(e){const t=mt(),a=sa(),n=qa(),o=un(),s=cn(),r=q(!0),l=q(!1),i=q({}),u=c(()=>e==="statisticsDefault"?"Default Account Filter":"Filter Accounts"),m=c(()=>e==="statisticsDefault"?"Save":"Apply"),b=c(()=>e==="statisticsDefault"||e==="statisticsCurrent"||e==="homePageOverview"||e==="transactionListCurrent"),v=c(()=>qc(a.allCategorizedAccountsMap)),I=c(()=>a.allAvailableAccountsCount>0),k=c(()=>l.value?a.allAvailableAccountsCount>0:a.allVisibleAccountsCount>0);function U(B,N){return!N[B.id]}function R(){const B={};for(const N of Dt(a.allAccountsMap))!b.value&&N.hidden||(e==="transactionListCurrent"&&n.allFilterAccountIdsCount>0?B[N.id]=!0:B[N.id]=!1);if(e==="statisticsDefault")return i.value=Object.assign(B,t.appSettings.statistics.defaultAccountFilter),!0;if(e==="statisticsCurrent")return i.value=Object.assign(B,o.transactionStatisticsFilter.filterAccountIds),!0;if(e==="homePageOverview")return i.value=Object.assign(B,t.appSettings.overviewAccountFilterInHomePage),!0;if(e==="transactionListCurrent"){for(const N of Ba(n.allFilterAccountIds,!0)){const K=a.allAccountsMap[N];K&&Qc(B,K,!1)}return i.value=B,!0}else return e==="accountListTotalAmount"?(i.value=Object.assign(B,t.appSettings.totalAmountExcludeAccountIds),!0):!1}function x(){const B={};let N=!0,K="",D=!0;for(const Y of Mt(i.value)){const g=a.allAccountsMap[Y];g&&(!b.value&&g.hidden||(vr(g,i.value)?(K.length>0&&(K+=","),K+=Y):(B[Y]=!0,N=!1)))}return e==="statisticsDefault"?t.setStatisticsDefaultAccountFilter(B):e==="statisticsCurrent"?D=o.updateTransactionStatisticsFilter({filterAccountIds:B}):e==="homePageOverview"?(t.setOverviewAccountFilterInHomePage(B),s.updateTransactionOverviewInvalidState(!0)):e==="transactionListCurrent"?(D=n.updateTransactionListFilter({accountIds:N?"":K}),D&&n.updateTransactionListInvalidState(!0)):e==="accountListTotalAmount"&&t.setTotalAmountExcludeAccountIds(B),D}return{loading:r,showHidden:l,filterAccountIds:i,title:u,applyText:m,allowHiddenAccount:b,allCategorizedAccounts:v,hasAnyAvailableAccount:I,hasAnyVisibleAccount:k,isAccountChecked:U,loadFilterAccountIds:R,saveFilterAccountIds:x}}function pf(e,t){const{tt:a}=Ge(),n=mt(),o=Ca(),s=qa(),r=un(),l=cn(),i=t?Hs(t.split(","),!0):void 0,u=q(!0),m=q(!1),b=q({}),v=c(()=>e==="statisticsDefault"?"Default Transaction Category Filter":"Filter Transaction Categories"),I=c(()=>e==="statisticsDefault"?"Save":"Apply"),k=c(()=>Tu(o.allTransactionCategories,i)),U=c(()=>Di(k.value,!0)),R=c(()=>Di(k.value,m.value)),x=c(()=>Au(k.value,m.value));function B(Y,g){return!g[Y.id]}function N(Y){switch(Y){case pe.Income:return a("Income Categories");case pe.Expense:return a("Expense Categories");case pe.Transfer:return a("Transfer Categories");default:return a("Transaction Categories")}}function K(){const Y={};for(const g of Dt(o.allTransactionCategoriesMap))i&&!i[g.type]||(e==="transactionListCurrent"&&s.allFilterCategoryIdsCount>0?Y[g.id]=!0:Y[g.id]=!1);if(e==="statisticsDefault")return b.value=Object.assign(Y,n.appSettings.statistics.defaultTransactionCategoryFilter),!0;if(e==="statisticsCurrent")return b.value=Object.assign(Y,r.transactionStatisticsFilter.filterCategoryIds),!0;if(e==="homePageOverview")return b.value=Object.assign(Y,n.appSettings.overviewTransactionCategoryFilterInHomePage),!0;if(e==="transactionListCurrent"){for(const g of Ba(s.allFilterCategoryIds,!0)){const A=o.allTransactionCategoriesMap[g];A&&(!A.subCategories||!A.subCategories.length)?Y[A.id]=!1:A&&bu(Y,!1,A)}return b.value=Y,!0}else return!1}function D(){const Y={};let g=!0,A="",w=!0;for(const P of Mt(b.value)){const H=o.allTransactionCategoriesMap[P];H&&(Ir(H,b.value)?(A.length>0&&(A+=","),A+=P):(Y[P]=!0,g=!1))}return e==="statisticsDefault"?n.setStatisticsDefaultTransactionCategoryFilter(Y):e==="statisticsCurrent"?w=r.updateTransactionStatisticsFilter({filterCategoryIds:Y}):e==="homePageOverview"?(n.setOverviewTransactionCategoryFilterInHomePage(Y),l.updateTransactionOverviewInvalidState(!0)):e==="transactionListCurrent"&&(w=s.updateTransactionListFilter({categoryIds:g?"":A}),w&&s.updateTransactionListInvalidState(!0)),w}return{loading:u,showHidden:m,filterCategoryIds:b,title:v,applyText:I,allTransactionCategories:k,hasAnyAvailableCategory:U,hasAnyVisibleCategory:R,hasAvailableCategory:x,isCategoryChecked:B,getCategoryTypeName:N,loadFilterCategoryIds:K,saveFilterCategoryIds:D}}function yf(e){const{getAllTransactionTagFilterTypes:t}=Ge(),a=Ss(),n=qa(),o=un(),s=q(!0),r=q(!1),l=q({}),i=q(Zt.Default.type),u=c(()=>"Filter Transaction Tags"),m=c(()=>"Apply"),b=c(()=>a.allTransactionTags),v=c(()=>t()),I=c(()=>a.allAvailableTagsCount>0),k=c(()=>r.value?a.allAvailableTagsCount>0:a.allVisibleTagsCount>0);function U(){const x={};for(const B of Dt(a.allTransactionTagsMap))x[B.id]=!0;if(e==="statisticsCurrent"){const B=o.transactionStatisticsFilter.tagIds?o.transactionStatisticsFilter.tagIds.split(","):[];for(const N of B){const K=a.allTransactionTagsMap[N];K&&(x[K.id]=!1)}return l.value=x,i.value=o.transactionStatisticsFilter.tagFilterType,!0}else if(e==="transactionListCurrent"){for(const B of Ba(n.allFilterTagIds,!0)){const N=a.allTransactionTagsMap[B];N&&(x[N.id]=!1)}return l.value=x,!0}else return!1}function R(){const x={};let B="",N=!0;for(const K of Mt(l.value)){const D=a.allTransactionTagsMap[K];D&&(l.value[D.id]?x[D.id]=!0:(B.length>0&&(B+=","),B+=D.id))}return e==="statisticsCurrent"?(N=o.updateTransactionStatisticsFilter({tagIds:B,tagFilterType:i.value}),N&&o.updateTransactionStatisticsInvalidState(!0)):e==="transactionListCurrent"&&(N=n.updateTransactionListFilter({tagIds:B}),N&&n.updateTransactionListInvalidState(!0)),N}return{loading:s,showHidden:r,filterTagIds:l,tagFilterType:i,title:u,applyText:m,allTags:b,allTagFilterTypes:v,hasAnyAvailableTag:I,hasAnyVisibleTag:k,loadFilterTagIds:U,saveFilterTagIds:R}}class ga{static allInstances=[];static allInstancesByType={};static List=new ga(0,"Transaction List");static Calendar=new ga(1,"Transaction Calendar");static Default=ga.List;type;name;constructor(t,a){this.type=t,this.name=a,ga.allInstances.push(this),ga.allInstancesByType[t]=this}static values(){return ga.allInstances}static valueOf(t){return ga.allInstancesByType[t]}}function hf(){const{tt:e,getAllDateRanges:t,getCurrentNumeralSystemType:a,formatUnixTimeToLongDateTime:n,formatUnixTimeToLongDate:o,formatUnixTimeToShortTime:s,formatUnixTimeToGregorianLikeLongYearMonth:r,formatDateRange:l,formatAmountToLocalizedNumeralsWithCurrency:i}=Ge(),u=mt(),m=Nt(),b=sa(),v=Ca(),I=Ss(),k=qa(),U=q(ga.List.type),R=q(!0),x=q(0),B=q(0),N=q(""),K=c(()=>a()),D=c(()=>Ct(u.appSettings.timeZone)),Y=c(()=>m.currentUserFirstDayOfWeek),g=c(()=>m.currentUserFiscalYearStart),A=c(()=>Xc(Ae.value,J.value,m.currentUserDefaultCurrency)),w=c(()=>u.appSettings.showTotalAmountInTransactionListPage),P=c(()=>u.appSettings.showTagInTransactionListPage),H=c(()=>t(ua.Normal,!0,!!b.getAccountStatementDate(f.value.accountIds))),_=c(()=>b.allMixedPlainAccounts),Ae=c(()=>b.allAccountsMap),de=c(()=>b.allAvailableAccountsCount),X=c(()=>{const se={};for(const[ye,Be]of Wt(v.allTransactionCategories))f.value.type&&oo(parseInt(ye))!==f.value.type||(se[ye]=Be);return se}),me=c(()=>v.allTransactionCategoriesMap),ae=c(()=>{let se=0;for(const[ye,Be]of Wt(v.allTransactionCategories))f.value.type&&oo(parseInt(ye))!==f.value.type||Be&&(se+=Be.length);return se}),T=c(()=>I.allTransactionTagsMap),p=c(()=>I.allAvailableTagsCount),G=c(()=>{const se=ga.valueOf(U.value);return e(se?se.name:ga.List.name)}),f=c(()=>k.transactionsFilter),F=c(()=>f.value.dateType===Q.All.type?e("Date"):l(f.value.dateType,f.value.minTime,f.value.maxTime)),C=c(()=>n(f.value.minTime)),S=c(()=>n(f.value.maxTime)),E=c(()=>gr(f.value.minTime,f.value.maxTime)),W=c(()=>!f.value.minTime||!f.value.maxTime?sr().toGregorianCalendarYear0BasedMonth():St(f.value.minTime).toGregorianCalendarYear0BasedMonth()),V=c(()=>k.allFilterCategoryIds),J=c(()=>k.allFilterAccountIds),h=c(()=>k.allFilterTagIds),O=c(()=>k.allFilterCategoryIdsCount),fe=c(()=>k.allFilterAccountIdsCount),ge=c(()=>k.allFilterTagIdsCount),Se=c(()=>fe.value>1?e("Multiple Accounts"):Ae.value[f.value.accountIds]?.name||e("Account")),be=c(()=>O.value>1?e("Multiple Categories"):me.value[f.value.categoryIds]?.name||e("Category")),Ue=c(()=>f.value.tagIds==="none"?e("Without Tags"):ge.value>1?e("Multiple Tags"):T.value[f.value.tagIds]?.name||e("Tags")),$e=c(()=>{if(!f.value.amountFilter)return"";const se=f.value.amountFilter.split(":");if(se.length<2)return"";const ye=[];for(let Be=1;Be<se.length;Be++)ye.push(i(parseInt(se[Be]),!1));return ye.join(" ~ ")}),Ne=c(()=>$a(Wa(f.value.minTime,Ct(),_t()))),xe=c(()=>$a(Wa(f.value.maxTime,Ct(),_t()))),ze=c(()=>{const se=k.transactions;if(!se||!se.length)return null;const ye=St(f.value.minTime),Be=ye.getGregorianCalendarYear(),Tt=ye.getGregorianCalendarMonth();for(const Te of se)if(Te.year===Be&&Te.month===Tt)return Te;return null}),L=c(()=>{if(f.value.accountIds&&fe.value===1){const se=Ae.value[f.value.accountIds];if(se&&se.type===Me.MultiSubAccounts.type)return!1}return!0});function oe(se,ye,Be){return i(ye?Jt:se,Be)}function ce(se){return s(se.time,se.utcOffset,D.value)}function ie(se){return o(se.time,se.utcOffset,D.value)}function j(se){return r(_a(se.yearDashMonth))}function te(se){return`UTC${K.value.replaceWesternArabicDigitsToLocalizedDigits(wn(se.utcOffset))}`}function he(se){const ye=K.value.replaceWesternArabicDigitsToLocalizedDigits(ls(u.appSettings.timeZone));return`${n(se.time)} (UTC${ye})`}function we(se){if(fe.value<1){if(se.sourceAccount)return oe(se.sourceAmount,se.hideAmount,se.sourceAccount.currency)}else if(fe.value===1){if(se.sourceAccount&&(J.value[se.sourceAccount.id]||J.value[se.sourceAccount.parentId]))return oe(se.sourceAmount,se.hideAmount,se.sourceAccount.currency);if(se.destinationAccount&&(J.value[se.destinationAccount.id]||J.value[se.destinationAccount.parentId]))return oe(se.destinationAmount,se.hideAmount,se.destinationAccount.currency)}else if(se.sourceAccount&&se.destinationAccount){if((J.value[se.sourceAccount.id]||J.value[se.sourceAccount.parentId])&&!J.value[se.destinationAccount.id]&&!J.value[se.destinationAccount.parentId])return oe(se.sourceAmount,se.hideAmount,se.sourceAccount.currency);if((J.value[se.destinationAccount.id]||J.value[se.destinationAccount.parentId])&&!J.value[se.sourceAccount.id]&&!J.value[se.sourceAccount.parentId])return oe(se.destinationAmount,se.hideAmount,se.destinationAccount.currency)}return se.sourceAccount?oe(se.sourceAmount,se.hideAmount,se.sourceAccount.currency):""}function Fe(se,ye,Be,Tt){const Te=i(se,ye);return Be+Te+(Tt?xa:"")}function ke(se,ye){switch(se){case ue.ModifyBalance:return e("Modify Balance");case ue.Income:return e("Income");case ue.Expense:return e("Expense");case ue.Transfer:return e("Transfer");default:return e(ye)}}return{pageType:U,loading:R,customMinDatetime:x,customMaxDatetime:B,currentCalendarDate:N,currentTimezoneOffsetMinutes:D,firstDayOfWeek:Y,fiscalYearStart:g,defaultCurrency:A,showTotalAmountInTransactionListPage:w,showTagInTransactionListPage:P,allDateRanges:H,allAccounts:_,allAccountsMap:Ae,allAvailableAccountsCount:de,allCategories:me,allPrimaryCategories:X,allAvailableCategoriesCount:ae,allTransactionTags:T,allAvailableTagsCount:p,displayPageTypeName:G,query:f,queryDateRangeName:F,queryMinTime:C,queryMaxTime:S,queryMonthlyData:E,queryMonth:W,queryAllFilterCategoryIds:V,queryAllFilterAccountIds:J,queryAllFilterTagIds:h,queryAllFilterCategoryIdsCount:O,queryAllFilterAccountIdsCount:fe,queryAllFilterTagIdsCount:ge,queryAccountName:Se,queryCategoryName:be,queryTagName:Ue,queryAmount:$e,transactionCalendarMinDate:Ne,transactionCalendarMaxDate:xe,currentMonthTransactionData:ze,canAddTransaction:L,getDisplayTime:ce,getDisplayLongDate:ie,getDisplayLongYearMonth:j,getDisplayTimezone:te,getDisplayTimeInDefaultTimezone:he,getDisplayAmount:we,getDisplayMonthTotalAmount:Fe,getTransactionTypeName:ke}}function Hu(e){let t=e.startTime,a=e.endTime;if((!t||!a)&&e.items&&e.items.length){let n=Number.MAX_SAFE_INTEGER,o=0;for(const s of e.items)for(const r of s.items){const i=jt(r.year,r.month,r.day).getUnixTime();i<n&&(n=i),i>o&&(o=i)}n<Number.MAX_SAFE_INTEGER&&o>0&&(t=n,a=o)}if(e.dateAggregationType===Xe.Day.type)return dr(t,a);{const n=Sn(t),o=Sn(a);return xo(n,o,e.fiscalYearStart,e.dateAggregationType)}}function Vu(e){return Cu(e.items,e.startYearMonth,e.endYearMonth,e.fiscalYearStart,e.dateAggregationType)}function Tf(e){const{tt:t}=Ge(),a=c(()=>e.chartMode==="daily"?Hu(e):e.chartMode==="monthly"?Vu(e):[]);function n(o){return e.translateName?t(o):o}return{allDateRanges:a,getItemName:n}}function vf(e,t){const a=[];let n=-1;for(let o=0;o<e.length;o++)o%t===0&&(a[++n]=[]),a[n].push({color:e[o]});return a}function Nr(e){return e&&e!==Qi?`#${e}`:Cs}function Ju(e){return e&&e!==$n?`#${e}`:Cs}function _u(e){return e&&e!==vn?`#${e}`:Cs}function Af(){const{tt:e,getAllDateRanges:t,getAllStatisticsSortingTypes:a,getAllStatisticsDateAggregationTypes:n,formatUnixTimeToLongDateTime:o,formatUnixTimeToGregorianLikeLongYearMonth:s,formatDateRange:r,formatAmountToLocalizedNumeralsWithCurrency:l}=Ge(),i=mt(),u=Nt(),m=un(),b=q(!0),v=q(Ee.CategoricalAnalysis),I=q(Xe.Default.type),k=q(Xe.Default.type),U=c(()=>i.appSettings.showAccountBalance),R=c(()=>u.currentUserDefaultCurrency),x=c(()=>u.currentUserFirstDayOfWeek),B=c(()=>u.currentUserFiscalYearStart),N=c(()=>v.value===Ee.CategoricalAnalysis?t(ua.Normal,!0):v.value===Ee.TrendAnalysis?t(ua.TrendAnalysis,!0):v.value===Ee.AssetTrends?t(ua.AssetTrends,!0):[]),K=c(()=>a()),D=c(()=>n(Ee.TrendAnalysis)),Y=c(()=>n(Ee.AssetTrends)),g=c(()=>m.transactionStatisticsFilter),A=c(()=>m.categoricalAnalysisChartDataCategory),w=c(()=>v.value===Ee.CategoricalAnalysis?g.value.categoricalChartDateType:v.value===Ee.TrendAnalysis?g.value.trendChartDateType:v.value===Ee.AssetTrends?g.value.assetTrendsChartDateType:null),P=c(()=>v.value===Ee.CategoricalAnalysis?o(g.value.categoricalChartStartTime):v.value===Ee.TrendAnalysis?s(_a(g.value.trendChartStartYearMonth)):v.value===Ee.AssetTrends?o(g.value.assetTrendsChartStartTime):""),H=c(()=>v.value===Ee.CategoricalAnalysis?o(g.value.categoricalChartEndTime):v.value===Ee.TrendAnalysis?s(Hn(g.value.trendChartEndYearMonth)):v.value===Ee.AssetTrends?o(g.value.assetTrendsChartEndTime):""),_=c(()=>v.value===Ee.CategoricalAnalysis?g.value.chartDataType===z.AccountTotalAssets.type||g.value.chartDataType===z.AccountTotalLiabilities.type?e(Q.All.name):r(g.value.categoricalChartDateType,g.value.categoricalChartStartTime,g.value.categoricalChartEndTime):v.value===Ee.TrendAnalysis?r(g.value.trendChartDateType,_a(g.value.trendChartStartYearMonth),Hn(g.value.trendChartEndYearMonth)):v.value===Ee.AssetTrends?r(g.value.assetTrendsChartDateType,g.value.assetTrendsChartStartTime,g.value.assetTrendsChartEndTime):""),Ae=c(()=>{const Ne=Qo(z.values(),g.value.chartDataType)||"Statistics";return e(Ne)}),de=c(()=>{const Ne=Qo(Rt.values(),g.value.sortingType)||"System Default";return e(Ne)}),X=c(()=>jo(D.value,I.value)||""),me=c(()=>jo(Y.value,k.value)||""),ae=c(()=>v.value===Ee.CategoricalAnalysis?g.value.chartDataType===z.AccountTotalAssets.type||g.value.chartDataType===z.AccountTotalLiabilities.type||g.value.categoricalChartDateType===i.appSettings.statistics.defaultCategoricalChartDataRangeType?!1:!!g.value.categoricalChartStartTime||!!g.value.categoricalChartEndTime:v.value===Ee.TrendAnalysis?g.value.trendChartDateType===i.appSettings.statistics.defaultTrendChartDataRangeType?!1:!!g.value.trendChartStartYearMonth||!!g.value.trendChartEndYearMonth:v.value===Ee.AssetTrends?g.value.assetTrendsChartDateType===i.appSettings.statistics.defaultAssetTrendsChartDataRangeType?!1:!!g.value.assetTrendsChartStartTime||!!g.value.assetTrendsChartEndTime:!1),T=c(()=>v.value===Ee.CategoricalAnalysis?!(g.value.chartDataType===z.AccountTotalAssets.type||g.value.chartDataType===z.AccountTotalLiabilities.type):!0),p=c(()=>T.value?v.value===Ee.CategoricalAnalysis?g.value.categoricalChartDateType!==Q.All.type:v.value===Ee.TrendAnalysis?g.value.trendChartDateType!==Q.All.type:v.value===Ee.AssetTrends?g.value.assetTrendsChartDateType!==Q.All.type:!1:!1),G=c(()=>{if(v.value===Ee.CategoricalAnalysis){if(g.value.chartDataType===z.AccountTotalAssets.type||g.value.chartDataType===z.AccountTotalLiabilities.type)return!1}else if(v.value===Ee.AssetTrends)return!1;return!0}),f=c(()=>{if(v.value===Ee.CategoricalAnalysis){if(g.value.chartDataType===z.AccountTotalAssets.type||g.value.chartDataType===z.AccountTotalLiabilities.type)return!1}else if(v.value===Ee.AssetTrends)return!1;return!0}),F=c(()=>f.value),C=c(()=>f.value),S=c(()=>!(!U.value&&v.value===Ee.CategoricalAnalysis&&(g.value.chartDataType===z.AccountTotalAssets.type||g.value.chartDataType===z.AccountTotalLiabilities.type))),E=c(()=>g.value.chartDataType===z.InflowsByAccount.type?e("Total Inflows"):g.value.chartDataType===z.OutflowsByAccount.type?e("Total Outflows"):g.value.chartDataType===z.IncomeByAccount.type||g.value.chartDataType===z.IncomeByPrimaryCategory.type||g.value.chartDataType===z.IncomeBySecondaryCategory.type?e("Total Income"):g.value.chartDataType===z.ExpenseByAccount.type||g.value.chartDataType===z.ExpenseByPrimaryCategory.type||g.value.chartDataType===z.ExpenseBySecondaryCategory.type?e("Total Expense"):g.value.chartDataType===z.AccountTotalAssets.type?e("Total Assets"):g.value.chartDataType===z.AccountTotalLiabilities.type?e("Total Liabilities"):e("Total Amount")),W=c(()=>g.value.chartDataType!==z.OutflowsByAccount.type&&g.value.chartDataType!==z.InflowsByAccount.type),V=c(()=>g.value.chartDataType!==z.OutflowsByAccount.type&&g.value.chartDataType!==z.InflowsByAccount.type&&g.value.chartDataType!==z.TotalOutflows.type&&g.value.chartDataType!==z.TotalExpense.type&&g.value.chartDataType!==z.TotalInflows.type&&g.value.chartDataType!==z.TotalIncome.type&&g.value.chartDataType!==z.NetCashFlow.type&&g.value.chartDataType!==z.NetIncome.type&&g.value.chartDataType!==z.NetWorth.type),J=c(()=>(g.value.trendChartType===It.Area.type||g.value.trendChartType===It.Column.type)&&g.value.chartDataType!==z.OutflowsByAccount.type&&g.value.chartDataType!==z.InflowsByAccount.type),h=c(()=>g.value.chartDataType===z.TotalOutflows.type||g.value.chartDataType===z.TotalExpense.type||g.value.chartDataType===z.TotalInflows.type||g.value.chartDataType===z.TotalIncome.type||g.value.chartDataType===z.NetCashFlow.type||g.value.chartDataType===z.NetIncome.type||g.value.chartDataType===z.NetWorth.type),O=c(()=>m.categoricalOverviewAnalysisData),fe=c(()=>m.categoricalAnalysisData),ge=c(()=>m.trendsAnalysisData),Se=c(()=>m.assetTrendsData);function be(Ne){return v.value===Ee.CategoricalAnalysis?g.value.categoricalChartDateType===Ne&&!!g.value.categoricalChartStartTime&&!!g.value.categoricalChartEndTime:v.value===Ee.TrendAnalysis?g.value.trendChartDateType===Ne&&!!g.value.trendChartStartYearMonth&&!!g.value.trendChartEndYearMonth:v.value===Ee.AssetTrends?g.value.assetTrendsChartDateType===Ne&&!!g.value.assetTrendsChartStartTime&&!!g.value.assetTrendsChartEndTime:!1}function Ue(Ne){return Ne.type==="category"?Ju(Ne.color):Ne.type==="account"?_u(Ne.color):Nr(Ne.color)}function $e(Ne,xe,ze){const L=l(Ne,xe);return!U.value&&v.value===Ee.CategoricalAnalysis&&(g.value.chartDataType===z.AccountTotalAssets.type||g.value.chartDataType===z.AccountTotalLiabilities.type)?Jt:ze?Dl(L,ze):L}return{loading:b,analysisType:v,trendDateAggregationType:I,assetTrendsDateAggregationType:k,showAccountBalance:U,defaultCurrency:R,firstDayOfWeek:x,fiscalYearStart:B,allDateRanges:N,allSortingTypes:K,allTrendAnalysisDateAggregationTypes:D,allAssetTrendsDateAggregationTypes:Y,query:g,queryChartDataCategory:A,queryDateType:w,queryStartTime:P,queryEndTime:H,queryDateRangeName:_,queryChartDataTypeName:Ae,querySortingTypeName:de,queryTrendDateAggregationTypeName:X,queryAssetTrendsDateAggregationTypeName:me,isQueryDateRangeChanged:ae,canChangeDateRange:T,canShiftDateRange:p,canUseCategoryFilter:G,canUseTagFilter:F,canUseKeywordFilter:C,showAmountInChart:S,totalAmountName:E,showPercentInCategoricalChart:W,showTotalAmountInTrendsChart:V,showStackedInTrendsChart:J,translateNameInTrendsChart:h,categoricalOverviewAnalysisData:O,categoricalAnalysisData:fe,trendsAnalysisData:ge,assetTrendsData:Se,canShowCustomDateRange:be,getTransactionCategoricalAnalysisDataItemDisplayColor:Ue,getDisplayAmount:$e}}function bf(){const{tt:e,getAllAccountCategories:t,getAllAccountTypes:a,getMonthdayShortName:n}=Ge(),o=Nt(),s=q(null),r=q(""),l=q(!1),i=q(!1),u=q(ht.createNewAccount(o.currentUserDefaultCurrency,Va())),m=q([]),b=c(()=>s.value?"Edit Account":"Add Account"),v=c(()=>s.value?"Save":"Add"),I=c(()=>{let A=K(u.value,!1);if(A)return A;if(u.value.type===Me.MultiSubAccounts.type){for(const w of m.value)if(A=K(w,!0),A)return A}return null}),k=c(()=>!!I.value),U=c(()=>t()),R=c(()=>a()),x=c(()=>{const A=[];A.push({day:0,displayName:e("Not set")});for(let w=1;w<=28;w++)A.push({day:w,displayName:n(w)});return A}),B=c(()=>u.value&&u.value.category===Ve.CreditCard.type);function N(A){for(const w of x.value)if(w.day===A)return w.displayName;return null}function K(A,w){return!w&&!A.category?"Account category cannot be blank":!w&&!A.type?"Account type cannot be blank":A.name?A.type===Me.SingleAccount.type&&!A.currency?"Account currency cannot be blank":null:"Account name cannot be blank"}function D(A){return A.id===""||A.id==="0"}function Y(){if(u.value.type!==Me.MultiSubAccounts.type)return!1;const A=u.value.createNewSubAccount(o.currentUserDefaultCurrency,Va());return m.value.push(A),!0}function g(A){if(u.value.fillFrom(A),m.value=[],A.subAccounts&&A.subAccounts.length>0)for(const w of A.subAccounts){const P=u.value.createNewSubAccount(o.currentUserDefaultCurrency,Va());P.fillFrom(w),m.value.push(P)}}return Ma(()=>u.value.category,(A,w)=>{u.value.setSuitableIcon(w,A)}),{editAccountId:s,clientSessionId:r,loading:l,submitting:i,account:u,subAccounts:m,title:b,saveButtonTitle:v,inputEmptyProblemMessage:I,inputIsEmpty:k,allAccountCategories:U,allAccountTypes:R,allAvailableMonthDays:x,isAccountSupportCreditCardStatementDate:B,getAccountCreditCardStatementDate:N,isNewAccount:D,addSubAccount:Y,setAccount:g}}function If(){const{tt:e,getAllAccountBalanceTrendChartTypes:t,getAllStatisticsDateAggregationTypesWithShortName:a,formatUnixTimeToLongDateTime:n,formatUnixTimeToLongDate:o,formatUnixTimeToShortTime:s,formatUnixTimeToGregorianDefaultDateTime:r,formatAmountToWesternArabicNumeralsWithoutDigitGrouping:l,formatAmountToLocalizedNumeralsWithCurrency:i}=Ge(),u=mt(),m=Nt(),b=sa(),v=Ca(),I=q(""),k=q(0),U=q(0),R=q(void 0),x=c(()=>m.currentUserFirstDayOfWeek),B=c(()=>m.currentUserFiscalYearStart),N=c(()=>Ct(u.appSettings.timeZone)),K=c(()=>m.currentUserDefaultCurrency),D=c(()=>t()),Y=c(()=>a(Ee.AssetTrends)),g=c(()=>H.value[I.value]),A=c(()=>g.value?.currency??K.value),w=c(()=>g.value?.isLiability??!1),P=c(()=>{const h=m.currentUserNickname;return h?e("dataExport.exportReconciliationStatementsFileName",{nickname:h}):e("dataExport.defaultExportReconciliationStatementsFileName")}),H=c(()=>b.allAccountsMap),_=c(()=>v.allTransactionCategoriesMap),Ae=c(()=>n(k.value)),de=c(()=>n(U.value)),X=c(()=>i(R.value?.totalInflows??0,A.value)),me=c(()=>i(R.value?.totalOutflows??0,A.value)),ae=c(()=>i((R?.value?.totalInflows??0)-(R.value?.totalOutflows??0),A.value)),T=c(()=>w.value?i(-(R?.value?.openingBalance??0),A.value):i(R?.value?.openingBalance??0,A.value)),p=c(()=>w.value?i(-(R?.value?.closingBalance??0),A.value):i(R?.value?.closingBalance??0,A.value));function G(h){return h.type===ue.ModifyBalance?e("Modify Balance"):h.type===ue.Income?e("Income"):h.type===ue.Expense?e("Expense"):h.type===ue.Transfer&&h.destinationAccountId===I.value?e("Transfer In"):h.type===ue.Transfer&&h.sourceAccountId===I.value?e("Transfer Out"):h.type===ue.Transfer?e("Transfer"):e("Unknown")}function f(h){return n(h.time,h.utcOffset,N.value)}function F(h){return o(h.time,h.utcOffset,N.value)}function C(h){return s(h.time,h.utcOffset,N.value)}function S(h){return`UTC${wn(h.utcOffset)}`}function E(h){let O=K.value;return H.value[h.sourceAccountId]&&(O=H.value[h.sourceAccountId].currency),i(h.sourceAmount,O)}function W(h){let O=K.value;return H.value[h.destinationAccountId]&&(O=H.value[h.destinationAccountId].currency),i(h.destinationAmount,O)}function V(h){let O=K.value,fe=!1;return h.type===ue.Transfer&&h.destinationAccountId===I.value?H.value[h.destinationAccountId]&&(O=H.value[h.destinationAccountId].currency,fe=H.value[h.destinationAccountId].isLiability):H.value[h.sourceAccountId]&&(O=H.value[h.sourceAccountId].currency,fe=H.value[h.sourceAccountId].isLiability),i(fe?-h.accountClosingBalance:h.accountClosingBalance,O)}function J(h){let O=",";h===$t.TSV&&(O="	");const fe=w.value?"Account Outstanding Balance":"Account Balance",ge=[e("Transaction Time"),e("Type"),e("Category"),e("Amount"),e("Account"),e(fe),e("Description")].join(O)+`
`,be=(R.value?.transactions??[]).map(Ue=>{const $e=St(Ue.time,Ue.utcOffset,N.value).getUnixTime(),Ne=G(Ue);let xe=_.value[Ue.categoryId]?.name||"",ze=l(Ue.sourceAmount),L=H.value[Ue.sourceAccountId]?.name||"";Ue.type===ue.ModifyBalance?xe=e("Modify Balance"):Ue.type===ue.Transfer&&Ue.destinationAccountId===I.value&&(ze=l(Ue.destinationAmount)),Ue.type===ue.Transfer&&H.value[Ue.destinationAccountId]&&(L=L+" → "+(H.value[Ue.destinationAccountId]?.name||""));let oe="";w.value?oe=l(-Ue.accountClosingBalance):oe=l(Ue.accountClosingBalance);let ce=Ue.comment||"";return h===$t.CSV?ce=ka(ce,","," "):h===$t.TSV&&(ce=ka(ce,"	"," ")),[r($e),Ne,xe,ze,L,oe,ce].join(O)});return ge+be.join(`
`)}return{accountId:I,startTime:k,endTime:U,reconciliationStatements:R,firstDayOfWeek:x,fiscalYearStart:B,currentTimezoneOffsetMinutes:N,defaultCurrency:K,allChartTypes:D,allDateAggregationTypes:Y,currentAccount:g,currentAccountCurrency:A,isCurrentLiabilityAccount:w,exportFileName:P,allAccountsMap:H,allCategoriesMap:_,displayStartDateTime:Ae,displayEndDateTime:de,displayTotalInflows:X,displayTotalOutflows:me,displayTotalBalance:ae,displayOpeningBalance:T,displayClosingBalance:p,getDisplayTransactionType:G,getDisplayDateTime:f,getDisplayDate:F,getDisplayTime:C,getDisplayTimezone:S,getDisplaySourceAmount:E,getDisplayDestinationAmount:W,getDisplayAccountBalance:V,getExportedData:J}}function Cf(){const{tt:e,getCategorizedAccountsWithDisplayBalance:t}=Ge(),a=mt(),n=sa(),o=q(!1),s=q(void 0),r=q(""),l=q(""),i=c(()=>a.appSettings.showAccountBalance),u=c(()=>n.allPlainAccounts),m=c(()=>n.allVisiblePlainAccounts),b=c(()=>t(m.value,i.value)),v=c(()=>r.value&&ht.findAccountNameById(u.value,r.value,e("Target Account"))||e("Target Account")),I=c(()=>{if(!r.value||!l.value)return!1;const k=ht.findAccountNameById(u.value,r.value);return k?k===l.value:!1});return{moving:o,fromAccount:s,toAccountId:r,toAccountName:l,allAccounts:u,allVisibleAccounts:m,allVisibleCategorizedAccounts:b,displayToAccountName:v,isToAccountNameValid:I}}function Df(){const{formatAmountToLocalizedNumeralsWithCurrency:e}=Ge(),t=mt(),a=Nt(),n=sa(),o=q(!0),s=q(!1),r=q(!1),l=c({get:()=>t.appSettings.showAccountBalance,set:N=>t.setShowAccountBalance(N)}),i=c(()=>a.currentUserFirstDayOfWeek),u=c(()=>a.currentUserFiscalYearStart),m=c(()=>a.currentUserDefaultCurrency),b=c(()=>n.allAccounts),v=c(()=>n.allCategorizedAccountsMap),I=c(()=>n.allAvailableAccountsCount),k=c(()=>{const N=n.getNetAssets(l.value);return e(N,m.value)}),U=c(()=>{const N=n.getTotalAssets(l.value);return e(N,m.value)}),R=c(()=>{const N=n.getTotalLiabilities(l.value);return e(N,m.value)});function x(N){if(!N)return"";const K=n.getAccountCategoryTotalBalance(l.value,N);return e(K,m.value)}function B(N,K){if(N.type===Me.SingleAccount.type){const D=n.getAccountBalance(l.value,N);return!Ie(D)&&!Ye(D)?"":e(D,N.currency)}else if(N.type===Me.MultiSubAccounts.type){const D=n.getAccountSubAccountBalance(l.value,s.value,N,K);return Ke(D)?e(D.balance,D.currency):""}else return null}return{loading:o,showHidden:s,displayOrderModified:r,showAccountBalance:l,firstDayOfWeek:i,fiscalYearStart:u,defaultCurrency:m,allAccounts:b,allCategorizedAccountsMap:v,allAccountCount:I,netAssets:k,totalAssets:U,totalLiabilities:R,accountCategoryTotalBalance:x,accountBalance:B}}function Sf(e,t){const a=Ca(),n=q(null),o=q(""),s=q(!1),r=q(!1),l=q(aa.createNewCategory(e,t)),i=c(()=>vu(a.allTransactionCategories,l.value.type)),u=c(()=>n.value?"Edit Category":l.value.parentId==="0"?"Add Primary Category":"Add Secondary Category"),m=c(()=>n.value?"Save":"Add"),b=c(()=>l.value.name?null:"Category name cannot be blank"),v=c(()=>!!b.value);return{editCategoryId:n,clientSessionId:o,loading:s,submitting:r,category:l,allAvailableCategories:i,title:u,saveButtonTitle:m,inputEmptyProblemMessage:b,inputIsEmpty:v}}function Mf(){const e=Ca(),t=q(!0),a=q("0"),n=c(()=>{if(!(!e.allTransactionCategoriesMap||!e.allTransactionCategoriesMap[a.value]))return e.allTransactionCategoriesMap[a.value]});return{loading:t,primaryCategoryId:a,currentPrimaryCategory:n}}function Lf(e,t){for(const a of e)if(t||!a.hidden)return!1;return!0}function Nf(e,t){let a=0;for(const n of e)(t||!n.hidden)&&a++;return a}function wf(e,t){for(const a of e)if(t||!a.hidden)return a.id;return null}function xf(e,t){for(const a of Kn(e))if(t||!a.hidden)return a.id;return null}function Ef(e,t){for(const a of e)if(t||!a.hidden)return!1;return!0}function kf(e,t){let a=0;for(const n of e)(t||!n.hidden)&&a++;return a}function Uf(e,t){for(const a of e)if(t||!a.hidden)return a.id;return null}function Of(e,t){for(const a of Kn(e))if(t||!a.hidden)return a.id;return null}function Ff(){const{tt:e,getDefaultCurrency:t,getDefaultFirstDayOfWeek:a,getAllWeekDays:n,getAllCalendarDisplayTypes:o,getAllDateDisplayTypes:s,getAllLongDateFormats:r,getAllShortDateFormats:l,getAllLongTimeFormats:i,getAllShortTimeFormats:u,getAllFiscalYearFormats:m,getAllCurrencyDisplayTypes:b,getAllNumeralSystemTypes:v,getAllDecimalSeparators:I,getAllDigitGroupingSymbols:k,getAllDigitGroupingTypes:U,getAllCoordinateDisplayTypes:R,getAllExpenseAmountColors:x,getAllIncomeAmountColors:B,getAllTransactionEditScopeTypes:N,getLocaleDefaultDateDisplayType:K,getLocaleDefaultNumeralSystemType:D,getLocaleDefaultDecimalSeparator:Y,getLocaleDefaultDigitGroupingSymbol:g,setLanguage:A}=Ge(),w=mt(),P=sa(),H=cn(),_=a(),Ae=lt.parse(_)?lt.parse(_).type:lt.DefaultFirstDay.type,de=q(Nn.createNewUser("",t(),Ae)),X=q(Nn.createNewUser("",t(),Ae)),me=q(!1),ae=q(!1),T=q(!1),p=q(!1),G=c(()=>Ft.valueOf(de.value.dateDisplayType)??K()),f=c(()=>ve.valueOf(de.value.numeralSystem)??D()),F=c(()=>Je.valueOf(de.value.decimalSeparator)?.symbol??Y().symbol),C=c(()=>et.valueOf(de.value.digitGroupingSymbol)?.symbol??g().symbol),S=c(()=>P.allPlainAccounts),E=c(()=>P.allVisiblePlainAccounts),W=c(()=>Zc(E.value)),V=c(()=>n()),J=c(()=>o()),h=c(()=>s()),O=c(()=>r(f.value,G.value.calendarType)),fe=c(()=>l(f.value,G.value.calendarType)),ge=c(()=>i(f.value)),Se=c(()=>u(f.value)),be=c(()=>m(f.value,G.value.calendarType)),Ue=c(()=>b(f.value,F.value)),$e=c(()=>v()),Ne=c(()=>I()),xe=c(()=>k()),ze=c(()=>U(f.value,C.value)),L=c(()=>R()),oe=c(()=>x()),ce=c(()=>B()),ie=c(()=>N()),j=c(()=>{const at=e("Language");return at!=="Language"?`${at} / Language`:at}),te=c(()=>{for(const at of ze.value)if(at.type===de.value.digitGrouping)return at.enabled;return!1}),he=c(()=>!de.value.password&&!de.value.confirmPassword&&!de.value.email&&!de.value.nickname||!de.value.password&&!de.value.confirmPassword&&de.value.email===X.value.email&&de.value.nickname===X.value.nickname&&de.value.defaultAccountId===X.value.defaultAccountId&&de.value.transactionEditScope===X.value.transactionEditScope&&de.value.language===X.value.language&&de.value.defaultCurrency===X.value.defaultCurrency&&de.value.fiscalYearStart===X.value.fiscalYearStart&&de.value.firstDayOfWeek===X.value.firstDayOfWeek&&de.value.calendarDisplayType===X.value.calendarDisplayType&&de.value.dateDisplayType===X.value.dateDisplayType&&de.value.longDateFormat===X.value.longDateFormat&&de.value.shortDateFormat===X.value.shortDateFormat&&de.value.longTimeFormat===X.value.longTimeFormat&&de.value.shortTimeFormat===X.value.shortTimeFormat&&de.value.fiscalYearFormat===X.value.fiscalYearFormat&&de.value.currencyDisplayType===X.value.currencyDisplayType&&de.value.numeralSystem===X.value.numeralSystem&&de.value.decimalSeparator===X.value.decimalSeparator&&de.value.digitGroupingSymbol===X.value.digitGroupingSymbol&&de.value.digitGrouping===X.value.digitGrouping&&de.value.coordinateDisplayType===X.value.coordinateDisplayType&&de.value.expenseAmountColor===X.value.expenseAmountColor&&de.value.incomeAmountColor===X.value.incomeAmountColor?"Nothing has been modified":!de.value.password&&de.value.confirmPassword?"Password cannot be blank":de.value.password&&!de.value.confirmPassword?"Password confirmation cannot be blank":null),we=c(()=>de.value.password&&de.value.confirmPassword&&de.value.password!==de.value.confirmPassword?"Password and password confirmation do not match":de.value.email?de.value.nickname?de.value.defaultCurrency?null:"Default currency cannot be blank":"Nickname cannot be blank":"Email address cannot be blank"),Fe=c(()=>de.value.defaultCurrency?null:"Default currency cannot be blank"),ke=c(()=>null),se=c(()=>!!he.value),ye=c(()=>!!we.value),Be=c(()=>!!Fe.value),Tt=c(()=>!!ke.value);function Te(at){me.value=at.emailVerified,X.value.fillFrom(at),de.value.fillFrom(X.value)}function Re(){de.value.fillFrom(X.value)}function tt(at){if(at){at.firstDayOfWeek!==X.value.firstDayOfWeek&&H.resetTransactionOverview(),Te(at);const qt=A(at.language);w.updateLocalizedDefaultSettings(qt),Vn(at.expenseAmountColor,at.incomeAmountColor)}}return{newProfile:de,oldProfile:X,emailVerified:me,loading:ae,resending:T,saving:p,allAccounts:S,allVisibleAccounts:E,allVisibleCategorizedAccounts:W,allWeekDays:V,allCalendarDisplayTypes:J,allDateDisplayTypes:h,allLongDateFormats:O,allShortDateFormats:fe,allLongTimeFormats:ge,allShortTimeFormats:Se,allFiscalYearFormats:be,allCurrencyDisplayTypes:Ue,allNumeralSystemTypes:$e,allDecimalSeparators:Ne,allDigitGroupingSymbols:xe,allDigitGroupingTypes:ze,allCoordinateDisplayTypes:L,allExpenseAmountColorTypes:oe,allIncomeAmountColorTypes:ce,allTransactionEditScopeTypes:ie,languageTitle:j,supportDigitGroupingSymbol:te,inputIsNotChangedProblemMessage:he,inputInvalidProblemMessage:we,langAndRegionInputInvalidProblemMessage:Fe,extendInputInvalidProblemMessage:ke,inputIsNotChanged:se,inputIsInvalid:ye,langAndRegionInputIsInvalid:Be,extendInputIsInvalid:Tt,setCurrentUserProfile:Te,reset:Re,doAfterProfileUpdate:tt}}const Pf=Ht("userExternalAUth",()=>{function e(){return new Promise((a,n)=>{ne.getExternalAuths().then(o=>{const s=o.data;if(!s||!s.success||!s.result){n({message:"Unable to retrieve third-party logins list"});return}a(s.result)}).catch(o=>{Z.error("failed to load third-party logins list",o),o.response&&o.response.data&&o.response.data.errorMessage?n({error:o.response.data}):o.processed?n(o):n({message:"Unable to retrieve third-party logins list"})})})}function t(a){return new Promise((n,o)=>{ne.unlinkExternalAuth(a).then(s=>{const r=s.data;if(!r||!r.success||!r.result){o({message:"Unable to unlink third-party login"});return}n(r.result)}).catch(s=>{Z.error("failed to revoke token",s),s.response&&s.response.data&&s.response.data.errorMessage?o({error:s.response.data}):s.processed?o(s):o({message:"Unable to unlink third-party login"})})})}return{getExternalAuths:e,unlinkExternalAuth:t}}),Zu=8,qu=5;var Sa=(e=>(e.Api="api",e.MCP="mcp",e.Phone="phone",e.Tablet="tablet",e.TV="tv",e.Wearable="wearable",e.Default="default",e))(Sa||{});class Fo{tokenId;isCurrent;deviceType;deviceInfo;deviceName;lastSeen;constructor(t,a,n,o,s,r){this.tokenId=t,this.isCurrent=a,this.deviceType=n,this.deviceInfo=o,this.deviceName=s,this.lastSeen=r}static of(t,a,n,o,s,r){return new Fo(t,a,n,o,s,r)}}function Xu(e){const t=gl(e);return{device:{vendor:t.device.vendor,model:t.device.model,type:t.device.type},os:{name:t.os.name,version:t.os.version},browser:{name:t.browser.name,version:t.browser.version}}}function Qu(e){if(!e)return"";let t="";if(e.device&&e.device.model?t=e.device.model:e.os&&e.os.name&&(t=e.os.name,e.os.version&&(t+=" "+e.os.version)),e.browser&&e.browser.name){let a=e.browser.name;e.browser.version&&(a+=" "+e.browser.version),t?t+=" ("+a+")":t=a}return t||"Unknown Device"}function Bf(e){const t=e.tokenType===Zu,a=e.tokenType===qu,n=Xu(e.userAgent);let o=Sa.Default,s="Other Device";return t?(o=Sa.Api,s="API Token"):a?(o=Sa.MCP,s="MCP Token"):(n&&n.device?n.device.type==="mobile"?o=Sa.Phone:n.device.type==="wearable"?o=Sa.Wearable:n.device.type==="tablet"?o=Sa.Tablet:n.device.type==="smarttv"?o=Sa.TV:o=Sa.Default:o=Sa.Default,e.isCurrent?s="Current":s="Other Device"),Fo.of(e.tokenId,e.isCurrent,o,t||a?e.userAgent:Qu(n),s,e.lastSeen)}const Rf=Ht("twoFactorAuth",()=>{function e(){return new Promise((s,r)=>{ne.get2FAStatus().then(l=>{const i=l.data;if(!i||!i.success||!i.result||!Cn(i.result.enable)){r({message:"Unable to retrieve current two-factor authentication status"});return}s(i.result)}).catch(l=>{Z.error("failed to retrieve 2fa status",l),l.response&&l.response.data&&l.response.data.errorMessage?r({error:l.response.data}):l.processed?r(l):r({message:"Unable to retrieve current two-factor authentication status"})})})}function t(){return new Promise((s,r)=>{ne.enable2FA().then(l=>{const i=l.data;if(!i||!i.success||!i.result||!i.result.qrcode||!i.result.secret){r({message:"Unable to enable two-factor authentication"});return}s(i.result)}).catch(l=>{Z.error("failed to request to enable 2fa",l),l.response&&l.response.data&&l.response.data.errorMessage?r({error:l.response.data}):l.processed?r(l):r({message:"Unable to enable two-factor authentication"})})})}function a(s){return new Promise((r,l)=>{ne.confirmEnable2FA(s).then(i=>{const u=i.data;if(!u||!u.success||!u.result||!u.result.token){l({message:"Unable to enable two-factor authentication"});return}u.result.token&&za(u.result.token),r(u.result)}).catch(i=>{Z.error("failed to confirm to enable 2fa",i),i.response&&i.response.data&&i.response.data.errorMessage?l({error:i.response.data}):i.processed?l(i):l({message:"Unable to enable two-factor authentication"})})})}function n(s){return new Promise((r,l)=>{ne.disable2FA(s).then(i=>{const u=i.data;if(!u||!u.success||!u.result){l({message:"Unable to disable two-factor authentication"});return}r(u.result)}).catch(i=>{Z.error("failed to disable 2fa",i),i.response&&i.response.data&&i.response.data.errorMessage?l({error:i.response.data}):i.processed?l(i):l({message:"Unable to disable two-factor authentication"})})})}function o(s){return new Promise((r,l)=>{ne.regenerate2FARecoveryCode(s).then(i=>{const u=i.data;if(!u||!u.success||!u.result||!u.result.recoveryCodes||!u.result.recoveryCodes.length){l({message:"Unable to regenerate two-factor authentication backup codes"});return}r(u.result)}).catch(i=>{Z.error("failed to regenerate 2fa recovery code",i),i.response&&i.response.data&&i.response.data.errorMessage?l({error:i.response.data}):i.processed?l(i):l({message:"Unable to regenerate two-factor authentication backup codes"})})})}return{get2FAStatus:e,enable2FA:t,confirmEnable2FA:a,disable2FA:n,regenerate2FARecoveryCode:o}});function Yf(){const{tt:e,formatNumberToLocalizedNumerals:t}=Ge(),a=Nt(),n=q(null),o=c(()=>n.value?{totalTransactionCount:t(parseInt(n.value.totalTransactionCount)),totalAccountCount:t(parseInt(n.value.totalAccountCount)),totalTransactionCategoryCount:t(parseInt(n.value.totalTransactionCategoryCount)),totalTransactionTagCount:t(parseInt(n.value.totalTransactionTagCount)),totalTransactionPictureCount:t(parseInt(n.value.totalTransactionPictureCount)),totalTransactionTemplateCount:t(parseInt(n.value.totalTransactionTemplateCount)),totalScheduledTransactionCount:t(parseInt(n.value.totalScheduledTransactionCount))}:null);function s(r){const l=a.currentUserNickname;return l?e("dataExport.exportFilename",{nickname:l})+"."+r:e("dataExport.defaultExportFilename")+"."+r}return{dataStatistics:n,displayDataStatistics:o,getExportFileName:s}}function zf(){const{tt:e,getAllTimezones:t,getAllTimezoneTypesUsedForStatistics:a,getAllCurrencySortingTypes:n,setTimeZone:o}=Ge(),s=mt(),r=sa(),l=qa(),i=Ca(),u=cn(),m=un(),b=q(!1),v=q(!1),I=c(()=>[{name:e("System Default"),value:"auto"},{name:e("Light"),value:"light"},{name:e("Dark"),value:"dark"}]),k=c(()=>t(!0)),U=c(()=>a()),R=c(()=>n()),x=c(()=>[{name:e("Disabled"),value:"disabled"},{name:e("Enabled"),value:"enabled"},{name:e("Show Confirmation Every Time"),value:"confirmation"}]),B=c(()=>r.allPlainAccounts.length>0),N=c(()=>r.allVisibleAccountsCount>0),K=c(()=>!nn(i.allTransactionCategoriesMap)),D=c({get:()=>s.appSettings.timeZone,set:f=>{s.setTimeZone(f),o(f),l.updateTransactionListInvalidState(!0),u.updateTransactionOverviewInvalidState(!0),m.updateTransactionStatisticsInvalidState(!0)}}),Y=c({get:()=>s.appSettings.autoUpdateExchangeRatesData,set:f=>s.setAutoUpdateExchangeRatesData(f)}),g=c({get:()=>s.appSettings.showAccountBalance,set:f=>s.setShowAccountBalance(f)}),A=c({get:()=>s.appSettings.showAmountInHomePage,set:f=>s.setShowAmountInHomePage(f)}),w=c({get:()=>s.appSettings.timezoneUsedForStatisticsInHomePage,set:f=>{s.setTimezoneUsedForStatisticsInHomePage(f),u.updateTransactionOverviewInvalidState(!0)}}),P=c({get:()=>s.appSettings.showTotalAmountInTransactionListPage,set:f=>s.setShowTotalAmountInTransactionListPage(f)}),H=c({get:()=>s.appSettings.showTagInTransactionListPage,set:f=>s.setShowTagInTransactionListPage(f)}),_=c({get:()=>s.appSettings.itemsCountInTransactionListPage,set:f=>s.setItemsCountInTransactionListPage(f)}),Ae=c({get:()=>s.appSettings.autoSaveTransactionDraft,set:f=>{s.setAutoSaveTransactionDraft(f),f==="disabled"&&l.clearTransactionDraft()}}),de=c({get:()=>s.appSettings.autoGetCurrentGeoLocation,set:f=>s.setAutoGetCurrentGeoLocation(f)}),X=c({get:()=>s.appSettings.currencySortByInExchangeRatesPage,set:f=>s.setCurrencySortByInExchangeRatesPage(f)}),me=c(()=>{const f=s.appSettings.overviewAccountFilterInHomePage;return p(f,r.allPlainAccounts)}),ae=c(()=>{const f=s.appSettings.totalAmountExcludeAccountIds;return p(f,r.allVisiblePlainAccounts)}),T=c(()=>{const f=s.appSettings.overviewTransactionCategoryFilterInHomePage;return G(f)});function p(f,F){if(b.value||!F||!F.length)return"";let C=!1;for(const E of Ba(f,!0))if(r.allAccountsMap[E]){C=!0;break}if(!C)return e("All");let S=!0;for(const E of F)if(!f[E.id]){S=!1;break}return e(S?"None":"Partial")}function G(f){if(v.value||!i.allTransactionCategoriesMap)return"";let F=!1;for(const S of Ba(f,!0))if(i.allTransactionCategoriesMap[S]){F=!0;break}if(!F)return e("All");let C=!0;for(const S of Dt(i.allTransactionCategoriesMap))if(!(S.type!==pe.Income&&S.type!==pe.Expense)&&!f[S.id]){C=!1;break}return e(C?"None":"Partial")}return{loadingAccounts:b,loadingTransactionCategories:v,allThemes:I,allTimezones:k,allTimezoneTypesUsedForStatistics:U,allCurrencySortingTypes:R,allAutoSaveTransactionDraftTypes:x,timeZone:D,hasAnyAccount:B,hasAnyVisibleAccount:N,hasAnyTransactionCategory:K,isAutoUpdateExchangeRatesData:Y,showAccountBalance:g,showAmountInHomePage:A,itemsCountInTransactionListPage:_,timezoneUsedForStatisticsInHomePage:w,showTotalAmountInTransactionListPage:P,showTagInTransactionListPage:H,autoSaveTransactionDraft:Ae,isAutoGetCurrentGeoLocation:de,currencySortByInExchangeRatesPage:X,accountsIncludedInHomePageOverviewDisplayContent:me,accountsIncludedInTotalDisplayContent:ae,transactionCategoriesIncludedInHomePageOverviewDisplayContent:T}}function Kf(){const e=mt(),t=q(!1),a=c({get:()=>e.appSettings.applicationLock,set:o=>e.setEnableApplicationLock(o)}),n=c({get:()=>e.appSettings.applicationLockWebAuthn,set:o=>e.setEnableApplicationLockWebAuthn(o)});return Uu().then(o=>{t.value=o}),{isSupportedWebAuthn:t,isEnableApplicationLock:a,isEnableApplicationLockWebAuthn:n}}function Gf(){const{getAllDateRanges:e,getAllTimezoneTypesUsedForStatistics:t,getAllCategoricalChartTypes:a,getAllTrendChartTypes:n,getAllStatisticsChartDataTypes:o,getAllStatisticsSortingTypes:s}=Ge(),r=mt(),l=c(()=>o(Ee.CategoricalAnalysis)),i=c(()=>t()),u=c(()=>s()),m=c(()=>a()),b=c(()=>e(ua.Normal,!1)),v=c(()=>n()),I=c(()=>e(ua.TrendAnalysis,!1)),k=c(()=>e(ua.AssetTrends,!1)),U=c({get:()=>r.appSettings.statistics.defaultChartDataType,set:A=>r.setStatisticsDefaultChartDataType(A)}),R=c({get:()=>r.appSettings.statistics.defaultTimezoneType,set:A=>r.setStatisticsDefaultTimezoneType(A)}),x=c({get:()=>r.appSettings.statistics.defaultSortingType,set:A=>r.setStatisticsSortingType(A)}),B=c({get:()=>r.appSettings.statistics.defaultCategoricalChartType,set:A=>r.setStatisticsDefaultCategoricalChartType(A)}),N=c({get:()=>r.appSettings.statistics.defaultCategoricalChartDataRangeType,set:A=>r.setStatisticsDefaultCategoricalChartDateRange(A)}),K=c({get:()=>r.appSettings.statistics.defaultTrendChartType,set:A=>r.setStatisticsDefaultTrendChartType(A)}),D=c({get:()=>r.appSettings.statistics.defaultTrendChartDataRangeType,set:A=>r.setStatisticsDefaultTrendChartDateRange(A)}),Y=c({get:()=>r.appSettings.statistics.defaultAssetTrendsChartType,set:A=>r.setStatisticsDefaultAssetTrendsChartType(A)}),g=c({get:()=>r.appSettings.statistics.defaultAssetTrendsChartDataRangeType,set:A=>r.setStatisticsDefaultAssetTrendsChartDateRange(A)});return{allChartDataTypes:l,allTimezoneTypesUsedForStatistics:i,allSortingTypes:u,allCategoricalChartTypes:m,allCategoricalChartDateRanges:b,allTrendChartTypes:v,allTrendChartDateRanges:I,allAssetTrendsChartDateRanges:k,defaultChartDataType:U,defaultTimezoneType:R,defaultSortingType:x,defaultCategoricalChartType:B,defaultCategoricalChartDateRange:N,defaultTrendChartType:K,defaultTrendChartDateRange:D,defaultAssetTrendsChartType:Y,defaultAssetTrendsChartDateRange:g}}const ts=[{categoryName:"Basic Settings",items:[{settingKey:"showAccountBalance",settingName:"Show Account Balance",mobile:!0,desktop:!0}]},{categoryName:"Overview Page",items:[{settingKey:"showAmountInHomePage",settingName:"Show Amount",mobile:!0,desktop:!0},{settingKey:"timezoneUsedForStatisticsInHomePage",settingName:"Timezone Used for Statistics",mobile:!0,desktop:!0},{settingKey:"overviewAccountFilterInHomePage",settingName:"Accounts Included in Overview Statistics",mobile:!0,desktop:!0},{settingKey:"overviewTransactionCategoryFilterInHomePage",settingName:"Transaction Categories Included in Overview Statistics",mobile:!0,desktop:!0}]},{categoryName:"Transaction List Page",items:[{settingKey:"itemsCountInTransactionListPage",settingName:"Transactions Per Page",mobile:!1,desktop:!0},{settingKey:"showTotalAmountInTransactionListPage",settingName:"Show Monthly Total Amount",mobile:!0,desktop:!0},{settingKey:"showTagInTransactionListPage",settingName:"Show Transaction Tag",mobile:!0,desktop:!0}]},{categoryName:"Transaction Edit Page",items:[{settingKey:"autoSaveTransactionDraft",settingName:"Automatically Save Draft",mobile:!0,desktop:!0},{settingKey:"autoGetCurrentGeoLocation",settingName:"Automatically Add Geolocation",mobile:!0,desktop:!0},{settingKey:"alwaysShowTransactionPicturesInMobileTransactionEditPage",settingName:"Always Show Transaction Pictures",mobile:!0,desktop:!1}]},{categoryName:"Account List Page",items:[{settingKey:"totalAmountExcludeAccountIds",settingName:"Accounts Included in Total",mobile:!0,desktop:!0}]},{categoryName:"Exchange Rates Data Page",items:[{settingKey:"currencySortByInExchangeRatesPage",settingName:"Sort by",mobile:!0,desktop:!0}]},{categoryName:"Statistics Settings",categorySubName:"Common Settings",items:[{settingKey:"statistics.defaultChartDataType",settingName:"Default Chart Data Type",mobile:!0,desktop:!0},{settingKey:"statistics.defaultTimezoneType",settingName:"Timezone Used for Date Range",mobile:!0,desktop:!0},{settingKey:"statistics.defaultAccountFilter",settingName:"Default Account Filter",mobile:!0,desktop:!0},{settingKey:"statistics.defaultTransactionCategoryFilter",settingName:"Default Transaction Category Filter",mobile:!0,desktop:!0},{settingKey:"statistics.defaultSortingType",settingName:"Default Sort Order",mobile:!0,desktop:!0}]},{categoryName:"Statistics Settings",categorySubName:"Categorical Analysis Settings",items:[{settingKey:"statistics.defaultCategoricalChartType",settingName:"Default Chart Type",mobile:!0,desktop:!0},{settingKey:"statistics.defaultCategoricalChartDataRangeType",settingName:"Default Date Range",mobile:!0,desktop:!0}]},{categoryName:"Statistics Settings",categorySubName:"Trend Analysis Settings",items:[{settingKey:"statistics.defaultTrendChartType",settingName:"Default Chart Type",mobile:!1,desktop:!0},{settingKey:"statistics.defaultTrendChartDataRangeType",settingName:"Default Date Range",mobile:!0,desktop:!0}]},{categoryName:"Statistics Settings",categorySubName:"Asset Trends Settings",items:[{settingKey:"statistics.defaultAssetTrendsChartType",settingName:"Default Chart Type",mobile:!1,desktop:!0},{settingKey:"statistics.defaultAssetTrendsChartDataRangeType",settingName:"Default Date Range",mobile:!0,desktop:!0}]}];function $f(){const e=mt(),t=q(!1),a=q(!1),n=q(!1),o=q(Object.assign({},e.syncedAppSettings)),s=c(()=>e.enableApplicationCloudSync),r=c(()=>{for(const U of Ba(o.value,!0))return!0;return!1}),l=c(()=>{const U=[];for(const R of Ba(o.value,!0))U.push(R);return U});function i(U){for(const R of U.items)if(!o.value[R.settingKey])return!1;return!0}function u(U){let R=0;for(const x of U.items)o.value[x.settingKey]||R++;return R>0&&R<U.items.length}function m(U,R){for(const x of U.items)o.value[x.settingKey]=R}function b(){for(const U of ts)for(const R of U.items)o.value[R.settingKey]=!0}function v(){for(const U of ts)for(const R of U.items)o.value[R.settingKey]=!1}function I(){for(const U of ts)for(const R of U.items)o.value[R.settingKey]=!o.value[R.settingKey]}function k(U){if(U&&U.length>0){e.setApplicationSettingsFromCloudSettings(U);for(const R of U)R&&R.settingKey&&(o.value[R.settingKey]=!0)}else e.setApplicationSettingsFromCloudSettings(void 0),o.value={}}return{ALL_APPLICATION_CLOUD_SETTINGS:ts,loading:t,enabling:a,disabling:n,enabledApplicationCloudSettings:o,isEnableCloudSync:s,hasEnabledApplicationCloudSettings:r,enabledApplicationCloudSettingKeys:l,isAllSettingsSelected:i,hasSettingSelectedButNotAllChecked:u,updateSettingsSelected:m,selectAllSettings:b,selectNoneSettings:v,selectInvertSettings:I,setUserApplicationCloudSettings:k}}const Wf=0,Hf=9999999999999e-4;function Vf(){const{getAllDisplayExchangeRates:e,formatUnixTimeToLongDate:t,parseAmountFromWesternArabicNumerals:a}=Ge(),n=Nt(),o=da(),s=q(n.currentUserDefaultCurrency),r=q(100),l=c(()=>n.currentUserDefaultCurrency),i=c(()=>o.latestExchangeRates.data),u=c(()=>o.isUserCustomExchangeRates),m=c(()=>{const k=o.exchangeRatesLastUpdateTime;return k?t(k):""}),b=c(()=>e(i.value));function v(k,U,R){return!U||!R?"":k===""?0:So(k,U.rate,R.rate)}function I(k,U){s.value=k,r.value=a(U)}return{baseCurrency:s,baseAmount:r,defaultCurrency:l,exchangeRatesData:i,isUserCustomExchangeRates:u,exchangeRatesDataUpdateTime:m,availableExchangeRates:b,getConvertedAmount:v,setAsBaseline:I}}const ju=Ht("systems",()=>{function e(){return new Promise((t,a)=>{ne.getServerVersion().then(n=>{const o=n.data;if(!o||!o.success||!o.result){a({message:"Unable to retrieve server version"});return}const s=Lu();o.result.version&&s.version!==o.result.version&&(Z.warn(`client version "${s.version}" does not match server version "${o.result.version}"`),t({match:!1,version:o.result})),o.result.commitHash&&s.commitHash!==o.result.commitHash&&(Z.warn(`client commit hash "${s.commitHash}" does not match server commit hash "${o.result.commitHash}"`),t({match:!1,version:o.result})),t({match:!0,version:o.result})}).catch(n=>{Z.error("failed to retrieve server version",n),n.response&&n.response.data&&n.response.data.errorMessage?a({error:n.response.data}):n.processed?a(n):a({message:"Unable to retrieve server version"})})})}return{checkIfClientVersionMatchServerVersion:e}});var ed=[{name:"Gin",copyright:"Copyright (c) 2014 Manuel Martínez-Almeida",url:"https://github.com/gin-gonic/gin",licenseUrl:"https://github.com/gin-gonic/gin/blob/v1.11.0/LICENSE"},{name:"Cache gin's middleware",copyright:"Copyright (c) 2016 Gin-Gonic",url:"https://github.com/gin-contrib/cache",licenseUrl:"https://github.com/gin-contrib/cache/blob/v1.4.1/LICENSE"},{name:"GZIP gin's middleware",copyright:"Copyright (c) 2017 Gin-Gonic",url:"https://github.com/gin-contrib/gzip",licenseUrl:"https://github.com/gin-contrib/gzip/blob/v1.2.5/LICENSE"},{name:"xorm",copyright:"Copyright (c) 2013 - 2015 The Xorm Authors",url:"https://xorm.io/xorm",licenseUrl:"https://gitea.com/xorm/xorm/src/tag/v1.3.11/LICENSE"},{name:"SQL builder",copyright:"Copyright (c) 2016 The Xorm Authors",url:"https://gitea.com/xorm/builder",licenseUrl:"https://gitea.com/xorm/builder/src/tag/v0.3.13/LICENSE"},{name:"Logrus",copyright:"Copyright (c) 2014 Simon Eskildsen",url:"https://github.com/sirupsen/logrus",licenseUrl:"https://github.com/sirupsen/logrus/blob/v1.9.3/LICENSE"},{name:"cli",copyright:"Copyright (c) 2023 urfave/cli maintainers",url:"https://github.com/urfave/cli",licenseUrl:"https://github.com/urfave/cli/blob/v3.5.0/LICENSE"},{name:"INI",copyright:"Copyright 2014 Unknwon",url:"https://gopkg.in/ini.v1",licenseUrl:"https://github.com/go-ini/ini/blob/v1.67.0/LICENSE"},{name:"Package validator",copyright:"Copyright (c) 2015 Dean Karn",url:"https://github.com/go-playground/validator",licenseUrl:"https://github.com/go-playground/validator/blob/v10.28.0/LICENSE"},{name:"jwt-go",copyright:"Copyright (c) 2012 Dave Grijalva, Copyright (c) 2021 golang-jwt maintainers",url:"https://github.com/golang-jwt/jwt",licenseUrl:"https://github.com/golang-jwt/jwt/blob/v5.3.0/LICENSE"},{name:"otp",url:"https://github.com/pquerna/otp",licenseUrl:"https://github.com/pquerna/otp/blob/v1.5.0/LICENSE"},{name:"Go-MySQL-Driver",url:"https://github.com/go-sql-driver/mysql",licenseUrl:"https://github.com/go-sql-driver/mysql/blob/v1.9.3/LICENSE"},{name:"pq",copyright:"Copyright (c) 2011-2013, 'pq' Contributors Portions Copyright (C) 2011 Blake Mizerany",url:"https://github.com/lib/pq",licenseUrl:"https://github.com/lib/pq/blob/v1.10.9/LICENSE.md"},{name:"go-sqlite3",copyright:"Copyright (c) 2014 Yasuhiro Matsumoto",url:"https://github.com/mattn/go-sqlite3",licenseUrl:"https://github.com/mattn/go-sqlite3/blob/v1.14.32/LICENSE"},{name:"Go Cryptography",copyright:"Copyright (c) 2009 The Go Authors. All rights reserved.",url:"https://golang.org/x/crypto",licenseUrl:"https://cs.opensource.google/go/x/crypto/+/refs/tags/v0.43.0:LICENSE"},{name:"Go Networking",copyright:"Copyright (c) 2009 The Go Authors. All rights reserved.",url:"https://golang.org/x/net",licenseUrl:"https://cs.opensource.google/go/x/net/+/refs/tags/v0.46.0:LICENSE"},{name:"Go Text",copyright:"Copyright (c) 2009 The Go Authors. All rights reserved.",url:"https://golang.org/x/text",licenseUrl:"https://cs.opensource.google/go/x/text/+/refs/tags/v0.30.0:LICENSE"},{name:"Go OAuth2",copyright:"Copyright (c) 2009 The Go Authors. All rights reserved.",url:"https://golang.org/x/oauth2",licenseUrl:"https://cs.opensource.google/go/x/oauth2/+/refs/tags/v0.32.0:LICENSE"},{name:"go-oidc",copyright:"Copyright 2014 CoreOS, Inc",url:"https://github.com/coreos/go-oidc",licenseUrl:"https://github.com/coreos/go-oidc/blob/v3.16.0/LICENSE"},{name:"Gomail",copyright:"Copyright (c) 2014 Alexandre Cesaro",url:"https://github.com/go-mail/mail",licenseUrl:"https://github.com/go-mail/mail/blob/v2.3.1/LICENSE"},{name:"MinIO Go Client SDK",copyright:"MinIO Cloud Storage, (C) 2014-2020 MinIO, Inc.",url:"https://github.com/minio/minio-go",licenseUrl:"https://github.com/minio/minio-go/blob/v7.0.95/LICENSE"},{name:"gocron",copyright:"Copyright (c) 2014, 辣椒面",url:"https://github.com/go-co-op/gocron",licenseUrl:"https://github.com/go-co-op/gocron/blob/v2.17.0/LICENSE"},{name:"barcode",copyright:"Copyright (c) 2014 Florian Sundermann",url:"https://github.com/boombuler/barcode",licenseUrl:"https://github.com/boombuler/barcode/blob/v1.1.0/LICENSE"},{name:"Excelize",copyright:"Copyright (c) 2016-2025 The excelize Authors. Copyright (c) 2011-2017 Geoffrey J. Teale",url:"https://github.com/qax-os/excelize",licenseUrl:"https://github.com/qax-os/excelize/blob/v2.10.0/LICENSE"},{name:"xls",url:"https://github.com/extrame/xls",licenseUrl:"https://github.com/extrame/xls/blob/4a6cf263071b975a90abf74ca3e804b48243be28/LICENSE"},{name:"jsonschema",copyright:"Copyright (C) 2014 Alec Thomas",url:"https://github.com/invopop/jsonschema",licenseUrl:"https://github.com/invopop/jsonschema/blob/v0.13.0/COPYING"},{name:"go-ordered-map",url:"https://github.com/wk8/go-ordered-map",licenseUrl:"https://github.com/wk8/go-ordered-map/blob/v2.1.8/LICENSE"},{name:"go-cache",copyright:"Copyright (c) 2012-2017 Patrick Mylund Nielsen and the go-cache contributors",url:"https://github.com/patrickmn/go-cache",licenseUrl:"https://github.com/patrickmn/go-cache/blob/v2.1.0/LICENSE"},{name:"Testify",copyright:"Copyright (c) 2012-2020 Mat Ryer, Tyler Bunnell and contributors.",url:"https://github.com/stretchr/testify",licenseUrl:"https://github.com/stretchr/testify/blob/v1.11.1/LICENSE"},{name:"vuejs/core",copyright:"Copyright (c) 2018-present, Yuxi (Evan) You and Vue contributors",url:"https://github.com/vuejs/core",licenseUrl:"https://github.com/vuejs/core/blob/v3.5.22/LICENSE"},{name:"Pinia",copyright:"Copyright (c) 2019-present Eduardo San Martin Morote",url:"https://github.com/vuejs/pinia",licenseUrl:"https://github.com/vuejs/pinia/blob/v3.0.3/LICENSE"},{name:"vue-router",copyright:"Copyright (c) 2019-present Eduardo San Martin Morote",url:"https://github.com/vuejs/router",licenseUrl:"https://github.com/vuejs/router/blob/v4.6.3/LICENSE"},{name:"vue-i18n",copyright:"Copyright (c) 2016 kazuya kawaguchi",url:"https://github.com/intlify/vue-i18n-next",licenseUrl:"https://github.com/intlify/vue-i18n-next/blob/v11.1.12/LICENSE"},{name:"vuetify",copyright:"Copyright (c) 2016-now Vuetify, LLC",url:"https://vuetifyjs.com",licenseUrl:"https://github.com/vuetifyjs/vuetify/blob/v3.10.7/packages/vuetify/LICENSE.md"},{name:"register-service-worker",copyright:"Copyright (c) 2013-present, Yuxi (Evan) You",url:"https://github.com/yyx990803/register-service-worker",licenseUrl:"https://github.com/yyx990803/register-service-worker/blob/v1.7.2/LICENSE"},{name:"Framework7",copyright:"Copyright (c) 2014 Vladimir Kharlampidi",url:"https://framework7.io/",licenseUrl:"https://github.com/framework7io/framework7/blob/v8.3.4/LICENSE"},{name:"Framework7-vue",copyright:"Copyright (c) 2014 Vladimir Kharlampidi",url:"https://framework7.io/vue/",licenseUrl:"https://github.com/framework7io/framework7/blob/v8.3.4/LICENSE"},{name:"Framework7-icons",copyright:"Copyright (c) 2016 Vladimir Kharlampidi",url:"https://framework7.io/icons/",licenseUrl:"https://github.com/framework7io/framework7-icons/blob/v5.0.5/LICENSE"},{name:"Dom7",copyright:"Copyright (c) 2017 Vladimir Kharlampidi",url:"https://framework7.io/docs/dom7.html",licenseUrl:"https://github.com/nolimits4web/dom7/blob/v4.0.6/LICENSE"},{name:"Swiper",copyright:"Copyright (c) 2019 Vladimir Kharlampidi",url:"https://swiperjs.com",licenseUrl:"https://github.com/nolimits4web/swiper/blob/v10.2.0/LICENSE"},{name:"Skeleton Elements",copyright:"Copyright (c) 2020 Vladimir Kharlampidi",url:"https://github.com/nolimits4web/skeleton-elements",licenseUrl:"https://github.com/nolimits4web/skeleton-elements/blob/v4.0.1/LICENSE"},{name:"Apache ECharts",copyright:"Copyright © 2017-2025, The Apache Software Foundation Apache ECharts, ECharts, Apache, the Apache feather, and the Apache ECharts project logo are either registered trademarks or trademarks of the Apache Software Foundation.",url:"https://echarts.apache.org/",licenseUrl:"https://github.com/apache/echarts/blob/6.0.0/LICENSE"},{name:"vue-echarts",copyright:"Copyright (c) 2016-present GU Yiling & ECOMFE",url:"https://github.com/ecomfe/vue-echarts",licenseUrl:"https://github.com/ecomfe/vue-echarts/blob/v8.0.1/LICENSE"},{name:"vue3-perfect-scrollbar",copyright:"Copyright (c) 2024 mercs600",url:"https://github.com/mercs600/vue3-perfect-scrollbar",licenseUrl:"https://github.com/mercs600/vue3-perfect-scrollbar/blob/master/LICENSE"},{name:"@vuepic/vue-datepicker",copyright:"Copyright (c) 2021-present Vuepic",url:"https://vue3datepicker.com/",licenseUrl:"https://github.com/Vuepic/vue-datepicker/blob/v11.0.3/LICENSE"},{name:"axios",copyright:"Copyright (c) 2014-present Matt Zabriskie & Collaborators",url:"https://axios-http.com",licenseUrl:"https://github.com/axios/axios/blob/v1.12.2/LICENSE"},{name:"Moment.js",copyright:"Copyright (c) JS Foundation and other contributors",url:"https://momentjs.com",licenseUrl:"https://github.com/moment/moment/blob/2.30.1/LICENSE"},{name:"Moment Timezone",copyright:"Copyright (c) JS Foundation and other contributors",url:"https://momentjs.com",licenseUrl:"https://github.com/moment/moment-timezone/blob/0.6.0/LICENSE"},{name:"Leaflet",copyright:"Copyright (c) 2010-2023, Volodymyr Agafonkin, Copyright (c) 2010-2011, CloudMade, All rights reserved.",url:"https://leafletjs.com/",licenseUrl:"https://github.com/Leaflet/Leaflet/blob/v1.9.4/LICENSE"},{name:"crypto-js",copyright:"Copyright (c) 2009-2013 Jeff Mott, Copyright (c) 2013-2016 Evan Vosberg",url:"https://github.com/brix/crypto-js",licenseUrl:"https://github.com/brix/crypto-js/blob/4.2.0/LICENSE"},{name:"vuedraggable",copyright:"Copyright (c) 2016-2019 David Desmaisons",url:"https://github.com/SortableJS/vue.draggable.next",licenseUrl:"https://github.com/SortableJS/vue.draggable.next/blob/fae4944e7227f8f0ca06e19be01b14b584cfa973/LICENSE"},{name:"cbor-js",copyright:"Copyright (c) 2014 Patrick Gansterer <paroga@paroga.com>",url:"https://github.com/paroga/cbor-js",licenseUrl:"https://github.com/paroga/cbor-js/blob/v0.1.0/LICENSE"},{name:"clipboard.js",copyright:"Copyright (c) Zeno Rocha",url:"https://clipboardjs.com",licenseUrl:"https://github.com/zenorocha/clipboard.js/blob/v2.0.11/LICENSE"},{name:"UAParser.js",copyright:"Copyright (c) 2012-2024 Faisal Salman <f@faisalman.com>",url:"https://github.com/faisalman/ua-parser-js",licenseUrl:"https://github.com/faisalman/ua-parser-js/blob/1.0.39/license.md"},{name:"Jalaali JavaScript",copyright:"Copyright (c) 2020 Behrang Norouzinia",url:"https://github.com/jalaali/jalaali-js",licenseUrl:"https://github.com/jalaali/jalaali-js/blob/v1.2.8/LICENSE"},{name:"Materio - Vuetify VueJS 3 Free Admin Template",copyright:"Copyright (c) 2022 ThemeSelection",url:"https://github.com/themeselection/materio-vuetify-vuejs-admin-template-free",licenseUrl:"https://github.com/themeselection/materio-vuetify-vuejs-admin-template-free/blob/v2.3.0/LICENSE"},{name:"Icons8 Line Awesome",url:"https://icons8.com/line-awesome",licenseUrl:"https://github.com/icons8/line-awesome/blob/master/LICENSE.md"},{name:"Material Design Icons for JS/TypeScript",url:"https://materialdesignicons.com",licenseUrl:"https://github.com/Templarian/MaterialDesign-JS/blob/v7.4.47/LICENSE"},{name:"Solar Icons Set",url:"https://www.figma.com/community/file/1166831539721848736/Solar-Icons-Set",licenseUrl:"https://creativecommons.org/licenses/by/4.0"},{name:"Hand drawn minimal background",url:"https://www.freepik.com/free-vector/hand-drawn-minimal-background_15441932.htm",licenseUrl:"https://www.freepikcompany.com/legal"},{name:"Illustration of people working at the office",url:"https://www.freepik.com/free-vector/illustration-people-working-office_5161711.htm",licenseUrl:"https://www.freepikcompany.com/legal"},{name:"Meeting scenes at the office collection",url:"https://www.freepik.com/free-vector/meeting-scenes-office-collection_4085819.htm",licenseUrl:"https://www.freepikcompany.com/legal"}];function td(){return`MIT License

Copyright (c) 2020-2025 MaysWind (i@mayswind.net)

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
`}function ad(){return ed||[]}function Jf(){const{tt:e,formatUnixTimeToLongDateTime:t}=Ge(),a=ju(),n=da(),o=`${Oo()}`,s=q(null),r=q(!0),l=c(()=>s.value?Mr(s.value):""),i=c(()=>{const x=Nu();return x&&t(parseInt(x))}),u=c(()=>n.latestExchangeRates.data),m=c(()=>n.isUserCustomExchangeRates),b=c(()=>{const x=br();return x?e(`mapprovider.${x}`):""}),v=c(()=>zu()),I=c(()=>td().replace(/\r/g,"").split(`
`)),k=c(()=>ad());function U(){Mu().then(()=>{location.reload()})}function R(){a.checkIfClientVersionMatchServerVersion().then(({match:x,version:B})=>{s.value=B,r.value=x})}return{clientVersion:o,clientVersionMatchServerVersion:r,serverDisplayVersion:l,clientBuildTime:i,exchangeRatesData:u,isUserCustomExchangeRates:m,mapProviderName:b,mapProviderWebsite:v,licenseLines:I,thirdPartyLicenses:k,refreshBrowserCache:U,init:R}}const nd=["value","type","disabled","autofocus","onFocus","onBlur","onKeydown","onPaste","onChange"],_f=Jn({__name:"PinCodeInput",props:{modelValue:{},length:{},disabled:{type:Boolean},autofocus:{type:Boolean},autoConfirm:{type:Boolean},secure:{type:Boolean}},emits:["update:modelValue","pincode:confirm"],setup(e,{emit:t}){const a=e,n=t,{getCurrentNumeralSystemType:o}=Ge(),s=ro("pin-code-input"),r=q([]),l=c(()=>o()),i=c(()=>{let B="";for(const N of r.value)if(N.value)B+=N.value;else break;return B});function u(B,N){r.value.length=0;for(let K=0;K<B;K++){const D={value:"",inputType:"tel",inputTimer:null,focused:!1};N&&N[K]&&(D.value=N.charAt(K),a.secure&&(D.inputType="password")),r.value.push(D)}}function m(B,N){let K=B;for(let D=B,Y=0;D<r.value.length&&Y<N.length;D++,Y++){const g=N.charAt(Y);if(g<"0"||g>"9"){r.value[D].value="";break}r.value[D].value=g,b(D),K=D}v(K),i.value.length===length&&n("pincode:confirm",i.value)}function b(B){if(!a.secure)return;const N=r.value[B];if(N){if(!N.value){N.inputType="tel";return}N.inputTimer||(N.inputTimer=setTimeout(()=>{N.value?N.inputType="password":N.inputType="tel",N.inputTimer=null},300))}}function v(B){s.value&&s.value[B]&&(s.value[B].focus(),s.value[B].select())}function I(B){B>0&&v(B-1)}function k(B){B<a.length-1&&v(B+1)}function U(B,N){if(!(N.altKey||N.key.indexOf("F")===0&&(N.key.length===2||N.key.length===3))&&!(B<=0&&N.shiftKey&&N.key==="Tab")&&!(B>=a.length-1&&!N.shiftKey&&N.key==="Tab")){if(N.key==="Enter"&&i.value.length===a.length){n("pincode:confirm",i.value),N.preventDefault();return}if(N.key==="ArrowLeft"||N.shiftKey&&N.key==="Tab"){I(B),N.preventDefault();return}if(N.key==="ArrowRight"||!N.shiftKey&&N.key==="Tab"){k(B),N.preventDefault();return}if(N.key==="Home"){v(0),N.preventDefault();return}if(N.key==="End"){v(a.length-1),N.preventDefault();return}if(!((N.ctrlKey||N.metaKey)&&N.key==="v"||N.key==="Paste")){if(N.key==="Backspace"||N.key==="Delete"||N.key==="Del"){for(let K=B;K<r.value.length;K++)r.value[K].value="",b(K);N.code==="Backspace"&&I(B),N.preventDefault();return}if(N.key.length===1){let K="";ve.WesternArabicNumerals.isDigit(N.key)?K=N.key:l.value.isDigit(N.key)&&(K=l.value.replaceLocalizedDigitsToWesternArabicDigits(N.key)),K&&(r.value[B].value=K,b(B),k(B),a.autoConfirm&&i.value.length===a.length&&n("pincode:confirm",i.value))}N.preventDefault()}}}function R(B,N){if(!N.clipboardData){N.preventDefault();return}const K=N.clipboardData.getData("Text");if(!K){N.preventDefault();return}m(B,K),N.preventDefault()}function x(B,N){if(!N.target||!N.target.value){N.preventDefault();return}m(B,N.target.value),N.preventDefault()}return Ma(()=>a.length,B=>{u(B,a.modelValue)}),Ma(()=>a.modelValue,B=>{B!==i.value&&u(a.length,B)}),Ma(r,()=>{n("update:modelValue",i.value)},{deep:!0}),u(a.length,a.modelValue),(B,N)=>(Ta(),Ha("div",{class:"pin-codes-input",style:Pi(`grid-template-columns: repeat(${e.length}, minmax(0, 1fr))`)},[(Ta(!0),Ha(Fi,null,pl(r.value,(K,D)=>(Ta(),Ha("div",{class:In(["pin-code-input pin-code-input-outline",{"pin-code-input-focued":r.value[D].focused}]),key:D},[on("input",{ref_for:!0,ref:"pin-code-input",min:"0",maxlength:"1",pattern:"[0-9]*",value:r.value[D].value,type:r.value[D].inputType,disabled:e.disabled?!0:void 0,autofocus:e.autofocus&&D===0?!0:void 0,onFocus:Y=>r.value[D].focused=!0,onBlur:Y=>r.value[D].focused=!1,onKeydown:Y=>U(D,Y),onPaste:Y=>R(D,Y),onChange:Y=>x(D,Y)},null,40,nd)],2))),128))],4))}}),sd={class:"datetime-picker-display-dates"},od={key:0,class:"datetime-picker-alternate-date"},id=["onClick"],Zf=Jn({__name:"DateTimePicker",props:{modelValue:{},datetimePickerClass:{},isDarkMode:{type:Boolean},numeralSystem:{},enableTimePicker:{type:Boolean},disableYearSelect:{type:Boolean},vertical:{type:Boolean},noSwipeAndScroll:{type:Boolean},clearable:{type:Boolean},minDate:{},maxDate:{},disabledDates:{type:Function},showAlternateDates:{type:Boolean},presetRanges:{}},emits:["update:modelValue"],setup(e,{expose:t,emit:a}){const n=e,o=a,{tt:s,getAllMinWeekdayNames:r,getCurrentCalendarDisplayType:l,getCurrentNumeralSystemType:i,isLongDateMonthAfterYear:u,isLongTime24HourFormat:m,getCalendarDisplayShortYearFromUnixTime:b,getCalendarDisplayShortMonthFromUnixTime:v,getCalendarDisplayDayOfMonthFromUnixTime:I,getCalendarAlternateDate:k}=Ge(),U=Nt(),R=ro("datetimepicker"),x=ar(),B=c(()=>Yi(r(),N.value)),N=c(()=>U.currentUserFirstDayOfWeek),K=c(()=>u()),D=c(()=>m()),Y=c(()=>l().secondaryCalendarType),g=c(()=>yt(n.numeralSystem)?ve.valueOf(n.numeralSystem)??ve.Default:i()),A=c({get:()=>n.modelValue,set:X=>o("update:modelValue",X)}),w=c(()=>xt(n.modelValue));function P(X){if(n.showAlternateDates)return k({year:X.getFullYear(),month:X.getMonth()+1,day:X.getDate()})?.displayDate}function H(X){R.value?.switchView(X)}function _(X){return b(jt(X,1,1).getUnixTime(),g.value)}function Ae(X){return xt(A.value)?v(jt(A.value[0].getFullYear(),X+1,1).getUnixTime(),g.value):A.value?v(jt(A.value.getFullYear(),X+1,1).getUnixTime(),g.value):v(jt(new Date().getFullYear(),X+1,1).getUnixTime(),g.value)}function de(X){return I(jt(X.getFullYear(),X.getMonth()+1,X.getDate()).getUnixTime(),g.value)}return t({switchView:H}),(X,me)=>(Ta(),lo(Yn(Bi),{ref_key:"datetimepicker",ref:R,inline:"","auto-apply":"","enable-seconds":"","six-weeks":"center",class:In(`datetime-picker ${e.showAlternateDates&&Y.value?"datetime-picker-with-alternate-date":""} ${e.datetimePickerClass}`),config:e.noSwipeAndScroll?{noSwipe:!0}:void 0,dark:e.isDarkMode,vertical:e.vertical,"enable-time-picker":e.enableTimePicker,"disable-year-select":e.disableYearSelect,clearable:!!e.clearable,"year-range":Yn(x),"day-names":B.value,"week-start":N.value,"year-first":K.value,is24:D.value,"min-date":e.minDate,"max-date":e.maxDate,"disabled-dates":e.disabledDates,"month-change-on-scroll":!e.noSwipeAndScroll,range:w.value?{partialRange:!1}:void 0,"preset-dates":e.presetRanges,modelValue:A.value,"onUpdate:modelValue":me[0]||(me[0]=ae=>A.value=ae)},{year:pa(({value:ae})=>[Ga(Qt(_(ae)),1)]),"year-overlay-value":pa(({value:ae})=>[Ga(Qt(_(ae)),1)]),month:pa(({value:ae})=>[Ga(Qt(Ae(ae)),1)]),"month-overlay-value":pa(({value:ae})=>[Ga(Qt(Ae(ae)),1)]),day:pa(({date:ae})=>[on("div",sd,[on("span",null,Qt(de(ae)),1),e.showAlternateDates&&Y.value&&P(ae)?(Ta(),Ha("span",od,Qt(P(ae)),1)):hn("",!0)])]),"am-pm-button":pa(({toggle:ae,value:T})=>[on("button",{class:"dp__pm_am_button",tabindex:"0",onClick:ae},Qt(Yn(s)(`datetime.${T}.content`)),9,id)]),_:1},8,["class","config","dark","vertical","enable-time-picker","disable-year-select","clearable","year-range","day-names","week-start","year-first","is24","min-date","max-date","disabled-dates","month-change-on-scroll","range","preset-dates","modelValue"]))}}),qf=Jn({__name:"MonthPicker",props:{modelValue:{},monthPickerClass:{},isDarkMode:{type:Boolean},clearable:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){const a=e,n=t,{isLongDateMonthAfterYear:o,getCalendarDisplayShortYearFromUnixTime:s,getCalendarDisplayShortMonthFromUnixTime:r}=Ge(),l=ar(),i=c(()=>o()),u=c({get:()=>xt(a.modelValue)?a.modelValue.map(U=>b(U)):b(a.modelValue),set:U=>{xt(U)?n("update:modelValue",U.map(R=>v(R))):n("update:modelValue",v(U))}}),m=c(()=>xt(a.modelValue));function b(U){return{year:U.year,month:U.month0base}}function v(U){return{year:U.year,month0base:U.month}}function I(U){return s(jt(U,1,1).getUnixTime())}function k(U){return xt(u.value)?r(jt(u.value[0].year,U+1,1).getUnixTime()):r(jt(u.value.year,U+1,1).getUnixTime())}return(U,R)=>(Ta(),lo(Yn(Bi),{inline:"","auto-apply":"","month-picker":"",class:In(e.monthPickerClass),dark:e.isDarkMode,clearable:!!e.clearable,"year-range":Yn(l),"year-first":i.value,range:m.value?{partialRange:!1}:void 0,modelValue:u.value,"onUpdate:modelValue":R[0]||(R[0]=x=>u.value=x)},{year:pa(({value:x})=>[Ga(Qt(I(x)),1)]),"year-overlay-value":pa(({value:x})=>[Ga(Qt(I(x)),1)]),month:pa(({value:x})=>[Ga(Qt(k(x)),1)]),"month-overlay-value":pa(({value:x})=>[Ga(Qt(k(x)),1)]),_:1},8,["class","dark","clearable","year-range","year-first","range","modelValue"]))}}),rd={class:"transaction-calendar-daily-amounts"},ld={key:0,class:"transaction-calendar-alternate-date"},cd={key:1,class:"transaction-calendar-daily-amount text-income"},ud={key:2,class:"transaction-calendar-daily-amount text-expense"},Xf=Jn({__name:"TransactionCalendar",props:{modelValue:{},isDarkMode:{type:Boolean},defaultCurrency:{type:[String,Boolean]},minDate:{},maxDate:{},weekDayNameType:{},dailyTotalAmounts:{},readonly:{type:Boolean},calendarClass:{},dayHasTransactionClass:{}},emits:["update:modelValue"],setup(e,{emit:t}){const a=e,n=t,{getAllLongWeekdayNames:o,getAllShortWeekdayNames:s,getCalendarDisplayDayOfMonthFromUnixTime:r,getCalendarAlternateDates:l,formatAmountToLocalizedNumeralsWithCurrency:i}=Ge(),u=Nt(),m=c(()=>Yi(a.weekDayNameType==="short"?s():o(),b.value)),b=c(()=>u.currentUserFirstDayOfWeek),v=c({get:()=>a.modelValue,set:x=>n("update:modelValue",x)}),I=c(()=>{const x=a.modelValue?a.modelValue.split("-"):null;if(!x||x.length!==3)return;const B=l({year:parseInt(x[0]),month1base:parseInt(x[1])});if(!B)return;const N={};for(const K of B)N[`${K.year}-${K.month}-${K.day}`]=K.displayDate;return N});function k(x){const B=St(yn(On(x),Ct(),_t()));return!a.dailyTotalAmounts||!a.dailyTotalAmounts[B.getGregorianCalendarDay()]}function U(x,B,N,K){const D=i(x,B);return N+D+(K?xa:"")}function R(x){return r(jt(x.getFullYear(),x.getMonth()+1,x.getDate()).getUnixTime())}return(x,B)=>{const N=yl("vue-date-picker");return Ta(),lo(N,{inline:"","auto-apply":"","model-type":"yyyy-MM-dd",class:In(`transaction-calendar ${I.value?"transaction-calendar-with-alternate-date":""} ${e.calendarClass}`),config:{noSwipe:!0},readonly:e.readonly,dark:e.isDarkMode,"enable-time-picker":!1,clearable:!1,"day-names":m.value,"week-start":b.value,"min-date":e.minDate,"max-date":e.maxDate,"disabled-dates":k,"prevent-min-max-navigation":!0,"hide-offset-dates":!0,"disable-month-year-select":!0,"month-change-on-scroll":!1,"month-change-on-arrows":!1,modelValue:v.value,"onUpdate:modelValue":B[0]||(B[0]=K=>v.value=K)},{day:pa(({day:K,date:D})=>[on("div",rd,[on("span",{class:In(e.dayHasTransactionClass&&e.dailyTotalAmounts&&e.dailyTotalAmounts[K]?e.dayHasTransactionClass:void 0)},Qt(R(D)),3),I.value&&I.value[`${D.getFullYear()}-${D.getMonth()+1}-${D.getDate()}`]?(Ta(),Ha("span",ld,Qt(I.value[`${D.getFullYear()}-${D.getMonth()+1}-${D.getDate()}`]),1)):hn("",!0),e.dailyTotalAmounts&&e.dailyTotalAmounts[K]&&e.dailyTotalAmounts[K].income?(Ta(),Ha("span",cd,Qt(U(e.dailyTotalAmounts[K].income,e.defaultCurrency,"",e.dailyTotalAmounts[K].incompleteIncome)),1)):hn("",!0),e.dailyTotalAmounts&&e.dailyTotalAmounts[K]&&e.dailyTotalAmounts[K].expense?(Ta(),Ha("span",ud,Qt(U(e.dailyTotalAmounts[K].expense,e.defaultCurrency,"",e.dailyTotalAmounts[K].incompleteExpense)),1)):hn("",!0)])]),_:1},8,["class","readonly","dark","day-names","week-start","min-date","max-date","modelValue"])}}});function Qf(e){const t=c(()=>{let l=Cs;return e.defaultColor&&(l=e.defaultColor),e.iconType==="account"?o(e.color,l,e.additionalColorAttr):e.iconType==="category"?s(e.color,l,e.additionalColorAttr):r(e.color,l,e.additionalColorAttr)});function a(l){Ie(l)&&(l=l.toString());const i=Zi[l];return i?i.icon:rs.icon}function n(l){Ie(l)&&(l=l.toString());const i=Xi[l];return i?i.icon:Xs.icon}function o(l,i,u){let m=i;l&&l!==vn&&(m=`#${l}`);const b={color:m};return u&&(b[u]=l),e.size&&(b["font-size"]=e.size),b}function s(l,i,u){let m=i;l&&l!==$n&&(m=`#${l}`);const b={color:m};return u&&(b[u]=l),e.size&&(b["font-size"]=e.size),b}function r(l,i,u){let m=i;l&&l!==Qi&&(m=`#${l}`);const b={color:m};return u&&(b[u]=l),e.size&&(b["font-size"]=e.size),b}return{style:t,getAccountIcon:a,getCategoryIcon:n}}function dd(e,t,a,n,o,s){const{getCurrentNumeralSystemType:r,getCurrentDecimalSeparator:l,getCurrentDigitGroupingSymbol:i}=Ge(),u=q(a),m=c(()=>r());function b(I){if(I.altKey||I.ctrlKey||I.metaKey||I.key.indexOf("F")===0&&(I.key.length===2||I.key.length===3)||I.key==="ArrowLeft"||I.key==="ArrowRight"||I.key==="Home"||I.key==="End"||I.key==="Tab"||I.key==="Backspace"||I.key==="Delete"||I.key==="Del")return;if(e.readonly||e.disabled){I.preventDefault();return}const k=i(),U=l();if(!ve.WesternArabicNumerals.isDigit(I.key)&&!m.value.isDigit(I.key)&&I.key!=="-"&&I.key!==U){I.preventDefault();return}if(t===0&&I.key===U){I.preventDefault();return}if(!I.target)return;const R=I.target;let x=R.value;if(x.indexOf(k)>=0&&(x=uo(x,k)),I.key==="-"&&x.lastIndexOf("-")>0){const K=x.lastIndexOf("-");R.value=x.substring(0,K)+x.substring(K+1,x.length),u.value=R.value,I.preventDefault();return}if(I.key===U&&x.indexOf(U)!==x.lastIndexOf(U)){const K=x.lastIndexOf(U);R.value=x.substring(0,K)+x.substring(K+1,x.length),u.value=R.value,I.preventDefault();return}if(I.key===U&&(x.indexOf(U)===0||x.indexOf(U)===1&&x.charAt(0)==="-")){const K=x.charAt(0)==="-";K&&(x=x.substring(1)),x=(K?`-${m.value.digitZero}`:m.value.digitZero)+x,R.value=x,u.value=R.value,I.preventDefault();return}let B=0;const N=x.indexOf(U);if(N>=0)B=x.length-x.indexOf(U)-1;else if(x.startsWith(m.value.digitZero)&&x.length>=2||x.startsWith(`-${m.value.digitZero}`)&&x.length>=3){const K=x.charAt(0)==="-";for(K&&(x=x.substring(1));x.charAt(0)===m.value.digitZero&&(x.length>=2||I.key!==m.value.digitZero);)x=x.substring(1);R.value=(K?"-":"")+x,u.value=R.value,I.preventDefault();return}if(t>0&&B>t){R.value=x.substring(0,Math.min(N+t+1,x.length-1)),u.value=R.value,I.preventDefault();return}else if(t===0&&N>=0){R.value=x.substring(0,N),u.value=R.value,I.preventDefault();return}try{const K=n(x),D=s(K,x,N>=0);D!==x&&(R.value=D,u.value=D,I.preventDefault())}catch(K){Z.warn("cannot parse input number, original value is "+x,K),R.value=m.value.digitZero}}function v(I){if(!I.clipboardData||e.readonly||e.disabled){I.preventDefault();return}const k=I.clipboardData.getData("Text");if(!k){I.preventDefault();return}const U=n(k),R=o(U),x=l(),B=k.indexOf(x)>=0;u.value=s(U,R,B),I.preventDefault()}return{currentValue:u,onKeyUpDown:b,onPaste:v}}function jf(e,t){const{getCurrentNumeralSystemType:a,getCurrentDecimalSeparator:n,getCurrentDigitGroupingSymbol:o}=Ge(),{currentValue:s,onKeyUpDown:r,onPaste:l}=dd(e,e.maxDecimalCount??-1,b(e.modelValue),u,b,m),i=c(()=>a());function u(v){if(!v)return 0;const I=n();let k="";for(let U=0;U<v.length;U++){const R=v.charAt(U);if(!ve.WesternArabicNumerals.isDigit(R)&&!i.value.isDigit(R)&&R!=="-"&&R!==I)break;k+=R}return k=i.value.replaceLocalizedDigitsToWesternArabicDigits(k),I!=="."&&(k=ka(k,I,".")),parseFloat(k)}function m(v,I){if(Ie(e.minValue)&&v<e.minValue)return b(e.minValue,i.value);if(Ie(e.maxValue)&&v>e.maxValue)return b(e.maxValue,i.value);const k=n(),U=o();return ka(uo(I,U),".",k)}function b(v,I){if(yt(I)||(I=a()),!Number.isNaN(v)&&Number.isFinite(v)){const k=n();return Ie(e.maxDecimalCount)&&e.maxDecimalCount>=0?ka(I.replaceWesternArabicDigitsToLocalizedDigits(v.toFixed(e.maxDecimalCount)),".",k):ka(I.replaceWesternArabicDigitsToLocalizedDigits(v.toString(10)),".",k)}return I.digitZero}return Ma(()=>e.modelValue,v=>{const I=u(s.value);if(v!==I){const k=b(v,i.value);k===i.value.digitZero&&s.value===""||(s.value=k)}}),Ma(s,v=>{let I,k="";if(v){const U=n();if(v[0]==="-"||v[0]===U?I=ve.detect(v.charAt(1)):I=ve.detect(v.charAt(0)),I&&(I.type===ve.WesternArabicNumerals.type||I.type===i.value.type)){for(let R=0;R<v.length;R++){const x=v.charAt(R);if(!ve.WesternArabicNumerals.isDigit(x)&&!i.value.isDigit(x)&&x!=="-"&&x!==U)break;k+=v[R]}k=i.value.replaceWesternArabicDigitsToLocalizedDigits(k)}else(v==="-"||v===U||v===`-${U}`)&&(k=v)}if(k!==v)s.value=k;else{let U=u(k);(Number.isNaN(U)||!Number.isFinite(U))&&(U=0),t("update:modelValue",U)}}),{currentValue:s,onKeyUpDown:r,onPaste:l}}const xi=6,Ei=1e6,ki="000000",md=1e4,Ui={"+":1,"-":1,"*":2,"/":2};function fd(e){const t=e.indexOf(".");if(t<0)return parseInt(e+ki);const a=e.substring(0,t),n=e.substring(t+1);if(n.length>xi)throw new Error("Numeric Overflow");const o=(n+ki).substring(0,xi);return parseInt(a+o)}function wr(e){return Math.trunc(e/md)}function Oi(e){const t=wr(e);if(t>Dr||t<Cr)throw new Error("Numeric Overflow")}function gd(e){const t=[],a=[];let n="",o=!0;e=ka(e," ","");for(let s=0;s<e.length;s++){const r=e[s];if("0"<=r&&r<="9"||r==="."){n+=r;continue}else if(r==="-"&&s+1<e.length&&"0"<=e[s+1]&&e[s+1]<="9"&&n.length===0&&o){n+=r;continue}switch(n.length>0&&(t.push(n),n="",o=!1),r){case"+":case"-":case"*":case"/":if(r==="-"&&o){n+=r;continue}for(;a.length>0;){const i=a[a.length-1];if(i==="(")break;if((i==="+"||i==="-"||i==="*"||i==="/")&&Ui[i]>=Ui[r])t.push(i),a.pop();else break}a.push(r),o=!0;break;case"(":a.push(r),o=!0;break;case")":let l=!1;for(;a.length>0;){const i=a.pop();if(i==="("){l=!0;break}t.push(i)}if(!l)return Z.warn(`cannot parse expression "${e}", because missing left parenthesis`),null;o=!1;break;default:return Z.warn(`cannot parse expression "${e}", because containing unknown token "${r}"`),null}}for(n.length>0&&t.push(n);a.length>0;){const s=a.pop();if(s==="(")return Z.warn(`cannot parse expression "${e}", because missing right parenthesis`),null;t.push(s)}return t}function pd(e){const t=[];for(let a=0;a<e.length;a++){const n=e[a];switch(n){case"+":case"-":case"*":case"/":if(t.length<2)return Z.warn(`cannot evaluate expression "${e.join(" ")}", because not enough operands`),null;const o=t.pop(),s=t.pop();let r;switch(n){case"+":r=s+o;break;case"-":r=s-o;break;case"*":r=Math.trunc(s*o/Ei);break;case"/":if(o===0)return Z.warn(`cannot evaluate expression "${e.join(" ")}", because division by zero`),null;r=Math.trunc(s*Ei/o);break;default:return null}Oi(r),t.push(r);break;default:const l=fd(n);Oi(l),t.push(l);break}}return t.length!==1?(Z.warn(`cannot evaluate expression "${e.join(" ")}", because missing operator`),null):t[0]}function eg(e){if(!e)return;const t=gd(e);if(!t)return;const a=pd(t);if(a!==null)return wr(a)}function tg(e,t){const{getCurrentLanguageTag:a,getCurrentLanguageDisplayName:n,getAllLanguageOptions:o,getLanguageInfo:s,setLanguage:r}=Ge(),l=mt(),i=c(()=>o(!!e.includeSystemDefault)),u=c({get:()=>a(),set:I=>{const k=r(I);l.updateLocalizedDefaultSettings(k)}}),m=c(()=>{if(e.useModelValue&&e.modelValue){const I=s(e.modelValue);return I?I.displayName:""}else return n()});function b(I){e.useModelValue?t("update:modelValue",I):u.value=I}function v(I){return e.useModelValue?e.modelValue===I:u.value===I}return{allLanguages:i,currentLocale:u,currentLanguageName:m,updateLanguage:b,isLanguageSelected:v}}function ag(){const{getAllMeridiemIndicators:e,getCurrentNumeralSystemType:t,isLongTime24HourFormat:a,isLongTimeMeridiemIndicatorFirst:n,isLongTimeHourTwoDigits:o,isLongTimeMinuteTwoDigits:s,isLongTimeSecondTwoDigits:r}=Ge(),l=q(a()),i=q(o()),u=q(s()),m=q(r()),b=q(n()||!1),v=c(()=>t()),I=c(()=>e());function k(x,B){let N=x.toString();return B&&(N=N.padStart(2,ve.WesternArabicNumerals.digitZero)),v.value.replaceWesternArabicDigitsToLocalizedDigits(N)}function U(x,B){const N=[],K=l.value?0:1,D=l.value?23:11;for(let Y=0;Y<x;Y++){l.value||N.push({value:k(12,B),itemsIndex:Y});for(let g=K;g<=D;g++)N.push({value:k(g,B),itemsIndex:Y})}return N}function R(x,B){const N=[];for(let K=0;K<x;K++)for(let D=0;D<60;D++)N.push({value:k(D,B),itemsIndex:K});return N}return{is24Hour:l,isHourTwoDigits:i,isMinuteTwoDigits:u,isSecondTwoDigits:m,isMeridiemIndicatorFirst:b,meridiemItems:I,getDisplayTimeValue:k,generateAllHours:U,generateAllMinutesOrSeconds:R}}function yd(e){if(!e.modelValue)return _e.Default.value;const t=_e.valueOf(e.modelValue);return t?t.value:_e.Default.value}function ng(e){const{getCurrentNumeralSystemType:t,formatGregorianTextualMonthDayToGregorianLikeLongMonthDay:a}=Ge(),n=m=>m.getMonth()===1&&m.getDate()===29,o=q(yd(e)),s=c(()=>yt(e.numeralSystem)?ve.valueOf(e.numeralSystem)??ve.Default:t()),r=c({get:()=>{const b=_e.valueOf(o.value)?.toMonthDay()??_e.Default.toMonthDay();return new Date(new Date().getFullYear(),b.month-1,b.day)},set:m=>{const b=_e.of(m.getMonth()+1,m.getDate());b?o.value=b.value:o.value=_e.Default.value}}),l=c(()=>{let m=_e.valueOf(o.value);return m||(m=_e.Default),a(m.toMonthDashDayString(),s.value)}),i=c(()=>$a(Ea())),u=c(()=>$a(an()));return{disabledDates:n,selectedFiscalYearStart:o,selectedFiscalYearStartValue:r,displayFiscalYearStartDate:l,allowedMinDate:i,allowedMaxDate:u}}function sg(e,t){const a=[];let n=0;for(const[o,s]of Wt(e))a[n]?a[n]&&a[n].length>=t&&(n++,a[n]=[]):a[n]=[],a[n].push({id:o,icon:s.icon});return a}function hd(e){const{ti:t}=Ge(),a=q(""),n=c(()=>{let u=0;for(const m of e.items)e.primaryHiddenField&&m[e.primaryHiddenField]||u++;return u}),o=c(()=>{const u=[],m=e.items,b=a.value?.toLowerCase()??"";for(const v of m)if(!(e.primaryHiddenField&&v[e.primaryHiddenField])){if(!e.enableFilter||!b){u.push(v);continue}if(e.primaryTitleField&&t(v[e.primaryTitleField],!!e.primaryTitleI18n).toLowerCase().indexOf(b)>=0){u.push(v);continue}e.primarySubItemsField&&s(v).length>0&&u.push(v)}return u});function s(u){const m=[];if(!u||!e.primarySubItemsField)return m;const b=u[e.primarySubItemsField];let v=!1;e.primaryTitleField&&(v=t(u[e.primaryTitleField],!!e.primaryTitleI18n).toLowerCase().indexOf(a.value.toLowerCase())>=0);for(const I of b)if(!(e.secondaryHiddenField&&I[e.secondaryHiddenField])){if(!e.enableFilter||!a.value){m.push(I);continue}if(v){m.push(I);continue}e.secondaryTitleField&&a.value&&t(I[e.secondaryTitleField],!!e.secondaryTitleI18n).toLowerCase().indexOf(a.value.toLowerCase())>=0&&m.push(I)}return m}function r(u,m){return e.secondaryValueField?u===m[e.secondaryValueField]:u===m}function l(u,m){return u&&m&&m[e.primarySubItemsField]?Ri(m[e.primarySubItemsField],u,e.secondaryValueField):null}function i(u,m){e.secondaryValueField?u.value=m[e.secondaryValueField]:u.value=m}return{filterContent:a,visibleItemsCount:n,filteredItems:o,getFilteredSubItems:s,isSecondaryValueSelected:r,getSelectedSecondaryItem:l,updateCurrentSecondaryValue:i}}function og(e){const{filterContent:t,visibleItemsCount:a,filteredItems:n,getFilteredSubItems:o,isSecondaryValueSelected:s,getSelectedSecondaryItem:r,updateCurrentSecondaryValue:l}=hd(e);function i(b){return Ml(e.items,e.primarySubItemsField,e.primaryValueField,e.primaryHiddenField,e.secondaryValueField,e.secondaryHiddenField,b)}function u(b){return e.primaryValueField?Ri(e.items,b,e.primaryValueField):b}function m(b,v){e.primaryValueField?b.value=v[e.primaryValueField]:b.value=v}return{filterContent:t,visibleItemsCount:a,filteredItems:n,getFilteredSubItems:o,getCurrentPrimaryValueBySecondaryValue:i,isSecondaryValueSelected:s,getSelectedPrimaryItem:u,getSelectedSecondaryItem:r,updateCurrentPrimaryValue:m,updateCurrentSecondaryValue:l}}function ig(){const{getAllWeekDays:e,getAllTransactionScheduledFrequencyTypes:t,getMonthdayShortName:a}=Ge(),n=Nt(),o=c(()=>t()),s=c(()=>e(n.currentUserFirstDayOfWeek)),r=c(()=>{const i=[];for(let u=1;u<=28;u++)i.push({day:u,displayName:a(u)});return i});function l(i){const u=i.split(","),m=[];for(const b of u)b&&m.push(parseInt(b));return Il(m)}return{allTransactionScheduledFrequencyTypes:o,allWeekDays:s,allAvailableMonthDays:r,getFrequencyValues:l}}function rg(e){const{formatAmountToLocalizedNumeralsWithCurrency:t,formatPercentToLocalizedNumerals:a}=Ge(),n=q(0),o=c(()=>{let s=0;for(const l of e.items){const i=l[e.valueField];Ie(i)&&i>0&&(!e.hiddenField||!l[e.hiddenField])&&(s+=i)}const r=[];for(const l of e.items){const i=l[e.valueField],u=e.percentField?l[e.percentField]:-1;if(Ie(i)&&i>0&&(!e.hiddenField||!l[e.hiddenField])&&(!e.minValidPercent||i/s>e.minValidPercent)){const m={id:e.idField&&l[e.idField]?l[e.idField]:l[e.nameField],name:e.idField&&l[e.idField]?l[e.idField]:l[e.nameField],displayName:l[e.nameField],value:i,percent:Ie(u)&&u>=0?u:i/s*100,actualPercent:i/s,color:Nr(e.colorField&&l[e.colorField]?l[e.colorField]:li[r.length%li.length]),sourceItem:l};m.displayPercent=a(m.percent,2,"&lt;0.01"),m.displayValue=t(m.value,e.defaultCurrency),r.push(m)}}return r});return Ma(()=>e.items,()=>{n.value=0}),{selectedIndex:n,validItems:o}}function Td(e){let t=Xt(),a=Va();return e.minTime&&(t=e.minTime),e.maxTime&&(a=e.maxTime),{minDate:t,maxDate:a}}function lg(e){const{tt:t,formatUnixTimeToLongDateTime:a}=Ge(),n=Nt(),{minDate:o,maxDate:s}=Td(e),r=q([$a(Wa(o,Ct(),_t())),$a(Wa(s,Ct(),_t()))]),l=c(()=>n.currentUserFirstDayOfWeek),i=c(()=>{const v=yn(On(r.value[0]),Ct(),_t());return a(v)}),u=c(()=>{const v=yn(On(r.value[1]),Ct(),_t());return a(v)}),m=c(()=>{const v=[];return[Q.Today,Q.LastSevenDays,Q.LastThirtyDays,Q.ThisWeek,Q.ThisMonth,Q.ThisYear,Q.LastYear,Q.ThisFiscalYear,Q.LastFiscalYear].forEach(I=>{const k=Oa(I.type,l.value,n.currentUserFiscalYearStart);v.push({label:t(I.name),value:[$a(Wa(k.minTime,Ct(),_t())),$a(Wa(k.maxTime,Ct(),_t()))]})}),v});function b(){if(!r.value[0]||!r.value[1])return null;const v=r.value[0],I=r.value[1];let k=On(v),U=On(I);if(k<0||U<0)throw new Error("Date is too early");return k=yn(k,Ct(),_t()),U=yn(U,Ct(),_t()),{minUnixTime:k,maxUnixTime:U}}return{dateRange:r,beginDateTime:i,endDateTime:u,presetRanges:m,getFinalDateRange:b}}function vd(e){let t=ui(Ea()),a=ui(Va());if(e.minTime){const n=Wn(e.minTime);n&&(t=n)}if(e.maxTime){const n=Wn(e.maxTime);n&&(a=n)}return{minDate:t,maxDate:a}}function cg(e){const{formatUnixTimeToGregorianLikeLongYearMonth:t}=Ge(),{minDate:a,maxDate:n}=vd(e),o=q([a,n]),s=c(()=>t(_a(o.value[0]))),r=c(()=>t(Hn(o.value[1])));function l(){if(!o.value[0]||!o.value[1])return null;if(o.value[0].year<=0||o.value[0].month0base<0||o.value[1].year<=0||o.value[1].month0base<0)throw new Error("Date is too early");const i=di(o.value[0]),u=di(o.value[1]);return{minYearMonth:i,maxYearMonth:u}}return{dateRange:o,beginDateTime:s,endDateTime:r,getFinalMonthRange:l}}function ug(e){const{formatUnixTimeToShortDate:t,formatUnixTimeToGregorianLikeShortYear:a,formatUnixTimeToGregorianLikeShortYearMonth:n,formatUnixTimeToGregorianLikeYearQuarter:o,formatUnixTimeToGregorianLikeFiscalYear:s}=Ge(),r=c(()=>{if(!e.items||e.items.length<1)return null;let m=Number.MAX_SAFE_INTEGER,b=0,v=0,I=0,k=0;for(const U of e.items)U.time<m&&(m=U.time,v=U.accountOpeningBalance,I=U.accountClosingBalance),U.time>b&&(b=U.time,k=U.accountClosingBalance);return m>=Number.MAX_SAFE_INTEGER||b<=0?null:{minUnixTime:m,maxUnixTime:b,minUnixTimeOpeningBalance:v,minUnixTimeClosingBalance:I,maxUnixTimeClosingBalance:k}}),l=c(()=>{if(!r.value)return[];if(e.dateAggregationType===Xe.Day.type)return dr(r.value.minUnixTime,r.value.maxUnixTime);{const m=Sn(r.value.minUnixTime),b=Sn(r.value.maxUnixTime);return xo(m,b,e.fiscalYearStart,e.dateAggregationType)}}),i=c(()=>{const m=[];if(!r.value||!l.value||l.value.length<1||!e.items||e.items.length<1)return m;const b={};for(const B of e.items){let N=0;if(e.dateAggregationType===Xe.Year.type)N=xc(B.time);else if(e.dateAggregationType===Xe.FiscalYear.type)N=Mn(B.time,e.fiscalYearStart);else if(e.dateAggregationType===Xe.Quarter.type)N=Ec(B.time);else if(e.dateAggregationType===Xe.Month.type)N=Do(B.time);else if(e.dateAggregationType===Xe.Day.type)N=lr(B.time);else return m;const K=b[N]||[];K.push(B),b[N]=K}let v=r.value.minUnixTimeOpeningBalance,I=r.value.minUnixTimeClosingBalance,k=I,U=I,R=I,x=I;for(const B of l.value){const N=b[B.minUnixTime];let K="";if(e.dateAggregationType===Xe.Year.type)K=a(B.minUnixTime);else if(e.dateAggregationType===Xe.FiscalYear.type)K=s(B.minUnixTime);else if(e.dateAggregationType===Xe.Quarter.type)K=o(B.minUnixTime);else if(e.dateAggregationType===Xe.Month.type)K=n(B.minUnixTime);else if(e.dateAggregationType===Xe.Day.type)K=t(B.minUnixTime);else return m;if(xt(N)){if(N.length<1)continue;N.sort(function(H,_){return H.time-_.time});const D=N[0].accountOpeningBalance,Y=N[N.length-1].accountClosingBalance,g=Math.min(...N.map(H=>H.accountClosingBalance)),A=Math.max(...N.map(H=>H.accountClosingBalance)),w=N[Math.floor(N.length/2)].accountClosingBalance,P=Math.trunc(Wc(N.map(H=>H.accountClosingBalance))/N.length);e.account.isAsset?(v=D,I=Y,k=g,U=A,R=w,x=P):e.account.isLiability?(v=-D,I=-Y,k=-g,U=-A,R=-w,x=-P):(v=D,I=Y,k=g,U=A,R=w,x=P)}m.push({displayDate:K,openingBalance:v,closingBalance:I,minimumBalance:k,maximumBalance:U,medianBalance:R,averageBalance:x}),v=I}return m}),u=c(()=>!i.value||i.value.length<1?[]:i.value.map(m=>m.displayDate));return{allDateRanges:l,allDataItems:i,allDisplayDateRanges:u}}function dg(){return ne.generateQrCodeUrl("mobile_url")}class ia{static allInstances=[];static Small=new ia(0,"font-size-small");static Default=new ia(1,"font-size-default");static Large=new ia(2,"font-size-large");static XLarge=new ia(3,"font-size-x-large");static XXLarge=new ia(4,"font-size-xx-large");static XXXLarge=new ia(5,"font-size-xxx-large");static XXXXLarge=new ia(6,"font-size-xxxx-large");static MinimumFontSize=ia.Small;static MaximumFontSize=ia.XXXXLarge;type;className;constructor(t,a){this.type=t,this.className=a,ia.allInstances.push(this)}static values(){return ia.allInstances}}const mg="preview-",fg=Ht("environments",()=>({framework7DarkMode:q(void 0)}));export{Iu as $,$m as A,Gl as B,Ms as C,af as D,Rd as E,Z as F,Yd as G,Hm as H,en as I,Jt as J,qs as K,xa as L,ue as M,sf as N,sa as O,Ca as P,cn as Q,He as R,An as S,io as T,Q as U,dm as V,Bd as W,Mt as X,cf as Y,Ss as Z,qa as _,Ye as a,um as a$,$u as a0,df as a1,Gu as a2,Aa as a3,Pa as a4,Ut as a5,Na as a6,ra as a7,Va as a8,Ct as a9,_t as aA,yt as aB,ht as aC,gs as aD,Un as aE,Dt as aF,Hs as aG,aa as aH,Hd as aI,$n as aJ,om as aK,ei as aL,wn as aM,Kn as aN,Lm as aO,wm as aP,un as aQ,mf as aR,Sr as aS,ff as aT,gf as aU,Ve as aV,Qc as aW,rm as aX,lm as aY,cm as aZ,im as a_,Wu as aa,rf as ab,Ja as ac,br as ad,Tm as ae,pe as af,Em as ag,xm as ah,uf as ai,lf as aj,Wd as ak,Zm as al,$t as am,ut as an,Ze as ao,Wt as ap,jo as aq,Ie as ar,rt as as,nn as at,Kt as au,Jm as av,_m as aw,Cl as ax,kt as ay,fa as az,Eo as b,Sf as b$,vr as b0,Me as b1,pf as b2,bu as b3,Bm as b4,Rm as b5,Ym as b6,Pm as b7,Km as b8,zm as b9,bm as bA,Am as bB,Tf as bC,Xe as bD,pr as bE,xt as bF,Ll as bG,Nr as bH,li as bI,It as bJ,Si as bK,ka as bL,Vm as bM,Af as bN,Ee as bO,z as bP,Rt as bQ,Sn as bR,Gt as bS,bf as bT,Zi as bU,Vd as bV,If as bW,tn as bX,ta as bY,Cf as bZ,Df as b_,yf as ba,xd as bb,Ed as bc,kd as bd,Ud as be,hf as bf,Zt as bg,ga as bh,tm as bi,ma as bj,Oa as bk,sm as bl,am as bm,St as bn,yn as bo,lr as bp,Ts as bq,em as br,ua as bs,mr as bt,_a as bu,Hn as bv,jd as bw,Qd as bx,oo as by,Cm as bz,mt as c,og as c$,Xi as c0,Jd as c1,Nm as c2,Mf as c3,km as c4,Um as c5,Lf as c6,Nf as c7,Ef as c8,kf as c9,Vf as cA,ve as cB,Jf as cC,Qf as cD,jf as cE,dd as cF,ql as cG,Cr as cH,Dr as cI,Je as cJ,eg as cK,tg as cL,ag as cM,On as cN,$a as cO,va as cP,nm as cQ,Xd as cR,mi as cS,_d as cT,Wa as cU,qd as cV,Zd as cW,ng as cX,vf as cY,Nd as cZ,sg as c_,Ff as ca,Pf as cb,wu as cc,ym as cd,Im as ce,Fo as cf,Sa as cg,Bf as ch,Cd as ci,jc as cj,Rf as ck,Yf as cl,zf as cm,Kf as cn,zd as co,mn as cp,Gd as cq,Kd as cr,Ua as cs,tf as ct,$d as cu,Gf as cv,$f as cw,da as cx,Hf as cy,Wf as cz,Nt as d,Ri as d0,Sd as d1,Ld as d2,ig as d3,Il as d4,rg as d5,lg as d6,ui as d7,ya as d8,cg as d9,Fm as dA,wf as dB,xf as dC,Uf as dD,Of as dE,Fd as dF,Od as dG,Wn as da,ug as db,Et as dc,dg as dd,qm as de,of as df,Uo as dg,Sm as dh,Mm as di,_f as dj,Zf as dk,qf as dl,Xf as dm,ia as dn,mg as dp,Dd as dq,Pd as dr,fg as ds,_e as dt,hd as du,Gn as dv,Xm as dw,ls as dx,Md as dy,Om as dz,Gm as e,vm as f,Wm as g,Qm as h,Ke as i,hm as j,Ii as k,mm as l,pm as m,fm as n,gm as o,jm as p,wd as q,Kl as r,Vn as s,Oo as t,Ge as u,eu as v,ef as w,Dm as x,nf as y,$l as z};
